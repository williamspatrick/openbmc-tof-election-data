{
    "project": "openbmc/docs",
    "branch": "master",
    "topic": "http-redirect",
    "id": "I7503e0dcd7f8fb9f7493b696e3f0ebe6d4ee7f10",
    "number": 24173,
    "subject": "HTTP redirect design: Redirect HTTP requests to HTTPS",
    "owner": {
        "name": "Joseph Reynolds",
        "email": "joseph-reynolds@charter.net",
        "username": "joseph-reynolds"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/docs/+/24173",
    "hashtags": [],
    "createdOn": 1565042211,
    "lastUpdated": 1665658029,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1565042211,
            "reviewer": {
                "name": "Joseph Reynolds",
                "email": "joseph-reynolds@charter.net",
                "username": "joseph-reynolds"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1565042593,
            "reviewer": {
                "name": "Joseph Reynolds",
                "email": "joseph-reynolds@charter.net",
                "username": "joseph-reynolds"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1565719018,
            "reviewer": {
                "name": "B. J. Wyman",
                "email": "bjwyman@gmail.com",
                "username": "bjwyman"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1565813359,
            "reviewer": {
                "name": "Joseph Reynolds",
                "email": "joseph-reynolds@charter.net",
                "username": "joseph-reynolds"
            },
            "message": "Patch Set 2:\n\n(3 comments)"
        },
        {
            "timestamp": 1566939452,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 2:\n\nDoes this really need a design doc since it spans just one repo is a small feature of that repo? Should you push this to bmcweb instead?"
        },
        {
            "timestamp": 1567089568,
            "reviewer": {
                "name": "Joseph Reynolds",
                "email": "joseph-reynolds@charter.net",
                "username": "joseph-reynolds"
            },
            "message": "Patch Set 2:\n\n> Does this really need a design doc since it spans just one repo is a small feature of that repo? Should you push this to bmcweb instead?\n\nAgreed.  That sounds right."
        },
        {
            "timestamp": 1568041378,
            "reviewer": {
                "name": "Joseph Reynolds",
                "email": "joseph-reynolds@charter.net",
                "username": "joseph-reynolds"
            },
            "message": "Patch Set 2:\n\nOWASP best practices: https://cheatsheetseries.owasp.org/cheatsheets/Unvalidated_Redirects_and_Forwards_Cheat_Sheet.html"
        },
        {
            "timestamp": 1568044727,
            "reviewer": {
                "name": "Joseph Reynolds",
                "email": "joseph-reynolds@charter.net",
                "username": "joseph-reynolds"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1568046936,
            "reviewer": {
                "name": "Joseph Reynolds",
                "email": "joseph-reynolds@charter.net",
                "username": "joseph-reynolds"
            },
            "message": "Patch Set 2:\n\n(1 comment)\n\nAdded more details that suggest we can safely forward all valid URIs."
        },
        {
            "timestamp": 1568062358,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 2:\n\n> Patch Set 2:\n> \n> > Does this really need a design doc since it spans just one repo is a small feature of that repo? Should you push this to bmcweb instead?\n> \n> Agreed.  That sounds right.\n\nI thought you were going to push to bmcweb instead?"
        },
        {
            "timestamp": 1568391773,
            "reviewer": {
                "name": "Joseph Reynolds",
                "email": "joseph-reynolds@charter.net",
                "username": "joseph-reynolds"
            },
            "message": "Patch Set 2:\n\nYep, I still plan to abandon this design.  For now I am (mis?)using this to collect ideas.  Those should probably go into a BMCWeb issue instead."
        },
        {
            "timestamp": 1569283966,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2:\n\n(8 comments)\n\nI'd really like to see a little more effort here.  Lots of sections seem very incomplete, and not thought through.  While it's great that we're defining how this looks externally to the system, it would be good to update with more details on how we're going to implement it internally.  If you're looking for input on how it could be done, call that out."
        },
        {
            "timestamp": 1572619588,
            "reviewer": {
                "name": "Joseph Reynolds",
                "email": "joseph-reynolds@charter.net",
                "username": "joseph-reynolds"
            },
            "message": "Patch Set 2:\n\n(7 comments)"
        },
        {
            "timestamp": 1575404291,
            "reviewer": {
                "name": "Joseph Reynolds",
                "email": "joseph-reynolds@charter.net",
                "username": "joseph-reynolds"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1575496401,
            "reviewer": {
                "name": "Alexander Tereschenko",
                "email": "aleksandr.v.tereschenko@intel.com",
                "username": "alext-w"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1578669881,
            "reviewer": {
                "name": "Alexander Tereschenko",
                "email": "aleksandr.v.tereschenko@intel.com",
                "username": "alext-w"
            },
            "message": "Patch Set 2:\n\nJoseph, I'd be glad to comment on this one and I think the overall direction described here (using standards-based approach and implementing this within bmcweb) is way more appropriate than proposed in https://gerrit.openbmc-project.xyz/c/openbmc/meta-phosphor/+/28257 and https://gerrit.openbmc-project.xyz/c/openbmc/meta-openpower/+/28099 - but there are so many comments here already that I'm afraid it's unreadable as it is.\n\nWould you be willing to clean those up and update the proposed formulation?"
        },
        {
            "timestamp": 1578671912,
            "reviewer": {
                "name": "Joseph Reynolds",
                "email": "joseph-reynolds@charter.net",
                "username": "joseph-reynolds"
            },
            "message": "Patch Set 2:\n\nFYA, there is an competing implementation for this which uses systemd and awk: https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-misc/+/28353\n\nI'll re-update this design and push a clean copy."
        },
        {
            "timestamp": 1578689783,
            "reviewer": {
                "name": "Joseph Reynolds",
                "email": "joseph-reynolds@charter.net",
                "username": "joseph-reynolds"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1578689945,
            "reviewer": {
                "name": "Joseph Reynolds",
                "email": "joseph-reynolds@charter.net",
                "username": "joseph-reynolds"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1578690054,
            "reviewer": {
                "name": "Joseph Reynolds",
                "email": "joseph-reynolds@charter.net",
                "username": "joseph-reynolds"
            },
            "message": "Patch Set 3:\n\nI've updated the design to incorporate all the feedback from this design and the implementations.  Due to the complexity if this effort, I'm leaning toward *not* abandoning this, and pushing it into the design docs."
        },
        {
            "timestamp": 1587095574,
            "reviewer": {
                "name": "Milton D. Miller II",
                "email": "miltonm@us.ibm.com",
                "username": "mdmillerii"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1590829394,
            "reviewer": {
                "name": "Milton D. Miller II",
                "email": "miltonm@us.ibm.com",
                "username": "mdmillerii"
            },
            "message": "Patch Set 3:\n\n(20 comments)"
        },
        {
            "timestamp": 1590832352,
            "reviewer": {
                "name": "Milton D. Miller II",
                "email": "miltonm@us.ibm.com",
                "username": "mdmillerii"
            },
            "message": "Patch Set 3:\n\n(2 comments)\n\nupdate changelog to reflect current proposal"
        },
        {
            "timestamp": 1591045300,
            "reviewer": {
                "name": "Joseph Reynolds",
                "email": "joseph-reynolds@charter.net",
                "username": "joseph-reynolds"
            },
            "message": "Topic set to http-redirect"
        },
        {
            "timestamp": 1592250984,
            "reviewer": {
                "name": "Joseph Reynolds",
                "email": "joseph-reynolds@charter.net",
                "username": "joseph-reynolds"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1592251040,
            "reviewer": {
                "name": "Joseph Reynolds",
                "email": "joseph-reynolds@charter.net",
                "username": "joseph-reynolds"
            },
            "message": "Patch Set 4:\n\n(18 comments)\n\nUploaded new patchset to address all comments."
        },
        {
            "timestamp": 1592328310,
            "reviewer": {
                "name": "Milton D. Miller II",
                "email": "miltonm@us.ibm.com",
                "username": "mdmillerii"
            },
            "message": "Patch Set 4: Code-Review+1\n\nHow do you want to handle the difference between these design \"requirements\" and the actual implementation (two lists identified in PS 3)?\n\nLeaving an issue open 7 months for the stale bot is not a reasonable approach."
        },
        {
            "timestamp": 1592364160,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 4:\n\n> Patch Set 4: Code-Review+1\n> \n> How do you want to handle the difference between these design \"requirements\" and the actual implementation (two lists identified in PS 3)?\n> \n> Leaving an issue open 7 months for the stale bot is not a reasonable approach.\n\nCould bump the time stale bot takes to close an issue? 1 year? \nBut if we are going to have an issue that no one plans to work, why open? \nCould we just update this document to the actual implementation ?"
        },
        {
            "timestamp": 1596621518,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 4:\n\n> Patch Set 4:\n> \n> > Patch Set 4: Code-Review+1\n> > \n> > How do you want to handle the difference between these design \"requirements\" and the actual implementation (two lists identified in PS 3)?\n> > \n> > Leaving an issue open 7 months for the stale bot is not a reasonable approach.\n> \n> Could bump the time stale bot takes to close an issue? 1 year? \n> But if we are going to have an issue that no one plans to work, why open? \n> Could we just update this document to the actual implementation ?\n\nHere's what I think we should do implementation wise.  https://gerrit.openbmc-project.xyz/c/openbmc/bmcweb/+/35265"
        },
        {
            "timestamp": 1665658029,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Abandoned\n\nclose due to inactivity"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "df4c1209083a7553dd655a0720c8a0c151201c29",
            "parents": [
                "697a349e9023deb98bab7b5a08de5f705a411ffd"
            ],
            "ref": "refs/changes/73/24173/1",
            "uploader": {
                "name": "Joseph Reynolds",
                "email": "joseph-reynolds@charter.net",
                "username": "joseph-reynolds"
            },
            "createdOn": 1565042211,
            "author": {
                "name": "Joseph Reynolds",
                "email": "joseph-reynolds@charter.net",
                "username": "joseph-reynolds"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "designs/http-redirect.md",
                    "type": "ADDED",
                    "insertions": 79,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 92,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "f8c0ad7a3368bc898f096ca3f1d61d2f14164d13",
            "parents": [
                "697a349e9023deb98bab7b5a08de5f705a411ffd"
            ],
            "ref": "refs/changes/73/24173/2",
            "uploader": {
                "name": "Joseph Reynolds",
                "email": "joseph-reynolds@charter.net",
                "username": "joseph-reynolds"
            },
            "createdOn": 1565042593,
            "author": {
                "name": "Joseph Reynolds",
                "email": "joseph-reynolds@charter.net",
                "username": "joseph-reynolds"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "designs/http-redirect.md",
                    "line": 17,
                    "reviewer": {
                        "name": "B. J. Wyman",
                        "email": "bjwyman@gmail.com",
                        "username": "bjwyman"
                    },
                    "message": "\"Certain browsers apply the HTTP transport protocol by default, \" ?\nSome browsers default to HTTPS-everywhere."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 17,
                    "reviewer": {
                        "name": "B. J. Wyman",
                        "email": "bjwyman@gmail.com",
                        "username": "bjwyman"
                    },
                    "message": "a URL"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 17,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "I would be happy if all browsers tried HTTPS first.  But, alas, this design must prescribe what happens if we get an HTTP request."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 17,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "What browsers?  The only exception to a browser \"defaulting\" to HTTPS is when the HSTS header is applied correctly, which isn't really a default.\n\nIs there a common browser (I tried a quick search) that does HTTPS by default?"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 28,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "Here are much better references:\nRFC 6797 (\"HTTP Strict Transport Security (HSTS)\"), specifically section 7.2 (\"HTTP request type\") in https://tools.ietf.org/html/rfc6797\n\nhttps://cheatsheetseries.owasp.org/cheatsheets/Transport_Layer_Protection_Cheat_Sheet.html\n\nBMCWeb follows OWASP practices and implements HSTS.\nhttps://github.com/openbmc/bmcweb/blob/master/DEVELOPING.md#web-security"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 30,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Might want to also add a link to the previous nginx implementation that did this already."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 30,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "Good idea.  The nginx server was brought in by the meta-ibm layer and used as a reverse proxy, serving both BMCWeb and the phosphor-rest APIs.  Use of nginx was discontinued around 2/2019 for the OpenBMC 2.7 release, in favor of BMCWeb which is the only web server\u00a0for release 2.7.\nYou can find one of the latest nginx configuration files here.\nhttps://github.com/openbmc/openbmc/blob/837851ae37a67b84f0f8c0fd310d33b5a731cc80/meta-ibm/recipes-httpd/nginx/files/nginx.conf"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 36,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Why is this one required?  URI \"/\" should be all that's needed, right?"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 36,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "I think so.  I don't know the answer."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 37,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "That is, implement HSTS Section 7.2 (\"HTTP request type\").\nPer the RFC, the Strict-Transport-Security HTTP Response Header Field should not be provided when the transport protocol is HTTP."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 37,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Replace with 404.  400 is really for requests for endpoints that exist, but had a malformed input.  The endpoints were truly \"not found\" in this case."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 37,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "I can agree to that.  In this view, HTTP and HTTPS offer different endpoints."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 40,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "when `s/HTTP redirect/BMCWEB_ENABLE_HTTP_REDIRECT/` is used..."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 41,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "More detail is needed:\nOnly HTTP: URIs which exist on the server should be redirected 301 (moved permanently).\nThe HTTP: URIs which don't exist should get 401 (not found).\nFor example, we don't want to redirect http://bmc/non/existent/page to https://bmc/non/existent/page only to have https://bmc/non/existent/page return code 401."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 42,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This section needs waaaaaaaaaaay more detail.  You've described the external interfaces pretty well in the requirements.   This section is for \"here's how I intend to implement this in code\".\n\nSome things I would like to see addressed:\n1. Will you use socket files?  How will we disambiguate http from https sockets?\n2. Which service will handle these requests?\n3. How will we verify the security?\n4. What headers will be required of the HTTP connection (might be more of a requirement, but needs addressed)"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 42,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "<Ya, we need a better design template> I didn't get the idea this was for the internal design.  Also, I don't have anything to contribute here.  :-("
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 42,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "An idea from the email list is to use netcat (nc) as a trivial http server.  The nginx server could be used.\nI would advocate for a new per-connection service  A socket would be listening at port 80 (HTTP) and connected to a netcat-or-nginx-based service.  If the service sees a HTTP request message, it can respond with a 308 permanent redirect and an http message."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 44,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "The question is which URIs to redirect?  Only `/` and `/index.html`?  All Web app URI?  All valid URIs including Redfish APIs?  Or a blanket redirect that does not even look at the URI?\n\nThere are two additional concerns:\n1. We don't want to encourage users to POST their secret password to create a session via the insecure http protocol.  For example, if we redirected POSTS to http://BMCIP/redfish/v1/SessionService/ to https, then the Redfish user might unknowingly disclose their password every time they create a new session.  We cannot stop them from doing so, but we can help them discontinue this practice if we fail to redirect.\n2. The security vulnerabilities surrounding redirection seem to involve modifying the URL (more than just changing the protocol to https).  The OWASP best practices (https://cheatsheetseries.owasp.org/cheatsheets/Unvalidated_Redirects_and_Forwards_Cheat_Sheet.html and especially https://cheatsheetseries.owasp.org/cheatsheets/Unvalidated_Redirects_and_Forwards_Cheat_Sheet.html#preventing-unvalidated-redirects-and-forwards) suggest we can be safe if we ensure the destination URL is valid.\n\nThat suggests we can safely forward all valid URIs including Redfish APIs (noting that the design of BMCWeb is such that the authorization check will happen as part of the subsequent HTTPS request)."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 44,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Come on.......   You didn't consider any alternatives?"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 44,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "I didn't consider alternate external designs, and don't have a good feel for the internal design (that is, the best way to implement this)."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 46,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "As an option, we could detect secrets sent to the http endpoint and (1) call out to some program to disable the session or (temporarly?) block the user, and/or (2) respond with a stern message.\n\nAs headers are parsed it would be a couple of lines added to the awk script.  Someone else would need to supply the program to be called."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 47,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Give this a better shot.  I can think of several impacts:\n1. There will be an extra port open in the BMC\n2. There will need to be additions to any test plan\n3. The BMC will now be hosting an unencrypted interface."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 47,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "All good points."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 47,
                    "reviewer": {
                        "name": "Alexander Tereschenko",
                        "email": "aleksandr.v.tereschenko@intel.com",
                        "username": "alext-w"
                    },
                    "message": "Given the impacts Ed mentioned (which I subscribe to + some, e.g. we'll have more processes running, i.e. increased attack surface, possibly increased flash/RAM usage) and comparing to the return (better UX as the user doesn't need to type the \"https://\" all the time), and thinking about how this typically works in reality (people actually just save the link - I'd argue few people type BMC URLs manually and if they do, the second time they do it would typically auto-substitute the HTTPS URL from browser's history, making that additional effort a moot point), do we really need all this complexity in implementation and testing?"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 47,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "I've addressed this in the updated design.  The redirect feature is not present by default.  It's an opt-in for the BMC system integrator.  Once the feature is added, it is enabled by default."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 50,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Please make a better attempt here:\nWhat browsers are you going to test\nwhat URLs are you going to test\nAre you going to test security at all?\nAre you going to test response headers?"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 50,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "In general, the existing HTTPS tests for the items listed should be adapted (copied and modified) to test the HTTP interface."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "designs/http-redirect.md",
                    "type": "ADDED",
                    "insertions": 51,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 64,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "a3a850edeb07833dd867bc11852517733c821a88",
            "parents": [
                "192bab2eb445d86d7d4608eba67312b0282c399a"
            ],
            "ref": "refs/changes/73/24173/3",
            "uploader": {
                "name": "Joseph Reynolds",
                "email": "joseph-reynolds@charter.net",
                "username": "joseph-reynolds"
            },
            "createdOn": 1578689783,
            "author": {
                "name": "Joseph Reynolds",
                "email": "joseph-reynolds@charter.net",
                "username": "joseph-reynolds"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "design: Redirect HTTP traffic to HTTPS\n\nThis is no longer a bmcweb design"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "Create a service ...\nredirect selected \nto HTTPS service"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 15,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "IP address or hostname"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 15,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "Will fix."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 16,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "This document uses \"double quoted strings\" extensivly (but not quite universally) to represent literal values.  Markdown for code literals is `backticks` and usually cause display in a fixed font possibly with other syntax highlighting (nginix, meta-ibm)\n\nIn addition, several literals are not marked, including HTTP methods like `GET`, port `80`,"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 16,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "Will change and fix.  I'll leave section names quoted."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 17,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "or http://my-system-bmc.example.com/\n\n(optional; but I think assigned hostnames are common)"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 18,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "However, no service is listening to the `http` service port (`80`), so ..."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 18,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "will change"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 26,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "and doesn't implement security recomendations and Redfish requirements"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 26,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "changed to: ...and was not intended to meet security recommendations or requirements"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 28,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "The literal does not exist in that file, refine the url to include the #fragment below and replace with\n\nconfigured in the `server` section containing `listen 80`"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 28,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "will do"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 40,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "Add line reference to the fragment (especially since the section reference was split across lines\n\nhttps://github.com/openbmc/openbmc/blob/837851ae37a67b84f0f8c0fd310d33b5a731cc80/meta-ibm/recipes-httpd/nginx/files/nginx.conf#L49...L55"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 40,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "Will change"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 45,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "[Redfish DSP0266][https://www.dmtf.org/sites/default/files/standards/documents/DSP0266_1.10.0.pdf]"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 45,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "Will add this reference"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 50,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "to `https` (the scheme) vs the HTTPS protocol ?\n\n\"on port\" or \"to port\""
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 50,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "I'll add this clarifying text"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 51,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "My 404 does not indicate why.  My redirect indicates https required in the body.  Ok?\n\n\nThis applys only to valid URI requests (as the code responds with other codes if applicable)."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 51,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "I think the intent is for the response body to give a clue that HTTPS is required.\nI've rewritten to clarify other http status codes can be sent."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 52,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "HTTP\n\n..."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 52,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "will change"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 57,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "Redfish 1.10 has updated chapter 13 with new section names"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 57,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "DSP0266 version Ch.13 subsections are: Security Details / Authentication / HTTP redirect.\nI'll change to match."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 66,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "replace \"it\" with \"the HTTP service\" or \"the `http` service\""
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 66,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "will clarify"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 69,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "When the HTTP redirect feature is enabled"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 69,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "Will clarify as:\nThe redirection feature shall be configured out of the default image and\nrequire an opt-in from the BMC system integrator.  If the feature is present,\nthe HTTP redirect service should be enabled by default."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 71,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "Document a method to disable the service"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 71,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "Will add:\nIf it is desired to allow the BMC admininstrator to enable and disable the\nHTTP redirect service, enhance the `ManagerNetworkProtocol` `HTTP` property\n`ProtocolEnabled` to allow PATCHing."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 74,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "proposed to be"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 74,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "will change"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 75,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "outweighs"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 75,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "will change"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 78,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "These were proposed options to \"the BMCWeb server\" (the context is lost with the other edits)."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 78,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "Good catch.  I'll edit."
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 97,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "`http` (the scheme)"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 97,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph-reynolds@charter.net",
                        "username": "joseph-reynolds"
                    },
                    "message": "will change"
                },
                {
                    "file": "designs/http-redirect.md",
                    "line": 105,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "Note: This requirement is not satisfied by the current proposed implementation; options exist:\n- service rate can be limited by systemd service file\n- limiting number of headers would be easy\n- limiting size of each header line could be added although it would be after reading line\n- the request body is not processed so that is satisfied\n\n\nAdd:\n\n\n- Ensure the service can be disabled"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "designs/http-redirect.md",
                    "type": "ADDED",
                    "insertions": 105,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 118,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "b82b3dcce2085a21150ffff453f1371bad9c92f3",
            "parents": [
                "ddb9f2ca23209251cd3904fdd6da8125fa72025f"
            ],
            "ref": "refs/changes/73/24173/4",
            "uploader": {
                "name": "Joseph Reynolds",
                "email": "joseph-reynolds@charter.net",
                "username": "joseph-reynolds"
            },
            "createdOn": 1592250984,
            "author": {
                "name": "Joseph Reynolds",
                "email": "joseph-reynolds@charter.net",
                "username": "joseph-reynolds"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "designs/http-redirect.md",
                    "type": "ADDED",
                    "insertions": 121,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 134,
            "sizeDeletions": 0
        }
    ]
}