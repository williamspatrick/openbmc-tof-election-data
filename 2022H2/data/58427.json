{
    "project": "openbmc/phosphor-dbus-interfaces",
    "branch": "master",
    "topic": "set-pwm-topic",
    "id": "I40d0d029136fb464c8177fe8537715ff191c63c1",
    "number": 58427,
    "subject": "Add new interface Control.FanZone",
    "owner": {
        "name": "DelphineCCChiu",
        "email": "Delphine_CC_Chiu@wiwynn.com",
        "username": "DelphineCCChiu"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-dbus-interfaces/+/58427",
    "hashtags": [],
    "createdOn": 1668071146,
    "lastUpdated": 1672908012,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1668071146,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1668071233,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1668071233,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1668071637,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/55160/ : SUCCESS"
        },
        {
            "timestamp": 1668100554,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1668123421,
            "reviewer": {
                "name": "Michael Garner",
                "email": "garnermic@gmail.com",
                "username": "garnermic"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1668151126,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1668151197,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Patch Set 3: Commit message was updated."
        },
        {
            "timestamp": 1668151209,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1668151209,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1668151608,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/55262/ : SUCCESS"
        },
        {
            "timestamp": 1668151991,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1668390760,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Topic set to set-pwm-topic"
        },
        {
            "timestamp": 1668457500,
            "reviewer": {
                "name": "Michael Garner",
                "email": "garnermic@gmail.com",
                "username": "garnermic"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1668795877,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "message": "Patch Set 3: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1668795995,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "message": "Patch Set 3: Code-Review+2\n\n(1 comment)"
        },
        {
            "timestamp": 1668797721,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1668798216,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 3: Code-Review-1\n\n(2 comments)"
        },
        {
            "timestamp": 1668805435,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1669086865,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Uploaded patch set 4: Commit message was updated."
        },
        {
            "timestamp": 1669086886,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1"
        },
        {
            "timestamp": 1669086903,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1669086903,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1669087292,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4:\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/55932/ : SUCCESS"
        },
        {
            "timestamp": 1669092141,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "message": "Patch Set 4: Code-Review+2\n\n(2 comments)"
        },
        {
            "timestamp": 1669105345,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1669108349,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Patch Set 4:\n\n(2 comments)"
        },
        {
            "timestamp": 1669109775,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1669268217,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1669268247,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "message": "Patch Set 4: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1669278703,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1669278725,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1669278725,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1669278850,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Uploaded patch set 6."
        },
        {
            "timestamp": 1669278874,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1669278875,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: -Ok-To-Test"
        },
        {
            "timestamp": 1669278875,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/56046/ : ABORTED"
        },
        {
            "timestamp": 1669279024,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Uploaded patch set 7."
        },
        {
            "timestamp": 1669279050,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1669279050,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: -Ok-To-Test"
        },
        {
            "timestamp": 1669279051,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/56047/ : ABORTED"
        },
        {
            "timestamp": 1669279433,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/56048/ : SUCCESS"
        },
        {
            "timestamp": 1669280209,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1669410711,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "message": "Patch Set 7: Code-Review+1\n\n(2 comments)"
        },
        {
            "timestamp": 1669671159,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1669689230,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1669943483,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Patch Set 7:\n\n(3 comments)"
        },
        {
            "timestamp": 1670461844,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1671118174,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1671183142,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1671200470,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1671527765,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1671561792,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1671772869,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1672907991,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1672908012,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Set Work In Progress"
        }
    ],
    "wip": true,
    "patchSets": [
        {
            "number": 1,
            "revision": "36996f5f2c21ef328c267d37d4a9dc3a3eb6c53c",
            "parents": [
                "9eb460c6cfc2d7c2feb29c86f4beb31d4c3d9250"
            ],
            "ref": "refs/changes/27/58427/1",
            "uploader": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "createdOn": 1668071146,
            "author": {
                "name": "BonnieLo-wiwynn",
                "email": "Bonnie_Lo@wiwynn.com",
                "username": "BonnieLo"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "Concept LGTM.\n\nSuggestion: Instead of hardcoding the parameter \"All\" or \"all\" as a value that's a special case, you could have 2 different API calls. Example, \"SetPwm\" takes a string and a double, and \"SetPwmAll\" takes only a double (and sets all fans in the zone). The advantage is that it avoids establishing special meanings to particular hardcoded zone names, which simplifies interactions elsewhere.\n"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Michael Garner",
                        "email": "garnermic@gmail.com",
                        "username": "garnermic"
                    },
                    "message": "Agree with the other comment on need to separate All into a separate function call."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "DelphineCCChiu",
                        "email": "Delphine_CC_Chiu@wiwynn.com",
                        "username": "DelphineCCChiu"
                    },
                    "message": "Separate to two function calls."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/Mode.interface.yaml",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 27,
            "sizeDeletions": 2
        },
        {
            "number": 2,
            "revision": "b680905670489482d78de432ec938349ac918114",
            "parents": [
                "9eb460c6cfc2d7c2feb29c86f4beb31d4c3d9250"
            ],
            "ref": "refs/changes/27/58427/2",
            "uploader": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "createdOn": 1668151126,
            "author": {
                "name": "BonnieLo-wiwynn",
                "email": "Bonnie_Lo@wiwynn.com",
                "username": "BonnieLo"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/Mode.interface.yaml",
                    "type": "MODIFIED",
                    "insertions": 16,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 34,
            "sizeDeletions": 2
        },
        {
            "number": 3,
            "revision": "cae5091cf96ed3c022499daf2f1d132889c3b8e7",
            "parents": [
                "9eb460c6cfc2d7c2feb29c86f4beb31d4c3d9250"
            ],
            "ref": "refs/changes/27/58427/3",
            "uploader": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "createdOn": 1668151197,
            "author": {
                "name": "BonnieLo-wiwynn",
                "email": "Bonnie_Lo@wiwynn.com",
                "username": "BonnieLo"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 18,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Can you update the signed-off-by on this one too?  Still has a unix-id instead of a legal name."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 18,
                    "reviewer": {
                        "name": "DelphineCCChiu",
                        "email": "Delphine_CC_Chiu@wiwynn.com",
                        "username": "DelphineCCChiu"
                    },
                    "message": "Done"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "This is a clean design, thanks\n"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "Giving +2 because somebody else has already given +1\n"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Please don't do that in a repository you are not a maintainer of."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "Ack. Yikes, that was my mistake."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/Mode.interface.yaml",
                    "line": 2,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "These don't belong in this interface to begin with.  This Control/Mode is not specifically related to PWMs and is intended for a more generic usage.  We shouldn't be putting PWM-specific properties into it, which are not applicable to non-PWM objects.\n\nThere is already Control.FanPwm.  Why does this not belong there?  Should there be a Control.FanZone interface?"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/Mode.interface.yaml",
                    "line": 2,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "I have no objections to this interface being here.\n\nI agree that the Manual/Auto toggle should remain independent of the manual PWM value setting, though. Setting Manual/Auto and setting the PWM value should be two different actions."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/Mode.interface.yaml",
                    "line": 2,
                    "reviewer": {
                        "name": "DelphineCCChiu",
                        "email": "Delphine_CC_Chiu@wiwynn.com",
                        "username": "DelphineCCChiu"
                    },
                    "message": "I added an interface Control.FanZone that have SetPwm property and will add this interface under object: /xyz/openbmc_project/settings/fanctrl/zone."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/Mode.interface.yaml",
                    "line": 2,
                    "reviewer": {
                        "name": "DelphineCCChiu",
                        "email": "Delphine_CC_Chiu@wiwynn.com",
                        "username": "DelphineCCChiu"
                    },
                    "message": "Done"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/Mode.interface.yaml",
                    "line": 26,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I don't like the relationship between all of these properties.  There ends up being non-obvious state-space covered.\n\n1. I hope that Manual doesn't automatically change state to true because someone wrote to the 'SetPwm' property.  I would expect that someone writes to this property and then switches Manual=true to have it take effect.\n\n2. Can we call this 'ManualPwm' or something along those lines to be clear that these are the manual settings to go along with Manual mode?\n\n3. We need to document what the expected values of 'string' are here.  Generally we do not allow arbitrary strings in programming interfaces, but it seems like these likely are added by a human and correspond to some system-specific configuration naming convention?\n\n4. I'd much prefer \"SetPwmAll\" is handled in ManualPwm as a specific string (\"All\"?) than yet another property because now I don't know the relationship and precedent of the two properties.\n\n5. Shouldn't \"SetPwm\" be a map[string, double]?  You can set multiple zones with it, right?  I don't see the point in only being able to set a single Pwm."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/Mode.interface.yaml",
                    "line": 26,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "1. Splitting up the Manual/Auto setting, and the PWM value setting, into two separate settings, as mentioned in the earlier comment above, would help.\n\n2. I agree with name change to \"ManualPwm\" to make it more obvious that the user is setting the PWM to take effect only during Manual mode.\n\n3. The string selects the desired fan to address, by name. I think this makes sense and is an obvious approach.\n\n4. I disagree with having \"All\" be a special-case keyword. I would much rather have a separate command to set all fans at once, versus encode the special-case meaning of the word \"All\" here.\n\nHowever, what happens if the user reads back this setting? Should this interface be write-only? The fan speeds are already available as their own sensors.\n\n5. No need for a map. This interface is per-zone, correct? If so, then each zone would have its own copy of this interface, and the setting would be done there.\n\nOr, are you suggesting that all fans in this zone be exposed in an array? If the interface is an array of (string,double) tuples, then this would make it straightforward to address what fan to change the speed of, and make it easy to change more than one fan value at a time without having to affect them all."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/Mode.interface.yaml",
                    "line": 26,
                    "reviewer": {
                        "name": "DelphineCCChiu",
                        "email": "Delphine_CC_Chiu@wiwynn.com",
                        "username": "DelphineCCChiu"
                    },
                    "message": "1. I'll change the behavior.\n\n2. Ok, I'll change the name.\n\n3. Yes, the string selects the desired fan sensor name.\n\n4. Would like to know is there any drawbacks if the user reads back this setting?\n\n5. Yes, this interface is per-zone."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/Mode.interface.yaml",
                    "line": 26,
                    "reviewer": {
                        "name": "DelphineCCChiu",
                        "email": "Delphine_CC_Chiu@wiwynn.com",
                        "username": "DelphineCCChiu"
                    },
                    "message": "About the first issue, the PWM could only be set after setting Manual = true.\nIs it more appropriate that user set Manual to true first and then use ManualPwm to set PWM?"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/Mode.interface.yaml",
                    "line": 26,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "Yes. If user sets Manual to true, the value in ManualPwm should now take effect. It is expected that the user sets ManualPwm and Manual at nearly the same time. (It might also be a good idea to set Manual to true automatically, when the user sets ManualPwm. Are there any cons to this idea?)"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/Mode.interface.yaml",
                    "line": 26,
                    "reviewer": {
                        "name": "DelphineCCChiu",
                        "email": "Delphine_CC_Chiu@wiwynn.com",
                        "username": "DelphineCCChiu"
                    },
                    "message": "1. Added new interface FanZone with property ManualPwm.\n\n2. If the first string is 'All', set all PWMs in this zone.\n\n3. Modified commit 58428. User could use Contorl.FanZone.ManualPwm to set pwm and set Contorl.Mode.Manual to true to take effect or set Contorl.Mode.Manual to true first and then use Contorl.FanZone.ManualPwm to set pwm."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/Mode.interface.yaml",
                    "line": 26,
                    "reviewer": {
                        "name": "DelphineCCChiu",
                        "email": "Delphine_CC_Chiu@wiwynn.com",
                        "username": "DelphineCCChiu"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/Mode.interface.yaml",
                    "type": "MODIFIED",
                    "insertions": 16,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 34,
            "sizeDeletions": 2
        },
        {
            "number": 4,
            "revision": "f34f00d5863a7247a04e62bd710960f79778126c",
            "parents": [
                "9eb460c6cfc2d7c2feb29c86f4beb31d4c3d9250"
            ],
            "ref": "refs/changes/27/58427/4",
            "uploader": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "createdOn": 1669086865,
            "author": {
                "name": "BonnieLo-wiwynn",
                "email": "Bonnie_Lo@wiwynn.com",
                "username": "BonnieLo"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "Dropping my +2 to +1, until Patrick Williams comments are all addressed.\n"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/Mode.interface.yaml",
                    "type": "MODIFIED",
                    "insertions": 16,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 34,
            "sizeDeletions": 2
        },
        {
            "number": 5,
            "revision": "abe332636353aabc4a6e038a97cfe9641658d60e",
            "parents": [
                "9eb460c6cfc2d7c2feb29c86f4beb31d4c3d9250"
            ],
            "ref": "refs/changes/27/58427/5",
            "uploader": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "createdOn": 1669278703,
            "author": {
                "name": "BonnieLo-wiwynn",
                "email": "Bonnie_Lo@wiwynn.com",
                "username": "BonnieLo"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/Mode.interface.yaml",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -2
                },
                {
                    "file": "gen/xyz/openbmc_project/Control/FanZone/meson.build",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/FanZone.interface.yaml",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Control/meson.build",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 61,
            "sizeDeletions": 2
        },
        {
            "number": 6,
            "revision": "485f37a14e88e0f45ec064f3be4c00056833c0bb",
            "parents": [
                "9eb460c6cfc2d7c2feb29c86f4beb31d4c3d9250"
            ],
            "ref": "refs/changes/27/58427/6",
            "uploader": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "createdOn": 1669278850,
            "author": {
                "name": "BonnieLo-wiwynn",
                "email": "Bonnie_Lo@wiwynn.com",
                "username": "BonnieLo"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/Mode.interface.yaml",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -2
                },
                {
                    "file": "gen/xyz/openbmc_project/Control/FanZone/meson.build",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/FanZone.interface.yaml",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Control/meson.build",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 61,
            "sizeDeletions": 2
        },
        {
            "number": 7,
            "revision": "053ea20b22f57b62432cf295bcdd0597c9b8a11b",
            "parents": [
                "9eb460c6cfc2d7c2feb29c86f4beb31d4c3d9250"
            ],
            "ref": "refs/changes/27/58427/7",
            "uploader": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "createdOn": 1669279024,
            "author": {
                "name": "BonnieLo-wiwynn",
                "email": "Bonnie_Lo@wiwynn.com",
                "username": "BonnieLo"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "It still looks good to me, but I will let Patrick Williams make the final decision.\n"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/FanZone.interface.yaml",
                    "line": 8,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Shouldn't we make separate zone instances for each zone instead of having magic strings?\n\nMaybe I'm not understanding what the value besides \"All\" are based on the limited documentation.  How does someone programmatically determine the valid values here?"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/FanZone.interface.yaml",
                    "line": 8,
                    "reviewer": {
                        "name": "DelphineCCChiu",
                        "email": "Delphine_CC_Chiu@wiwynn.com",
                        "username": "DelphineCCChiu"
                    },
                    "message": "Hi Patrick,\n\nThe interface Control.FanZone will be added to seperate fan zone object.\n- For example: zone1\n>    root@greatlakes:~# busctl introspect xyz.openbmc_project.State.FanCtrl /xyz/openbmc_project/settings/fanctrl/zone1                                          NAME                                TYPE      SIGNATURE RESULT/VALUE FLAGS\n>    ...\n>    xyz.openbmc_project.Control.FanZone interface -         -            -\n>    .ManualPwm                          property  (sd)      \"\" 0         emits-change writable\n>    xyz.openbmc_project.Control.Mode    interface -         -            -\n>    .FailSafe                           property  b         false        emits-change writable\n>    .Manual                             property  b         false        emits-change writable\n    \nIf we use 'All' for the string of ManualPwm, we can set PWM for all PWM sensors in zone 1.\n\nYou can also control specific PWM sensor in the zone by using the sensor name listed in the \"inputs\" section of the fan table. \n- For example, using \"BB_FAN0_TACH_RPM\" as the string of ManualPwm to set the PWM of PWM 1.\n>    \"sensors\": [\n>    {\n>        \"name\": \"BB_FAN0_TACH_RPM\",\n>        \"type\": \"fan\",\n>        \"readPath\": \"/xyz/openbmc_project/sensors/fan_tach/BB_FAN0_TACH_RPM\",\n>        \"writePath\": \"/xyz/openbmc_project/control/fanpwm/Pwm_1\",\n>        ...\n>    },\n>    ...\n>    \"zones\" : [\n>    {\n>        \"id\": 1,\n>        ...\n>        \"pids\": [\n>            {\n>                \"name\": \"fan0 1 2 3\",\n>                \"type\": \"fan\",\n>                \"inputs\": [\n>                    \"BB_FAN0_TACH_RPM\",\n>                    \"BB_FAN1_TACH_RPM\",\n>                    \"BB_FAN2_TACH_RPM\",\n>                    \"BB_FAN3_TACH_RPM\"\n>                ],\n>    ..."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/FanZone.interface.yaml",
                    "line": 8,
                    "reviewer": {
                        "name": "DelphineCCChiu",
                        "email": "Delphine_CC_Chiu@wiwynn.com",
                        "username": "DelphineCCChiu"
                    },
                    "message": "Hi Patrick,\nWould like to know if you have any concern about this design. Thanks!"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/FanZone.interface.yaml",
                    "line": 8,
                    "reviewer": {
                        "name": "DelphineCCChiu",
                        "email": "Delphine_CC_Chiu@wiwynn.com",
                        "username": "DelphineCCChiu"
                    },
                    "message": "Gentle reminder, please help to review the design. Thanks!"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/FanZone.interface.yaml",
                    "line": 8,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I'm still having a bit of trouble understanding the relationship between this and FanPwm/FanSpeed.\n\n1. We already have FanPwm to represent each fan.  Why do we need a property in the \"Zone\" that the FanPwm is part of?\n\n2. It seems like the primary value here is that we can set the Pwm for the whole Zone?  We could do that with a FanPwm instance representing the zone and the Object.Enable interface to select between the FanPwm for the Zone or the FanPwm for each individual Fan.\n\n3. If we have relationships between this object and other objects (ie, the 'string' portion of the property, those should be object_path and not string values.\n\n4. Why do we use double here but FanPwm and FanSpeed both use an integer?"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/FanZone.interface.yaml",
                    "line": 8,
                    "reviewer": {
                        "name": "DelphineCCChiu",
                        "email": "Delphine_CC_Chiu@wiwynn.com",
                        "username": "DelphineCCChiu"
                    },
                    "message": "Hi Patrick,\n\n1. The FanPwm interface is under each independent control/fanpwm object so we could only set the PWM devices one by one.\nTherefore, we would like to support a method to set all PWM device in one fan zone.\n\n2. Yes, we would like to set the PWM for the whole Zone.\nDo you suggest that we could add a instance representing the zone under /xyz/openbmc_project/control/fanpwm and set the PWM of whole zone by setting the FanPwm target in the instance?\n\nFor example:\n> root@greatlakes:~# busctl tree xyz.openbmc_project.FanSensor\n> `-/xyz\n>   `-/xyz/openbmc_project\n>     |-/xyz/openbmc_project/control\n>     | `-/xyz/openbmc_project/control/fanpwm\n>     |   |-/xyz/openbmc_project/control/fanpwm/Zone_1\n>     |   |-/xyz/openbmc_project/control/fanpwm/Pwm_1\n>     |   |-/xyz/openbmc_project/control/fanpwm/Pwm_2\n>     |   |-/xyz/openbmc_project/control/fanpwm/Pwm_3\n>     |   `-/xyz/openbmc_project/control/fanpwm/Pwm_4\n\nIn this case, we could also set the individual PWM by setting the FanPwm target in each fanpwm/Pwm.\n\n3. I think we could set the individual PWM by setting the FanPwm target in each object_path of PWM devices (e.g. /xyz/openbmc_project/control/fanpwm/Pwm_1).\nTherefore, we might not need to support the method to set individual pwm.\n\n4. I'll change it to integer. Thanks!"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/FanZone.interface.yaml",
                    "line": 8,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "```\nFor example:\nroot@greatlakes:~# busctl tree xyz.openbmc_project.FanSensor\n`-/xyz\n  `-/xyz/openbmc_project\n    |-/xyz/openbmc_project/control\n    | `-/xyz/openbmc_project/control/fanpwm\n    |   |-/xyz/openbmc_project/control/fanpwm/Zone_1\n    |   |-/xyz/openbmc_project/control/fanpwm/Pwm_1\n    |   |-/xyz/openbmc_project/control/fanpwm/Pwm_2\n    |   |-/xyz/openbmc_project/control/fanpwm/Pwm_3\n    |   `-/xyz/openbmc_project/control/fanpwm/Pwm_4\n```\n\nYes, this would match my expectations of a possible dbus layout to solve what I believe you're trying to achieve.  At each of these paths you would have both a FanPwm interfaces and an Object.Enable interface.  The thermal control code should probably provide preference to Zone if both Zone and individual Pwm are Enabled."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/FanZone.interface.yaml",
                    "line": 8,
                    "reviewer": {
                        "name": "DelphineCCChiu",
                        "email": "Delphine_CC_Chiu@wiwynn.com",
                        "username": "DelphineCCChiu"
                    },
                    "message": "Hi Patrick & Josh,\nWe have two designs for the Fan Zone instance.\n\nFirst design:\nThere could be many PWMs in one Fan Zone. \nTherefore, if we want to add Zone_1 under object path: control/fanpwm, the Pwm instances should also be under the Zone_1 instance.\n\nFor example:\n> root@greatlakes:~# busctl tree xyz.openbmc_project.FanSensor\n> `-/xyz\n>   `-/xyz/openbmc_project\n>     |-/xyz/openbmc_project/control\n>     | `-/xyz/openbmc_project/control/fanpwm\n>     |   `-/xyz/openbmc_project/control/fanpwm/Zone_1\n>     |     |-/xyz/openbmc_project/control/fanpwm/Zone_1/Pwm_1\n>     |     |-/xyz/openbmc_project/control/fanpwm/Zone_1/Pwm_2\n>     |     |-/xyz/openbmc_project/control/fanpwm/Zone_1/Pwm_3\n>     |     `-/xyz/openbmc_project/control/fanpwm/Zone_1/Pwm_4\n\nWe also need to add some information of Fan Zone in the configureation of enitity-manager for dbus-sensors and entity-manager services to create the Fan Zone instance.\n\nSecond design:\nWe could add FanPwm interface in object path: /xyz/openbmc_project/settings/fanctrl/zone1 which is created by phosphor-pid-control service.\n\nFor expample:\n> root@greatlakes:~# busctl introspect xyz.openbmc_project.State.FanCtrl /xyz/openbmc_project/settings/fanctrl/zone1\n> NAME                                TYPE      SIGNATURE RESULT/VALUE FLAGS\n> ...\n> xyz.openbmc_project.Control.Mode    interface -         -            -\n> .FailSafe                           property  b         false        emits-change writable\n> .Manual                             property  b         false        emits-change writable\n> xyz.openbmc_project.Control.FanPwm  interface -         -            -\n> .Target                             property  t         178          emits-change writable\n\nTherefore, we could set Manual and Fan Zone PWM in same object path and we could set the PWM for each PWM sensors in object path: control/fanpwm/Pwm_1 for debugging purpose.\n\nWould like to know which design do you prefer."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/FanZone.interface.yaml",
                    "line": 8,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "Personally, I prefer the addition of a new layer below `Zone_X`, creating `Zone_X/Pwm_Y` objects to represent each fan output.\n\nI would rename them, though, to `Zone_X/Fan_Y` because `Fan` has a much clearer meaning than `Pwm`.\n\nThis ties in very well with the feature request here: https://github.com/openbmc/phosphor-pid-control/issues/27\n\nIf you add `Zone_X/Fan_Y` then I can see myself logically adding `Zone_X/Pid_Y` or `Zone_X/Input_Y` objects along the same naming scheme, to create an object to represent each PID input. This would allow that feature request to be realized."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/FanZone.interface.yaml",
                    "line": 8,
                    "reviewer": {
                        "name": "DelphineCCChiu",
                        "email": "Delphine_CC_Chiu@wiwynn.com",
                        "username": "DelphineCCChiu"
                    },
                    "message": "Thanks for your suggestion.\nI'll try to add the new fan zone layer in dbus-sensors service."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/FanZone.interface.yaml",
                    "line": 8,
                    "reviewer": {
                        "name": "DelphineCCChiu",
                        "email": "Delphine_CC_Chiu@wiwynn.com",
                        "username": "DelphineCCChiu"
                    },
                    "message": "I added the fan zone layer in the following commit. Please help to review.\nhttps://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/60042"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Control/FanZone/meson.build",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Control/FanZone.interface.yaml",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Control/meson.build",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 61,
            "sizeDeletions": 0
        }
    ]
}