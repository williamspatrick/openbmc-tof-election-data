{
    "project": "openbmc/bmcweb",
    "branch": "master",
    "id": "I3d4900a0777e75d9b52874991d49a3670641d136",
    "number": 50998,
    "subject": "EventService: Implement SubmitTestEvent action",
    "owner": {
        "name": "Shichen Lin",
        "email": "shichenl@nvidia.com",
        "username": "ShichenLin"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/bmcweb/+/50998",
    "hashtags": [],
    "createdOn": 1644284762,
    "lastUpdated": 1658494828,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1644284762,
            "reviewer": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1644284789,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1644284789,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1644284824,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/36782/ : FAILURE"
        },
        {
            "timestamp": 1644378144,
            "reviewer": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1644378180,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1644378180,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1644379138,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/36930/ : FAILURE"
        },
        {
            "timestamp": 1644388258,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2:\n\n(3 comments)"
        },
        {
            "timestamp": 1644432738,
            "reviewer": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "message": "Uploaded patch set 3: Patch Set 2 was rebased."
        },
        {
            "timestamp": 1644432763,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1644432763,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1644433434,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/36988/ : SUCCESS"
        },
        {
            "timestamp": 1644434000,
            "reviewer": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "message": "Patch Set 3:\n\n(3 comments)"
        },
        {
            "timestamp": 1644434137,
            "reviewer": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "message": "Uploaded patch set 4: Patch Set 3 was rebased."
        },
        {
            "timestamp": 1644434166,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1644434166,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1644434801,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/36994/ : SUCCESS"
        },
        {
            "timestamp": 1644463828,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 4:\n\n(3 comments)"
        },
        {
            "timestamp": 1647654839,
            "reviewer": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1647654877,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1647654877,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1647655405,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/39289/ : FAILURE"
        },
        {
            "timestamp": 1647885018,
            "reviewer": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "message": "Uploaded patch set 6."
        },
        {
            "timestamp": 1647885038,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1647885038,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: -Ok-To-Test"
        },
        {
            "timestamp": 1647885596,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/39356/ : SUCCESS"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "f6118f8fd9826a6f94b52a824c62a21a136cfd34",
            "parents": [
                "9e1585f8abde1b6bcb1bb47bd38a60886493e761"
            ],
            "ref": "refs/changes/98/50998/1",
            "uploader": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "createdOn": 1644284762,
            "author": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/event_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 86,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 102,
            "sizeDeletions": 2
        },
        {
            "number": 2,
            "revision": "5ca71d102b2857e08ebe78d44ecd1ab6c2a012ac",
            "parents": [
                "a5bd4c9ae16ef8cd1931236fafbf380149474a15"
            ],
            "ref": "refs/changes/98/50998/2",
            "uploader": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "createdOn": 1644378144,
            "author": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "redfish-core/lib/event_service.hpp",
                    "line": 176,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Shouldn't most of these be required?"
                },
                {
                    "file": "redfish-core/lib/event_service.hpp",
                    "line": 176,
                    "reviewer": {
                        "name": "Shichen Lin",
                        "email": "shichenl@nvidia.com",
                        "username": "ShichenLin"
                    },
                    "message": "No, since they are not required properties in schema."
                },
                {
                    "file": "redfish-core/lib/event_service.hpp",
                    "line": 176,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "An implementation can require things that aren't used in the schema, so no worries there.  In the cases where we don't require them, we should be picking reasonable defaults, not leaving things empty string.  Please also test some combinations of this.  As written, this patchset doesn't pick intelligent defaults for these when they're not present, and sending an event that's empty/blank doesn't match the spec."
                },
                {
                    "file": "redfish-core/lib/event_service.hpp",
                    "line": 179,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "not needed."
                },
                {
                    "file": "redfish-core/lib/event_service.hpp",
                    "line": 179,
                    "reviewer": {
                        "name": "Shichen Lin",
                        "email": "shichenl@nvidia.com",
                        "username": "ShichenLin"
                    },
                    "message": "To remove unused warning here."
                },
                {
                    "file": "redfish-core/lib/event_service.hpp",
                    "line": 179,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "If it isn't used, then why are we parsing it?  Please remove it.\n\nAlso, in the schema EventType is deprecated, so we probably shouldn't be adding code to accept it at all"
                },
                {
                    "file": "redfish-core/lib/event_service.hpp",
                    "line": 221,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "else doesn't look right here.  you want to process the args regardless, right?\n\nMessageArgs are required if message is set and contains any parameters.  That should be enforced by this api."
                },
                {
                    "file": "redfish-core/lib/event_service.hpp",
                    "line": 221,
                    "reviewer": {
                        "name": "Shichen Lin",
                        "email": "shichenl@nvidia.com",
                        "username": "ShichenLin"
                    },
                    "message": "Usually it is used with Message and MessageArgs set, but again they are not required properties in event."
                },
                {
                    "file": "redfish-core/lib/event_service.hpp",
                    "line": 221,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "let me be more clear\n\nPOST {\"Message\": \"foo %1\"}\n\nShould return 400, because it adds a message with parameters, but the request doesn't specify them.  There should be no way to send a non-compliant event using this API.\n\nPOST {\"Message\": \"foo %1\", \"MessageArgs\": [\"bar\"]}\n\nwould be accepted, because it specifies the parameters correctly."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/event_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 85,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 101,
            "sizeDeletions": 2
        },
        {
            "number": 3,
            "revision": "7c4dafc820e2b4f2747913787ccb8fdbf2accd42",
            "parents": [
                "27914f7d946715c40e0cd71d6a8fbd406e5b8a2c"
            ],
            "ref": "refs/changes/98/50998/3",
            "uploader": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "createdOn": 1644432738,
            "author": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/event_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 85,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 101,
            "sizeDeletions": 2
        },
        {
            "number": 4,
            "revision": "1bf474fc71ae3070f5f1ff47fc61228dd3948f1c",
            "parents": [
                "719176b18ce69ecc17b98e7cc6f6fceaadf0f84e"
            ],
            "ref": "refs/changes/98/50998/4",
            "uploader": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "createdOn": 1644434137,
            "author": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/event_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 85,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 101,
            "sizeDeletions": 2
        },
        {
            "number": 5,
            "revision": "d08dac8d7876beffd14a6c69e4b1a98d4b186e1a",
            "parents": [
                "c701030f1d21e45e8b1ef2147552e222c7ed0697"
            ],
            "ref": "refs/changes/98/50998/5",
            "uploader": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "createdOn": 1647654839,
            "author": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/src/error_messages.cpp",
                    "type": "MODIFIED",
                    "insertions": 28,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/event_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 91,
                    "deletions": -2
                },
                {
                    "file": "redfish-core/include/error_messages.hpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 157,
            "sizeDeletions": 2
        },
        {
            "number": 6,
            "revision": "cb30eca75883a58d89854a3cb51693a4d31eb0e0",
            "parents": [
                "c701030f1d21e45e8b1ef2147552e222c7ed0697"
            ],
            "ref": "refs/changes/98/50998/6",
            "uploader": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "createdOn": 1647885018,
            "author": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/src/error_messages.cpp",
                    "type": "MODIFIED",
                    "insertions": 28,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/event_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 91,
                    "deletions": -2
                },
                {
                    "file": "redfish-core/include/error_messages.hpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 157,
            "sizeDeletions": 2
        }
    ]
}