{
    "project": "openbmc/docs",
    "branch": "master",
    "id": "Ic52503e2d3cf726c07faabc32f29e6488971abe5",
    "number": 41468,
    "subject": "Add D-Bus Inventory Document",
    "owner": {
        "name": "Santosh Puranik",
        "email": "santosh.puranik.ibm@gmail.com",
        "username": "santoshpuranik"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/docs/+/41468",
    "hashtags": [],
    "createdOn": 1616416084,
    "lastUpdated": 1665657896,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1616416084,
            "reviewer": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik.ibm@gmail.com",
                "username": "santoshpuranik"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1616417729,
            "reviewer": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik.ibm@gmail.com",
                "username": "santoshpuranik"
            },
            "message": "Patch Set 1:\n\nThis is my first stab at formalizing our D-Bus object paths and/or the way we represent relationships, to get some conversations going."
        },
        {
            "timestamp": 1616459537,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 1:\n\n(10 comments)"
        },
        {
            "timestamp": 1616495818,
            "reviewer": {
                "name": "Andrei Kartashev",
                "email": "a.kartashev@yadro.com",
                "username": "alatarum"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1616497113,
            "reviewer": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik.ibm@gmail.com",
                "username": "santoshpuranik"
            },
            "message": "Patch Set 1:\n\n(10 comments)"
        },
        {
            "timestamp": 1616586360,
            "reviewer": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik.ibm@gmail.com",
                "username": "santoshpuranik"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1616615711,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 2:\n\n(6 comments)"
        },
        {
            "timestamp": 1616615768,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1616657505,
            "reviewer": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik.ibm@gmail.com",
                "username": "santoshpuranik"
            },
            "message": "Patch Set 2:\n\n(6 comments)"
        },
        {
            "timestamp": 1616673091,
            "reviewer": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik.ibm@gmail.com",
                "username": "santoshpuranik"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1616683996,
            "reviewer": {
                "name": "Vishwanatha Subbanna",
                "email": "vishwa@linux.vnet.ibm.com",
                "username": "vishwabmc"
            },
            "message": "Patch Set 3:\n\n(5 comments)"
        },
        {
            "timestamp": 1616758387,
            "reviewer": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik.ibm@gmail.com",
                "username": "santoshpuranik"
            },
            "message": "Patch Set 3:\n\n(5 comments)"
        },
        {
            "timestamp": 1616758418,
            "reviewer": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik.ibm@gmail.com",
                "username": "santoshpuranik"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1617366267,
            "reviewer": {
                "name": "Andrei Kartashev",
                "email": "a.kartashev@yadro.com",
                "username": "alatarum"
            },
            "message": "Patch Set 4:\n\n(1 comment)\n\nSo, how do we going ti make decision? Will it be discussion in mailing list?\nAnd, actually, what is your plan to do next?"
        },
        {
            "timestamp": 1617603557,
            "reviewer": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik.ibm@gmail.com",
                "username": "santoshpuranik"
            },
            "message": "Patch Set 4:\n\n> Patch Set 4:\n> \n> (1 comment)\n> \n> So, how do we going ti make decision? Will it be discussion in mailing list?\n> And, actually, what is your plan to do next?\n\nI don't know, tbh. I was hoping to get some discussion going here, but not much has happened. To me, it seems like we need to drill down further into what it would take for EM to support both of these (path hierarchy vs association) schemes (We already know PIM can)\n\n@Ed Tanous - I know you have already indicated your preference here, but could you elaborate a little on how EM configs can be used to create inventory associations? It isn't apparent to me how that would work with the config files today.\n\nIf we choose to use associations, I think the next step would be document well defined association names (fType and rType) for every relation we have in Redfish."
        },
        {
            "timestamp": 1617822456,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 4:\n\n(3 comments)"
        },
        {
            "timestamp": 1623263714,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1623264988,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1623358760,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1625665078,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1625670777,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1625743197,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1652466573,
            "reviewer": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "message": "Patch Set 4:\n\n(2 comments)"
        },
        {
            "timestamp": 1656519248,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1665657896,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Abandoned\n\nclose due to inactivity"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "ac49e43687400df92f4d8e3e824522aea58ab885",
            "parents": [
                "f0ca2e418c0b4669d3a759775f654343f0b9e504"
            ],
            "ref": "refs/changes/68/41468/1",
            "uploader": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik.ibm@gmail.com",
                "username": "santoshpuranik"
            },
            "createdOn": 1616416084,
            "author": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik@in.ibm.com",
                "username": ""
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 21,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Remove this.  parent-child doesn't really add anything here, and is just confusing."
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 21,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik.ibm@gmail.com",
                        "username": "santoshpuranik"
                    },
                    "message": "Ack"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 23,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This is also containment, right?  \"FRU\" isn't a concept in the current dbus interfaces, nor is it a concept in bmcweb/Redfish.  You might want to rephrase this, or just remove."
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 23,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik.ibm@gmail.com",
                        "username": "santoshpuranik"
                    },
                    "message": "I'll remove the FRU reference. And right, the sensor example is actually also just containment. I'll rephrase that."
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 24,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "FWIW, this is going to be hard to model in Redfish."
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 24,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik.ibm@gmail.com",
                        "username": "santoshpuranik"
                    },
                    "message": "Redfish only models LEDs as a LocationIndicatorActive property, I guess I don't follow what is going to be hard to model in Redfish."
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 25,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This section seems to have forgotten all of the Redfish Links.  Could you go through the Links sections in the schema and enumerate some of those?  ContainedBy, and Cooled by would be a good start, but there's also cables with connectedBy coming soon."
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 25,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik.ibm@gmail.com",
                        "username": "santoshpuranik"
                    },
                    "message": "I'll add more examples from the Redfish schema"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 29,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I don't think that's how it's generally modeled if we're talking redfish.  The Card would be Linked to the Slot, but contained by the primary chassis."
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 29,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik.ibm@gmail.com",
                        "username": "santoshpuranik"
                    },
                    "message": "We could make this linkage between the slot and the card a part of the path hierarchy too"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 34,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This seems to imply that if the power supply was within the chassis, it wouldn't contain the PoweredBy link."
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 34,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik.ibm@gmail.com",
                        "username": "santoshpuranik"
                    },
                    "message": "Good point. I will reword - This kind of a relation will always require an association."
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 59,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Can you talk to how the ContainedBy and Contains links would work in that case?  Also, given your slot example above, and the fact that the card would not be \"contained\" by the slot, how would you represent that in dbus?"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 59,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik.ibm@gmail.com",
                        "username": "santoshpuranik"
                    },
                    "message": "I'll elaborate here on ContainedBy and Contains links.\n\nThe slot example I guess could be represented in two ways:\n* Use a path heirarchy that adds a slot in between: /system/chassis/motherboard/slot0/pciedevice0\n* Treat this relation as an association."
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 68,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "There's a lot more than this to do to support this.  Entities can be added/removed at any time, including the Chassis.  If the chassis is deleted then recreated, the whole tree below it would need to be created and deleted, which all the downstream clients would need to be taught how to not interpret as a removal event.  This is non-trivial, and largely why the tree was flattened in EM in the first place."
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 68,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik.ibm@gmail.com",
                        "username": "santoshpuranik"
                    },
                    "message": "Okay, what you say makes sense, I did not intend to cover the nitty-gritty of exactly how this would have to be done in EM, but I will add these challenges to the list."
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 80,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "These tend to be generated automatically based on the detection route.  I wouldn't really expect there to be any new json configuration, as entity-manager can publish associations today without any boilerplate.\n\n\nFWIW, this option is my preference, as I think it's the simplest, and has the fewest questions about \"what happens when\""
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 80,
                    "reviewer": {
                        "name": "Andrei Kartashev",
                        "email": "a.kartashev@yadro.com",
                        "username": "alatarum"
                    },
                    "message": "Interesting, how can entity-manager can publish associations? Looks like I miss something here: can't find any association related code in EM sources.\nOr do you mean, dbus-sensors does this? Then I prefer EM to be bit more self-contained."
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 80,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik.ibm@gmail.com",
                        "username": "santoshpuranik"
                    },
                    "message": "Are you saying EM can put Association.Definitions on D-Bus? If that is the case, how would I define this in the EM config JSON? Since the JSONs are meant to be reusable across multiple systems, how would this cover cases where the associations are different between systems?"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 92,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I definitely don't want this.  This continues down the road of bifurcating OpenBMC, and adds a lot of unnecessary complexity in testing."
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 92,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik.ibm@gmail.com",
                        "username": "santoshpuranik"
                    },
                    "message": "Sure, I just put this out here as possible short term options :)"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 92,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "+1"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 92,
                    "reviewer": {
                        "name": "Andrei Kartashev",
                        "email": "a.kartashev@yadro.com",
                        "username": "alatarum"
                    },
                    "message": "+1"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "type": "ADDED",
                    "insertions": 91,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 104,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "3260512b002973606859b79ee7beb3bb1731b5ea",
            "parents": [
                "f0ca2e418c0b4669d3a759775f654343f0b9e504"
            ],
            "ref": "refs/changes/68/41468/2",
            "uploader": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik.ibm@gmail.com",
                "username": "santoshpuranik"
            },
            "createdOn": 1616586360,
            "author": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik@in.ibm.com",
                "username": ""
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 15,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "What would be a example of something that would implement more than 1 inventory interface?"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 15,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik.ibm@gmail.com",
                        "username": "santoshpuranik"
                    },
                    "message": "A PCIe device could implement both the PCIeDevice and FabricAdapter interfaces."
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 57,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "and ?"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 57,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik.ibm@gmail.com",
                        "username": "santoshpuranik"
                    },
                    "message": "Ack"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 65,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "I would not recommend using 'I'. \n\nMaybe \n\n\"The above list is not exhaustive. It is used to illustrate that certain relationships denote containment and certain relationships are logical.\"\n\nThat 2nd sentence is also kind of a repeat of above so maybe just..\n\"The above list is not exhaustive. \"\n\nYour call."
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 65,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik.ibm@gmail.com",
                        "username": "santoshpuranik"
                    },
                    "message": "Thanks, I'll reword."
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 86,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "Can you spell or add the PIM to Phosphor Inventory Manager above?"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 86,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik.ibm@gmail.com",
                        "username": "santoshpuranik"
                    },
                    "message": "Ack"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 90,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "Can you spell out, or add the EM to above?"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 90,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik.ibm@gmail.com",
                        "username": "santoshpuranik"
                    },
                    "message": "Ack"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 118,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "I assume you will add a section depending on what we decide?"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 118,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik.ibm@gmail.com",
                        "username": "santoshpuranik"
                    },
                    "message": "Yes, once we decide on a design, I'll move the remaining over to \"Alternatives Considered\"."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "type": "ADDED",
                    "insertions": 117,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 130,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "2c9688f220a63a4f0946c2108f48c7c042eba757",
            "parents": [
                "f0ca2e418c0b4669d3a759775f654343f0b9e504"
            ],
            "ref": "refs/changes/68/41468/3",
            "uploader": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik.ibm@gmail.com",
                "username": "santoshpuranik"
            },
            "createdOn": 1616673091,
            "author": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik@in.ibm.com",
                "username": ""
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 21,
                    "reviewer": {
                        "name": "Vishwanatha Subbanna",
                        "email": "vishwa@linux.vnet.ibm.com",
                        "username": "vishwabmc"
                    },
                    "message": "want to call motherboard since that is what is used mostly ?"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 21,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik.ibm@gmail.com",
                        "username": "santoshpuranik"
                    },
                    "message": "Sure"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 51,
                    "reviewer": {
                        "name": "Vishwanatha Subbanna",
                        "email": "vishwa@linux.vnet.ibm.com",
                        "username": "vishwabmc"
                    },
                    "message": "contains the item / contains the inventory ? ( instead of one  )"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 51,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik.ibm@gmail.com",
                        "username": "santoshpuranik"
                    },
                    "message": "Since this is chassis within a chassis, I used \"one\""
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 56,
                    "reviewer": {
                        "name": "Vishwanatha Subbanna",
                        "email": "vishwa@linux.vnet.ibm.com",
                        "username": "vishwabmc"
                    },
                    "message": "use --> used"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 56,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik.ibm@gmail.com",
                        "username": "santoshpuranik"
                    },
                    "message": "Ack"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 86,
                    "reviewer": {
                        "name": "Vishwanatha Subbanna",
                        "email": "vishwa@linux.vnet.ibm.com",
                        "username": "vishwabmc"
                    },
                    "message": "want to expand PIM or give a reference to the glossary ?"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 86,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik.ibm@gmail.com",
                        "username": "santoshpuranik"
                    },
                    "message": "I have expanded this @ line 39"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 90,
                    "reviewer": {
                        "name": "Vishwanatha Subbanna",
                        "email": "vishwa@linux.vnet.ibm.com",
                        "username": "vishwabmc"
                    },
                    "message": "expand EM ?"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 90,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik.ibm@gmail.com",
                        "username": "santoshpuranik"
                    },
                    "message": "Expanded @ line 40"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "type": "ADDED",
                    "insertions": 117,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 130,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "e70d835246248043442a5e764f810b0596a6c75e",
            "parents": [
                "f0ca2e418c0b4669d3a759775f654343f0b9e504"
            ],
            "ref": "refs/changes/68/41468/4",
            "uploader": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik.ibm@gmail.com",
                "username": "santoshpuranik"
            },
            "createdOn": 1616758418,
            "author": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik@in.ibm.com",
                "username": ""
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "John Broadbent",
                        "email": "jebr@google.com",
                        "username": "jebr224"
                    },
                    "message": "necrobumping for bmcweb drives <-> chassis work.\n\nPlease see:\nhttps://gerrit.openbmc-project.xyz/c/openbmc/phosphor-dbus-interfaces/+/53676\n"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "I've seen some of the comments are addressed already. Consider closing them?"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 50,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I think we should also define how all these other associations are defined.  At a minimum I'd like to see a README created in phosphor-dbus-interfaces under Inventory (because that is how we document associations in other areas already)."
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 106,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "Isn't Associations interface just a list?\n\nHow will we be able to tell between the different types of relations?"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 106,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "oh wait, I guess you were not referring to https://github.com/openbmc/phosphor-dbus-interfaces/blob/master/yaml/xyz/openbmc_project/Association.interface.yaml.\n\nI guess you meant https://github.com/openbmc/phosphor-dbus-interfaces/blob/master/yaml/xyz/openbmc_project/Association/Definitions.interface.yaml.\n\nLooks like this should work fine. It will create a new path that is related to the type of connection to help determine the associations.\n\nIs the diff between I and II, just that ContainBy and Contains are not using Associations?"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 106,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "Thinking about it more. Is it better to use all Associations instead... since that scales better from my understand. If we have 5 board that is contained by each other like \n0 -> 1 -> ... ->4 \n\nThere will be like 5 level of paths and each of them might have a bunch of sensors.. sounds like a mess to me.\n\nWill full associations, I feel like the existing structure will not be mess around as much. But who know what other issue might come up with that."
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 106,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "> There will be like 5 level of paths and each of them might have a bunch of sensors.. sounds like a mess to me.\n\nWhy is it a mess?  It seems more intuitive to me.\n\nThe big advantage to hierarchy, to me, is it is more obvious from a human perspective.  A flat bunch of parts requires me to do a bunch of extra queries to figure out what is what.  A hierarchy (show by `busctl tree`) makes it quite obvious what is connected where.\n\nThe other big advantage of a hierarchy is naming when there are duplicate parts.  A small example: \"/.../proc3/core16\" is better than \"/.../proc3-core16\" and \"/.../core88\" [where 88 = 24 * 3 + 16]."
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 106,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "The use case that I think breaks the hierarchy path model is runtime replaceable chassis.  To support a hierarchy, you need one \"root\" object, that everything can be contained by.  Unfortunately, there are systems that runtime detect their chassis, or support user-uploaded chassis configs, which would mean that to model this properly, you'd have to start with something like\n\n/xyz/openbmc_project/inventory/my_motherboard/my_card\n\nThen, when the chassis is changed, this changes to.\n\n/xyz/openbmc_project/inventory/my_chassis/my_motherboard/my_card\n\nWhich requires a removal and re-add of the object on dbus, which would erroneously trigger a \"removal\" and subsequent re-init of my_card and the motherboard, even though they were not removed, the root object was just replaced.  Associations solve this because they're orthogonal to the path and can be created/destroyed/modified at will without modifying the base object.\n\nI agree, from a human perspective it's more obvious to use path, but from a software perspective, it's much worse as I don't know of a way to solve the above."
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 106,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "> The use case that I think breaks the hierarchy path model is runtime replaceable chassis.\n\nHow do you have a \"runtime replaceable chassis\" where the stuff inside it isn't replaced?  I must be missing something.\n\n> Unfortunately, there are systems that runtime detect their chassis...\n\nI understand this case.  It is mostly an ordering problem of detection?\n\n> or support user-uploaded chassis configs\n\nI don't understand what this means.  How would the user upload a chassis config?  Wouldn't they just change certain properties in it?\n\n> To support a hierarchy, you need one \"root\" object ... Then, when the chassis is changed, this changes to:\n\nI don't think you need a root object, but you need an element of the path.  Meaning, you don't need Interfaces and Properties to actually be there.  For the short-lived time where the chassis eeprom hasn't been read yet, wouldn't the motherboard still know that it is in a chassis?  Can't a name be determined for this not-yet-discovered chassis object so that the paths align?\n\n---\n\nIn any case, on line 113 I suggested that we allow both but prefer this proposal.  I agree there is probably some thought still needed to solve corner cases, such as what you're thinking on here, but my preference is that in general we follow a hierarchy model and use associations when the hierarchy doesn't fit (or due to implementation is difficult).  We need associations for connections between separate-but-equal chassis anyhow, right?"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 106,
                    "reviewer": {
                        "name": "John Broadbent",
                        "email": "jebr@google.com",
                        "username": "jebr224"
                    },
                    "message": "> /xyz/openbmc_project/inventory/my_motherboard/my_card\n> \n> Then, when the chassis is changed, this changes to.\n> \n> /xyz/openbmc_project/inventory/my_chassis/my_motherboard/my_card\n\nI don't fully understand the case where a chassis is removed, and the motherboards and cards stay connected. If that is the case, I would think the system to be improperly modeled, (if the container can be removed, and the contained items remain.)\n\nCould you give me a concrete example\n\n\nRedfish does not lend itself to the hierarchical data model. Looking forward PDI will be heavily influenced by the redfish lens, or other interfaces will become appealing (in the very long term)"
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 113,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Rather than being so open, I would prefer we explicitly favor one approach ('Proposal I' in my opinion) but allow Proposal II in specific cases:\n\n1. As a temporary mitigation until EM can support PropI.\n2. In a few cases where there are different relationships between how inventory is collected and the physical structure (I think Ed had a few examples, but I can't think of any myself)."
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "line": 117,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I certainly favor this than a compile-time switch.  We could end up with multiple inventory-providing services running in some cases and they may have a different implementation choice."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "architecture/dbus-inventory.md",
                    "type": "ADDED",
                    "insertions": 117,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 130,
            "sizeDeletions": 0
        }
    ]
}