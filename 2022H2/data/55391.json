{
    "project": "openbmc/phosphor-logging",
    "branch": "master",
    "id": "I3d4c78bb1650da9a91804fc83de60597992ffc8a",
    "number": 55391,
    "subject": "PEL: Add BMC uptime to PELs in UserData section",
    "owner": {
        "name": "George Liu",
        "email": "liuxiwei@inspur.com",
        "username": "lxwinspur"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-logging/+/55391",
    "hashtags": [],
    "createdOn": 1657856012,
    "lastUpdated": 1658363391,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1657856012,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1657856056,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1657856056,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1657856655,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/47034/ : SUCCESS"
        },
        {
            "timestamp": 1657891664,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 1:\n\n(2 comments)"
        },
        {
            "timestamp": 1657891759,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 1:\n\n(2 comments)"
        },
        {
            "timestamp": 1657941929,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1657941946,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 2:\n\n(4 comments)"
        },
        {
            "timestamp": 1657941982,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1657941982,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1657942082,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1657942126,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1657942126,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1657942126,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/47109/ : ABORTED"
        },
        {
            "timestamp": 1657942723,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/47110/ : SUCCESS"
        },
        {
            "timestamp": 1658245788,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 3:\n\n(4 comments)"
        },
        {
            "timestamp": 1658280855,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1658280872,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 3:\n\n(4 comments)"
        },
        {
            "timestamp": 1658280916,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1658280917,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1658281533,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/47297/ : SUCCESS"
        },
        {
            "timestamp": 1658327872,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 4: Code-Review+2"
        },
        {
            "timestamp": 1658363391,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Change has been successfully rebased and submitted as 9ac0d9b80363e4140c9c86cd149ea73a2541d052"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "0f3f12d1b87f236488ba834158271fadaf223a8f",
            "parents": [
                "742b00b9472d24e8cdf71e29eed1e8590cec2e1b"
            ],
            "ref": "refs/changes/91/55391/1",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1657856012,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "extensions/openpower-pels/data_interface.hpp",
                    "line": 163,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Could this code do the math to convert to days/hours/minutes/seconds? I think it would make the field more useful, especially to our support staff who may not be up on their math skills.\n\nFor example:  \"10d 3h 4m 5s\"\n\nThere's already a data_interface_test.cpp if you'd like to add some testcases to verify the conversion algorithm.  \n\nMaybe change this function to uint64_t(or size_t?) getUptimeInSeconds() and then make a new \n\nstd::string getUptime(uint64_t seconds) that you could then test."
                },
                {
                    "file": "extensions/openpower-pels/data_interface.hpp",
                    "line": 163,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                },
                {
                    "file": "extensions/openpower-pels/pel.cpp",
                    "line": 714,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Maybe change this to 'BMCUptime' to make sure people know we aren't talking about host uptime."
                },
                {
                    "file": "extensions/openpower-pels/pel.cpp",
                    "line": 714,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                },
                {
                    "file": "extensions/openpower-pels/pel.cpp",
                    "line": 715,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "may as well to 'BMCLoad' here too then."
                },
                {
                    "file": "extensions/openpower-pels/pel.cpp",
                    "line": 715,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                },
                {
                    "file": "extensions/openpower-pels/pel.hpp",
                    "line": 440,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "how about just 'addUptime'?  that way it reads like:\n\nif (addUptime)"
                },
                {
                    "file": "extensions/openpower-pels/pel.hpp",
                    "line": 440,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/data_interface.hpp",
                    "type": "MODIFIED",
                    "insertions": 59,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/pel.cpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": -3
                },
                {
                    "file": "extensions/openpower-pels/pel.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 103,
            "sizeDeletions": 4
        },
        {
            "number": 2,
            "revision": "391e806d76ea297dede7db44777097c9d428f1bc",
            "parents": [
                "742b00b9472d24e8cdf71e29eed1e8590cec2e1b"
            ],
            "ref": "refs/changes/91/55391/2",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1657941929,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/data_interface.hpp",
                    "type": "MODIFIED",
                    "insertions": 79,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/pel.cpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": -3
                },
                {
                    "file": "test/openpower-pels/data_interface_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/pel.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 135,
            "sizeDeletions": 4
        },
        {
            "number": 3,
            "revision": "4668f0135256cbfb3eb89adeb0a80c97dbcd0f1d",
            "parents": [
                "742b00b9472d24e8cdf71e29eed1e8590cec2e1b"
            ],
            "ref": "refs/changes/91/55391/3",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1657942082,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "extensions/openpower-pels/data_interface.hpp",
                    "line": 175,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "since  getUptimeInSeconds() will return a 0 if atol() fails or the code on line 161 runs, I think it would be better to return 'error' or something in that case instead of an uptime of zero which isn't possible."
                },
                {
                    "file": "extensions/openpower-pels/data_interface.hpp",
                    "line": 175,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                },
                {
                    "file": "extensions/openpower-pels/data_interface.hpp",
                    "line": 179,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "doesn't this wrap after a year? We've seen BMCs in the fields with uptimes longer than that.  I guess adding tm_year would fix that."
                },
                {
                    "file": "extensions/openpower-pels/data_interface.hpp",
                    "line": 179,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "> doesn't this wrap after a year? We've seen BMCs in the fields with uptimes longer than that.  I guess adding tm_year would fix that.\n\nAdded tm_year, like this:\n3y 332d 21h 33m 9s"
                },
                {
                    "file": "extensions/openpower-pels/data_interface.hpp",
                    "line": 182,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "to save a little bit of space, could you maybe just use d/h/m/s, like\n5d 3h 2m 1s"
                },
                {
                    "file": "extensions/openpower-pels/data_interface.hpp",
                    "line": 182,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                },
                {
                    "file": "extensions/openpower-pels/data_interface.hpp",
                    "line": 193,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Avg"
                },
                {
                    "file": "extensions/openpower-pels/data_interface.hpp",
                    "line": 193,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/data_interface.hpp",
                    "type": "MODIFIED",
                    "insertions": 79,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/pel.cpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": -3
                },
                {
                    "file": "test/openpower-pels/data_interface_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/pel.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 135,
            "sizeDeletions": 4
        },
        {
            "number": 4,
            "revision": "a753a7faedb4fb7420e97b6cf3a1927af2e73b0a",
            "parents": [
                "8edad2a8cef1a7ca2ea3f36ae84b3473f74bae8a"
            ],
            "ref": "refs/changes/91/55391/4",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1658280855,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/data_interface.hpp",
                    "type": "MODIFIED",
                    "insertions": 86,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/pel.cpp",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": -3
                },
                {
                    "file": "test/openpower-pels/data_interface_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/pel.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 150,
            "sizeDeletions": 4
        },
        {
            "number": 5,
            "revision": "9ac0d9b80363e4140c9c86cd149ea73a2541d052",
            "parents": [
                "8b81ec0e594c710073d04c26de386e8540c50b03"
            ],
            "ref": "refs/changes/91/55391/5",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1658363391,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/data_interface.hpp",
                    "type": "MODIFIED",
                    "insertions": 86,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/pel.cpp",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": -3
                },
                {
                    "file": "test/openpower-pels/data_interface_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/pel.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 150,
            "sizeDeletions": 4
        }
    ]
}