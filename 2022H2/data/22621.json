{
    "project": "openbmc/docs",
    "branch": "master",
    "id": "I0c28c108d52fad6edb1dd1be8ffc11f9539ccf9c",
    "number": 22621,
    "subject": "[docs-design]: U-Boot environment manager",
    "owner": {
        "name": "Richard Marian Thomaiyar",
        "email": "richard.marian.thomaiyar@linux.intel.com",
        "username": "rthomaiy"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/docs/+/22621",
    "hashtags": [],
    "createdOn": 1560526214,
    "lastUpdated": 1665658024,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1560526214,
            "reviewer": {
                "name": "Richard Marian Thomaiyar",
                "email": "richard.marian.thomaiyar@linux.intel.com",
                "username": "rthomaiy"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1560532312,
            "reviewer": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "message": "Patch Set 1:\n\n(4 comments)\n\nNice start."
        },
        {
            "timestamp": 1560533024,
            "reviewer": {
                "name": "Richard Marian Thomaiyar",
                "email": "richard.marian.thomaiyar@linux.intel.com",
                "username": "rthomaiy"
            },
            "message": "Patch Set 1:\n\n(4 comments)"
        },
        {
            "timestamp": 1560534957,
            "reviewer": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1560537375,
            "reviewer": {
                "name": "Richard Marian Thomaiyar",
                "email": "richard.marian.thomaiyar@linux.intel.com",
                "username": "rthomaiy"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1560542045,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1560564282,
            "reviewer": {
                "name": "Richard Marian Thomaiyar",
                "email": "richard.marian.thomaiyar@linux.intel.com",
                "username": "rthomaiy"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1560872763,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 2:\n\n(16 comments)"
        },
        {
            "timestamp": 1562225922,
            "reviewer": {
                "name": "Richard Marian Thomaiyar",
                "email": "richard.marian.thomaiyar@linux.intel.com",
                "username": "rthomaiy"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1562225931,
            "reviewer": {
                "name": "Richard Marian Thomaiyar",
                "email": "richard.marian.thomaiyar@linux.intel.com",
                "username": "rthomaiy"
            },
            "message": "Patch Set 2:\n\n(12 comments)"
        },
        {
            "timestamp": 1562793764,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 3: Code-Review+1\n\nLooks good to me. Would like to get 2 more +1s. Can Vernon/Ed/Adriana have a look?"
        },
        {
            "timestamp": 1563053466,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1563210059,
            "reviewer": {
                "name": "Richard Marian Thomaiyar",
                "email": "richard.marian.thomaiyar@linux.intel.com",
                "username": "rthomaiy"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1563304103,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 3: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1563417040,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 3:\n\nI wonder if we might be better off by not naming the design document and D-Bus interfaces after the firmware implementation (u-boot). A counter-point to this thought is it's unlikely that we're going something else in the short or even medium term - but it would be a silly wart in the API if we did eventually change. A counter-pointer to the counter-point though - weren't Intel using something other than u-boot a while back? I seem to recall James saying so."
        },
        {
            "timestamp": 1563455347,
            "reviewer": {
                "name": "Richard Marian Thomaiyar",
                "email": "richard.marian.thomaiyar@linux.intel.com",
                "username": "rthomaiy"
            },
            "message": "Patch Set 3:\n\n> I wonder if we might be better off by not naming the design\n > document and D-Bus interfaces after the firmware implementation\n > (u-boot). A counter-point to this thought is it's unlikely that\n > we're going something else in the short or even medium term - but\n > it would be a silly wart in the API if we did eventually change. A\n > counter-pointer to the counter-point though - weren't Intel using\n > something other than u-boot a while back? I seem to recall James\n > saying so.\n\nhmm i see your point. Actually this should environment manager (which is outside the linux or Bootloader environment). But at this point of time in OpenBMC we support only u-boot (yes, customers can change to different boot loader too, but that's different story). So, i think it's better to call it as U-Boot for the time being (Not sure, when the time is going to come to support different boot loaders in community itself)"
        },
        {
            "timestamp": 1564422275,
            "reviewer": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1564637713,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 3: Code-Review-1\n\n(2 comments)"
        },
        {
            "timestamp": 1566104426,
            "reviewer": {
                "name": "Richard Marian Thomaiyar",
                "email": "richard.marian.thomaiyar@linux.intel.com",
                "username": "rthomaiy"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1566787194,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1566832811,
            "reviewer": {
                "name": "Richard Marian Thomaiyar",
                "email": "richard.marian.thomaiyar@linux.intel.com",
                "username": "rthomaiy"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1571010921,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 3:\n\n(3 comments)\n\nSorry I've been slow to respond on this. Has there been any other progress?"
        },
        {
            "timestamp": 1589765799,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Removed reviewer Gunnar Mills with the following votes:\n\n* Code-Review+1 by Gunnar Mills <gmills@us.ibm.com>\n"
        },
        {
            "timestamp": 1602180716,
            "reviewer": {
                "name": "Milton D. Miller II",
                "email": "miltonm@us.ibm.com",
                "username": "mdmillerii"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1665658024,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Abandoned\n\nclose due to inactivity"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "0d2351a59f6e8171c76e2302fe1dfddb2832e06b",
            "parents": [
                "73266974f2d7904ea5132f11f18393e8acccacb1"
            ],
            "ref": "refs/changes/21/22621/1",
            "uploader": {
                "name": "Richard Marian Thomaiyar",
                "email": "richard.marian.thomaiyar@linux.intel.com",
                "username": "rthomaiy"
            },
            "createdOn": 1560526214,
            "author": {
                "name": "Richard Marian Thomaiyar",
                "email": "richard.marian.thomaiyar@linux.intel.com",
                "username": "rthomaiy"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 36,
                    "reviewer": {
                        "name": "Vernon Mauery",
                        "email": "vernon.mauery@linux.intel.com",
                        "username": "vmauery"
                    },
                    "message": "I would suggest environment instead of variable."
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 36,
                    "reviewer": {
                        "name": "Richard Marian Thomaiyar",
                        "email": "richard.marian.thomaiyar@linux.intel.com",
                        "username": "rthomaiy"
                    },
                    "message": "ok."
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 40,
                    "reviewer": {
                        "name": "Vernon Mauery",
                        "email": "vernon.mauery@linux.intel.com",
                        "username": "vmauery"
                    },
                    "message": "I would like to see a ReadVariable to get a single value."
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 40,
                    "reviewer": {
                        "name": "Richard Marian Thomaiyar",
                        "email": "richard.marian.thomaiyar@linux.intel.com",
                        "username": "rthomaiy"
                    },
                    "message": "ok. can add one ReadVariable method too.\nAlso, planning to provide an option of bool variable to force read or to use cache value"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 40,
                    "reviewer": {
                        "name": "Vernon Mauery",
                        "email": "vernon.mauery@linux.intel.com",
                        "username": "vmauery"
                    },
                    "message": "the force read or reload should not be necessary if inotify is used, it would be automatic."
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 40,
                    "reviewer": {
                        "name": "Richard Marian Thomaiyar",
                        "email": "richard.marian.thomaiyar@linux.intel.com",
                        "username": "rthomaiy"
                    },
                    "message": "yes, make sense, will not add."
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 42,
                    "reviewer": {
                        "name": "Vernon Mauery",
                        "email": "vernon.mauery@linux.intel.com",
                        "username": "vmauery"
                    },
                    "message": "In addition, we can use inotify to watch access to /dev/mtdX where the U-Boot environment is stored so that any non-dbus accesses (via fw_setenv or other direct accesses) can be picked up by the daemon."
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 42,
                    "reviewer": {
                        "name": "Richard Marian Thomaiyar",
                        "email": "richard.marian.thomaiyar@linux.intel.com",
                        "username": "rthomaiy"
                    },
                    "message": "yes, that also improves the caching performance."
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 47,
                    "reviewer": {
                        "name": "Vernon Mauery",
                        "email": "vernon.mauery@linux.intel.com",
                        "username": "vmauery"
                    },
                    "message": "In addition to the need to fork and exec, the application must be running at sufficient privilege (root) to be able to write to the mtd for fw_setenv."
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 47,
                    "reviewer": {
                        "name": "Richard Marian Thomaiyar",
                        "email": "richard.marian.thomaiyar@linux.intel.com",
                        "username": "rthomaiy"
                    },
                    "message": "will add the same"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "type": "ADDED",
                    "insertions": 54,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 70,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "cef8f5223f436080e2810aaeb31b1f735871502c",
            "parents": [
                "73266974f2d7904ea5132f11f18393e8acccacb1"
            ],
            "ref": "refs/changes/21/22621/2",
            "uploader": {
                "name": "Richard Marian Thomaiyar",
                "email": "richard.marian.thomaiyar@linux.intel.com",
                "username": "rthomaiy"
            },
            "createdOn": 1560537375,
            "author": {
                "name": "Richard Marian Thomaiyar",
                "email": "richard.marian.thomaiyar@linux.intel.com",
                "username": "rthomaiy"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 1,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "nitpick: U-Boot if you want to change, https://en.wikipedia.org/wiki/Das_U-Boot"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 1,
                    "reviewer": {
                        "name": "Richard Marian Thomaiyar",
                        "email": "richard.marian.thomaiyar@linux.intel.com",
                        "username": "rthomaiy"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 12,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "nitpick: move the to? or maybe \n\"Some OpenBMC applications require access to U-Boot environmental variables.\" ?"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 12,
                    "reviewer": {
                        "name": "Richard Marian Thomaiyar",
                        "email": "richard.marian.thomaiyar@linux.intel.com",
                        "username": "rthomaiy"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 14,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "nitpick: As there is no D-Bus interface to access U-Boot environmental variables?\n\nMaybe\n\"Since there is no D-Bus interface to access U-Boot environmental variables, OpenBMC applications are forced to read or write the variables using the fw_printenv or fw_setenv tools.\""
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 14,
                    "reviewer": {
                        "name": "Richard Marian Thomaiyar",
                        "email": "richard.marian.thomaiyar@linux.intel.com",
                        "username": "rthomaiy"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 21,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "repeat of the above if you want to remove or shorten."
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 21,
                    "reviewer": {
                        "name": "Richard Marian Thomaiyar",
                        "email": "richard.marian.thomaiyar@linux.intel.com",
                        "username": "rthomaiy"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 22,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "Could move this sentence above or shorten, mostly a repeat. \n\nMaybe rewrite this paragraph like\n\n## Background and References\n\t\nU-Boot environmental variables are used during firmware update and to preserve data during a factory reset. Since, no D-Bus interface exists these applications call the fw_printenv or fw_setenv tools directly and handle the output."
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 22,
                    "reviewer": {
                        "name": "Richard Marian Thomaiyar",
                        "email": "richard.marian.thomaiyar@linux.intel.com",
                        "username": "rthomaiy"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 29,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "Maybe \"Expose a D-Bus interface method to read all U-Boot environment variables and return them in a dictionary form.\" ?"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 29,
                    "reviewer": {
                        "name": "Richard Marian Thomaiyar",
                        "email": "richard.marian.thomaiyar@linux.intel.com",
                        "username": "rthomaiy"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 30,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "Nitpick: Provide a method to write U-Boot environment variables"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 33,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "nitpick: don't capitalize"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 36,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "Does UBoot fit more with what is here now, https://github.com/openbmc/phosphor-dbus-interfaces/tree/master/xyz/openbmc_project ?"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 37,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "3 D-Bus methods ?"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 37,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "Can you have a new line before 1, so \"1. ReadAllVariables\" will be on a new line?\nI use https://jbt.github.io/markdown-editor/ to test"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 37,
                    "reviewer": {
                        "name": "Richard Marian Thomaiyar",
                        "email": "richard.marian.thomaiyar@linux.intel.com",
                        "username": "rthomaiy"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 37,
                    "reviewer": {
                        "name": "Richard Marian Thomaiyar",
                        "email": "richard.marian.thomaiyar@linux.intel.com",
                        "username": "rthomaiy"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 38,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "Can you have a new line before 2 so \"2. ReadVarible\" will be on its own line ?"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 38,
                    "reviewer": {
                        "name": "Richard Marian Thomaiyar",
                        "email": "richard.marian.thomaiyar@linux.intel.com",
                        "username": "rthomaiy"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 39,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "nitpick: as a string, and return the data as a string."
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 40,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "space before which"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 40,
                    "reviewer": {
                        "name": "Richard Marian Thomaiyar",
                        "email": "richard.marian.thomaiyar@linux.intel.com",
                        "username": "rthomaiy"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 41,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "variable ?"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 41,
                    "reviewer": {
                        "name": "Richard Marian Thomaiyar",
                        "email": "richard.marian.thomaiyar@linux.intel.com",
                        "username": "rthomaiy"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 47,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "The libubootenv library should also be considered - https://lists.ozlabs.org/pipermail/openbmc/2019-May/016486.html"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 47,
                    "reviewer": {
                        "name": "Richard Marian Thomaiyar",
                        "email": "richard.marian.thomaiyar@linux.intel.com",
                        "username": "rthomaiy"
                    },
                    "message": "yes will check the same.\nNote: Will push our the first patch set which i have, which \nstill uses the fw_setenv / fw_printenv tools and execute it by fork, instead of calling it as library. But thought that we can make progress in that and fixing the interface properly to start with"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 55,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "nitpick: doesn't read quite right. \nMaybe something like\n\"This requires an interface to be defined, a daemon to be implemented, and the applications currently using the U-Boot environment variables to move over to this new interface.\""
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 55,
                    "reviewer": {
                        "name": "Richard Marian Thomaiyar",
                        "email": "richard.marian.thomaiyar@linux.intel.com",
                        "username": "rthomaiy"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "type": "ADDED",
                    "insertions": 58,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 74,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "1756074463484d3b18206aee91b5e80e14bb7021",
            "parents": [
                "73266974f2d7904ea5132f11f18393e8acccacb1"
            ],
            "ref": "refs/changes/21/22621/3",
            "uploader": {
                "name": "Richard Marian Thomaiyar",
                "email": "richard.marian.thomaiyar@linux.intel.com",
                "username": "rthomaiy"
            },
            "createdOn": 1562225922,
            "author": {
                "name": "Richard Marian Thomaiyar",
                "email": "richard.marian.thomaiyar@linux.intel.com",
                "username": "rthomaiy"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 35,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Given you're proposing a D-Bus interface here, maybe it's best to use a D-Bus type string to describe the structure?"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 35,
                    "reviewer": {
                        "name": "Richard Marian Thomaiyar",
                        "email": "richard.marian.thomaiyar@linux.intel.com",
                        "username": "rthomaiy"
                    },
                    "message": "Hi Andrew, can you explain here, what do you meant by D-Bus type string here?\nbasically it will be return dictionary of [string,string]."
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 35,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "I was suggesting you use the type strings from the specification:\n\nhttps://dbus.freedesktop.org/doc/dbus-specification.html#basic-types\n\nIn this case you want a DICT_ENTRY of strings, so it would be \"{ss}\"."
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 35,
                    "reviewer": {
                        "name": "Richard Marian Thomaiyar",
                        "email": "richard.marian.thomaiyar@linux.intel.com",
                        "username": "rthomaiy"
                    },
                    "message": "yes, was representing the same using DICT[string, string], the way it is represented in our D-Bus interface yaml file"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 35,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Okay, maybe I haven't paid enough attention to the yaml files."
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 39,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "I have a concern that vital variables like \"root\" would be exposed to be written with unsupported values (maybe by a code bug in the app) leaving the bmc unable to boot. Could we add some kind of whitelist or read-only feature to the design to prevent certain variables from being written?"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 39,
                    "reviewer": {
                        "name": "Richard Marian Thomaiyar",
                        "email": "richard.marian.thomaiyar@linux.intel.com",
                        "username": "rthomaiy"
                    },
                    "message": "yes we can, based on the need say a blacklist, where anything in the blacklist will not be updated. \nNote: This daemon is not user interfacing application, and whitelist / blacklist must be implemented in the user interfacing application (which i assume will be none). \nLet me know"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 39,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "Ok that clarification that the daemon is not user interfacing helps. Thanks."
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 39,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "I disagree with the idea that we should protect the BMC from itself. If something wants to write the root property it should be able to, but whatever it is needs to understand the risk of doing so."
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 39,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "If we really want to protect some variables U-boot already has the concept of write-once variables for things like serial numbers.\n\nIf we want different access controls then it should be a custom interface to allow just what is desired."
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 44,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Why not just use the generic properties interface?\n\nhttps://dbus.freedesktop.org/doc/dbus-specification.html#standard-interfaces-properties"
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 44,
                    "reviewer": {
                        "name": "Richard Marian Thomaiyar",
                        "email": "richard.marian.thomaiyar@linux.intel.com",
                        "username": "rthomaiy"
                    },
                    "message": "Didn't used the properties interfaces for the following reason.\n1. U-Boot param will not be constant\n2. Number of parameters differ from vendor to vendor\n3. GetAll will be ultimately used, hence the same is done through method specific interface.\nLet me know if you think any other advantage over properties interface, if needed can introduce the same."
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 44,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "> Didn't used the properties interfaces for the following reason.\n\nOkay, if you have reasons for not doing it some way you should outline them either here in the document or in the Alternatives Considered section. That way we have your complete reasoning for taking a particular direction captured, which is a primary goal of the design documents.\n\n> 1. U-Boot param will not be constant\n> 2. Number of parameters differ from vendor to vendor\n\nCan you explain why you think these two points are problematic?\n\n> 3. GetAll will be ultimately used, hence the same is done through method specific interface.\n\nI don't follow this last point. The standard interface defines a GetAll() method, why can't that be used?\n\nEssentially I don't see why we can't have \"dynamic\" properties (i.e. properties added to the object on the fly based on the content of the u-boot environment). It's all just code, you just need to accept writes to variables that might not yet exist, and issue a PropertiesChanged event when any variables are written. GetAll() will give the user the complete set of properties, and if they know a particular one exists they can just use the Get() interface.\n\nThis makes it all very standard to interact with from the client side, especially from the perspective of receiving signals when specific properties are updated."
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 44,
                    "reviewer": {
                        "name": "Richard Marian Thomaiyar",
                        "email": "richard.marian.thomaiyar@linux.intel.com",
                        "username": "rthomaiy"
                    },
                    "message": "1. Our regular sdbusplus code doesn't support adding dynamic property directly (if needed, the underlying code needs to be written). Note: sdbusplus asio (async) model supports the same, and it is easier to implement dynamic properties. \nBut the problem will be writing generic code / handler for the same. \nHaving said that one, yes, we can go ahead and extend the same as part of extension, such that this will be exposed (Actually, i want to expose all param's as property and based on file io monitor on the mtd partition, the update can be captured and accordingly, signals can be sent out). But didn't do it in the first round, concerning the community feedback on the same. \nAs i see some interest, can submit a separate update review on this document, to include the same. But want to keep both, as implementars will be allowed to choose either one or both."
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 44,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Code needs to be written either way. One approach provides a standard interface to dbus properties while the other requires we maintain the interface and implementation ourselves. I think it's beneficial to do the work necessary to support dynamic properties that can be fetched with GetAll()."
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "line": 44,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "Reading this discussion I think the natural mapping is each variable is a property, and getall will return.\n\nHowever, we have to temper that with / is allowed and = is not allowed in environment variable names."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "designs/u-boot-env-mgr.md",
                    "type": "ADDED",
                    "insertions": 58,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 74,
            "sizeDeletions": 0
        }
    ]
}