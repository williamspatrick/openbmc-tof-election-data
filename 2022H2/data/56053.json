{
    "project": "openbmc/bmcweb",
    "branch": "master",
    "id": "Iacba83d55352b89b102beb96d2e0585f6bb94eda",
    "number": 56053,
    "subject": "query: simplify $select",
    "owner": {
        "name": "Ed Tanous",
        "email": "ed@tanous.net",
        "username": "edtanous"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/bmcweb/+/56053",
    "hashtags": [],
    "createdOn": 1659374231,
    "lastUpdated": 1660854544,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1659374231,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1659374287,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1659374287,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1659374309,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/48136/ : FAILURE"
        },
        {
            "timestamp": 1659375783,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1659375826,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1659375827,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1659376320,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/48140/ : SUCCESS"
        },
        {
            "timestamp": 1659377769,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1659377778,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1659377822,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1659377822,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1659378321,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/48143/ : SUCCESS"
        },
        {
            "timestamp": 1659388357,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1659390018,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1659391894,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1659391910,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1659392628,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1659392709,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1659392709,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1659392810,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1659393212,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/48159/ : SUCCESS"
        },
        {
            "timestamp": 1659396825,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 5: Patch Set 4 was rebased"
        },
        {
            "timestamp": 1659396848,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1659396853,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1659397366,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/48163/ : SUCCESS"
        },
        {
            "timestamp": 1659399248,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 5:\n\n(4 comments)"
        },
        {
            "timestamp": 1659400119,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1659401777,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1659406170,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 5:\n\n(4 comments)"
        },
        {
            "timestamp": 1659411262,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Uploaded patch set 6."
        },
        {
            "timestamp": 1659411329,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1659411329,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: -Ok-To-Test"
        },
        {
            "timestamp": 1659411337,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 6:\n\n(2 comments)"
        },
        {
            "timestamp": 1659411352,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/48169/ : FAILURE"
        },
        {
            "timestamp": 1659411774,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Uploaded patch set 7."
        },
        {
            "timestamp": 1659411829,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1659411829,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: -Ok-To-Test"
        },
        {
            "timestamp": 1659412332,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/48171/ : SUCCESS"
        },
        {
            "timestamp": 1659460672,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1659460859,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1659464688,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1659468327,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Uploaded patch set 8."
        },
        {
            "timestamp": 1659468367,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1659468387,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1659468387,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: -Ok-To-Test"
        },
        {
            "timestamp": 1659468410,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/48238/ : FAILURE"
        },
        {
            "timestamp": 1659469323,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Uploaded patch set 9."
        },
        {
            "timestamp": 1659469387,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1659469387,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: -Ok-To-Test"
        },
        {
            "timestamp": 1659469891,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/48239/ : SUCCESS"
        },
        {
            "timestamp": 1659473149,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 10: Commit message was updated."
        },
        {
            "timestamp": 1659507167,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 11: Published edit on patch set 10."
        },
        {
            "timestamp": 1659507194,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 11:\n\n(1 comment)"
        },
        {
            "timestamp": 1659507224,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 11: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1659507224,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 11: -Ok-To-Test"
        },
        {
            "timestamp": 1659507724,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 11: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/48270/ : SUCCESS"
        },
        {
            "timestamp": 1660854544,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Abandoned\n\nNans patch solved this already."
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "f59eba6581f9b65119260dcd71758c7a743a36b1",
            "parents": [
                "0093c17562676afb5dbfcab14a3572be06e8c6fb"
            ],
            "ref": "refs/changes/53/56053/1",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1659374231,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/utils/query_param_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -14
                },
                {
                    "file": "redfish-core/include/utils/query_param.hpp",
                    "type": "MODIFIED",
                    "insertions": 88,
                    "deletions": -84
                }
            ],
            "sizeInsertions": 119,
            "sizeDeletions": 98
        },
        {
            "number": 2,
            "revision": "7adaca5b73b7317154f6324e782855c47032640c",
            "parents": [
                "0093c17562676afb5dbfcab14a3572be06e8c6fb"
            ],
            "ref": "refs/changes/53/56053/2",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1659375783,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Moving array handling to another patch."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/utils/query_param_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -14
                },
                {
                    "file": "redfish-core/include/utils/query_param.hpp",
                    "type": "MODIFIED",
                    "insertions": 88,
                    "deletions": -84
                }
            ],
            "sizeInsertions": 119,
            "sizeDeletions": 98
        },
        {
            "number": 3,
            "revision": "d6e1625346747d6092fda0a7c17df42cecbe8d91",
            "parents": [
                "0093c17562676afb5dbfcab14a3572be06e8c6fb"
            ],
            "ref": "refs/changes/53/56053/3",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1659377769,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 22,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "\ud83d\ude0a\ud83d\udc4d"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 22,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Yep, you did a good job."
                },
                {
                    "file": "redfish-core/include/utils/query_param.hpp",
                    "line": 275,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "I declare a new vector to avoid modifying selectedProperties when |getSelectParam| returns false."
                },
                {
                    "file": "redfish-core/include/utils/query_param.hpp",
                    "line": 275,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I thought about doing that, but that would require an extra stack variable and a std::move().  To actually see the change, it would require the user to ignore the return code, which seems unlikely, so I went with the non-move behavior.\n\nIf it's important to you, I can change it, but I don't see how this could have any effect on anything but a user that didn't follow the API."
                },
                {
                    "file": "redfish-core/include/utils/query_param.hpp",
                    "line": 275,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Ack. Not important at all. What you have is what I used to implement."
                },
                {
                    "file": "redfish-core/include/utils/query_param.hpp",
                    "line": 371,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "FYI, @Nan I'm pretty sure this is a bug in what you wrote (I didn't test it).  I'm fine if you want to merge your patch and rely on this one to fix it, or if you want to backport it to your patch, that's fine too."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/utils/query_param_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -14
                },
                {
                    "file": "redfish-core/include/utils/query_param.hpp",
                    "type": "MODIFIED",
                    "insertions": 51,
                    "deletions": -91
                }
            ],
            "sizeInsertions": 82,
            "sizeDeletions": 105
        },
        {
            "number": 4,
            "revision": "13e5e752ba2929b23cc6cd76e94bf3680c41ef7d",
            "parents": [
                "e9a920b1025dcc209707ae2548ca53269f69e94f"
            ],
            "ref": "refs/changes/53/56053/4",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1659392628,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/utils/query_param_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -14
                },
                {
                    "file": "redfish-core/include/utils/query_param.hpp",
                    "type": "MODIFIED",
                    "insertions": 50,
                    "deletions": -99
                }
            ],
            "sizeInsertions": 81,
            "sizeDeletions": 113
        },
        {
            "number": 5,
            "revision": "7a45d7492298878c9fa57edc0e317660f0408a25",
            "parents": [
                "e155ab54ec5ad4c31937f4d7de8b502e91468e43"
            ],
            "ref": "refs/changes/53/56053/5",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1659396825,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 20,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Previously it has the same complexity after preprocessing. If the size of the json tree is N, it's O(N).\n\nIf the length of selected properties is K (we limit K to <= 10 currently), the previous algorithm needs at most O(K*avg_len_of_property*avg_num_of_slash_in_property). Given all the constraints we have. This is not a lot.\n\nThe algorithm in the patch requires O(K*avg_len_of_property*logK) to sort the array. It also needs some more complexity when creating new vectors for strings.\n\nCould you explain why you see this algorithm a good optimization?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 20,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Also, we can implement the algorithm using a trie (making property array a trie), which is more efficient than before and this change."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 20,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> If the size of the json tree is N, it's O(N).\n\njson pointer operator[] lookup is O(log(N) * Depth) based on the number of nodes, so the overall is AvgDepthOfProperty * log(N) * K * N. (because K needs to be recursed per property).\n\n> The algorithm in the patch requires O(K*avg_len_of_property*logK) to sort the array\n\nNot sure what avg_len_of_property has to do with it, I would've assumed the dominant factor is K.\n\nK*log(K) is for the initial sort (assuming it's not sorted from the user, which seems likely).  This has nothing to do with N (number of keys in map).  N is significantly higher order of magnitude than K.\nA signal iteration of the tree is used, so that's N\nK is required once\n\nSo the new mechanism gives Klog(k) + N + K, assuming that we go with what you said (K is < 10 properties and is therefor small compared to N) this devolves down to N.\n\nThe old mechanism did a json_pointer lookup on the root at every level, while iterating, but didn't require the initial K sort, but did require K iteration for every key.\n\nSo you end up with\nN (to iterate the whole map) * log(N) ( to look of the json_pointer from the root) * K (to iterate your keys on each map)\n \n \n \nWith all of this said, the primary reason I did this is because,this is half the code, and is simpler, which presumably translates to binary size improvements (haven't measured that though.)  Less code is better.  I can get that coded up in the commit message.\n\n> making property array a trie\n\nYep, I thought about this, but that would lead to more code (we'd have to write a trie implementation, or generalize the one in the router), which somewhat defeats the purpose of this patch."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 20,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I updated the commit message with the above, which no longer talks about optimization, but talks about simplification, for which there is a measurable difference in binary size.  Let me know if you want more details there."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 20,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I'm reading the above;  I'm not sure I got all my O(n) mechanics right, but the commit message has been changed to not mention optimization.  The key is it's less code, and smaller binary."
                },
                {
                    "file": "redfish-core/include/utils/query_param.hpp",
                    "line": 817,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "You removed these TODOS, which doesn't seem to be intentional."
                },
                {
                    "file": "redfish-core/include/utils/query_param.hpp",
                    "line": 817,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Nope, was not;  It was an effect of the rebase.  Will fix."
                },
                {
                    "file": "redfish-core/include/utils/query_param.hpp",
                    "line": 817,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Done"
                },
                {
                    "file": "redfish-core/include/utils/query_param.hpp",
                    "line": 303,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "You are implementing somewhat a two pointer algorithm. This requires the JSON is sorted in the same way as here, right?\n\nDoes nlohmann JSON sort keys in AlphanumLess<std::string>?"
                },
                {
                    "file": "redfish-core/include/utils/query_param.hpp",
                    "line": 303,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> You are implementing somewhat a two pointer algorithm. This requires the JSON is sorted in the same way as here, right?\n\nYep, and I added comments to that effect.\n\n> \n> Does nlohmann JSON sort keys in AlphanumLess<std::string>?\n\nnlohmann json sorts keys by std::less at each level (because it is a std::map underneath), with the array indexes being the equivalent of AlphaNumLess\n\nkey1/1\nkey1/2\nkey1/22\n\nwhich has functionally the same sort order as alphanumLess, once the tree is accounted for."
                },
                {
                    "file": "redfish-core/include/utils/query_param.hpp",
                    "line": 303,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "We have to use the SAME sort operator.\n\nThis code doesn't pass the following test, does it?\n\n```\nTEST(RecursiveSelect, Numeric)\n{\n    std::vector<std::string> shouldSelect = {\"3\", \"11\"};\n    nlohmann::json root = R\"(\n{\n  \"11\":[\n    \"foo\"\n  ],\n  \"3\" : \"bar\"\n}\n)\"_json;\n    nlohmann::json expected = root;\n    performSelect(root, shouldSelect);\n    EXPECT_EQ(root, expected);\n}\n```"
                },
                {
                    "file": "redfish-core/include/utils/query_param.hpp",
                    "line": 303,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "That's a good point, I didn't think about if there were numbers in key names.  Although Redfish I don't think uses numbers in their property names, but you're right, the algorithm shouldn't assume that, because they might show up in an OEM.\n\nI can go back to the double loop that existed before in a previous patchset.\n\nGood catch!"
                },
                {
                    "file": "redfish-core/include/utils/query_param.hpp",
                    "line": 303,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Fixed in latest patch to completely remove the sort, and add an extra K loop (which seems reasonable)."
                },
                {
                    "file": "redfish-core/include/utils/query_param.hpp",
                    "line": 742,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "This can be string_view"
                },
                {
                    "file": "redfish-core/include/utils/query_param.hpp",
                    "line": 742,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I originally tried that, but there's a subtle pointer invalidation problem that occurred on delete.  If it's important I can look at it again."
                },
                {
                    "file": "redfish-core/include/utils/query_param.hpp",
                    "line": 742,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Fixed in latest.  I had to wrap the stubstr call in a string_view."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/utils/query_param_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -14
                },
                {
                    "file": "redfish-core/include/utils/query_param.hpp",
                    "type": "MODIFIED",
                    "insertions": 50,
                    "deletions": -99
                }
            ],
            "sizeInsertions": 81,
            "sizeDeletions": 113
        },
        {
            "number": 6,
            "revision": "39b975827c5d3da86f6fb7c72fb7f82d1fc31762",
            "parents": [
                "e155ab54ec5ad4c31937f4d7de8b502e91468e43"
            ],
            "ref": "refs/changes/53/56053/6",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1659411262,
            "author": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 27,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/utils/query_param_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -14
                },
                {
                    "file": "redfish-core/include/utils/query_param.hpp",
                    "type": "MODIFIED",
                    "insertions": 50,
                    "deletions": -99
                }
            ],
            "sizeInsertions": 83,
            "sizeDeletions": 113
        },
        {
            "number": 7,
            "revision": "435008ba31a1e16e3fe2d72b1eaf25e2d88e94ee",
            "parents": [
                "e155ab54ec5ad4c31937f4d7de8b502e91468e43"
            ],
            "ref": "refs/changes/53/56053/7",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1659411774,
            "author": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 27,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/utils/query_param_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -14
                },
                {
                    "file": "redfish-core/include/utils/query_param.hpp",
                    "type": "MODIFIED",
                    "insertions": 50,
                    "deletions": -99
                }
            ],
            "sizeInsertions": 83,
            "sizeDeletions": 113
        },
        {
            "number": 8,
            "revision": "398b7f9ce0f0616aca00451f34a62783c7df3e8a",
            "parents": [
                "e155ab54ec5ad4c31937f4d7de8b502e91468e43"
            ],
            "ref": "refs/changes/53/56053/8",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1659468327,
            "author": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 27,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/utils/query_param_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -14
                },
                {
                    "file": "redfish-core/include/utils/query_param.hpp",
                    "type": "MODIFIED",
                    "insertions": 45,
                    "deletions": -99
                }
            ],
            "sizeInsertions": 78,
            "sizeDeletions": 113
        },
        {
            "number": 9,
            "revision": "42c910629a1978d8035c88a41fd2a5b7bf372026",
            "parents": [
                "e155ab54ec5ad4c31937f4d7de8b502e91468e43"
            ],
            "ref": "refs/changes/53/56053/9",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1659469323,
            "author": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 27,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/utils/query_param_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -14
                },
                {
                    "file": "redfish-core/include/utils/query_param.hpp",
                    "type": "MODIFIED",
                    "insertions": 45,
                    "deletions": -99
                }
            ],
            "sizeInsertions": 78,
            "sizeDeletions": 113
        },
        {
            "number": 10,
            "revision": "95a1c530f05f07d42989d7cc7d0a77c08f8bcd0a",
            "parents": [
                "e155ab54ec5ad4c31937f4d7de8b502e91468e43"
            ],
            "ref": "refs/changes/53/56053/10",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1659473149,
            "author": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 27,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/utils/query_param_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -14
                },
                {
                    "file": "redfish-core/include/utils/query_param.hpp",
                    "type": "MODIFIED",
                    "insertions": 45,
                    "deletions": -99
                }
            ],
            "sizeInsertions": 78,
            "sizeDeletions": 113
        },
        {
            "number": 11,
            "revision": "d93ca47ca1eceee05105346db8c6994c69b9cfe9",
            "parents": [
                "e155ab54ec5ad4c31937f4d7de8b502e91468e43"
            ],
            "ref": "refs/changes/53/56053/11",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1659507167,
            "author": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 27,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/utils/query_param_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -14
                },
                {
                    "file": "redfish-core/include/utils/query_param.hpp",
                    "type": "MODIFIED",
                    "insertions": 60,
                    "deletions": -105
                }
            ],
            "sizeInsertions": 93,
            "sizeDeletions": 119
        }
    ]
}