{
    "project": "openbmc/phosphor-user-manager",
    "branch": "master",
    "id": "I2b1a845a0bc9ffb5f1b52120720689a09052e9d7",
    "number": 58226,
    "subject": "Keep last Admin user",
    "owner": {
        "name": "Xiaochao Ma",
        "email": "maxiaochao@inspur.com",
        "username": "XiaochaoMa"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-user-manager/+/58226",
    "hashtags": [],
    "createdOn": 1666841181,
    "lastUpdated": 1671724278,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1666841181,
            "reviewer": {
                "name": "Xiaochao Ma",
                "email": "maxiaochao@inspur.com",
                "username": "XiaochaoMa"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1666841238,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1666841238,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1666841398,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/54172/ : SUCCESS"
        },
        {
            "timestamp": 1667310308,
            "reviewer": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1667310828,
            "reviewer": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1667554477,
            "reviewer": {
                "name": "Xiaochao Ma",
                "email": "maxiaochao@inspur.com",
                "username": "XiaochaoMa"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1667554591,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1667554591,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1667554751,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/54678/ : SUCCESS"
        },
        {
            "timestamp": 1667783509,
            "reviewer": {
                "name": "Xiaochao Ma",
                "email": "maxiaochao@inspur.com",
                "username": "XiaochaoMa"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1668170459,
            "reviewer": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1668170936,
            "reviewer": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1668479259,
            "reviewer": {
                "name": "Xiaochao Ma",
                "email": "maxiaochao@inspur.com",
                "username": "XiaochaoMa"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1668552711,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1668552764,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1668553305,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1668553328,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1668553506,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 2:\n\n(3 comments)"
        },
        {
            "timestamp": 1671724278,
            "reviewer": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "d9a8247e32a2370955a21ab30b5375ffb38cc422",
            "parents": [
                "78d850422ead4618b3c8fafafecf58c4b8c9f9ca"
            ],
            "ref": "refs/changes/26/58226/1",
            "uploader": {
                "name": "Xiaochao Ma",
                "email": "maxiaochao@inspur.com",
                "username": "XiaochaoMa"
            },
            "createdOn": 1666841181,
            "author": {
                "name": "Xiaochao Ma",
                "email": "maxiaochao@inspur.com",
                "username": "XiaochaoMa"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "Can we create the unit test for all those test cases listed in the commit message? "
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Xiaochao Ma",
                        "email": "maxiaochao@inspur.com",
                        "username": "XiaochaoMa"
                    },
                    "message": "As for test cases, I don't know what to do now\n\nThe reason is that this function will take effect based on an environment where there is no 'root' user. How can our unit test modify this scenario?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "I am surprised that you can not add the test case for the function which you are introducing.\n-   getEnabledAdminList()\nTest case 1: If no user what does this function return?\nTest case 2: Add a fake user user which is not in the priv admin group then verify what this function returns.\nTest case 3: Add a fake user user which part of the priv admin group then verify the function behaviour.\nTest case 4: Add multiple user and verify the function behaviour.\nTest case 5: delete and verify.\nI think you have test all these but didn't add the unit test for the same."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Xiaochao Ma",
                        "email": "maxiaochao@inspur.com",
                        "username": "XiaochaoMa"
                    },
                    "message": "The point is that test case 4 you mentioned.\nI thought the 'root' user would always exist and couldn't be removed, so I don't know how to implement this test.\nNow that I figured it out, I'm going to work on implementing these few tests."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "I guess you get the point. |getUserAndSshGrpList| can be overridden to a fake function which returns anything you want. Please take a look at the tests I submitted recently."
                },
                {
                    "file": "user_mgr.hpp",
                    "line": 119,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "Can you add the documentation for return type: Both the values for the pair?\nI am hoping the first parameter os return value and if this is success then use the second value which is the list of enabled admin user."
                },
                {
                    "file": "user_mgr.hpp",
                    "line": 119,
                    "reviewer": {
                        "name": "Xiaochao Ma",
                        "email": "maxiaochao@inspur.com",
                        "username": "XiaochaoMa"
                    },
                    "message": "I optimized the structure. Please read it again"
                },
                {
                    "file": "user_mgr.hpp",
                    "line": 119,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "I might miss something, where is this new function used?"
                },
                {
                    "file": "user_mgr.hpp",
                    "line": 119,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "I see, it's in user.cpp. NVM."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 48,
                    "deletions": 0
                },
                {
                    "file": "user_mgr.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": 0
                },
                {
                    "file": "users.cpp",
                    "type": "MODIFIED",
                    "insertions": 50,
                    "deletions": 0
                },
                {
                    "file": "user_mgr.cpp",
                    "type": "MODIFIED",
                    "insertions": 37,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 141,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "74064391454ad690424c65aeb9599a925c8e54d2",
            "parents": [
                "78d850422ead4618b3c8fafafecf58c4b8c9f9ca"
            ],
            "ref": "refs/changes/26/58226/2",
            "uploader": {
                "name": "Xiaochao Ma",
                "email": "maxiaochao@inspur.com",
                "username": "XiaochaoMa"
            },
            "createdOn": 1667554477,
            "author": {
                "name": "Xiaochao Ma",
                "email": "maxiaochao@inspur.com",
                "username": "XiaochaoMa"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Could you also add why this is helpful? What benefits it brings in?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "ping"
                },
                {
                    "file": "user_mgr.cpp",
                    "line": 497,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "Try to avoid nested if, You can code like this.\nif (user name list .empty())\nreturn"
                },
                {
                    "file": "user_mgr.cpp",
                    "line": 497,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "+1"
                },
                {
                    "file": "user_mgr.cpp",
                    "line": 507,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Prefer using boolean directly |userEnable|"
                },
                {
                    "file": "users.cpp",
                    "line": 81,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Prefer explicit types over auto to just save codes"
                },
                {
                    "file": "users.cpp",
                    "line": 84,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Could you combine this two branches to save indents?"
                },
                {
                    "file": "users.cpp",
                    "line": 140,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "What is this magic number tells?"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 48,
                    "deletions": 0
                },
                {
                    "file": "user_mgr.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": 0
                },
                {
                    "file": "users.cpp",
                    "type": "MODIFIED",
                    "insertions": 50,
                    "deletions": 0
                },
                {
                    "file": "user_mgr.cpp",
                    "type": "MODIFIED",
                    "insertions": 35,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 139,
            "sizeDeletions": 0
        }
    ]
}