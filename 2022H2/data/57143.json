{
    "project": "openbmc/bmcweb",
    "branch": "master",
    "id": "I8bfb7a8fef28d2ab6a7d77fb809c0b3e51e368f8",
    "number": 57143,
    "subject": "processor: Don't display DBus defaults",
    "owner": {
        "name": "Brad Bishop",
        "email": "bradleyb@fuzziesquirrel.com",
        "username": "bradbishop"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/bmcweb/+/57143",
    "hashtags": [],
    "createdOn": 1663176448,
    "lastUpdated": 1663276900,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1663176448,
            "reviewer": {
                "name": "Brad Bishop",
                "email": "bradleyb@fuzziesquirrel.com",
                "username": "bradbishop"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1663176550,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1663176555,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1663177077,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/50765/ : SUCCESS"
        },
        {
            "timestamp": 1663180146,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1663181076,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1663181157,
            "reviewer": {
                "name": "Brad Bishop",
                "email": "bradleyb@fuzziesquirrel.com",
                "username": "bradbishop"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1663181223,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 1:\n\n(2 comments)"
        },
        {
            "timestamp": 1663181447,
            "reviewer": {
                "name": "Brad Bishop",
                "email": "bradleyb@fuzziesquirrel.com",
                "username": "bradbishop"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1663181490,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1663181490,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1663181593,
            "reviewer": {
                "name": "Brad Bishop",
                "email": "bradleyb@fuzziesquirrel.com",
                "username": "bradbishop"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1663181724,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 2: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1663181730,
            "reviewer": {
                "name": "Brad Bishop",
                "email": "bradleyb@fuzziesquirrel.com",
                "username": "bradbishop"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1663182214,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/50769/ : SUCCESS"
        },
        {
            "timestamp": 1663183625,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1663185798,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 1:\n\n(3 comments)"
        },
        {
            "timestamp": 1663185995,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1663188358,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 2: Code-Review+1"
        },
        {
            "timestamp": 1663226557,
            "reviewer": {
                "name": "ankita prasad",
                "email": "ankita.prasad@intel.com",
                "username": "ankitaprsad22"
            },
            "message": "Patch Set 2:\n\n(3 comments)"
        },
        {
            "timestamp": 1663252163,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1663276875,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2:\n\n(6 comments)"
        },
        {
            "timestamp": 1663276881,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2: Code-Review+2"
        },
        {
            "timestamp": 1663276900,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Change has been successfully rebased and submitted as 6169de2c39d2b08451a64fbf45798ae8cb5624fb"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "068ff7f2822839daa580188ded805ebca3fc2e3f",
            "parents": [
                "99351cd856038475cac146029e5db03767a1459c"
            ],
            "ref": "refs/changes/43/57143/1",
            "uploader": {
                "name": "Brad Bishop",
                "email": "bradleyb@fuzziesquirrel.com",
                "username": "bradbishop"
            },
            "createdOn": 1663176448,
            "author": {
                "name": "Brad Bishop",
                "email": "bradleyb@fuzziesquirrel.com",
                "username": "bradbishop"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "line": 161,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This logic looks wrong to me.  If *value == 0, we want to omit the property, right?"
                },
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "line": 161,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "You looked at an old patchset."
                },
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "line": 161,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "ACK.  Comment was written before the patchset was present, but submitted later."
                },
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "line": 166,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "Can we do \nif (*value != 0)\n{\n  aResp->res.jsonValue[\"ProcessorId\"][\"EffectiveModel\"] =  ...     \n\n}\n\nLike we do below?"
                },
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "line": 166,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Wait, I read this as if (*value) is not zero, we error it out. Is this what we want to do.\n\nI thought we just want to omit the default DBus value in Redfish"
                },
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "line": 166,
                    "reviewer": {
                        "name": "Brad Bishop",
                        "email": "bradleyb@fuzziesquirrel.com",
                        "username": "bradbishop"
                    },
                    "message": "yeah, this is a bug."
                },
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "line": 166,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Maybe I missed something? Does it make sense to document the dbus default value here as a comment?"
                },
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "line": 166,
                    "reviewer": {
                        "name": "Brad Bishop",
                        "email": "bradleyb@fuzziesquirrel.com",
                        "username": "bradbishop"
                    },
                    "message": "> Maybe I missed something?\n\nI don't think you missed anything - I meant that you spotted a bug in what I did.  I've fixed it in PS2.\n\n> Does it make sense to document the dbus default value here as a comment?\n\nThey are already documented in phosphor-dbus-interfaces.  I don't really think it makes sense to document it again here."
                },
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "line": 166,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "There's race condition. I didn't see your reply \"yeah, this is a bug.\" when  I send out \"Maybe I missed something\".\n\n> They are already documented in phosphor-dbus-interfaces.  I don't really think it makes sense to document it again here.\n\nOkay"
                },
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "line": 166,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "+1"
                },
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "line": 187,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Does \n\n```\nif (*value == 0) continue;\naResp->res.jsonValue[\"ProcessorId\"][\"MicrocodeInfo\"] =\n  \"0x\" + intToHexString(*value, 8);\n```\n\nlooks better?"
                },
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "line": 187,
                    "reviewer": {
                        "name": "Brad Bishop",
                        "email": "bradleyb@fuzziesquirrel.com",
                        "username": "bradbishop"
                    },
                    "message": "if (*value == 0) continue;\n\nI'm not sure if that ^ looks better or not but it doesn't comply with the style guidelines."
                },
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "line": 187,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "That's just because I was lazy to type the brackets.\n\n```\nif (*value == 0)\n{\n  continue;\n}\naResp->res.jsonValue[\"ProcessorId\"][\"MicrocodeInfo\"] =\n  \"0x\" + intToHexString(*value, 8);\n```\n\nIn this way, you don't see a diff on the line of aResp->res.jsonValue at all.\n\nIt's also alligned with existing branches\n\n\n```\nif (value == nullptr)\n{\n  messages::internalError(aResp->res);\n  return;\n}\n```\n\nIt's a nit. Up to you."
                },
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "line": 187,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I'm of the opinion that it's not worthwhile enforcing style to the level above.  Both are functionally correct, and reasonably readable.  If Brad wants to change it, he should feel free, but I'm not sure I want to hold up a patch for a minor change like this."
                },
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "line": 201,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This logic looks right to me."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -7
                }
            ],
            "sizeInsertions": 28,
            "sizeDeletions": 7
        },
        {
            "number": 2,
            "revision": "9e5a58c3e970a90fbfb58ee4ce66974aee569efe",
            "parents": [
                "99351cd856038475cac146029e5db03767a1459c"
            ],
            "ref": "refs/changes/43/57143/2",
            "uploader": {
                "name": "Brad Bishop",
                "email": "bradleyb@fuzziesquirrel.com",
                "username": "bradbishop"
            },
            "createdOn": 1663181447,
            "author": {
                "name": "Brad Bishop",
                "email": "bradleyb@fuzziesquirrel.com",
                "username": "bradbishop"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "line": 152,
                    "reviewer": {
                        "name": "ankita prasad",
                        "email": "ankita.prasad@intel.com",
                        "username": "ankitaprsad22"
                    },
                    "message": "why specifically are we checking *value!=2?"
                },
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "line": 152,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "That is the default here: https://github.com/openbmc/phosphor-dbus-interfaces/blob/a1a46a94405db4fc29d9ad695dee44e2214e4262/yaml/xyz/openbmc_project/Inventory/Item/Cpu.interface.yaml#L23"
                },
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "line": 152,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Done"
                },
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "line": 191,
                    "reviewer": {
                        "name": "ankita prasad",
                        "email": "ankita.prasad@intel.com",
                        "username": "ankitaprsad22"
                    },
                    "message": "I see formatting issue here. Please reformat the code."
                },
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "line": 191,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "Clang-format passed.. What is the concern with the format?"
                },
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "line": 191,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "We do as the clang-format robot commands.  I don't see anything that's incorrect here."
                },
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "line": 204,
                    "reviewer": {
                        "name": "ankita prasad",
                        "email": "ankita.prasad@intel.com",
                        "username": "ankitaprsad22"
                    },
                    "message": "formatting issue."
                },
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "line": 204,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "+1 to the above, we have the autoformatter that runs.  If this is something that clang-format can't find, that's outside the scope of this patch."
                },
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "line": 356,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Note, we should look for other places we do this wrong (and ideally have them call similar code at some point)."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "type": "MODIFIED",
                    "insertions": 17,
                    "deletions": -8
                }
            ],
            "sizeInsertions": 32,
            "sizeDeletions": 8
        },
        {
            "number": 3,
            "revision": "6169de2c39d2b08451a64fbf45798ae8cb5624fb",
            "parents": [
                "ce34d514150c0e4aa8f127dad8ede8b428c56930"
            ],
            "ref": "refs/changes/43/57143/3",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1663276900,
            "author": {
                "name": "Brad Bishop",
                "email": "bradleyb@fuzziesquirrel.com",
                "username": "bradbishop"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/processor.hpp",
                    "type": "MODIFIED",
                    "insertions": 17,
                    "deletions": -8
                }
            ],
            "sizeInsertions": 32,
            "sizeDeletions": 8
        }
    ]
}