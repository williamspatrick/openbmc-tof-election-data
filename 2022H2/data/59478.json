{
    "project": "openbmc/phosphor-power",
    "branch": "master",
    "id": "I9938e9b3e2edc3954cc14b330a517889317b4477",
    "number": 59478,
    "subject": "psu-ng: Change logic to clear brownout",
    "owner": {
        "name": "Jim Wright",
        "email": "jlwright@us.ibm.com",
        "username": "wrightjl1"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-power/+/59478",
    "hashtags": [],
    "createdOn": 1670522960,
    "lastUpdated": 1671221594,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1670522960,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1670522996,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1670522996,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1670523864,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/57240/ : SUCCESS"
        },
        {
            "timestamp": 1670531916,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "andrew@geissonator.com",
                "username": "geissonator"
            },
            "message": "Patch Set 1:\n\n(3 comments)"
        },
        {
            "timestamp": 1670539672,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1670539693,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1670539693,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1670539860,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1670540497,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/57262/ : SUCCESS"
        },
        {
            "timestamp": 1670600214,
            "reviewer": {
                "name": "Derek Howard",
                "email": "derekh@us.ibm.com",
                "username": "derekhoward55"
            },
            "message": "Patch Set 2: Code-Review+1\n\n(3 comments)"
        },
        {
            "timestamp": 1670627523,
            "reviewer": {
                "name": "Richard-Hanley",
                "email": "rhanley@google.com",
                "username": "Richard-Hanley"
            },
            "message": "Patch Set 2: Code-Review+1\n\n(5 comments)"
        },
        {
            "timestamp": 1670869960,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Uploaded patch set 3: Patch Set 2 was rebased."
        },
        {
            "timestamp": 1670869984,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1670869984,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1670870687,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/57536/ : SUCCESS"
        },
        {
            "timestamp": 1670891724,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 3:\n\n(4 comments)"
        },
        {
            "timestamp": 1670943774,
            "reviewer": {
                "name": "Derek Howard",
                "email": "derekh@us.ibm.com",
                "username": "derekhoward55"
            },
            "message": "Patch Set 3: Code-Review+1\n\n(4 comments)"
        },
        {
            "timestamp": 1670969668,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1670969706,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1670969707,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1670969725,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/57670/ : FAILURE"
        },
        {
            "timestamp": 1670971412,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1670971436,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1670971436,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1670972038,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/57674/ : SUCCESS"
        },
        {
            "timestamp": 1670986045,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Patch Set 5:\n\n(8 comments)"
        },
        {
            "timestamp": 1671036390,
            "reviewer": {
                "name": "Derek Howard",
                "email": "derekh@us.ibm.com",
                "username": "derekhoward55"
            },
            "message": "Patch Set 5: Code-Review+1"
        },
        {
            "timestamp": 1671065561,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 5: Code-Review+1"
        },
        {
            "timestamp": 1671130700,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 5: Code-Review+1"
        },
        {
            "timestamp": 1671212469,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 5: Code-Review+2"
        },
        {
            "timestamp": 1671221585,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Patch Set 5:\n\n(5 comments)"
        },
        {
            "timestamp": 1671221594,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Change has been successfully merged"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "2f3e7d08760476848f77f542af208c0db19572c0",
            "parents": [
                "0a2b76bc3031c324879c698865d1490f5b6d8b99"
            ],
            "ref": "refs/changes/78/59478/1",
            "uploader": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "createdOn": 1670522960,
            "author": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "andrew@geissonator.com",
                        "username": "geissonator"
                    },
                    "message": "I have pretty minimal knowledge in this area but the high level concept of waiting for chassis power to be off before setting the power status to good to get APR to run looks good to me!"
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 804,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "andrew@geissonator.com",
                        "username": "geissonator"
                    },
                    "message": "nit: spelling"
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 804,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Done"
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 805,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "andrew@geissonator.com",
                        "username": "geissonator"
                    },
                    "message": "nit: spelling"
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 805,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 108,
                    "deletions": -80
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -9
                },
                {
                    "file": "phosphor-power-supply/psu_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -22
                }
            ],
            "sizeInsertions": 139,
            "sizeDeletions": 111
        },
        {
            "number": 2,
            "revision": "849ff33af75b67a9aa8cccd3617a84939de65d62",
            "parents": [
                "0a2b76bc3031c324879c698865d1490f5b6d8b99"
            ],
            "ref": "refs/changes/78/59478/2",
            "uploader": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "createdOn": 1670539672,
            "author": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 12,
                    "reviewer": {
                        "name": "Richard-Hanley",
                        "email": "rhanley@google.com",
                        "username": "Richard-Hanley"
                    },
                    "message": "It might be helpful to add a Tested line, so that others would know how test changes like this in the future."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 12,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Done, sorry for the vagueness I don't have the PLD tester or perform the testing."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "Looks good, I think we handle the multitude of failing scenarios correctly.\n\nDocumenting some of the failing scenarios in case we run into problems in the future:\n\n1. Short brownout (< ~10s, eg this defect): should APR correctly when AC returns.\n\n2. Long brownout (> ~10s): we'll see at least 1 of the PSU report AC good and APR.  If half of PSU (eg 2 of 4) report AC good, we'll correctly APR, since customers typically would have half of psu on 1 utility, and other half on other utility.  Only weird scenario would be we'd thrash if only 1 of 4 psu had AC good, but that would be unlikely since customers wouldn't cable system like that, is an unlikely type of PLD, and only would happen if 1 psu couldn't hold system up.\n\n3. 1+ psu report no acFail or pgoodFail, others do - we'll correctly stay up until the chassis pgood fails. As long as 1 psu is reporting AC&pgood are fine, we'll correctly NOT log this as a brownout.  It would be a psu bug if this was the case; too hard to code around all potential psu fw bugs.\n\n4. If none of the present psu report AC loss (just pgood fails) when PLD happened, we'd shut off with pgood fail (eg 11002620) instead of AC loss (110000AC). This would be psu fw bugs, and we can't correctly guess it was due to AC loss, since it may be a legitimate short or other pgood fail.  As long as 1 of the psu reports loss of AC, we'll shut down with 00AC and APR.\n\n5. Blackout, whether short or long, we'll correctly APR."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Richard-Hanley",
                        "email": "rhanley@google.com",
                        "username": "Richard-Hanley"
                    },
                    "message": "I added in a few style nits that could make this easier for review."
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 514,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "ah i see, we'd never decrement acFault down to 0 without this change, good catch!\ncould just use an 'else' here if making any other changes..."
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 514,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Done"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 515,
                    "reviewer": {
                        "name": "Richard-Hanley",
                        "email": "rhanley@google.com",
                        "username": "Richard-Hanley"
                    },
                    "message": "Nit: vinUFault is an int, and we usually want explicit comparisons for integer types in conditionals."
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 515,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Done"
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 561,
                    "reviewer": {
                        "name": "Richard-Hanley",
                        "email": "rhanley@google.com",
                        "username": "Richard-Hanley"
                    },
                    "message": "It took a moment to realize this was a move then edit. In the future it might be worth creating a move commit and then stack the edit commit."
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 561,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Ack"
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 851,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "looks like Andrew confirmed that the above is correct for \"xyz.openbmc_project.State.Chassis.PowerState.Off\""
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 851,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Marking resolved."
                },
                {
                    "file": "phosphor-power-supply/psu_manager.hpp",
                    "line": 181,
                    "reviewer": {
                        "name": "Richard-Hanley",
                        "email": "rhanley@google.com",
                        "username": "Richard-Hanley"
                    },
                    "message": "Since you're making an edit here, it would be worth adding the @brief and other Doxygen annotations."
                },
                {
                    "file": "phosphor-power-supply/psu_manager.hpp",
                    "line": 181,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 108,
                    "deletions": -80
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -9
                },
                {
                    "file": "phosphor-power-supply/psu_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -22
                }
            ],
            "sizeInsertions": 139,
            "sizeDeletions": 111
        },
        {
            "number": 3,
            "revision": "35216467aed44ff219c5a04c9d1b130c826f7705",
            "parents": [
                "0dbce5689e08edcd242ae33eee3500ffa4407a80"
            ],
            "ref": "refs/changes/78/59478/3",
            "uploader": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "createdOn": 1670869960,
            "author": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 812,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "Previously this was always done in setBrownout() regardless of whether brownoutLogged was true.\n\nNow it appears we won't set the powerSystemInputs D-Bus interface if we have already logged a brownout error.  Is that an issue?  e.g. is there a scenario where we need to set it even when an error was previously logged and not cleared?"
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 812,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "I think it's ok, the only scenario I could think of is a brownout after a blackout, but the psu's might not even report the AC loss unless they tried to turn on anyway..."
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 812,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Marking resolved."
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 829,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "In the old code in setBrownout(), createError() was within an if check:\n\n```\nif (powerOn)\n{\n}\n```\n\nIs that not needed within the new algorithm?  Does checking the powerFaultOccurring always cover the same scenarios?"
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 829,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "yeah i thought powerFaultOccurring would only get set if powerOn on"
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 829,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Correct, powerFaultOccurring is true only when powerOn is true, so it was a redundant check."
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 829,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Marking resolved."
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 838,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "I thought, due to unpredictable behavior with the VIN_UV_FAULT bit, we were considering the system to be in brownout if (presentCount == (acFailedCount + pgoodFailedCount)).  e.g. all the PSUs are in either AC fault or PGOOD fault.\n\nDue to the complexity of the if on line 807, could we go into the enclosed block even if we are still in brownout?  e.g. powerFaultOccurring is false, one PSU is in AC fault, one is in PGOOD fault.\n\nIf so, is that intended?"
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 838,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "we need at least 1 of the psu to report ac fault, and the rest can report either/both..."
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 838,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "It is unfortunate that we can't rely on the PSU device to correctly report AC fault. When the power is off pgood is off, so we can't use that to know if the condition is cleared. I think we have to err on the side of allowing the system to try to power on, otherwise a system with a power supply unplugged that then experiences a brownout would be not able to power back on."
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 838,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Marking resolved."
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 863,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "Previously in clearBrownout() this was done any time a brownout was not occurring.  \n\nFrom the commit message, I believe the desire is to only set this to Good when the chassis is off.  However, the if on line 838 will cause this to happen only if brownoutLogged is true.\n\nAre there any scenarios where we should be setting this to Good that we will miss now?\n\nFor example, what about the initial case when this app is first started?  Are we relying on a default value of Good from the YAML file?  If so, should we explicitly set it in our code in case someone removes/modifies the default in the YAML?"
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 863,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "interesting, I was wondering about after a bmc reset as well.  if the status is persisted then we'd need to clear it after a brownout turns into a blackout... but if it always gets set to the default of Good then maybe it's fine..."
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 863,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "I not catching on to what the missing case is. The default is Good. If someone can break our interface out from underneath us, we shouldn't be using YAML. I don't see that as different in principle from any other dependency making a breaking change."
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 863,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Marking resolved."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 108,
                    "deletions": -80
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -9
                },
                {
                    "file": "phosphor-power-supply/psu_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -22
                }
            ],
            "sizeInsertions": 139,
            "sizeDeletions": 111
        },
        {
            "number": 4,
            "revision": "1b3f9b5b134526037a3113e031dcfde8dcd0723f",
            "parents": [
                "5e0f34d3a4836b3fa8cb2b95eedb2320c6ff3b19"
            ],
            "ref": "refs/changes/78/59478/4",
            "uploader": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "createdOn": 1670969668,
            "author": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 108,
                    "deletions": -80
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -12
                },
                {
                    "file": "phosphor-power-supply/psu_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -22
                }
            ],
            "sizeInsertions": 144,
            "sizeDeletions": 114
        },
        {
            "number": 5,
            "revision": "7f9288ce62fd490bc5fb0a70336eca93488b50a2",
            "parents": [
                "0327fcf054e8568b0a4243a3d8a409a837d43a4d"
            ],
            "ref": "refs/changes/78/59478/5",
            "uploader": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "createdOn": 1670971412,
            "author": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 108,
                    "deletions": -80
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -12
                },
                {
                    "file": "phosphor-power-supply/psu_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -22
                }
            ],
            "sizeInsertions": 144,
            "sizeDeletions": 114
        }
    ]
}