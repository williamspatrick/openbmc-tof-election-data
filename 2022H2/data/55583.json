{
    "project": "openbmc/phosphor-power",
    "branch": "master",
    "id": "Ia9d8ee57f2d643f61ece45d9c03d523b891e98b8",
    "number": 55583,
    "subject": "pseq: Add presence checking",
    "owner": {
        "name": "Jim Wright",
        "email": "jlwright@us.ibm.com",
        "username": "wrightjl1"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-power/+/55583",
    "hashtags": [],
    "createdOn": 1658508631,
    "lastUpdated": 1658849899,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1658508631,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1658508644,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1658508644,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1658509278,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/47433/ : SUCCESS"
        },
        {
            "timestamp": 1658516443,
            "reviewer": {
                "name": "Mike Capps",
                "email": "mikepcapps@gmail.com",
                "username": "mikecgithub"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1658528204,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1658528270,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1658528270,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1658528398,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1658528771,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/47610/ : SUCCESS"
        },
        {
            "timestamp": 1658759394,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1658765099,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1658781874,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1658781930,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1658781930,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1658782533,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/47773/ : SUCCESS"
        },
        {
            "timestamp": 1658782732,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1658783438,
            "reviewer": {
                "name": "Derek Howard",
                "email": "derekh@us.ibm.com",
                "username": "derekhoward55"
            },
            "message": "Patch Set 3: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1658788316,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1658841645,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1658842416,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 3: Code-Review+1\n\n(2 comments)"
        },
        {
            "timestamp": 1658843820,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 3: Code-Review+2"
        },
        {
            "timestamp": 1658845718,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Change has been successfully rebased and submitted as c91eed0e7f7c85bd0468cad08d25b217dc0a6990"
        },
        {
            "timestamp": 1658849899,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Patch Set 4:\n\n(2 comments)"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "e92746f635613e99f54d9c17d31134f6193dade4",
            "parents": [
                "524aa8f41cc86c89d8a1d33df2ac5bcc8928b9df"
            ],
            "ref": "refs/changes/83/55583/1",
            "uploader": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "createdOn": 1658508631,
            "author": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "phosphor-power-sequencer/src/ucd90320_monitor.cpp",
                    "line": 276,
                    "reviewer": {
                        "name": "Mike Capps",
                        "email": "mikepcapps@gmail.com",
                        "username": "mikecgithub"
                    },
                    "message": "this is unused if the condition at line 278 is false. therefore should be moved somewhere inside that scope block."
                },
                {
                    "file": "phosphor-power-sequencer/src/ucd90320_monitor.cpp",
                    "line": 276,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-sequencer/src/ucd90320_monitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 91,
                    "deletions": -23
                },
                {
                    "file": "phosphor-power-sequencer/src/power_sequencer_monitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -3
                },
                {
                    "file": "phosphor-power-sequencer/src/power_control.cpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                },
                {
                    "file": "phosphor-power-sequencer/config_files/UCD90320Monitor_ibm,everest.json",
                    "type": "MODIFIED",
                    "insertions": 109,
                    "deletions": -38
                },
                {
                    "file": "phosphor-power-sequencer/config_files/UCD90320Monitor_ibm,rainier.json",
                    "type": "MODIFIED",
                    "insertions": 96,
                    "deletions": -32
                },
                {
                    "file": "phosphor-power-sequencer/src/ucd90320_monitor.hpp",
                    "type": "MODIFIED",
                    "insertions": 20,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 337,
            "sizeDeletions": 100
        },
        {
            "number": 2,
            "revision": "e00e86a47bdf42092da9a0a227f27b1b1fc946e2",
            "parents": [
                "524aa8f41cc86c89d8a1d33df2ac5bcc8928b9df"
            ],
            "ref": "refs/changes/83/55583/2",
            "uploader": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "createdOn": 1658528204,
            "author": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "phosphor-power-sequencer/config_files/UCD90320Monitor_ibm,everest.json",
                    "line": 1,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "There are lots of VRMs and thus rails that are optional depending on whether the machine has 1, 2, 3, or 4 processors.  I think 2 is the minimum in the field, but the hardware team said there might be some 1 processor systems in the lab.\n\nIs the updated rail lsit supposed to handle all VRMs that can be potentially absent?  Or only those that have a certain hardware issue?  In other words, are most of the optional VRMs handled properly without additions to this file?"
                },
                {
                    "file": "phosphor-power-sequencer/config_files/UCD90320Monitor_ibm,everest.json",
                    "line": 1,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "That's correct. In general, rails for absent components do not pgood fail. Only on systems where false failures are occurring would presence checking be added. This minimizes our dependency on presence checking."
                },
                {
                    "file": "phosphor-power-sequencer/config_files/UCD90320Monitor_ibm,everest.json",
                    "line": 1,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Marking resolved."
                },
                {
                    "file": "phosphor-power-sequencer/src/ucd90320_monitor.cpp",
                    "line": 204,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "When writing the regulators code to check for presence, I found that sometimes an exception was thrown when the hardware was not present.  Sometimes that object path for missing hardware did not exist.  Sometimes the path existed, but it didn't implement the interface with the Present property.\n\nSince you are assuming the hardware is missing for any exception, you are covered here.  Just wanted to make that point that if you see these error messages in the journal, it might not be an error situation.  It is probably unclear whether an inventory application should publish inventory paths for hardware that is not present.  So our applications probably cannot assume a certain behavior.\n\nhttps://github.com/openbmc/phosphor-power/blob/master/phosphor-regulators/src/presence_service.cpp#L47"
                },
                {
                    "file": "phosphor-power-sequencer/src/ucd90320_monitor.cpp",
                    "line": 204,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Good point, I'll change this log to INFO level."
                },
                {
                    "file": "phosphor-power-sequencer/src/ucd90320_monitor.cpp",
                    "line": 204,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-sequencer/src/ucd90320_monitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 94,
                    "deletions": -28
                },
                {
                    "file": "phosphor-power-sequencer/src/power_sequencer_monitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -3
                },
                {
                    "file": "phosphor-power-sequencer/src/power_control.cpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                },
                {
                    "file": "phosphor-power-sequencer/config_files/UCD90320Monitor_ibm,everest.json",
                    "type": "MODIFIED",
                    "insertions": 109,
                    "deletions": -38
                },
                {
                    "file": "phosphor-power-sequencer/config_files/UCD90320Monitor_ibm,rainier.json",
                    "type": "MODIFIED",
                    "insertions": 96,
                    "deletions": -32
                },
                {
                    "file": "phosphor-power-sequencer/src/ucd90320_monitor.hpp",
                    "type": "MODIFIED",
                    "insertions": 20,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 340,
            "sizeDeletions": 105
        },
        {
            "number": 3,
            "revision": "23b793e346ae44d7fa929e5e32d86d3030fd129b",
            "parents": [
                "524aa8f41cc86c89d8a1d33df2ac5bcc8928b9df"
            ],
            "ref": "refs/changes/83/55583/3",
            "uploader": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "createdOn": 1658781874,
            "author": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "Quick look, looks good"
                },
                {
                    "file": "phosphor-power-sequencer/config_files/UCD90320Monitor_ibm,everest.json",
                    "line": 4,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "if you wanted you could save a bunch of space in this file by bringing these down to 1 line instead of 3:\n\n{ \"name\": \"12.0V\" },"
                },
                {
                    "file": "phosphor-power-sequencer/config_files/UCD90320Monitor_ibm,everest.json",
                    "line": 4,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Good idea, will do in a future commit."
                },
                {
                    "file": "phosphor-power-sequencer/config_files/UCD90320Monitor_ibm,everest.json",
                    "line": 50,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "I can't say I understand why none of the other processors have this, like CP3_VCS1, but seems like other people do so I'm cool with it."
                },
                {
                    "file": "phosphor-power-sequencer/config_files/UCD90320Monitor_ibm,everest.json",
                    "line": 50,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "In general, rails for absent components do not pgood fail. Only on systems where false failures are occurring would presence checking be added. This minimizes our dependency on presence checking."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-sequencer/src/ucd90320_monitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 94,
                    "deletions": -28
                },
                {
                    "file": "phosphor-power-sequencer/src/power_sequencer_monitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -3
                },
                {
                    "file": "phosphor-power-sequencer/src/power_control.cpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                },
                {
                    "file": "phosphor-power-sequencer/config_files/UCD90320Monitor_ibm,everest.json",
                    "type": "MODIFIED",
                    "insertions": 109,
                    "deletions": -38
                },
                {
                    "file": "phosphor-power-sequencer/config_files/UCD90320Monitor_ibm,rainier.json",
                    "type": "MODIFIED",
                    "insertions": 96,
                    "deletions": -32
                },
                {
                    "file": "phosphor-power-sequencer/src/ucd90320_monitor.hpp",
                    "type": "MODIFIED",
                    "insertions": 20,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 340,
            "sizeDeletions": 105
        },
        {
            "number": 4,
            "revision": "c91eed0e7f7c85bd0468cad08d25b217dc0a6990",
            "parents": [
                "08fcb9fbd5dbe01d6dc4b82b71db1b1d69761572"
            ],
            "ref": "refs/changes/83/55583/4",
            "uploader": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "createdOn": 1658845718,
            "author": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-sequencer/src/ucd90320_monitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 94,
                    "deletions": -28
                },
                {
                    "file": "phosphor-power-sequencer/src/power_sequencer_monitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -3
                },
                {
                    "file": "phosphor-power-sequencer/src/power_control.cpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                },
                {
                    "file": "phosphor-power-sequencer/config_files/UCD90320Monitor_ibm,everest.json",
                    "type": "MODIFIED",
                    "insertions": 109,
                    "deletions": -38
                },
                {
                    "file": "phosphor-power-sequencer/config_files/UCD90320Monitor_ibm,rainier.json",
                    "type": "MODIFIED",
                    "insertions": 96,
                    "deletions": -32
                },
                {
                    "file": "phosphor-power-sequencer/src/ucd90320_monitor.hpp",
                    "type": "MODIFIED",
                    "insertions": 20,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 340,
            "sizeDeletions": 105
        }
    ]
}