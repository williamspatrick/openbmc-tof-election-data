{
    "project": "openbmc/bmcweb",
    "branch": "master",
    "id": "Ice97affe694f4bee15436293c9e5944bcae7f4cc",
    "number": 56539,
    "subject": "Report MACAddress is read-only for a D-Bus Not Allowed response",
    "owner": {
        "name": "Johnathan Mantey",
        "email": "johnathanx.mantey@intel.com",
        "username": "Howitzer105mm"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/bmcweb/+/56539",
    "hashtags": [],
    "createdOn": 1660600144,
    "lastUpdated": 1661828197,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1660600144,
            "reviewer": {
                "name": "Johnathan Mantey",
                "email": "johnathanx.mantey@intel.com",
                "username": "Howitzer105mm"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1660600210,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1660600215,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1660600704,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/49179/ : SUCCESS"
        },
        {
            "timestamp": 1660666925,
            "reviewer": {
                "name": "Alex Schendel",
                "email": "alex.schendel@intel.com",
                "username": "Lexden12"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1660667262,
            "reviewer": {
                "name": "Johnathan Mantey",
                "email": "johnathanx.mantey@intel.com",
                "username": "Howitzer105mm"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1660667592,
            "reviewer": {
                "name": "Alex Schendel",
                "email": "alex.schendel@intel.com",
                "username": "Lexden12"
            },
            "message": "Patch Set 1: Code-Review+1\n\n(2 comments)"
        },
        {
            "timestamp": 1660680989,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1661371922,
            "reviewer": {
                "name": "Johnathan Mantey",
                "email": "johnathanx.mantey@intel.com",
                "username": "Howitzer105mm"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1661371969,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1661371969,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1661372022,
            "reviewer": {
                "name": "Johnathan Mantey",
                "email": "johnathanx.mantey@intel.com",
                "username": "Howitzer105mm"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1661372296,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/49802/ : FAILURE"
        },
        {
            "timestamp": 1661372713,
            "reviewer": {
                "name": "Johnathan Mantey",
                "email": "johnathanx.mantey@intel.com",
                "username": "Howitzer105mm"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1661372795,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1661372795,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1661373305,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/49803/ : SUCCESS"
        },
        {
            "timestamp": 1661373520,
            "reviewer": {
                "name": "Alex Schendel",
                "email": "alex.schendel@intel.com",
                "username": "Lexden12"
            },
            "message": "Patch Set 3: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1661376940,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(3 comments)"
        },
        {
            "timestamp": 1661379011,
            "reviewer": {
                "name": "Johnathan Mantey",
                "email": "johnathanx.mantey@intel.com",
                "username": "Howitzer105mm"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1661379045,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1661379045,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1661379046,
            "reviewer": {
                "name": "Johnathan Mantey",
                "email": "johnathanx.mantey@intel.com",
                "username": "Howitzer105mm"
            },
            "message": "Patch Set 4:\n\n(4 comments)"
        },
        {
            "timestamp": 1661379769,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/49819/ : SUCCESS"
        },
        {
            "timestamp": 1661380737,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1661472152,
            "reviewer": {
                "name": "Alex Schendel",
                "email": "alex.schendel@intel.com",
                "username": "Lexden12"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1661788659,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 4: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1661828195,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 4: Code-Review+2\n\n(2 comments)"
        },
        {
            "timestamp": 1661828197,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Change has been successfully rebased and submitted as 58283f41276f86666aca6943e7405a20a1ff38b6"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "14178c784a4a246829ae6e09961898afd0be4d77",
            "parents": [
                "c21c64b6523d882c927c0e3e29d65c364b3aa1d5"
            ],
            "ref": "refs/changes/39/56539/1",
            "uploader": {
                "name": "Johnathan Mantey",
                "email": "johnathanx.mantey@intel.com",
                "username": "Howitzer105mm"
            },
            "createdOn": 1660600144,
            "author": {
                "name": "Johnathan Mantey",
                "email": "johnathanx.mantey@intel.com",
                "username": "Howitzer105mm"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Alex Schendel",
                        "email": "alex.schendel@intel.com",
                        "username": "Lexden12"
                    },
                    "message": "Is it guaranteed that an EIO error means that the MACAddress is read-only? Are there other situations that could result in an EIO error?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Johnathan Mantey",
                        "email": "johnathanx.mantey@intel.com",
                        "username": "Howitzer105mm"
                    },
                    "message": "I don't have an answer to that question. EIO is the error returned when the phosphor-network entry is R/O. I don't have an exhaustive list of other failure modes when patching this entry.\nI'm hoping that I don't first have to make a change in phosphor-network to return some other error code, and that this commit handles the known \"non-critical\" failure case."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Alex Schendel",
                        "email": "alex.schendel@intel.com",
                        "username": "Lexden12"
                    },
                    "message": "Ack"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Alex Schendel",
                        "email": "alex.schendel@intel.com",
                        "username": "Lexden12"
                    },
                    "message": "I was curious about other failure modes, but I do not think it should be any issue, especially since this is localized to modifying the MAC Address."
                },
                {
                    "file": "redfish-core/lib/ethernet.hpp",
                    "line": 1130,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "io_error seems also what the mapper returns when it doesn't find an object? \n\nhttps://github.com/openbmc/bmcweb/blob/002d39b4a7a5ed7166e2acad84e0943c3def9492/redfish-core/include/utils/collection.hpp#L36\n \nIs there a different error for NotFound or could multiple failures end up here?\n\nWould checking for the xyz.openbmc_project.Common.Error.NotAllowed be better? \n\nIt does look like phosphor-networkd does throw it https://github.com/openbmc/phosphor-networkd/blob/c38b07102f67751ebd6aa46814c9d65c36b89812/src/ethernet_interface.cpp#L1232 \n\nE.g.\nhttps://github.com/openbmc/phosphor-dbus-interfaces/blob/master/yaml/xyz/openbmc_project/Common.errors.yaml#L9\n\nhttps://github.com/openbmc/bmcweb/blob/351053f210e8b233f680bde66d9ea9760c22d848/redfish-core/lib/processor.hpp#L937"
                },
                {
                    "file": "redfish-core/lib/ethernet.hpp",
                    "line": 1130,
                    "reviewer": {
                        "name": "Johnathan Mantey",
                        "email": "johnathanx.mantey@intel.com",
                        "username": "Howitzer105mm"
                    },
                    "message": "Done"
                },
                {
                    "file": "redfish-core/lib/ethernet.hpp",
                    "line": 1130,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Gunnar, were your questions answered to your satisfaction?  (I don't see context here, but I'm assuming all of these questions were answered out of band if this is getting marked done)."
                },
                {
                    "file": "redfish-core/lib/ethernet.hpp",
                    "line": 1130,
                    "reviewer": {
                        "name": "Johnathan Mantey",
                        "email": "johnathanx.mantey@intel.com",
                        "username": "Howitzer105mm"
                    },
                    "message": "Per Discord:\nphos-net only returns NotAllowed when the MAC addr is not writable.\nThis code traps explicitly on that D-Bus return."
                },
                {
                    "file": "redfish-core/lib/ethernet.hpp",
                    "line": 1130,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "I'm good."
                },
                {
                    "file": "redfish-core/lib/ethernet.hpp",
                    "line": 1130,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 28,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/ethernet.hpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 36,
            "sizeDeletions": 1
        },
        {
            "number": 2,
            "revision": "a09c6edf50b435e6d2edfe1ac2e489f1f3d39629",
            "parents": [
                "0442ef92689d7719c89474a4fc81fbdaca7a4a96"
            ],
            "ref": "refs/changes/39/56539/2",
            "uploader": {
                "name": "Johnathan Mantey",
                "email": "johnathanx.mantey@intel.com",
                "username": "Howitzer105mm"
            },
            "createdOn": 1661371922,
            "author": {
                "name": "Johnathan Mantey",
                "email": "johnathanx.mantey@intel.com",
                "username": "Howitzer105mm"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Johnathan Mantey",
                        "email": "johnathanx.mantey@intel.com",
                        "username": "Howitzer105mm"
                    },
                    "message": "Updated the commit to acquire the D-Bus error message in order to be more selective in the Redfish error response."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 29,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/ethernet.hpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 40,
            "sizeDeletions": 1
        },
        {
            "number": 3,
            "revision": "929d81eba36f820f60a524be435af73933d17ada",
            "parents": [
                "0442ef92689d7719c89474a4fc81fbdaca7a4a96"
            ],
            "ref": "refs/changes/39/56539/3",
            "uploader": {
                "name": "Johnathan Mantey",
                "email": "johnathanx.mantey@intel.com",
                "username": "Howitzer105mm"
            },
            "createdOn": 1661372713,
            "author": {
                "name": "Johnathan Mantey",
                "email": "johnathanx.mantey@intel.com",
                "username": "Howitzer105mm"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Can you link the setting in phosphor-networkd just for reference please?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "Johnathan Mantey",
                        "email": "johnathanx.mantey@intel.com",
                        "username": "Howitzer105mm"
                    },
                    "message": "Ack"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Alex Schendel",
                        "email": "alex.schendel@intel.com",
                        "username": "Lexden12"
                    },
                    "message": "Thank you for making it more selective, lgtm."
                },
                {
                    "file": "redfish-core/lib/ethernet.hpp",
                    "line": 111,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Please just inline this if there's only a single user.  the ethernet namespace should not be exposing a dbus-specific string."
                },
                {
                    "file": "redfish-core/lib/ethernet.hpp",
                    "line": 111,
                    "reviewer": {
                        "name": "Johnathan Mantey",
                        "email": "johnathanx.mantey@intel.com",
                        "username": "Howitzer105mm"
                    },
                    "message": "I like having the string_view to be able to use operator== in favor of strcmp. Moving this definintion into the method scope per our Discord chat."
                },
                {
                    "file": "redfish-core/lib/ethernet.hpp",
                    "line": 111,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 29,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/ethernet.hpp",
                    "type": "MODIFIED",
                    "insertions": 16,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 45,
            "sizeDeletions": 1
        },
        {
            "number": 4,
            "revision": "9b4aaf81a68af6c090bc12d141f308d977f84f82",
            "parents": [
                "0442ef92689d7719c89474a4fc81fbdaca7a4a96"
            ],
            "ref": "refs/changes/39/56539/4",
            "uploader": {
                "name": "Johnathan Mantey",
                "email": "johnathanx.mantey@intel.com",
                "username": "Howitzer105mm"
            },
            "createdOn": 1661379011,
            "author": {
                "name": "Johnathan Mantey",
                "email": "johnathanx.mantey@intel.com",
                "username": "Howitzer105mm"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Johnathan Mantey",
                        "email": "johnathanx.mantey@intel.com",
                        "username": "Howitzer105mm"
                    },
                    "message": "New commit based on your feedback."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 30,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/ethernet.hpp",
                    "type": "MODIFIED",
                    "insertions": 16,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 46,
            "sizeDeletions": 1
        },
        {
            "number": 5,
            "revision": "58283f41276f86666aca6943e7405a20a1ff38b6",
            "parents": [
                "db18fc98241b4fc9a4274f45c1d6b07d7bd1b93d"
            ],
            "ref": "refs/changes/39/56539/5",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1661828197,
            "author": {
                "name": "Johnathan Mantey",
                "email": "johnathanx.mantey@intel.com",
                "username": "Howitzer105mm"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 30,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/ethernet.hpp",
                    "type": "MODIFIED",
                    "insertions": 16,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 46,
            "sizeDeletions": 1
        }
    ]
}