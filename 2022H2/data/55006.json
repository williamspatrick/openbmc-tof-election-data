{
    "project": "openbmc/bmcweb",
    "branch": "master",
    "id": "I2e0539ae7a999fcfabbb6aeb06ecf8c191cbc15b",
    "number": 55006,
    "subject": "schema: Add schema for Manager.Oem.OpenBmc.Certificates",
    "owner": {
        "name": "Jiaqing Zhao",
        "email": "jiaqing.zhao@intel.com",
        "username": "jiaqingz-intel"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/bmcweb/+/55006",
    "hashtags": [],
    "createdOn": 1656472164,
    "lastUpdated": 1657099788,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1656472164,
            "reviewer": {
                "name": "Jiaqing Zhao",
                "email": "jiaqing.zhao@intel.com",
                "username": "jiaqingz-intel"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1656472189,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1656472189,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1656472701,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/46100/ : SUCCESS"
        },
        {
            "timestamp": 1656518689,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1656518735,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1656544307,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1656550045,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1656602516,
            "reviewer": {
                "name": "Jiaqing Zhao",
                "email": "jiaqing.zhao@intel.com",
                "username": "jiaqingz-intel"
            },
            "message": "Patch Set 1:\n\n(4 comments)"
        },
        {
            "timestamp": 1656602954,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 1:\n\n(2 comments)"
        },
        {
            "timestamp": 1657099788,
            "reviewer": {
                "name": "Jiaqing Zhao",
                "email": "jiaqing.zhao@intel.com",
                "username": "jiaqingz-intel"
            },
            "message": "Patch Set 1:\n\n(2 comments)"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "0d072f1f7440066c51fa6897492b43313d2f00ca",
            "parents": [
                "69320d54efe41fa5b0947adab5702d9023cc1ee3"
            ],
            "ref": "refs/changes/06/55006/1",
            "uploader": {
                "name": "Jiaqing Zhao",
                "email": "jiaqing.zhao@intel.com",
                "username": "jiaqingz-intel"
            },
            "createdOn": 1656472164,
            "author": {
                "name": "Jiaqing Zhao",
                "email": "jiaqing.zhao@intel.com",
                "username": "jiaqingz-intel"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Just to understand why we want to do this. Did it error out without this change?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "Jiaqing Zhao",
                        "email": "jiaqing.zhao@intel.com",
                        "username": "jiaqingz-intel"
                    },
                    "message": "Not an error, but there is a warning\n\nWARNING - Oem.OpenBmc.Certificates not defined in schema OemManager (check version, spelling and casing)"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Per OEM_SCHEMAS.md, has this change been discussed with DMTF?\n\nMy understanding is that the standard already had this included in their schemas;  I'm not necessarily against fixing this bug, but I'd like to understand why we're spending effort here instead of effort on matching the DMTF version."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "To be specific, shouldn't we be implementing /redfish/v1/Managers/{ManagerId}/NetworkProtocol/HTTPS/Certificates ?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Jiaqing Zhao",
                        "email": "jiaqing.zhao@intel.com",
                        "username": "jiaqingz-intel"
                    },
                    "message": "This OEM schema is added for the link to TrustStore certificate (CA certificates) which implemented long time ago. Previously there is a discussion at Redfish forum about url defined for CA certs (https://redfishforum.com/thread/169/certificate-management-ca-upload), but redfish schema still does not provide a standard way so far.\n\nThe OEM property Manager.Oem.OpenBmc.Certificates has been in bmcweb for years, this patch only adds the schema for it to resolve the \"not defined\" warning on this property."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Jiaqing Zhao",
                        "email": "jiaqing.zhao@intel.com",
                        "username": "jiaqingz-intel"
                    },
                    "message": "No, the /redfish/v1/Managers/{ManagerId}/TrustStore link the the OpenBMC specific way for CA certificates used in BMC. There is no standard redfish property serves this purpose so far."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Sorry, you're right, I linked the wrong thing;  The location to use would be:\n\n\n>  There is no standard redfish property serves this purpose so far.\n\nHave you seen?\n/redfish/v1/Managers/{ManagerId}/Certificates/{CertificateId}"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Jiaqing Zhao",
                        "email": "jiaqing.zhao@intel.com",
                        "username": "jiaqingz-intel"
                    },
                    "message": "> Have you seen?\n/redfish/v1/Managers/{ManagerId}/Certificates/{CertificateId}\n\nRedfish spec says \"This property shall contain a link to a resource collection of type CertificateCollection that contains certificates for device identity and attestation.\" Which means the ceritificate here is the \"Manager's cert\", not the \"cert trusted by Manager\" we wanted."
                },
                {
                    "file": "static/redfish/v1/schema/OemManager_v1.xml",
                    "line": 42,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "You need to create a new version of the schema to add properties to it.  Take a look at the DMTF schemas for how to do that."
                },
                {
                    "file": "static/redfish/v1/schema/OemManager_v1.xml",
                    "line": 42,
                    "reviewer": {
                        "name": "Jiaqing Zhao",
                        "email": "jiaqing.zhao@intel.com",
                        "username": "jiaqingz-intel"
                    },
                    "message": "The OEM schema does not require version field in \"@odata.type\". And currently OemManager schema doesn't come with a version.\n\nI don't deny that adding versions to those existing schemas without it is necessary, but it might be better in another patch. Here this patch only adds missing schema for an existing property."
                },
                {
                    "file": "static/redfish/v1/schema/OemManager_v1.xml",
                    "line": 42,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> The OEM schema does not require version field in \"@odata.type\"\n\nI'm not sure where you got this idea, but that's not really true;  It's possible the validator doesn't test for versioning, but for any schema that changes, clients need a way to maintain a specific version.\n\nThis is documented in OEM_SCHEMAS.md \"We require this same level of quality as non OEM...\"\n\n\n> but it might be better in another patch\n\nIf we do it in another patch, then we will have 3 versions of the schema;  If you want to make another patch to do it, and they merge at the same time, that would be fine.  Please let me know when you have that patch up."
                },
                {
                    "file": "static/redfish/v1/schema/OemManager_v1.xml",
                    "line": 42,
                    "reviewer": {
                        "name": "Jiaqing Zhao",
                        "email": "jiaqing.zhao@intel.com",
                        "username": "jiaqingz-intel"
                    },
                    "message": "Ack. I've raised some quesion on discord. Perhaps a unified design for oem schemas in bmcweb is desired. I'm still working on it."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "static/redfish/v1/schema/OemManager_v1.xml",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": 0
                },
                {
                    "file": "static/redfish/v1/JsonSchemas/OemManager/index.json",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 31,
            "sizeDeletions": 0
        }
    ]
}