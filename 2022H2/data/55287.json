{
    "project": "openbmc/docs",
    "branch": "master",
    "id": "If60436e3749d3387617635678c15d715bc5536c5",
    "number": 55287,
    "subject": "Generic Firmwawre Update Workflow Doc",
    "owner": {
        "name": "Willy Tu",
        "email": "wltu@google.com",
        "username": "wltu"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/docs/+/55287",
    "hashtags": [],
    "createdOn": 1657584815,
    "lastUpdated": 1661793827,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1657584815,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1657584822,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 2: Patch Set 1 was rebased"
        },
        {
            "timestamp": 1657585023,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1657733431,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1657734867,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1658442896,
            "reviewer": {
                "name": "Brandon Kim",
                "email": "brandonkim@google.com",
                "username": "brandonkimbk"
            },
            "message": "Patch Set 2:\n\n(33 comments)"
        },
        {
            "timestamp": 1658598784,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1660747210,
            "reviewer": {
                "name": "Kumar Thangavel",
                "email": "thangavel.k@hcl.com",
                "username": "HCL-BMC"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1661270221,
            "reviewer": {
                "name": "Kumar Thangavel",
                "email": "thangavel.k@hcl.com",
                "username": "HCL-BMC"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1661340216,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1661432069,
            "reviewer": {
                "name": "Kumar Thangavel",
                "email": "thangavel.k@hcl.com",
                "username": "HCL-BMC"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1661437877,
            "reviewer": {
                "name": "Kumar Thangavel",
                "email": "thangavel.k@hcl.com",
                "username": "HCL-BMC"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1661793783,
            "reviewer": {
                "name": "Brad Bishop",
                "email": "bradleyb@fuzziesquirrel.com",
                "username": "bradbishop"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1661793827,
            "reviewer": {
                "name": "Brad Bishop",
                "email": "bradleyb@fuzziesquirrel.com",
                "username": "bradbishop"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "c5f14503098507a304bb51698795c56eaf242cce",
            "parents": [
                "6147515382bb95237725d0e40e02f51e47c7a8af"
            ],
            "ref": "refs/changes/87/55287/1",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1657584815,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "type": "ADDED",
                    "insertions": 331,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 345,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "8eddf56d9b8fbec4f73a324b5db95b697a1569a3",
            "parents": [
                "cdf04a3e7fb786e291e9e722a5910bc5875065c4"
            ],
            "ref": "refs/changes/87/55287/2",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1657584822,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "Firmware"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 10,
                    "reviewer": {
                        "name": "Brad Bishop",
                        "email": "bradleyb@fuzziesquirrel.com",
                        "username": "bradbishop"
                    },
                    "message": "Is there an example of this?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "firmware of different components from the BMC"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "This might have too little/much detail. with some section a bit limited in attempt to keep it as generic as I can.\n\nPlease do let me know if there are any sections that are confusing. "
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "Can be built on top or / as part of https://gerrit.openbmc.org/c/openbmc/docs/+/55290 and https://gerrit.openbmc.org/c/openbmc/docs/+/54589"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "Need to check with\n- https://gerrit.openbmc.org/c/openbmc/docs/+/51950\n- https://gerrit.openbmc.org/c/openbmc/docs/+/37950\n\nto see if there is any conflict there."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "There's been 5ish \"generic firmware update\" designs posted in recent months.  The relevant submitters need to get together and publish a single unified doc that meets all the needs.  If it were me, I would take this incrementally, starting with requirements, and getting the superset.  Then we can work toward what an implementation looks like.\n\nIf we need to find a forum where this can be discussed more efficiently than on gerrit (probably discord) I'm sure there's ways we can facilitate, but for the moment, reviewing 5 overlapping designs is causing maintainers (me specifically, abut likely others) to struggle to come up with a coherent whole to this that the project can work toward."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Kumar Thangavel",
                        "email": "thangavel.k@hcl.com",
                        "username": "HCL-BMC"
                    },
                    "message": "We have also proposed the following design docs related to firmware updates and custom flash tool.\n\nhttps://gerrit.openbmc.org/c/openbmc/docs/+/37950 - Software Update for Multiple Devices Support\n\nhttps://gerrit.openbmc.org/c/openbmc/docs/+/56037- OME-BIC(Bridge IC) Management Software (This is for requesting new repository for our custom OEM changes)\n\nhttps://gerrit.openbmc.org/c/openbmc/docs/+/51950 - OEM-BIOS Firmware update design document.\n\nIs this design supports multiple devices from multi hosts of firmware update ?\n\nCan we discuss and merge our design docs based on our requirements of firmware update and flashing tool ?\n"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Kumar Thangavel",
                        "email": "thangavel.k@hcl.com",
                        "username": "HCL-BMC"
                    },
                    "message": "@Willy Tu, \n\nGentle Remainder on this."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "Thanks. I'll try to take a closer look at this by the end of this week."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Kumar Thangavel",
                        "email": "thangavel.k@hcl.com",
                        "username": "HCL-BMC"
                    },
                    "message": "Phosphor-bmc-code-mgnt, ItemUpdater also following the same staging, activation and update logic as same as with this Proposed design. \n\nCan we use the existing Phosphor-bmc-code-mgnt ItemUpdater logic ?\nImage verification and read/write can be added in common workflow ? \n\nIs there any other specific difference ?\n"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Brad Bishop",
                        "email": "bradleyb@fuzziesquirrel.com",
                        "username": "bradbishop"
                    },
                    "message": "I had this same question.  I couldn't find what is new.  The config file is new...is this a proposal to add support for a config file to the existing code update applications?  If not...why not?"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 14,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "update methods"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 14,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "Let's spell it out: differences"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 24,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "creates"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 25,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "feature"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 32,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "uses"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 39,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "`fwupd` with the ``"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 52,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "system connected to the BMC"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 52,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "to"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 53,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Any device?  That doesn't really seem reasonable.  Maybe try rephrasing?"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 54,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "Let's swap this order.\n\nReading/writing a SPI flash for BIOS update is a basic example."
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 59,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "remove space"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 71,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "maybe mention why it has to be persistent - that the BMC may go down"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 71,
                    "reviewer": {
                        "name": "Kumar Thangavel",
                        "email": "thangavel.k@hcl.com",
                        "username": "HCL-BMC"
                    },
                    "message": "What kind of information will be stored in Metadata, can you elaborate here ?"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 87,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "probably need to take this out"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 116,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "Add 1 more line so that it doesn't overlap"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 123,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "remove"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 126,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "drop \"prevent\" fix teh to the"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 130,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "not"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 138,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "Maybe add one more line here so that it doesn't overlap with the \"Activated\" beside it"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 145,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "checks"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 153,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "Is this flow going towards initial state? if so, we should add <"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 164,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "looks like we can fit in \"Staged Image\" in the same line"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 178,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "Would suggest adding some spaces in between so that there are not so much cluttering"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 196,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "this instead of This"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 197,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "\"tampered\" drop \"with\""
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 198,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "Maybe the fail path should be a separate sentence? mentioning that if the image seems corrupted we set the state"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 198,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "`CORRUPTED` with ``"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 204,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "Maybe mention why it's good to have"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 204,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "\"it just calls powercycle again\""
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 205,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "I think it'd be good to highlight these states with ``"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 208,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "successful"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 212,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "workflows \"but\" the\n\nor make these separate sentences"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 233,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "out of scope"
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "line": 284,
                    "reviewer": {
                        "name": "Brad Bishop",
                        "email": "bradleyb@fuzziesquirrel.com",
                        "username": "bradbishop"
                    },
                    "message": "This should cover the gaps in the existing architecture, and why they cannot be fixed without starting over from scratch."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "designs/generic-fw-update-workflow.md",
                    "type": "ADDED",
                    "insertions": 331,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 345,
            "sizeDeletions": 0
        }
    ]
}