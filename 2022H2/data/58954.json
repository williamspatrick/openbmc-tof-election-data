{
    "project": "openbmc/docs",
    "branch": "master",
    "id": "Iff4b9d97e362a7e34a4108c81c709f8818720997",
    "number": 58954,
    "subject": "RedfishSensor: Design document",
    "owner": {
        "name": "Josh Lehan",
        "email": "krellan@google.com",
        "username": "Krellan"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/docs/+/58954",
    "hashtags": [],
    "createdOn": 1669410325,
    "lastUpdated": 1672881696,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1669410325,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1669410367,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1669410367,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1669410381,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/56099/ : SUCCESS"
        },
        {
            "timestamp": 1670797367,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 1:\n\n(4 comments)"
        },
        {
            "timestamp": 1670831022,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "message": "Patch Set 1:\n\n(4 comments)"
        },
        {
            "timestamp": 1671245487,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 1:\n\n(4 comments)"
        },
        {
            "timestamp": 1671477761,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1671478010,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 1:\n\n(16 comments)"
        },
        {
            "timestamp": 1671484121,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1671484132,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1671484132,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1671484148,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "message": "Patch Set 2:\n\n(17 comments)"
        },
        {
            "timestamp": 1671484158,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/58012/ : FAILURE"
        },
        {
            "timestamp": 1671486673,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1671486692,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1671486692,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1671486713,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/58015/ : SUCCESS"
        },
        {
            "timestamp": 1672768591,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(13 comments)"
        },
        {
            "timestamp": 1672858185,
            "reviewer": {
                "name": "Brandon Kim",
                "email": "brandonkim@google.com",
                "username": "brandonkimbk"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "ef92322248145c62247ad2da95eb77610d2016b4",
            "parents": [
                "3f84e95386180033e6333e63dc165f121cd78a73"
            ],
            "ref": "refs/changes/54/58954/1",
            "uploader": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "createdOn": 1669410325,
            "author": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Overall, I think there's a design here that could work.  As a general theme, this doc has lots of tangents into unrelated topics that could be removed, which would improve the design considerably.\n\nOne thing that I think this doc is missing is a layout of how the system connections will go on dbus.  Considering these are sensors that cannot be exposed outside the system, it's not clear how ipmi/redfish can know that those sensors shouldn't be exposed outside the box.\n\nIt also isn't clear how this integrates with the aggregation work that's already been done to make redfish trees forwardable through the system."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "Thanks. I'm not sure how a layout would work, or what is meant by \"system connections\".\n\nAs for integrating with a Redfish aggregator, it doesn't. RedfishSensor and a Redfish aggregator serve two different purposes, although they both use Redfish to accomplish their goals."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> I'm not sure how a layout would work, or what is meant by \"system connections\".\n\nWhich components communicate with which other components within the system?  What APIs do they use?"
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 12,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "What is a real use case for that has the Redfish server and RedfishSensor?"
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 12,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "We have a real-world system that is comprised of a large box (which we control), surrounding a smaller box that's provided by a third-party vendor (which we do not control). The smaller box contains critical components, and all we have from the vendor is an embedded Redfish server providing us with temperature readings. Our large box has fans, under our control, and we are responsible for keeping that smaller box cool during operation. The smaller box has no cooling ability of its own, and it's our fans that blow on it, so we have to know the temperature of it, via these Redfish readings, in order to regulate our fans."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 12,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "ACK. Thanks for explaining"
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 20,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I think this sentence can be removed.  Given that we have things like External Sensor, this doesn't seem correct."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 20,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "Rewrote this, to take ExternalSensor into account."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 50,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Please write these requirements as requirements.  Please avoid in the requirements section listing a specific daemon, or implementation.  Requirements here could be something like:\n\n- Must be able to read a redfish-presented sensor from another device and add it to a PID loop\n\nBut as written, it doesn't decouple the requirements from the implementation.  Please make an attempt to decouple them."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 50,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "I need the longer text, though, to be able to adequately explain what it does. Should it be moved to another section? I do like how your bullet point sums up the problem description, though, so added it to there."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 50,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "the requirements section should be for requirements, which should not assume an implementation.  This is to explicitly decouple the requirements from the implementation, to track WHY things are being done, rather than WHAT is being done.  The what is arguably less important."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 50,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "+1 to Ed on requirements section being something that needs to be decoupled from implementation details (which should be covered in another section."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 66,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "Will authentication be required/supported?"
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 66,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "Not in the first release. I have provisions in the configuration for allowing username/password of the HTTP server to be configured, and for using HTTPS instead of HTTP, but these are only placeholders for now, and not implemented as code yet."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 66,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "ACK"
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 77,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "What does \"indirectly\" mean here?"
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 77,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "It means, that instead of just having a string parameter with the desired URL of the sensor, we configure it by describing attributes of the desired sensor and chassis, and then dynamically search for a match, at runtime. This avoids having to hardcode an exact Redfish URL into the configuration, which is usually frowned upon."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 77,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Maybe use a more specific word \"Shall follow section X of the redfish spec\""
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 82,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I'm really not understanding what the connection to magnet links are.  There's no p2p service in any bmc I'm aware of, so it's not clear how you'd use DHT to solve this."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 82,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "A magnet link is just a description of how such a link works: instead of encoding a destination's URL directly, hint at that destination in a roundabout manner, by specifying desired attributes of it (in P2P's case, it would be file size, checksum, and so forth), and letting the system go out and resolve it to the correct destination desired. This protects against destination URL that frequently move or change. No P2P or DHT or BitTorrent or anything, I'm just using \"magnet link\" here as a general familiar term to describe the concept of using attributes to hint at the desired URL instead of specifying that URL exactly."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 82,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I think the whole section on magnet links should be removed.  It adds very little value to the overall, and confuses the solution."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 98,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This seems like it would duplicate a lot of code with the aggregation that's already present in bmcweb.  Can you comment on how we can avoid having two different things accessing sensors across redfish instances?  As-is, the existing aggregation code aggregates sensor values as well as other values, so it seems like most of the code to do this is already present, and wouldn't need to be rewritten?"
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 98,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "I added some more to \"Alternatives Considered\" which addresses this. Reason is, using a Redfish aggregator would just bring the remote Redfish sensors onto the local Redfish server. The goal is to bring the Redfish sensors onto D-Bus, not just mirror them on the local Redfish server.\n\nAlso, if two different things access sensors on Redfish interfaces, that isn't a problem. A good Redfish server can handle two clients at once."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 98,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> I added some more to \"Alternatives Considered\" which addresses this. Reason is, using a Redfish aggregator would just bring the remote Redfish sensors onto the local Redfish server. The goal is to bring the Redfish sensors onto D-Bus, not just mirror them on the local Redfish server.\n\n\"Bring to dbus\" and \"mirror\" aren't that different in terms of code.  Most of the code is in retry logic, and redfish tree accesors.\n\n> \n> Also, if two different things access sensors on Redfish interfaces, that isn't a problem. A good Redfish server can handle two clients at once.\n\nI'm not worried about multiple connections, I'm worried about duplicating code that we've already spent significant effort to get right (error handling, url parsing, ect).  Also, there are Redfish servers that cannot handle multiple clients at once."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 99,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Considering that the only thing this will have in common is the dbus interfaces, is dbus-sensors the right place for this?"
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 99,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "I definitely think so. The `dbus-sensors` daemons all take data from various places and publish it over D-Bus, following the OpenBMC conventions and making use of the OpenBMC interfaces. RedfishSensor is no exception."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 99,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I don't think so.  dbus-sensors is for hardware -> dbus conversions.  It has almost nothing in common code-wise with a TCP socket -> dbus conversion.\n\nI would prefer this go into something Redfish-specific."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 101,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "How do you avoid duplicating the values across interfaces.  As-is, the redfish aggregation is going to aggregate the sensor values into the redfish tree.  Considering this is adding values to dbus, won't this add duplicate sensors to the tree?"
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 101,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "I expanded on this, under the Impacts section, as mentioned in an earlier comment. It avoids adding duplicates to bmcweb, or creating any new local Redfish sensors. It does this by not creating a Chassis to contain the D-Bus sensors published locally by RedfishSensor. That way, bmcweb will not pick them up."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 101,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Doesn't answer the question for the other interfaces (ie IPMI) which doesn't use the chassis association."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 118,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I don't think this comparison to external sensor is valuable to this design.  Most sensors operate on a \"pull\" design, a comparison to those, which you've already done above, would be much better."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 118,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "I feel it's important to compare the push design of ExternalSensor with the pull design of RedfishSensor here. It's appropriate to compare and contrast these two different approaches here."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 126,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "Will it also support \"Not Available\" if the pull fails?\nWill it also support Thresholds?"
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 126,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "If the reading attempt fails, the local Value of the corresponding D-Bus sensor will be set to \"NaN\". Is this what is meant by \"Not Available\", or is that something else?\n\nAs for thresholds, I plan to also support thresholds, although most likely not in the first release."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 126,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "There is also a Availability interface. But sounds like these sensors are going to be analogous to other sensors except the \"read\" method."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 131,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "These sensors will also be included in SDR, and sensors URI in bmcweb, right?"
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 131,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "As for the SDR, no, that is an IPMI-only feature, to my knowledge.\n\nAs for the Sensors endpoint in bmcweb, I hadn't planned on it. Here's why. It wouldn't make sense for the same sensor to be served via Redfish from two different servers. If there's already a perfectly-good Redfish server on the network serving those sensors, then it would not add any advantage to serve the same sensors again via bmcweb. Also, I want to be sure to avoid infinite recursion if somebody configures RedfishSensor to read from \"localhost\" for example."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 131,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "Sounds like mostly your initial goal is to be able to read the sensors value and include them in thermal control. But I think BMC web and ipmi host may automatically pick them up when scanning dbus for sensor objects and add them to collection."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 131,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "I just tested, to learn what the behavior is.\n\nI'm using RedfishSensor to create virtual sensors, and intentionally not including these virtual sensors in any chassis. The D-Bus Sensor objects are created, and work normally, in the usual way. The \"bmcweb\" Redfish server does not include RedfishSensor sensors in any JSON output that I could find, because bmcweb groups sensors by Chassis before including them, and there is no Chassis.\n\nHowever, the IPMI server does include the RedfishSensor virtual sensors. Hopefully the fact that these sensors are added to IPMI should not be an issue. And, it might actually bring up an interesting unintended feature, that is, creating the ability to use RedfishSensor as a convenient Redfish-to-IPMI protocol converter."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 131,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> As for the SDR, no, that is an IPMI-only feature\n\nAs you've written your design, yes, they would show up in the SDR, which seems like a problem that needs to be overcome."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 131,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "I kind of like the fact the sensors show up in the IPMI SDR. I consider it a feature, not a bug. This would let somebody use RedfishSensor as a way to take a Redfish-only server and serve up its sensor values over IPMI, perhaps for backwards compatibility with some other IPMI-only client they have."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 131,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> I consider it a feature, not a bug. \n\nPlease call this out in your requirements section then."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 144,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "bmcweb is also a redfish client.  Please take a look at http_client.hpp"
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 144,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "Interesting. Does anything currently use this code? This is used by some Redfish aggregators, correct?"
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 144,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Yes.  The aggregation code already uses this."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 147,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Can we agree that the code needs to be shared between the two?  I don't think sharing the code would mean that two daemons couldnt' have some differing paths.\n\nConsidering the amount of effort that's already been put into hardening the http_client implementation in bmcweb, I worry that we're going to duplicate a lot of things that were very hard-earned if we don't reused the code."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 147,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "Hmm. I'm open to that, but it's an implementation detail. I'm open to reusing the code. I took a look at the http_client.hpp file in bmcweb. Can it be decoupled from Crow?"
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 147,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> it's an implementation detail.\n\nNot at this level.  It's a pretty key design point of reuse versus rewrite.  You're right, it's not a \"requirement\" but it is part of the design.\n\n> Can it be decoupled from Crow?\n\nIt was never a part of crow, so I'm not sure what you mean."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 156,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I'm not sure I agree with that, considering we're talking about a trusted interface.  I do agree with your conclusion."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 156,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "I'm glad we agree about not wanting D-Bus to be overexposed, considering it is a trusted interface."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 176,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I'm not sure that matters in this case?  bmcweb as it is already lives on DBus, even IF we put everything in one daemon (which I agree, we shouldn't) that should still work, right?"
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 176,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "I am glad you agree that not everything should be bundled into bmcweb. It's good to have different programs for different functionalities."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 176,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Please update the document to account for the difference here."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 180,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Please write up the retry and failure procedures.  Sockets fail in VERY different ways than normal sysfs interfaces do, and that needs accounted for in the design."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 180,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "Isn't that more of an implementation issue than a design issue? Where to put it in this document at? I have added it in the \"Alternatives Considered\" section, alongside the other strawmen."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 180,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> Isn't that more of an implementation issue than a design issue? \n\nNo.  It should be part of the requirements."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 183,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "See above.  This is not true as your design is written, it will change Redfish and IPMI."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 183,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "I rewrote and expanded this area a little. It doesn't fundamentally change Redfish, IPMI, or D-Bus, but rather, makes use of existing API there."
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "line": 183,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "That's fine it uses existing APIs, but there IS user impact, which is the point of this section."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "type": "ADDED",
                    "insertions": 260,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 273,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "7c05f37b727a91051261a1b7cf0f8cf34e0d3727",
            "parents": [
                "f4febd002df578bad816239b70950f84ea4567e8"
            ],
            "ref": "refs/changes/54/58954/2",
            "uploader": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "createdOn": 1671484121,
            "author": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "Took all these comments into account, see latest patchset.\n"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "type": "ADDED",
                    "insertions": 312,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 325,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "1434bddf0706b0290bb156a9e217746c24dde74c",
            "parents": [
                "f4febd002df578bad816239b70950f84ea4567e8"
            ],
            "ref": "refs/changes/54/58954/3",
            "uploader": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "createdOn": 1671486673,
            "author": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "designs/redfish-sensor-design.md",
                    "type": "ADDED",
                    "insertions": 312,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 325,
            "sizeDeletions": 0
        }
    ]
}