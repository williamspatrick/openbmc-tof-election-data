{
    "project": "openbmc/docs",
    "branch": "master",
    "id": "Ifaf4cace7739beb2fd344f1fe37df8b6ea76284f",
    "number": 52461,
    "subject": "design: Add an alternative for health rollup",
    "owner": {
        "name": "Shichen Lin",
        "email": "shichenl@nvidia.com",
        "username": "ShichenLin"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/docs/+/52461",
    "hashtags": [],
    "createdOn": 1648592427,
    "lastUpdated": 1665657879,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1648592427,
            "reviewer": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1648592615,
            "reviewer": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "message": "Set Work In Progress"
        },
        {
            "timestamp": 1649806313,
            "reviewer": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1649808734,
            "reviewer": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "message": "Patch Set 2:\n\nThis change is ready for review."
        },
        {
            "timestamp": 1649869021,
            "reviewer": {
                "name": "Deepak Kodihalli",
                "email": "deepak.kodihalli.83@gmail.com",
                "username": "dkodihal"
            },
            "message": "Patch Set 2: Code-Review+1"
        },
        {
            "timestamp": 1649979459,
            "reviewer": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1653444104,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1658606594,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(10 comments)"
        },
        {
            "timestamp": 1665657879,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Abandoned\n\nclose due to inactivity"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "9fbe67fd65c95b4e141d9ad616a1aacdfa451823",
            "parents": [
                "6b1efa878f1b24d0444bd3735a40db908db84cac"
            ],
            "ref": "refs/changes/61/52461/1",
            "uploader": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "createdOn": 1648592427,
            "author": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "designs/redfish-health-rolllup.md",
                    "type": "MODIFIED",
                    "insertions": 25,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 38,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "c21aa77d4b9bc99979137492fda37eea82691e66",
            "parents": [
                "6b1efa878f1b24d0444bd3735a40db908db84cac"
            ],
            "ref": "refs/changes/61/52461/2",
            "uploader": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "createdOn": 1649806313,
            "author": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "designs/redfish-health-rolllup.md",
                    "type": "MODIFIED",
                    "insertions": 38,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "3dcf046c805565a078c2298e3aa4949117e654aa",
            "parents": [
                "6b1efa878f1b24d0444bd3735a40db908db84cac"
            ],
            "ref": "refs/changes/61/52461/3",
            "uploader": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "createdOn": 1649979459,
            "author": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Hi Shichen Lin, just one comment on whether the section you've put this proposal in is the section you actually want?"
                },
                {
                    "file": "designs/redfish-health-rolllup.md",
                    "line": 116,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Isn't this what you're trying to push as a solution?\n\n\"Alternatives Considered\" is meant as a section of rejected ideas, along with the reasoning for _why_ they were rejected. It's meant to demonstrate that you've thought about the problem enough to understand what alternatives exist.\n\nIf you're wanting to propose this as the actual solution to health rollup then it shouldn't be in \"Alternatives Considered\"."
                },
                {
                    "file": "designs/redfish-health-rolllup.md",
                    "line": 116,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "+1.  Pretty sure you meant this to be a replacement."
                },
                {
                    "file": "designs/redfish-health-rolllup.md",
                    "line": 121,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This is very intentional in the design because it avoids bugs in caching implementations."
                },
                {
                    "file": "designs/redfish-health-rolllup.md",
                    "line": 123,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Key word being \"easily\".  Unfortuantely, to obey the Redfish health rollup rules properly, it requires quite a complex setup.  While I'm open to the possibility of a simpler one (which would be great) we need to make sure ALL the use cases are accounted for."
                },
                {
                    "file": "designs/redfish-health-rolllup.md",
                    "line": 130,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This is arguably fixable if we had a better ObjectMapper method, right?"
                },
                {
                    "file": "designs/redfish-health-rolllup.md",
                    "line": 134,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This needs a lot more details.\n\nWhere is rollup implemented?\n\nHow is any individual daemon aware of the complete system state?  Is it required to track its own children individually?  How often is this state updated?  Is it polled?"
                },
                {
                    "file": "designs/redfish-health-rolllup.md",
                    "line": 138,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "If it's distributed like this, how can we make sure that all individual implementations of rollup are correct?  Wouldn't this duplicate a lot of code in all different daemons?"
                },
                {
                    "file": "designs/redfish-health-rolllup.md",
                    "line": 144,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Isn't this basically the same as we do today, just replacing the existing status interface with a Health interface, and replacing an association with a \"health_rollup\" accciation?"
                },
                {
                    "file": "designs/redfish-health-rolllup.md",
                    "line": 145,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Nit, please use another term than \"device tree\" here.  I'm pretty sure you didn't intend the linux device tree, but the name is overloaded."
                },
                {
                    "file": "designs/redfish-health-rolllup.md",
                    "line": 147,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Doesn't redfish still require HealthRollup on nodes that have no decendents?"
                },
                {
                    "file": "designs/redfish-health-rolllup.md",
                    "line": 152,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I'm struggling with this statement, because in this context, you're not proposing an outright replacement, you're proposing a side by side implementation, but you haven't talked through:\n1. How a redfish implementation would pick between them.\n2. Which daemons should use the \"old\" and which daemons should use the \"new\".  Should all existing deamons be ported to the new ones?"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "designs/redfish-health-rolllup.md",
                    "type": "MODIFIED",
                    "insertions": 38,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 0
        }
    ]
}