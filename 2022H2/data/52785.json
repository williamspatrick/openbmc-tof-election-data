{
    "project": "openbmc/phosphor-dbus-interfaces",
    "branch": "master",
    "id": "Ic05baef397c3a3b4c8682fbe8de455358f1a4e53",
    "number": 52785,
    "subject": "Network: Remove deprecated properties in SystemConfiguration",
    "owner": {
        "name": "Jiaqing Zhao",
        "email": "jiaqing.zhao@intel.com",
        "username": "jiaqingz-intel"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-dbus-interfaces/+/52785",
    "hashtags": [],
    "createdOn": 1649667304,
    "lastUpdated": 1658236352,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1649667304,
            "reviewer": {
                "name": "Jiaqing Zhao",
                "email": "jiaqing.zhao@intel.com",
                "username": "jiaqingz-intel"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1649667314,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1649667314,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1649667741,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/40879/ : SUCCESS"
        },
        {
            "timestamp": 1649697050,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\n(2 comments)"
        },
        {
            "timestamp": 1649728795,
            "reviewer": {
                "name": "Jiaqing Zhao",
                "email": "jiaqing.zhao@intel.com",
                "username": "jiaqingz-intel"
            },
            "message": "Uploaded patch set 2: Commit message was updated."
        },
        {
            "timestamp": 1649730477,
            "reviewer": {
                "name": "Jiaqing Zhao",
                "email": "jiaqing.zhao@intel.com",
                "username": "jiaqingz-intel"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1649760851,
            "reviewer": {
                "name": "Jiaqing Zhao",
                "email": "jiaqing.zhao@intel.com",
                "username": "jiaqingz-intel"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1649760862,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1649760862,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1649761301,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/41021/ : SUCCESS"
        },
        {
            "timestamp": 1649798489,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1649901436,
            "reviewer": {
                "name": "Jiaqing Zhao",
                "email": "jiaqing.zhao@intel.com",
                "username": "jiaqingz-intel"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1649902085,
            "reviewer": {
                "name": "Jiaqing Zhao",
                "email": "jiaqing.zhao@intel.com",
                "username": "jiaqingz-intel"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1649902463,
            "reviewer": {
                "name": "Jiaqing Zhao",
                "email": "jiaqing.zhao@intel.com",
                "username": "jiaqingz-intel"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1649957778,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1649959031,
            "reviewer": {
                "name": "Jiaqing Zhao",
                "email": "jiaqing.zhao@intel.com",
                "username": "jiaqingz-intel"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1657868010,
            "reviewer": {
                "name": "Sunitha Harish",
                "email": "sunithaharish04@gmail.com",
                "username": "sunharis"
            },
            "message": "Patch Set 3: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1657870490,
            "reviewer": {
                "name": "Jiaqing Zhao",
                "email": "jiaqing.zhao@intel.com",
                "username": "jiaqingz-intel"
            },
            "message": "Patch Set 4: Patch Set 3 was rebased"
        },
        {
            "timestamp": 1657870531,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1657870531,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1657870882,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/47044/ : SUCCESS"
        },
        {
            "timestamp": 1658172878,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 4: Code-Review+2"
        },
        {
            "timestamp": 1658172884,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Change has been successfully merged"
        },
        {
            "timestamp": 1658236352,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "ea9b9c5e3d60ed9b5073e4c68fe7ef40ad558deb",
            "parents": [
                "c531268c53e2676ca82937ef67d1b0475467bc59"
            ],
            "ref": "refs/changes/85/52785/1",
            "uploader": {
                "name": "Jiaqing Zhao",
                "email": "jiaqing.zhao@intel.com",
                "username": "jiaqingz-intel"
            },
            "createdOn": 1649667304,
            "author": {
                "name": "Jiaqing Zhao",
                "email": "jiaqing.zhao@intel.com",
                "username": "jiaqingz-intel"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Can we have a reference to the change?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Jiaqing Zhao",
                        "email": "jiaqing.zhao@intel.com",
                        "username": "jiaqingz-intel"
                    },
                    "message": "Done"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 12,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Why isn't someone working with you to clean these up on the IBM-specific code implementation too?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 12,
                    "reviewer": {
                        "name": "Jiaqing Zhao",
                        "email": "jiaqing.zhao@intel.com",
                        "username": "jiaqingz-intel"
                    },
                    "message": "Sorry I'm not the developer of these IBM-specific features, I just did a search in all the repos and found that IBM still using the deprecated DefaultGateway property of xyz.openbmc_project.Network.SystemConfiguration. Of course, IBM can have a patch in meta-ibm for adding it back.\n\nPersonally speaking, I'm totally okay for removing these two properties in both here and phosphor-networkd. Currently I have to return a NotAllowed in networkd in my networkd patch for this compatibility concern https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-networkd/+/52786. If they are removed here, the handlers in networkd can also be removed, which I think is a more clean solution."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 12,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "It looks like there is also code in BMCWeb using these.  Are you going to update those?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 12,
                    "reviewer": {
                        "name": "Jiaqing Zhao",
                        "email": "jiaqing.zhao@intel.com",
                        "username": "jiaqingz-intel"
                    },
                    "message": "No, bmcweb is not depending on this phosphor-dbus-interface header file, it still compiles. It just something hardcoded there, and I don't know whether the backend service requires the header file or not."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 12,
                    "reviewer": {
                        "name": "Jiaqing Zhao",
                        "email": "jiaqing.zhao@intel.com",
                        "username": "jiaqingz-intel"
                    },
                    "message": "I checked code of phosphor-settingsd (xyz.openbmc_project.Settings service), it depends on phosphor-dbus-interfaces header files. So shall we continue keeping these deprecated properties here until IBM fixed it, or just remove it here and add them back as patch in meta-ibm?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 12,
                    "reviewer": {
                        "name": "Jiaqing Zhao",
                        "email": "jiaqing.zhao@intel.com",
                        "username": "jiaqingz-intel"
                    },
                    "message": "Anyway, remove these deprecated properties or not won't have siginificent impact on my networkd patch https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-networkd/+/52786.\n\nI just removed code using these properties, if they are still there, the only side effect is there would be two extra properties under /xyz/openbmc_project/network/config xyz.openbmc_project.Network.SystemConfiguration. Writing them will not make any difference excepting the value on dbus changes, and no error will given on write.\n\nKeep these properties here is also acceptable."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 12,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "> No, bmcweb is not depending on this phosphor-dbus-interface header file, it still compiles. It just something hardcoded there, and I don't know whether the backend service requires the header file or not.\n\nbmcweb doesn't compile against the PDI headers, no, so it will still compile if you remove this, but this repository is also intended to serve as documentation.  If this field is \"deprecated\" someone should have updated bmcweb to no longer be using it anymore, right?  Who is going to do that and when?\n\n> I checked code of phosphor-settingsd (xyz.openbmc_project.Settings service), it depends on phosphor-dbus-interfaces header files. So shall we continue keeping these deprecated properties here until IBM fixed it, or just remove it here and add them back as patch in meta-ibm?\n\nWe need to keep them in until someone cleans them up.  That is part of the effort involved in deprecating / removing something.  You can't just punt on it because the code was written and used by another company and you really shouldn't expect me to coordinate all this effort for you.  I've invited Adriana and Sunitha to weigh in, and hopefully they do, but if you're removing something used by others you need to coordinate the clean up effort."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 12,
                    "reviewer": {
                        "name": "Jiaqing Zhao",
                        "email": "jiaqing.zhao@intel.com",
                        "username": "jiaqingz-intel"
                    },
                    "message": "Got your point. My idea is to simply put this patch here unmerged until IBM developers fixed them. This might take a long time.\n\nFor me, this change is made for the networkd change at https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-networkd/+/52786. That change does not depends on the removal, but without removal, there would still be DefaultGateway and DefaultGateway6 properties there, they are just meaningless and writting them only affects the value shown on dbus. I think it is an acceptable behavior."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 12,
                    "reviewer": {
                        "name": "Sunitha Harish",
                        "email": "sunithaharish04@gmail.com",
                        "username": "sunharis"
                    },
                    "message": "IBM is not using this in hypervisor network. Networkd changes are already upstream. This change can go ahead."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 12,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Network/SystemConfiguration.interface.yaml",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 21,
            "sizeDeletions": 4
        },
        {
            "number": 2,
            "revision": "8a6bc18df2457a55763b909323cbcdc7ec08bcaa",
            "parents": [
                "c531268c53e2676ca82937ef67d1b0475467bc59"
            ],
            "ref": "refs/changes/85/52785/2",
            "uploader": {
                "name": "Jiaqing Zhao",
                "email": "jiaqing.zhao@intel.com",
                "username": "jiaqingz-intel"
            },
            "createdOn": 1649728795,
            "author": {
                "name": "Jiaqing Zhao",
                "email": "jiaqing.zhao@intel.com",
                "username": "jiaqingz-intel"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Network/SystemConfiguration.interface.yaml",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 21,
            "sizeDeletions": 4
        },
        {
            "number": 3,
            "revision": "578f8bc8f18f1c94a13d83fbbcbefb48e619a80f",
            "parents": [
                "c531268c53e2676ca82937ef67d1b0475467bc59"
            ],
            "ref": "refs/changes/85/52785/3",
            "uploader": {
                "name": "Jiaqing Zhao",
                "email": "jiaqing.zhao@intel.com",
                "username": "jiaqingz-intel"
            },
            "createdOn": 1649760851,
            "author": {
                "name": "Jiaqing Zhao",
                "email": "jiaqing.zhao@intel.com",
                "username": "jiaqingz-intel"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Adriana / Sunitha, It looks like you two have touched the files in meta-ibm that creates entries for the Hypervisor for these properties.  Can you work to get these updated since these properties are deprecated?"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Network/SystemConfiguration.interface.yaml",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -15
                }
            ],
            "sizeInsertions": 14,
            "sizeDeletions": 15
        },
        {
            "number": 4,
            "revision": "b1de713e0fd8fe307a60ef65f3c353136fa6dc96",
            "parents": [
                "f6db102edd88ef28c5d8ab40aed9f4ea6c31d934"
            ],
            "ref": "refs/changes/85/52785/4",
            "uploader": {
                "name": "Jiaqing Zhao",
                "email": "jiaqing.zhao@intel.com",
                "username": "jiaqingz-intel"
            },
            "createdOn": 1657870490,
            "author": {
                "name": "Jiaqing Zhao",
                "email": "jiaqing.zhao@intel.com",
                "username": "jiaqingz-intel"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Network/SystemConfiguration.interface.yaml",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -15
                }
            ],
            "sizeInsertions": 14,
            "sizeDeletions": 15
        }
    ]
}