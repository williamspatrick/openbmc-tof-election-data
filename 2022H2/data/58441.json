{
    "project": "openbmc/phosphor-dbus-interfaces",
    "branch": "master",
    "id": "I6df06b1dddfd9408ff39e8917d269a2cba22668d",
    "number": 58441,
    "subject": "Inventory: Add \"containing\" Association for Item",
    "owner": {
        "name": "Benjamin Fair",
        "email": "benjaminfair@google.com",
        "username": "BenjaminFair"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-dbus-interfaces/+/58441",
    "hashtags": [],
    "createdOn": 1667421912,
    "lastUpdated": 1667941774,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1667421912,
            "reviewer": {
                "name": "Benjamin Fair",
                "email": "benjaminfair@google.com",
                "username": "BenjaminFair"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1667421983,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1667421983,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1667422393,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/54544/ : SUCCESS"
        },
        {
            "timestamp": 1667422595,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1667423611,
            "reviewer": {
                "name": "Benjamin Fair",
                "email": "benjaminfair@google.com",
                "username": "BenjaminFair"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1667423880,
            "reviewer": {
                "name": "Benjamin Fair",
                "email": "benjaminfair@google.com",
                "username": "BenjaminFair"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1667423986,
            "reviewer": {
                "name": "Benjamin Fair",
                "email": "benjaminfair@google.com",
                "username": "BenjaminFair"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1667424013,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1667424013,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1667424413,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/54550/ : SUCCESS"
        },
        {
            "timestamp": 1667428919,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1667500068,
            "reviewer": {
                "name": "Benjamin Fair",
                "email": "benjaminfair@google.com",
                "username": "BenjaminFair"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1667832285,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1667862046,
            "reviewer": {
                "name": "Benjamin Fair",
                "email": "benjaminfair@google.com",
                "username": "BenjaminFair"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1667862059,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1667862060,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1667862072,
            "reviewer": {
                "name": "Benjamin Fair",
                "email": "benjaminfair@google.com",
                "username": "BenjaminFair"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1667862478,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/54831/ : SUCCESS"
        },
        {
            "timestamp": 1667863368,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 3: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1667868884,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1667941772,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 3: Code-Review+2"
        },
        {
            "timestamp": 1667941774,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Change has been successfully merged"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "7ce51cb91aa0269209079bf1bf7d40b933c0ceff",
            "parents": [
                "484f6c45b0fb7d4c3de460200e187f19635c1d0f"
            ],
            "ref": "refs/changes/41/58441/1",
            "uploader": {
                "name": "Benjamin Fair",
                "email": "benjaminfair@google.com",
                "username": "BenjaminFair"
            },
            "createdOn": 1667421912,
            "author": {
                "name": "Benjamin Fair",
                "email": "benjaminfair@google.com",
                "username": "BenjaminFair"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "yaml/xyz/openbmc_project/Inventory/Item/Board.interface.yaml",
                    "line": 12,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "We need the reverse associations added to Item also.  Do we just want to make this so any Item can contain another Item or is that too broad?"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Inventory/Item/Board.interface.yaml",
                    "line": 12,
                    "reviewer": {
                        "name": "Benjamin Fair",
                        "email": "benjaminfair@google.com",
                        "username": "BenjaminFair"
                    },
                    "message": "I think it might be a bit too broad. We wouldn't want a Cable or PowerSupply to contain a Chassis for instance - those will have more specific relationships (e.g. connecting_to, powering).\n\nOtherwise, if we're using the same Association for everything, then we should make the name more generic: [having_parent, parent_of] or something like that. I think that'd be too confusing though"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Inventory/Item/Board.interface.yaml",
                    "line": 12,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "but you can already have a Board containing a Chassis in your proposal since you\u2019ve used Item as the end point, right?  That seems similarly unpractical as the ones you\u2019ve listed. Isn\u2019t it on the designer to make sure they don\u2019t have invalid associations?"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Inventory/Item/Board.interface.yaml",
                    "line": 12,
                    "reviewer": {
                        "name": "Benjamin Fair",
                        "email": "benjaminfair@google.com",
                        "username": "BenjaminFair"
                    },
                    "message": "Board and Chassis are used interchangeably in OpenBMC (which may be its own issue), so that's why I included either as an option.\n\nThe associations documented in PDI are normative - there's nothing actually enforcing them - so I was leaning towards being more descriptive with how they \"should\" be used."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Inventory/Item/Board.interface.yaml",
                    "line": 12,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "> The associations documented in PDI are normative - there's nothing actually enforcing them...\n\nCurrently. ;)\n\n> so I was leaning towards being more descriptive with how they \"should\" be used.\n\nI've been pushing similar commits towards the more generic Item instead of the specific interface.  I don't see a strong reason to make this one restricted.  People are going to want to start adding \"SocketN contained_by Board\" and \"DimmN contained_by Board\" too, so let's just give them that ability now.\n\nIf this points to some potential performance issues in the mapper queries, as we discussed when we went over the inventory architecture design, let's get those fixed.  I believe Nan was already working on that."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Inventory/Item/Board.interface.yaml",
                    "line": 12,
                    "reviewer": {
                        "name": "Benjamin Fair",
                        "email": "benjaminfair@google.com",
                        "username": "BenjaminFair"
                    },
                    "message": "Ok, I'll move it to Item then"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Inventory/Item/Chassis.interface.yaml",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Inventory/Item/Board.interface.yaml",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Inventory/Item/README.md",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 33,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "8e7c583e8a4dd173ad3f5c8e4ff6ee847fc8a492",
            "parents": [
                "484f6c45b0fb7d4c3de460200e187f19635c1d0f"
            ],
            "ref": "refs/changes/41/58441/2",
            "uploader": {
                "name": "Benjamin Fair",
                "email": "benjaminfair@google.com",
                "username": "BenjaminFair"
            },
            "createdOn": 1667423880,
            "author": {
                "name": "Benjamin Fair",
                "email": "benjaminfair@google.com",
                "username": "BenjaminFair"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "yaml/xyz/openbmc_project/Inventory/Item.interface.yaml",
                    "line": 26,
                    "reviewer": {
                        "name": "Benjamin Fair",
                        "email": "benjaminfair@google.com",
                        "username": "BenjaminFair"
                    },
                    "message": "Does this mean the other object must implement all of these interfaces or just one at minimum?"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Inventory/Item.interface.yaml",
                    "line": 26,
                    "reviewer": {
                        "name": "Benjamin Fair",
                        "email": "benjaminfair@google.com",
                        "username": "BenjaminFair"
                    },
                    "message": "Resolved"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Inventory/Item.interface.yaml",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -1
                },
                {
                    "file": "yaml/xyz/openbmc_project/Inventory/Item/Chassis.interface.yaml",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Inventory/Item/Board.interface.yaml",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Inventory/Item/README.md",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 43,
            "sizeDeletions": 1
        },
        {
            "number": 3,
            "revision": "36b527af49cf87d0bc7097ea6faba4904fbf8878",
            "parents": [
                "484f6c45b0fb7d4c3de460200e187f19635c1d0f"
            ],
            "ref": "refs/changes/41/58441/3",
            "uploader": {
                "name": "Benjamin Fair",
                "email": "benjaminfair@google.com",
                "username": "BenjaminFair"
            },
            "createdOn": 1667862046,
            "author": {
                "name": "Benjamin Fair",
                "email": "benjaminfair@google.com",
                "username": "BenjaminFair"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "lgtm\n"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Inventory/Item.interface.yaml",
                    "type": "MODIFIED",
                    "insertions": 17,
                    "deletions": -1
                },
                {
                    "file": "yaml/xyz/openbmc_project/Inventory/Item/Cpu.interface.yaml",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -9
                },
                {
                    "file": "yaml/xyz/openbmc_project/Inventory/Item/CpuCore.interface.yaml",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -10
                },
                {
                    "file": "yaml/xyz/openbmc_project/Inventory/Item/README.md",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 34,
            "sizeDeletions": 21
        }
    ]
}