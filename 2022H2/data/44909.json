{
    "project": "openbmc/phosphor-buttons",
    "branch": "master",
    "id": "I56b78af3e87dc3969bed554064e725b135c83e8c",
    "number": 44909,
    "subject": "button-handler: Add button event log",
    "owner": {
        "name": "Chanh Nguyen",
        "email": "chanh@os.amperecomputing.com",
        "username": "chnguyen-ampere"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-buttons/+/44909",
    "hashtags": [],
    "createdOn": 1626240159,
    "lastUpdated": 1660535693,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1626240159,
            "reviewer": {
                "name": "Chanh Nguyen",
                "email": "chanh@os.amperecomputing.com",
                "username": "chnguyen-ampere"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1626240180,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1626240234,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/21937/ : SUCCESS"
        },
        {
            "timestamp": 1626383665,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1626660971,
            "reviewer": {
                "name": "Kuiying Wang",
                "email": "wangkuiying.wky@alibaba-inc.com",
                "username": "kuiyingw"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1626793108,
            "reviewer": {
                "name": "Chanh Nguyen",
                "email": "chanh@os.amperecomputing.com",
                "username": "chnguyen-ampere"
            },
            "message": "Patch Set 1:\n\n=> curl -k -H \"X-Auth-Token: $token\" -X GET https://${bmc}/redfish/v1/Systems/system/LogServices/EventLog/Entries\n{\n  \"@odata.id\": \"/redfish/v1/Systems/system/LogServices/EventLog/Entries\",\n  \"@odata.type\": \"#LogEntryCollection.LogEntryCollection\",\n  \"Description\": \"Collection of System Event Log Entries\",\n  \"Members\": [\n    {\n      \"@odata.id\": \"/redfish/v1/Systems/system/LogServices/EventLog/Entries/1626792593\",\n      \"@odata.type\": \"#LogEntry.v1_4_0.LogEntry\",\n      \"Created\": \"2021-07-20T14:49:53+00:00\",\n      \"EntryType\": \"Event\",\n      \"Id\": \"1626792593\",\n      \"Message\": \"Power Button Pressed.\",\n      \"MessageArgs\": [],\n      \"MessageId\": \"OpenBMC.0.1.PowerButtonPressed\",\n      \"Name\": \"System Event Log Entry\",\n      \"Severity\": \"OK\"\n    },\n    {\n      \"@odata.id\": \"/redfish/v1/Systems/system/LogServices/EventLog/Entries/1626792954\",\n      \"@odata.type\": \"#LogEntry.v1_4_0.LogEntry\",\n      \"Created\": \"2021-07-20T14:55:54+00:00\",\n      \"EntryType\": \"Event\",\n      \"Id\": \"1626792954\",\n      \"Message\": \"Reset Button Pressed.\",\n      \"MessageArgs\": [],\n      \"MessageId\": \"OpenBMC.0.1.ResetButtonPressed\",\n      \"Name\": \"System Event Log Entry\",\n      \"Severity\": \"OK\"\n    }\n  ],\n  \"Members@odata.count\": 2,\n  \"Name\": \"System Event Log Entries\"\n}"
        },
        {
            "timestamp": 1626951170,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1: Code-Review-1\n\n(1 comment)"
        },
        {
            "timestamp": 1626959215,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1626960718,
            "reviewer": {
                "name": "Thang Q. Nguyen",
                "email": "thang@os.amperecomputing.com",
                "username": "thangqn-ampere"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1626965405,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1660535693,
            "reviewer": {
                "name": "Chanh Nguyen",
                "email": "chanh@os.amperecomputing.com",
                "username": "chnguyen-ampere"
            },
            "message": "Abandoned\n\nthis patch is invalid"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "5de5ea685f671aa201f61c09a38a636ee4bbca91",
            "parents": [
                "5ed4cc0f0947e589c430618c29bd474f0fce32b3"
            ],
            "ref": "refs/changes/09/44909/1",
            "uploader": {
                "name": "Chanh Nguyen",
                "email": "chanh@os.amperecomputing.com",
                "username": "chnguyen-ampere"
            },
            "createdOn": 1626240159,
            "author": {
                "name": "Chanh Nguyen",
                "email": "chanh@os.amperecomputing.com",
                "username": "chnguyen-ampere"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Could you show the resulting redfish log for one of these here?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "Kuiying Wang",
                        "email": "wangkuiying.wky@alibaba-inc.com",
                        "username": "kuiyingw"
                    },
                    "message": "Please attach Tested field with test result."
                },
                {
                    "file": "src/button_handler.cpp",
                    "line": 162,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Why are we doing this?  This is an absolutely terrible design.  We should not have every single application know about Redfish and do special things for it."
                },
                {
                    "file": "src/button_handler.cpp",
                    "line": 162,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "for better or for worse, this is the other half of the logging bifurcation in openbmc: https://github.com/openbmc/docs/blob/master/architecture/redfish-logging-in-bmcweb.md"
                },
                {
                    "file": "src/button_handler.cpp",
                    "line": 162,
                    "reviewer": {
                        "name": "Thang Q. Nguyen",
                        "email": "thang@os.amperecomputing.com",
                        "username": "thangqn-ampere"
                    },
                    "message": "Do you have any suggestion on where to log the button events? In management perspective, all events should been logged."
                },
                {
                    "file": "src/button_handler.cpp",
                    "line": 162,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "> for better or for worse, this is the other half of the logging bifurcation in openbmc\n\nYes, I am aware.  As of right now only Intel-originated repositories are following this \"design\" and we should stop the propagation further.\n\n> Do you have any suggestion on where to log the button events? In management perspective, all events should been logged.\n\n@Matt, we can make informational Log-Entries, right?\n\n@Thang, I poked Ed on Discord about this.  We do need to figure something out.  I don't think adding log messages like this sprinkled throughout all the code is a good approach, and I do recognize your team were just following examples / documentation found elsewhere."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "src/button_handler.cpp",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 36,
            "sizeDeletions": 0
        }
    ]
}