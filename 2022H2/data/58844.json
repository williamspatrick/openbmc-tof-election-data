{
    "project": "openbmc/phosphor-power",
    "branch": "master",
    "id": "I5a11746a036d0a66b11c76ec12784b8870fa306f",
    "number": 58844,
    "subject": "psu-ng: Change detection of brownout errors",
    "owner": {
        "name": "Jim Wright",
        "email": "jlwright@us.ibm.com",
        "username": "wrightjl1"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-power/+/58844",
    "hashtags": [],
    "createdOn": 1668971527,
    "lastUpdated": 1670343274,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1668971527,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1668971560,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1668971560,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1668971691,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/55817/ : FAILURE"
        },
        {
            "timestamp": 1668977559,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1668977587,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1668977587,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1668978172,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/55819/ : SUCCESS"
        },
        {
            "timestamp": 1669050698,
            "reviewer": {
                "name": "Derek Howard",
                "email": "derekh@us.ibm.com",
                "username": "derekhoward55"
            },
            "message": "Patch Set 2:\n\n(5 comments)"
        },
        {
            "timestamp": 1669073487,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Uploaded patch set 3: Patch Set 2 was rebased."
        },
        {
            "timestamp": 1669073514,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1669073514,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1669074192,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/55911/ : SUCCESS"
        },
        {
            "timestamp": 1669075171,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Set Work In Progress"
        },
        {
            "timestamp": 1669079894,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Uploaded patch set 4: Patch Set 3 was rebased."
        },
        {
            "timestamp": 1669079908,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1669079908,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1669080493,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/55917/ : SUCCESS"
        },
        {
            "timestamp": 1669244061,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1669244082,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1669244082,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1669244665,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/56029/ : SUCCESS"
        },
        {
            "timestamp": 1669245661,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Patch Set 5:\n\n(4 comments)\n\nThis change is ready for review."
        },
        {
            "timestamp": 1669655693,
            "reviewer": {
                "name": "Derek Howard",
                "email": "derekh@us.ibm.com",
                "username": "derekhoward55"
            },
            "message": "Patch Set 5:\n\n(2 comments)"
        },
        {
            "timestamp": 1669736806,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Uploaded patch set 6."
        },
        {
            "timestamp": 1669736818,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1669736818,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: -Ok-To-Test"
        },
        {
            "timestamp": 1669737212,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Patch Set 6:\n\n(2 comments)"
        },
        {
            "timestamp": 1669737397,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/56283/ : SUCCESS"
        },
        {
            "timestamp": 1669755481,
            "reviewer": {
                "name": "Derek Howard",
                "email": "derekh@us.ibm.com",
                "username": "derekhoward55"
            },
            "message": "Patch Set 6:\n\n(6 comments)"
        },
        {
            "timestamp": 1669759761,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Patch Set 6:\n\n(2 comments)"
        },
        {
            "timestamp": 1669760379,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 6:\n\n(8 comments)"
        },
        {
            "timestamp": 1669850939,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Patch Set 6:\n\n(3 comments)"
        },
        {
            "timestamp": 1669851337,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Uploaded patch set 7."
        },
        {
            "timestamp": 1669851358,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1669851358,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: -Ok-To-Test"
        },
        {
            "timestamp": 1669851778,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Patch Set 7:\n\n(5 comments)"
        },
        {
            "timestamp": 1669852015,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/56392/ : SUCCESS"
        },
        {
            "timestamp": 1669907090,
            "reviewer": {
                "name": "Derek Howard",
                "email": "derekh@us.ibm.com",
                "username": "derekhoward55"
            },
            "message": "Patch Set 7: Code-Review+1"
        },
        {
            "timestamp": 1670271022,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Patch Set 7:\n\n(2 comments)"
        },
        {
            "timestamp": 1670271750,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 7: Code-Review+1"
        },
        {
            "timestamp": 1670275156,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 7: Code-Review+1"
        },
        {
            "timestamp": 1670276100,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 7: Code-Review+2"
        },
        {
            "timestamp": 1670343131,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Patch Set 7:\n\n(5 comments)"
        },
        {
            "timestamp": 1670343224,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Patch Set 7:\n\n(3 comments)"
        },
        {
            "timestamp": 1670343274,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Change has been successfully merged"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "0137377e71fabafd12fa80068719d58979598ae2",
            "parents": [
                "39794ee28bfd287fe79d6e2dab1d8a2388ff73a9"
            ],
            "ref": "refs/changes/44/58844/1",
            "uploader": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "createdOn": 1668971527,
            "author": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 45,
                    "deletions": -17
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 72,
            "sizeDeletions": 19
        },
        {
            "number": 2,
            "revision": "7d627bb682e1dff5966d47d367f00cd757b122a5",
            "parents": [
                "0d7ef0414b1d65d5bf69dd87df0ea32f83f08b93"
            ],
            "ref": "refs/changes/44/58844/2",
            "uploader": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "createdOn": 1668977559,
            "author": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "Functionally I think this looks good, we'll see how it fits into the big picture with the later changes.\n\nJust some questions on the design, and some comment requests to help make it easier to understand (and 1 typo).  Thanks!"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 685,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "I'm a little confused by this.  Looks like the 'powerOn' is the system state.  If the system is powered off, then pgood is off, yet we're returning chassispgood = true.  The comment that is there is stating \"not in active pgood fail\", so it appears this is not really returning the pgood state, but the \"pgood state if we think the system is supposed to be on\", right?\n\nI think it would help if the first comment clarified \"If the system power is not on,...\", then maybe describing the output a little more, something like\n\n// This will return the pgood state when the system is supposed to be on, and will be used to check for pgood fails when system is on:\n// when system is supposed to be off, this returns true\n// when system is supposed to be on and pgood is in fact on, this returns true\n// when system is supposed to be on and the pgood is actually off, this returns false\n\nThoughts?"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 685,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Good points, I was trying not to make the use of the method a double negative, but then I got lost in my own terminology. Method removed."
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "line": 103,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "can you perhaps clarify \"system power is on\" so it's clear it's not the psus power state?"
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "line": 103,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Good idea, parameter was removed."
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "line": 739,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "can you perhaps clarify \"system power is on\" so it's clear it's not the psus power state?\n\nalso typo \"pgo0d\""
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "line": 739,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Good idea, method was removed."
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "line": 740,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "maybe clarify \"true if chassis has power good or is not in a powered on state, false if pgood has failed\"?"
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "line": 740,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Good idea, method was removed."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 45,
                    "deletions": -17
                },
                {
                    "file": "phosphor-power-supply/test/power_supply_tests.cpp",
                    "type": "MODIFIED",
                    "insertions": 96,
                    "deletions": -96
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 168,
            "sizeDeletions": 115
        },
        {
            "number": 3,
            "revision": "036637a58e33ccffb47408eba2e646adbfbb6697",
            "parents": [
                "d28e1b07f0ac8ed0f07a9abe9787f152741432ab"
            ],
            "ref": "refs/changes/44/58844/3",
            "uploader": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "createdOn": 1669073487,
            "author": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 45,
                    "deletions": -17
                },
                {
                    "file": "phosphor-power-supply/test/power_supply_tests.cpp",
                    "type": "MODIFIED",
                    "insertions": 96,
                    "deletions": -96
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 168,
            "sizeDeletions": 115
        },
        {
            "number": 4,
            "revision": "51c7641ecd160d065f84c0b88fb7ba853bbd2e3e",
            "parents": [
                "a714f54b3c9610369ca94fd718f3ba6383e46a4b"
            ],
            "ref": "refs/changes/44/58844/4",
            "uploader": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "createdOn": 1669079894,
            "author": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 45,
                    "deletions": -17
                },
                {
                    "file": "phosphor-power-supply/test/power_supply_tests.cpp",
                    "type": "MODIFIED",
                    "insertions": 96,
                    "deletions": -96
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 168,
            "sizeDeletions": 115
        },
        {
            "number": 5,
            "revision": "377fbfb9d9722365e2691830a07c4b16906670b0",
            "parents": [
                "1530024a810f1853019b7cff2f9a8c23c8567429"
            ],
            "ref": "refs/changes/44/58844/5",
            "uploader": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "createdOn": 1669244061,
            "author": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 257,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "I'm not sure if we need the acFault code based on the INPUT bit as well.  I need to think about that some more..."
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 257,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Ya, I'll take reviewer suggestions for improvement here. FWIW, the current brownout code only uses the VinUV fault bit and in my limited observations the input fault bit and the VinUV fault bit have moved together."
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 257,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "ok I think it's fine as is - just basing it off the VinUV bit, thanks."
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 257,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Ack"
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "line": 698,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "nit spelling \"decremented\""
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "line": 698,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 29,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 30,
                    "deletions": -18
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": -2
                },
                {
                    "file": "phosphor-power-supply/psu_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "type": "MODIFIED",
                    "insertions": 17,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 96,
            "sizeDeletions": 20
        },
        {
            "number": 6,
            "revision": "8baf4fc79c43d288f966b90ef5ba6e4bf24f920f",
            "parents": [
                "1530024a810f1853019b7cff2f9a8c23c8567429"
            ],
            "ref": "refs/changes/44/58844/6",
            "uploader": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "createdOn": 1669736806,
            "author": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 26,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "This is an excellent description of a complex issue/fix."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 26,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Ack"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 207,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "Should acFault be set to 0 here since a new PSU was plugged in?"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 207,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "I was thinking no, because the PSU has to be unplugged from AC to added to the system, it will start in AC fault which should expire naturally."
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 207,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Marking resolved."
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 524,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "nit. same typo, sorry I didn't catch it last time"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 524,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Done"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 617,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "nit. same typo, sorry I didn't catch it last time."
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 617,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "It is unfortunate this has to be in two places.  I wish the analyze*() methods were called all the time vs. only when statusWord was non-zero.  I think it would simplify some stuff.  However, that is the existing design and not related to this commit."
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 617,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Done"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 617,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Agreed, opportunities for improvement remain."
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 617,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Marking resolved."
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 774,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "Do we need to set acFault to 0 here since a new PSU was plugged?"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 774,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "I was thinking no, because the PSU has to be unplugged from AC to added to the system, it will start in AC fault which should expire naturally."
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 774,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Marking resolved."
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 810,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "I wonder why this code path doesn't have to clear fault faults?"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 810,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "It's only called from the constructor, so no poll to set faults yet."
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 810,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Marking resolved."
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "line": 49,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "since we have to check if every present psu either is reporting an ac loss (based on acFault, not DEGLITCH_LIMIT) OR a pgood fail (based on PGOOD_FAIL_LIMIT in hasPgoodFault()) in case the psu just reports the pgood fail during a brownout, we have to make sure AC_FAULT_LIMIT is greater than PGOOD_DEGLITCH_LIMIT, as you have above.\nCan you please add a comment so if in the future we adjust PGOOD_DEGLITCH_LIMIT for whatever reason, we don't inadvertently break PLD/APR if we don't bump up AC_FAULT_LIMIT accordingly?"
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "line": 49,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Done"
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "line": 699,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "Grammar Nit: Need a verb for this sentence.  s/forming/forms/"
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "line": 699,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Done"
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 109,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "The pseq code waits for a period of time for the pgood to be true right?\n\nIf the PSU app is started (or re-started) during that wait, would it incorrectly set powerFaultOccurring to true here?"
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 109,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "That's correct, there's a window in the power on transition where the state is set but the pgood has not yet come on.\n\nThe power supply application should not be starting or restarting during a power on. That would be a problem by itself.\n\nWe could default powerFaultOccurring to false here. That would be more of a tradeoff than a fix.\n\nI'd recommend not trying to figure out that the PSEQ is in a power on transition due to the complexity involved and it being a moving target.\n\nWe use powerFaultOccurring as part of the criteria to allow a brownout error to be issued and as part of the criteria to suppress fan and pgood PSU errors from being issued, so the consequence of it being temporarily wrong are not critically severe."
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 109,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Marking resolved."
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 608,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "you may have mentioned this before, but what is max time for powerFaultOccurring to be accurate, was it within 3 seconds?\n\nwill 'powerOn' still be on the whole 3 seconds, when will that get cleared?"
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 608,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Correct, up to 3 seconds for the pgood fail to be recognized and powerFaultOccurring to be set.\n\npowerOn will be on the whole time. It will not be false until the power state change is requested."
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 608,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Marking resolved."
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 610,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "since the present/vin checking was moved to the isBrownout() function, what is \"additional data\" being used for now?  does the lib just default it to an empty string?"
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 610,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Right now it's an empty set for the brownout error, so no extra name-value pairs will be put in the user data section. I could add anything we think could be useful."
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 610,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "The default map ctor used on line 604 will result in an empty map with no keys/values.  So it shouldn't cause any problems.\n\nHowever Jim, do you think we want a count of the following for debug?\n* number of PSUs with an AC fault\n* number of PSUs with a PGOOD fault\n* number of PSUs that are not present\n\nIf so, isBrownout() could be enhanced to take additionalData as input and set the keys/values appropriately."
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 610,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 29,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 30,
                    "deletions": -18
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": -2
                },
                {
                    "file": "phosphor-power-supply/psu_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "type": "MODIFIED",
                    "insertions": 17,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 96,
            "sizeDeletions": 20
        },
        {
            "number": 7,
            "revision": "4ab865643da0e93fcd91949d13d6190416d382f8",
            "parents": [
                "1530024a810f1853019b7cff2f9a8c23c8567429"
            ],
            "ref": "refs/changes/44/58844/7",
            "uploader": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "createdOn": 1669851337,
            "author": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 29,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 46,
                    "deletions": -18
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": -2
                },
                {
                    "file": "phosphor-power-supply/psu_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 115,
            "sizeDeletions": 20
        }
    ]
}