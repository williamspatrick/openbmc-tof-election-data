{
    "project": "openbmc/bmcweb",
    "branch": "master",
    "id": "Ib32cac967bde487b137ceaf845dfb682e605a175",
    "number": 74731,
    "subject": "event logs: introduce struct DbusEventLogEntry",
    "owner": {
        "name": "Alexander",
        "email": "alexander.hansen@9elements.com",
        "username": "pointbazaar"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/bmcweb/+/74731",
    "hashtags": [],
    "createdOn": 1726742067,
    "lastUpdated": 1727102558,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1726742067,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1726742100,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1726742100,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1726742726,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/92003/ : FAILURE"
        },
        {
            "timestamp": 1726743308,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Uploaded patch set 2.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1726743335,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1726743335,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1726744672,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/92008/ : SUCCESS"
        },
        {
            "timestamp": 1726746290,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Patch Set 2:\n\nThis change is ready for review."
        },
        {
            "timestamp": 1726774400,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1726821030,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1726821046,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1726821046,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1726822389,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/92055/ : SUCCESS"
        },
        {
            "timestamp": 1726822772,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1726846230,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3: Code-Review-1\n\n(3 comments)"
        },
        {
            "timestamp": 1726847202,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1727081894,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Uploaded patch set 4.\n\nOutdated Votes:\n* Code-Review-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE OR changekind:TRIVIAL_REBASE OR is:MIN\")\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1727081931,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1727081931,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1727081961,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/92128/ : FAILURE"
        },
        {
            "timestamp": 1727082129,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Uploaded patch set 5.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1727082167,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1727082167,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1727083493,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/92129/ : SUCCESS"
        },
        {
            "timestamp": 1727084555,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Patch Set 5:\n\n(3 comments)"
        },
        {
            "timestamp": 1727102553,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 5: Code-Review+2\n\n(1 comment)"
        },
        {
            "timestamp": 1727102558,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Change has been successfully rebased and submitted as 262dcc1ca87af630218644204fc6948f7f592b9f"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "376bc8fafebed4a112f24741ca887406ef82b44a",
            "parents": [
                "8812e8becaf44d810e68ed80692c2797b2f114ac"
            ],
            "ref": "refs/changes/31/74731/1",
            "uploader": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "createdOn": 1726742067,
            "author": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/dbus_event_log_entry.hpp",
                    "type": "ADDED",
                    "insertions": 49,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/log_services.hpp",
                    "type": "MODIFIED",
                    "insertions": 17,
                    "deletions": -35
                }
            ],
            "sizeInsertions": 87,
            "sizeDeletions": 35
        },
        {
            "number": 2,
            "revision": "1b69199242b9742db32426619fbf313096d1bc39",
            "parents": [
                "8812e8becaf44d810e68ed80692c2797b2f114ac"
            ],
            "ref": "refs/changes/31/74731/2",
            "uploader": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "createdOn": 1726743308,
            "author": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "redfish-core/include/dbus_event_log_entry.hpp",
                    "line": 0,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gunnar@gmills.xyz",
                        "username": "gtmills"
                    },
                    "message": "Could also be in utils/ https://github.com/openbmc/bmcweb/tree/master/redfish-core/include/utils \nbut I think this is fine here."
                },
                {
                    "file": "redfish-core/include/dbus_event_log_entry.hpp",
                    "line": 0,
                    "reviewer": {
                        "name": "Alexander",
                        "email": "alexander.hansen@9elements.com",
                        "username": "pointbazaar"
                    },
                    "message": "moved it there \ud83d\udc4d"
                },
                {
                    "file": "redfish-core/include/dbus_event_log_entry.hpp",
                    "line": 29,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gunnar@gmills.xyz",
                        "username": "gtmills"
                    },
                    "message": "Why only some of these?\n\n    uint32_t id = 0;\n    uint64_t timestamp = 0;\n    uint64_t updateTimestamp = 0;\n    std::string severity;\n    std::string message;\n    const std::string* filePath = nullptr;\n    const std::string* resolution = nullptr;\n    bool resolved = false;\n    std::string notify;\n\nwas the old code"
                },
                {
                    "file": "redfish-core/include/dbus_event_log_entry.hpp",
                    "line": 29,
                    "reviewer": {
                        "name": "Alexander",
                        "email": "alexander.hansen@9elements.com",
                        "username": "pointbazaar"
                    },
                    "message": "Added the initialization for the other struct members where it is required.\nFor the strings it should not be required."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/dbus_event_log_entry.hpp",
                    "type": "ADDED",
                    "insertions": 49,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/log_services.hpp",
                    "type": "MODIFIED",
                    "insertions": 17,
                    "deletions": -35
                }
            ],
            "sizeInsertions": 87,
            "sizeDeletions": 35
        },
        {
            "number": 3,
            "revision": "a3cdeb5f427e2b68d37255e71e66b4d5b54831f1",
            "parents": [
                "8812e8becaf44d810e68ed80692c2797b2f114ac"
            ],
            "ref": "refs/changes/31/74731/3",
            "uploader": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "createdOn": 1726821030,
            "author": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 17,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Would it make sense to have a unit test for fillEventLogLogEntryFromPropertyMap?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 17,
                    "reviewer": {
                        "name": "Alexander",
                        "email": "alexander.hansen@9elements.com",
                        "username": "pointbazaar"
                    },
                    "message": "We are just taking the values from the dbus interface. As long as that's documented in pdi, and the data types match, it should be good.\n\nStuff like this would be a great use-case for generated code. Just generate the code from the dbus interface yaml, boom, typesafe dbus access.\n\nSo i don't see much value in a unit test here but taking a dependency on pdi and using the code generation it provides would improve the safety."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 17,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> We are just taking the values from the dbus interface. As long as that's documented in pdi, and the data types match, it should be good.\n> \n> Stuff like this would be a great use-case for generated code. Just generate the code from the dbus interface yaml, boom, typesafe dbus access.\n\nTo my understanding PDI doesn't support the \"Don't require that newly added parameters exist on the interface\" support that we need to stay compatible with multiple backends.  Certainly is something we can discuss with Patrick.\n\n\n> \n> So i don't see much value in a unit test here but taking a dependency on pdi and using the code generation it provides would improve the safety.\n\nWe disagree about the value in unit tests here,. but that's fine.  We have plenty of other code in here that isn't unit tested"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Overall looks good.  Just a couple duplicated inits that need cleaned up and a couple minor interface changes then this should be good."
                },
                {
                    "file": "redfish-core/include/utils/dbus_event_log_entry.hpp",
                    "line": 15,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "generally we would do \"= 0\" because it's more clear.\n\nsame thing with the pointers we'd do = nullptr."
                },
                {
                    "file": "redfish-core/include/utils/dbus_event_log_entry.hpp",
                    "line": 15,
                    "reviewer": {
                        "name": "Alexander",
                        "email": "alexander.hansen@9elements.com",
                        "username": "pointbazaar"
                    },
                    "message": "Agree. '{}' is just what clang-tidy suggested to me so i assumed that that's how it should be."
                },
                {
                    "file": "redfish-core/include/utils/dbus_event_log_entry.hpp",
                    "line": 26,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Could we instead just return a std::optional<DbusEventLogEntry> ?\n\nI think that avoids a lot of the duplicated variable init below if we do that, because the variables are already initted in the struct itself."
                },
                {
                    "file": "redfish-core/include/utils/dbus_event_log_entry.hpp",
                    "line": 26,
                    "reviewer": {
                        "name": "Alexander",
                        "email": "alexander.hansen@9elements.com",
                        "username": "pointbazaar"
                    },
                    "message": "yes."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/log_services.hpp",
                    "type": "MODIFIED",
                    "insertions": 17,
                    "deletions": -35
                },
                {
                    "file": "redfish-core/include/utils/dbus_event_log_entry.hpp",
                    "type": "ADDED",
                    "insertions": 52,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 90,
            "sizeDeletions": 35
        },
        {
            "number": 4,
            "revision": "35e66a6b3eabc147e7bd30d8295885d133f2056a",
            "parents": [
                "8812e8becaf44d810e68ed80692c2797b2f114ac"
            ],
            "ref": "refs/changes/31/74731/4",
            "uploader": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "createdOn": 1727081894,
            "author": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/log_services.hpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": -36
                },
                {
                    "file": "redfish-core/include/utils/dbus_event_log_entry.hpp",
                    "type": "ADDED",
                    "insertions": 52,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 92,
            "sizeDeletions": 36
        },
        {
            "number": 5,
            "revision": "1a1227185d6ca0b6fd437a723a7af5f867eca10a",
            "parents": [
                "8812e8becaf44d810e68ed80692c2797b2f114ac"
            ],
            "ref": "refs/changes/31/74731/5",
            "uploader": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "createdOn": 1727082129,
            "author": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/log_services.hpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": -36
                },
                {
                    "file": "redfish-core/include/utils/dbus_event_log_entry.hpp",
                    "type": "ADDED",
                    "insertions": 52,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 92,
            "sizeDeletions": 36
        },
        {
            "number": 6,
            "revision": "262dcc1ca87af630218644204fc6948f7f592b9f",
            "parents": [
                "878edd599b1706ec8ffe6c3d81ba7cb3534f6393"
            ],
            "ref": "refs/changes/31/74731/6",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1727102558,
            "author": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/log_services.hpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": -36
                },
                {
                    "file": "redfish-core/include/utils/dbus_event_log_entry.hpp",
                    "type": "ADDED",
                    "insertions": 52,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 92,
            "sizeDeletions": 36
        }
    ]
}