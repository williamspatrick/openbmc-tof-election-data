{
    "project": "openbmc/phosphor-pid-control",
    "branch": "master",
    "id": "Ie98b7cc52dfa4e8879ce9a953c8453f3a25047d3",
    "number": 74780,
    "subject": "Add manual mode handling",
    "owner": {
        "name": "Eric Yang",
        "email": "eric.yang.wiwynn@gmail.com",
        "username": "fornchu110"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-pid-control/+/74780",
    "hashtags": [],
    "createdOn": 1727061579,
    "lastUpdated": 1730858628,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1727061579,
            "reviewer": {
                "name": "Eric Yang",
                "email": "eric.yang.wiwynn@gmail.com",
                "username": "fornchu110"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1727061615,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1727061615,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1727061636,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/92101/ : FAILURE"
        },
        {
            "timestamp": 1727062861,
            "reviewer": {
                "name": "Eric Yang",
                "email": "eric.yang.wiwynn@gmail.com",
                "username": "fornchu110"
            },
            "message": "Uploaded patch set 2: Commit message was updated.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1727062914,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1727062914,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1727062932,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/92108/ : FAILURE"
        },
        {
            "timestamp": 1727068088,
            "reviewer": {
                "name": "Eric Yang",
                "email": "eric.yang.wiwynn@gmail.com",
                "username": "fornchu110"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1727068130,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1727068130,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1727068196,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/92110/ : FAILURE"
        },
        {
            "timestamp": 1727071938,
            "reviewer": {
                "name": "Eric Yang",
                "email": "eric.yang.wiwynn@gmail.com",
                "username": "fornchu110"
            },
            "message": "Uploaded patch set 4.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1727071984,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1727071985,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1727072049,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/92118/ : FAILURE"
        },
        {
            "timestamp": 1727079632,
            "reviewer": {
                "name": "Eric Yang",
                "email": "eric.yang.wiwynn@gmail.com",
                "username": "fornchu110"
            },
            "message": "Uploaded patch set 5.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1727079650,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1727079650,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1727079722,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/92124/ : FAILURE"
        },
        {
            "timestamp": 1727227796,
            "reviewer": {
                "name": "Eric Yang",
                "email": "eric.yang.wiwynn@gmail.com",
                "username": "fornchu110"
            },
            "message": "Set Ready For Review"
        },
        {
            "timestamp": 1727259296,
            "reviewer": {
                "name": "Eric Yang",
                "email": "eric.yang.wiwynn@gmail.com",
                "username": "fornchu110"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1727266938,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@gmail.com",
                "username": "Krellan"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1727348904,
            "reviewer": {
                "name": "Eric Yang",
                "email": "eric.yang.wiwynn@gmail.com",
                "username": "fornchu110"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1727433023,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@gmail.com",
                "username": "Krellan"
            },
            "message": "Patch Set 5:\n\n(3 comments)"
        },
        {
            "timestamp": 1727587447,
            "reviewer": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "message": "Patch Set 5: Code-Review+1\n\n(2 comments)"
        },
        {
            "timestamp": 1727587477,
            "reviewer": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "message": "Patch Set 5: -Code-Review\n\n(1 comment)"
        },
        {
            "timestamp": 1727718628,
            "reviewer": {
                "name": "ankita prasad",
                "email": "ankita.prasad@intel.com",
                "username": "ankitaprsad22"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1727779986,
            "reviewer": {
                "name": "Eric Yang",
                "email": "eric.yang.wiwynn@gmail.com",
                "username": "fornchu110"
            },
            "message": "Patch Set 5:\n\n(4 comments)"
        },
        {
            "timestamp": 1727906692,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@gmail.com",
                "username": "Krellan"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1728045692,
            "reviewer": {
                "name": "Eric Yang",
                "email": "eric.yang.wiwynn@gmail.com",
                "username": "fornchu110"
            },
            "message": "Patch Set 5:\n\n(2 comments)"
        },
        {
            "timestamp": 1728449799,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@gmail.com",
                "username": "Krellan"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1728469399,
            "reviewer": {
                "name": "Eric Yang",
                "email": "eric.yang.wiwynn@gmail.com",
                "username": "fornchu110"
            },
            "message": "Patch Set 6: Patch Set 5 was rebased on behalf of Eric Yang <eric.yang.wiwynn@gmail.com>\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1728469418,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1728469418,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: -Ok-To-Test"
        },
        {
            "timestamp": 1728469782,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/92976/ : SUCCESS"
        },
        {
            "timestamp": 1730149011,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 6: Code-Review-1\n\n(4 comments)"
        },
        {
            "timestamp": 1730201673,
            "reviewer": {
                "name": "Eric Yang",
                "email": "eric.yang.wiwynn@gmail.com",
                "username": "fornchu110"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1730357373,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@gmail.com",
                "username": "Krellan"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1730858628,
            "reviewer": {
                "name": "Eric Yang",
                "email": "eric.yang.wiwynn@gmail.com",
                "username": "fornchu110"
            },
            "message": "Set Work In Progress"
        }
    ],
    "wip": true,
    "patchSets": [
        {
            "number": 1,
            "revision": "b50ef8734421a1b3b797cac3d54a290accbc3342",
            "parents": [
                "bd63bcaca2ac9edf1778136cf240e3bbe8b31566"
            ],
            "ref": "refs/changes/80/74780/1",
            "uploader": {
                "name": "Eric Yang",
                "email": "eric.yang.wiwynn@gmail.com",
                "username": "fornchu110"
            },
            "createdOn": 1727061579,
            "author": {
                "name": "Eric Yang",
                "email": "eric.yang.wiwynn@gmail.com",
                "username": "fornchu110"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 32,
                    "deletions": 0
                },
                {
                    "file": "pid/zone.cpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": 0
                },
                {
                    "file": "main.cpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "pid/zone_interface.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -1
                },
                {
                    "file": "pid/manualmodemanager.hpp",
                    "type": "ADDED",
                    "insertions": 29,
                    "deletions": 0
                },
                {
                    "file": "pid/zone.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 91,
            "sizeDeletions": 1
        },
        {
            "number": 2,
            "revision": "1a1616b42a92d61ead54594a1b5f2700c907101b",
            "parents": [
                "bd63bcaca2ac9edf1778136cf240e3bbe8b31566"
            ],
            "ref": "refs/changes/80/74780/2",
            "uploader": {
                "name": "Eric Yang",
                "email": "eric.yang.wiwynn@gmail.com",
                "username": "fornchu110"
            },
            "createdOn": 1727062861,
            "author": {
                "name": "Eric Yang",
                "email": "eric.yang.wiwynn@gmail.com",
                "username": "fornchu110"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 33,
                    "deletions": 0
                },
                {
                    "file": "pid/zone.cpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": 0
                },
                {
                    "file": "main.cpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "pid/zone_interface.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -1
                },
                {
                    "file": "pid/manualmodemanager.hpp",
                    "type": "ADDED",
                    "insertions": 29,
                    "deletions": 0
                },
                {
                    "file": "pid/zone.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 92,
            "sizeDeletions": 1
        },
        {
            "number": 3,
            "revision": "2909c79f42f753224815cf97cb661b0c0d948a4a",
            "parents": [
                "bd63bcaca2ac9edf1778136cf240e3bbe8b31566"
            ],
            "ref": "refs/changes/80/74780/3",
            "uploader": {
                "name": "Eric Yang",
                "email": "eric.yang.wiwynn@gmail.com",
                "username": "fornchu110"
            },
            "createdOn": 1727068088,
            "author": {
                "name": "Eric Yang",
                "email": "eric.yang.wiwynn@gmail.com",
                "username": "fornchu110"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 33,
                    "deletions": 0
                },
                {
                    "file": "pid/zone.cpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "main.cpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "pid/zone_interface.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -1
                },
                {
                    "file": "pid/manualmodemanager.hpp",
                    "type": "ADDED",
                    "insertions": 32,
                    "deletions": 0
                },
                {
                    "file": "pid/zone.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 104,
            "sizeDeletions": 1
        },
        {
            "number": 4,
            "revision": "da7dc6e92b9cc88d217d6999ae7d168c054daf30",
            "parents": [
                "bd63bcaca2ac9edf1778136cf240e3bbe8b31566"
            ],
            "ref": "refs/changes/80/74780/4",
            "uploader": {
                "name": "Eric Yang",
                "email": "eric.yang.wiwynn@gmail.com",
                "username": "fornchu110"
            },
            "createdOn": 1727071938,
            "author": {
                "name": "Eric Yang",
                "email": "eric.yang.wiwynn@gmail.com",
                "username": "fornchu110"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 33,
                    "deletions": 0
                },
                {
                    "file": "pid/zone.cpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "main.cpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "pid/zone_interface.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "pid/manualmodemanager.hpp",
                    "type": "ADDED",
                    "insertions": 32,
                    "deletions": 0
                },
                {
                    "file": "pid/zone.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 104,
            "sizeDeletions": 0
        },
        {
            "number": 5,
            "revision": "dbffdb877694e8d8c0810e0ab500e456c0f4e263",
            "parents": [
                "bd63bcaca2ac9edf1778136cf240e3bbe8b31566"
            ],
            "ref": "refs/changes/80/74780/5",
            "uploader": {
                "name": "Eric Yang",
                "email": "eric.yang.wiwynn@gmail.com",
                "username": "fornchu110"
            },
            "createdOn": 1727079632,
            "author": {
                "name": "Eric Yang",
                "email": "eric.yang.wiwynn@gmail.com",
                "username": "fornchu110"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 31,
                    "reviewer": {
                        "name": "Arun Lal K M",
                        "email": "arun.lal@intel.com",
                        "username": "arunlalkm-intel"
                    },
                    "message": "Tested section?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 31,
                    "reviewer": {
                        "name": "Eric Yang",
                        "email": "eric.yang.wiwynn@gmail.com",
                        "username": "fornchu110"
                    },
                    "message": "Would it be okay if I attach the manual mode status and the phosphor-pid-control logs before and after the changes, following the server board being unplugged and plugged back in?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Eric Yang",
                        "email": "eric.yang.wiwynn@gmail.com",
                        "username": "fornchu110"
                    },
                    "message": "Currently, the CI has failed with the following summary of failures:\n\n10/14 pid_thermalcontroller_unittest  FAIL             0.89s   exit status 1  \n12/14 dbus_passive_unittest           FAIL             1.39s   exit status 1  \n13/14 sensor_host_unittest            FAIL             1.79s   exit status 1  \n14/14 pid_zone_unittest               FAIL             2.14s   exit status 1  \n\nOk:                 10  \nExpected Fail:      0   \nFail:               4   \nUnexpected Pass:    0   \nSkipped:            0   \nTimeout:            0\n\nThe main issue seems to be:  \n**Conditional jump or move depends on uninitialized value(s)**.  \nHowever, this doesn't appear to be related to my changes.\nCould the Verify failure be caused by a rebuild of other parts of the code?\n\nThanks!"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@gmail.com",
                        "username": "Krellan"
                    },
                    "message": "This is true. It commonly happens. Old code, which passed old CI tests, now fails new CI tests, but the underlying code has not changed. Reason is, the CI testing framework itself undergoes continuous improvements. It becomes smarter, and more capable of catching bad coding practices, than it was earlier. So, it can happen that your patch introduces a CI failure, simply because it has been a long time since this code was last tested with CI, since CI only runs when a newly written patch is uploaded.\n\nThe workaround is to first make appropriate changes to the code to fix the CI errors and get the CI to now pass cleanly. It is encouraged to put these fixes in another patch, as they serve separate purposes. Then, rebase this existing patch, so that it is on top of that new patch. Then, the patch stack should all cleanly pass the CI."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Eric Yang",
                        "email": "eric.yang.wiwynn@gmail.com",
                        "username": "fornchu110"
                    },
                    "message": "Thank you very much for your suggestion. I will try to fix the code causing the CI failure.\n\nHowever, I would like to ask if the way I am currently modifying the manual code complies with the standards, and if there are any adjustments that need to be made.\nI really appreciate your advice."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@gmail.com",
                        "username": "Krellan"
                    },
                    "message": "I looked at it more. It does seem like it is a lot of code to basically perform one task: stretch the lifetime of the `manual` mode flag within each zone's data structure, so that it can survive when a configuration change happens that causes the structures to get destroyed and then rebuilt. The zone ID number is used as the invariant, to match each zone up afterwards. Do zone ID numbers ever change? What if a zone is added or removed at runtime?\n\nThat said, the code looks good so far, other than a concern about using `dynamic_cast`, as it relies on compiler RTTI, and I'm not sure if we're using RTTI for this project or not (I would prefer to not use it, if possible, unless we are already using it). When it's ready, we will also need to add test cases to test this new feature."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Arun Lal K M",
                        "email": "arun.lal@intel.com",
                        "username": "arunlalkm-intel"
                    },
                    "message": "Looks good to me."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Arun Lal K M",
                        "email": "arun.lal@intel.com",
                        "username": "arunlalkm-intel"
                    },
                    "message": "Fix the build issues"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Eric Yang",
                        "email": "eric.yang.wiwynn@gmail.com",
                        "username": "fornchu110"
                    },
                    "message": "Done"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@gmail.com",
                        "username": "Krellan"
                    },
                    "message": "Patch https://gerrit.openbmc.org/c/openbmc/phosphor-pid-control/+/75077 will fix the CI problems. Then, we can place this change on top of that when it gets submitted."
                },
                {
                    "file": "main.cpp",
                    "line": 136,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@gmail.com",
                        "username": "Krellan"
                    },
                    "message": "Could state::zones ever contain something that is not a DbusPidZone object? Using dynamic_cast could invoke RTTI. Is RTTI enabled for phosphor-pid-control? I didn't think that it was. I wonder if there's a different way to do this? Generally, dynamic_cast is considered a code smell, and I feel uneasy about it."
                },
                {
                    "file": "main.cpp",
                    "line": 136,
                    "reviewer": {
                        "name": "Eric Yang",
                        "email": "eric.yang.wiwynn@gmail.com",
                        "username": "fornchu110"
                    },
                    "message": "Thank you very much for your suggestion.\nWould it be better to access the zone directly using static_pointer_cast instead of using dynamic_pointer_cast?\nI'll first try to avoid dynamic_pointer_cast and explore other approaches."
                },
                {
                    "file": "main.cpp",
                    "line": 136,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@gmail.com",
                        "username": "Krellan"
                    },
                    "message": "Using `static_pointer_cast` should be fine, as it should not invoke RTTI.\n\nIs it ever possible for `state::zones` to contain a zone that is not of type `DbusPidZone`?"
                },
                {
                    "file": "main.cpp",
                    "line": 136,
                    "reviewer": {
                        "name": "Eric Yang",
                        "email": "eric.yang.wiwynn@gmail.com",
                        "username": "fornchu110"
                    },
                    "message": "Thank you for your suggestion. I will switch to static_pointer_cast and check if it\u2019s ever possible for state::zones to contain a zone that is not of type DbusPidZone.\n\nI will keep you updated as I make progress.\nThanks again!"
                },
                {
                    "file": "main.cpp",
                    "line": 191,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@gmail.com",
                        "username": "Krellan"
                    },
                    "message": "Same comment as above about the usage of dynamic_cast."
                },
                {
                    "file": "main.cpp",
                    "line": 191,
                    "reviewer": {
                        "name": "Eric Yang",
                        "email": "eric.yang.wiwynn@gmail.com",
                        "username": "fornchu110"
                    },
                    "message": "Done"
                },
                {
                    "file": "pid/zone.hpp",
                    "line": 76,
                    "reviewer": {
                        "name": "ankita prasad",
                        "email": "ankita.prasad@intel.com",
                        "username": "ankitaprsad22"
                    },
                    "message": "where is it getting used?"
                },
                {
                    "file": "pid/zone.hpp",
                    "line": 76,
                    "reviewer": {
                        "name": "Eric Yang",
                        "email": "eric.yang.wiwynn@gmail.com",
                        "username": "fornchu110"
                    },
                    "message": "In line 136 of main.cpp, the beginning of restartControlLoops stores the current manual mode status (true or false) of the zone, and restores it after buildZones is called."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 33,
                    "deletions": 0
                },
                {
                    "file": "pid/zone.cpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "main.cpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "pid/zone_interface.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "pid/manualmodemanager.hpp",
                    "type": "ADDED",
                    "insertions": 32,
                    "deletions": 0
                },
                {
                    "file": "test/zone_mock.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                },
                {
                    "file": "pid/zone.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 106,
            "sizeDeletions": 0
        },
        {
            "number": 6,
            "revision": "61e25e98253e1191d9f6dfe46431dfc41cd2d691",
            "parents": [
                "1b3b7304d6cd78f44f39a5d54c1dc0ab3e1cf93d"
            ],
            "ref": "refs/changes/80/74780/6",
            "uploader": {
                "name": "Eric Yang",
                "email": "eric.yang.wiwynn@gmail.com",
                "username": "fornchu110"
            },
            "createdOn": 1728469399,
            "author": {
                "name": "Eric Yang",
                "email": "eric.yang.wiwynn@gmail.com",
                "username": "fornchu110"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "main.cpp",
                    "line": 136,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "You still have these ugly dynamic_pointer_casts, which might not even be the real type of the Zone.  The Zone is written as an abstract class but you're casting to a specialization.  Please don't do this.\n\nI would suggest we rewrite this such that the Zones are always aware of a \"manual-mode-manager\".  On construction, they should get their manual-mode from the manager.  On set to the manual-mode property, they should update the manager.\n\nThis would get rid of the dynamic cast and the frail state management going on here."
                },
                {
                    "file": "main.cpp",
                    "line": 136,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@gmail.com",
                        "username": "Krellan"
                    },
                    "message": "Good point. I agree with your design."
                },
                {
                    "file": "pid/manualmodemanager.hpp",
                    "line": 13,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "My opinion is that this is named too verbose.  `set` and `get` would be sufficient.  The class is already named `ManualModeManager` so you don't need `ManualMode` on all the function names in it."
                },
                {
                    "file": "pid/zone.cpp",
                    "line": 102,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "This is emitting a signal, but it shouldn't because we're just restoring the old value, right?  Ideally this would be done in the constructor anyhow so that the value is set correct from the beginning."
                },
                {
                    "file": "pid/zone_interface.hpp",
                    "line": 104,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Why did you even bother with the dynamic_cast if you also put it as a virtual function on the interface?"
                },
                {
                    "file": "pid/zone_interface.hpp",
                    "line": 104,
                    "reviewer": {
                        "name": "Eric Yang",
                        "email": "eric.yang.wiwynn@gmail.com",
                        "username": "fornchu110"
                    },
                    "message": "Understood. I apologize for not having made these modifications and validations yet."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 33,
                    "deletions": 0
                },
                {
                    "file": "pid/zone.cpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "main.cpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "pid/zone_interface.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "pid/manualmodemanager.hpp",
                    "type": "ADDED",
                    "insertions": 32,
                    "deletions": 0
                },
                {
                    "file": "test/zone_mock.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                },
                {
                    "file": "pid/zone.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 106,
            "sizeDeletions": 0
        }
    ]
}