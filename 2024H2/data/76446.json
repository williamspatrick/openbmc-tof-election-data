{
    "project": "openbmc/docs",
    "branch": "master",
    "id": "Ic65ee87aca905427cd3affcdd59bc88e7ce50e89",
    "number": 76446,
    "subject": "HttpLibrary: Library for enabling capabilities",
    "owner": {
        "name": "Abhilash Raju",
        "email": "abhilash.kollam@gmail.com",
        "username": "abhilashraju"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/docs/+/76446",
    "hashtags": [],
    "createdOn": 1733896147,
    "lastUpdated": 1733926936,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1733896147,
            "reviewer": {
                "name": "Abhilash Raju",
                "email": "abhilash.kollam@gmail.com",
                "username": "abhilashraju"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1733896170,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1733896170,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1733896190,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/96273/ : FAILURE"
        },
        {
            "timestamp": 1733896846,
            "reviewer": {
                "name": "Abhilash Raju",
                "email": "abhilash.kollam@gmail.com",
                "username": "abhilashraju"
            },
            "message": "Uploaded patch set 2.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1733896875,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1733896881,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1733896900,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/96275/ : FAILURE"
        },
        {
            "timestamp": 1733920159,
            "reviewer": {
                "name": "Abhilash Raju",
                "email": "abhilash.kollam@gmail.com",
                "username": "abhilashraju"
            },
            "message": "Patch Set 2:\n\n(5 comments)"
        },
        {
            "timestamp": 1733926936,
            "reviewer": {
                "name": "Abhilash Raju",
                "email": "abhilash.kollam@gmail.com",
                "username": "abhilashraju"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "6a4f9450074002fe6a5370fd0f07ae0a81e24a16",
            "parents": [
                "14954fc8fb711df2272abd9941b8dad9622bfde7"
            ],
            "ref": "refs/changes/46/76446/1",
            "uploader": {
                "name": "Abhilash Raju",
                "email": "abhilash.kollam@gmail.com",
                "username": "abhilashraju"
            },
            "createdOn": 1733896147,
            "author": {
                "name": "Abhilash Raju",
                "email": "abhilash.kollam@gmail.com",
                "username": "abhilashraju"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "designs/http_library.md",
                    "type": "ADDED",
                    "insertions": 213,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 232,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "4371d5e7e12750cfa162c491abafd0d153484d49",
            "parents": [
                "14954fc8fb711df2272abd9941b8dad9622bfde7"
            ],
            "ref": "refs/changes/46/76446/2",
            "uploader": {
                "name": "Abhilash Raju",
                "email": "abhilash.kollam@gmail.com",
                "username": "abhilashraju"
            },
            "createdOn": 1733896846,
            "author": {
                "name": "Abhilash Raju",
                "email": "abhilash.kollam@gmail.com",
                "username": "abhilashraju"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Abhilash Raju",
                        "email": "abhilash.kollam@gmail.com",
                        "username": "abhilashraju"
                    },
                    "message": "Copied some of the comments applicable to new doc here."
                },
                {
                    "file": "designs/http_library.md",
                    "line": 65,
                    "reviewer": {
                        "name": "Abhilash Raju",
                        "email": "abhilash.kollam@gmail.com",
                        "username": "abhilashraju"
                    },
                    "message": "From williamspatrick: But elsewhere you said you were using Boost and sdbusplus and ... ?  What do you really mean by this statement?\n\nReply : I meant a new external dependency. OpenBMC already relies on Boost and sdbusplus."
                },
                {
                    "file": "designs/http_library.md",
                    "line": 65,
                    "reviewer": {
                        "name": "Abhilash Raju",
                        "email": "abhilash.kollam@gmail.com",
                        "username": "abhilashraju"
                    },
                    "message": "Please read it as \"no now dependency\""
                },
                {
                    "file": "designs/http_library.md",
                    "line": 79,
                    "reviewer": {
                        "name": "Abhilash Raju",
                        "email": "abhilash.kollam@gmail.com",
                        "username": "abhilashraju"
                    },
                    "message": "From williamspatrick: None of this code is using the sdbusplus coroutine APIs.  I'm rather confused by this reference considering this code:\\n\\nhttps://github.com/abhilashraju/coroserver/blob/18ac6a7d3ca2b0ec31393fcffeccd9b22b66b526/include/sdbus_calls.hpp#L84\n\nReply : Currently, the sdbusplus APIs have limitations. They only support stackful coroutines using yield_context from Boost.Asio. If we want to use C++ stackless coroutines, we need to rely on sdbusplus::context. However, I don't see a way to use both boost::asio::context and sdbusplus::context without spawning a separate thread. The design is assumed to target simple single-threaded asynchronous applications.\nThis implementation is intended as a reference to address the current limitations in sdbusplus. I hope these issues will be resolved in future updates to sdbusplus."
                },
                {
                    "file": "designs/http_library.md",
                    "line": 151,
                    "reviewer": {
                        "name": "Abhilash Raju",
                        "email": "abhilash.kollam@gmail.com",
                        "username": "abhilashraju"
                    },
                    "message": "From williamspatrick: This seems to be a strange statement to me.  Usually a *library* is written with sender/receivers (because it can be more efficient than co-routines) but any proper sender/receiver implementation should trivially be consumable by a co-routine based implementation.  The applications can be written with co-routines _or_ sender/receivers, but the library is done with sender/receivers exclusively.\n\nReply : I may need to rewrite this part. My intention was to say there's no need to introduce a dependency on the sender/receiver library in the HTTP library. If an application using the HTTP library wants to leverage senders/receivers, it can do so independently, as you've already mentioned it's possible.\n\nI don't see any strong justification for using senders/receivers in the development of the HTTP library. However, if you believe using them would make the APIs easier to use, I'm okay with it. Personally, I find that senders/receivers introduce a steep learning curve for developers. My main proposal is to design an HTTP library that fits well within the OpenBMC ecosystem."
                },
                {
                    "file": "designs/http_library.md",
                    "line": 153,
                    "reviewer": {
                        "name": "Abhilash Raju",
                        "email": "abhilash.kollam@gmail.com",
                        "username": "abhilashraju"
                    },
                    "message": "From williamspatrick: Boost/ASIO already supports sender/receivers.  https://www.boost.org/doc/libs/1_76_0/boost/asio/execution/sender.hpp\n\nWhat would a \"proven networking library\" look like?  stdexec, which is what the C++26 standard is all based on, can handle sockets.  Jagpal added support in sdbusplus for hooking sd_event-based file descriptors to sdbusplus/stdexec, which should also work for sockets.\n\nReply : Some time ago, when I looked into it, Boost.Asio didn\u2019t offer any support for senders/receivers. I attempted to create a library combining both, but it turned out to be overly complex. If you have an HTTP library with simpler APIs ready, I\u2019d be happy to discuss and compare. Simply mentioning that file descriptor support has been added doesn\u2019t change this perspective."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "designs/http_library.md",
                    "type": "ADDED",
                    "insertions": 214,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 233,
            "sizeDeletions": 0
        }
    ]
}