{
    "project": "openbmc/bmcweb",
    "branch": "master",
    "id": "Ibb6e6ee9f241c424bb78782466eb3199b11332c3",
    "number": 76972,
    "subject": "Fix out of range error when input non default registries",
    "owner": {
        "name": "tamng-ampere",
        "email": "tamnguyenchi@os.amperecomputing.com",
        "username": "tamng-ampere"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/bmcweb/+/76972",
    "hashtags": [],
    "createdOn": 1735268479,
    "lastUpdated": 1735851906,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1735268479,
            "reviewer": {
                "name": "tamng-ampere",
                "email": "tamnguyenchi@os.amperecomputing.com",
                "username": "tamng-ampere"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1735268535,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1:\n\nUser not approved, see admin, no CI"
        },
        {
            "timestamp": 1735320495,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1735548694,
            "reviewer": {
                "name": "tamng-ampere",
                "email": "tamnguyenchi@os.amperecomputing.com",
                "username": "tamng-ampere"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1735615015,
            "reviewer": {
                "name": "tamng-ampere",
                "email": "tamnguyenchi@os.amperecomputing.com",
                "username": "tamng-ampere"
            },
            "message": "Patch Set 2: Patch Set 1 was rebased"
        },
        {
            "timestamp": 1735615046,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2:\n\nUser not approved, see admin, no CI"
        },
        {
            "timestamp": 1735667628,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1735791795,
            "reviewer": {
                "name": "tamng-ampere",
                "email": "tamnguyenchi@os.amperecomputing.com",
                "username": "tamng-ampere"
            },
            "message": "Patch Set 3: Patch Set 2 was rebased"
        },
        {
            "timestamp": 1735791822,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3:\n\nUser not approved, see admin, no CI"
        },
        {
            "timestamp": 1735792439,
            "reviewer": {
                "name": "tamng-ampere",
                "email": "tamnguyenchi@os.amperecomputing.com",
                "username": "tamng-ampere"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1735792467,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4:\n\nUser not approved, see admin, no CI"
        },
        {
            "timestamp": 1735794481,
            "reviewer": {
                "name": "tamng-ampere",
                "email": "tamnguyenchi@os.amperecomputing.com",
                "username": "tamng-ampere"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1735851869,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1735851869,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 4: Code-Review+2"
        },
        {
            "timestamp": 1735851880,
            "reviewer": {
                "name": "tamng-ampere",
                "email": "tamnguyenchi@os.amperecomputing.com",
                "username": "tamng-ampere"
            },
            "message": "Patch Set 5: Patch Set 4 was rebased on behalf of Unrecognized Gerrit Account 1002315 <tamnguyenchi@os.amperecomputing.com>\n\nCopied Votes:\n* Code-Review+2 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE OR **changekind:TRIVIAL_REBASE** OR is:MIN\")\n"
        },
        {
            "timestamp": 1735851889,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 5: Verified+1"
        },
        {
            "timestamp": 1735851896,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Change has been successfully merged\n\n4 is the latest approved patch-set.\nNo files were changed between the latest approved patch-set and the submitted one.\n"
        },
        {
            "timestamp": 1735851906,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5:\n\nUser not approved, see admin, no CI"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "44d43d1d7ae635dfe57362efab8275a4d0dfebb3",
            "parents": [
                "a8a5bc1b74c86567be1cf7ddc6fc050621d20f52"
            ],
            "ref": "refs/changes/72/76972/1",
            "uploader": {
                "name": "tamng-ampere",
                "email": "tamnguyenchi@os.amperecomputing.com",
                "username": "tamng-ampere"
            },
            "createdOn": 1735268479,
            "author": {
                "name": "tamng-ampere",
                "email": "tamnguyenchi@os.amperecomputing.com",
                "username": "tamng-ampere"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "scripts/parse_registries.py",
                    "line": 792,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "These should really be some form of find to look for the correct registry.  Indexing was a bad idea.  If you don't want to fix it, I can."
                },
                {
                    "file": "scripts/parse_registries.py",
                    "line": 792,
                    "reviewer": {
                        "name": "tamng-ampere",
                        "email": "tamnguyenchi@os.amperecomputing.com",
                        "username": "tamng-ampere"
                    },
                    "message": "Thank for your feedback. I see we can remove indexing with `dict` and `zip`. I wanted to confirm is that what you were referring to.\n\n```python\n    registries_map = dict(zip(registries, files))\n    if dmtf_registries[0][0] in registries_map:\n        create_error_registry(\n            registries_map[dmtf_registries[0][0]], dmtf_registries[0][1], \"Base\", \"base\", \"error\"\n        )\n\n```"
                },
                {
                    "file": "scripts/parse_registries.py",
                    "line": 792,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "dmtf_registries needs to be converted into a dict, so we can just look up by name.  Probably an OrderedDics so we can maintain the alphabetical ordering."
                },
                {
                    "file": "scripts/parse_registries.py",
                    "line": 792,
                    "reviewer": {
                        "name": "tamng-ampere",
                        "email": "tamnguyenchi@os.amperecomputing.com",
                        "username": "tamng-ampere"
                    },
                    "message": "Turn out `zip` doesn't work becuase `files` and `registries` are not the same order. I updated to create registries_map while retrieving data from DTMF website.\n\nWe can also update it further by looping through dictionary like this:\n\n```\n    error_registries = {\n        \"base\": \"error\",\n        \"resource_event\": \"resource\",\n        \"heartbeat_event\": \"heartbeat\",\n        \"task_event\":\"task\"}\n    for registry, output_name in error_registries.items():\n        if registry not in registries_map:\n            continue\n        create_error_registry(\n            registries_map[registry],\n            dmtf_registries[registry],\n            to_pascal_case(registry),\n            registry,\n            output_name\n        )\n```"
                },
                {
                    "file": "scripts/parse_registries.py",
                    "line": 792,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "scripts/parse_registries.py",
                    "type": "MODIFIED",
                    "insertions": 28,
                    "deletions": -20
                }
            ],
            "sizeInsertions": 48,
            "sizeDeletions": 20
        },
        {
            "number": 2,
            "revision": "c2192bbce23173d41392d650519587926399a422",
            "parents": [
                "b437a535064719778cb6d33f1b2b6ad32e20b204"
            ],
            "ref": "refs/changes/72/76972/2",
            "uploader": {
                "name": "tamng-ampere",
                "email": "tamnguyenchi@os.amperecomputing.com",
                "username": "tamng-ampere"
            },
            "createdOn": 1735615015,
            "author": {
                "name": "tamng-ampere",
                "email": "tamnguyenchi@os.amperecomputing.com",
                "username": "tamng-ampere"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "scripts/parse_registries.py",
                    "type": "MODIFIED",
                    "insertions": 28,
                    "deletions": -20
                }
            ],
            "sizeInsertions": 48,
            "sizeDeletions": 20
        },
        {
            "number": 3,
            "revision": "ccfbca4a4a2b81a44e75fde059b8d735c8bd9737",
            "parents": [
                "3515fd14304099c3b9c8f206500de759e6464b49"
            ],
            "ref": "refs/changes/72/76972/3",
            "uploader": {
                "name": "tamng-ampere",
                "email": "tamnguyenchi@os.amperecomputing.com",
                "username": "tamng-ampere"
            },
            "createdOn": 1735791795,
            "author": {
                "name": "tamng-ampere",
                "email": "tamnguyenchi@os.amperecomputing.com",
                "username": "tamng-ampere"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "scripts/parse_registries.py",
                    "type": "MODIFIED",
                    "insertions": 28,
                    "deletions": -20
                }
            ],
            "sizeInsertions": 48,
            "sizeDeletions": 20
        },
        {
            "number": 4,
            "revision": "751e1b890094ff4a663bfa2e03cd6dfe31393aa3",
            "parents": [
                "3515fd14304099c3b9c8f206500de759e6464b49"
            ],
            "ref": "refs/changes/72/76972/4",
            "uploader": {
                "name": "tamng-ampere",
                "email": "tamnguyenchi@os.amperecomputing.com",
                "username": "tamng-ampere"
            },
            "createdOn": 1735792439,
            "author": {
                "name": "tamng-ampere",
                "email": "tamnguyenchi@os.amperecomputing.com",
                "username": "tamng-ampere"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "scripts/parse_registries.py",
                    "type": "MODIFIED",
                    "insertions": 31,
                    "deletions": -24
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 24
        },
        {
            "number": 5,
            "revision": "7e6d0323eadb9bfe4dc8db211dd5536fb8ef1763",
            "parents": [
                "38afdb919e17766b8ab8a36f5d1191c21b9be019"
            ],
            "ref": "refs/changes/72/76972/5",
            "uploader": {
                "name": "tamng-ampere",
                "email": "tamnguyenchi@os.amperecomputing.com",
                "username": "tamng-ampere"
            },
            "createdOn": 1735851880,
            "author": {
                "name": "tamng-ampere",
                "email": "tamnguyenchi@os.amperecomputing.com",
                "username": "tamng-ampere"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "scripts/parse_registries.py",
                    "type": "MODIFIED",
                    "insertions": 31,
                    "deletions": -24
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 24
        }
    ]
}