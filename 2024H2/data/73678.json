{
    "project": "openbmc/docs",
    "branch": "master",
    "id": "I9e50f5006fa3003db05b385db541566c4b73ed3c",
    "number": 73678,
    "subject": "design: BMC reboot cause event log",
    "owner": {
        "name": "Patrick NC Lin",
        "email": "patrick.nc.lin.wiwynn@gmail.com",
        "username": "PatrickLinww"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/docs/+/73678",
    "hashtags": [],
    "createdOn": 1724120280,
    "lastUpdated": 1726664780,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1724120280,
            "reviewer": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1724120306,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1724120306,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1724120330,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/90078/ : FAILURE"
        },
        {
            "timestamp": 1724120842,
            "reviewer": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "message": "Patch Set 2: Published edit on patch set 1.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1724120866,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1724120866,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1724120890,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/90079/ : FAILURE"
        },
        {
            "timestamp": 1724123407,
            "reviewer": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1724123430,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1724123430,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1724123455,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/90082/ : FAILURE"
        },
        {
            "timestamp": 1724123742,
            "reviewer": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "message": "Patch Set 4: Published edit on patch set 3.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1724123791,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1724123791,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1724123815,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/90083/ : SUCCESS"
        },
        {
            "timestamp": 1724154068,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 4:\n\n(4 comments)"
        },
        {
            "timestamp": 1724373992,
            "reviewer": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "message": "Patch Set 4:\n\n(4 comments)\n\nThis change is ready for review."
        },
        {
            "timestamp": 1724813116,
            "reviewer": {
                "name": "Tim Lee",
                "email": "chli30@nuvoton.com",
                "username": "timlee66"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1724915247,
            "reviewer": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1724959429,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1725398826,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Patch Set 4:\n\n(2 comments)"
        },
        {
            "timestamp": 1725418205,
            "reviewer": {
                "name": "Tim Lee",
                "email": "chli30@nuvoton.com",
                "username": "timlee66"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1725430324,
            "reviewer": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "message": "Patch Set 5: Published edit on patch set 4.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1725430385,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1725430385,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1725430450,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/91267/ : FAILURE"
        },
        {
            "timestamp": 1725430769,
            "reviewer": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "message": "Patch Set 6: Published edit on patch set 5.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1725430810,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1725430815,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: -Ok-To-Test"
        },
        {
            "timestamp": 1725430867,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/91268/ : SUCCESS"
        },
        {
            "timestamp": 1725439972,
            "reviewer": {
                "name": "Tim Lee",
                "email": "chli30@nuvoton.com",
                "username": "timlee66"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1725499277,
            "reviewer": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "message": "Patch Set 6:\n\n(2 comments)"
        },
        {
            "timestamp": 1725605015,
            "reviewer": {
                "name": "chintingkuo",
                "username": "chintingkuo"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1725636214,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1725945071,
            "reviewer": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1726089513,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1726123312,
            "reviewer": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "message": "Patch Set 7: Published edit on patch set 6.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1726123371,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1726123371,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: -Ok-To-Test"
        },
        {
            "timestamp": 1726123393,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/91733/ : FAILURE"
        },
        {
            "timestamp": 1726123595,
            "reviewer": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "message": "Patch Set 8: Published edit on patch set 7.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1726123625,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1726123626,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: -Ok-To-Test"
        },
        {
            "timestamp": 1726123649,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/91736/ : SUCCESS"
        },
        {
            "timestamp": 1726223043,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 8:\n\n(8 comments)"
        },
        {
            "timestamp": 1726647503,
            "reviewer": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "message": "Patch Set 9: Published edit on patch set 8.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1726647534,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1726647534,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: -Ok-To-Test"
        },
        {
            "timestamp": 1726647557,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/91940/ : FAILURE"
        },
        {
            "timestamp": 1726647760,
            "reviewer": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "message": "Patch Set 10: Published edit on patch set 9.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1726647799,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 10: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1726647799,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 10: -Ok-To-Test"
        },
        {
            "timestamp": 1726647822,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 10: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/91941/ : SUCCESS"
        },
        {
            "timestamp": 1726664773,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 10: Code-Review+2\n\n(1 comment)"
        },
        {
            "timestamp": 1726664780,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Change has been successfully rebased and submitted as 377ed14df4913010752ee2faff994a50e12a6316"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "7ebc154d95a812abc841ec86fd853098edabd924",
            "parents": [
                "a69289a9206654a80344c4d5cedfa337c88f622a"
            ],
            "ref": "refs/changes/78/73678/1",
            "uploader": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "createdOn": 1724120280,
            "author": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "bmc-reboot-cause-update.md",
                    "type": "ADDED",
                    "insertions": 108,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 120,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "0e31416419a48ea79d640ec278826797597a7187",
            "parents": [
                "a69289a9206654a80344c4d5cedfa337c88f622a"
            ],
            "ref": "refs/changes/78/73678/2",
            "uploader": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "createdOn": 1724120842,
            "author": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "bmc-reboot-cause-update.md",
                    "type": "ADDED",
                    "insertions": 105,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 117,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "f2af2d38f2cdd10da953abbe36c76ec851ecdd01",
            "parents": [
                "a69289a9206654a80344c4d5cedfa337c88f622a"
            ],
            "ref": "refs/changes/78/73678/3",
            "uploader": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "createdOn": 1724123407,
            "author": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "type": "ADDED",
                    "insertions": 108,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 120,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "8d8738f76a3cca16fce8ea520f1ea6988c6d821d",
            "parents": [
                "a69289a9206654a80344c4d5cedfa337c88f622a"
            ],
            "ref": "refs/changes/78/73678/4",
            "uploader": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "createdOn": 1724123742,
            "author": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Tim Lee",
                        "email": "chli30@nuvoton.com",
                        "username": "timlee66"
                    },
                    "message": "Hi @Patrick NC Lin,\n\nSeems this is a bit historic and was probably defined when watchdogs were not typically integrated. Documentation/watchdog/watchdog-api.rst says:\n`Card previously reset the CPU`\n\nAccording to `reset the CPU` that similar to `Power On Reset` means CPU reset and all values be reset to default. That\u2019s why we use this specific `WDIOF_CARDRESET` to identify `POR`, not `WDIOF_EXTERN1` or `WDIOF_EXTERN2`.\n\nIf BMC have more than one watchdog resets support, we need to know which watchdog reset used on platform through watchdog driver DTS. Ex: `ext1-reset-type = \u201cwd0\u201d` (or \u201cwd1\u201d, \u201cwd2\u201d etc.). Thus, we define WDIOF_EXTERN1 as watchdog reset.\n\nIf BMC have more than one software resets support, we also need to know which software reset used on platform through watchdog driver DTS. Ex: `ext2-reset-type = \u201csw1\u201d` (or \u201csw2\u201d, \u201csw3\u201d etc.). Thus, we define WDIOF_EXTERN2 as software reset.\n\nHowever, the WDIOF_EXTERN2 we haven\u2019t implemented it yet in phosphor-state-manager and phosphor-dbus-interfaces. We might upstream it if we have conclusion. Thanks."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Patrick NC Lin",
                        "email": "patrick.nc.lin.wiwynn@gmail.com",
                        "username": "PatrickLinww"
                    },
                    "message": "Hi @Patrick Williams, what are your thoughts on this?\n\nHi @Tim Lee, thank you for your response. I will discuss this with others and get back to you with our conclusions."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Tim, as best I can tell, this whole discussion of Nuvoton support is from an unsubmitted patch, isn't it?  (https://github.com/Nuvoton-Israel/linux/commit/fdaeb53a7ca6b378315f0a584ff42a61efdec4d3). I don't see any indication that this was submitted to the LKML.\n\nI've tried to read the upstream drivers in Linux. From what I can tell \"Power On Reset\" is typically modeled by a 0 in the status.  CARDRESET is typically used for the watchdog itself triggering and causing a reset.  (The current Aspeed chip uses this, pcwd.c uses this, via_wdt.c uses this.).\n\nI think the confusion in the Nuvoton side is that you have a signal in your watchdog hardware called \"card reset\" which is used to indicate POR state.  Tomer mapped this to the WDIOF_CARDRESET, since it has the same name, but that isn't generally the upstream approach."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Tim Lee",
                        "email": "chli30@nuvoton.com",
                        "username": "timlee66"
                    },
                    "message": "@Patrick Williams\n\nThanks for your feedback. Indeed, Nuvoton watchdog driver support reset cause for Power-On-Reset, Watchdog reset and Software reset. The patch is ready to submit by Tomer recently. For Kernel side, watchdog driver need to translate the reason to Userspace and customer can just change DTS `card-reset-type = \"wdX\"` and `ext1-reset-type = \"porst\"` to decide which reset cause through Nuvoton watchdog driver.\n\nFor OpenBMC side, we can help to exchange WDIOF_CARRESET and WDIOF_EXTERN1 in phosphor-state-manager and phosphor-dbus-interfaces if we have conclusion. Thanks."
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 12,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "geissonator@yahoo.com",
                        "username": "geissonator"
                    },
                    "message": "High level I think it would be great to have more details on BMC reboots, especially unexpected ones."
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 27,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "geissonator@yahoo.com",
                        "username": "geissonator"
                    },
                    "message": "Is this even possible with the existing hardware we have (i.e. AST2500, AST2600?). Do we have aspeed agreement to write this driver? Either way, I think a requirement is we have a way to stay backwards compatible."
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 27,
                    "reviewer": {
                        "name": "Patrick NC Lin",
                        "email": "patrick.nc.lin.wiwynn@gmail.com",
                        "username": "PatrickLinww"
                    },
                    "message": "Hi @Andrew Geissler, this design document was proposed following our discussions with Aspeed. Once we reach consensus, Aspeed will need to update their drivers to implement this design."
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 27,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 71,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I suspect this is going to be an issue for some existing hardware designs.  CARDRESET was \"power on reset\" because, that's what a CARDRESET is suppose to show, right?  Why are we using that for a watchdog now an using EXTERN2 as something other than the watchdog?"
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 71,
                    "reviewer": {
                        "name": "Patrick NC Lin",
                        "email": "patrick.nc.lin.wiwynn@gmail.com",
                        "username": "PatrickLinww"
                    },
                    "message": "In the kernal documentation, CARDRESET means that the last reboot was caused by the watchdog card. That's why we recommend making this change. I will send an email to Tim Lee and ask his opinion on this."
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 71,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 82,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "What is a \"System Event Log\"?  This is an IPMI term.  I assume you're going to be making a new record per https://github.com/openbmc/docs/blob/master/designs/event-logging.md ?"
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 82,
                    "reviewer": {
                        "name": "Patrick NC Lin",
                        "email": "patrick.nc.lin.wiwynn@gmail.com",
                        "username": "PatrickLinww"
                    },
                    "message": "You\u2019re right. I will correct my wording."
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 82,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 89,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "This is the opposite of intuitive to me..."
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 89,
                    "reviewer": {
                        "name": "Patrick NC Lin",
                        "email": "patrick.nc.lin.wiwynn@gmail.com",
                        "username": "PatrickLinww"
                    },
                    "message": "I will send an email to Tim Lee and discuss with him the correct usage of WDIOF_CARDRESET."
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 89,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "(This wasn't really resolved, but I'm leaving a similar comment with better direction in the latest PS)."
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 90,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I've looked at the kernel documentation and maybe CARDRESET _is_ suppose to be used for the watchdog reset:\n\n```\n\t===============\t\t=============================\n\tWDIOF_CARDRESET\t\tCard previously reset the CPU\n\t===============\t\t=============================\n\nThe last reboot was caused by the watchdog card\n```\n\nSee https://github.com/openbmc/linux/blob/6e4436539ae182dc86d57d13849862bcafaa4709/Documentation/watchdog/watchdog-api.rst#environmental-monitoring\n\nWe will need to get alignment from existing upstream users as to why EXTERN1 was previously used for this.  It looks like the code in phosphor-state-manager was added by Tim Lee from Nuvoton."
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 90,
                    "reviewer": {
                        "name": "Patrick NC Lin",
                        "email": "patrick.nc.lin.wiwynn@gmail.com",
                        "username": "PatrickLinww"
                    },
                    "message": "As you mentioned, we reached this conclusion based on that document. I will send an email to Tim Lee, asking him to join the discussion and update the results here."
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 90,
                    "reviewer": {
                        "name": "chintingkuo",
                        "username": "chintingkuo"
                    },
                    "message": "It seems that everyone agrees CARDRESET is equal to watchdog reset. The problem now is \"power-on-reset\". There may be two possible approaches.\n\nThe first one is to categorize into the \"default\" one since \"power-on-reset\" is not defined clearly in the document and it may not be a monitoring item. Namely, the bootReason (https://github.com/openbmc/phosphor-state-manager/blob/master/bmc_state_manager.cpp#L288) will be,\n\ncase WDIOF_CARDRESET: watchdog\ndefault             : power on\n\n\nThe second approach is to categorize \"power-on-reset\" into WDIOF_EXTERN1. Because, from the document mentioned by Williams, WDIOF_EXTERN is triggered by the external relay. Usually, an external HW relay is used to control the HW board power.\n  ===============  ==================\n   WDIOF_EXTERN1    External relay 1\n  ===============  ==================\nIf this method is adopted, the bootReason will be\n\ncase WDIOF_EXTERN1  : power on\ncase WDIOF_CARDRESET: watchdog"
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 90,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I don't think most chips with upstream drivers assume POR goes through the watchdog.  A POR is usually \"no value in the watchdog\".\n\nThe wiring of your chip \"EXTERN1\" to be used by the power on relay is a board-specific design choice.  This probably isn't something we should codify as a requirement, is it?  Or are we going to say all BMC have to do that going forward?  Have all BMCs done this in the past?  Probably not..."
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 90,
                    "reviewer": {
                        "name": "Patrick NC Lin",
                        "email": "patrick.nc.lin.wiwynn@gmail.com",
                        "username": "PatrickLinww"
                    },
                    "message": "Hi @Patrick William,\n\nSo, are you saying that the watchdog driver does not need to handle the POR?\n\nI believe @Chin-Ting's first proposed method aligns with your understanding: when the phosphor-state-manager reads a default value (0), it indicates that the watchdog has not modified this value. \nAt this point, phosphor-state-manager can interpret this scenario as a POR, which would align with your statement that \"A POR is usually no value in the watchdog.\" \nDoes that sound correct to you?"
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 90,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "> So, are you saying that the watchdog driver does not need to handle the POR?\n\nCorrect."
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 90,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "type": "ADDED",
                    "insertions": 107,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 119,
            "sizeDeletions": 0
        },
        {
            "number": 5,
            "revision": "eef7025a2c1fe2864ab3069b63587b4e6d12058c",
            "parents": [
                "a69289a9206654a80344c4d5cedfa337c88f622a"
            ],
            "ref": "refs/changes/78/73678/5",
            "uploader": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "createdOn": 1725430324,
            "author": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "type": "ADDED",
                    "insertions": 110,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 122,
            "sizeDeletions": 0
        },
        {
            "number": 6,
            "revision": "790670a94d19cfdfd9c077c6a85fbd8378dd6087",
            "parents": [
                "a69289a9206654a80344c4d5cedfa337c88f622a"
            ],
            "ref": "refs/changes/78/73678/6",
            "uploader": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "createdOn": 1725430769,
            "author": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 80,
                    "reviewer": {
                        "name": "Tim Lee",
                        "email": "chli30@nuvoton.com",
                        "username": "timlee66"
                    },
                    "message": "`WDIOF_EXTERN1` also be revised. Could you modify this description to get more detail? Thanks."
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 80,
                    "reviewer": {
                        "name": "Patrick NC Lin",
                        "email": "patrick.nc.lin.wiwynn@gmail.com",
                        "username": "PatrickLinww"
                    },
                    "message": "Thanks Tim, I will modify the description."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "type": "ADDED",
                    "insertions": 111,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 123,
            "sizeDeletions": 0
        },
        {
            "number": 7,
            "revision": "78827deaad932afc2325a8e312d0c5bf07651e5a",
            "parents": [
                "a69289a9206654a80344c4d5cedfa337c88f622a"
            ],
            "ref": "refs/changes/78/73678/7",
            "uploader": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "createdOn": 1726123312,
            "author": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "type": "ADDED",
                    "insertions": 113,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 125,
            "sizeDeletions": 0
        },
        {
            "number": 8,
            "revision": "5bf3fde48a11e89c4f154629fc12c04f125c9579",
            "parents": [
                "a69289a9206654a80344c4d5cedfa337c88f622a"
            ],
            "ref": "refs/changes/78/73678/8",
            "uploader": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "createdOn": 1726123595,
            "author": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "One minor change requested.  Otherwise LGTM."
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 66,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Long term we might need this to be configurable, since I suspect this is somewhat schematic driven.  Seems fine for the time being though."
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 97,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I still don't like this phrase.  \"Intuitive\" is too subjective in this case.\n\nI would suggest we point to the kernel documentation and suggest that this approach is in line with existing kernel documentation and driver implementation."
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 97,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "type": "ADDED",
                    "insertions": 114,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 126,
            "sizeDeletions": 0
        },
        {
            "number": 9,
            "revision": "97d3e2bccdb7fc8d89c24d118c0c2499c0bd3a7b",
            "parents": [
                "a69289a9206654a80344c4d5cedfa337c88f622a"
            ],
            "ref": "refs/changes/78/73678/9",
            "uploader": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "createdOn": 1726647503,
            "author": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "type": "ADDED",
                    "insertions": 115,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 127,
            "sizeDeletions": 0
        },
        {
            "number": 10,
            "revision": "86063796771c0152f189265bea8638b9871475e3",
            "parents": [
                "a69289a9206654a80344c4d5cedfa337c88f622a"
            ],
            "ref": "refs/changes/78/73678/10",
            "uploader": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "createdOn": 1726647760,
            "author": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "type": "ADDED",
                    "insertions": 115,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 127,
            "sizeDeletions": 0
        },
        {
            "number": 11,
            "revision": "377ed14df4913010752ee2faff994a50e12a6316",
            "parents": [
                "ed3316974b9e606b18326163688fc0cb35ce472a"
            ],
            "ref": "refs/changes/78/73678/11",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1726664780,
            "author": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "type": "ADDED",
                    "insertions": 115,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 127,
            "sizeDeletions": 0
        }
    ]
}