{
    "project": "openbmc/webui-vue",
    "branch": "master",
    "id": "I115da1b12a3d4cb643134a0b44d8ac55b77ba578",
    "number": 72463,
    "subject": "Prevent whitespace in role group names and tidy up input",
    "owner": {
        "name": "Farah Rasheed",
        "email": "Farah.Rasheed1@dell.com",
        "username": "FarahRasheed1"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/webui-vue/+/72463",
    "hashtags": [],
    "createdOn": 1720542007,
    "lastUpdated": 1725896909,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1720542007,
            "reviewer": {
                "name": "Farah Rasheed",
                "email": "Farah.Rasheed1@dell.com",
                "username": "FarahRasheed1"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1720542021,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1:\n\nUser not approved, see admin, no CI"
        },
        {
            "timestamp": 1720542200,
            "reviewer": {
                "name": "Farah Rasheed",
                "email": "Farah.Rasheed1@dell.com",
                "username": "FarahRasheed1"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1720542228,
            "reviewer": {
                "name": "Farah Rasheed",
                "email": "Farah.Rasheed1@dell.com",
                "username": "FarahRasheed1"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1720548672,
            "reviewer": {
                "name": "Farah Rasheed",
                "email": "Farah.Rasheed1@dell.com",
                "username": "FarahRasheed1"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1720548729,
            "reviewer": {
                "name": "Farah Rasheed",
                "email": "Farah.Rasheed1@dell.com",
                "username": "FarahRasheed1"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1720706980,
            "reviewer": {
                "name": "Farah Rasheed",
                "email": "Farah.Rasheed1@dell.com",
                "username": "FarahRasheed1"
            },
            "message": "Abandoned\n\nwill reopen to see if jenkins will auto update since CCLA has now been updated"
        },
        {
            "timestamp": 1720706982,
            "reviewer": {
                "name": "Farah Rasheed",
                "email": "Farah.Rasheed1@dell.com",
                "username": "FarahRasheed1"
            },
            "message": "Restored"
        },
        {
            "timestamp": 1720708216,
            "reviewer": {
                "name": "Farah Rasheed",
                "email": "Farah.Rasheed1@dell.com",
                "username": "FarahRasheed1"
            },
            "message": "Uploaded patch set 2: Commit message was updated."
        },
        {
            "timestamp": 1720708233,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2:\n\nUser not approved, see admin, no CI"
        },
        {
            "timestamp": 1720709014,
            "reviewer": {
                "name": "Farah Rasheed",
                "email": "Farah.Rasheed1@dell.com",
                "username": "FarahRasheed1"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1720725487,
            "reviewer": {
                "name": "Farah Rasheed",
                "email": "Farah.Rasheed1@dell.com",
                "username": "FarahRasheed1"
            },
            "message": "Uploaded patch set 3: New patch set was added with same tree, parent tree, and commit message as Patch Set 2."
        },
        {
            "timestamp": 1720725520,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1720725520,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1720725594,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/87785/ : SUCCESS"
        },
        {
            "timestamp": 1720726519,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1720793397,
            "reviewer": {
                "name": "Farah Rasheed",
                "email": "Farah.Rasheed1@dell.com",
                "username": "FarahRasheed1"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1720965802,
            "reviewer": {
                "name": "Nikhil Ashoka",
                "email": "a.nikhil@ibm.com",
                "username": "Nikhil-Ashoka"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1721068694,
            "reviewer": {
                "name": "Farah Rasheed",
                "email": "Farah.Rasheed1@dell.com",
                "username": "FarahRasheed1"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1721226833,
            "reviewer": {
                "name": "Farah Rasheed",
                "email": "Farah.Rasheed1@dell.com",
                "username": "FarahRasheed1"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1721226902,
            "reviewer": {
                "name": "Farah Rasheed",
                "email": "Farah.Rasheed1@dell.com",
                "username": "FarahRasheed1"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1722028785,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1722029359,
            "reviewer": {
                "name": "Farah Rasheed",
                "email": "Farah.Rasheed1@dell.com",
                "username": "FarahRasheed1"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1722270711,
            "reviewer": {
                "name": "Farah Rasheed",
                "email": "Farah.Rasheed1@dell.com",
                "username": "FarahRasheed1"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1722280924,
            "reviewer": {
                "name": "Farah Rasheed",
                "email": "Farah.Rasheed1@dell.com",
                "username": "FarahRasheed1"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1722282354,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1722351042,
            "reviewer": {
                "name": "Farah Rasheed",
                "email": "Farah.Rasheed1@dell.com",
                "username": "FarahRasheed1"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1725856145,
            "reviewer": {
                "name": "Nikhil Ashoka",
                "email": "a.nikhil@ibm.com",
                "username": "Nikhil-Ashoka"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1725856732,
            "reviewer": {
                "name": "Nikhil Ashoka",
                "email": "a.nikhil@ibm.com",
                "username": "Nikhil-Ashoka"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1725885060,
            "reviewer": {
                "name": "j-westover",
                "email": "jwestover@nvidia.com",
                "username": "j-westover"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1725894193,
            "reviewer": {
                "name": "Farah Rasheed",
                "email": "Farah.Rasheed1@dell.com",
                "username": "FarahRasheed1"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1725896127,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1725896909,
            "reviewer": {
                "name": "Farah Rasheed",
                "email": "Farah.Rasheed1@dell.com",
                "username": "FarahRasheed1"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "d185e121289b17b7b2aed7812fcd9b6320816c49",
            "parents": [
                "8841b7d463a5272a87faaa14cb103f778a772770"
            ],
            "ref": "refs/changes/63/72463/1",
            "uploader": {
                "name": "Farah Rasheed",
                "email": "Farah.Rasheed1@dell.com",
                "username": "FarahRasheed1"
            },
            "createdOn": 1720542007,
            "author": {
                "name": "Farah Rasheed",
                "email": "Farah.Rasheed1@dell.com",
                "username": "FarahRasheed1"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Farah Rasheed",
                        "email": "Farah.Rasheed1@dell.com",
                        "username": "FarahRasheed1"
                    },
                    "message": "Will re-add reviewers when approved and added to CCLA"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Farah Rasheed",
                        "email": "Farah.Rasheed1@dell.com",
                        "username": "FarahRasheed1"
                    },
                    "message": "CCLA updated, see https://lists.ozlabs.org/pipermail/openbmc/2024-July/035577.html"
                },
                {
                    "file": "src/views/SecurityAndAccess/Ldap/ModalAddRoleGroup.vue",
                    "line": 130,
                    "reviewer": {
                        "name": "Farah Rasheed",
                        "email": "Farah.Rasheed1@dell.com",
                        "username": "FarahRasheed1"
                    },
                    "message": "Handled the issue of a whitespace group name by adding another validator which uses a regex for whitespace only, not sure if there is a more graceful way of doing this."
                },
                {
                    "file": "src/views/SecurityAndAccess/Ldap/ModalAddRoleGroup.vue",
                    "line": 133,
                    "reviewer": {
                        "name": "Farah Rasheed",
                        "email": "Farah.Rasheed1@dell.com",
                        "username": "FarahRasheed1"
                    },
                    "message": "Bench test results: https://github.com/openbmc/webui-vue/issues/111#issuecomment-2218130929"
                },
                {
                    "file": "src/views/SecurityAndAccess/Ldap/ModalAddRoleGroup.vue",
                    "line": 143,
                    "reviewer": {
                        "name": "Farah Rasheed",
                        "email": "Farah.Rasheed1@dell.com",
                        "username": "FarahRasheed1"
                    },
                    "message": "Trim leading/trailing whitespace in the group name before handleSubmit"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "src/views/SecurityAndAccess/Ldap/ModalAddRoleGroup.vue",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 30,
            "sizeDeletions": 2
        },
        {
            "number": 2,
            "revision": "58ab3de8400dc592a4341801327601fe99005dc3",
            "parents": [
                "8841b7d463a5272a87faaa14cb103f778a772770"
            ],
            "ref": "refs/changes/63/72463/2",
            "uploader": {
                "name": "Farah Rasheed",
                "email": "Farah.Rasheed1@dell.com",
                "username": "FarahRasheed1"
            },
            "createdOn": 1720708216,
            "author": {
                "name": "Farah Rasheed",
                "email": "Farah.Rasheed1@dell.com",
                "username": "FarahRasheed1"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "src/views/SecurityAndAccess/Ldap/ModalAddRoleGroup.vue",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 31,
            "sizeDeletions": 2
        },
        {
            "number": 3,
            "revision": "4b10e56cb52db19cabebf51ee3dc8655917a70f9",
            "parents": [
                "8841b7d463a5272a87faaa14cb103f778a772770"
            ],
            "ref": "refs/changes/63/72463/3",
            "uploader": {
                "name": "Farah Rasheed",
                "email": "Farah.Rasheed1@dell.com",
                "username": "FarahRasheed1"
            },
            "createdOn": 1720725487,
            "author": {
                "name": "Farah Rasheed",
                "email": "Farah.Rasheed1@dell.com",
                "username": "FarahRasheed1"
            },
            "kind": "NO_CHANGE",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gunnar@gmills.xyz",
                        "username": "gtmills"
                    },
                    "message": "Don't we need to do this a lot of places?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Farah Rasheed",
                        "email": "Farah.Rasheed1@dell.com",
                        "username": "FarahRasheed1"
                    },
                    "message": "I imagine so, trying to keep the scope contained..."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Farah Rasheed",
                        "email": "Farah.Rasheed1@dell.com",
                        "username": "FarahRasheed1"
                    },
                    "message": "Done"
                },
                {
                    "file": "src/views/SecurityAndAccess/Ldap/ModalAddRoleGroup.vue",
                    "line": 35,
                    "reviewer": {
                        "name": "Nikhil Ashoka",
                        "email": "a.nikhil@ibm.com",
                        "username": "Nikhil-Ashoka"
                    },
                    "message": "We should add an additional feedback message for this change. Currently we have only \"Field required\" as error message."
                },
                {
                    "file": "src/views/SecurityAndAccess/Ldap/ModalAddRoleGroup.vue",
                    "line": 86,
                    "reviewer": {
                        "name": "Nikhil Ashoka",
                        "email": "a.nikhil@ibm.com",
                        "username": "Nikhil-Ashoka"
                    },
                    "message": "This validation would be better if made in the back-end as well? Not accept if there are whitespaces? Any thoughts?"
                },
                {
                    "file": "src/views/SecurityAndAccess/Ldap/ModalAddRoleGroup.vue",
                    "line": 86,
                    "reviewer": {
                        "name": "Farah Rasheed",
                        "email": "Farah.Rasheed1@dell.com",
                        "username": "FarahRasheed1"
                    },
                    "message": "I agree, I prefer back-end user input validation to ensure consistency regardless of which client is used. I will spin up a code review to validate the input in redfish-core in bmcweb."
                },
                {
                    "file": "src/views/SecurityAndAccess/Ldap/ModalAddRoleGroup.vue",
                    "line": 86,
                    "reviewer": {
                        "name": "Farah Rasheed",
                        "email": "Farah.Rasheed1@dell.com",
                        "username": "FarahRasheed1"
                    },
                    "message": "I was wondering if the validation should be done in bmcweb webserver (in redfish-core) when it is handling the URI, or back further on. Any ideas on where in OpenBMC user input validation is done?"
                },
                {
                    "file": "src/views/SecurityAndAccess/Ldap/ModalAddRoleGroup.vue",
                    "line": 86,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gunnar@gmills.xyz",
                        "username": "gtmills"
                    },
                    "message": "> I prefer back-end user input validation to ensure consistency regardless of which client is used. I will spin up a code review to validate the input in redfish-core in bmcweb.\n\nIs there a bmcweb review for this?\n\n> Any ideas on where in OpenBMC user input validation is done?\n\nbmcweb's LDAP implementation is done at https://github.com/openbmc/bmcweb/blob/2d57219665f47c7fd9c2cdbc31a588f1da51ea72/redfish-core/lib/account_service.hpp#L64"
                },
                {
                    "file": "src/views/SecurityAndAccess/Ldap/ModalAddRoleGroup.vue",
                    "line": 86,
                    "reviewer": {
                        "name": "Farah Rasheed",
                        "email": "Farah.Rasheed1@dell.com",
                        "username": "FarahRasheed1"
                    },
                    "message": "Thank you! \n\nDo we want to abandon this change altogether in webui-vue and only do it in bmcweb? Or keep both?"
                },
                {
                    "file": "src/views/SecurityAndAccess/Ldap/ModalAddRoleGroup.vue",
                    "line": 86,
                    "reviewer": {
                        "name": "Farah Rasheed",
                        "email": "Farah.Rasheed1@dell.com",
                        "username": "FarahRasheed1"
                    },
                    "message": "Looked in account service in bmcweb and saw that no validation seems to be happening for other patches as well. Also, checked that the validation for user name is happening in the webui-vue front end in the modal for user. Before I dig more into this, do we want to be be inconsistent and do group name input validation in bmcweb instead of webui-vue unlike the user name?"
                },
                {
                    "file": "src/views/SecurityAndAccess/Ldap/ModalAddRoleGroup.vue",
                    "line": 86,
                    "reviewer": {
                        "name": "Farah Rasheed",
                        "email": "Farah.Rasheed1@dell.com",
                        "username": "FarahRasheed1"
                    },
                    "message": "Opened a review in bmcweb to validate it: https://gerrit.openbmc.org/c/openbmc/bmcweb/+/73166\n\nOnly if the group name has only whitespaces, I'm not trimming the whitespaces in there yet (for now to avoid complexity unless reviewers feel otherwise)."
                },
                {
                    "file": "src/views/SecurityAndAccess/Ldap/ModalAddRoleGroup.vue",
                    "line": 86,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "We want to do hostname validation in phosphor-networkd or phosphor-ldap, the daemons responsible for handling the network configuration.\n\nWe might also do it in the webui for performance reasons to not have to wait for a submit and return from the backend."
                },
                {
                    "file": "src/views/SecurityAndAccess/Ldap/ModalAddRoleGroup.vue",
                    "line": 86,
                    "reviewer": {
                        "name": "Farah Rasheed",
                        "email": "Farah.Rasheed1@dell.com",
                        "username": "FarahRasheed1"
                    },
                    "message": "Hey Everyone. While I have a branch ready to do the validation in the phosphor-user-manager when the group is created (https://github.com/openbmc/phosphor-user-manager/blob/master/user_mgr.cpp#L460), I am unable to open a code review for it since the existing unit tests for me are failing on my setup. While I see what is going on there (I did submit https://github.com/openbmc/phosphor-user-manager/issues/17 for it in case it is a widespread issue), any objections to continuing with this code review or abandoning it altogether and only having the validation in the backend? \n\nI believe that we should have front end validation as well as a first line of defense, but if the general consensus is that the GUI has 0 validation for input fields and all validation happens in the backend, I can abandon this code review."
                },
                {
                    "file": "src/views/SecurityAndAccess/Ldap/ModalAddRoleGroup.vue",
                    "line": 86,
                    "reviewer": {
                        "name": "Nikhil Ashoka",
                        "email": "a.nikhil@ibm.com",
                        "username": "Nikhil-Ashoka"
                    },
                    "message": "I also think, we should still have a validation in the front-end."
                },
                {
                    "file": "src/views/SecurityAndAccess/Ldap/ModalAddRoleGroup.vue",
                    "line": 86,
                    "reviewer": {
                        "name": "j-westover",
                        "email": "jwestover@nvidia.com",
                        "username": "j-westover"
                    },
                    "message": "Yes, since Redfish can be accessed by other clients, all validation *must* be done on the backend.  However, for UX reasons, it is also preferable to do simple validation on the front end as well.  It is a better UX to let them know where in the form they got it wrong before they apply."
                },
                {
                    "file": "src/views/SecurityAndAccess/Ldap/ModalAddRoleGroup.vue",
                    "line": 86,
                    "reviewer": {
                        "name": "Farah Rasheed",
                        "email": "Farah.Rasheed1@dell.com",
                        "username": "FarahRasheed1"
                    },
                    "message": "Since there is agreement from two people that front-end validation should be conducted alongside back-end validation, I will keep this code review open."
                },
                {
                    "file": "src/views/SecurityAndAccess/Ldap/ModalAddRoleGroup.vue",
                    "line": 86,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Fine to leave the PR open, but the backend fix needs to come first so we can verify it.  Or at least produce the failing test case in curl that someone else can go implement for the backend.  as-is I don't know how to get this error to generate in the backend."
                },
                {
                    "file": "src/views/SecurityAndAccess/Ldap/ModalAddRoleGroup.vue",
                    "line": 86,
                    "reviewer": {
                        "name": "Farah Rasheed",
                        "email": "Farah.Rasheed1@dell.com",
                        "username": "FarahRasheed1"
                    },
                    "message": "Works for me, while I did have a fix ready in the backend, I wasn't able to get a green build off develop for that repo, I opened https://github.com/openbmc/phosphor-user-manager/issues/17 in case others had run into that issue as well.\n\nAnyways, the curl command used:\n\ncurl -k -u <username>:<password> https://<ip_addr>/redfish/v1/AccountService -X PATCH -d '{\"LDAP\":{\"RemoteRoleMapping\":[{\"LocalRole\":\"Operator\",\"RemoteGroup\":\" \"}]}}'"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "src/views/SecurityAndAccess/Ldap/ModalAddRoleGroup.vue",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 31,
            "sizeDeletions": 2
        }
    ]
}