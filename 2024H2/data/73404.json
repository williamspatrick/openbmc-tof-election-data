{
    "project": "openbmc/bmcweb",
    "branch": "master",
    "id": "Id6e2ed624b37cf90525db165019cd74023d6535c",
    "number": 73404,
    "subject": "event logs: prepare to unify logging backends",
    "owner": {
        "name": "Alexander",
        "email": "alexander.hansen@9elements.com",
        "username": "pointbazaar"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/bmcweb/+/73404",
    "hashtags": [],
    "createdOn": 1722873619,
    "lastUpdated": 1723481060,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1722873619,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1722873641,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1722873641,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1722874227,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/89186/ : FAILURE"
        },
        {
            "timestamp": 1722876003,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Uploaded patch set 2.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1722876026,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1722876026,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1722876557,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/89188/ : FAILURE"
        },
        {
            "timestamp": 1722876808,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1722876846,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1722876846,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1722878182,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/89191/ : SUCCESS"
        },
        {
            "timestamp": 1722888634,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(4 comments)"
        },
        {
            "timestamp": 1722900918,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1723045145,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Uploaded patch set 4.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1723045179,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1723045179,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1723046304,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Patch Set 4:\n\n(5 comments)"
        },
        {
            "timestamp": 1723046484,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/89350/ : SUCCESS"
        },
        {
            "timestamp": 1723050641,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 4:\n\n(10 comments)"
        },
        {
            "timestamp": 1723050793,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1723133252,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Uploaded patch set 5.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1723133290,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1723133290,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1723133323,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/89419/ : FAILURE"
        },
        {
            "timestamp": 1723133437,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Uploaded patch set 6.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1723133450,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1723133450,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: -Ok-To-Test"
        },
        {
            "timestamp": 1723133544,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Patch Set 6:\n\n(8 comments)"
        },
        {
            "timestamp": 1723134213,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/89420/ : FAILURE"
        },
        {
            "timestamp": 1723136870,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/89421/ : SUCCESS"
        },
        {
            "timestamp": 1723140398,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 6:\n\n(3 comments)"
        },
        {
            "timestamp": 1723141504,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1723143360,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1723144167,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 6:\n\n(2 comments)"
        },
        {
            "timestamp": 1723144392,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1723154439,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Patch Set 7: Patch Set 6 was rebased on behalf of Alexander <alexander.hansen@9elements.com>\n\nCopied Votes:\n* Verified+1 (copy condition: \"**changekind:NO_CHANGE**\")\n"
        },
        {
            "timestamp": 1723154453,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1723154453,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: -Ok-To-Test"
        },
        {
            "timestamp": 1723155827,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7:\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/89436/ : SUCCESS"
        },
        {
            "timestamp": 1723228516,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Patch Set 8: Patch Set 7 was rebased on behalf of Alexander <alexander.hansen@9elements.com>\n\nCopied Votes:\n* Verified+1 (copy condition: \"**changekind:NO_CHANGE**\")\n"
        },
        {
            "timestamp": 1723228537,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1723228538,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: -Ok-To-Test"
        },
        {
            "timestamp": 1723229914,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8:\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/89519/ : SUCCESS"
        },
        {
            "timestamp": 1723473508,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Patch Set 9: Patch Set 8 was rebased on behalf of Alexander <alexander.hansen@9elements.com>\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1723473550,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1723473550,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: -Ok-To-Test"
        },
        {
            "timestamp": 1723474910,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/89557/ : SUCCESS"
        },
        {
            "timestamp": 1723481060,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Abandoned\n\nabandon in favor of https://gerrit.openbmc.org/c/openbmc/bmcweb/+/73630 which should be a more focused and uncontroversial series"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "25ce36e7930217555b73a7a10b098c7041038d14",
            "parents": [
                "6d0b80be1b79122de60ade0b80460510696954e0"
            ],
            "ref": "refs/changes/04/73404/1",
            "uploader": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "createdOn": 1722873619,
            "author": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/event_service_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -10
                },
                {
                    "file": "meson.options",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -9
                },
                {
                    "file": "Redfish.md",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -6
                },
                {
                    "file": "config/meson.build",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -1
                },
                {
                    "file": "redfish-core/src/redfish.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -14
                },
                {
                    "file": "redfish-core/lib/log_services.hpp",
                    "type": "MODIFIED",
                    "insertions": 561,
                    "deletions": -584
                },
                {
                    "file": "src/webserver_run.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -7
                }
            ],
            "sizeInsertions": 595,
            "sizeDeletions": 631
        },
        {
            "number": 2,
            "revision": "b81c317c043c520d03ea728f5c77ed9397811a9b",
            "parents": [
                "6d0b80be1b79122de60ade0b80460510696954e0"
            ],
            "ref": "refs/changes/04/73404/2",
            "uploader": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "createdOn": 1722876003,
            "author": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/event_service_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -10
                },
                {
                    "file": "meson.options",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -9
                },
                {
                    "file": "Redfish.md",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -6
                },
                {
                    "file": "config/meson.build",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -1
                },
                {
                    "file": "redfish-core/src/redfish.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -14
                },
                {
                    "file": "redfish-core/lib/log_services.hpp",
                    "type": "MODIFIED",
                    "insertions": 561,
                    "deletions": -584
                },
                {
                    "file": "src/webserver_run.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -7
                }
            ],
            "sizeInsertions": 595,
            "sizeDeletions": 631
        },
        {
            "number": 3,
            "revision": "4b49c9c6b240c9a6db0beef5132cba0cc60489eb",
            "parents": [
                "6d0b80be1b79122de60ade0b80460510696954e0"
            ],
            "ref": "refs/changes/04/73404/3",
            "uploader": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "createdOn": 1722876808,
            "author": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I'm not aware of this capability, can you point me to it?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Alexander",
                        "email": "alexander.hansen@9elements.com",
                        "username": "pointbazaar"
                    },
                    "message": "changed the approach on this patch. Now there is no choosing but the implementation is unified."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Please answer my question nonetheless.  if you found this capability doesn't exist, feel free to say so."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Alexander",
                        "email": "alexander.hansen@9elements.com",
                        "username": "pointbazaar"
                    },
                    "message": "I believe it can be detected by looking if ```/var/log/redfish``` exists. If that file is cleared however that capability goes away. \n\nNoticed that when i was testing the previous version of this patch and cleared the \nlog. Then the phosphor-logging event logs showed up \ud83d\ude04\nWhich is a bug since clearing should clear everything.\n\nSince the relevant rsyslog configuration is copy/pasted for those who use that backend, the detection could also work by looking for those configuration files.\n\nSo the capability/ability to detect is there but it's not watertight.\n\nOne of the reasons why i changed the approach to unify/aggregate both event sources."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> I believe it can be detected by looking if ```/var/log/redfish``` exists. If that file is cleared however that capability goes away. \n\nAnd that code that checks if that file exists is.... where?\n\n> \n> Noticed that when i was testing the previous version of this patch and cleared the \n> log. Then the phosphor-logging event logs showed up \ud83d\ude04\n> Which is a bug since clearing should clear everything.\n\nThat seems like a newly introduced bug?  I don't see any code that's checking for existence of that file, and switching to dbus if it doesn't exist.  They're completely different handlers.\n\n> \n> Since the relevant rsyslog configuration is copy/pasted for those who use that backend, the detection could also work by looking for those configuration files.\n> \n> So the capability/ability to detect is there but it's not watertight.\n> \n> One of the reasons why i changed the approach to unify/aggregate both event sources."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "A little more detail needed here.\n\nWhat's changing?  How is the behavior changed for the user?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "Alexander",
                        "email": "alexander.hansen@9elements.com",
                        "username": "pointbazaar"
                    },
                    "message": "The user should have log entries from both sources with the newest revision."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> What's changing? How is the behavior changed for the user?\n\nthese questions do not appear to be answered in the commit message in the latest version, so reopening."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "Alexander",
                        "email": "alexander.hansen@9elements.com",
                        "username": "pointbazaar"
                    },
                    "message": "Added a section detailing the behavior for the individual operations.\nTODO: add a section for each URL."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "More detail needed here.  What are \"both\" cases."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "Alexander",
                        "email": "alexander.hansen@9elements.com",
                        "username": "pointbazaar"
                    },
                    "message": "with the 2 backends."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Need more details in the commit message;  What URIs did you test?  How did you verify they were correct?  How did you verify they matched the previous?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 14,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I'm having a lot of trouble reviewing this because it did a refactor of functions, which is great to see, but makes it really hard to figure out where we have behavior changes.\n\nCould you separate out the refactoring in a patchset ahead of this one, and do the behavior changes in another one."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 14,
                    "reviewer": {
                        "name": "Alexander",
                        "email": "alexander.hansen@9elements.com",
                        "username": "pointbazaar"
                    },
                    "message": "Yes, this is the eternal problem with bmcweb.\nEverything inline and huge diffs.\n\nI can try to split the patch."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 14,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Thank you."
                },
                {
                    "file": "redfish-core/src/redfish.cpp",
                    "line": 141,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "?  Why were these completely removed?"
                },
                {
                    "file": "redfish-core/src/redfish.cpp",
                    "line": 141,
                    "reviewer": {
                        "name": "Alexander",
                        "email": "alexander.hansen@9elements.com",
                        "username": "pointbazaar"
                    },
                    "message": "The idea was to register a handler for the route instead of the implementation.\n\nThe route does not care about the implementation, so there is no need to have it be declared twice."
                },
                {
                    "file": "redfish-core/src/redfish.cpp",
                    "line": 141,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> The idea was to register a handler for the route instead of the implementation.\n\nThat seems like something that needs stated in the commit message, and ideally put in its own patchset so it's more obvious that's what we're doing.  I guess it's fine as-is, but we need at least some indication that this is being done and why in the commit message."
                },
                {
                    "file": "redfish-core/src/redfish.cpp",
                    "line": 141,
                    "reviewer": {
                        "name": "Alexander",
                        "email": "alexander.hansen@9elements.com",
                        "username": "pointbazaar"
                    },
                    "message": "I think this will become clear when describing the routes that have been tested in the commit message."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/event_service_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -10
                },
                {
                    "file": "meson.options",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -9
                },
                {
                    "file": "Redfish.md",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -6
                },
                {
                    "file": "config/meson.build",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -1
                },
                {
                    "file": "redfish-core/src/redfish.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -14
                },
                {
                    "file": "redfish-core/lib/log_services.hpp",
                    "type": "MODIFIED",
                    "insertions": 562,
                    "deletions": -584
                },
                {
                    "file": "src/webserver_run.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -7
                }
            ],
            "sizeInsertions": 596,
            "sizeDeletions": 631
        },
        {
            "number": 4,
            "revision": "2f29ef4545ca1edf2bcb0e45b45be695a77a1ea0",
            "parents": [
                "ae9faa26c7e18efa6b9f0366f098d7eb4ab40b00"
            ],
            "ref": "refs/changes/04/73404/4",
            "uploader": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "createdOn": 1723045145,
            "author": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Overall, I'm pretty confused at the title of this commit message.  The two logging options have very different behavior in terms of what properties are produced and what capabilities each mechanism has in regards to paging, eventing, messageid, etc.\n\nWhile I would love to see things be consolidated, I'm quite confused at how we're accomplishing that, while still keeping the behavior the same without having the option flag.\n\nAny detail you could add in the commit message would be greatly appreciated."
                },
                {
                    "file": "redfish-core/include/event_service_manager.hpp",
                    "line": 643,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Did you test the subscribe capability when rsyslog isn't present?  I suspect this path is incorrect now after your change."
                },
                {
                    "file": "redfish-core/include/event_service_manager.hpp",
                    "line": 643,
                    "reviewer": {
                        "name": "Alexander",
                        "email": "alexander.hansen@9elements.com",
                        "username": "pointbazaar"
                    },
                    "message": "I did not know of the subscribe capability. I left these call sites alone in the newest revision and focused only on the request handlers."
                },
                {
                    "file": "redfish-core/include/event_service_manager.hpp",
                    "line": 899,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Same as above."
                },
                {
                    "file": "redfish-core/include/event_service_manager.hpp",
                    "line": 899,
                    "reviewer": {
                        "name": "Alexander",
                        "email": "alexander.hansen@9elements.com",
                        "username": "pointbazaar"
                    },
                    "message": "I did not know of the subscribe capability. I left these call sites alone in the newest revision and focused only on the request handlers."
                },
                {
                    "file": "redfish-core/lib/log_services.hpp",
                    "line": 1774,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This is still a very large refactor in the middle of the patchset."
                },
                {
                    "file": "redfish-core/lib/log_services.hpp",
                    "line": 1774,
                    "reviewer": {
                        "name": "Alexander",
                        "email": "alexander.hansen@9elements.com",
                        "username": "pointbazaar"
                    },
                    "message": "The issue with the ```redfish-core/lib/log_services.hpp``` file is\n\n- it's a header filled with implementation functions\n- the functions are not pre-declared and thus i need to reorder them so the compiler can find the symbol.\n\nIf you think we can pre-declare the functions, please tell me and i can do that to avoid moving functions around."
                },
                {
                    "file": "redfish-core/lib/log_services.hpp",
                    "line": 1618,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "1, this should be inline, not static.\n2. We already have equivalents of this function for collection sorting.  Why are we creating a new one?  It looks technically worse than the first one, because it's doing string compares on date objects."
                },
                {
                    "file": "redfish-core/lib/log_services.hpp",
                    "line": 1630,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "nit, this isn't a lambda."
                },
                {
                    "file": "redfish-core/lib/log_services.hpp",
                    "line": 1711,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Why is this being passed in as an arg if it's not connected to anything?  This loos like just a stack variable?"
                },
                {
                    "file": "redfish-core/lib/log_services.hpp",
                    "line": 1711,
                    "reviewer": {
                        "name": "Alexander",
                        "email": "alexander.hansen@9elements.com",
                        "username": "pointbazaar"
                    },
                    "message": "comment should not apply anymore in newest revision. feel free to reopen if otherwise."
                },
                {
                    "file": "redfish-core/lib/log_services.hpp",
                    "line": 1734,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This doesn't look correct.  Only the"
                },
                {
                    "file": "redfish-core/lib/log_services.hpp",
                    "line": 1734,
                    "reviewer": {
                        "name": "Alexander",
                        "email": "alexander.hansen@9elements.com",
                        "username": "pointbazaar"
                    },
                    "message": "Can you explain more about ```QueryCapabilities``` class?\n\nI can imagine ```top``` and ```skip``` being related to pagination. I think the unified solution can support pagination, right?\n\nSince we have the total order relation."
                },
                {
                    "file": "redfish-core/lib/log_services.hpp",
                    "line": 1734,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> Can you explain more about ```QueryCapabilities``` class?\n\nCode review isn't a place for questions about the Redfish standard.  Discord, the mailing list or Redfish forum is where questions like this should be asked (ideally before pushing code that you don't understand, but that's ok this time).\n\n> \n> I can imagine ```top``` and ```skip``` being related to pagination. I think the unified solution can support pagination, right?\n\nI'm not sure who you're asking, but considering you're writing the code for this unified solution, I'd expect you would know whether or not paging works and was tested?  If you're asking me, I don't see how they could work with the code as you've written it.\n\n> \n> Since we have the total order relation."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 31,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/event_service_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -9
                },
                {
                    "file": "meson.options",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -9
                },
                {
                    "file": "Redfish.md",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -6
                },
                {
                    "file": "config/meson.build",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -1
                },
                {
                    "file": "redfish-core/src/redfish.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -14
                },
                {
                    "file": "redfish-core/lib/log_services.hpp",
                    "type": "MODIFIED",
                    "insertions": 253,
                    "deletions": -293
                },
                {
                    "file": "src/webserver_run.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -7
                }
            ],
            "sizeInsertions": 299,
            "sizeDeletions": 339
        },
        {
            "number": 5,
            "revision": "39b8a0cdb987769a913c6ac638b0373d0c155938",
            "parents": [
                "4bb72ff526d4ce1bf46c9ed5e5bba0403e95c50c"
            ],
            "ref": "refs/changes/04/73404/5",
            "uploader": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "createdOn": 1723133252,
            "author": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 59,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/src/redfish.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -14
                },
                {
                    "file": "redfish-core/lib/log_services.hpp",
                    "type": "MODIFIED",
                    "insertions": 132,
                    "deletions": -204
                }
            ],
            "sizeInsertions": 196,
            "sizeDeletions": 218
        },
        {
            "number": 6,
            "revision": "b10c4b2d3fb358def706ae24a69e8dec5895f483",
            "parents": [
                "4bb72ff526d4ce1bf46c9ed5e5bba0403e95c50c"
            ],
            "ref": "refs/changes/04/73404/6",
            "uploader": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "createdOn": 1723133437,
            "author": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I'm starting to understand this patch a little better now that we've simplified it;  Essentially you're taking the two different logging systems and merging them into a single collection?  That seems error prone for a number of reasons.\n\n1. Entries are going to be duplicated (because both rely on the journal as a \"source\" or backing.\n2. Rollover is going to happen incorrectly, as the dbus based events are going to roll over in a different pile than the rsyslog based events.\n3. We're going to have a mix of messages that have a proper MessageId, and those that don't.  One of the expectations when the rsyslog is used is that every entry has a proper MessageId.\n4. EventService eventing won't work for the non-rsyslog based events.\n\n\nHave you checked that paging works properly when the values are intermixed?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Alexander",
                        "email": "alexander.hansen@9elements.com",
                        "username": "pointbazaar"
                    },
                    "message": "1. If entries are really duplicated we ought to be able to de-duplicate them by some criterion. Then just display one but delete both if requested. I'm not in the know about all the properties these events may have, so take this with a grain of salt.\n\nAnyways, duplicate entries are better than having one or the other in my personal opinion. And then missing out on some event logs. This whole patch idea is just meant as a temporary measure anyways since the rsyslog stuff seems to be the legacy thing. So it is expected that it is pulled out at some point.\n\nBut to do this conversion it will be helpful for people to see messages from both backends. Then they can convert the code which produces the Event Log Entry and verify that the message is still produced. Without having to switch the meson option and recompile.\n\n2. What do you mean by rollover? Like multiple log files?\n\n3. I would have to look into the redfish spec as to which fields are expected in the json. As long as that is met the client will have to deal with it.\n\n4. Will still have to look into the EventService stuff. I tried to leave it out of this patch and just focus on the request handlers.\n\nbtw sorry for needlessly pushing the 2 prior patches, had the --force still enabled in some script."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> 1. If entries are really duplicated we ought to be able to de-duplicate them by some criterion. Then just display one but delete both if requested. I'm not in the know about all the properties these events may have, so take this with a grain of salt.\n\nCool;  That would be business logic done outside bmcweb if you wanted to try to deduplicate.  Not really sure how that would work, but probably worth raising some discussions with the two backend maintainers to see how that would be accomplished.\n\n> \n> Anyways, duplicate entries are better than having one or the other in my personal opinion.\n\nYou're welcome to your opinion, but my opinion is that duplicated entries are a bug/regression, and we shouldn't regress code that works.  Feel free to reach out to the other implementers/users of this code and see if they're ok with the external APIs changing behavior significantly, but I somewhat doubt that'll be ok.\n\n> And then missing out on some event logs. This whole patch idea is just meant as a temporary measure anyways since the rsyslog stuff seems to be the legacy thing. So it is expected that it is pulled out at some point.\n\nI'm not sure where you got the idea that it's \"legacy\".  rsyslog today supports more features and is faster than the phosphor-logging based entries.  phosphor-logging entries support the ideal of using dbus for everything.  They're different goals, one is not \"legacy\".\n\nI know there was some effort to try to make phosphor-logging more performant and support more features, but that doesn't make the rsyslog stuff legacy until we at least get to feature parity.  Once we're there, then we can discuss deprecating one or the other.\n\n> \n> But to do this conversion it will be helpful for people to see messages from both backends. Then they can convert the code which produces the Event Log Entry and verify that the message is still produced. Without having to switch the meson option and recompile.\n\nThese extra messages and lack of support will cause problems for clients.  That's why there's an option in the first place.\n\n> \n> 2. What do you mean by rollover? Like multiple log files?\n\nNo, I mean logs are handled in a circular buffer.  Redfish expects that it is ONE circular buffer.  By combining two, now entries will disappear at random, not only from the tail.\n\n> \n> 3. I would have to look into the redfish spec as to which fields are expected in the json. As long as that is met the client will have to deal with it.\n\nWith respect, that's not how that works.  If bmcweb suddenly responded with no fields except the Redfish minimum, that would break things functionally.  bmcweb is an implementation on top of Redfish, for which we make additional guarantees about support.\n\n> \n> 4. Will still have to look into the EventService stuff. I tried to leave it out of this patch and just focus on the request handlers.\n\nSo long as we're on the same page, this patchset can't merge until the Redfish functionality is correct, because you've removed the option flag that would let us do experimental development.  If your intent is for nothing to merge until all the performance, eventing, and behavior work is done, then let me know when you've tested everything and think this patch (presumably series of patches) can merge.\n\n> \n> btw sorry for needlessly pushing the 2 prior patches, had the --force still enabled in some script.\n\nNot a big deal.  Content looks the same so I don't think there's even anything to fix."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I'm not really sure why we're trying to remove an option flag in one fell swoop but as written, this patch is going to break client implementations and Redfish guarantees for both option modes (as I'm sure you saw the behavior change in your testing).  If you need some leeway to go make breakages and fix them, then integrate later, generally we would use an \"experimental-*\" option flag for that so that we don't break everyone else while you're doing that, so we can switch your code on only for you.\nIf you want to make an option, please put both your name and the date it will be deleted in the description (generally we do 6 months after merge).\n\n\nFrom what's actually written here here, it's looking like you'd rather stack patches, which is fine too.  Please mark them WIP until they're correct to the previous client-facing behavior, and ready for review."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 59,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/src/redfish.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -14
                },
                {
                    "file": "redfish-core/lib/log_services.hpp",
                    "type": "MODIFIED",
                    "insertions": 132,
                    "deletions": -204
                }
            ],
            "sizeInsertions": 196,
            "sizeDeletions": 218
        },
        {
            "number": 7,
            "revision": "837cb58856d407641170de087fbee2b33a9c3bf8",
            "parents": [
                "52f1a294b29f3d6fe1614b5a1bc1574df60029e7"
            ],
            "ref": "refs/changes/04/73404/7",
            "uploader": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "createdOn": 1723154439,
            "author": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "kind": "NO_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 59,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/src/redfish.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -14
                },
                {
                    "file": "redfish-core/lib/log_services.hpp",
                    "type": "MODIFIED",
                    "insertions": 132,
                    "deletions": -204
                }
            ],
            "sizeInsertions": 196,
            "sizeDeletions": 218
        },
        {
            "number": 8,
            "revision": "c5a5b72b34c040bdfd1e7261908a267468295643",
            "parents": [
                "c0e9a45507e55fa3cfbf75b1443f17eac36bf5b8"
            ],
            "ref": "refs/changes/04/73404/8",
            "uploader": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "createdOn": 1723228516,
            "author": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "kind": "NO_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 59,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/src/redfish.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -14
                },
                {
                    "file": "redfish-core/lib/log_services.hpp",
                    "type": "MODIFIED",
                    "insertions": 132,
                    "deletions": -204
                }
            ],
            "sizeInsertions": 196,
            "sizeDeletions": 218
        },
        {
            "number": 9,
            "revision": "14fe72ae66c42a9c26e25b86ab54d3b06d2845f0",
            "parents": [
                "c046286aec13bd08ebbd28145a3d01b2a93ae6a1"
            ],
            "ref": "refs/changes/04/73404/9",
            "uploader": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "createdOn": 1723473508,
            "author": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 59,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/src/redfish.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -14
                },
                {
                    "file": "redfish-core/lib/log_services.hpp",
                    "type": "MODIFIED",
                    "insertions": 132,
                    "deletions": -204
                }
            ],
            "sizeInsertions": 196,
            "sizeDeletions": 218
        }
    ]
}