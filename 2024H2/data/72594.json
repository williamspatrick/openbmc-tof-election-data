{
    "project": "openbmc/phosphor-debug-collector",
    "branch": "master",
    "id": "I9c03de15174f517c182258b88245a58c74f4313f",
    "number": 72594,
    "subject": "Move to libpldm instance id APIs",
    "owner": {
        "name": "Lakshmi Yadlapati",
        "email": "lakshmiy@us.ibm.com",
        "username": "Lakshmi-y"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-debug-collector/+/72594",
    "hashtags": [],
    "createdOn": 1720397814,
    "lastUpdated": 1724700256,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1720397814,
            "reviewer": {
                "name": "Lakshmi Yadlapati",
                "email": "lakshmiy@us.ibm.com",
                "username": "Lakshmi-y"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1720397833,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1720397833,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1720398159,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/87427/ : SUCCESS"
        },
        {
            "timestamp": 1721324630,
            "reviewer": {
                "name": "Lakshmi Yadlapati",
                "email": "lakshmiy@us.ibm.com",
                "username": "Lakshmi-y"
            },
            "message": "Uploaded patch set 2.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1721324656,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1721324657,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1721324723,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/88282/ : SUCCESS"
        },
        {
            "timestamp": 1721970265,
            "reviewer": {
                "name": "MARRI DEVENDER RAO",
                "email": "devenrao@in.ibm.com",
                "username": "devenrao"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1721998499,
            "reviewer": {
                "name": "Lakshmi Yadlapati",
                "email": "lakshmiy@us.ibm.com",
                "username": "Lakshmi-y"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1721998534,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1721998534,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1721998595,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/88690/ : SUCCESS"
        },
        {
            "timestamp": 1721998639,
            "reviewer": {
                "name": "Lakshmi Yadlapati",
                "email": "lakshmiy@us.ibm.com",
                "username": "Lakshmi-y"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1722257879,
            "reviewer": {
                "name": "MARRI DEVENDER RAO",
                "email": "devenrao@in.ibm.com",
                "username": "devenrao"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1724699059,
            "reviewer": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "message": "Uploaded patch set 4.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1724699098,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1724699098,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1724699117,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/90692/ : FAILURE"
        },
        {
            "timestamp": 1724699150,
            "reviewer": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1724700153,
            "reviewer": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "message": "Uploaded patch set 5.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1724700188,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1724700188,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1724700256,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/90694/ : SUCCESS"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "f1b1261fe0fb114b4ac91e568b943388290ec567",
            "parents": [
                "df01f8ab5926220de16af706f5b2ac76e573e287"
            ],
            "ref": "refs/changes/94/72594/1",
            "uploader": {
                "name": "Lakshmi Yadlapati",
                "email": "lakshmiy@us.ibm.com",
                "username": "Lakshmi-y"
            },
            "createdOn": 1720397814,
            "author": {
                "name": "Lakshmi Yadlapati",
                "email": "lakshmiy@us.ibm.com",
                "username": "Lakshmi-y"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "host-transport-extensions/pldm/common/pldm_utils.hpp",
                    "type": "MODIFIED",
                    "insertions": 38,
                    "deletions": -3
                },
                {
                    "file": "host-transport-extensions/pldm/oem/ibm/pldm_oem_cmds.cpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -3
                },
                {
                    "file": "host-transport-extensions/pldm/common/pldm_utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 70,
                    "deletions": -30
                }
            ],
            "sizeInsertions": 138,
            "sizeDeletions": 36
        },
        {
            "number": 2,
            "revision": "b0778ff72a5ef514e1ae345fa40b1f29903c7e7e",
            "parents": [
                "50646c2de021b8cfba21d63f656f5ad559cb2818"
            ],
            "ref": "refs/changes/94/72594/2",
            "uploader": {
                "name": "Lakshmi Yadlapati",
                "email": "lakshmiy@us.ibm.com",
                "username": "Lakshmi-y"
            },
            "createdOn": 1721324630,
            "author": {
                "name": "Lakshmi Yadlapati",
                "email": "lakshmiy@us.ibm.com",
                "username": "Lakshmi-y"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "host-transport-extensions/pldm/common/pldm_utils.hpp",
                    "line": 46,
                    "reviewer": {
                        "name": "MARRI DEVENDER RAO",
                        "email": "devenrao@in.ibm.com",
                        "username": "devenrao"
                    },
                    "message": "mixing c++ with C functions, why can't we have initPLDMInstanceIdDb, destroyPLDMInstanceIdDb as private methods of the PLDMInstanceManager"
                },
                {
                    "file": "host-transport-extensions/pldm/common/pldm_utils.hpp",
                    "line": 46,
                    "reviewer": {
                        "name": "Lakshmi Yadlapati",
                        "email": "lakshmiy@us.ibm.com",
                        "username": "Lakshmi-y"
                    },
                    "message": "Done"
                },
                {
                    "file": "host-transport-extensions/pldm/oem/ibm/pldm_oem_cmds.cpp",
                    "line": 124,
                    "reviewer": {
                        "name": "MARRI DEVENDER RAO",
                        "email": "devenrao@in.ibm.com",
                        "username": "devenrao"
                    },
                    "message": "RAII if possible"
                },
                {
                    "file": "host-transport-extensions/pldm/oem/ibm/pldm_oem_cmds.cpp",
                    "line": 124,
                    "reviewer": {
                        "name": "Lakshmi Yadlapati",
                        "email": "lakshmiy@us.ibm.com",
                        "username": "Lakshmi-y"
                    },
                    "message": "RAII is not appropriate here because instance IDs need to be freed explicitly to allow reuse, which is managed by the database. RAII would prematurely release the resource at scope exit, whereas instance IDs must be freed as needed for recycling. RAII should be applied to manage the database lifecycle, not the instance IDs"
                },
                {
                    "file": "host-transport-extensions/pldm/oem/ibm/pldm_oem_cmds.cpp",
                    "line": 124,
                    "reviewer": {
                        "name": "MARRI DEVENDER RAO",
                        "email": "devenrao@in.ibm.com",
                        "username": "devenrao"
                    },
                    "message": "We could do like this with an inner class\nPLDMInstance(int instanceID, int eid):_instanceId(instanceID), _eid(eid)\n{\n}\n~PLDMInstance()\n{\nfreePLDMInstanceID(instanceID, eid);\n}\n\nmaintainer can make the call"
                },
                {
                    "file": "host-transport-extensions/pldm/oem/ibm/pldm_oem_cmds.cpp",
                    "line": 130,
                    "reviewer": {
                        "name": "MARRI DEVENDER RAO",
                        "email": "devenrao@in.ibm.com",
                        "username": "devenrao"
                    },
                    "message": "similar to this we could enclose instanceID also in a inner class and call freePLDMInstanceID in the destructor"
                },
                {
                    "file": "host-transport-extensions/pldm/oem/ibm/pldm_oem_cmds.cpp",
                    "line": 130,
                    "reviewer": {
                        "name": "Edward A. James",
                        "email": "eajames@us.ibm.com",
                        "username": "eddiejames"
                    },
                    "message": "Please see Andrew Jeffrey's comments on https://gerrit.openbmc.org/c/openbmc/phosphor-debug-collector/+/63889 where he indicated that RAII for the instance ID didn't seem to be a good idea."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "host-transport-extensions/pldm/common/pldm_utils.hpp",
                    "type": "MODIFIED",
                    "insertions": 38,
                    "deletions": -3
                },
                {
                    "file": "host-transport-extensions/pldm/oem/ibm/pldm_oem_cmds.cpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": 0
                },
                {
                    "file": "host-transport-extensions/pldm/common/pldm_utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 71,
                    "deletions": -30
                }
            ],
            "sizeInsertions": 134,
            "sizeDeletions": 33
        },
        {
            "number": 3,
            "revision": "edbc40b9701640334447bef3f70fa67db59012c0",
            "parents": [
                "50646c2de021b8cfba21d63f656f5ad559cb2818"
            ],
            "ref": "refs/changes/94/72594/3",
            "uploader": {
                "name": "Lakshmi Yadlapati",
                "email": "lakshmiy@us.ibm.com",
                "username": "Lakshmi-y"
            },
            "createdOn": 1721998499,
            "author": {
                "name": "Lakshmi Yadlapati",
                "email": "lakshmiy@us.ibm.com",
                "username": "Lakshmi-y"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "host-transport-extensions/pldm/common/pldm_utils.hpp",
                    "type": "MODIFIED",
                    "insertions": 39,
                    "deletions": -3
                },
                {
                    "file": "host-transport-extensions/pldm/oem/ibm/pldm_oem_cmds.cpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": 0
                },
                {
                    "file": "host-transport-extensions/pldm/common/pldm_utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 71,
                    "deletions": -30
                }
            ],
            "sizeInsertions": 135,
            "sizeDeletions": 33
        },
        {
            "number": 4,
            "revision": "35ea3b4a5af043d7161708c92f467ea19a4d7564",
            "parents": [
                "973b291eb264ae8de4119c8d62fd16230926d257"
            ],
            "ref": "refs/changes/94/72594/4",
            "uploader": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "createdOn": 1724699059,
            "author": {
                "name": "Lakshmi Yadlapati",
                "email": "lakshmiy@us.ibm.com",
                "username": "Lakshmi-y"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "host-transport-extensions/pldm/common/pldm_utils.hpp",
                    "type": "MODIFIED",
                    "insertions": 39,
                    "deletions": -3
                },
                {
                    "file": "host-transport-extensions/pldm/oem/ibm/pldm_oem_cmds.cpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": 0
                },
                {
                    "file": "host-transport-extensions/pldm/common/pldm_utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 71,
                    "deletions": -30
                }
            ],
            "sizeInsertions": 136,
            "sizeDeletions": 33
        },
        {
            "number": 5,
            "revision": "3295e76921455312a9f9e771629f5b48fb203131",
            "parents": [
                "973b291eb264ae8de4119c8d62fd16230926d257"
            ],
            "ref": "refs/changes/94/72594/5",
            "uploader": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "createdOn": 1724700153,
            "author": {
                "name": "Lakshmi Yadlapati",
                "email": "lakshmiy@us.ibm.com",
                "username": "Lakshmi-y"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "host-transport-extensions/pldm/common/pldm_utils.hpp",
                    "type": "MODIFIED",
                    "insertions": 39,
                    "deletions": -3
                },
                {
                    "file": "host-transport-extensions/pldm/oem/ibm/pldm_oem_cmds.cpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": 0
                },
                {
                    "file": "host-transport-extensions/pldm/common/pldm_utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 71,
                    "deletions": -30
                }
            ],
            "sizeInsertions": 136,
            "sizeDeletions": 33
        }
    ]
}