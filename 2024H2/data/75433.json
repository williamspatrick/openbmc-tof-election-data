{
    "project": "openbmc/bmcweb",
    "branch": "master",
    "id": "I5821b72f28ba737a5c9b75288d377766c84c6a6a",
    "number": 75433,
    "subject": "Make UserSubscription as shared_ptr in Subscription",
    "owner": {
        "name": "Myung Bae",
        "email": "myungbae@us.ibm.com",
        "username": "baemyung"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/bmcweb/+/75433",
    "hashtags": [],
    "createdOn": 1729605889,
    "lastUpdated": 1730832888,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1729605889,
            "reviewer": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1729605920,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1729605921,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1729605948,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/93558/ : FAILURE"
        },
        {
            "timestamp": 1729607311,
            "reviewer": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "message": "Uploaded patch set 2.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1729607364,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1729607364,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1729608127,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/93559/ : FAILURE"
        },
        {
            "timestamp": 1729609090,
            "reviewer": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1729609124,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1729609124,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1729609931,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/93562/ : SUCCESS"
        },
        {
            "timestamp": 1729617403,
            "reviewer": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "message": "Set Ready For Review"
        },
        {
            "timestamp": 1729617948,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(3 comments)"
        },
        {
            "timestamp": 1729622574,
            "reviewer": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "message": "Patch Set 3:\n\n(3 comments)"
        },
        {
            "timestamp": 1729625043,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(3 comments)"
        },
        {
            "timestamp": 1729625224,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1729625353,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1729625474,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1729631433,
            "reviewer": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "message": "Uploaded patch set 4.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1729631447,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1729631447,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1729631645,
            "reviewer": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1729631671,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1729631671,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1729631675,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/93574/ : ABORTED"
        },
        {
            "timestamp": 1729631740,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/93576/ : FAILURE"
        },
        {
            "timestamp": 1729631907,
            "reviewer": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "message": "Uploaded patch set 6.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1729631937,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1729631937,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: -Ok-To-Test"
        },
        {
            "timestamp": 1729632538,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/93577/ : FAILURE"
        },
        {
            "timestamp": 1729635307,
            "reviewer": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "message": "Uploaded patch set 7.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1729635342,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1729635342,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: -Ok-To-Test"
        },
        {
            "timestamp": 1729636087,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/93578/ : SUCCESS"
        },
        {
            "timestamp": 1729636171,
            "reviewer": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "message": "Patch Set 7:\n\n(4 comments)"
        },
        {
            "timestamp": 1730176358,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1730209097,
            "reviewer": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "message": "Uploaded patch set 8.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1730209124,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1730209124,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: -Ok-To-Test"
        },
        {
            "timestamp": 1730209131,
            "reviewer": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1730209874,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/93881/ : SUCCESS"
        },
        {
            "timestamp": 1730379454,
            "reviewer": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "message": "Patch Set 8:\n\n(3 comments)"
        },
        {
            "timestamp": 1730397566,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1730709763,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 8:\n\n(4 comments)"
        },
        {
            "timestamp": 1730830222,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Uploaded patch set 9.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1730830227,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 8:\n\n(2 comments)"
        },
        {
            "timestamp": 1730830236,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 9: Code-Review+1"
        },
        {
            "timestamp": 1730830237,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1730830237,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: -Ok-To-Test"
        },
        {
            "timestamp": 1730830351,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 9:\n\n(1 comment)"
        },
        {
            "timestamp": 1730830856,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "message": "Patch Set 9: Code-Review+2\n\n(1 comment)"
        },
        {
            "timestamp": 1730831042,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/94097/ : SUCCESS"
        },
        {
            "timestamp": 1730832888,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Change has been successfully rebased and submitted as 5fe4ef35821f946c91d9c20cee01e632d6d3ffd4"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "783f2d44cdb5f6b9d5a1b5de4546b89862295b50",
            "parents": [
                "29d7ca982d61f3cb83e98e44e585d42f2f1b803c"
            ],
            "ref": "refs/changes/33/75433/1",
            "uploader": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "createdOn": 1729605889,
            "author": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/event_service_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 37,
                    "deletions": -35
                },
                {
                    "file": "include/event_service_store.hpp",
                    "type": "MODIFIED",
                    "insertions": 28,
                    "deletions": -25
                },
                {
                    "file": "include/persistent_data.hpp",
                    "type": "MODIFIED",
                    "insertions": 22,
                    "deletions": -22
                },
                {
                    "file": "redfish-core/lib/event_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 34,
                    "deletions": -35
                },
                {
                    "file": "redfish-core/lib/eventservice_sse.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -6
                }
            ],
            "sizeInsertions": 147,
            "sizeDeletions": 123
        },
        {
            "number": 2,
            "revision": "f6ba791ba731f062929bef40b3c3f6cc7bbee95b",
            "parents": [
                "29d7ca982d61f3cb83e98e44e585d42f2f1b803c"
            ],
            "ref": "refs/changes/33/75433/2",
            "uploader": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "createdOn": 1729607311,
            "author": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/event_service_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 37,
                    "deletions": -35
                },
                {
                    "file": "include/event_service_store.hpp",
                    "type": "MODIFIED",
                    "insertions": 28,
                    "deletions": -25
                },
                {
                    "file": "include/persistent_data.hpp",
                    "type": "MODIFIED",
                    "insertions": 22,
                    "deletions": -22
                },
                {
                    "file": "redfish-core/lib/event_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 34,
                    "deletions": -35
                },
                {
                    "file": "redfish-core/lib/eventservice_sse.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 146,
            "sizeDeletions": 121
        },
        {
            "number": 3,
            "revision": "9e79330731a3ffef5abe0506e720d8e4923d29e2",
            "parents": [
                "29d7ca982d61f3cb83e98e44e585d42f2f1b803c"
            ],
            "ref": "refs/changes/33/75433/3",
            "uploader": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "createdOn": 1729609090,
            "author": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "include/event_service_store.hpp",
                    "line": 35,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "why did this method need to change?  this method takes no ownership, so returning by value seems reasonable.\n\nthe struct can be put into a shared pointer later if required."
                },
                {
                    "file": "include/event_service_store.hpp",
                    "line": 35,
                    "reviewer": {
                        "name": "Myung Bae",
                        "email": "myungbae@us.ibm.com",
                        "username": "baemyung"
                    },
                    "message": "Ultimately the `UserSubscription` object from `fromJson()` is going to used as a `shared_ptr<UserSubscription>` object as a part of `Subscription` and also for `subscriptionsMap[]` and `subscriptionsConfigMap[]`.\n\nIf it returns a UserSubscription (or optional<>) object, it will need to be passed again to create a shared_ptr<UserSubscription> in Subscription constructor or subscriptionsMap.\n\nSo, I think it may be more efficient to create it as a shared_ptr once here,  and share the pointer for Subscription, subscriptionsMap, and subscriptionsConfigMap."
                },
                {
                    "file": "include/event_service_store.hpp",
                    "line": 35,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> Ultimately the `UserSubscription` object from `fromJson()` is going to used as a `shared_ptr<UserSubscription>` object as a part of `Subscription` and also for `subscriptionsMap[]` and `subscriptionsConfigMap[]`.\n\nif this function had unit tests (like it should) it wouldn't always \"ultimately\" be in a shared ptr.  Keeping it not a shared ptr at this point makes the code simpler\n\n> \n> If it returns a UserSubscription (or optional<>) object, it will need to be passed again to create a shared_ptr<UserSubscription> in Subscription constructor or subscriptionsMap.\n> \n> So, I think it may be more efficient to create it as a shared_ptr once here,  and share the pointer for Subscription, subscriptionsMap, and subscriptionsConfigMap.\n\n\nThe second pass is done by a std::move, so it's not a large copy."
                },
                {
                    "file": "include/event_service_store.hpp",
                    "line": 35,
                    "reviewer": {
                        "name": "Myung Bae",
                        "email": "myungbae@us.ibm.com",
                        "username": "baemyung"
                    },
                    "message": "I changed as you suggested"
                },
                {
                    "file": "include/event_service_store.hpp",
                    "line": 35,
                    "reviewer": {
                        "name": "Myung Bae",
                        "email": "myungbae@us.ibm.com",
                        "username": "baemyung"
                    },
                    "message": "Done"
                },
                {
                    "file": "include/event_service_store.hpp",
                    "line": 332,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "same here.  this function takes no ownership of user sub.  why is it passing an owning object?"
                },
                {
                    "file": "include/event_service_store.hpp",
                    "line": 332,
                    "reviewer": {
                        "name": "Myung Bae",
                        "email": "myungbae@us.ibm.com",
                        "username": "baemyung"
                    },
                    "message": "As `UserSubscription` data is used in both `subscriptionsMap[]` and `subscriptionsConfigMap[]`, it would be more efficient by replacing the matching `subscriptionsConfigMap[id].second` with `userSub` (shared_ptr), and it can avoid the copy of the content of the userSubscription."
                },
                {
                    "file": "include/event_service_store.hpp",
                    "line": 332,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "ACK, I see the ownership transfer now."
                },
                {
                    "file": "include/event_service_store.hpp",
                    "line": 332,
                    "reviewer": {
                        "name": "Myung Bae",
                        "email": "myungbae@us.ibm.com",
                        "username": "baemyung"
                    },
                    "message": "Done"
                },
                {
                    "file": "include/event_service_store.hpp",
                    "line": 343,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Now that these are all shared pointers and we're making no copies, isn't this just replacing the existing entry in the map with the same pointer?"
                },
                {
                    "file": "include/event_service_store.hpp",
                    "line": 343,
                    "reviewer": {
                        "name": "Myung Bae",
                        "email": "myungbae@us.ibm.com",
                        "username": "baemyung"
                    },
                    "message": "That's right. \nIn fact, updateUserSubscriptionConfig() is not needed. \nI kept it as is to maintain the same semantics, i.e. it is updated for both subscriptionsMap & subscriptionsConfigMap, but I think we can remove it now."
                },
                {
                    "file": "include/event_service_store.hpp",
                    "line": 343,
                    "reviewer": {
                        "name": "Myung Bae",
                        "email": "myungbae@us.ibm.com",
                        "username": "baemyung"
                    },
                    "message": "I removed `updateUserSubscriptionConfig`"
                },
                {
                    "file": "include/event_service_store.hpp",
                    "line": 343,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Done"
                },
                {
                    "file": "include/persistent_data.hpp",
                    "line": 273,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This is making a shared_ptr copy for no real reason.  Can we just do\nif (it->second == nullptr){\n   continue;\n}\n\nconst UserSubscription& subValue = *it.second;"
                },
                {
                    "file": "include/persistent_data.hpp",
                    "line": 273,
                    "reviewer": {
                        "name": "Myung Bae",
                        "email": "myungbae@us.ibm.com",
                        "username": "baemyung"
                    },
                    "message": "Done"
                },
                {
                    "file": "redfish-core/include/event_service_manager.hpp",
                    "line": 277,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "why was this added?  sse connections don\u2019t have user params, so if this is now a pointer, presumably sse connections should be nullptr?"
                },
                {
                    "file": "redfish-core/include/event_service_manager.hpp",
                    "line": 277,
                    "reviewer": {
                        "name": "Myung Bae",
                        "email": "myungbae@us.ibm.com",
                        "username": "baemyung"
                    },
                    "message": "SSE subscription also uses UserSubscription data for its parameters - https://github.com/openbmc/bmcweb/blob/29d7ca982d61f3cb83e98e44e585d42f2f1b803c/redfish-core/lib/eventservice_sse.hpp#L50\n\nSo, UserSubscription object would still be needed."
                },
                {
                    "file": "redfish-core/include/event_service_manager.hpp",
                    "line": 277,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Ug, ok, that's not the intent, but something to clean up later."
                },
                {
                    "file": "redfish-core/include/event_service_manager.hpp",
                    "line": 277,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Done"
                },
                {
                    "file": "redfish-core/lib/eventservice_sse.hpp",
                    "line": 51,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Need to check for nullptr here."
                },
                {
                    "file": "redfish-core/lib/eventservice_sse.hpp",
                    "line": 51,
                    "reviewer": {
                        "name": "Myung Bae",
                        "email": "myungbae@us.ibm.com",
                        "username": "baemyung"
                    },
                    "message": "Done"
                },
                {
                    "file": "redfish-core/lib/eventservice_sse.hpp",
                    "line": 54,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "now that I look at it, this arguably isn't even correct for SSE subscriptions.  Oh well, something to fix in another patch."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/event_service_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 39,
                    "deletions": -35
                },
                {
                    "file": "include/event_service_store.hpp",
                    "type": "MODIFIED",
                    "insertions": 29,
                    "deletions": -25
                },
                {
                    "file": "include/persistent_data.hpp",
                    "type": "MODIFIED",
                    "insertions": 22,
                    "deletions": -22
                },
                {
                    "file": "redfish-core/lib/event_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 34,
                    "deletions": -35
                },
                {
                    "file": "redfish-core/lib/eventservice_sse.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 149,
            "sizeDeletions": 121
        },
        {
            "number": 4,
            "revision": "f89824c4c430e2b39903ff59ca9e84f5fe06f658",
            "parents": [
                "29d7ca982d61f3cb83e98e44e585d42f2f1b803c"
            ],
            "ref": "refs/changes/33/75433/4",
            "uploader": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "createdOn": 1729631433,
            "author": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/event_service_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 36,
                    "deletions": -31
                },
                {
                    "file": "include/event_service_store.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -13
                },
                {
                    "file": "include/persistent_data.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -6
                },
                {
                    "file": "redfish-core/lib/event_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 24,
                    "deletions": -29
                },
                {
                    "file": "redfish-core/lib/eventservice_sse.hpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 99,
            "sizeDeletions": 83
        },
        {
            "number": 5,
            "revision": "04029af1b6e7f8ac55af97693a45831fc15308ee",
            "parents": [
                "29d7ca982d61f3cb83e98e44e585d42f2f1b803c"
            ],
            "ref": "refs/changes/33/75433/5",
            "uploader": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "createdOn": 1729631645,
            "author": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/event_service_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 36,
                    "deletions": -31
                },
                {
                    "file": "include/event_service_store.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -13
                },
                {
                    "file": "include/persistent_data.hpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -6
                },
                {
                    "file": "redfish-core/lib/event_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 24,
                    "deletions": -29
                },
                {
                    "file": "redfish-core/lib/eventservice_sse.hpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 103,
            "sizeDeletions": 83
        },
        {
            "number": 6,
            "revision": "e0fd1cc8fa55b79d24bf0870543d3afe69602373",
            "parents": [
                "29d7ca982d61f3cb83e98e44e585d42f2f1b803c"
            ],
            "ref": "refs/changes/33/75433/6",
            "uploader": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "createdOn": 1729631907,
            "author": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/event_service_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 36,
                    "deletions": -31
                },
                {
                    "file": "include/event_service_store.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -13
                },
                {
                    "file": "include/persistent_data.hpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -6
                },
                {
                    "file": "redfish-core/lib/event_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 24,
                    "deletions": -29
                },
                {
                    "file": "redfish-core/lib/eventservice_sse.hpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 103,
            "sizeDeletions": 83
        },
        {
            "number": 7,
            "revision": "afacee965506eb7481762c848b6be3ef726d1b4d",
            "parents": [
                "29d7ca982d61f3cb83e98e44e585d42f2f1b803c"
            ],
            "ref": "refs/changes/33/75433/7",
            "uploader": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "createdOn": 1729635307,
            "author": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "is this patchset still needed?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Myung Bae",
                        "email": "myungbae@us.ibm.com",
                        "username": "baemyung"
                    },
                    "message": "I think it is still better to use shared_ptr.\n- We can avoid the duplication of `UserSubscription` data  which are in both `subscriptionsMap` and `subscriptionsConfigMap`.\n- It also allows the removal of `updateUserSubscriptionConfig()` which basically copies userSubscription to `subscriptionConfigMap`.\n\nI've pushed a new patchset"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "\ud83d\udc4d"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/event_service_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 36,
                    "deletions": -31
                },
                {
                    "file": "include/event_service_store.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -13
                },
                {
                    "file": "include/persistent_data.hpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -6
                },
                {
                    "file": "redfish-core/lib/event_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 24,
                    "deletions": -29
                },
                {
                    "file": "redfish-core/lib/eventservice_sse.hpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 103,
            "sizeDeletions": 83
        },
        {
            "number": 8,
            "revision": "41750f6278c9f7d9f03c26375657f77284ae83da",
            "parents": [
                "a91e0057b56edf05b153b0e5f9bab8e0eecf99f2"
            ],
            "ref": "refs/changes/33/75433/8",
            "uploader": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "createdOn": 1730209097,
            "author": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gunnar@gmills.xyz",
                        "username": "gtmills"
                    },
                    "message": "Isn't this undoing dome of https://github.com/openbmc/bmcweb/commit/4b712a29debc1a0860cc04850b262203cad402a5  ?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "it's undoing a little in code, but in terms of composition vs inheritance (which was the point of that patch) it maintains it.\n\nOverall, I think keeping shared ownership here is probably a good thing."
                },
                {
                    "file": "redfish-core/lib/eventservice_sse.hpp",
                    "line": 50,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "looks like this comment is now in the wrong spot?"
                },
                {
                    "file": "redfish-core/lib/eventservice_sse.hpp",
                    "line": 50,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/event_service_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 38,
                    "deletions": -33
                },
                {
                    "file": "include/event_service_store.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -13
                },
                {
                    "file": "include/persistent_data.hpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -6
                },
                {
                    "file": "redfish-core/lib/event_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 24,
                    "deletions": -29
                },
                {
                    "file": "redfish-core/lib/eventservice_sse.hpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 105,
            "sizeDeletions": 85
        },
        {
            "number": 9,
            "revision": "850b827b8c69e66e2df4232e2b6b191f0b5b1c35",
            "parents": [
                "a91e0057b56edf05b153b0e5f9bab8e0eecf99f2"
            ],
            "ref": "refs/changes/33/75433/9",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1730830222,
            "author": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gunnar@gmills.xyz",
                        "username": "gtmills"
                    },
                    "message": "I am good with this. It seems reasonably tested"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/event_service_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 38,
                    "deletions": -33
                },
                {
                    "file": "include/event_service_store.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -13
                },
                {
                    "file": "include/persistent_data.hpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -6
                },
                {
                    "file": "redfish-core/lib/event_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 24,
                    "deletions": -29
                },
                {
                    "file": "redfish-core/lib/eventservice_sse.hpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": -5
                }
            ],
            "sizeInsertions": 106,
            "sizeDeletions": 86
        },
        {
            "number": 10,
            "revision": "5fe4ef35821f946c91d9c20cee01e632d6d3ffd4",
            "parents": [
                "b07942e362fd4e33d9aca9860b6341e995543a5d"
            ],
            "ref": "refs/changes/33/75433/10",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1730832888,
            "author": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/event_service_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 38,
                    "deletions": -33
                },
                {
                    "file": "include/event_service_store.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -13
                },
                {
                    "file": "include/persistent_data.hpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -6
                },
                {
                    "file": "redfish-core/lib/event_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 24,
                    "deletions": -29
                },
                {
                    "file": "redfish-core/lib/eventservice_sse.hpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": -5
                }
            ],
            "sizeInsertions": 106,
            "sizeDeletions": 86
        }
    ]
}