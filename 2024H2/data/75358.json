{
    "project": "openbmc/bmcweb",
    "branch": "master",
    "id": "I9559e8de08ba02c63a03c4b267434f3d2cdbed93",
    "number": 75358,
    "subject": "Check certificate algorithm",
    "owner": {
        "name": "Chicago Duan",
        "email": "duanzhijia01@ieisystem.com",
        "username": "ChicagoDuan"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/bmcweb/+/75358",
    "hashtags": [],
    "createdOn": 1729215574,
    "lastUpdated": 1735950142,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1729215574,
            "reviewer": {
                "name": "Chicago Duan",
                "email": "duanzhijia01@ieisystem.com",
                "username": "ChicagoDuan"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1729215602,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1729215602,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1729215683,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/93347/ : FAILURE"
        },
        {
            "timestamp": 1729216365,
            "reviewer": {
                "name": "Chicago Duan",
                "email": "duanzhijia01@ieisystem.com",
                "username": "ChicagoDuan"
            },
            "message": "Uploaded patch set 2.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1729216397,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1729216397,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1729216995,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/93348/ : FAILURE"
        },
        {
            "timestamp": 1729217231,
            "reviewer": {
                "name": "Chicago Duan",
                "email": "duanzhijia01@ieisystem.com",
                "username": "ChicagoDuan"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1729217257,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1729217257,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1729218000,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/93349/ : SUCCESS"
        },
        {
            "timestamp": 1729264102,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "message": "Patch Set 3:\n\n(3 comments)"
        },
        {
            "timestamp": 1729265850,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(5 comments)"
        },
        {
            "timestamp": 1730843862,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1730912531,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 3: Code-Review-1\n\n(1 comment)"
        },
        {
            "timestamp": 1731603577,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1735950142,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Abandoned\n\nno response from submitter."
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "0fdfe29a02fc2a1195de533d678f15f67e50e89c",
            "parents": [
                "7585b760ff6319f1efd86db4a736139fd28742c9"
            ],
            "ref": "refs/changes/58/75358/1",
            "uploader": {
                "name": "Chicago Duan",
                "email": "duanzhijia01@ieisystem.com",
                "username": "ChicagoDuan"
            },
            "createdOn": 1729215574,
            "author": {
                "name": "Chicago Duan",
                "email": "duanzhijia01@ieisystem.com",
                "username": "ChicagoDuan"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 39,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/certificate_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "src/ssl_key_handler.cpp",
                    "type": "MODIFIED",
                    "insertions": 16,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 69,
            "sizeDeletions": 1
        },
        {
            "number": 2,
            "revision": "ba44ff5e44753015a5dd56d05fe74db51b5ef369",
            "parents": [
                "7585b760ff6319f1efd86db4a736139fd28742c9"
            ],
            "ref": "refs/changes/58/75358/2",
            "uploader": {
                "name": "Chicago Duan",
                "email": "duanzhijia01@ieisystem.com",
                "username": "ChicagoDuan"
            },
            "createdOn": 1729216365,
            "author": {
                "name": "Chicago Duan",
                "email": "duanzhijia01@ieisystem.com",
                "username": "ChicagoDuan"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 39,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/certificate_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "src/ssl_key_handler.cpp",
                    "type": "MODIFIED",
                    "insertions": 16,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 67,
            "sizeDeletions": 1
        },
        {
            "number": 3,
            "revision": "016d6be2ad0cd1f0095b68c63c76d99d4e9f5114",
            "parents": [
                "7585b760ff6319f1efd86db4a736139fd28742c9"
            ],
            "ref": "refs/changes/58/75358/3",
            "uploader": {
                "name": "Chicago Duan",
                "email": "duanzhijia01@ieisystem.com",
                "username": "ChicagoDuan"
            },
            "createdOn": 1729217231,
            "author": {
                "name": "Chicago Duan",
                "email": "duanzhijia01@ieisystem.com",
                "username": "ChicagoDuan"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Any response here?"
                },
                {
                    "file": "redfish-core/lib/certificate_service.hpp",
                    "line": 577,
                    "reviewer": {
                        "name": "Jayanth Othayoth",
                        "email": "ojayanth@gmail.com",
                        "username": "ojayanth"
                    },
                    "message": "This is duplicating verify call in the certificate manger verify function.\nhttps://grok.openbmc.org/xref/openbmc/phosphor-certificate-manager/certificate.cpp?r=cbbec8d9#342\nRight place to check the certificate validation is as part of exising certificate manager verify function."
                },
                {
                    "file": "redfish-core/lib/certificate_service.hpp",
                    "line": 577,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> This is duplicating verify call in the certificate manger verify function.\n\nNot really.  The difference between them is that berificate manager can verify that the certificate is valid.  bmcweb can verify that it's a certificate that can be used to create a valid http server.  They're slightly different."
                },
                {
                    "file": "redfish-core/lib/certificate_service.hpp",
                    "line": 579,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "we need to split up verifyOpensslKeyCert so that we can pass in the certificate string before it's written to disk.  Writing the file then immediately reading it back into memory is a waste."
                },
                {
                    "file": "redfish-core/lib/certificate_service.hpp",
                    "line": 580,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gunnar@gmills.xyz",
                        "username": "gtmills"
                    },
                    "message": "Can't this fail for many reasons?"
                },
                {
                    "file": "redfish-core/lib/certificate_service.hpp",
                    "line": 580,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "it can, but aside from the filesystem ones, pretty much all are \"we couldnt' use this cert\""
                },
                {
                    "file": "redfish-core/lib/certificate_service.hpp",
                    "line": 583,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gunnar@gmills.xyz",
                        "username": "gtmills"
                    },
                    "message": "This doesn't look like the correct error?"
                },
                {
                    "file": "redfish-core/lib/certificate_service.hpp",
                    "line": 583,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "+1"
                },
                {
                    "file": "redfish-core/lib/certificate_service.hpp",
                    "line": 588,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gunnar@gmills.xyz",
                        "username": "gtmills"
                    },
                    "message": "The certificate manager can't just do this and throw back an error?\n\nCan then use the afterSetPropertyAction ?\n\nhttps://github.com/openbmc/bmcweb/blob/56ba386d435a3298df728d9f2e7a73d3948a6a2b/redfish-core/src/utils/dbus_utils.cpp#L101"
                },
                {
                    "file": "redfish-core/lib/certificate_service.hpp",
                    "line": 588,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "eh, this is one of the few cases where I'm ok with doing error checks here, because bmcweb is the recipient of the cert, and it \"knows\" what it supports.  Trying to maintain that in two places might be error prone."
                },
                {
                    "file": "src/ssl_key_handler.cpp",
                    "line": 196,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Rather than this, can we do a comparison against the cipher suites when we construct the context, and just see if cipher count is 0?  That way, if the cipher suites change in the future to remove RSA, or add a new type, this will just work."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 39,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/certificate_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "src/ssl_key_handler.cpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 66,
            "sizeDeletions": 1
        }
    ]
}