{
    "project": "openbmc/libcper",
    "branch": "main",
    "id": "Ief018cc421497a8c366157a21e83ef60641e2646",
    "number": 73559,
    "subject": "Add ability to use lib without json-c dependency",
    "owner": {
        "name": "Karthik Rajagopalan",
        "email": "krajagopalan@nvidia.com",
        "username": "karthikr"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/libcper/+/73559",
    "hashtags": [],
    "createdOn": 1723141776,
    "lastUpdated": 1723657545,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1723141776,
            "reviewer": {
                "name": "Karthik Rajagopalan",
                "email": "krajagopalan@nvidia.com",
                "username": "karthikr"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1723141821,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1723141821,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1723141842,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/89423/ : FAILURE"
        },
        {
            "timestamp": 1723141858,
            "reviewer": {
                "name": "Karthik Rajagopalan",
                "email": "krajagopalan@nvidia.com",
                "username": "karthikr"
            },
            "message": "Patch Set 2: Commit message was updated.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1723141906,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1723141906,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1723141924,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/89424/ : FAILURE"
        },
        {
            "timestamp": 1723142778,
            "reviewer": {
                "name": "Karthik Rajagopalan",
                "email": "krajagopalan@nvidia.com",
                "username": "karthikr"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1723142826,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1723142826,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1723142833,
            "reviewer": {
                "name": "Karthik Rajagopalan",
                "email": "krajagopalan@nvidia.com",
                "username": "karthikr"
            },
            "message": "Uploaded patch set 4: Commit message was updated."
        },
        {
            "timestamp": 1723142850,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1723142852,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/89425/ : ABORTED"
        },
        {
            "timestamp": 1723142855,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1723142896,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/89426/ : SUCCESS"
        },
        {
            "timestamp": 1723188617,
            "reviewer": {
                "name": "Karthik Rajagopalan",
                "email": "krajagopalan@nvidia.com",
                "username": "karthikr"
            },
            "message": "Patch Set 5: Patch Set 4 was rebased\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1723188643,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1723188644,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1723188694,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/89466/ : SUCCESS"
        },
        {
            "timestamp": 1723581794,
            "reviewer": {
                "name": "Karthik Rajagopalan",
                "email": "krajagopalan@nvidia.com",
                "username": "karthikr"
            },
            "message": "Uploaded patch set 6: Commit message was updated.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1723581852,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1723581852,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: -Ok-To-Test"
        },
        {
            "timestamp": 1723581899,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/89658/ : SUCCESS"
        },
        {
            "timestamp": 1723582625,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1723584466,
            "reviewer": {
                "name": "Karthik Rajagopalan",
                "email": "krajagopalan@nvidia.com",
                "username": "karthikr"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1723591528,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1723591839,
            "reviewer": {
                "name": "Karthik Rajagopalan",
                "email": "krajagopalan@nvidia.com",
                "username": "karthikr"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1723591873,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1723591997,
            "reviewer": {
                "name": "Karthik Rajagopalan",
                "email": "krajagopalan@nvidia.com",
                "username": "karthikr"
            },
            "message": "Uploaded patch set 7.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1723592052,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1723592052,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: -Ok-To-Test"
        },
        {
            "timestamp": 1723592099,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/89666/ : SUCCESS"
        },
        {
            "timestamp": 1723592170,
            "reviewer": {
                "name": "Karthik Rajagopalan",
                "email": "krajagopalan@nvidia.com",
                "username": "karthikr"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1723653636,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1723656911,
            "reviewer": {
                "name": "Karthik Rajagopalan",
                "email": "krajagopalan@nvidia.com",
                "username": "karthikr"
            },
            "message": "Patch Set 7:\n\n(2 comments)"
        },
        {
            "timestamp": 1723657542,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1723657543,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 7: Code-Review+2"
        },
        {
            "timestamp": 1723657545,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Change has been successfully merged"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "4cb3c9d621cebb9d42f4e14ae0a2c6afbddd85ba",
            "parents": [
                "bf6ccc85141bee0e8251e9070229f41d9e56f8b2"
            ],
            "ref": "refs/changes/59/73559/1",
            "uploader": {
                "name": "Karthik Rajagopalan",
                "email": "krajagopalan@nvidia.com",
                "username": "karthikr"
            },
            "createdOn": 1723141776,
            "author": {
                "name": "Karthik Rajagopalan",
                "email": "krajagopalan@nvidia.com",
                "username": "karthikr"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "cper-parse.c",
                    "type": "MODIFIED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                },
                {
                    "file": "cper-parse-str.h",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 47,
            "sizeDeletions": 1
        },
        {
            "number": 2,
            "revision": "a63cf6a60a9328b1359d9e4c2695033fad0a3fad",
            "parents": [
                "bf6ccc85141bee0e8251e9070229f41d9e56f8b2"
            ],
            "ref": "refs/changes/59/73559/2",
            "uploader": {
                "name": "Karthik Rajagopalan",
                "email": "krajagopalan@nvidia.com",
                "username": "karthikr"
            },
            "createdOn": 1723141858,
            "author": {
                "name": "Karthik Rajagopalan",
                "email": "krajagopalan@nvidia.com",
                "username": "karthikr"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "cper-parse.c",
                    "type": "MODIFIED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                },
                {
                    "file": "cper-parse-str.h",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 47,
            "sizeDeletions": 1
        },
        {
            "number": 3,
            "revision": "ed2f9fb37feb43dd7f9c479580503ea28d4f90dc",
            "parents": [
                "bf6ccc85141bee0e8251e9070229f41d9e56f8b2"
            ],
            "ref": "refs/changes/59/73559/3",
            "uploader": {
                "name": "Karthik Rajagopalan",
                "email": "krajagopalan@nvidia.com",
                "username": "karthikr"
            },
            "createdOn": 1723142778,
            "author": {
                "name": "Karthik Rajagopalan",
                "email": "krajagopalan@nvidia.com",
                "username": "karthikr"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "cper-parse.c",
                    "type": "MODIFIED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                },
                {
                    "file": "cper-parse-str.h",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 47,
            "sizeDeletions": 1
        },
        {
            "number": 4,
            "revision": "572b0a3201e89f3d05a4e02ebca6f72bdbf6a272",
            "parents": [
                "bf6ccc85141bee0e8251e9070229f41d9e56f8b2"
            ],
            "ref": "refs/changes/59/73559/4",
            "uploader": {
                "name": "Karthik Rajagopalan",
                "email": "krajagopalan@nvidia.com",
                "username": "karthikr"
            },
            "createdOn": 1723142833,
            "author": {
                "name": "Karthik Rajagopalan",
                "email": "krajagopalan@nvidia.com",
                "username": "karthikr"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "cper-parse.c",
                    "type": "MODIFIED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                },
                {
                    "file": "cper-parse-str.h",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 47,
            "sizeDeletions": 1
        },
        {
            "number": 5,
            "revision": "651450504f817e69011c47244b6b4eefd2d01ac0",
            "parents": [
                "9fe2cb5f64b21b8a9a29720423be3c76e059e7db"
            ],
            "ref": "refs/changes/59/73559/5",
            "uploader": {
                "name": "Karthik Rajagopalan",
                "email": "krajagopalan@nvidia.com",
                "username": "karthikr"
            },
            "createdOn": 1723188617,
            "author": {
                "name": "Karthik Rajagopalan",
                "email": "krajagopalan@nvidia.com",
                "username": "karthikr"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "cper-parse.c",
                    "type": "MODIFIED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                },
                {
                    "file": "cper-parse-str.h",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 47,
            "sizeDeletions": 1
        },
        {
            "number": 6,
            "revision": "0f4e14de48340ee7d59a4404bc0565dbe557058f",
            "parents": [
                "9fe2cb5f64b21b8a9a29720423be3c76e059e7db"
            ],
            "ref": "refs/changes/59/73559/6",
            "uploader": {
                "name": "Karthik Rajagopalan",
                "email": "krajagopalan@nvidia.com",
                "username": "karthikr"
            },
            "createdOn": 1723581794,
            "author": {
                "name": "Karthik Rajagopalan",
                "email": "krajagopalan@nvidia.com",
                "username": "karthikr"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "cper-parse-str.h",
                    "line": 8,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "We shoudn't be passing file handles over a library boundary.  Read the file in in your calling code, then just pass a buffer of characters over."
                },
                {
                    "file": "cper-parse-str.h",
                    "line": 8,
                    "reviewer": {
                        "name": "Karthik Rajagopalan",
                        "email": "krajagopalan@nvidia.com",
                        "username": "karthikr"
                    },
                    "message": "These are just wrappers for existing fns that returns json_object* (and impose a json-c dependency on the calling code):\n\njson_object *cper_to_ir(FILE* cper_file);  // existing fn\njson_object *cper_single_section_to_ir(FILE* cper_file);  // existing fn\n\nPassing a buffer would require intrusive changes into the libcper code."
                },
                {
                    "file": "cper-parse-str.h",
                    "line": 8,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Imposing a file dependency isn't really better, is it?"
                },
                {
                    "file": "cper-parse-str.h",
                    "line": 8,
                    "reviewer": {
                        "name": "Karthik Rajagopalan",
                        "email": "krajagopalan@nvidia.com",
                        "username": "karthikr"
                    },
                    "message": "I'll move the fmemopen(data, size, \"r\") to libcper & pass data, size to the lib"
                },
                {
                    "file": "cper-parse-str.h",
                    "line": 8,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "\ud83d\udc4d"
                },
                {
                    "file": "cper-parse-str.h",
                    "line": 8,
                    "reviewer": {
                        "name": "Karthik Rajagopalan",
                        "email": "krajagopalan@nvidia.com",
                        "username": "karthikr"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "cper-parse.c",
                    "type": "MODIFIED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                },
                {
                    "file": "cper-parse-str.h",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 1
        },
        {
            "number": 7,
            "revision": "5220c9bdacd3dac0c4ad6ee39241849262589197",
            "parents": [
                "9fe2cb5f64b21b8a9a29720423be3c76e059e7db"
            ],
            "ref": "refs/changes/59/73559/7",
            "uploader": {
                "name": "Karthik Rajagopalan",
                "email": "krajagopalan@nvidia.com",
                "username": "karthikr"
            },
            "createdOn": 1723591997,
            "author": {
                "name": "Karthik Rajagopalan",
                "email": "krajagopalan@nvidia.com",
                "username": "karthikr"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "cper-parse.c",
                    "line": 86,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Looks like we're still passing FILE over an API boundary?\n\nremember, the intent of this is that it can be used on EDK2 and other embedded targets that will very likely not support posix files."
                },
                {
                    "file": "cper-parse.c",
                    "line": 86,
                    "reviewer": {
                        "name": "Karthik Rajagopalan",
                        "email": "krajagopalan@nvidia.com",
                        "username": "karthikr"
                    },
                    "message": "This function is not exposed from headers, so this won't be an API boundary.\n\nI haven't made changes to remove existing APIs that take FILE*"
                },
                {
                    "file": "cper-parse.c",
                    "line": 86,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Ah, understood."
                },
                {
                    "file": "cper-parse.c",
                    "line": 95,
                    "reviewer": {
                        "name": "Karthik Rajagopalan",
                        "email": "krajagopalan@nvidia.com",
                        "username": "karthikr"
                    },
                    "message": "This is the new API I've added"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "cper-parse.c",
                    "type": "MODIFIED",
                    "insertions": 37,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                },
                {
                    "file": "cper-parse-str.h",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 69,
            "sizeDeletions": 1
        }
    ]
}