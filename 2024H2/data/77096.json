{
    "project": "openbmc/entity-manager",
    "branch": "master",
    "id": "I760486bafe94fce6485dfb7627946d0a77fdd322",
    "number": 77096,
    "subject": "meson: generate configurations list",
    "owner": {
        "name": "Alexander",
        "email": "alexander.hansen@9elements.com",
        "username": "pointbazaar"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/entity-manager/+/77096",
    "hashtags": [],
    "createdOn": 1736182419,
    "lastUpdated": 1736265563,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1736182419,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1736182456,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1736182457,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1736182479,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/97704/ : FAILURE"
        },
        {
            "timestamp": 1736182591,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Uploaded patch set 2.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1736182631,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1736182631,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1736182945,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/97705/ : SUCCESS"
        },
        {
            "timestamp": 1736188217,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1736214859,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1736263774,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1736265023,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1736265041,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1736265041,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1736265064,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1736265066,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/97748/ : FAILURE"
        },
        {
            "timestamp": 1736265202,
            "reviewer": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "message": "Uploaded patch set 4.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1736265246,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1736265246,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1736265563,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/97749/ : SUCCESS"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "05bcac314c62e2e486c7a05898582cdfc033b187",
            "parents": [
                "849f13ab73fb85a6b8b002bc16414b67562f3513"
            ],
            "ref": "refs/changes/96/77096/1",
            "uploader": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "createdOn": 1736182419,
            "author": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "scripts/generate_config_list.sh",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -175
                },
                {
                    "file": "configurations/meson.build",
                    "type": "ADDED",
                    "insertions": 178,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 220,
            "sizeDeletions": 175
        },
        {
            "number": 2,
            "revision": "312d2afaa3b53cfb92c1f3cf52298bda6dfbc9b7",
            "parents": [
                "849f13ab73fb85a6b8b002bc16414b67562f3513"
            ],
            "ref": "refs/changes/96/77096/2",
            "uploader": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "createdOn": 1736182591,
            "author": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Christopher Sides",
                        "email": "christopher.sides@hpe.com",
                        "username": "csides-hpe"
                    },
                    "message": "Am I understanding correctly that the aim of this change is to make it so that when a new EM config is added to configurations/, the submitter would run generate_config_list.sh, then commit the updates configurations/meson.build along with their changes-- instead of just updating the existing meson.build like we'd do today?\n\n\nWhen you say\n\n> There is a tradeoff when running a command to get the filenames, as it\nmay not regenerate when file is added/removed\n\nThat sounds like a potentially serious tradeoff if we're replacing the existing list (relatively easy for change submitters to maintain, IMO) with a file that has '# This file is auto-generated. Do not edit manually.' at the top.\n\nWhat situations would result in the script *not* updating the list when a config is added or removed?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Alexander",
                        "email": "alexander.hansen@9elements.com",
                        "username": "pointbazaar"
                    },
                    "message": "yes, the idea is that the list is a separate file and not updated manually.\n\n>What situations would result in the script not updating the list when a config is added or removed?\n\nAs long as you run the script, it should be fine. I initially wanted to avoid the script and just use 'find'to get all the filenames but came across that meson documentation as to why all the files are explicitly mentioned."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Christopher Sides",
                        "email": "christopher.sides@hpe.com",
                        "username": "csides-hpe"
                    },
                    "message": "That sounds like it makes sense to me.\n\nAssuming Entity-Manager maintainers have don't have other objections, I think it'd make sense to make a revision that also updates the Entity-Manager readme to mention this script should be run after adding or changing the name of an entity-manager config.\n\n...And maybe not worth the effort to dig in too deep for now (let's see what other folks think)-- but I wonder if it could make sense to have a script like this run as part of the automatic CI tests processes that get called before/when submitting new changes for Entity-Manager to Gerrit.\n\nIt's a simple thing to fix, but I know I've definitely submitted config files in the past without remembering to update the meson.build first"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Alexander",
                        "email": "alexander.hansen@9elements.com",
                        "username": "pointbazaar"
                    },
                    "message": "> Assuming Entity-Manager maintainers have don't have other objections, I think it'd make sense to make a revision that also updates the Entity-Manager readme to mention this script should be run after adding or changing the name of an entity-manager config.\n\nMany people don't read documentation. It tends to be outdated anyways.\nBut you are right that it should be clear how to update this file.\n\nThis is fixed in the latest revision. The script now puts its own filename\ninto the generated file. So it is clear how the file is generated.\n\n> It's a simple thing to fix, but I know I've definitely submitted config files in the past without remembering to update the meson.build first\n\nSame. But i would prefer to keep this change simple and just focus on automating the process of creating that list."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "scripts/generate_config_list.sh",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -175
                },
                {
                    "file": "configurations/meson.build",
                    "type": "ADDED",
                    "insertions": 177,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 219,
            "sizeDeletions": 175
        },
        {
            "number": 3,
            "revision": "f69ab274b1e327d42e355ffb066ba10ecd5c9966",
            "parents": [
                "849f13ab73fb85a6b8b002bc16414b67562f3513"
            ],
            "ref": "refs/changes/96/77096/3",
            "uploader": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "createdOn": 1736265023,
            "author": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "scripts/generate_config_list.sh",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -175
                },
                {
                    "file": "configurations/meson.build",
                    "type": "ADDED",
                    "insertions": 178,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 223,
            "sizeDeletions": 175
        },
        {
            "number": 4,
            "revision": "afa0261b80dc806b424d931ede94ce8842054f2c",
            "parents": [
                "849f13ab73fb85a6b8b002bc16414b67562f3513"
            ],
            "ref": "refs/changes/96/77096/4",
            "uploader": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "createdOn": 1736265202,
            "author": {
                "name": "Alexander",
                "email": "alexander.hansen@9elements.com",
                "username": "pointbazaar"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "scripts/generate_config_list.sh",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -175
                },
                {
                    "file": "configurations/meson.build",
                    "type": "ADDED",
                    "insertions": 178,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 223,
            "sizeDeletions": 175
        }
    ]
}