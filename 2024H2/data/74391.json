{
    "project": "openbmc/dbus-sensors",
    "branch": "master",
    "id": "I9644e139b0a27a5c1204cd9724ecf738c239cf42",
    "number": 74391,
    "subject": "intrusionsensor: Ignore unconfigured lan status",
    "owner": {
        "name": "Jeff Lin",
        "email": "JeffLin2@quantatw.com",
        "username": "JinFuLin"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/74391",
    "hashtags": [],
    "createdOn": 1725612130,
    "lastUpdated": 1727058572,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1725612130,
            "reviewer": {
                "name": "Jeff Lin",
                "email": "JeffLin2@quantatw.com",
                "username": "JinFuLin"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1725612193,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1725612193,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1725612516,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/91467/ : FAILURE"
        },
        {
            "timestamp": 1725612611,
            "reviewer": {
                "name": "Jeff Lin",
                "email": "JeffLin2@quantatw.com",
                "username": "JinFuLin"
            },
            "message": "Set Work In Progress"
        },
        {
            "timestamp": 1725612810,
            "reviewer": {
                "name": "Jeff Lin",
                "email": "JeffLin2@quantatw.com",
                "username": "JinFuLin"
            },
            "message": "Uploaded patch set 2.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1725612863,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1725612863,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1725613237,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/91468/ : SUCCESS"
        },
        {
            "timestamp": 1725613298,
            "reviewer": {
                "name": "Jeff Lin",
                "email": "JeffLin2@quantatw.com",
                "username": "JinFuLin"
            },
            "message": "Set Ready For Review"
        },
        {
            "timestamp": 1726604337,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1726642284,
            "reviewer": {
                "name": "Jeff Lin",
                "email": "JeffLin2@quantatw.com",
                "username": "JinFuLin"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1726642323,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1726642323,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1726642620,
            "reviewer": {
                "name": "Jeff Lin",
                "email": "JeffLin2@quantatw.com",
                "username": "JinFuLin"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1726642692,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/91937/ : SUCCESS"
        },
        {
            "timestamp": 1726852575,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 3:\n\n(3 comments)"
        },
        {
            "timestamp": 1727058562,
            "reviewer": {
                "name": "Jeff Lin",
                "email": "JeffLin2@quantatw.com",
                "username": "JinFuLin"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1727058572,
            "reviewer": {
                "name": "Jeff Lin",
                "email": "JeffLin2@quantatw.com",
                "username": "JinFuLin"
            },
            "message": "Abandoned"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "d066ff23d28cf1a44775f45fa3dc9ad565c8df5a",
            "parents": [
                "77ae514b59dac1c36c80209c74dd71314256fdea"
            ],
            "ref": "refs/changes/91/74391/1",
            "uploader": {
                "name": "Jeff Lin",
                "email": "JeffLin2@quantatw.com",
                "username": "JinFuLin"
            },
            "createdOn": 1725612130,
            "author": {
                "name": "Jeff Lin",
                "email": "JeffLin2@quantatw.com",
                "username": "JinFuLin"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "src/IntrusionSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 23,
            "sizeDeletions": 1
        },
        {
            "number": 2,
            "revision": "47f0c46ff6c30a38b4ebf847f2b643fe03f5c323",
            "parents": [
                "77ae514b59dac1c36c80209c74dd71314256fdea"
            ],
            "ref": "refs/changes/91/74391/2",
            "uploader": {
                "name": "Jeff Lin",
                "email": "JeffLin2@quantatw.com",
                "username": "JinFuLin"
            },
            "createdOn": 1725612810,
            "author": {
                "name": "Jeff Lin",
                "email": "JeffLin2@quantatw.com",
                "username": "JinFuLin"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "Is this required? Why is it a problem if eth is detected, but not configure in entity-manager to have a log message?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Jeff Lin",
                        "email": "JeffLin2@quantatw.com",
                        "username": "JinFuLin"
                    },
                    "message": "We used to have a issue that eth1 is unstable and it will make eth1 link up and down many times.\n\nDuring debug this issue we found that not only ```systemd-networkd``` will send a lot of log, but also ```intrusionsensor``` even if we have not add the NIC config for eth1.\n\nAnd then I add this change to make journal be cleaner so as to focus on the log in ```systemd-networkd``` and other journal message.\n\nThe log for ethernet in ```intrusionsensor``` looks similar as the log in ```systemd-networkd```.\n\nHowever, the log in ```systemd-networkd``` have more details, so the log in ```intrusionsensor``` is kind of duplicated to me.\n\nIt might not be required, but it can remove the unneeded log in this sensor."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "I am OK with reduce duplicated journal log, but I am not sure about redfish message. This change would require user to add lan config into their system json to be able to see the redfish events, so it can break system that currently does not have this config."
                },
                {
                    "file": "src/IntrusionSensorMain.cpp",
                    "line": 354,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "If the requirement is that NIC has to be configured in entity-manager to have log message (which i have a question in the commit message section), should it also return if the lanInfoMap is empty?"
                },
                {
                    "file": "src/IntrusionSensorMain.cpp",
                    "line": 354,
                    "reviewer": {
                        "name": "Jeff Lin",
                        "email": "JeffLin2@quantatw.com",
                        "username": "JinFuLin"
                    },
                    "message": "Oh.. I miss this situation, it should not update and directly return when laninfoMap is empty.\nUpdate in newest patchset."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "src/IntrusionSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -5
                }
            ],
            "sizeInsertions": 24,
            "sizeDeletions": 5
        },
        {
            "number": 3,
            "revision": "81378da2ea145bce0a3c14663b45fae1d23eadcd",
            "parents": [
                "e1dcb5c1f2d33048a55b20fc1a9830ea02c9d814"
            ],
            "ref": "refs/changes/91/74391/3",
            "uploader": {
                "name": "Jeff Lin",
                "email": "JeffLin2@quantatw.com",
                "username": "JinFuLin"
            },
            "createdOn": 1726642284,
            "author": {
                "name": "Jeff Lin",
                "email": "JeffLin2@quantatw.com",
                "username": "JinFuLin"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "src/IntrusionSensorMain.cpp",
                    "line": 361,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "reorder like this :\nif (lanInfoMap.empty()) return;\n//continue with lanInMap search"
                },
                {
                    "file": "src/IntrusionSensorMain.cpp",
                    "line": 384,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "I am concerned that redfish message is skipped without config in the json file with this change. There might be existing systems that have been using it without the config."
                },
                {
                    "file": "src/IntrusionSensorMain.cpp",
                    "line": 384,
                    "reviewer": {
                        "name": "Jeff Lin",
                        "email": "JeffLin2@quantatw.com",
                        "username": "JinFuLin"
                    },
                    "message": "Yeah, it might break the systems who is using these redfish messages since these code is not changed for a long time.\n\nIt seems it want to send every lan status change in refish message, so taking that entity-manager have no corresponding config is a bug and send error log ```unexpected eth XXX in lanInfoMap```.\n\nI might abandoned this change and add all lan config to prevent this unexpected error in journal.\n\nThanks."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "src/IntrusionSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -5
                }
            ],
            "sizeInsertions": 28,
            "sizeDeletions": 5
        }
    ]
}