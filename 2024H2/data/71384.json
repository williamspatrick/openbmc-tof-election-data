{
    "project": "openbmc/phosphor-dbus-interfaces",
    "branch": "master",
    "id": "I1947536d2529f24a01cbfce71419cf06c7a0dedf",
    "number": 71384,
    "subject": "Add Ampere Crash Capture manager interface",
    "owner": {
        "name": "Thu Nguyen",
        "email": "thu@os.amperecomputing.com",
        "username": "ThuBaNguyen"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-dbus-interfaces/+/71384",
    "hashtags": [],
    "createdOn": 1715586484,
    "lastUpdated": 1730961156,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1715586484,
            "reviewer": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1715586523,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1715586528,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1715586862,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/84272/ : SUCCESS"
        },
        {
            "timestamp": 1715598051,
            "reviewer": {
                "name": "Smriti-Ayushi",
                "email": "smriti.ayushi@linux.intel.com",
                "username": "Smriti-Ayushi"
            },
            "message": "Patch Set 1: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1715619363,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1715619410,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\n(2 comments)"
        },
        {
            "timestamp": 1715641471,
            "reviewer": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Uploaded patch set 2.\n\nOutdated Votes:\n* Code-Review+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE OR changekind:TRIVIAL_REBASE OR is:MIN\")\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1715641487,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1715641487,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1715641833,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/84340/ : SUCCESS"
        },
        {
            "timestamp": 1715645204,
            "reviewer": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Patch Set 2:\n\n(3 comments)"
        },
        {
            "timestamp": 1715669134,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1721340751,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2: Code-Review-1\n\n(1 comment)"
        },
        {
            "timestamp": 1721616231,
            "reviewer": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Set Work In Progress"
        },
        {
            "timestamp": 1730961156,
            "reviewer": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Abandoned\n\nWill find other solution"
        }
    ],
    "wip": true,
    "patchSets": [
        {
            "number": 1,
            "revision": "a740b34a757ca2454ecb63395951a4b7b945e82d",
            "parents": [
                "b77f80647113037e831d5aa488ed333d508ae0b6"
            ],
            "ref": "refs/changes/84/71384/1",
            "uploader": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "createdOn": 1715586484,
            "author": {
                "name": "dcao-ampere",
                "email": "dung@os.amperecomputing.com",
                "username": "dcao-ampere"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Smriti-Ayushi",
                        "email": "smriti.ayushi@linux.intel.com",
                        "username": "Smriti-Ayushi"
                    },
                    "message": "Changes lgtm."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Is there a design document proposal here?  I don't think we generally want a bunch of one-off interfaces and I'm not sure how this is planned to be consumed within the rest of the code-base (and how does it tie to Redfish if that is relevant?).  AMD is also working on some crashdump support, which is probably related?  Can we consolidate this work?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Thu Nguyen",
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "The `com.ampere.CrashCapture.Trigger` is used as the signal between `pldmd` service, `Ampere Crash Capture` service and power services.\nThere is three use cases:\n1. There is PLDM Sensor Event with specific SensorID (Identify that there is BERT), the `pldmd` service will signal `Property Changed` signal in `TriggerActions` property with value `Bert`. `Ampere Crash Capture` service will start the process to get BERT.\nBecause the power action is restricted when BMC is getting BERT so the `TriggerProcess` property will be set to `true`.\n2. When the host power is changed to off (cause Power off, power cycle ...), the `Ampere Crash Capture` service will also be triggered to check BERT. Power action will also be restricted until the getting BERT is done.\n3. There is PLDM Sensor Event with specific SensorID (Identify that there is Diagnostic data), the `Diag` value will be set to `TriggerActions` to notify about the existing of Diagnostic data, the `TriggerProcess` will also be set to `true` in this case.\n\n`Ampere Crash Capture` will create the fault log which can be accessed thru Redfish but Redfish does not consume the properties in the `com.ampere.CrashCapture.Trigger` interface."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Jayanth Othayoth",
                        "email": "ojayanth@gmail.com",
                        "username": "ojayanth"
                    },
                    "message": "AMD design document review link https://gerrit.openbmc.org/c/openbmc/docs/+/68440/16/designs/oem/amd/amd-bmc-ras.md.\nIn this design document we talks about the use case based on AMD RAS application based CPER collection using APML libraries instead of PLDM ( discussed i the reveiw)\nThe proposed interface here helps to manage fault monitoring independently, and can easily plug into PLDM based on any other custom mechanisms. This looks good to me. \n\nAlso looking for review/feedback on below 2 d-bus interfaces in the same area.\n 1.https://gerrit.openbmc.org/c/openbmc/phosphor-dbus-interfaces/+/69698 \n    Discussing about link between proprietary collection app to Dump creation. See the review comments for the existing and proposed option as part of review comments.\n2.another generic config interface to manage RAS configurations. https://gerrit.openbmc.org/c/openbmc/phosphor-dbus-interfaces/+/69972, which usefull to configure the data collection configurations."
                },
                {
                    "file": "meson.build",
                    "line": 44,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Please keep sorted."
                },
                {
                    "file": "meson.build",
                    "line": 44,
                    "reviewer": {
                        "name": "Thu Nguyen",
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Updated."
                },
                {
                    "file": "meson.options",
                    "line": 10,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Please keep sorted."
                },
                {
                    "file": "meson.options",
                    "line": 10,
                    "reviewer": {
                        "name": "Thu Nguyen",
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Updated."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 42,
                    "deletions": 0
                },
                {
                    "file": "meson.options",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "gen/com/meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "gen/com/ampere/CrashCapture/meson.build",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                },
                {
                    "file": "yaml/com/ampere/CrashCapture/Trigger.interface.yaml",
                    "type": "ADDED",
                    "insertions": 40,
                    "deletions": 0
                },
                {
                    "file": "gen/com/ampere/CrashCapture/Trigger/meson.build",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "gen/com/ampere/meson.build",
                    "type": "ADDED",
                    "insertions": 2,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 120,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "3dd3d6a12348bfae8c452dc09f65f6a3163e56f1",
            "parents": [
                "b77f80647113037e831d5aa488ed333d508ae0b6"
            ],
            "ref": "refs/changes/84/71384/2",
            "uploader": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "createdOn": 1715641471,
            "author": {
                "name": "dcao-ampere",
                "email": "dung@os.amperecomputing.com",
                "username": "dcao-ampere"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I don't understand the motivation for a separate interface here.  Nobody is going to code to calling this if it is chip-specific.  We should align with the AMD design work here on how to trigger and collect crash dumps."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 42,
                    "deletions": 0
                },
                {
                    "file": "meson.options",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "gen/com/meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "gen/com/ampere/CrashCapture/meson.build",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                },
                {
                    "file": "yaml/com/ampere/CrashCapture/Trigger.interface.yaml",
                    "type": "ADDED",
                    "insertions": 40,
                    "deletions": 0
                },
                {
                    "file": "gen/com/ampere/CrashCapture/Trigger/meson.build",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "gen/com/ampere/meson.build",
                    "type": "ADDED",
                    "insertions": 2,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 120,
            "sizeDeletions": 0
        }
    ]
}