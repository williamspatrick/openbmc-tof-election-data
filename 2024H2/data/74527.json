{
    "project": "openbmc/sdbusplus",
    "branch": "master",
    "id": "Iac7501dc03c1cfaf16f59f7ae742168c6be5886d",
    "number": 74527,
    "subject": "asio: connection: Return unpacked value directly",
    "owner": {
        "name": "Lei YU",
        "email": "mine260309@gmail.com",
        "username": "mine260309"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/sdbusplus/+/74527",
    "hashtags": [],
    "createdOn": 1726050578,
    "lastUpdated": 1734013789,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1726050578,
            "reviewer": {
                "name": "Lei YU",
                "email": "mine260309@gmail.com",
                "username": "mine260309"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1726050603,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1726050603,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1726051187,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/91667/ : SUCCESS"
        },
        {
            "timestamp": 1726063875,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1: Code-Review+1"
        },
        {
            "timestamp": 1726063880,
            "reviewer": {
                "name": "Lei YU",
                "email": "mine260309@gmail.com",
                "username": "mine260309"
            },
            "message": "Patch Set 2: Patch Set 1 was rebased on behalf of Lei YU <mine260309@gmail.com>\n\nCopied Votes:\n* Code-Review+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE OR **changekind:TRIVIAL_REBASE** OR is:MIN\")\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1726063913,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1726063914,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1726064733,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/91673/ : SUCCESS"
        },
        {
            "timestamp": 1726122374,
            "reviewer": {
                "name": "Lei YU",
                "email": "mine260309@gmail.com",
                "username": "mine260309"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Code-Review+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE OR changekind:TRIVIAL_REBASE OR is:MIN\")\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1726122425,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1726122426,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1726123021,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/91731/ : SUCCESS"
        },
        {
            "timestamp": 1726150626,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1732780149,
            "reviewer": {
                "name": "Lei YU",
                "email": "mine260309@gmail.com",
                "username": "mine260309"
            },
            "message": "Uploaded patch set 4: Patch Set 3 was rebased.\n\nCopied Votes:\n* Code-Review+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE OR **changekind:TRIVIAL_REBASE** OR is:MIN\")\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1732780167,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1732780167,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1732780707,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/95494/ : SUCCESS"
        },
        {
            "timestamp": 1732919077,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 4: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1733227312,
            "reviewer": {
                "name": "Lei YU",
                "email": "mine260309@gmail.com",
                "username": "mine260309"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1733611485,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1734013779,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 4: Code-Review+2"
        },
        {
            "timestamp": 1734013789,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Change has been successfully rebased and submitted as dfbd9ddf0d9001e7030fa47e8517e717e76a2b06"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "d9dd04f4e36854e75d866a335c6efc53dcbac952",
            "parents": [
                "8a3621f08a1432d30e8b7b13e290a3ca15e4693a"
            ],
            "ref": "refs/changes/27/74527/1",
            "uploader": {
                "name": "Lei YU",
                "email": "mine260309@gmail.com",
                "username": "mine260309"
            },
            "createdOn": 1726050578,
            "author": {
                "name": "Lei YU",
                "email": "mine260309@gmail.com",
                "username": "mine260309"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "include/sdbusplus/asio/connection.hpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": -48
                }
            ],
            "sizeInsertions": 40,
            "sizeDeletions": 48
        },
        {
            "number": 2,
            "revision": "2873d2e6564cf00316011d11cd46b5c8b6e53835",
            "parents": [
                "88c6a8237f03409a7ec9a95f79d03fc67f5f94bd"
            ],
            "ref": "refs/changes/27/74527/2",
            "uploader": {
                "name": "Lei YU",
                "email": "mine260309@gmail.com",
                "username": "mine260309"
            },
            "createdOn": 1726063880,
            "author": {
                "name": "Lei YU",
                "email": "mine260309@gmail.com",
                "username": "mine260309"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "include/sdbusplus/asio/connection.hpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": -48
                }
            ],
            "sizeInsertions": 40,
            "sizeDeletions": 48
        },
        {
            "number": 3,
            "revision": "44a06bce6e8211992dde7d6a1a958dd9f04e4f5b",
            "parents": [
                "88c6a8237f03409a7ec9a95f79d03fc67f5f94bd"
            ],
            "ref": "refs/changes/27/74527/3",
            "uploader": {
                "name": "Lei YU",
                "email": "mine260309@gmail.com",
                "username": "mine260309"
            },
            "createdOn": 1726122374,
            "author": {
                "name": "Lei YU",
                "email": "mine260309@gmail.com",
                "username": "mine260309"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "include/sdbusplus/asio/connection.hpp",
                    "type": "MODIFIED",
                    "insertions": 25,
                    "deletions": -48
                }
            ],
            "sizeInsertions": 46,
            "sizeDeletions": 48
        },
        {
            "number": 4,
            "revision": "c0a88b294673fd651f5b3bbd2eba335c6e1c7e41",
            "parents": [
                "2a12ae12455bfa1cdf92dff21c16757b1f126c8f"
            ],
            "ref": "refs/changes/27/74527/4",
            "uploader": {
                "name": "Lei YU",
                "email": "mine260309@gmail.com",
                "username": "mine260309"
            },
            "createdOn": 1732780149,
            "author": {
                "name": "Lei YU",
                "email": "mine260309@gmail.com",
                "username": "mine260309"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "@lei, patch looks fine.\n\nCan you give some indication of where you're actually using these bindings?  It was my intention to ultimately deprecate the boost::coroutine based things (given that they were depcreated even in boost before these were written).\n\nMy understanding was there were only two applications using them (telemetry and one other) upstream, and those could be moved over to either the c++20 coroutines, or callbacks.  Was your usage one of those applications?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Lei YU",
                        "email": "mine260309@gmail.com",
                        "username": "mine260309"
                    },
                    "message": "> It was my intention to ultimately deprecate the boost::coroutine based things (given that they were depcreated even in boost before these were written).\n\nOh I see, but boost now has coroutine2, is that the way we could go for? (https://www.boost.org/doc/libs/1_85_0/libs/coroutine2/doc/html/index.html)\n\n> My understanding was there were only two applications using them (telemetry and one other) upstream, and those could be moved over to either the c++20 coroutines, or callbacks. Was your usage one of those applications?\n\nIn ipmid, the coroutine stuff is heavily used (see https://github.com/openbmc/phosphor-host-ipmid/blob/master/ipmid-new.cpp#L767);\nIn our downstream code, we added several oem handler in `bmcweb` that uses a lot of coroutine stuff to make the code more readable. (bmcweb by default uses the callback style and it is complicated if we have multiple level of callbacks.)"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> > It was my intention to ultimately deprecate the boost::coroutine based things (given that they were depcreated even in boost before these were written).\n> \n> Oh I see, but boost now has coroutine2, is that the way we could go for? (https://www.boost.org/doc/libs/1_85_0/libs/coroutine2/doc/html/index.html)\n\n\nToday we should be using c++20 coroutines.\n\n> \n> > My understanding was there were only two applications using them (telemetry and one other) upstream, and those could be moved over to either the c++20 coroutines, or callbacks. Was your usage one of those applications?\n> \n> In ipmid, the coroutine stuff is heavily used (see https://github.com/openbmc/phosphor-host-ipmid/blob/master/ipmid-new.cpp#L767);\n\nYes, this is a place where we'd have to stage changes.\n\n> In our downstream code, we added several oem handler in `bmcweb` that uses a lot of coroutine stuff to make the code more readable. (bmcweb by default uses the callback style and it is complicated if we have multiple level of callbacks.)\n\nUnderstood;  Keep in mind that upstream bmcweb has explicitly disabled boost coroutines because of compile time and static analysis problems, but feel free to continue to maintain your OEM schemas for as long as you like.  Completely agree that the callback style is less desirable than c++20 coroutines, but boost coroutines have their own tradeoffs.  Glad you're finding them useful."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "include/sdbusplus/asio/connection.hpp",
                    "type": "MODIFIED",
                    "insertions": 25,
                    "deletions": -48
                }
            ],
            "sizeInsertions": 46,
            "sizeDeletions": 48
        },
        {
            "number": 5,
            "revision": "dfbd9ddf0d9001e7030fa47e8517e717e76a2b06",
            "parents": [
                "cd3bf08af911356288ddc999337ec9554bd72863"
            ],
            "ref": "refs/changes/27/74527/5",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1734013789,
            "author": {
                "name": "Lei YU",
                "email": "mine260309@gmail.com",
                "username": "mine260309"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "include/sdbusplus/asio/connection.hpp",
                    "type": "MODIFIED",
                    "insertions": 25,
                    "deletions": -48
                }
            ],
            "sizeInsertions": 46,
            "sizeDeletions": 48
        }
    ]
}