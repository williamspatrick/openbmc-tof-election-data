{
    "project": "openbmc/openbmc",
    "branch": "master",
    "id": "Iac6051f8cf67b3431808f5608792297d6f8e1476",
    "number": 75304,
    "subject": "aspeed: ufs support",
    "owner": {
        "name": "Vince Chang",
        "email": "vince_chang@aspeedtech.com",
        "username": "VinceChang6637"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/openbmc/+/75304",
    "hashtags": [],
    "createdOn": 1728985447,
    "lastUpdated": 1734411066,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1728985447,
            "reviewer": {
                "name": "Vince Chang",
                "email": "vince_chang@aspeedtech.com",
                "username": "VinceChang6637"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1728985483,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1728985483,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1728985491,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1:\n\nBuild Started https://jenkins.openbmc.org/job/ci-openbmc/25517/"
        },
        {
            "timestamp": 1728987859,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-openbmc/25517/ : FAILURE"
        },
        {
            "timestamp": 1729042396,
            "reviewer": {
                "name": "Vince Chang",
                "email": "vince_chang@aspeedtech.com",
                "username": "VinceChang6637"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1729157097,
            "reviewer": {
                "name": "Vince Chang",
                "email": "vince_chang@aspeedtech.com",
                "username": "VinceChang6637"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1734060490,
            "reviewer": {
                "name": "Vince Chang",
                "email": "vince_chang@aspeedtech.com",
                "username": "VinceChang6637"
            },
            "message": "Uploaded patch set 2.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1734060533,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1734060533,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1734061142,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2:\n\nBuild Started https://jenkins.openbmc.org/job/ci-openbmc/26670/"
        },
        {
            "timestamp": 1734061180,
            "reviewer": {
                "name": "Vince Chang",
                "email": "vince_chang@aspeedtech.com",
                "username": "VinceChang6637"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1734061219,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1734061219,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1734061229,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-openbmc/26670/ : ABORTED"
        },
        {
            "timestamp": 1734061229,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3:\n\nBuild Started https://jenkins.openbmc.org/job/ci-openbmc/26671/"
        },
        {
            "timestamp": 1734061430,
            "reviewer": {
                "name": "Vince Chang",
                "email": "vince_chang@aspeedtech.com",
                "username": "VinceChang6637"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1734062337,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-openbmc/26671/ : SUCCESS"
        },
        {
            "timestamp": 1734066594,
            "reviewer": {
                "name": "Jenkins OpenBMC IBM",
                "email": "geissonator+jenkinsibm@gmail.com",
                "username": "jenkins-openbmc-ibm"
            },
            "message": "Patch Set 3:\n\nIBM Simulation CI: p10bmc simulation tests passed"
        },
        {
            "timestamp": 1734106740,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1734334662,
            "reviewer": {
                "name": "Vince Chang",
                "email": "vince_chang@aspeedtech.com",
                "username": "VinceChang6637"
            },
            "message": "Uploaded patch set 4.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1734334711,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1734334711,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1734334717,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4:\n\nBuild Started https://jenkins.openbmc.org/job/ci-openbmc/26695/"
        },
        {
            "timestamp": 1734334899,
            "reviewer": {
                "name": "Vince Chang",
                "email": "vince_chang@aspeedtech.com",
                "username": "VinceChang6637"
            },
            "message": "Patch Set 4:\n\n(2 comments)"
        },
        {
            "timestamp": 1734335265,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-openbmc/26695/ : SUCCESS"
        },
        {
            "timestamp": 1734340123,
            "reviewer": {
                "name": "Jenkins OpenBMC IBM",
                "email": "geissonator+jenkinsibm@gmail.com",
                "username": "jenkins-openbmc-ibm"
            },
            "message": "Patch Set 4:\n\nIBM Simulation CI: p10bmc simulation tests passed"
        },
        {
            "timestamp": 1734407060,
            "reviewer": {
                "name": "Vince Chang",
                "email": "vince_chang@aspeedtech.com",
                "username": "VinceChang6637"
            },
            "message": "Uploaded patch set 5.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1734407113,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1734407113,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1734407330,
            "reviewer": {
                "name": "Vince Chang",
                "email": "vince_chang@aspeedtech.com",
                "username": "VinceChang6637"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1734410201,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5:\n\nBuild Started https://jenkins.openbmc.org/job/ci-openbmc/26727/"
        },
        {
            "timestamp": 1734411066,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-openbmc/26727/ : SUCCESS"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "253bc33cdc1ebe9534a229a95ce5231cf4bd7f25",
            "parents": [
                "c626a0d1b458c4ef9343963e86a2990fee8994e1"
            ],
            "ref": "refs/changes/04/75304/1",
            "uploader": {
                "name": "Vince Chang",
                "email": "vince_chang@aspeedtech.com",
                "username": "VinceChang6637"
            },
            "createdOn": 1728985447,
            "author": {
                "name": "Vince Chang",
                "email": "vince_chang@aspeedtech.com",
                "username": "VinceChang6637"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Vince Chang",
                        "email": "vince_chang@aspeedtech.com",
                        "username": "VinceChang6637"
                    },
                    "message": "Regarding util-linux patch file, the util-linux reviewer provided a new option to use \"--sector-size\". Refer to https://github.com/util-linux/util-linux/pull/3237. We can update direct-with-blksz.py when sfdisk supports the \"--sector-sze\" configuration."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Vince Chang",
                        "email": "vince_chang@aspeedtech.com",
                        "username": "VinceChang6637"
                    },
                    "message": "I have submitted a patch to the oe-core.\nhttps://patchwork.yoctoproject.org/project/oe-core/patch/20241017084002.4093919-2-vince_chang@aspeedtech.com/\nIf accepted, direct-with-blksz.py will not be needed."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 55,
                    "deletions": 0
                },
                {
                    "file": "meta-aspeed/wic/ufs-aspeed.wks.in",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "meta-aspeed/recipes-phosphor/images/obmc-phosphor-image.bbappend",
                    "type": "ADDED",
                    "insertions": 5,
                    "deletions": 0
                },
                {
                    "file": "meta-aspeed/scripts/lib/wic/plugins/imager/direct-with-blksz.py",
                    "type": "ADDED",
                    "insertions": 627,
                    "deletions": 0
                },
                {
                    "file": "meta-aspeed/recipes-core/util-linux/util-linux_%.bbappend",
                    "type": "ADDED",
                    "insertions": 5,
                    "deletions": 0
                },
                {
                    "file": "meta-aspeed/conf/machine/include/ast-ufs.inc",
                    "type": "ADDED",
                    "insertions": 7,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/initrdscripts/phosphor-mmc-init/ufs-init.sh",
                    "type": "ADDED",
                    "insertions": 116,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/initrdscripts/phosphor-mmc-init.bb",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -4
                },
                {
                    "file": "meta-aspeed/recipes-core/util-linux/util-linux/0001-blk-allow-to-define-the-default-block-size-as-env-va.patch",
                    "type": "ADDED",
                    "insertions": 65,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 905,
            "sizeDeletions": 4
        },
        {
            "number": 2,
            "revision": "b6b7fb05d8d5b704a6e7e23f907a40ffb2806cc1",
            "parents": [
                "80497086bc02676db5894964d8b74929e587b0c0"
            ],
            "ref": "refs/changes/04/75304/2",
            "uploader": {
                "name": "Vince Chang",
                "email": "vince_chang@aspeedtech.com",
                "username": "VinceChang6637"
            },
            "createdOn": 1734060490,
            "author": {
                "name": "Vince Chang",
                "email": "vince_chang@aspeedtech.com",
                "username": "VinceChang6637"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 55,
                    "deletions": 0
                },
                {
                    "file": "meta-aspeed/wic/ufs-aspeed.wks.in",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "meta-aspeed/recipes-phosphor/images/obmc-phosphor-image.bbappend",
                    "type": "ADDED",
                    "insertions": 5,
                    "deletions": 0
                },
                {
                    "file": "meta-aspeed/scripts/lib/wic/plugins/imager/direct-with-blksz.py",
                    "type": "ADDED",
                    "insertions": 627,
                    "deletions": 0
                },
                {
                    "file": "meta-aspeed/recipes-core/util-linux/util-linux_%.bbappend",
                    "type": "ADDED",
                    "insertions": 5,
                    "deletions": 0
                },
                {
                    "file": "meta-aspeed/conf/machine/include/ast-ufs.inc",
                    "type": "ADDED",
                    "insertions": 7,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/initrdscripts/phosphor-mmc-init/ufs-init.sh",
                    "type": "ADDED",
                    "insertions": 116,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/initrdscripts/phosphor-mmc-init.bb",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -4
                },
                {
                    "file": "meta-aspeed/recipes-core/util-linux/util-linux/0001-blk-allow-to-define-the-default-block-size-as-env-va.patch",
                    "type": "ADDED",
                    "insertions": 65,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 905,
            "sizeDeletions": 4
        },
        {
            "number": 3,
            "revision": "8216b1384721041abfe06b42a16f35503e5bf5ba",
            "parents": [
                "80497086bc02676db5894964d8b74929e587b0c0"
            ],
            "ref": "refs/changes/04/75304/3",
            "uploader": {
                "name": "Vince Chang",
                "email": "vince_chang@aspeedtech.com",
                "username": "VinceChang6637"
            },
            "createdOn": 1734061180,
            "author": {
                "name": "Vince Chang",
                "email": "vince_chang@aspeedtech.com",
                "username": "VinceChang6637"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 27,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Is there a way we can install just a small configuration shell script based on mmc vs ufs that we source instead of copying the whole script?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 27,
                    "reviewer": {
                        "name": "Vince Chang",
                        "email": "vince_chang@aspeedtech.com",
                        "username": "VinceChang6637"
                    },
                    "message": "May I use the sed command in the bb file to modify mmc-ini.sh for UFS?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 27,
                    "reviewer": {
                        "name": "Vince Chang",
                        "email": "vince_chang@aspeedtech.com",
                        "username": "VinceChang6637"
                    },
                    "message": "I added a mode in the mmc-init.sh and used the sed command to change the mode in the bb file. Please review it again. Thanks."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Vince Chang",
                        "email": "vince_chang@aspeedtech.com",
                        "username": "VinceChang6637"
                    },
                    "message": "The util-linux and generate wic scripts have been accepted in OE.\n\n- https://github.com/openembedded/openembedded-core/commit/7e37e0addeae3ade4d1634697cde5c8cc619c46a\n- https://github.com/openembedded/openembedded-core/commit/2255f28b579bc5db4138bcacbb829661ae0ee721"
                },
                {
                    "file": "meta-aspeed/wic/ufs-aspeed.wks.in",
                    "line": 13,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "nit: clean up stray whitespace"
                },
                {
                    "file": "meta-aspeed/wic/ufs-aspeed.wks.in",
                    "line": 13,
                    "reviewer": {
                        "name": "Vince Chang",
                        "email": "vince_chang@aspeedtech.com",
                        "username": "VinceChang6637"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 53,
                    "deletions": 0
                },
                {
                    "file": "meta-aspeed/wic/ufs-aspeed.wks.in",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "meta-aspeed/conf/machine/include/ast-ufs.inc",
                    "type": "ADDED",
                    "insertions": 7,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/initrdscripts/phosphor-mmc-init/ufs-init.sh",
                    "type": "ADDED",
                    "insertions": 116,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/initrdscripts/phosphor-mmc-init.bb",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 201,
            "sizeDeletions": 4
        },
        {
            "number": 4,
            "revision": "86ea2295c3df28ccbe234db373a96e1b824d4ae0",
            "parents": [
                "80497086bc02676db5894964d8b74929e587b0c0"
            ],
            "ref": "refs/changes/04/75304/4",
            "uploader": {
                "name": "Vince Chang",
                "email": "vince_chang@aspeedtech.com",
                "username": "VinceChang6637"
            },
            "createdOn": 1734334662,
            "author": {
                "name": "Vince Chang",
                "email": "vince_chang@aspeedtech.com",
                "username": "VinceChang6637"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 53,
                    "deletions": 0
                },
                {
                    "file": "meta-aspeed/wic/ufs-aspeed.wks.in",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "meta-aspeed/conf/machine/include/ast-ufs.inc",
                    "type": "ADDED",
                    "insertions": 7,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/initrdscripts/phosphor-mmc-init/ufs-init.sh",
                    "type": "ADDED",
                    "insertions": 116,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/initrdscripts/phosphor-mmc-init.bb",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 201,
            "sizeDeletions": 4
        },
        {
            "number": 5,
            "revision": "cc5134f744792dcfb5ea6cbbca0ecd30c7f202d5",
            "parents": [
                "80497086bc02676db5894964d8b74929e587b0c0"
            ],
            "ref": "refs/changes/04/75304/5",
            "uploader": {
                "name": "Vince Chang",
                "email": "vince_chang@aspeedtech.com",
                "username": "VinceChang6637"
            },
            "createdOn": 1734407060,
            "author": {
                "name": "Vince Chang",
                "email": "vince_chang@aspeedtech.com",
                "username": "VinceChang6637"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 53,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/initrdscripts/phosphor-mmc-init/mmc-init.sh",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -3
                },
                {
                    "file": "meta-aspeed/wic/ufs-aspeed.wks.in",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "meta-aspeed/conf/machine/include/ast-ufs.inc",
                    "type": "ADDED",
                    "insertions": 7,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/initrdscripts/phosphor-mmc-init.bb",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 97,
            "sizeDeletions": 5
        }
    ]
}