{
    "project": "openbmc/pldm",
    "branch": "master",
    "id": "I2eb41996ab0dcb1d00ac5b8b0e55846b0d4b28a5",
    "number": 48179,
    "subject": "pldmtool: Add GetStatus firmware update command",
    "owner": {
        "name": "Tom Joseph",
        "email": "rushtotom@gmail.com",
        "username": "tomjoseph83"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/pldm/+/48179",
    "commitMessage": "pldmtool: Add GetStatus firmware update command\n\nTested:\n\npldmtool fw_update --help\nfirmware update type commands\nUsage: ./pldmtool fw_update [OPTIONS] SUBCOMMAND\nOptions:\n  -h,--help                   Print this help message and exit\n\nSubcommands:\n  GetStatus                   Status of the FD\n\npldmtool fw_update GetStatus -m <eid>\n{     \"CurrentState\": \"IDLE\",\n      \"PreviousState\": \"IDLE\",\n      \"AuxState\": \"Not applicable in current state\",\n      \"AuxStateStatus\": \"AuxState is In Progress or Success\",\n      \"ProgressPercent\": 101,\n      \"ReasonCode\": \"Initialization of firmware device has occurred\",\n      \"UpdateOptionFlagsEnabled\": 0\n}\n\nSigned-off-by: Tom Joseph <rushtotom@gmail.com>\nChange-Id: I2eb41996ab0dcb1d00ac5b8b0e55846b0d4b28a5\n",
    "createdOn": 1635174872,
    "lastUpdated": 1638260219,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1635174872,
            "reviewer": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1635174896,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1635174904,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/3436/ (2/2)\n\nppc64le CI Build Started"
        },
        {
            "timestamp": 1635175006,
            "reviewer": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "message": "Uploaded patch set 2: Commit message was updated."
        },
        {
            "timestamp": 1635175038,
            "reviewer": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1635175055,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1635175058,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/3436/ : ABORTED\n\nhttps://jenkins.openbmc.org/job/ci-repository/28934/ : FAILURE"
        },
        {
            "timestamp": 1635175064,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/3437/ (2/2)\n\nppc64le CI Build Started"
        },
        {
            "timestamp": 1635175119,
            "reviewer": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "message": "Removed reviewer Deepak Kodihalli."
        },
        {
            "timestamp": 1635175971,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/28935/ : SUCCESS\n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/3437/ : ppc64le CI Build Successful"
        },
        {
            "timestamp": 1635198726,
            "reviewer": {
                "name": "P Dheeraj Srujan Kumar",
                "email": "p.dheeraj.srujan.kumar@intel.com",
                "username": "dheerajpdsk"
            },
            "message": "Patch Set 3:\n\n(3 comments)"
        },
        {
            "timestamp": 1635219742,
            "reviewer": {
                "name": "Gokul Sanker V G",
                "email": "gokul.sanker.v.g@intel.com",
                "username": "gokulsvg"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1635232493,
            "reviewer": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "message": "Patch Set 3:\n\n(5 comments)"
        },
        {
            "timestamp": 1635319226,
            "reviewer": {
                "name": "Sridevi Ramesh",
                "email": "sridevra@in.ibm.com",
                "username": "SrideviRamesh"
            },
            "message": "Patch Set 3: Code-Review-1\n\n(2 comments)\n\nHi Tom,\n\nIs fw_update a pldm type?? If so should we update in Getpldmtypes (pldmtool base getpldmtypes)??"
        },
        {
            "timestamp": 1635321283,
            "reviewer": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "message": "Patch Set 3:\n\n(2 comments)\n\n> Patch Set 3: Code-Review-1\n> \n> (2 comments)\n> \n> Hi Tom,\n> \n> Is fw_update a pldm type?? If so should we update in Getpldmtypes (pldmtool base getpldmty\n\nCorrect it is a new specification DSP0267. GetPLDMTypes is a separate command and the changes for that will be a separate patch."
        },
        {
            "timestamp": 1635321779,
            "reviewer": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1635321807,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1635335686,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/3458/ (2/2)\n\nppc64le CI Build Started"
        },
        {
            "timestamp": 1635341887,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/29142/ : SUCCESS\n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/3458/ : ppc64le CI Build Successful"
        },
        {
            "timestamp": 1635815958,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1637216177,
            "reviewer": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1638171131,
            "reviewer": {
                "name": "Deepak Kodihalli",
                "email": "deepak.kodihalli.83@gmail.com",
                "username": "dkodihal"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1638172181,
            "reviewer": {
                "name": "Sridevi Ramesh",
                "email": "sridevra@in.ibm.com",
                "username": "SrideviRamesh"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1638182477,
            "reviewer": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "message": "Patch Set 4: Code-Review+2"
        },
        {
            "timestamp": 1638260219,
            "reviewer": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "message": "Change has been successfully rebased and submitted as eea835a91b3b574100cade108548a3278d79b6bf by Tom Joseph"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "44b8624ec48e85d233c88759181f7aa86d427af5",
            "parents": [
                "60e1fe91dee16e2f191576426dbac7bfb4b60807"
            ],
            "ref": "refs/changes/79/48179/1",
            "uploader": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "createdOn": 1635174872,
            "author": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "pldmtool/meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "pldmtool/pldmtool.cpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 3,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "c3c531d4898b7746fa6cd5cf1491b562c4cdb9f9",
            "parents": [
                "60e1fe91dee16e2f191576426dbac7bfb4b60807"
            ],
            "ref": "refs/changes/79/48179/2",
            "uploader": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "createdOn": 1635175006,
            "author": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "pldmtool/meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "pldmtool/pldmtool.cpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 3,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "c105ff083b2c08deb66a71fa59093b664803d757",
            "parents": [
                "60e1fe91dee16e2f191576426dbac7bfb4b60807"
            ],
            "ref": "refs/changes/79/48179/3",
            "uploader": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "createdOn": 1635175038,
            "author": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "pldmtool/pldm_fw_update_cmd.cpp",
                    "line": 14,
                    "reviewer": {
                        "name": "P Dheeraj Srujan Kumar",
                        "email": "p.dheeraj.srujan.kumar@intel.com",
                        "username": "dheerajpdsk"
                    },
                    "message": "No name for the namespace ?"
                },
                {
                    "file": "pldmtool/pldm_fw_update_cmd.cpp",
                    "line": 14,
                    "reviewer": {
                        "name": "Tom Joseph",
                        "email": "rushtotom@gmail.com",
                        "username": "tomjoseph83"
                    },
                    "message": "yeah\n\nhttps://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#sf22-use-an-unnamed-anonymous-namespace-for-all-internalnon-exported-entities"
                },
                {
                    "file": "pldmtool/pldm_fw_update_cmd.cpp",
                    "line": 17,
                    "reviewer": {
                        "name": "P Dheeraj Srujan Kumar",
                        "email": "p.dheeraj.srujan.kumar@intel.com",
                        "username": "dheerajpdsk"
                    },
                    "message": "I guess \"using namespace\" is generally not preferred."
                },
                {
                    "file": "pldmtool/pldm_fw_update_cmd.cpp",
                    "line": 17,
                    "reviewer": {
                        "name": "Tom Joseph",
                        "email": "rushtotom@gmail.com",
                        "username": "tomjoseph83"
                    },
                    "message": "In header files it is not preferred.\n\nhttps://gerrit.openbmc-project.xyz/c/openbmc/pldm/+/46074"
                },
                {
                    "file": "pldmtool/pldm_fw_update_cmd.cpp",
                    "line": 90,
                    "reviewer": {
                        "name": "P Dheeraj Srujan Kumar",
                        "email": "p.dheeraj.srujan.kumar@intel.com",
                        "username": "dheerajpdsk"
                    },
                    "message": "Null check before use ?"
                },
                {
                    "file": "pldmtool/pldm_fw_update_cmd.cpp",
                    "line": 90,
                    "reviewer": {
                        "name": "Tom Joseph",
                        "email": "rushtotom@gmail.com",
                        "username": "tomjoseph83"
                    },
                    "message": "https://github.com/openbmc/pldm/blob/master/libpldm/firmware_update.c#L1405"
                },
                {
                    "file": "pldmtool/pldm_fw_update_cmd.cpp",
                    "line": 106,
                    "reviewer": {
                        "name": "Gokul Sanker V G",
                        "email": "gokul.sanker.v.g@intel.com",
                        "username": "gokulsvg"
                    },
                    "message": "are we doing this check in libpldm ?"
                },
                {
                    "file": "pldmtool/pldm_fw_update_cmd.cpp",
                    "line": 106,
                    "reviewer": {
                        "name": "Tom Joseph",
                        "email": "rushtotom@gmail.com",
                        "username": "tomjoseph83"
                    },
                    "message": "This check is not for validation, but to decide whether to convert the ausStateStatus to string or print it as number."
                },
                {
                    "file": "pldmtool/pldm_fw_update_cmd.cpp",
                    "line": 115,
                    "reviewer": {
                        "name": "Gokul Sanker V G",
                        "email": "gokul.sanker.v.g@intel.com",
                        "username": "gokulsvg"
                    },
                    "message": "same here , we are doing this in libpldm ?"
                },
                {
                    "file": "pldmtool/pldm_fw_update_cmd.cpp",
                    "line": 115,
                    "reviewer": {
                        "name": "Tom Joseph",
                        "email": "rushtotom@gmail.com",
                        "username": "tomjoseph83"
                    },
                    "message": "This check is not for validation, but to decide whether to convert the reasonCode to string or print it as number."
                },
                {
                    "file": "pldmtool/pldm_fw_update_cmd.cpp",
                    "line": 131,
                    "reviewer": {
                        "name": "Sridevi Ramesh",
                        "email": "sridevra@in.ibm.com",
                        "username": "SrideviRamesh"
                    },
                    "message": "is this needs to changed in respective to fw_update"
                },
                {
                    "file": "pldmtool/pldm_fw_update_cmd.cpp",
                    "line": 131,
                    "reviewer": {
                        "name": "Tom Joseph",
                        "email": "rushtotom@gmail.com",
                        "username": "tomjoseph83"
                    },
                    "message": "yeah, ack."
                },
                {
                    "file": "pldmtool/pldm_fw_update_cmd.cpp",
                    "line": 134,
                    "reviewer": {
                        "name": "Sridevi Ramesh",
                        "email": "sridevra@in.ibm.com",
                        "username": "SrideviRamesh"
                    },
                    "message": "what is FD here"
                },
                {
                    "file": "pldmtool/pldm_fw_update_cmd.cpp",
                    "line": 134,
                    "reviewer": {
                        "name": "Tom Joseph",
                        "email": "rushtotom@gmail.com",
                        "username": "tomjoseph83"
                    },
                    "message": "Firmware Device"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "pldmtool/meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "pldmtool/pldm_fw_update_cmd.cpp",
                    "type": "ADDED",
                    "insertions": 141,
                    "deletions": 0
                },
                {
                    "file": "pldmtool/pldm_fw_update_cmd.hpp",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "pldmtool/pldmtool.cpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 159,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "1ddfbcfc781a39ab53dc133052273dbaa881706f",
            "parents": [
                "60e1fe91dee16e2f191576426dbac7bfb4b60807"
            ],
            "ref": "refs/changes/79/48179/4",
            "uploader": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "createdOn": 1635321779,
            "author": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "pldmtool/pldm_fw_update_cmd.cpp",
                    "line": 101,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Direct use of this method is potentially dangerous."
                },
                {
                    "file": "pldmtool/pldm_fw_update_cmd.cpp",
                    "line": 101,
                    "reviewer": {
                        "name": "Tom Joseph",
                        "email": "rushtotom@gmail.com",
                        "username": "tomjoseph83"
                    },
                    "message": "I have not added explicit check since this is a tool and decode_get_status_resp will fail if currentState returns an invalid value."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 31,
                    "deletions": 0
                },
                {
                    "file": "pldmtool/meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "pldmtool/pldm_fw_update_cmd.cpp",
                    "type": "ADDED",
                    "insertions": 142,
                    "deletions": 0
                },
                {
                    "file": "pldmtool/pldm_fw_update_cmd.hpp",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "pldmtool/pldmtool.cpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 160,
            "sizeDeletions": 0
        },
        {
            "number": 5,
            "revision": "eea835a91b3b574100cade108548a3278d79b6bf",
            "parents": [
                "3d34b2c21190aabce594b1b84f42569ba78cf8c7"
            ],
            "ref": "refs/changes/79/48179/5",
            "uploader": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "createdOn": 1638260219,
            "author": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 31,
                    "deletions": 0
                },
                {
                    "file": "pldmtool/meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "pldmtool/pldm_fw_update_cmd.cpp",
                    "type": "ADDED",
                    "insertions": 142,
                    "deletions": 0
                },
                {
                    "file": "pldmtool/pldm_fw_update_cmd.hpp",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "pldmtool/pldmtool.cpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 160,
            "sizeDeletions": 0
        }
    ]
}