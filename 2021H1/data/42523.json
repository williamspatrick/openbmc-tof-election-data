{
    "project": "openbmc/openpower-pnor-code-mgmt",
    "branch": "master",
    "id": "I6bca3b3651e29aa16b58e05c4b59bdb6a8717c27",
    "number": 42523,
    "subject": "ubi/obmc-flash-bios: fix shellcheck warnings",
    "owner": {
        "name": "Adriana Kobylak",
        "email": "anoo@linux.ibm.com",
        "username": "anoo1"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/openpower-pnor-code-mgmt/+/42523",
    "commitMessage": "ubi/obmc-flash-bios: fix shellcheck warnings\n\nTested: Ran PNOR code update on witherspoon.\n\nChange-Id: I6bca3b3651e29aa16b58e05c4b59bdb6a8717c27\n",
    "createdOn": 1619035238,
    "lastUpdated": 1620676194,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1619035238,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1619035250,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1619035625,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/15917/ : SUCCESS"
        },
        {
            "timestamp": 1619130263,
            "reviewer": {
                "name": "Bruce Mitchell",
                "email": "bruce.mitchell@linux.vnet.ibm.com",
                "username": "BMC-Bruce"
            },
            "message": "Patch Set 1: Code-Review+1"
        },
        {
            "timestamp": 1619462988,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1619463001,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1619464135,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/16197/ : SUCCESS"
        },
        {
            "timestamp": 1619494776,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1619550494,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1619576177,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1619639593,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1619639658,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Set Work In Progress"
        },
        {
            "timestamp": 1619807839,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1619807864,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 3:\n\nThis change is ready for review."
        },
        {
            "timestamp": 1619807875,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1619808127,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1619808309,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/16514/ : SUCCESS"
        },
        {
            "timestamp": 1620676143,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 3: Code-Review+2"
        },
        {
            "timestamp": 1620676194,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Change has been successfully merged by Adriana Kobylak"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "47f0cdb074cc01cee1bf159df48c58e2d05096a1",
            "parents": [
                "9c26984e3247092851324adf0a276a587525809d"
            ],
            "ref": "refs/changes/23/42523/1",
            "uploader": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "createdOn": 1619035238,
            "author": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 11,
                    "deletions": 0
                },
                {
                    "file": "ubi/obmc-flash-bios",
                    "type": "MODIFIED",
                    "insertions": 66,
                    "deletions": -53
                }
            ],
            "sizeInsertions": 66,
            "sizeDeletions": 53
        },
        {
            "number": 2,
            "revision": "913a340e82c26e515ca8aa5d736fcfe50962df17",
            "parents": [
                "a08c97a96ac6a5ab207a7ae128d84c5e9fa5efb3"
            ],
            "ref": "refs/changes/23/42523/2",
            "uploader": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "createdOn": 1619462988,
            "author": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "ubi/obmc-flash-bios",
                    "line": 1,
                    "reviewer": {
                        "name": "Jayanth Othayoth",
                        "email": "ojayanth@gmail.com",
                        "username": "ojayanth"
                    },
                    "message": "You need to look warnings related usage of sh instead of bash?\nAlso as i mentioned in the other review, please look any scope of optimizng disable keyword by moving file level scope."
                },
                {
                    "file": "ubi/obmc-flash-bios",
                    "line": 1,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "Yeah, i don't want to change the script to using bash because that'd require adding bash to the image. I'll reply on the other commits, but I think ignoring per use-case is still better than a file-wide ignore."
                },
                {
                    "file": "ubi/obmc-flash-bios",
                    "line": 1,
                    "reviewer": {
                        "name": "Jayanth Othayoth",
                        "email": "ojayanth@gmail.com",
                        "username": "ojayanth"
                    },
                    "message": "Any limitation in adding bash in the image? My understanding on the scope of this commit is to fix all shell check warning to enable shell check in CI , is this correct?"
                },
                {
                    "file": "ubi/obmc-flash-bios",
                    "line": 1,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "I thought I had seen a review comment that questioned why the phosphor-bmc-code-mgmt needed a bash dependency, but maybe i dreamed it because i can't find it in gerrit :) .. Maybe it does make sense to convert this script to bash, let me work on it, also like you mentioned other scripts are being converted too."
                },
                {
                    "file": "ubi/obmc-flash-bios",
                    "line": 1,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "Done. Changed it to bash, much cleaner now. Will update the recipe with the dependency once the commit chain is merged."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 11,
                    "deletions": 0
                },
                {
                    "file": "ubi/obmc-flash-bios",
                    "type": "MODIFIED",
                    "insertions": 69,
                    "deletions": -55
                }
            ],
            "sizeInsertions": 69,
            "sizeDeletions": 55
        },
        {
            "number": 3,
            "revision": "bee8ffdf974c44d441db4620af5ba44935e8f3ab",
            "parents": [
                "f6d4d76bdca151331870cf2658ea4ff1b4680f23"
            ],
            "ref": "refs/changes/23/42523/3",
            "uploader": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "createdOn": 1619807839,
            "author": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 11,
                    "deletions": 0
                },
                {
                    "file": "ubi/obmc-flash-bios",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": -26
                }
            ],
            "sizeInsertions": 19,
            "sizeDeletions": 26
        }
    ]
}