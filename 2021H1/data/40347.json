{
    "project": "openbmc/openpower-hw-diags",
    "branch": "master",
    "id": "I3ec6755ef258ac869775b08afafae324a76a2884",
    "number": 40347,
    "subject": "Attn: Fix CI complaint of unused-results",
    "owner": {
        "name": "Ben Tyner",
        "email": "ben.tyner@ibm.com",
        "username": "bentyner"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/openpower-hw-diags/+/40347",
    "commitMessage": "Attn: Fix CI complaint of unused-results\n\nUse the results provided by file read/write operations. For mismatch in\nnumber of bytes written on ffdc data creation we add a trace message,\nfor mismatch in number of bytes read during pel creation we skip\ncreating the pel.\n\nSigned-off-by: Ben Tyner <ben.tyner@ibm.com>\nChange-Id: I3ec6755ef258ac869775b08afafae324a76a2884\n",
    "createdOn": 1612558974,
    "lastUpdated": 1612979898,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1612558974,
            "reviewer": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1612558986,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1612559075,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/11995/ : SUCCESS"
        },
        {
            "timestamp": 1612559137,
            "reviewer": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "message": "Patch Set 2: Commit message was updated."
        },
        {
            "timestamp": 1612896927,
            "reviewer": {
                "name": "Brian Stegmiller",
                "email": "steg2021@linux.vnet.ibm.com",
                "username": "bstegmiller"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1612898297,
            "reviewer": {
                "name": "Zane Shelley",
                "email": "zshelle@us.ibm.com",
                "username": "zane131"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1612904102,
            "reviewer": {
                "name": "Zane Shelley",
                "email": "zshelle@us.ibm.com",
                "username": "zane131"
            },
            "message": "Patch Set 2: Code-Review-1\n\n(2 comments)"
        },
        {
            "timestamp": 1612922919,
            "reviewer": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1612922978,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1612923070,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/12213/ : SUCCESS"
        },
        {
            "timestamp": 1612923674,
            "reviewer": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "message": "Patch Set 3:\n\n(4 comments)"
        },
        {
            "timestamp": 1612931765,
            "reviewer": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "message": "Patch Set 4: Patch Set 3 was rebased"
        },
        {
            "timestamp": 1612931776,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1612931896,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/12218/ : SUCCESS"
        },
        {
            "timestamp": 1612978254,
            "reviewer": {
                "name": "Caleb N. Palmer",
                "email": "cnpalmer@us.ibm.com",
                "username": "cnpalmer"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1612978257,
            "reviewer": {
                "name": "Brian Stegmiller",
                "email": "steg2021@linux.vnet.ibm.com",
                "username": "bstegmiller"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1612978266,
            "reviewer": {
                "name": "Zane Shelley",
                "email": "zshelle@us.ibm.com",
                "username": "zane131"
            },
            "message": "Patch Set 4: Code-Review+2"
        },
        {
            "timestamp": 1612979898,
            "reviewer": {
                "name": "Zane Shelley",
                "email": "zshelle@us.ibm.com",
                "username": "zane131"
            },
            "message": "Change has been successfully merged by Zane Shelley"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "7388388302a34dd895c39d801c72a7cff6ed3ef1",
            "parents": [
                "05fb6e70409ae0c8addb717f1891da79ea719bb3"
            ],
            "ref": "refs/changes/47/40347/1",
            "uploader": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "createdOn": 1612558974,
            "author": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "attn/attn_dbus.cpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -1
                },
                {
                    "file": "attn/attn_logging.cpp",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": -7
                }
            ],
            "sizeInsertions": 30,
            "sizeDeletions": 8
        },
        {
            "number": 2,
            "revision": "5edad4a2b4a31338857a669034360fb5253763c0",
            "parents": [
                "05fb6e70409ae0c8addb717f1891da79ea719bb3"
            ],
            "ref": "refs/changes/47/40347/2",
            "uploader": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "createdOn": 1612559137,
            "author": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "attn/attn_dbus.cpp",
                    "line": 136,
                    "reviewer": {
                        "name": "Zane Shelley",
                        "email": "zshelle@us.ibm.com",
                        "username": "zane131"
                    },
                    "message": "Why is this necessary?"
                },
                {
                    "file": "attn/attn_dbus.cpp",
                    "line": 136,
                    "reviewer": {
                        "name": "Ben Tyner",
                        "email": "ben.tyner@ibm.com",
                        "username": "bentyner"
                    },
                    "message": "Ack - write() returns ssize_t which results in signed vs unsigned compare without the cast. In any case I changed numBytes type from auto to size_t to be more clear."
                },
                {
                    "file": "attn/attn_logging.cpp",
                    "line": 63,
                    "reviewer": {
                        "name": "Zane Shelley",
                        "email": "zshelle@us.ibm.com",
                        "username": "zane131"
                    },
                    "message": "Consider outputting file name, size written, and size of the buffer to the trace."
                },
                {
                    "file": "attn/attn_logging.cpp",
                    "line": 63,
                    "reviewer": {
                        "name": "Zane Shelley",
                        "email": "zshelle@us.ibm.com",
                        "username": "zane131"
                    },
                    "message": "Consider making this a more severe level."
                },
                {
                    "file": "attn/attn_logging.cpp",
                    "line": 63,
                    "reviewer": {
                        "name": "Ben Tyner",
                        "email": "ben.tyner@ibm.com",
                        "username": "bentyner"
                    },
                    "message": "Done - changed to ERROR (phosphor::logging::level::ERR)"
                },
                {
                    "file": "attn/attn_logging.cpp",
                    "line": 63,
                    "reviewer": {
                        "name": "Ben Tyner",
                        "email": "ben.tyner@ibm.com",
                        "username": "bentyner"
                    },
                    "message": "Done - traced file path and bytes written vs expected"
                },
                {
                    "file": "attn/attn_logging.cpp",
                    "line": 332,
                    "reviewer": {
                        "name": "Brian Stegmiller",
                        "email": "steg2021@linux.vnet.ibm.com",
                        "username": "bstegmiller"
                    },
                    "message": "Wouldn't we still want to attempt a PEL/error log and just be aware of how many bytes we can safely use ?"
                },
                {
                    "file": "attn/attn_logging.cpp",
                    "line": 332,
                    "reviewer": {
                        "name": "Ben Tyner",
                        "email": "ben.tyner@ibm.com",
                        "username": "bentyner"
                    },
                    "message": "Ack - in this case the file read failed and we can't reliably create the custom pel however another pel will exist indicating a terminate event"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "attn/attn_dbus.cpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -1
                },
                {
                    "file": "attn/attn_logging.cpp",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": -7
                }
            ],
            "sizeInsertions": 30,
            "sizeDeletions": 8
        },
        {
            "number": 3,
            "revision": "448aff73a2ac3e8ea6a558e16ec5ac4d2f6926fa",
            "parents": [
                "05fb6e70409ae0c8addb717f1891da79ea719bb3"
            ],
            "ref": "refs/changes/47/40347/3",
            "uploader": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "createdOn": 1612922919,
            "author": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "attn/attn_dbus.cpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": -2
                },
                {
                    "file": "attn/attn_logging.cpp",
                    "type": "MODIFIED",
                    "insertions": 41,
                    "deletions": -7
                },
                {
                    "file": "attn/attn_logging.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 55,
            "sizeDeletions": 10
        },
        {
            "number": 4,
            "revision": "d700609cb6dbae60e4698ecf62b92b906f369067",
            "parents": [
                "8882c32a2cbbfd047a5ff0424af027bd6f3ad0fd"
            ],
            "ref": "refs/changes/47/40347/4",
            "uploader": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "createdOn": 1612931765,
            "author": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "attn/attn_dbus.cpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": -2
                },
                {
                    "file": "attn/attn_logging.cpp",
                    "type": "MODIFIED",
                    "insertions": 41,
                    "deletions": -7
                },
                {
                    "file": "attn/attn_logging.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 55,
            "sizeDeletions": 10
        }
    ]
}