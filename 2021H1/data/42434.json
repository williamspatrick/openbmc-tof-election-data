{
    "project": "openbmc/openbmc-build-scripts",
    "branch": "master",
    "topic": "clang-12",
    "id": "I2f82a84ab6000bb4a3ea57803369b210b0a45dc3",
    "number": 42434,
    "subject": "clang: update to clang-12",
    "owner": {
        "name": "Patrick Williams",
        "email": "patrick@stwcx.xyz",
        "username": "williamspatrick"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/openbmc-build-scripts/+/42434",
    "commitMessage": "clang: update to clang-12\n\nSigned-off-by: Patrick Williams <patrick@stwcx.xyz>\nChange-Id: I2f82a84ab6000bb4a3ea57803369b210b0a45dc3\n",
    "createdOn": 1618869279,
    "lastUpdated": 1631294108,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1618869279,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1618869292,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1618869298,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-openbmc-build-scripts/270/"
        },
        {
            "timestamp": 1618869321,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-openbmc-build-scripts/270/ : FAILURE"
        },
        {
            "timestamp": 1618929965,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\nLooks like Ubuntu packages aren't quite ready yet."
        },
        {
            "timestamp": 1619790388,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Uploaded patch set 2: Patch Set 1 was rebased."
        },
        {
            "timestamp": 1619790408,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1619790417,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-openbmc-build-scripts/276/"
        },
        {
            "timestamp": 1619790497,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2:\n\n@Ed, I'm not sure what kind of qualification we want to do on this and if we need any new updates to the code-format defaults.  I've got clang-12 installed on my desktop and I'm seeing numerous changes to #include ordering, especially around local headers.  I'm not sure if this is due to \"better implementation\" by Clang or \"missing config\" on our part and I haven't dug into it yet."
        },
        {
            "timestamp": 1619791886,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-openbmc-build-scripts/276/ : SUCCESS"
        },
        {
            "timestamp": 1619796623,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Uploaded patch set 3: Patch Set 2 was rebased."
        },
        {
            "timestamp": 1619796639,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1619796646,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-openbmc-build-scripts/278/"
        },
        {
            "timestamp": 1619797589,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-openbmc-build-scripts/278/ : SUCCESS"
        },
        {
            "timestamp": 1619802019,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n> Patch Set 2:\n> \n> @Ed, I'm not sure what kind of qualification we want to do on this and if we need any new updates to the code-format defaults.  I've got clang-12 installed on my desktop and I'm seeing numerous changes to #include ordering, especially around local headers.\n\nFWIW, In terms of priority, header order is in deep left field for the reasons that I like clang-format when compared to actual code.  I'm not too worried about header order changes.\n\n>  I'm not sure if this is due to \"better implementation\" by Clang or \"missing config\" on our part and I haven't dug into it yet.\n\nI usually do very little verification;  Clang likes to change it's generated code version to version, and since I've been using it, it's always been for the better, or the same.  I'd probably just push patchsets to all the repos with formatting updates;  If clang-format is doing something we don't want, we'll see it in review.\n\nThe only minor worry is we should probably message before we do it, as people are expecting clang-format-11, and will need to update their local."
        },
        {
            "timestamp": 1619806686,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Patch Set 3:\n\n> Patch Set 3:\n> \n> > Patch Set 2:\n> > \n> > @Ed, I'm not sure what kind of qualification we want to do on this and if we need any new updates to the code-format defaults.  I've got clang-12 installed on my desktop and I'm seeing numerous changes to #include ordering, especially around local headers.\n> \n> FWIW, In terms of priority, header order is in deep left field for the reasons that I like clang-format when compared to actual code.  I'm not too worried about header order changes.\n> \n> >  I'm not sure if this is due to \"better implementation\" by Clang or \"missing config\" on our part and I haven't dug into it yet.\n> \n> I usually do very little verification;  Clang likes to change it's generated code version to version, and since I've been using it, it's always been for the better, or the same.  I'd probably just push patchsets to all the repos with formatting updates;  If clang-format is doing something we don't want, we'll see it in review.\n> \n> The only minor worry is we should probably message before we do it, as people are expecting clang-format-11, and will need to update their local.\n\nYeah, agree, an email to the list and we can make this one a Monday merge. Thanks for keeping us up to date Patrick."
        },
        {
            "timestamp": 1620319327,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1620369612,
            "reviewer": {
                "name": "Krzysztof Grobelny",
                "email": "krzysztof.grobelny@intel.com",
                "username": "krzysztof-i"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1620401447,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Patch Set 3:\n\nThere was some discord discussion on this one in #infrastructure. Ed would prefer a single person make the updated clang12 changes for all repos to go along with this so it doesn't fall in each individual repo maintainer to have to quickly deal with this. Any volunteers out there?"
        },
        {
            "timestamp": 1630625685,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Uploaded patch set 4: Patch Set 3 was rebased."
        },
        {
            "timestamp": 1630625699,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1630625707,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-openbmc-build-scripts/361/"
        },
        {
            "timestamp": 1630626875,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-openbmc-build-scripts/361/ : SUCCESS"
        },
        {
            "timestamp": 1630699459,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 4:\n\nTo update this, the header ordering thing seems to have been something that existed only on Patricks machine.  The clang-format changes seem to be minimal, and effect only 10 repos.  I've pushed commits to 6 of the effected repos that should fix this once this change merges.  We'll need to get the rest going at some point, but we're progressing on this faster now."
        },
        {
            "timestamp": 1631292653,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Patch Set 4: Code-Review+2\n\nAll changes under https://gerrit.openbmc-project.xyz/q/topic:%22clang-12%22+(status:open%20OR%20status:merged). Some are not backwards compatible so we'll need to merge this then resubmit them."
        },
        {
            "timestamp": 1631292675,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Change has been successfully rebased and submitted as 4569bf49daaebff06be0482426908bb5497fad08 by Andrew Geissler"
        },
        {
            "timestamp": 1631294108,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Topic set to clang-12"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "134dd8fd23ced255eab995518dbe194504b3906c",
            "parents": [
                "95095f17d02f8c6d3622f5573b32fed3f4f68f61"
            ],
            "ref": "refs/changes/34/42434/1",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1618869279,
            "author": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "scripts/build-unit-test-docker",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -10
                }
            ],
            "sizeInsertions": 10,
            "sizeDeletions": 10
        },
        {
            "number": 2,
            "revision": "cd98bf645d48d122ab76c4df95361160a950a4ec",
            "parents": [
                "f6757adf2078a2320875b62313d8a5073ea734e7"
            ],
            "ref": "refs/changes/34/42434/2",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1619790388,
            "author": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "scripts/build-unit-test-docker",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -10
                }
            ],
            "sizeInsertions": 10,
            "sizeDeletions": 10
        },
        {
            "number": 3,
            "revision": "ad14e6c6eef2113727fb1d2e53e090336282ea0a",
            "parents": [
                "73395159e5729d163fcc1f77cd3a116ddd251b59"
            ],
            "ref": "refs/changes/34/42434/3",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1619796623,
            "author": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "scripts/build-unit-test-docker",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -10
                }
            ],
            "sizeInsertions": 10,
            "sizeDeletions": 10
        },
        {
            "number": 4,
            "revision": "98365d969d88cd51471eda4fc1215a80e1dd2739",
            "parents": [
                "1197e3592eacdaf1305eb48f190e8e0d0f8c4fa4"
            ],
            "ref": "refs/changes/34/42434/4",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1630625685,
            "author": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "scripts/build-unit-test-docker",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -10
                }
            ],
            "sizeInsertions": 10,
            "sizeDeletions": 10
        },
        {
            "number": 5,
            "revision": "4569bf49daaebff06be0482426908bb5497fad08",
            "parents": [
                "0cc575a411eb73e2cdf6f309a3e54bbe072c209f"
            ],
            "ref": "refs/changes/34/42434/5",
            "uploader": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "createdOn": 1631292675,
            "author": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "scripts/build-unit-test-docker",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -10
                }
            ],
            "sizeInsertions": 10,
            "sizeDeletions": 10
        }
    ]
}