{
    "project": "openbmc/host-error-monitor",
    "branch": "master",
    "id": "I6310772003a1d3c5c73838089866ec92f533f529",
    "number": 39075,
    "subject": "Add base monitor class for the new architecture",
    "owner": {
        "name": "Jason Bills",
        "email": "jason.m.bills@linux.intel.com",
        "username": "jmbills"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/host-error-monitor/+/39075",
    "commitMessage": "Add base monitor class for the new architecture\n\nNew architecture is intended to improve flexibility for which\nsignals are monitored in a system and how they are handled.\n\nNew monitoring flow handles interrupt storms better by using\nthe interrupt to notify of changes and start a polling loop to\nget the actual status.\n\nThis base monitor class provides the basic members such as 'valid',\nasio connection, and signal name that are common to all host error\nsignals.\n\nChange-Id: I6310772003a1d3c5c73838089866ec92f533f529\nSigned-off-by: Jason M. Bills <jason.m.bills@intel.com>\n",
    "createdOn": 1608076177,
    "lastUpdated": 1615331699,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1608076177,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1608076194,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1608076251,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/9849/ : FAILURE"
        },
        {
            "timestamp": 1610301768,
            "reviewer": {
                "name": "Saravanan Palanisamy",
                "email": "saravanan.palanisamy@linux.intel.com",
                "username": "saravanan-palanisamy"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1610383598,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1611187414,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1611187430,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1611187495,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/11182/ : SUCCESS"
        },
        {
            "timestamp": 1611189482,
            "reviewer": {
                "name": "Radivoje Jovanovic",
                "email": "radivoje.jovanovic@intel.com",
                "username": "radivojejovanovic"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1611794030,
            "reviewer": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1611873976,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1611873992,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1611874053,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/11542/ : SUCCESS"
        },
        {
            "timestamp": 1611874169,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1612286585,
            "reviewer": {
                "name": "Richard Marian Thomaiyar",
                "email": "richard.marian.thomaiyar@linux.intel.com",
                "username": "rthomaiy"
            },
            "message": "Patch Set 3: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1612301555,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1613092125,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Uploaded patch set 4: Patch Set 3 was rebased."
        },
        {
            "timestamp": 1613092141,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1613092201,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/12343/ : SUCCESS"
        },
        {
            "timestamp": 1613143400,
            "reviewer": {
                "name": "Richard Marian Thomaiyar",
                "email": "richard.marian.thomaiyar@linux.intel.com",
                "username": "rthomaiy"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1613161654,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1613161671,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1613161720,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/12400/ : SUCCESS"
        },
        {
            "timestamp": 1613162041,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1613368750,
            "reviewer": {
                "name": "Richard Marian Thomaiyar",
                "email": "richard.marian.thomaiyar@linux.intel.com",
                "username": "rthomaiy"
            },
            "message": "Patch Set 5: Code-Review+1"
        },
        {
            "timestamp": 1613682033,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Uploaded patch set 6."
        },
        {
            "timestamp": 1613682047,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1613682089,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/12635/ : SUCCESS"
        },
        {
            "timestamp": 1615138183,
            "reviewer": {
                "name": "Richard Marian Thomaiyar",
                "email": "richard.marian.thomaiyar@linux.intel.com",
                "username": "rthomaiy"
            },
            "message": "Patch Set 6: Code-Review+1"
        },
        {
            "timestamp": 1615235569,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 6: Code-Review+2"
        },
        {
            "timestamp": 1615331699,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Change has been successfully merged by Jason Bills"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "ed50752b1ee45d94e65867056aa52b9f3e4b2f6c",
            "parents": [
                "c90570ab1ad57ac824edf7b5d0f8a89afbcf0c09"
            ],
            "ref": "refs/changes/75/39075/1",
            "uploader": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "createdOn": 1608076177,
            "author": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Saravanan Palanisamy",
                        "email": "saravanan.palanisamy@linux.intel.com",
                        "username": "saravanan-palanisamy"
                    },
                    "message": "Is there any design document/review link available for new architecture ?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "No, I didn't publish a design document for this change."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "include/error_monitors/base_monitor.hpp",
                    "type": "ADDED",
                    "insertions": 51,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "2b23292fdcfd4582ec046cf0ab7818310fad15c2",
            "parents": [
                "de8de079ba902e872d69022d2b6a15e000cb7c65"
            ],
            "ref": "refs/changes/75/39075/2",
            "uploader": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "createdOn": 1611187414,
            "author": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Radivoje Jovanovic",
                        "email": "radivoje.jovanovic@intel.com",
                        "username": "radivojejovanovic"
                    },
                    "message": "can you please make a note what the purpose of this class will be?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "Done"
                },
                {
                    "file": "include/error_monitors/base_monitor.hpp",
                    "line": 46,
                    "reviewer": {
                        "name": "Vernon Mauery",
                        "email": "vernon.mauery@linux.intel.com",
                        "username": "vmauery"
                    },
                    "message": "if isValid() is simply returning valid, it seems like a simple way to 'virtualize' the behavior is to simply have the child classes change the member variable rather than override the function."
                },
                {
                    "file": "include/error_monitors/base_monitor.hpp",
                    "line": 46,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "You're right.  This doesn't need to be virtual as it shouldn't need to be overridden.  I could probably do without the function and have the valid check directly look at the member variable, but keeping the function may be more flexible in the future?  I don't know the best approach here, so I'm open to recommendations."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "include/error_monitors/base_monitor.hpp",
                    "type": "ADDED",
                    "insertions": 51,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "c22454a3e206fd102521557abbd639d927213da5",
            "parents": [
                "de8de079ba902e872d69022d2b6a15e000cb7c65"
            ],
            "ref": "refs/changes/75/39075/3",
            "uploader": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "createdOn": 1611873976,
            "author": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "Richard Marian Thomaiyar",
                        "email": "richard.marian.thomaiyar@linux.intel.com",
                        "username": "rthomaiy"
                    },
                    "message": "Clarification: Let me know which error condition we anticipate will cause interrupt storms here?\nSay CATERR, IERR or any error, will be generated only once right? Are we targeting SMI timeout (without reset condition)."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "It was the SMI signal that was toggling too fast for our interrupts to keep up, but that exposed the flaw in depending solely on the interrupts to know the current pin state.  It could happen on any GPIO that toggles too quickly."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "include/error_monitors/base_monitor.hpp",
                    "type": "ADDED",
                    "insertions": 51,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "e7afc0e148745432fa6a2645146804a95a55b17b",
            "parents": [
                "c90570ab1ad57ac824edf7b5d0f8a89afbcf0c09"
            ],
            "ref": "refs/changes/75/39075/4",
            "uploader": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "createdOn": 1613092125,
            "author": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "include/error_monitors/base_monitor.hpp",
                    "line": 2,
                    "reviewer": {
                        "name": "Richard Marian Thomaiyar",
                        "email": "richard.marian.thomaiyar@linux.intel.com",
                        "username": "rthomaiy"
                    },
                    "message": "nit: 2021"
                },
                {
                    "file": "include/error_monitors/base_monitor.hpp",
                    "line": 2,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "include/error_monitors/base_monitor.hpp",
                    "type": "ADDED",
                    "insertions": 51,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 0
        },
        {
            "number": 5,
            "revision": "1b82809343937e4d60c2da66a18378b85f24fc88",
            "parents": [
                "c90570ab1ad57ac824edf7b5d0f8a89afbcf0c09"
            ],
            "ref": "refs/changes/75/39075/5",
            "uploader": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "createdOn": 1613161654,
            "author": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "include/error_monitors/base_monitor.hpp",
                    "type": "ADDED",
                    "insertions": 51,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 0
        },
        {
            "number": 6,
            "revision": "b6c929852299b4e78265a64af5118ddf38489dc9",
            "parents": [
                "c90570ab1ad57ac824edf7b5d0f8a89afbcf0c09"
            ],
            "ref": "refs/changes/75/39075/6",
            "uploader": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "createdOn": 1613682033,
            "author": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "include/error_monitors/base_monitor.hpp",
                    "type": "ADDED",
                    "insertions": 51,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 0
        }
    ]
}