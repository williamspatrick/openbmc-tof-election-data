{
    "project": "openbmc/phosphor-logging",
    "branch": "master",
    "id": "I4bf5382ee9eac53f38b8e1cf7ead8a9d2dd47f8d",
    "number": 43629,
    "subject": "peltool: Fixed output for SRC parser",
    "owner": {
        "name": "Harisuddin Mohamed Isa",
        "email": "harisuddin@gmail.com",
        "username": "harisuddin82"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-logging/+/43629",
    "commitMessage": "peltool: Fixed output for SRC parser\n\nThis changes the output of SRC parser when empty JSON object or array is\nreturned by python module. No \"SRC Details\" key will be shown.\n\nJSON objects will also be nested under \"SRC Details\" instead of\nappending to the \"Primary SRC\" key:\n\n    \"Hex Word 8\":               \"00000000\",\n    \"Hex Word 9\":               \"00000000\",\n    \"SRC Details\": {\n        \"Key\": \"Value\"\n    }\n\nFixed reference counting to avoid possible memory leaks and undefined behaviours.\n\nSigned-off-by: Harisuddin Mohamed Isa <harisuddin@gmail.com>\nChange-Id: I4bf5382ee9eac53f38b8e1cf7ead8a9d2dd47f8d\n",
    "createdOn": 1622266344,
    "lastUpdated": 1624383605,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1622266344,
            "reviewer": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1622266361,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1622267021,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/18336/ : SUCCESS"
        },
        {
            "timestamp": 1622643006,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 1:\n\n(2 comments)"
        },
        {
            "timestamp": 1622709502,
            "reviewer": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "message": "Patch Set 1:\n\n(2 comments)"
        },
        {
            "timestamp": 1622753724,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 1: Code-Review+1\n\n(2 comments)"
        },
        {
            "timestamp": 1623964441,
            "reviewer": {
                "name": "Zane Shelley",
                "email": "zshelle@us.ibm.com",
                "username": "zane131"
            },
            "message": "Patch Set 1: Code-Review+1"
        },
        {
            "timestamp": 1624369956,
            "reviewer": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "message": "Uploaded patch set 2: Patch Set 1 was rebased."
        },
        {
            "timestamp": 1624369980,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1624370809,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/20382/ : SUCCESS"
        },
        {
            "timestamp": 1624370939,
            "reviewer": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1624370954,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1624371011,
            "reviewer": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "message": "Description of patch set 3 set to \"Rebasing\""
        },
        {
            "timestamp": 1624371631,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/20385/ : SUCCESS"
        },
        {
            "timestamp": 1624379831,
            "reviewer": {
                "name": "Zane Shelley",
                "email": "zshelle@us.ibm.com",
                "username": "zane131"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1624383569,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 3: Code-Review+2"
        },
        {
            "timestamp": 1624383605,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Change has been successfully merged by Matt Spinler"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "6e60665b2d64c96aecd86e968f4b59b3ca46152a",
            "parents": [
                "3b8ed7f2d3a93af5d27b549a934667f310412da4"
            ],
            "ref": "refs/changes/29/43629/1",
            "uploader": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "createdOn": 1622266344,
            "author": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "extensions/openpower-pels/src.cpp",
                    "line": 141,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Looks like the XDECREF can handle nullptrs, so you don't need these if checks?"
                },
                {
                    "file": "extensions/openpower-pels/src.cpp",
                    "line": 141,
                    "reviewer": {
                        "name": "Harisuddin Mohamed Isa",
                        "email": "harisuddin@gmail.com",
                        "username": "harisuddin82"
                    },
                    "message": "That was my understanding as well until I hit lines 220-222 in the previous revision. Took me a while to realize those were the culprit for the segfaults I was getting. I'm keeping it safe here."
                },
                {
                    "file": "extensions/openpower-pels/src.cpp",
                    "line": 141,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Ack"
                },
                {
                    "file": "extensions/openpower-pels/src.cpp",
                    "line": 168,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "not sure I really understand Py_INCREF.  why would you need to call it on pDict but not on pKey?"
                },
                {
                    "file": "extensions/openpower-pels/src.cpp",
                    "line": 168,
                    "reviewer": {
                        "name": "Harisuddin Mohamed Isa",
                        "email": "harisuddin@gmail.com",
                        "username": "harisuddin82"
                    },
                    "message": "pDict is a borrowed reference while pKey is a new reference (pKey is taken care of by keyPtr). I'm following the best practices from https://pythonextensionpatterns.readthedocs.io/en/latest/refcount.html just to be on the safe side."
                },
                {
                    "file": "extensions/openpower-pels/src.cpp",
                    "line": 168,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Ack"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 24,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/src.cpp",
                    "type": "MODIFIED",
                    "insertions": 51,
                    "deletions": -12
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 12
        },
        {
            "number": 2,
            "revision": "0969a4c26ba48de6354af0bc1d4784fc7c9369f2",
            "parents": [
                "d354a39835bc855d53aab9f87e9cb5c089a07f0f"
            ],
            "ref": "refs/changes/29/43629/2",
            "uploader": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "createdOn": 1624369956,
            "author": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 24,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/src.cpp",
                    "type": "MODIFIED",
                    "insertions": 51,
                    "deletions": -12
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 12
        },
        {
            "number": 3,
            "revision": "69c1827a6d1196741e08bee8ed6ef405bad6c365",
            "parents": [
                "bb1c1d5c0ae78f1e2ce47a98693894add5a951de"
            ],
            "ref": "refs/changes/29/43629/3",
            "uploader": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "createdOn": 1624370939,
            "author": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 24,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/src.cpp",
                    "type": "MODIFIED",
                    "insertions": 51,
                    "deletions": -12
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 12
        }
    ]
}