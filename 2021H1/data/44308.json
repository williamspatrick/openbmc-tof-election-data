{
    "project": "openbmc/openbmc",
    "branch": "master",
    "topic": "hostlogger-stream",
    "id": "I2527e4b4620390a8c3b73799d4211508fa0c914e",
    "number": 44308,
    "subject": "phosphor-hostlogger: add stream based app",
    "owner": {
        "name": "Nan Zhou",
        "email": "nanzhoumails@gmail.com",
        "username": "FighterNan"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/openbmc/+/44308",
    "commitMessage": "phosphor-hostlogger: add stream based app\n\nAdd the stream based application. Existing buffer based application\nand its users stay unaffected.\n\nSigned-off-by: Nan Zhou <nanzhoumails@gmail.com>\nChange-Id: I2527e4b4620390a8c3b73799d4211508fa0c914e\n",
    "createdOn": 1624316323,
    "lastUpdated": 1624658661,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1624316323,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1624316359,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1624316365,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1:\n\nBuild Started https://jenkins.openbmc.org/job/ci-openbmc/4766/"
        },
        {
            "timestamp": 1624316377,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 1:\n\nPTAL"
        },
        {
            "timestamp": 1624316389,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Topic set to hostlogger-stream"
        },
        {
            "timestamp": 1624316473,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1624316514,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1624316521,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2:\n\nBuild Started https://jenkins.openbmc.org/job/ci-openbmc/4767/"
        },
        {
            "timestamp": 1624316533,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-openbmc/4766/ : ABORTED"
        },
        {
            "timestamp": 1624317496,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-openbmc/4767/ : FAILURE"
        },
        {
            "timestamp": 1624318356,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1624318395,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1624319937,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3:\n\nBuild Started https://jenkins.openbmc.org/job/ci-openbmc/4772/"
        },
        {
            "timestamp": 1624320637,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-openbmc/4772/ : FAILURE"
        },
        {
            "timestamp": 1624321119,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 3:\n\nAll builds actually passed. Seems like there's a bug in the CI script."
        },
        {
            "timestamp": 1624326019,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 3:\n\n> Patch Set 3:\n> \n> All builds actually passed. Seems like there's a bug in the CI script.\n\nTiogapass and yosemitev2 both failed.  I suspect those are the only machines that actually use this recipe?\n\n19:01:46 ERROR: Task (/data0/jenkins/workspace/ci-openbmc/distro/ubuntu/label/docker-builder/target/tiogapass/openbmc/meta-phosphor/recipes-phosphor/logging/phosphor-hostlogger_git.bb:do_fetch) failed with exit code '1'"
        },
        {
            "timestamp": 1624326125,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1624327436,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1624327476,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1624327482,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4:\n\nBuild Started https://jenkins.openbmc.org/job/ci-openbmc/4779/"
        },
        {
            "timestamp": 1624328152,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 4:\n\n(1 comment)\n\n> Patch Set 3:\n> \n> > Patch Set 3:\n> > \n> > All builds actually passed. Seems like there's a bug in the CI script.\n> \n> Tiogapass and yosemitev2 both failed.  I suspect those are the only machines that actually use this recipe?\n> \n> 19:01:46 ERROR: Task (/data0/jenkins/workspace/ci-openbmc/distro/ubuntu/label/docker-builder/target/tiogapass/openbmc/meta-phosphor/recipes-phosphor/logging/phosphor-hostlogger_git.bb:do_fetch) failed with exit code '1'"
        },
        {
            "timestamp": 1624328330,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1624328390,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-openbmc/4779/ : FAILURE"
        },
        {
            "timestamp": 1624328713,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1624328806,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1624658661,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Abandoned\n\nNot need anymore. See https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-hostlogger/+/44241"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "c7cfac500bd937722e145efb4d8e9c48fbab95a8",
            "parents": [
                "607528de113ae619689e7be18b8a80fd2dd20ca4"
            ],
            "ref": "refs/changes/08/44308/1",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1624316323,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/logging/phosphor-hostlogger-stream_git.bb",
                    "type": "ADDED",
                    "insertions": 48,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/logging/phosphor-hostlogger.inc",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/logging/phosphor-hostlogger_git.bb",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -24
                }
            ],
            "sizeInsertions": 75,
            "sizeDeletions": 24
        },
        {
            "number": 2,
            "revision": "14ae20e02c944d13016d6b53ae8e788997d2d92a",
            "parents": [
                "607528de113ae619689e7be18b8a80fd2dd20ca4"
            ],
            "ref": "refs/changes/08/44308/2",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1624316473,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/logging/phosphor-hostlogger-stream_git.bb",
                    "type": "ADDED",
                    "insertions": 48,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/logging/phosphor-hostlogger.inc",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/logging/phosphor-hostlogger_git.bb",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -24
                }
            ],
            "sizeInsertions": 75,
            "sizeDeletions": 24
        },
        {
            "number": 3,
            "revision": "12b75655637af65074fb1309fa1d1d6db6aa7554",
            "parents": [
                "607528de113ae619689e7be18b8a80fd2dd20ca4"
            ],
            "ref": "refs/changes/08/44308/3",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1624318356,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "meta-phosphor/recipes-phosphor/logging/phosphor-hostlogger-stream_git.bb",
                    "line": 1,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Why isn't this just a packageconfig of a single hostlogger recipe?"
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/logging/phosphor-hostlogger-stream_git.bb",
                    "line": 1,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "There are two different bundles (binaries + service units). I find PACKAGECONFIG works cleanly for meson options but I need to write bunch of if else in the origin recipe so I create a new recipe for the new bundle."
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/logging/phosphor-hostlogger-stream_git.bb",
                    "line": 1,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Brad has been suggesting that we have the repos supply their own service files though. Does that change what you said?  It looks like you have some templates here so maybe not."
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/logging/phosphor-hostlogger-stream_git.bb",
                    "line": 1,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Thanks for your reply. The repo does supply their own services files. But different meson option installs different services files. In addition, there are different config files as well. Still I need to write a bunch of branches if we do it in a single recipe."
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/logging/phosphor-hostlogger.inc",
                    "line": 12,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Please don't change the SRCREV at the same time, unless the code won't even compile anymore without this change.  If that is the case, I think you can make a small change that simply changes the SRCREV and the OEMESON_CONF."
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/logging/phosphor-hostlogger.inc",
                    "line": 12,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Thanks for the suggestions!\n\nYeah I find out I can't do SRCREV now since the change is still in review. I will do the small change first like what you suggested."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/logging/phosphor-hostlogger-stream_git.bb",
                    "type": "ADDED",
                    "insertions": 48,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/logging/phosphor-hostlogger.inc",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/logging/phosphor-hostlogger_git.bb",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -24
                }
            ],
            "sizeInsertions": 76,
            "sizeDeletions": 24
        },
        {
            "number": 4,
            "revision": "f79a43fdd22cbd19dae8ee0f7ff1011c2195ab30",
            "parents": [
                "607528de113ae619689e7be18b8a80fd2dd20ca4"
            ],
            "ref": "refs/changes/08/44308/4",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1624327436,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/logging/phosphor-hostlogger-stream_git.bb",
                    "type": "ADDED",
                    "insertions": 48,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/logging/phosphor-hostlogger.inc",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/logging/phosphor-hostlogger_git.bb",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -24
                }
            ],
            "sizeInsertions": 75,
            "sizeDeletions": 24
        }
    ]
}