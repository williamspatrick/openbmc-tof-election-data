{
    "project": "openbmc/phosphor-host-ipmid",
    "branch": "master",
    "id": "Ifd255ef682d6e46d981de6a5a294d12f3666698b",
    "number": 45706,
    "subject": "Add a SecureBuffer class",
    "owner": {
        "name": "Vernon Mauery",
        "email": "vernon.mauery@linux.intel.com",
        "username": "vmauery"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-host-ipmid/+/45706",
    "commitMessage": "Add a SecureBuffer class\n\nSecureBuffer is like SecureString, but a specialization of\nstd::vector<uint8_t> that cleans up after itself\n\nTested: Executed various ipmi commands to see that they still work\n\nChange-Id: Ifd255ef682d6e46d981de6a5a294d12f3666698b\nSigned-off-by: Vernon Mauery <vernon.mauery@linux.intel.com>\n",
    "createdOn": 1628270477,
    "lastUpdated": 1630464392,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1628270477,
            "reviewer": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1628270490,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1628270700,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/23986/ : FAILURE"
        },
        {
            "timestamp": 1628273754,
            "reviewer": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1628273778,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1628273919,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/23995/ : SUCCESS"
        },
        {
            "timestamp": 1628794215,
            "reviewer": {
                "name": "Jonathan Doman",
                "email": "jonathan.doman@intel.com",
                "username": "jonathan-doman"
            },
            "message": "Patch Set 2:\n\n(5 comments)"
        },
        {
            "timestamp": 1629926996,
            "reviewer": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "message": "Uploaded patch set 3: Patch Set 2 was rebased."
        },
        {
            "timestamp": 1629927018,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1629927191,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/25073/ : SUCCESS"
        },
        {
            "timestamp": 1629930460,
            "reviewer": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1629930467,
            "reviewer": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "message": "Patch Set 3:\n\n(5 comments)"
        },
        {
            "timestamp": 1629930475,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1629930626,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/25078/ : SUCCESS"
        },
        {
            "timestamp": 1630368193,
            "reviewer": {
                "name": "Jonathan Doman",
                "email": "jonathan.doman@intel.com",
                "username": "jonathan-doman"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1630464329,
            "reviewer": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "message": "Patch Set 4: Code-Review+2"
        },
        {
            "timestamp": 1630464392,
            "reviewer": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "message": "Change has been successfully rebased and submitted as 997952af86d4df7878c99b75fed36ae7929dd60f by Vernon Mauery"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "271c7adb02ecccba3343fcedd1b1539b7870b4d1",
            "parents": [
                "37400b1776e3144ba3d3cf944da578ee2df35e32"
            ],
            "ref": "refs/changes/06/45706/1",
            "uploader": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "createdOn": 1628270477,
            "author": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "include/ipmid/message.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -4
                },
                {
                    "file": "include/ipmid/message/pack.hpp",
                    "type": "MODIFIED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "include/ipmid/message/unpack.hpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "include/ipmid/types.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -1
                },
                {
                    "file": "ipmid-new.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -5
                }
            ],
            "sizeInsertions": 49,
            "sizeDeletions": 10
        },
        {
            "number": 2,
            "revision": "764db99802ea7faa07c6f405d1bc78e636ef50e5",
            "parents": [
                "81a8d29b92e3bc0d746707db8426aece0beb61d4"
            ],
            "ref": "refs/changes/06/45706/2",
            "uploader": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "createdOn": 1628273754,
            "author": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "include/ipmid/message.hpp",
                    "line": 599,
                    "reviewer": {
                        "name": "Jonathan Doman",
                        "email": "jonathan.doman@intel.com",
                        "username": "jonathan-doman"
                    },
                    "message": "tangent to this review, but I think std::move is more appropriate than std::forward in this context. (reference: Effective Modern C++ Item 25)"
                },
                {
                    "file": "include/ipmid/message.hpp",
                    "line": 599,
                    "reviewer": {
                        "name": "Vernon Mauery",
                        "email": "vernon.mauery@linux.intel.com",
                        "username": "vmauery"
                    },
                    "message": "Yup. I think you are right."
                },
                {
                    "file": "include/ipmid/message/pack.hpp",
                    "line": 267,
                    "reviewer": {
                        "name": "Jonathan Doman",
                        "email": "jonathan.doman@intel.com",
                        "username": "jonathan-doman"
                    },
                    "message": "Can we just change the previous PackSingle<std::vector<uint8_t>> to a partial template specialization since the op() definition is identical? Something like this on line 239?\n\n template <class Allocator>\nstruct PackSingle<std::vector<uint8_t, Allocator>> {}\n\nnot sure it'll work just a thought."
                },
                {
                    "file": "include/ipmid/message/pack.hpp",
                    "line": 267,
                    "reviewer": {
                        "name": "Vernon Mauery",
                        "email": "vernon.mauery@linux.intel.com",
                        "username": "vmauery"
                    },
                    "message": "No, by adding Allocator to the previous partial template, it then becomes ambiguous with the original std::vector<T> specialization."
                },
                {
                    "file": "ipmid-new.cpp",
                    "line": 567,
                    "reviewer": {
                        "name": "Jonathan Doman",
                        "email": "jonathan.doman@intel.com",
                        "username": "jonathan-doman"
                    },
                    "message": "tangent to this review, but std::forward is no-op in this context. It can be removed."
                },
                {
                    "file": "ipmid-new.cpp",
                    "line": 567,
                    "reviewer": {
                        "name": "Vernon Mauery",
                        "email": "vernon.mauery@linux.intel.com",
                        "username": "vmauery"
                    },
                    "message": "I see what you mean. When I first wrote this code, std::move and std::forward were still a bit mysterious to me. When I changed it here, I was mostly just doing a copy/replace.\n\nI will push a new review to address this."
                },
                {
                    "file": "ipmid-new.cpp",
                    "line": 780,
                    "reviewer": {
                        "name": "Jonathan Doman",
                        "email": "jonathan.doman@intel.com",
                        "username": "jonathan-doman"
                    },
                    "message": "same here - the forward is a no-op."
                },
                {
                    "file": "ipmid-new.cpp",
                    "line": 780,
                    "reviewer": {
                        "name": "Vernon Mauery",
                        "email": "vernon.mauery@linux.intel.com",
                        "username": "vmauery"
                    },
                    "message": "Done"
                },
                {
                    "file": "test/Makefile.am",
                    "line": 67,
                    "reviewer": {
                        "name": "Jonathan Doman",
                        "email": "jonathan.doman@intel.com",
                        "username": "jonathan-doman"
                    },
                    "message": "tab -> spaces"
                },
                {
                    "file": "test/Makefile.am",
                    "line": 67,
                    "reviewer": {
                        "name": "Vernon Mauery",
                        "email": "vernon.mauery@linux.intel.com",
                        "username": "vmauery"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "include/ipmid/message.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -4
                },
                {
                    "file": "include/ipmid/message/pack.hpp",
                    "type": "MODIFIED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "include/ipmid/message/unpack.hpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "include/ipmid/types.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -1
                },
                {
                    "file": "ipmid-new.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -5
                },
                {
                    "file": "test/Makefile.am",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "test/message/pack.cpp",
                    "type": "MODIFIED",
                    "insertions": 43,
                    "deletions": -43
                },
                {
                    "file": "test/message/payload.cpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": -32
                },
                {
                    "file": "test/message/unpack.cpp",
                    "type": "MODIFIED",
                    "insertions": 105,
                    "deletions": -105
                }
            ],
            "sizeInsertions": 230,
            "sizeDeletions": 190
        },
        {
            "number": 3,
            "revision": "431381e70d30d7e1aa946053368b0e215c3144e1",
            "parents": [
                "1fe1572aa92feae084cd1cf7d8cca9c323705abb"
            ],
            "ref": "refs/changes/06/45706/3",
            "uploader": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "createdOn": 1629926996,
            "author": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "include/ipmid/message.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -4
                },
                {
                    "file": "include/ipmid/message/pack.hpp",
                    "type": "MODIFIED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "include/ipmid/message/unpack.hpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "include/ipmid/types.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -1
                },
                {
                    "file": "ipmid-new.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -5
                },
                {
                    "file": "test/Makefile.am",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "test/message/pack.cpp",
                    "type": "MODIFIED",
                    "insertions": 43,
                    "deletions": -43
                },
                {
                    "file": "test/message/payload.cpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": -32
                },
                {
                    "file": "test/message/unpack.cpp",
                    "type": "MODIFIED",
                    "insertions": 105,
                    "deletions": -105
                }
            ],
            "sizeInsertions": 230,
            "sizeDeletions": 190
        },
        {
            "number": 4,
            "revision": "5ce374d3e246ed1c77600acd0bfd6c7f343a1656",
            "parents": [
                "1fe1572aa92feae084cd1cf7d8cca9c323705abb"
            ],
            "ref": "refs/changes/06/45706/4",
            "uploader": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "createdOn": 1629930460,
            "author": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "include/ipmid/message.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -4
                },
                {
                    "file": "include/ipmid/message/pack.hpp",
                    "type": "MODIFIED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "include/ipmid/message/unpack.hpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "include/ipmid/types.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -1
                },
                {
                    "file": "ipmid-new.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -5
                },
                {
                    "file": "test/Makefile.am",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "test/message/pack.cpp",
                    "type": "MODIFIED",
                    "insertions": 43,
                    "deletions": -43
                },
                {
                    "file": "test/message/payload.cpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": -32
                },
                {
                    "file": "test/message/unpack.cpp",
                    "type": "MODIFIED",
                    "insertions": 105,
                    "deletions": -105
                }
            ],
            "sizeInsertions": 230,
            "sizeDeletions": 190
        },
        {
            "number": 5,
            "revision": "997952af86d4df7878c99b75fed36ae7929dd60f",
            "parents": [
                "1e22a0f1a0348846eb56f534f101776dc445b764"
            ],
            "ref": "refs/changes/06/45706/5",
            "uploader": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "createdOn": 1630464392,
            "author": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "include/ipmid/message.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -4
                },
                {
                    "file": "include/ipmid/message/pack.hpp",
                    "type": "MODIFIED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "include/ipmid/message/unpack.hpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "include/ipmid/types.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -1
                },
                {
                    "file": "ipmid-new.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -5
                },
                {
                    "file": "test/Makefile.am",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "test/message/pack.cpp",
                    "type": "MODIFIED",
                    "insertions": 43,
                    "deletions": -43
                },
                {
                    "file": "test/message/payload.cpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": -32
                },
                {
                    "file": "test/message/unpack.cpp",
                    "type": "MODIFIED",
                    "insertions": 105,
                    "deletions": -105
                }
            ],
            "sizeInsertions": 230,
            "sizeDeletions": 190
        }
    ]
}