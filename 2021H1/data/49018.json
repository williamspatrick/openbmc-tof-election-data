{
    "project": "openbmc/phosphor-logging",
    "branch": "master",
    "id": "I63b4205eb92efd05e3efe814c96d6a362c9db3c2",
    "number": 49018,
    "subject": "phosphor-logging: Set FQPN vals from busctl cmds",
    "owner": {
        "email": "zkxz@hotmail.com",
        "username": "zkxz"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-logging/+/49018",
    "commitMessage": "phosphor-logging: Set FQPN vals from busctl cmds\n\nFor any fully qualified property names (FQPNs), set the appropriate\nvalue from the key-value pairs passed from busctl command. FQPNs will be\nprefixed with \"xyz.openbmc_project.Logging.Entry.\".  The setting of\nthese FQPNs can be verified from QEMU with busctl introspect.  Tested:\n\nInject the error busctl call xyz.openbmc_project.Logging\n/xyz/openbmc_project/logging xyz.openbmc_project.Logging.Create Create\nssa{ss} \"GPU0 OverT\" xyz.openbmc_project.Logging.Entry.Level.Critical 4\n\"REDFISH_MESSAGE_ID\" \"ResourceEvent.1.0.ResourceErrorsDetected\"\n\"REDFISH_MESSAGE_ARGS\" \"GPU0_Temp, Overheat\"\n\"xyz.openbmc_project.Logging.Entry.Resolution\" \"Contact NVIDIA Support\"\n\"xyz.openbmc_project.Logging.Entry.EventId\" \"SAMPLE EVENTID\"\n\nVerify busctl introspect xyz.openbmc_project.Logging\n\nSigned-off-by: Christian Choi <christianjchoi@berkeley.edu>\nChange-Id: I63b4205eb92efd05e3efe814c96d6a362c9db3c2\n",
    "createdOn": 1637486189,
    "lastUpdated": 1639080185,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1637486189,
            "reviewer": {
                "email": "zkxz@hotmail.com",
                "username": "zkxz"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1637486201,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1637486925,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/30617/ : SUCCESS"
        },
        {
            "timestamp": 1637487135,
            "reviewer": {
                "name": "Deepak Kodihalli",
                "email": "deepak.kodihalli.83@gmail.com",
                "username": "dkodihal"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1637600707,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\n(4 comments)"
        },
        {
            "timestamp": 1637607061,
            "reviewer": {
                "name": "Christian Choi",
                "email": "christianjchoi@berkeley.edu",
                "username": "christianjchoi"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1637607074,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2:\n\nUser not approved, see admin, no CI"
        },
        {
            "timestamp": 1637642275,
            "reviewer": {
                "name": "Deepak Kodihalli",
                "email": "deepak.kodihalli.83@gmail.com",
                "username": "dkodihal"
            },
            "message": "Patch Set 2: Ok-To-Test+1"
        },
        {
            "timestamp": 1637642484,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/30708/ : FAILURE"
        },
        {
            "timestamp": 1637707009,
            "reviewer": {
                "name": "Christian Choi",
                "email": "christianjchoi@berkeley.edu",
                "username": "christianjchoi"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1637707055,
            "reviewer": {
                "name": "Christian Choi",
                "email": "christianjchoi@berkeley.edu",
                "username": "christianjchoi"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1637707101,
            "reviewer": {
                "name": "Christian Choi",
                "email": "christianjchoi@berkeley.edu",
                "username": "christianjchoi"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1639080185,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "b8d3d70a326476f6c0ca627b5ab9b7a3109843e1",
            "parents": [
                "a9e4f59664683a45d2c615e350cf2628b9fa41c9"
            ],
            "ref": "refs/changes/18/49018/1",
            "uploader": {
                "email": "zkxz@hotmail.com",
                "username": "zkxz"
            },
            "createdOn": 1637486189,
            "author": {
                "name": "Christian Choi",
                "email": "christianc@nvidia.com",
                "username": ""
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "you can leave off the 'phosphor-logging:' since it's just the repo name."
                },
                {
                    "file": "log_manager.cpp",
                    "line": 40,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Please use `Entry::interface` for this."
                },
                {
                    "file": "log_manager.cpp",
                    "line": 40,
                    "reviewer": {
                        "name": "Christian Choi",
                        "email": "christianjchoi@berkeley.edu",
                        "username": "christianjchoi"
                    },
                    "message": "Ack"
                },
                {
                    "file": "log_manager.cpp",
                    "line": 209,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Can you use split for this to transpose a list of \"key=data\" -> map<key, data>?  This repository uses C++20, so you can use these functions rather than coding your own.\n\nhttps://en.cppreference.com/w/cpp/ranges/split_view"
                },
                {
                    "file": "log_manager.cpp",
                    "line": 209,
                    "reviewer": {
                        "name": "Christian Choi",
                        "email": "christianjchoi@berkeley.edu",
                        "username": "christianjchoi"
                    },
                    "message": "I am struggling to figure out a way to do this in a way that is simpler than the current implementation. My thinking is we have to iterate through the vector and split each \"k=v\" entry by \"=\" and then update a new map such that map[k] = v. Also, to extract k and v from the split, a construct such as \"for (const std::string_view word : std::views::split(words, delim))\" would be required, which would just require another for loop for the implementation. Maybe I am thinking about this the wrong way. Some clarification would be appreciated."
                },
                {
                    "file": "log_manager.cpp",
                    "line": 262,
                    "reviewer": {
                        "name": "Deepak Kodihalli",
                        "email": "deepak.kodihalli.83@gmail.com",
                        "username": "dkodihal"
                    },
                    "message": "We should also update the logging D-Bus interface to describe FQPNs."
                },
                {
                    "file": "log_manager.cpp",
                    "line": 262,
                    "reviewer": {
                        "name": "Christian Choi",
                        "email": "christianjchoi@berkeley.edu",
                        "username": "christianjchoi"
                    },
                    "message": "Ack"
                },
                {
                    "file": "log_manager.cpp",
                    "line": 263,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I would suggest we make a minor change to sdbusplus' generator to accept either the short-name or the FQPN in the set/getPropertyByName calls.  You might also need to make a minor change to setPropertyByName to return boolean."
                },
                {
                    "file": "log_manager.cpp",
                    "line": 519,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "If you change setPropertyByName to return a boolean, I think it will be much simpler to filter out all the unhandled property names.  (Again, suggest looking at ranges because I think the majority of this code becomes almost a 1 liner with C++20 ranges to transform, call the property update, and filter down to just the unhandled properties."
                },
                {
                    "file": "log_manager.hpp",
                    "line": 255,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "would need a @param[in] fnMap"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 28,
                    "deletions": 0
                },
                {
                    "file": "log_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 59,
                    "deletions": -4
                },
                {
                    "file": "log_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 65,
            "sizeDeletions": 7
        },
        {
            "number": 2,
            "revision": "5208f6a680f938caa91fa912e50cff4da55da8dc",
            "parents": [
                "a9e4f59664683a45d2c615e350cf2628b9fa41c9"
            ],
            "ref": "refs/changes/18/49018/2",
            "uploader": {
                "name": "Christian Choi",
                "email": "christianjchoi@berkeley.edu",
                "username": "christianjchoi"
            },
            "createdOn": 1637607061,
            "author": {
                "name": "Christian Choi",
                "email": "christianjchoi@berkeley.edu",
                "username": "christianjchoi"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "log_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 59,
                    "deletions": -4
                },
                {
                    "file": "log_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 65,
            "sizeDeletions": 7
        }
    ]
}