{
    "project": "openbmc/phosphor-dbus-interfaces",
    "branch": "master",
    "id": "If05dc2ad867742b00fe9183b2d4386dadf94e19b",
    "number": 49582,
    "subject": "software: Add Slot interface",
    "owner": {
        "name": "Lei YU",
        "email": "yulei.sh@bytedance.com",
        "username": "mine260309"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-dbus-interfaces/+/49582",
    "commitMessage": "software: Add Slot interface\n\nThe Slot interface is to be used to represent the flash chip slot of the\nimage. In dual BMC chips systems, it is possible to create two DBus\nobjects with the Slot property values 0 and 1.\n\nThe property is read-only and should be initialized by the software\nmanager.\n\nSigned-off-by: Lei YU <yulei.sh@bytedance.com>\nChange-Id: If05dc2ad867742b00fe9183b2d4386dadf94e19b\n",
    "createdOn": 1639129106,
    "lastUpdated": 1640316825,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1639129106,
            "reviewer": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1639129119,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1639129533,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/31749/ : SUCCESS"
        },
        {
            "timestamp": 1639149087,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\nCan you expand on why this is needed in light of the wording here: https://github.com/openbmc/phosphor-dbus-interfaces/blame/master/yaml/xyz/openbmc_project/Software/README.md#L55\n\nIf this is needed, we should probably see some corresponding update to the README."
        },
        {
            "timestamp": 1639149189,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\n(5 comments)"
        },
        {
            "timestamp": 1639372661,
            "reviewer": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1639372668,
            "reviewer": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "message": "Patch Set 1:\n\n(4 comments)\n\n> Patch Set 1:\n> \n> Can you expand on why this is needed in light of the wording here: https://github.com/openbmc/phosphor-dbus-interfaces/blame/master/yaml/xyz/openbmc_project/Software/README.md#L55\n> \n> If this is needed, we should probably see some corresponding update to the README.\n\nDone"
        },
        {
            "timestamp": 1639372677,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1639373099,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/31825/ : SUCCESS"
        },
        {
            "timestamp": 1639399432,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1639399531,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1639453393,
            "reviewer": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "message": "Patch Set 2:\n\n(3 comments)"
        },
        {
            "timestamp": 1640316825,
            "reviewer": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "message": "Abandoned\n\nThe slot interface is not necessary because we could use the RedundantPriority to represent the info."
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "6d6f35f82b3fb23acbb86564e9de70fa48a51026",
            "parents": [
                "f05e2050dbba80d130fa87875448cf48e97ce7f6"
            ],
            "ref": "refs/changes/82/49582/1",
            "uploader": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "createdOn": 1639129106,
            "author": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Check spelling and line wrap throughout commit message."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "Lei YU",
                        "email": "yulei.sh@bytedance.com",
                        "username": "mine260309"
                    },
                    "message": "Done"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Software/Slot.interface.yaml",
                    "line": 3,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Does this mean it is restricted to a BMC instance?  I hope not."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Software/Slot.interface.yaml",
                    "line": 3,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "spelling"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Software/Slot.interface.yaml",
                    "line": 3,
                    "reviewer": {
                        "name": "Lei YU",
                        "email": "yulei.sh@bytedance.com",
                        "username": "mine260309"
                    },
                    "message": "Done"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Software/Slot.interface.yaml",
                    "line": 3,
                    "reviewer": {
                        "name": "Lei YU",
                        "email": "yulei.sh@bytedance.com",
                        "username": "mine260309"
                    },
                    "message": "Yup, it could represent the BIOS chips as well. Update the wording here."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Software/Slot.interface.yaml",
                    "line": 7,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "size.  There is no need to restrict this to a byte."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Software/Slot.interface.yaml",
                    "line": 7,
                    "reviewer": {
                        "name": "Lei YU",
                        "email": "yulei.sh@bytedance.com",
                        "username": "mine260309"
                    },
                    "message": "Done.\n\nBut I have a second (and off-topic) thought of \"size\" type in dbus-interfaces, this maps to size_t in C/C++, and it could becomes different \"real type\" on DBus, e.g. it may be uint32_t on ARM32, and uint64_t on ARM64, and this will result in different DBus types for the same property on different architectures.\n\nUsers of such interface will have to deal with this difference and it is not good, is it?"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Software/Slot.interface.yaml",
                    "line": 7,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Users of this interface should similarly use 'size_t' and not care."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Software/Slot.interface.yaml",
                    "line": 7,
                    "reviewer": {
                        "name": "Lei YU",
                        "email": "yulei.sh@bytedance.com",
                        "username": "mine260309"
                    },
                    "message": "This only applies to the C++ bindings, but not for the bash scripts trying to get a property."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Software/Slot.interface.yaml",
                    "line": 10,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "spelling"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Software/Slot/meson.build",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Software/meson.build",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Software/Slot.interface.yaml",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 41,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "ba39cb3db5f4eafd9eda418909d2c7c70eac5aa9",
            "parents": [
                "f05e2050dbba80d130fa87875448cf48e97ce7f6"
            ],
            "ref": "refs/changes/82/49582/2",
            "uploader": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "createdOn": 1639372661,
            "author": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "yaml/xyz/openbmc_project/Software/README.md",
                    "line": 221,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "This still doesn't tell me why this can't be covered by the existing design.  Can you elaborate?"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Software/README.md",
                    "line": 221,
                    "reviewer": {
                        "name": "Lei YU",
                        "email": "yulei.sh@bytedance.com",
                        "username": "mine260309"
                    },
                    "message": "A second thought, probably we could re-use the RedundancyPriority to represent the slot info, as long as we extend the usage of the RedundancyPriority for the \"golden image\" implementation.\n\nIn the \"golden image\" case, the secondary flash is not to be updated and thus the primary flash always has priority 0, and the secondary flash always has priority 1, even when the BMC is running on the secondary flash.\n\nIn this doc, I could add this info; in implementation, I will add a new config to differentiate the two cases.\n\nHow about this idea?"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Software/README.md",
                    "line": 223,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "There is no reason for this restriction / specification."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Software/README.md",
                    "line": 223,
                    "reviewer": {
                        "name": "Lei YU",
                        "email": "yulei.sh@bytedance.com",
                        "username": "mine260309"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Software/Slot/meson.build",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Software/meson.build",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Software/README.md",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Software/Slot.interface.yaml",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 50,
            "sizeDeletions": 0
        }
    ]
}