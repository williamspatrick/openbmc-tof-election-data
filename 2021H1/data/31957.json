{
    "project": "openbmc/docs",
    "branch": "master",
    "id": "I484d09bd06b5cc4d02f0c45bf1ca6b0d62648edd",
    "number": 31957,
    "subject": "Add health monitoring design",
    "owner": {
        "name": "Vijay Khemka",
        "email": "vijaykhemkalinux@gmail.com",
        "username": "vijaykhemka"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/docs/+/31957",
    "commitMessage": "Add health monitoring design\n\nAdded a design document for health monitoring of BMC\n\nSigned-off-by: Vijay Khemka <vijaykhemka@fb.com>\nSigned-off-by: Sui Chen <suichen@google.com>\nChange-Id: I484d09bd06b5cc4d02f0c45bf1ca6b0d62648edd\n",
    "createdOn": 1588712295,
    "lastUpdated": 1620310553,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1588712295,
            "reviewer": {
                "name": "Vijay Khemka",
                "email": "vijaykhemkalinux@gmail.com",
                "username": "vijaykhemka"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1588717943,
            "reviewer": {
                "name": "Vijay Khemka",
                "email": "vijaykhemkalinux@gmail.com",
                "username": "vijaykhemka"
            },
            "message": "Uploaded patch set 2: Commit message was updated."
        },
        {
            "timestamp": 1589250364,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2:\n\n(7 comments)"
        },
        {
            "timestamp": 1589273035,
            "reviewer": {
                "name": "Deepak Kodihalli",
                "email": "deepak.kodihalli.83@gmail.com",
                "username": "dkodihal"
            },
            "message": "Patch Set 2:\n\n(5 comments)"
        },
        {
            "timestamp": 1589287543,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Patch Set 2:\n\nOne proposal I've seen in the past when health monitoring has come up is to tie it in with telemetry (https://github.com/openbmc/docs/blob/master/designs/telemetry.md). i.e. just create new sensors to feed into telemetry and monitor those for things like full filesystems on the BMC, or out of memory scenarios."
        },
        {
            "timestamp": 1589327151,
            "reviewer": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1589412823,
            "reviewer": {
                "name": "Vijay Khemka",
                "email": "vijaykhemkalinux@gmail.com",
                "username": "vijaykhemka"
            },
            "message": "Patch Set 2:\n\n> One proposal I've seen in the past when health monitoring has come\n > up is to tie it in with telemetry (https://github.com/openbmc/docs/blob/master/designs/telemetry.md).\n > i.e. just create new sensors to feed into telemetry and monitor\n > those for things like full filesystems on the BMC, or out of memory\n > scenarios.\n\nAndrew, I went through telemetry design but it doesn't provide cpu and memory usage continous monitoring and action on certain threshold. Also this is complete based on redfish configuration where as this is completely platform based cofiguration which is part of BMC image itself. And flexible enough to provide several target actions based on monitoring values."
        },
        {
            "timestamp": 1589414609,
            "reviewer": {
                "name": "Vijay Khemka",
                "email": "vijaykhemkalinux@gmail.com",
                "username": "vijaykhemka"
            },
            "message": "Patch Set 2:\n\n(14 comments)\n\nThakns a lot for good feedback Deepak, Sui and Patrick. I will update document."
        },
        {
            "timestamp": 1589415931,
            "reviewer": {
                "name": "Vijay Khemka",
                "email": "vijaykhemkalinux@gmail.com",
                "username": "vijaykhemka"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1589428661,
            "reviewer": {
                "name": "Deepak Kodihalli",
                "email": "deepak.kodihalli.83@gmail.com",
                "username": "dkodihal"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1590000171,
            "reviewer": {
                "name": "Kun Yi",
                "email": "kunyi731@gmail.com",
                "username": "kunyi731"
            },
            "message": "Patch Set 3:\n\n> Patch Set 2:\n> \n> > One proposal I've seen in the past when health monitoring has come\n>  > up is to tie it in with telemetry (https://github.com/openbmc/docs/blob/master/designs/telemetry.md).\n>  > i.e. just create new sensors to feed into telemetry and monitor\n>  > those for things like full filesystems on the BMC, or out of memory\n>  > scenarios.\n> \n> Andrew, I went through telemetry design but it doesn't provide cpu and memory usage continous monitoring and action on certain threshold. Also this is complete based on redfish configuration where as this is completely platform based cofiguration which is part of BMC image itself. And flexible enough to provide several target actions based on monitoring values.\n\nI think your use case here would be the 'monitoring service' on the linked telemetry design."
        },
        {
            "timestamp": 1590403075,
            "reviewer": {
                "name": "Adrian Ambro\u017cewicz",
                "email": "adrian.ambrozewicz@linux.intel.com",
                "username": "aambroze"
            },
            "message": "Patch Set 3:\n\n> Patch Set 3:\n> \n> > Patch Set 2:\n> > \n> > > One proposal I've seen in the past when health monitoring has come\n> >  > up is to tie it in with telemetry (https://github.com/openbmc/docs/blob/master/designs/telemetry.md).\n> >  > i.e. just create new sensors to feed into telemetry and monitor\n> >  > those for things like full filesystems on the BMC, or out of memory\n> >  > scenarios.\n> > \n> > Andrew, I went through telemetry design but it doesn't provide cpu and memory usage continous monitoring and action on certain threshold. Also this is complete based on redfish configuration where as this is completely platform based cofiguration which is part of BMC image itself. And flexible enough to provide several target actions based on monitoring values.\n> \n> I think your use case here would be the 'monitoring service' on the linked telemetry design.\n\nIf dbus-sensors would be used you would have already established framework for configuration (EntityManager with support for sensor configuration and thresholds). There are also some patches in review which aim for supporting your use cases:\n- 'utilization' sensor : https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-dbus-interfaces/+/32125\n- polling interval and averaging configuration : https://gerrit.openbmc-project.xyz/c/openbmc/entity-manager/+/32384"
        },
        {
            "timestamp": 1590403321,
            "reviewer": {
                "name": "Adrian Ambro\u017cewicz",
                "email": "adrian.ambrozewicz@linux.intel.com",
                "username": "aambroze"
            },
            "message": "Patch Set 3:\n\n> Patch Set 3:\n> \n> > Patch Set 3:\n> > \n> > > Patch Set 2:\n> > > \n> > > > One proposal I've seen in the past when health monitoring has come\n> > >  > up is to tie it in with telemetry (https://github.com/openbmc/docs/blob/master/designs/telemetry.md).\n> > >  > i.e. just create new sensors to feed into telemetry and monitor\n> > >  > those for things like full filesystems on the BMC, or out of memory\n> > >  > scenarios.\n> > > \n> > > Andrew, I went through telemetry design but it doesn't provide cpu and memory usage continous monitoring and action on certain threshold. Also this is complete based on redfish configuration where as this is completely platform based cofiguration which is part of BMC image itself. And flexible enough to provide several target actions based on monitoring values.\n> > \n> > I think your use case here would be the 'monitoring service' on the linked telemetry design.\n> \n> If dbus-sensors would be used you would have already established framework for configuration (EntityManager with support for sensor configuration and thresholds). There are also some patches in review which aim for supporting your use cases:\n> - 'utilization' sensor : https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-dbus-interfaces/+/32125\n> - polling interval and averaging configuration : https://gerrit.openbmc-project.xyz/c/openbmc/entity-manager/+/32384\n\nAnother benefit of using dbus-sensors design is 'out of the box' compatibility with both Redfish Sensors (there are ready utilities inside bmcweb for coping with dbus-sensors, so there won't be a problem in exposing the data on Redfish) and TelemetryService (ability to stream, store and perform some Trigger based actions).\n\nIt's just a thought to consider, as just adding new micro-service with new custom property wouldn't be very beneficial for most use cases without fitting it in into existing infrastructure."
        },
        {
            "timestamp": 1590502652,
            "reviewer": {
                "name": "Piotr Matuszczak",
                "email": "piotr.matuszczak@intel.com",
                "username": "pmatuszc"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1590517079,
            "reviewer": {
                "name": "Vijay Khemka",
                "email": "vijaykhemkalinux@gmail.com",
                "username": "vijaykhemka"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1590517158,
            "reviewer": {
                "name": "Vijay Khemka",
                "email": "vijaykhemkalinux@gmail.com",
                "username": "vijaykhemka"
            },
            "message": "Patch Set 2:\n\n> > Patch Set 2:\n > >\n > > > One proposal I've seen in the past when health monitoring has\n > come\n > >  > up is to tie it in with telemetry (https://github.com/openbmc/docs/blob/master/designs/telemetry.md).\n > >  > i.e. just create new sensors to feed into telemetry and\n > monitor\n > >  > those for things like full filesystems on the BMC, or out of\n > memory\n > >  > scenarios.\n > >\n > > Andrew, I went through telemetry design but it doesn't provide\n > cpu and memory usage continous monitoring and action on certain\n > threshold. Also this is complete based on redfish configuration\n > where as this is completely platform based cofiguration which is\n > part of BMC image itself. And flexible enough to provide several\n > target actions based on monitoring values.\n > \n > I think your use case here would be the 'monitoring service' on the\n > linked telemetry design.\n\nYes with added metrics"
        },
        {
            "timestamp": 1590517256,
            "reviewer": {
                "name": "Vijay Khemka",
                "email": "vijaykhemkalinux@gmail.com",
                "username": "vijaykhemka"
            },
            "message": "Patch Set 2:\n\n> > Patch Set 3:\n > >\n > > > Patch Set 2:\n > > >\n > > > > One proposal I've seen in the past when health monitoring has\n > come\n > > >  > up is to tie it in with telemetry (https://github.com/openbmc/docs/blob/master/designs/telemetry.md).\n > > >  > i.e. just create new sensors to feed into telemetry and\n > monitor\n > > >  > those for things like full filesystems on the BMC, or out of\n > memory\n > > >  > scenarios.\n > > >\n > > > Andrew, I went through telemetry design but it doesn't provide\n > cpu and memory usage continous monitoring and action on certain\n > threshold. Also this is complete based on redfish configuration\n > where as this is completely platform based cofiguration which is\n > part of BMC image itself. And flexible enough to provide several\n > target actions based on monitoring values.\n > >\n > > I think your use case here would be the 'monitoring service' on\n > the linked telemetry design.\n > \n > If dbus-sensors would be used you would have already established\n > framework for configuration (EntityManager with support for sensor\n > configuration and thresholds). There are also some patches in\n > review which aim for supporting your use cases:\n > - 'utilization' sensor : https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-dbus-interfaces/+/32125\n > - polling interval and averaging configuration : https://gerrit.openbmc-project.xyz/c/openbmc/entity-manager/+/32384\n\nThis limits to the user of entity manager and dbus sensors and doesn't provide access to other user who are not using entity manager."
        },
        {
            "timestamp": 1590580263,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 3:\n\n>  > If dbus-sensors would be used you would have already established\n>  > framework for configuration (EntityManager with support for sensor\n>  > configuration and thresholds). There are also some patches in\n>  > review which aim for supporting your use cases:\n>  > - 'utilization' sensor : https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-dbus-interfaces/+/32125\n>  > - polling interval and averaging configuration : https://gerrit.openbmc-project.xyz/c/openbmc/entity-manager/+/32384\n> \n> This limits to the user of entity manager and dbus sensors and doesn't provide access to other user who are not using entity manager.\n\nJust to clarify a bit.  Any process may implement the pointed-to utilization sensor definition out of phosphor-dbus-interfaces; it is not restricted to EM or dbus-sensors.  \n\nThe configuration part is an EM-specific implementation."
        },
        {
            "timestamp": 1591056490,
            "reviewer": {
                "name": "Vijay Khemka",
                "email": "vijaykhemkalinux@gmail.com",
                "username": "vijaykhemka"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1591056536,
            "reviewer": {
                "name": "Vijay Khemka",
                "email": "vijaykhemkalinux@gmail.com",
                "username": "vijaykhemka"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1591744462,
            "reviewer": {
                "name": "Vijay Khemka",
                "email": "vijaykhemkalinux@gmail.com",
                "username": "vijaykhemka"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1591852175,
            "reviewer": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "message": "Patch Set 5: Code-Review+1"
        },
        {
            "timestamp": 1592246435,
            "reviewer": {
                "name": "Amithash Prasad",
                "email": "amithash@fb.com",
                "username": "amithash"
            },
            "message": "Patch Set 5: Code-Review+1"
        },
        {
            "timestamp": 1592247241,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 5:\n\n@Deepak, would you mind revisiting this commit and give your perspective?  You seemed to have a good set of comments on an earlier revison."
        },
        {
            "timestamp": 1592296683,
            "reviewer": {
                "name": "Deepak Kodihalli",
                "email": "deepak.kodihalli.83@gmail.com",
                "username": "dkodihal"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1592296714,
            "reviewer": {
                "name": "Deepak Kodihalli",
                "email": "deepak.kodihalli.83@gmail.com",
                "username": "dkodihal"
            },
            "message": "Patch Set 5:\n\n> @Deepak, would you mind revisiting this commit and give your\n > perspective?  You seemed to have a good set of comments on an\n > earlier revison.\n\nThere seems to be one unanswered comment. Would appreciate a response to the same."
        },
        {
            "timestamp": 1592334197,
            "reviewer": {
                "name": "Vijay Khemka",
                "email": "vijaykhemkalinux@gmail.com",
                "username": "vijaykhemka"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1592383670,
            "reviewer": {
                "name": "Deepak Kodihalli",
                "email": "deepak.kodihalli.83@gmail.com",
                "username": "dkodihal"
            },
            "message": "Patch Set 5: Code-Review+1"
        },
        {
            "timestamp": 1596561496,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 5:\n\n(31 comments)\n\nI do a lot of nitpicking here, but I think the core of my issue is what a lot of people already pointed out: This functionality already exists, and this design is simply duplicating it here.  If you were to design this under the current model i would.\n1. Add a new sensor type to dbus-sensors called \"HostSystemSensor\".  Have it expose the Sensor interface that already exists (you might have to add a couple new unit types to our definitions).\n2. Add the relevant config files to the entity manager config for your platform, similar to other sensors.\n3. Aggregate these readings either in the sensor implementation itself (for things like uptime), or aggregate in the Telemetry implementation.\n4. Implement a (much simpler) daemon that takes a list of possible events and maps them to actions.\n\n5. Profit!  As you won't have to write any specific-to-you redfish or IPMI implementations.\n\nAlso, in the above you've implemented things in such a way that you're reusing most of the available code, and we as a project don't have to duplicate."
        },
        {
            "timestamp": 1596561518,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 5:\n\n> Patch Set 2:\n> \n> One proposal I've seen in the past when health monitoring has come up is to tie it in with telemetry (https://github.com/openbmc/docs/blob/master/designs/telemetry.md). i.e. just create new sensors to feed into telemetry and monitor those for things like full filesystems on the BMC, or out of memory scenarios.\n\n+1"
        },
        {
            "timestamp": 1596561817,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 5:\n\n> Patch Set 2:\n> \n> > > Patch Set 3:\n>  > >\n>  > > > Patch Set 2:\n>  > > >\n>  > > > > One proposal I've seen in the past when health monitoring has\n>  > come\n>  > > >  > up is to tie it in with telemetry (https://github.com/openbmc/docs/blob/master/designs/telemetry.md).\n>  > > >  > i.e. just create new sensors to feed into telemetry and\n>  > monitor\n>  > > >  > those for things like full filesystems on the BMC, or out of\n>  > memory\n>  > > >  > scenarios.\n>  > > >\n>  > > > Andrew, I went through telemetry design but it doesn't provide\n>  > cpu and memory usage continous monitoring and action on certain\n>  > threshold. Also this is complete based on redfish configuration\n>  > where as this is completely platform based cofiguration which is\n>  > part of BMC image itself. And flexible enough to provide several\n>  > target actions based on monitoring values.\n>  > >\n>  > > I think your use case here would be the 'monitoring service' on\n>  > the linked telemetry design.\n>  > \n>  > If dbus-sensors would be used you would have already established\n>  > framework for configuration (EntityManager with support for sensor\n>  > configuration and thresholds). There are also some patches in\n>  > review which aim for supporting your use cases:\n>  > - 'utilization' sensor : https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-dbus-interfaces/+/32125\n>  > - polling interval and averaging configuration : https://gerrit.openbmc-project.xyz/c/openbmc/entity-manager/+/32384\n> \n> This limits to the user of entity manager and dbus sensors and doesn't provide access to other user who are not using entity manager.\n\nWe have a few implementation of things that do a \"hybrid\" approach and support both entity manager, or sane defaults if entity manager is not found.  phosphor-pid-control works like this, although most people tend to opt for entity manager.\n\nThe big thing with entity manager in this situation and why I push for it so heavily is simple: What do you do when you want all this same aggregation and metrics for an add-in accelerator card?  If you don't have the ability to hot load configuration data based on a detected entity in the system, you end up either hacking it together for that specific card (I'm fully guilty of this in the past) or just hardcoding it for every possible card in every possible slot.  If you're working on one system, this is fine, but I really don't think it scales to the number of systems OpenBMC needs to support."
        },
        {
            "timestamp": 1596562120,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 5:\n\n> Patch Set 2:\n> \n> > One proposal I've seen in the past when health monitoring has come\n>  > up is to tie it in with telemetry (https://github.com/openbmc/docs/blob/master/designs/telemetry.md).\n>  > i.e. just create new sensors to feed into telemetry and monitor\n>  > those for things like full filesystems on the BMC, or out of memory\n>  > scenarios.\n> \n> Andrew, I went through telemetry design but it doesn't provide cpu and memory usage continous monitoring and action on certain threshold. Also this is complete based on redfish configuration where as this is completely platform based cofiguration which is part of BMC image itself. And flexible enough to provide several target actions based on monitoring values.\n\nI'm not sure how closely you read it, or if you looked at the code.  It definitely does provide continuous monitoring, although you're right, it leaves the \"actions\" part up to other daemons.\n\nYes, it's based on Redfish configuration today, but wouldn't modifying it to also allow a fixed \"default\" startup config be better for the project as a whole?  That would mean that all of the things you're proposing would not be locked in at build time, only the default behaviors."
        },
        {
            "timestamp": 1599005397,
            "reviewer": {
                "name": "Vijay Khemka",
                "email": "vijaykhemkalinux@gmail.com",
                "username": "vijaykhemka"
            },
            "message": "Patch Set 5:\n\n(25 comments)"
        },
        {
            "timestamp": 1604435124,
            "reviewer": {
                "name": "Vijay Khemka",
                "email": "vijaykhemkalinux@gmail.com",
                "username": "vijaykhemka"
            },
            "message": "Uploaded patch set 6: Patch Set 5 was rebased."
        },
        {
            "timestamp": 1620310542,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 6: Code-Review+2\n\nMerging with follow up commit as the as-is design."
        },
        {
            "timestamp": 1620310550,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 6: Verified+1"
        },
        {
            "timestamp": 1620310553,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Change has been successfully rebased and submitted as 4b9fc95d11d9ef391cb40a63ddd5cba0bd5a06a4 by Patrick Williams"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "4cadea58457e2133f3a9cd8c42e5b995b6d221d3",
            "parents": [
                "05f8a18621b67a8c69f823407e7b8f684c9fb1f8"
            ],
            "ref": "refs/changes/57/31957/1",
            "uploader": {
                "name": "Vijay Khemka",
                "email": "vijaykhemkalinux@gmail.com",
                "username": "vijaykhemka"
            },
            "createdOn": 1588712295,
            "author": {
                "name": "Vijay Khemka",
                "email": "vijaykhemka@fb.com",
                "username": ""
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "designs/health-nonitor.md",
                    "type": "ADDED",
                    "insertions": 93,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 93,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "f33ed8c6ddcc2fdfe05572fc8dcf15f44e16b677",
            "parents": [
                "05f8a18621b67a8c69f823407e7b8f684c9fb1f8"
            ],
            "ref": "refs/changes/57/31957/2",
            "uploader": {
                "name": "Vijay Khemka",
                "email": "vijaykhemkalinux@gmail.com",
                "username": "vijaykhemka"
            },
            "createdOn": 1588717943,
            "author": {
                "name": "Vijay Khemka",
                "email": "vijaykhemka@fb.com",
                "username": ""
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "designs/health-nonitor.md",
                    "line": 1,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Please rename file.  \"monitor\" is spelled wrong (nonitor).  Should probably be explicit that this is a bmc-health-monitor in the file name."
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 1,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 4,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "nit: we haven't been particularly formal about this field but this looks different from what anyone else has done to identify their IRC handle.  I'd suggest we use the same format as the MAINTAINERS which would be <vijay!>"
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 4,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "Ok, I will follow this."
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 10,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "nit: There was mentioned some desired to do these in ISO 8601 date format:\n\n2020-05-04"
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 10,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "I used this as per design template, I can change this."
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 12,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Can we get some more \"why\" here?  Why do we consider \"CPU usage\" a metric of BMC health?  Why does high utilization matter?  etc."
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 12,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "I will think of more content, I didn't have much."
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 14,
                    "reviewer": {
                        "name": "Deepak Kodihalli",
                        "email": "deepak.kodihalli.83@gmail.com",
                        "username": "dkodihal"
                    },
                    "message": "Why not let the kernel's OOM management handle this?"
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 14,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "Kerne; OOM's doesn't take user defined action and we need personalized monitoring with threshold defined by user."
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 20,
                    "reviewer": {
                        "name": "Deepak Kodihalli",
                        "email": "deepak.kodihalli.83@gmail.com",
                        "username": "dkodihal"
                    },
                    "message": "Do you also foresee this being reported over Redfish (logservices for eg)?"
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 20,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "Yes, We can definitely support this reporting via redfish as well."
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 25,
                    "reviewer": {
                        "name": "Deepak Kodihalli",
                        "email": "deepak.kodihalli.83@gmail.com",
                        "username": "dkodihal"
                    },
                    "message": "do we have concrete use-cases here? why would other apps need this data?"
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 25,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "Like BMCweb for redfish or if some application needs to stop to reduce cpu utilization. It can be anything."
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 25,
                    "reviewer": {
                        "name": "Deepak Kodihalli",
                        "email": "deepak.kodihalli.83@gmail.com",
                        "username": "dkodihal"
                    },
                    "message": "My question is, why would other apps need the d-bus data? Stopping apps that are consuming large amounts of the CPU will be performed by this app,"
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 25,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "This app will trigger a systemd target after crossing some threshold and the same target app can read current data from dbus as it is easier and more standard ways to read data from dbus than a file. Stopping apps will not be done by this application, this will only call systemd target defined in config file."
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 32,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Why not use existing Sensor interface definitions?"
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 32,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "It doesn't come under any type of sensors like temp, current."
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 41,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Can we define what a \"window_size\" is?"
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 41,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "Sure, I thought of this and completely forgot."
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 48,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I'd like if we come up with a more consistent way to express these.  Is this just \"reboot.target\"?  Or is \"reboot\" some magic string?  How does someone identify what the possible values are here?"
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 48,
                    "reviewer": {
                        "name": "Deepak Kodihalli",
                        "email": "deepak.kodihalli.83@gmail.com",
                        "username": "dkodihal"
                    },
                    "message": "can't systemd do this based on cpu limits in an override file?"
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 48,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "I don't have much idea about systemd part here but cpu limits are measured as an instant spike whereas we are calculating here average data over a period of time defined by window_size."
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 48,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "I will keep this as *.target and it will call provided target unit file."
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 85,
                    "reviewer": {
                        "name": "Deepak Kodihalli",
                        "email": "deepak.kodihalli.83@gmail.com",
                        "username": "dkodihal"
                    },
                    "message": "How about using something like 'top' (for the logging part at least)? \n\nI wonder if systemd has something to offer, for eg using slices or resource-control?\n\nHow about https://github.com/lightyang/monit?"
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 85,
                    "reviewer": {
                        "name": "Sui Chen",
                        "email": "suichen@google.com",
                        "username": "quadpixels"
                    },
                    "message": "For \"how to stage the health data\" FFDC stores dumps as files for transferring out of the BMC (rather than DBus objects), so that might be considered an alternative (for staging) too? This file-based approach may also be \"upgraded\" to file-based databases or structured files, and can be compressed, stored in the memory, partially streamed and synced with the host or some remote entity, or be managed by phosphor-ipmi-blobs-binarystore.\n\nFor \"how to get the data out of the BMC\" perhaps IPMI is needed when, for example, RedFish is not yet deployed. So IPMI might be another alternative for data transfer?"
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 85,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "Again, I don't have much idea about \"top\" implementation but does it provide average usage."
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 85,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "Sure Sui, we can certainly have these data out of BMC via IPMI or redfish. Both IPMI and redfish can access this data via dbus. We may also have to think about history of data as an extension."
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 85,
                    "reviewer": {
                        "name": "Deepak Kodihalli",
                        "email": "deepak.kodihalli.83@gmail.com",
                        "username": "dkodihal"
                    },
                    "message": "Would like to see your thoughts on the alternatives mentioned above."
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 85,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "Sure I will discuss with Sui and come up with something here."
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 85,
                    "reviewer": {
                        "name": "Deepak Kodihalli",
                        "email": "deepak.kodihalli.83@gmail.com",
                        "username": "dkodihal"
                    },
                    "message": "Is there an update here?"
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 85,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "Deepak,\nI have added options in this section, please review latest patchset. Please let me know if you want anything else here or if it is ok for now."
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 89,
                    "reviewer": {
                        "name": "Sui Chen",
                        "email": "suichen@google.com",
                        "username": "quadpixels"
                    },
                    "message": "I guess the impact may be divided into 2 parts, and it looks very similar to the situation with sensors:\n1) maintaining the DBus objects and\n2) collecting the health data.\n\nFor 1) the cost should be very low according to known benchmarking results and the fact that sensor daemons are already updating sensor-related DBus objects many times per second on the BMC right now.\nThe cost of 2) might depend on the cost of generating that particular monitoring data, and the cost might be high or low. For example: a high-cost metric would be \"list all files on the BMC whose size is larger than 500 KB\" or \"iterate through system logs and count the number of error messages that match a particular regex\". Fortunately the 2-step nature of the DBus object-based design means the delay would not affect the reading of the data but just the update; plus, the cost can be mitigated by designing carefully (such as allowing levels of detail, down-sampling) and allowing the metric to be updated less frequently. Or if the metric is an aggregate it may be easily updated by computing the deltas and not full updates, just like search indices trade rebuild cost with loss of freshness resulting from partial updates?\n\nSo overall the impacts should be small, if the health metrics are easy to collect."
                },
                {
                    "file": "designs/health-nonitor.md",
                    "line": 89,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "In this case, there is only few bytes of data and not the log collections. So impact would be very minimal."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "designs/health-nonitor.md",
                    "type": "ADDED",
                    "insertions": 93,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 93,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "3b77b83d240a38db1f3f9a2450eab9f096bd9875",
            "parents": [
                "05f8a18621b67a8c69f823407e7b8f684c9fb1f8"
            ],
            "ref": "refs/changes/57/31957/3",
            "uploader": {
                "name": "Vijay Khemka",
                "email": "vijaykhemkalinux@gmail.com",
                "username": "vijaykhemka"
            },
            "createdOn": 1589415931,
            "author": {
                "name": "Vijay Khemka",
                "email": "vijaykhemka@fb.com",
                "username": ""
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 17,
                    "reviewer": {
                        "name": "Piotr Matuszczak",
                        "email": "piotr.matuszczak@intel.com",
                        "username": "pmatuszc"
                    },
                    "message": "Typo."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 17,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 94,
                    "reviewer": {
                        "name": "Piotr Matuszczak",
                        "email": "piotr.matuszczak@intel.com",
                        "username": "pmatuszc"
                    },
                    "message": "Did you considered exposing those metrics using D-Bus sensors API? This way it will be easily consumable by the OpenBMC telemetry and Redfish API."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 94,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "Sure, changed it."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "type": "ADDED",
                    "insertions": 106,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 106,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "f5f3c94c067c2a252823b97b78ad6ba45a283b40",
            "parents": [
                "b6de1960d9b896f2b48e6b0c676035afa0e432a6"
            ],
            "ref": "refs/changes/57/31957/4",
            "uploader": {
                "name": "Vijay Khemka",
                "email": "vijaykhemkalinux@gmail.com",
                "username": "vijaykhemka"
            },
            "createdOn": 1591056490,
            "author": {
                "name": "Vijay Khemka",
                "email": "vijaykhemka@fb.com",
                "username": ""
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "type": "ADDED",
                    "insertions": 112,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 112,
            "sizeDeletions": 0
        },
        {
            "number": 5,
            "revision": "c037d7584c8f40dac07572e73331a0e1416b1f3d",
            "parents": [
                "80b34150d8a3d897158f0e189707f0dc9267c570"
            ],
            "ref": "refs/changes/57/31957/5",
            "uploader": {
                "name": "Vijay Khemka",
                "email": "vijaykhemkalinux@gmail.com",
                "username": "vijaykhemka"
            },
            "createdOn": 1591744462,
            "author": {
                "name": "Vijay Khemka",
                "email": "vijaykhemka@fb.com",
                "username": ""
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 18,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Can you expand on this a lot.  One might argue that the sensors subsystem, and existing health subsystems meet this need already, in that everything you list could be published as a sensor and thresholded appropriately using the existing interfaces."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 18,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "I will add more details in a follow up patch"
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 26,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This sounds a lot like entity manager config files."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 26,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "Yes, This has been kept independent of entity manager. If some user is not using entity manager but wants to use this one."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 28,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This sounds a lot like what dbus-sensors does."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 28,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "Yes, it is similar. after all it is treated as utilization sensor"
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 30,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "One of the big security priorities for the project is to get user-facing daemons running under appropriate user privileges.  Every time a raw file is used, that pushes us further from that goal  Try to use dbus primarily if you can."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 30,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "Sure, I will definitely consider this while coding for this."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 32,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I'm not following, or maybe I'm not understanding what the \"staging\" step means.  Is this an aggregator of some kind?"
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 32,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "It is mainly that anytime user wants data it gets it from dbus so data are not read at the time of request from user. It is continuously being monitored and read."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 46,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This is not true for all sensors.  There are sensors that pull data from purely software sources, like dbus."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 46,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "But origin of data are from hardware driven"
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 49,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I suspect you still do need that.  You list things like i2c bus stats as one of your metrics.  How do you know what i2c busses exist without some kind of hardware detection?"
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 49,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "yes you are right, one way is through configuration file."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 53,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I'm really not following this statement.  Just because a metric counts up and aggregates doesn't mean that it's can't use the existing sensor interfaces.  This is one of the primary reasons we moved the sensor subsystem to double precision, to handle very large aggregators like this."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 53,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "It can use sensor interface and it is using utilization sensor interface, we are trying to explain between sensor and metric readings."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 62,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "There must be more references than this."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 68,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Can you list the metrics you're going to expose to start with?  Being specific about requirements in this regard might sort out the \"should this just be a sensor\" problem."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 68,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "Currently we are doing CPU and memory"
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 70,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This is where you're going to run into problems.  If you're building a not-quite-a-sensor subsystem, what interfaces do you plan to use?  Sensors have well defined methods for accessing the data, as well as redfish having aggregation style interfaces with MetricsReport and things of that nature.  This feels like you're either going to A. Duplicate a bunch of code in OEM space, or B. overload the meaning of those things to include both sensors AND this new \"health metric\" type that you're adding."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 70,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "I am doing \"A\" and using phosphor-dbus-interface for accessing it."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 71,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Can you be more specific?"
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 71,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "like window size, frequency of data reading. all these are read from config file."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 72,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "What actions?  Be more specific."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 72,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "Actions are user defined, like logging message or starting a systemd target."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 73,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Please remove this.  There are other services (like telemetry service) that have this same goal (although today only for sensors).  Lets use what exists and not duplicate."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 73,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "ok, will do."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 74,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "nit: considering this is largely the point, should this be optional?"
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 74,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "Again config based. some are default and some are user defined."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 97,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I'd recommend making this non configurable.  Having a \"sensor\" that can dynamically scale up and down its refresh rate dependent on system resources seems to be much more scalable."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 97,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "That's where the window size comes into calculation."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 104,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This shouldn't be configurable.  If you don't want a log, don't set a threshold."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 104,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "You may just want an action which doesn't need a log."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 105,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Can you go into more detail into this?  What is allowed there?"
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 105,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "Any user defined systemd target. Can be dump list of processes, kill some process."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 111,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This doesn't seem like enough information to do what you're wanting."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 111,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "Again, any user defined systemd target. These are extra feature and are not implemented in first phase."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 132,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Mean, median, max or min?  Telemetry service accounts for these already, I suspect you will need to do the same."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 132,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "average of these many samples of data"
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 134,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "see above.  Logging a threshold crossing should not be optional."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 137,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This will require your daemon to have root permissions to launch arbitrary targets, which seems like overkill, and will make it hard to run it as non-root later.  Could you modify this to a dbus call instead?"
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 141,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Good.  When I last looked at the facebook openbmc tree, calling \"cat\" to get a sensor value drove me up a wall, and caused a bunch of performance problems in the code.  I'm glad you grok this."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 145,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Ok.... now I'm really confused.  You spend a bunch of the document talking about how these aren't sensors, then you call them sensors.  If you're planning on publishing the Sensors interface, most of my objections to this plan go away, as it just becomes another sensor, and the rest of the infrastructure doesn't duplicate anything.."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 146,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Currently sensors are namespaced 1:1 with units.  If utilization is going to be in a percent, what you've done is fine.  but if this one is meant to be in MB, you might consider changing the namespace."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 146,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "No, it is calculated in percent."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 153,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "nit.  It's called cpu above, not bmc_cpu.  Same with memory below this."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 153,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "Alright, I fixed this in code, I thought to keep this separate from host cpu. Will update document in next patch"
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 160,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Totally agree."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 162,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "What does external mean here?"
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 162,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "Means user running user defined script like \"df\" or top or free etc"
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 169,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Looking at the above, the impacts aren't limited to just the daemon, right? See above about Redfish and IPMI duplicating logic to accommodate this new interface."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 169,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "This sensor interface exist in phosphor-dbus-interface and we are using the same."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 174,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Can you change this to testing over IPMI/Redfish?  It's much more similar to what a user would do.\n\nHow do you plan to verify the actions interface?"
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 174,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "Initially we will be testing manually running busctrl command and see. Yes once we have support for IPMI/Redfish, we will use the same."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 177,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Can you add this as a requirement, along with something about \"Should use less than X percent of a a Y brand CPU when producing N metrics\"\nFill in X, Y and N with your performance targets."
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "line": 177,
                    "reviewer": {
                        "name": "Vijay Khemka",
                        "email": "vijaykhemkalinux@gmail.com",
                        "username": "vijaykhemka"
                    },
                    "message": "That is not a testing requirement for this daemon, it is a system requirements. For this application to be working we can't put system performance."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "type": "ADDED",
                    "insertions": 177,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 177,
            "sizeDeletions": 0
        },
        {
            "number": 6,
            "revision": "09a5f74e36ab435d51875dfd8204a9a5bd144d31",
            "parents": [
                "d09b685f1a5b6a02800d1c23938caa38db55eeaa"
            ],
            "ref": "refs/changes/57/31957/6",
            "uploader": {
                "name": "Vijay Khemka",
                "email": "vijaykhemkalinux@gmail.com",
                "username": "vijaykhemka"
            },
            "createdOn": 1604435124,
            "author": {
                "name": "Vijay Khemka",
                "email": "vijaykhemka@fb.com",
                "username": ""
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "type": "ADDED",
                    "insertions": 177,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 177,
            "sizeDeletions": 0
        },
        {
            "number": 7,
            "revision": "4b9fc95d11d9ef391cb40a63ddd5cba0bd5a06a4",
            "parents": [
                "ce0a0c64a11c1918bfc2db70da8ef337f3af6745"
            ],
            "ref": "refs/changes/57/31957/7",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1620310553,
            "author": {
                "name": "Vijay Khemka",
                "email": "vijaykhemka@fb.com",
                "username": ""
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "designs/bmc-health-monitor.md",
                    "type": "ADDED",
                    "insertions": 177,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 177,
            "sizeDeletions": 0
        }
    ]
}