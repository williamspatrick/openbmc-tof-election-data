{
    "project": "openbmc/bmcweb",
    "branch": "master",
    "id": "Idfb0cd8f62ffbc09d6e248c677c24ea1abcb7a5b",
    "number": 49380,
    "subject": "Deduplicate doAccept code",
    "owner": {
        "name": "Ed Tanous",
        "email": "ed@tanous.net",
        "username": "edtanous"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/bmcweb/+/49380",
    "commitMessage": "Deduplicate doAccept code\n\ndoAccept does essentially the same code in two ways.\nboost::beast::lowest_layer is used elsewhere to deduplicate this code.\nUse it here as well.\n\nTested:\ncurl -vvvv --insecure -u root:0penBmc \"https://192.168.7.2:443/redfish/v1\"\nsucceeds.\n\nSigned-off-by: Ed Tanous <edtanous@google.com>\nChange-Id: Idfb0cd8f62ffbc09d6e248c677c24ea1abcb7a5b\n",
    "createdOn": 1638829522,
    "lastUpdated": 1639599618,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1638829522,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1638829547,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1638829994,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/31318/ : SUCCESS"
        },
        {
            "timestamp": 1638904114,
            "reviewer": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "message": "Patch Set 1:\n\n(2 comments)"
        },
        {
            "timestamp": 1638904905,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1638905030,
            "reviewer": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1638907627,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 1:\n\n(3 comments)"
        },
        {
            "timestamp": 1638908406,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1638908422,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1638908432,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1638908469,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/31463/ : FAILURE"
        },
        {
            "timestamp": 1638910214,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1638910233,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1638910685,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/31466/ : SUCCESS"
        },
        {
            "timestamp": 1638929216,
            "reviewer": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "message": "Patch Set 3: Code-Review+1\n\nsounds good to me"
        },
        {
            "timestamp": 1639101930,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1639101949,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1639102040,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/31724/ : FAILURE"
        },
        {
            "timestamp": 1639102124,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1639102140,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1639102549,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/31729/ : SUCCESS"
        },
        {
            "timestamp": 1639103401,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 5: Code-Review+1"
        },
        {
            "timestamp": 1639440269,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Uploaded patch set 6: Patch Set 5 was rebased."
        },
        {
            "timestamp": 1639440348,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1639440960,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/31889/ : SUCCESS"
        },
        {
            "timestamp": 1639599573,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 6: Code-Review+2"
        },
        {
            "timestamp": 1639599618,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Change has been successfully rebased and submitted as 88e1612b4141e9011a70fcb95c76238112051e62 by Ed Tanous"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "9c7c8bce7082cbe0803b3127c2f9e340660df1ec",
            "parents": [
                "e180c9a904d586daacf5799d9e2e420e4aea043e"
            ],
            "ref": "refs/changes/80/49380/1",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1638829522,
            "author": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "http/http_server.hpp",
                    "line": 178,
                    "reviewer": {
                        "name": "John Broadbent",
                        "email": "jebr@google.com",
                        "username": "jebr224"
                    },
                    "message": "The change does not use .next_layer?"
                },
                {
                    "file": "http/http_server.hpp",
                    "line": 178,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "As mentioned in the commit message, it uses boost::beast::get_lowest_layey, which is essentially \"call next layer until it no longer exists\""
                },
                {
                    "file": "http/http_server.hpp",
                    "line": 168,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "I know this was there before and nitpick but single var names in cases like this, hurt readability, e.g. harder to search for \"p\", harder to understand\nI am good with single var names in expected cases / small scope (e.g. iterating over a list / std::exception e)"
                },
                {
                    "file": "http/http_server.hpp",
                    "line": 168,
                    "reviewer": {
                        "name": "John Broadbent",
                        "email": "jebr@google.com",
                        "username": "jebr224"
                    },
                    "message": "+1"
                },
                {
                    "file": "http/http_server.hpp",
                    "line": 168,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Will fix in next patchset."
                },
                {
                    "file": "http/http_server.hpp",
                    "line": 168,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Done"
                },
                {
                    "file": "http/http_server.hpp",
                    "line": 175,
                    "reviewer": {
                        "name": "John Broadbent",
                        "email": "jebr@google.com",
                        "username": "jebr224"
                    },
                    "message": "nit:\nwhy no std::move"
                },
                {
                    "file": "http/http_server.hpp",
                    "line": 175,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This is already an rvalue, a move would be redundant (which clang-tidy would also yell at your for) in this context."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "http/http_server.hpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": -28
                }
            ],
            "sizeInsertions": 14,
            "sizeDeletions": 28
        },
        {
            "number": 2,
            "revision": "597943447f0b31bc382a6b041530f36cd7120f70",
            "parents": [
                "e180c9a904d586daacf5799d9e2e420e4aea043e"
            ],
            "ref": "refs/changes/80/49380/2",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1638908406,
            "author": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "http/http_server.hpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": -28
                }
            ],
            "sizeInsertions": 14,
            "sizeDeletions": 28
        },
        {
            "number": 3,
            "revision": "747b5c3b618e4386652d45d6281dc43f1e1a5090",
            "parents": [
                "e180c9a904d586daacf5799d9e2e420e4aea043e"
            ],
            "ref": "refs/changes/80/49380/3",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1638910214,
            "author": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "http/http_server.hpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": -28
                }
            ],
            "sizeInsertions": 15,
            "sizeDeletions": 28
        },
        {
            "number": 4,
            "revision": "bccf374338094acfbc616d6c4e3eb54e48310e03",
            "parents": [
                "41d61c8281ed9af50630c78f0a646e726139fb25"
            ],
            "ref": "refs/changes/80/49380/4",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1639101930,
            "author": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "http/http_server.hpp",
                    "type": "MODIFIED",
                    "insertions": 18,
                    "deletions": -30
                }
            ],
            "sizeInsertions": 18,
            "sizeDeletions": 30
        },
        {
            "number": 5,
            "revision": "85b34e3d240239d9ae9a9c607e37952d9b946d23",
            "parents": [
                "c399a5332cb1defdb9f24a64d9380645f3bd0fbe"
            ],
            "ref": "refs/changes/80/49380/5",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1639102124,
            "author": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "http/http_server.hpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": -28
                }
            ],
            "sizeInsertions": 15,
            "sizeDeletions": 28
        },
        {
            "number": 6,
            "revision": "6b09fc781fd1ca7dea09e80991ec648482eaaffa",
            "parents": [
                "da65d5bfa9b4738f778cf96bde9adaaec5dd25b9"
            ],
            "ref": "refs/changes/80/49380/6",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1639440269,
            "author": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "http/http_server.hpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": -28
                }
            ],
            "sizeInsertions": 15,
            "sizeDeletions": 28
        },
        {
            "number": 7,
            "revision": "88e1612b4141e9011a70fcb95c76238112051e62",
            "parents": [
                "5dfb5b2d8826f568a0ad6f6430f01cd7a86ab07f"
            ],
            "ref": "refs/changes/80/49380/7",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1639599618,
            "author": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "http/http_server.hpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": -28
                }
            ],
            "sizeInsertions": 15,
            "sizeDeletions": 28
        }
    ]
}