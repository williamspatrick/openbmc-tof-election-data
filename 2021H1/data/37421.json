{
    "project": "openbmc/phosphor-fan-presence",
    "branch": "master",
    "id": "I1be9cc335c15a78d342e2e7ea4e5108a66d29de3",
    "number": 37421,
    "subject": "monitor: Allowing ignoring fan FRU func status",
    "owner": {
        "name": "Matt Spinler",
        "email": "spinler@us.ibm.com",
        "username": "spinler"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-fan-presence/+/37421",
    "commitMessage": "monitor: Allowing ignoring fan FRU func status\n\nMake the 'num_sensors_nonfunc_for_fan_nonfunc' JSON entry be optional,\nand if it isn't present then don't set the parent fan FRU inventory\nobject functional state when the tach sensor functional states change.\n\nThis is necessary because on some systems some other entity will be\nmanaging the FRU level functional state.\n\nThis also adds a trace when the tach sensor functional state changes,\nsince if the FRU functional state updating is turned off then the\nexisting traces won't appear.\n\nSigned-off-by: Matt Spinler <spinler@us.ibm.com>\nChange-Id: I1be9cc335c15a78d342e2e7ea4e5108a66d29de3\n",
    "createdOn": 1602710902,
    "lastUpdated": 1609770867,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1602710902,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1602710927,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1602710933,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1:\n\nBuild Started https://jenkins.openbmc.org/job/ci-repository/6339/"
        },
        {
            "timestamp": 1602711065,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/6339/ : SUCCESS"
        },
        {
            "timestamp": 1603736732,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1603736772,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1603736936,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/6884/ : SUCCESS"
        },
        {
            "timestamp": 1603826082,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 3: Patch Set 2 was rebased."
        },
        {
            "timestamp": 1603826128,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1603826506,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/6953/ : SUCCESS"
        },
        {
            "timestamp": 1603828066,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 4: Patch Set 3 was rebased."
        },
        {
            "timestamp": 1603828082,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1603828206,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/6962/ : SUCCESS"
        },
        {
            "timestamp": 1603834533,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1603834558,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1603834687,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/6970/ : SUCCESS"
        },
        {
            "timestamp": 1605642049,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 6: Patch Set 5 was rebased."
        },
        {
            "timestamp": 1605642100,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1605642223,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/8002/ : SUCCESS"
        },
        {
            "timestamp": 1606753301,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 7: Patch Set 6 was rebased."
        },
        {
            "timestamp": 1606753332,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1606753650,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/8734/ : SUCCESS"
        },
        {
            "timestamp": 1606962462,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1607008682,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1607012033,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 8: Patch Set 7 was rebased."
        },
        {
            "timestamp": 1607012048,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1607012681,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/9041/ : SUCCESS"
        },
        {
            "timestamp": 1607026991,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1607027875,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1607030684,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Patch Set 8: Code-Review+1"
        },
        {
            "timestamp": 1607036629,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Patch Set 8: Code-Review+2"
        },
        {
            "timestamp": 1609770867,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Change has been successfully merged by Matt Spinler"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "632d49323e784f1ed2c0f5fb9117faab6cfc2554",
            "parents": [
                "8a73646d2601875ad8bbdb47563aa9d4ea1057ef"
            ],
            "ref": "refs/changes/21/37421/1",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1602710902,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "monitor/fan.cpp",
                    "type": "MODIFIED",
                    "insertions": 33,
                    "deletions": -22
                },
                {
                    "file": "monitor/json_parser.cpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -6
                }
            ],
            "sizeInsertions": 46,
            "sizeDeletions": 28
        },
        {
            "number": 2,
            "revision": "29af0840de1a42f7f0db9e1392a641d4a7bbf675",
            "parents": [
                "6e21b4facf009b1ef237f91f8225331519febae0"
            ],
            "ref": "refs/changes/21/37421/2",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1603736732,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "monitor/fan.cpp",
                    "type": "MODIFIED",
                    "insertions": 33,
                    "deletions": -22
                },
                {
                    "file": "monitor/json_parser.cpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -6
                }
            ],
            "sizeInsertions": 46,
            "sizeDeletions": 28
        },
        {
            "number": 3,
            "revision": "ffdb85cf2678abac12c897c3dd912f53f39c0ca1",
            "parents": [
                "abe7a3d2af6db878e4c059fd283d71c64915e29e"
            ],
            "ref": "refs/changes/21/37421/3",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1603826082,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "monitor/fan.cpp",
                    "type": "MODIFIED",
                    "insertions": 33,
                    "deletions": -22
                },
                {
                    "file": "monitor/json_parser.cpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -6
                }
            ],
            "sizeInsertions": 46,
            "sizeDeletions": 28
        },
        {
            "number": 4,
            "revision": "37175ef6640b74035d30d6baf3ab5c5736afd282",
            "parents": [
                "69a415bdcc2edca3f4d0bc84913510b3b14d4004"
            ],
            "ref": "refs/changes/21/37421/4",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1603828066,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "monitor/fan.cpp",
                    "type": "MODIFIED",
                    "insertions": 33,
                    "deletions": -22
                },
                {
                    "file": "monitor/json_parser.cpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -6
                }
            ],
            "sizeInsertions": 46,
            "sizeDeletions": 28
        },
        {
            "number": 5,
            "revision": "cc8221ac826cf4e6c82bdb8cccbf8225730f2c41",
            "parents": [
                "69a415bdcc2edca3f4d0bc84913510b3b14d4004"
            ],
            "ref": "refs/changes/21/37421/5",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1603834533,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "monitor/fan.cpp",
                    "type": "MODIFIED",
                    "insertions": 38,
                    "deletions": -24
                },
                {
                    "file": "monitor/json_parser.cpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -6
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 30
        },
        {
            "number": 6,
            "revision": "8a57a2ee39cd5ef2724eb1cf7fe573e19b02c20d",
            "parents": [
                "b34b2a96747f717278535caa4af9d07a47757ad9"
            ],
            "ref": "refs/changes/21/37421/6",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1605642049,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "monitor/fan.cpp",
                    "type": "MODIFIED",
                    "insertions": 38,
                    "deletions": -24
                },
                {
                    "file": "monitor/json_parser.cpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -6
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 30
        },
        {
            "number": 7,
            "revision": "8238725315978cf8c2bbe10b6a8cc5d36fd8d03b",
            "parents": [
                "576c1f193afa294d37b1d2b839d785f3003566e9"
            ],
            "ref": "refs/changes/21/37421/7",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1606753301,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "monitor/fan.cpp",
                    "line": 224,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "Seems like this should be done in the tach sensor object's setFunctional method."
                },
                {
                    "file": "monitor/fan.cpp",
                    "line": 224,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Looks like setFunctional() is called from within tachSensor a few places too, and it doesn't seem like it would be good to trace in those cases?"
                },
                {
                    "file": "monitor/fan.cpp",
                    "line": 224,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "Agreed, but there's really only one in the constructor at initial creation we wouldnt want. We could put this in setFunctional wrapped with a \"is power on\" check since we have that ability now right? If not, I agree it should stay here so we dont get an initial set of these."
                },
                {
                    "file": "monitor/fan.cpp",
                    "line": 224,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "tachSensor doesn't know the power state.  Only System knows it, though that may eventually change when I investigate fully supporting running at standby."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "monitor/fan.cpp",
                    "type": "MODIFIED",
                    "insertions": 38,
                    "deletions": -24
                },
                {
                    "file": "monitor/json_parser.cpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -6
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 30
        },
        {
            "number": 8,
            "revision": "ae1f8efe2e6bbe70b454a09c7fa68884d83df212",
            "parents": [
                "e892e39a36b2ef20daa73ada06baf6e17d4f8a45"
            ],
            "ref": "refs/changes/21/37421/8",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1607012033,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "monitor/fan.cpp",
                    "type": "MODIFIED",
                    "insertions": 38,
                    "deletions": -24
                },
                {
                    "file": "monitor/json_parser.cpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -6
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 30
        }
    ]
}