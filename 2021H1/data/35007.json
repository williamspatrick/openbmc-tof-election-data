{
    "project": "openbmc/meta-phosphor",
    "branch": "master",
    "id": "I90ddc9b1d7c1cd9c76f8b3a57a3fcc48e5a51d45",
    "number": 35007,
    "subject": "dump: Adding workaround for jffs2 file system",
    "owner": {
        "email": "chiragsibm@gmail.com",
        "username": "chiragsibm"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/meta-phosphor/+/35007",
    "commitMessage": "dump: Adding workaround for jffs2 file system\n\nChange:\nIncase of jffs2 the jffs-workaround flag will be enabled and\nwill watch IN_CLOSE_WRITE event during core file creation.\nFor rest of the file systems(ubifs, ext4 etc) the flag will be\ndisabled and will watch for IN_CREATE event.\n\nFor more details please refer to \"openbmc/openbmc#2240\" and\n\"openbmc/openbmc#2287\" issues.\n\nSigned-off-by: Chirag Sharma <chirshar@in.ibm.com>\nChange-Id: I90ddc9b1d7c1cd9c76f8b3a57a3fcc48e5a51d45\nSigned-off-by: Chirag Sharma <chirshar@in.ibm.com>\n",
    "createdOn": 1595489816,
    "lastUpdated": 1613162923,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1595489816,
            "reviewer": {
                "email": "chiragsibm@gmail.com",
                "username": "chiragsibm"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1595489828,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1595489834,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1:\n\nBuild Started https://jenkins.openbmc.org/job/ci-meta/428/"
        },
        {
            "timestamp": 1595492797,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-meta/428/ : SUCCESS"
        },
        {
            "timestamp": 1595493803,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 1:\n\nIn the commit message add refernce to openbmc#2240 for more details related to this problem."
        },
        {
            "timestamp": 1595494198,
            "reviewer": {
                "name": "Jenkins OpenBMC IBM",
                "email": "geissonator+jenkinsibm@gmail.com",
                "username": "jenkins-openbmc-ibm"
            },
            "message": "Patch Set 1:\n\nBuild Successful \n\nIBM Hardware CI : witherspoon hardware tests passed"
        },
        {
            "timestamp": 1595556504,
            "reviewer": {
                "email": "chiragsibm@gmail.com",
                "username": "chiragsibm"
            },
            "message": "Patch Set 2: Commit message was updated."
        },
        {
            "timestamp": 1595855672,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1595861060,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1596489074,
            "reviewer": {
                "name": "Brad Bishop",
                "email": "bradleyb@fuzziesquirrel.com",
                "username": "bradbishop"
            },
            "message": "Patch Set 2:\n\n(1 comment)\n\nI'm going to hold off on merging this until the jffs2 experiment has happened."
        },
        {
            "timestamp": 1611057401,
            "reviewer": {
                "email": "chiragsibm@gmail.com",
                "username": "chiragsibm"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1611057414,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1611057423,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3:\n\nBuild Started https://jenkins.openbmc.org/job/ci-meta/2516/"
        },
        {
            "timestamp": 1611058059,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-meta/2516/ : FAILURE"
        },
        {
            "timestamp": 1611065481,
            "reviewer": {
                "email": "chiragsibm@gmail.com",
                "username": "chiragsibm"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1611065495,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1611065504,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4:\n\nBuild Started https://jenkins.openbmc.org/job/ci-meta/2517/"
        },
        {
            "timestamp": 1611066072,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-meta/2517/ : FAILURE"
        },
        {
            "timestamp": 1611073602,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 4: Code-Review-1\n\n(2 comments)"
        },
        {
            "timestamp": 1611150338,
            "reviewer": {
                "email": "chiragsibm@gmail.com",
                "username": "chiragsibm"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1611150354,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1611150361,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5:\n\nBuild Started https://jenkins.openbmc.org/job/ci-meta/2538/"
        },
        {
            "timestamp": 1611151246,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-meta/2538/ : FAILURE"
        },
        {
            "timestamp": 1611173712,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 5: Code-Review+1"
        },
        {
            "timestamp": 1612154368,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 5: Code-Review+1"
        },
        {
            "timestamp": 1612345486,
            "reviewer": {
                "email": "chiragsibm@gmail.com",
                "username": "chiragsibm"
            },
            "message": "Uploaded patch set 6."
        },
        {
            "timestamp": 1612345503,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1612348745,
            "reviewer": {
                "email": "chiragsibm@gmail.com",
                "username": "chiragsibm"
            },
            "message": "Uploaded patch set 7."
        },
        {
            "timestamp": 1612348763,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1612350077,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 7: Code-Review+1"
        },
        {
            "timestamp": 1612384051,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 7: Code-Review+1"
        },
        {
            "timestamp": 1612821538,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 7:\n\nThis can be abandoned as subtrees have been deprecated. Change has been submitted to the openbmc/openbmc repo via: https://gerrit.openbmc-project.xyz/c/openbmc/openbmc/+/40374"
        },
        {
            "timestamp": 1613162923,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Abandoned"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "6da843700dda8b114e52d52ec41677d826c0afac",
            "parents": [
                "5175af410055a97b91002ea55a2dfa855cd2c1c2"
            ],
            "ref": "refs/changes/07/35007/1",
            "uploader": {
                "email": "chiragsibm@gmail.com",
                "username": "chiragsibm"
            },
            "createdOn": 1595489816,
            "author": {
                "email": "chiragsibm@gmail.com",
                "username": "chiragsibm"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "recipes-phosphor/dump/phosphor-debug-collector_git.bb",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 1,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "03f303399d1e59ac1b4ce0d31132420df75307e0",
            "parents": [
                "5175af410055a97b91002ea55a2dfa855cd2c1c2"
            ],
            "ref": "refs/changes/07/35007/2",
            "uploader": {
                "email": "chiragsibm@gmail.com",
                "username": "chiragsibm"
            },
            "createdOn": 1595556504,
            "author": {
                "email": "chiragsibm@gmail.com",
                "username": "chiragsibm"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 14,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "Jayanth mentions that this workaround is in place to address an unexpected behavior from systemd. Initially it was thought to be unique to UBIFS, but now you're seeing it in ext4 which is a widely used filesystem. Have you contacted systemd to determine what is the expected behavior, why it differs with different filesystems, and figure out if there's indeed a bug in systemd in which case an issue should be raised?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 14,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "Discussing with the team, the issue appears to be on the filesystem, not systemd. It was discussed to verify that this workaround works on the jffs2 filesystem which is the read-write filesystem for the static layout, and once it's verified it works the same as ubi, then make that behavior the default for openbmc (documenting in the code that it's a workaround), while a filesystem issue is pursued."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 14,
                    "reviewer": {
                        "name": "Brad Bishop",
                        "email": "bradleyb@fuzziesquirrel.com",
                        "username": "bradbishop"
                    },
                    "message": ">  to verify that this workaround works on the jffs2 filesystem which is the read-write filesystem for the static layout, and once it's verified it works the same as ubi, then make that behavior the default for openbmc\n\n+1 to this.\n\n>  (documenting in the code that it's a workaround)\n\nIs it really a workaround, if it is the behavior from jffs2, ubifs, and ext4?"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "recipes-phosphor/dump/phosphor-debug-collector_git.bb",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 1,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "fe4226596211c2fef712c8d85fdc5db1a2aaeba3",
            "parents": [
                "be1df8c964d895124cf58c8d864f7a9c8f154e08"
            ],
            "ref": "refs/changes/07/35007/3",
            "uploader": {
                "email": "chiragsibm@gmail.com",
                "username": "chiragsibm"
            },
            "createdOn": 1611057401,
            "author": {
                "email": "chiragsibm@gmail.com",
                "username": "chiragsibm"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "recipes-phosphor/dump/phosphor-debug-collector_git.bb",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -5
                }
            ],
            "sizeInsertions": 5,
            "sizeDeletions": 5
        },
        {
            "number": 4,
            "revision": "305a1a03392e7b48bbb9547fb850edf5055ceca9",
            "parents": [
                "be1df8c964d895124cf58c8d864f7a9c8f154e08"
            ],
            "ref": "refs/changes/07/35007/4",
            "uploader": {
                "email": "chiragsibm@gmail.com",
                "username": "chiragsibm"
            },
            "createdOn": 1611065481,
            "author": {
                "email": "chiragsibm@gmail.com",
                "username": "chiragsibm"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "Per issue openbmc/openbmc#2287, the plan is to make a config flag to handle the jffs2 behavior: \"For the outlier in jffs2, a workaround can be added to watch IN_CLOSE_WRITE.\"\n\nTherefore all other filesystems (ubifs, ext4, etc) should have a default behavior and no flag should be set based on these filesystems."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 14,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "Change issues to \"openbmc/openbmc#2240\" and to \"openbmc/openbmc#2287\" so they become hyperlinks."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "recipes-phosphor/dump/phosphor-debug-collector_git.bb",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -5
                }
            ],
            "sizeInsertions": 6,
            "sizeDeletions": 5
        },
        {
            "number": 5,
            "revision": "c719c6055622ffee5be69ec7a8f9e6428bebcfbf",
            "parents": [
                "be1df8c964d895124cf58c8d864f7a9c8f154e08"
            ],
            "ref": "refs/changes/07/35007/5",
            "uploader": {
                "email": "chiragsibm@gmail.com",
                "username": "chiragsibm"
            },
            "createdOn": 1611150338,
            "author": {
                "email": "chiragsibm@gmail.com",
                "username": "chiragsibm"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "recipes-phosphor/dump/phosphor-debug-collector_git.bb",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -6
                }
            ],
            "sizeInsertions": 4,
            "sizeDeletions": 6
        },
        {
            "number": 6,
            "revision": "02d035477a57053719490db7baaae73a00d01f19",
            "parents": [
                "be1df8c964d895124cf58c8d864f7a9c8f154e08"
            ],
            "ref": "refs/changes/07/35007/6",
            "uploader": {
                "email": "chiragsibm@gmail.com",
                "username": "chiragsibm"
            },
            "createdOn": 1612345486,
            "author": {
                "email": "chiragsibm@gmail.com",
                "username": "chiragsibm"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "recipes-phosphor/dump/phosphor-debug-collector.inc",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                },
                {
                    "file": "recipes-phosphor/dump/phosphor-debug-collector_git.bb",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -6
                }
            ],
            "sizeInsertions": 5,
            "sizeDeletions": 7
        },
        {
            "number": 7,
            "revision": "bb439aca138734d645110dc235c11960055df7ff",
            "parents": [
                "abba9b45019b145c9ac873973fd4545cf16c999e"
            ],
            "ref": "refs/changes/07/35007/7",
            "uploader": {
                "email": "chiragsibm@gmail.com",
                "username": "chiragsibm"
            },
            "createdOn": 1612348745,
            "author": {
                "email": "chiragsibm@gmail.com",
                "username": "chiragsibm"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "recipes-phosphor/dump/phosphor-debug-collector.inc",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                },
                {
                    "file": "recipes-phosphor/dump/phosphor-debug-collector_git.bb",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -6
                }
            ],
            "sizeInsertions": 5,
            "sizeDeletions": 7
        }
    ]
}