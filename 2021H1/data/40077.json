{
    "project": "openbmc/openbmc-test-automation",
    "branch": "master",
    "id": "If83f29a12e787ada807b06b1ebdaba87517341db",
    "number": 40077,
    "subject": "Automated test case fail to release lock when valid & invalid transaction id passed to release lock request",
    "owner": {
        "name": "Sushil Singh",
        "email": "susilsi7@in.ibm.com",
        "username": "susilsi7"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/openbmc-test-automation/+/40077",
    "commitMessage": "Automated test case fail to release lock when valid & invalid\ntransaction id passed to release lock request\n\nChanges:\n   -  Test case \"Fail To Release Multiple Lock With Valid And\n      Invalid TransactionID\"\n   -  Keyword \"Verify Fail To Release Multiple Lock With Valid\n      And Invalid TransactionID\"\n\nChange-Id: If83f29a12e787ada807b06b1ebdaba87517341db\nSigned-off-by: Sushil Singh <susilsi7@in.ibm.com>\n",
    "createdOn": 1611812862,
    "lastUpdated": 1614664534,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1611812862,
            "reviewer": {
                "name": "Sushil Singh",
                "email": "susilsi7@in.ibm.com",
                "username": "susilsi7"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1611812875,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1611812908,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/11493/ : SUCCESS"
        },
        {
            "timestamp": 1612433056,
            "reviewer": {
                "name": "Sushil Singh",
                "email": "susilsi7@in.ibm.com",
                "username": "susilsi7"
            },
            "message": "Uploaded patch set 2: Patch Set 1 was rebased."
        },
        {
            "timestamp": 1612433072,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1612433110,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/11889/ : SUCCESS"
        },
        {
            "timestamp": 1612768597,
            "reviewer": {
                "name": "Prashanth Katti",
                "email": "prkatti1@in.ibm.com",
                "username": "prkatti1"
            },
            "message": "Patch Set 2: Code-Review-1\n\n(1 comment)"
        },
        {
            "timestamp": 1612769272,
            "reviewer": {
                "name": "Sushil Singh",
                "email": "susilsi7@in.ibm.com",
                "username": "susilsi7"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1612769862,
            "reviewer": {
                "name": "Prashanth Katti",
                "email": "prkatti1@in.ibm.com",
                "username": "prkatti1"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1612770646,
            "reviewer": {
                "name": "Sushil Singh",
                "email": "susilsi7@in.ibm.com",
                "username": "susilsi7"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1612771199,
            "reviewer": {
                "name": "Prashanth Katti",
                "email": "prkatti1@in.ibm.com",
                "username": "prkatti1"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1612775705,
            "reviewer": {
                "name": "Sushil Singh",
                "email": "susilsi7@in.ibm.com",
                "username": "susilsi7"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1612776282,
            "reviewer": {
                "name": "Prashanth Katti",
                "email": "prkatti1@in.ibm.com",
                "username": "prkatti1"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1612776890,
            "reviewer": {
                "name": "Sushil Singh",
                "email": "susilsi7@in.ibm.com",
                "username": "susilsi7"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1613977286,
            "reviewer": {
                "name": "Shradha Suman",
                "email": "shrsuman@in.ibm.com",
                "username": "shrsuman123"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1613990290,
            "reviewer": {
                "name": "Sushil Singh",
                "email": "susilsi7@in.ibm.com",
                "username": "susilsi7"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1614077034,
            "reviewer": {
                "name": "Anvesh Kumar",
                "email": "anvesr77@in.ibm.com",
                "username": "anvesh001"
            },
            "message": "Patch Set 2: Code-Review+1"
        },
        {
            "timestamp": 1614081184,
            "reviewer": {
                "name": "Shradha Suman",
                "email": "shrsuman@in.ibm.com",
                "username": "shrsuman123"
            },
            "message": "Patch Set 2: Code-Review+1"
        },
        {
            "timestamp": 1614142221,
            "reviewer": {
                "name": "Prashanth Katti",
                "email": "prkatti1@in.ibm.com",
                "username": "prkatti1"
            },
            "message": "Patch Set 2: -Code-Review"
        },
        {
            "timestamp": 1614664455,
            "reviewer": {
                "name": "George Keishing",
                "email": "gkeishin@gmail.com",
                "username": "gkeishin"
            },
            "message": "Patch Set 3: Patch Set 2 was rebased"
        },
        {
            "timestamp": 1614664472,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1614664501,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/13178/ : SUCCESS"
        },
        {
            "timestamp": 1614664527,
            "reviewer": {
                "name": "George Keishing",
                "email": "gkeishin@gmail.com",
                "username": "gkeishin"
            },
            "message": "Patch Set 3: Code-Review+2"
        },
        {
            "timestamp": 1614664534,
            "reviewer": {
                "name": "George Keishing",
                "email": "gkeishin@gmail.com",
                "username": "gkeishin"
            },
            "message": "Change has been successfully merged by George Keishing"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "7b38b7a2db1ea5e5a304e4fd6f268fa91b7deba9",
            "parents": [
                "6b9fcd1adc494733df35bd2b57b32471215e61e1"
            ],
            "ref": "refs/changes/77/40077/1",
            "uploader": {
                "name": "Sushil Singh",
                "email": "susilsi7@in.ibm.com",
                "username": "susilsi7"
            },
            "createdOn": 1611812862,
            "author": {
                "name": "Sushil Singh",
                "email": "susilsi7@in.ibm.com",
                "username": "susilsi7"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "openpower/ext_interfaces/test_lock_management.robot",
                    "type": "MODIFIED",
                    "insertions": 43,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 43,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "5033d7d5ab2f843d7c0163e83c175d0261cca755",
            "parents": [
                "f514ccb161d89f763d5da60daf24828f63997847"
            ],
            "ref": "refs/changes/77/40077/2",
            "uploader": {
                "name": "Sushil Singh",
                "email": "susilsi7@in.ibm.com",
                "username": "susilsi7"
            },
            "createdOn": 1612433056,
            "author": {
                "name": "Sushil Singh",
                "email": "susilsi7@in.ibm.com",
                "username": "susilsi7"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "openpower/ext_interfaces/test_lock_management.robot",
                    "line": 152,
                    "reviewer": {
                        "name": "Shradha Suman",
                        "email": "shrsuman@in.ibm.com",
                        "username": "shrsuman123"
                    },
                    "message": "suggestion:\nVerify Release multiple locks with valid and invalid transaction fails."
                },
                {
                    "file": "openpower/ext_interfaces/test_lock_management.robot",
                    "line": 152,
                    "reviewer": {
                        "name": "Sushil Singh",
                        "email": "susilsi7@in.ibm.com",
                        "username": "susilsi7"
                    },
                    "message": "Test case template has similar name. So keeping the current name."
                },
                {
                    "file": "openpower/ext_interfaces/test_lock_management.robot",
                    "line": 918,
                    "reviewer": {
                        "name": "Prashanth Katti",
                        "email": "prkatti1@in.ibm.com",
                        "username": "prkatti1"
                    },
                    "message": "There are many keywords starting with name `Verify Fail To Release Lock ...` and see duplicate code.\nCan you make common keyword which takes care of error n valid scenarios for release lock."
                },
                {
                    "file": "openpower/ext_interfaces/test_lock_management.robot",
                    "line": 918,
                    "reviewer": {
                        "name": "Sushil Singh",
                        "email": "susilsi7@in.ibm.com",
                        "username": "susilsi7"
                    },
                    "message": "Possible to merge the code then that code will become very big and their will be many if else condition. So, to avoid the complexity and make the test case easily to understand and debug in case of failure. I kept the test case separate."
                },
                {
                    "file": "openpower/ext_interfaces/test_lock_management.robot",
                    "line": 918,
                    "reviewer": {
                        "name": "Prashanth Katti",
                        "email": "prkatti1@in.ibm.com",
                        "username": "prkatti1"
                    },
                    "message": "For release lock ideally there should be only one keyword, there are only 2 outcomes either it'll release or not-release.\nAgree it may increase few lines or complexity, Let the intelligence or complexity be in one place, rather than having in multiple keywords. At the end it reduces confusion & complexity of looking into multiple same keywords and reduce lot of lines and makes it more structured."
                },
                {
                    "file": "openpower/ext_interfaces/test_lock_management.robot",
                    "line": 918,
                    "reviewer": {
                        "name": "Sushil Singh",
                        "email": "susilsi7@in.ibm.com",
                        "username": "susilsi7"
                    },
                    "message": "yes all are the releasing the lock but not in ideal condition their are difference in each test case. With unique name, documentation will reduce the complexity & easier to understand & debug in case of failure."
                },
                {
                    "file": "openpower/ext_interfaces/test_lock_management.robot",
                    "line": 918,
                    "reviewer": {
                        "name": "Prashanth Katti",
                        "email": "prkatti1@in.ibm.com",
                        "username": "prkatti1"
                    },
                    "message": "OK, I'm not asking to write single test case for all scenarios. You can add multiple test cases but use only one keyword. Debugging will be same if looked at log.html and more easier if looked at code level.\nEach test case will call this keyword and knows whether it is an error or valid scenario, and pass that param accordingly.\nKeyword has to just use that parameter and either expect error or 200OK while releasing lock."
                },
                {
                    "file": "openpower/ext_interfaces/test_lock_management.robot",
                    "line": 918,
                    "reviewer": {
                        "name": "Sushil Singh",
                        "email": "susilsi7@in.ibm.com",
                        "username": "susilsi7"
                    },
                    "message": "as mention in above comments, I considered single keyword to address all 3 scenario. but the common code in all 3 scenario is just 3 lines code, as mention below.\n\nRelease Locks On Resource  ${session_info}  ${trans_id_list}  release_lock_type=Session\n\n${trans_id_emptylist}=  Create List\nVerify Lock On Resource  ${session_info}  ${trans_id_emptylist}\nRedfish Delete Session  ${session_info}\n\n\nHere their is no pass scenario , only fail scenario with different parameters."
                },
                {
                    "file": "openpower/ext_interfaces/test_lock_management.robot",
                    "line": 918,
                    "reviewer": {
                        "name": "Prashanth Katti",
                        "email": "prkatti1@in.ibm.com",
                        "username": "prkatti1"
                    },
                    "message": "Here purpose of all keywords is same, same operation but different variants.\nSo lets have one keyword for one operation. Let it be complex or big code. We'll review and make it simpler."
                },
                {
                    "file": "openpower/ext_interfaces/test_lock_management.robot",
                    "line": 918,
                    "reviewer": {
                        "name": "Sushil Singh",
                        "email": "susilsi7@in.ibm.com",
                        "username": "susilsi7"
                    },
                    "message": "I will abandon the two patch as mention below, in next patch I will merge all 3.\n\nhttps://gerrit.openbmc-project.xyz/c/openbmc/openbmc-test-automation/+/40077\nhttps://gerrit.openbmc-project.xyz/c/openbmc/openbmc-test-automation/+/40282"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "openpower/ext_interfaces/test_lock_management.robot",
                    "type": "MODIFIED",
                    "insertions": 43,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 43,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "8bee358f008151040ece88b11e59d7ad8b68296b",
            "parents": [
                "d511f5d7d9c1aa7bf2a3eba9ac2b6755049bdd35"
            ],
            "ref": "refs/changes/77/40077/3",
            "uploader": {
                "name": "George Keishing",
                "email": "gkeishin@gmail.com",
                "username": "gkeishin"
            },
            "createdOn": 1614664455,
            "author": {
                "name": "Sushil Singh",
                "email": "susilsi7@in.ibm.com",
                "username": "susilsi7"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "openpower/ext_interfaces/test_lock_management.robot",
                    "type": "MODIFIED",
                    "insertions": 43,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 43,
            "sizeDeletions": 0
        }
    ]
}