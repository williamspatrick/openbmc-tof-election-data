{
    "project": "openbmc/phosphor-fan-presence",
    "branch": "master",
    "topic": "ibm1363",
    "id": "I4f70cbeb3a708b985ca01a1f3df14ad78da053fb",
    "number": 41562,
    "subject": "control: Update config loading",
    "owner": {
        "name": "Matthew Barth",
        "email": "msbarth@linux.ibm.com",
        "username": "msbarth"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-fan-presence/+/41562",
    "commitMessage": "control: Update config loading\n\nChange the method used to load objects' JSON configuration where a list\nof arguments specific to the object's class is given. This allows each\nclass to be constructed with its specific set of required arguments.\nWith this change, the zones require a pointer to their manager object\nalong with a reference to the event loop for their increment and\ndecrement timers. The manager object stores the cache for all zones,\neach zone needs a pointer to its manager to be able to provide access\nto that cache.\n\nWith the change in how the objects are created from their JSON\nconfiguration files, loading the information into the YAML based\nZoneDefinitions structure is no longer needed.\n\nChange-Id: I4f70cbeb3a708b985ca01a1f3df14ad78da053fb\nSigned-off-by: Matthew Barth <msbarth@us.ibm.com>\n",
    "createdOn": 1616618259,
    "lastUpdated": 1623856841,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1616618259,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1616618284,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1616618422,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/14350/ : SUCCESS"
        },
        {
            "timestamp": 1616697439,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1616697453,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1616697597,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/14395/ : SUCCESS"
        },
        {
            "timestamp": 1617202565,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Uploaded patch set 3: Patch Set 2 was rebased."
        },
        {
            "timestamp": 1617202709,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1617202800,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/14646/ : SUCCESS"
        },
        {
            "timestamp": 1617897111,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Uploaded patch set 4: Patch Set 3 was rebased."
        },
        {
            "timestamp": 1617897219,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1617897317,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/15116/ : SUCCESS"
        },
        {
            "timestamp": 1619560653,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 4: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1621013599,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Uploaded patch set 5: Patch Set 4 was rebased."
        },
        {
            "timestamp": 1621013645,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1621013713,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1621013805,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/17325/ : SUCCESS"
        },
        {
            "timestamp": 1621015122,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1621262255,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1623351740,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Uploaded patch set 6: Patch Set 5 was rebased."
        },
        {
            "timestamp": 1623351861,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1623351971,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/19329/ : SUCCESS"
        },
        {
            "timestamp": 1623356857,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Patch Set 6: Code-Review+2"
        },
        {
            "timestamp": 1623856841,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Change has been successfully merged by Matthew Barth"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "c831ec4887a4aba2d8b9d90593668a6331fd64d8",
            "parents": [
                "a022fcf4027f2222827ad546ed7a54e2da9360a6"
            ],
            "ref": "refs/changes/62/41562/1",
            "uploader": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "createdOn": 1616618259,
            "author": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "control/json/manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "control/json/zone.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": 0
                },
                {
                    "file": "control/json/zone.hpp",
                    "type": "MODIFIED",
                    "insertions": 25,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 34,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "2a072b302e9190cb76538e7bd1167d8175fe3958",
            "parents": [
                "a022fcf4027f2222827ad546ed7a54e2da9360a6"
            ],
            "ref": "refs/changes/62/41562/2",
            "uploader": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "createdOn": 1616697439,
            "author": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "control/json/fan.cpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                },
                {
                    "file": "control/json/fan.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                },
                {
                    "file": "control/json/manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                },
                {
                    "file": "control/json/manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -5
                },
                {
                    "file": "control/json/zone.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -3
                },
                {
                    "file": "control/json/zone.hpp",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -2
                },
                {
                    "file": "control/json_parser.cpp",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -88
                },
                {
                    "file": "control/json_parser.hpp",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -10
                }
            ],
            "sizeInsertions": 37,
            "sizeDeletions": 113
        },
        {
            "number": 3,
            "revision": "42d6efb0500b29a3fe7cf4b465c3fff069a52d75",
            "parents": [
                "b9228197ec693cd24dd9a4ae76476476df6f0623"
            ],
            "ref": "refs/changes/62/41562/3",
            "uploader": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "createdOn": 1617202565,
            "author": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "control/json/fan.cpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                },
                {
                    "file": "control/json/fan.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                },
                {
                    "file": "control/json/manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                },
                {
                    "file": "control/json/manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -5
                },
                {
                    "file": "control/json/zone.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -3
                },
                {
                    "file": "control/json/zone.hpp",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -2
                },
                {
                    "file": "control/json_parser.cpp",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -88
                },
                {
                    "file": "control/json_parser.hpp",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -10
                }
            ],
            "sizeInsertions": 37,
            "sizeDeletions": 113
        },
        {
            "number": 4,
            "revision": "87beaccbaacd10d5d295218d9626938a499a5089",
            "parents": [
                "0cc8b556bdc25adb5219e1e9d695dc5b466ed77b"
            ],
            "ref": "refs/changes/62/41562/4",
            "uploader": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "createdOn": 1617897111,
            "author": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "control/json/manager.cpp",
                    "line": 70,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "util::SdBusPlus::getBus() returns a reference to a single bus object.  If you used that, you wouldn't have to pass it around everywhere."
                },
                {
                    "file": "control/json/manager.cpp",
                    "line": 70,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "That returns a reference to a new bus object though.\n\nI have a change that I want to make where I can extract the bus from the list of template args, just havent committed it yet."
                },
                {
                    "file": "control/json/manager.cpp",
                    "line": 70,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "Commit to extract the bus from the argument pack -> https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-fan-presence/+/43245"
                },
                {
                    "file": "control/json/manager.cpp",
                    "line": 70,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "Done\n\nhttps://gerrit.openbmc-project.xyz/c/openbmc/phosphor-fan-presence/+/43296"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "control/json/fan.cpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                },
                {
                    "file": "control/json/fan.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                },
                {
                    "file": "control/json/manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                },
                {
                    "file": "control/json/manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -5
                },
                {
                    "file": "control/json/zone.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -3
                },
                {
                    "file": "control/json/zone.hpp",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -2
                },
                {
                    "file": "control/json_parser.cpp",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -88
                },
                {
                    "file": "control/json_parser.hpp",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -10
                }
            ],
            "sizeInsertions": 37,
            "sizeDeletions": 113
        },
        {
            "number": 5,
            "revision": "bfb78a4a906678e62d8ec478cc9721e12b47421a",
            "parents": [
                "429618c13b808544f504492b62ec64af1fa1d9a5"
            ],
            "ref": "refs/changes/62/41562/5",
            "uploader": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "createdOn": 1621013599,
            "author": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "control/json/fan.cpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                },
                {
                    "file": "control/json/fan.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                },
                {
                    "file": "control/json/manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                },
                {
                    "file": "control/json/manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -5
                },
                {
                    "file": "control/json/zone.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -3
                },
                {
                    "file": "control/json/zone.hpp",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -2
                },
                {
                    "file": "control/json_parser.cpp",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -88
                },
                {
                    "file": "control/json_parser.hpp",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -10
                }
            ],
            "sizeInsertions": 37,
            "sizeDeletions": 113
        },
        {
            "number": 6,
            "revision": "603ef164096f37311337d3bab592822fd762dd64",
            "parents": [
                "d9cb63b6c34aa928a285bd9788ccc681640e9f6a"
            ],
            "ref": "refs/changes/62/41562/6",
            "uploader": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "createdOn": 1623351740,
            "author": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "control/json/fan.cpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                },
                {
                    "file": "control/json/fan.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                },
                {
                    "file": "control/json/manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                },
                {
                    "file": "control/json/manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -5
                },
                {
                    "file": "control/json/zone.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -3
                },
                {
                    "file": "control/json/zone.hpp",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -2
                },
                {
                    "file": "control/json_parser.cpp",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -88
                },
                {
                    "file": "control/json_parser.hpp",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -10
                }
            ],
            "sizeInsertions": 37,
            "sizeDeletions": 113
        }
    ]
}