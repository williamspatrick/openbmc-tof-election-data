{
    "project": "openbmc/dbus-sensors",
    "branch": "master",
    "id": "I8664400164298fa4a35f82b79e4bf417481aabb0",
    "number": 30965,
    "subject": "Add beep support for PSU",
    "owner": {
        "name": "Yong Li",
        "email": "yong.b.li@intel.com",
        "username": "yongli3"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/dbus-sensors/+/30965",
    "commitMessage": "Add beep support for PSU\n\nSpec requires that system will beep with pattern 1-5-1-4\nif there is any PSU failure or config error.\n\nTested:\nWith two PSUs, disconnect one AC cable, or unplug one PSU,\nto trigger the psu failure/config error, there is a beep.\n\nSigned-off-by: Yong Li <yong.b.li@linux.intel.com>\nChange-Id: I8664400164298fa4a35f82b79e4bf417481aabb0\n",
    "createdOn": 1585890470,
    "lastUpdated": 1629165388,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1585890470,
            "reviewer": {
                "name": "Yong Li",
                "email": "yong.b.li@intel.com",
                "username": "yongli3"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1585890503,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1585890523,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 1:\n\nBuild Started https://openpower.xyz/job/openbmc-repository-ci/46955/"
        },
        {
            "timestamp": 1585890613,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://openpower.xyz/job/openbmc-repository-ci/46955/ : SUCCESS"
        },
        {
            "timestamp": 1586244529,
            "reviewer": {
                "name": "Cheng C Yang",
                "email": "cheng.c.yang@linux.intel.com",
                "username": "cyang29"
            },
            "message": "Patch Set 1:\n\n(1 comment)\n\nSeems Ok to me."
        },
        {
            "timestamp": 1586244766,
            "reviewer": {
                "name": "Yong Li",
                "email": "yong.b.li@intel.com",
                "username": "yongli3"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1586247542,
            "reviewer": {
                "name": "Cheng C Yang",
                "email": "cheng.c.yang@linux.intel.com",
                "username": "cyang29"
            },
            "message": "Patch Set 1: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1586377733,
            "reviewer": {
                "name": "James Feist",
                "email": "james.feist@linux.intel.com",
                "username": "feistjj"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1586393040,
            "reviewer": {
                "name": "Yong Li",
                "email": "yong.b.li@intel.com",
                "username": "yongli3"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1586393065,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1586393090,
            "reviewer": {
                "name": "Yong Li",
                "email": "yong.b.li@intel.com",
                "username": "yongli3"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1586393092,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 2:\n\nBuild Started https://openpower.xyz/job/openbmc-repository-ci/47331/"
        },
        {
            "timestamp": 1586393182,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://openpower.xyz/job/openbmc-repository-ci/47331/ : SUCCESS"
        },
        {
            "timestamp": 1586551865,
            "reviewer": {
                "name": "James Feist",
                "email": "james.feist@linux.intel.com",
                "username": "feistjj"
            },
            "message": "Patch Set 2: Code-Review+2"
        },
        {
            "timestamp": 1586674183,
            "reviewer": {
                "name": "Yong Li",
                "email": "yong.b.li@intel.com",
                "username": "yongli3"
            },
            "message": "Change has been successfully rebased and submitted as 3046a0242cfde0cbf871f632c2c143b48ac30c71 by Yong Li"
        },
        {
            "timestamp": 1626102599,
            "reviewer": {
                "name": "Paul Fertser",
                "email": "fercerpav@gmail.com",
                "username": "paulfertser"
            },
            "message": "Patch Set 3:\n\nHello,\nCan you please tell what daemon should be providing \"xyz.openbmc_project.BeepCode\" and why no dependency on it was added? We're getting nasty messages in syslog because of this change:\n```\nJul 12 11:53:11 ptec-tp psusensor[17343]: beep error (ec = generic:113)\n```"
        },
        {
            "timestamp": 1629165388,
            "reviewer": {
                "name": "Yong Li",
                "email": "yong.b.li@intel.com",
                "username": "yongli3"
            },
            "message": "Patch Set 3:\n\n> Patch Set 3:\n> \n> Hello,\n> Can you please tell what daemon should be providing \"xyz.openbmc_project.BeepCode\" and why no dependency on it was added? We're getting nasty messages in syslog because of this change:\n> ```\n> Jul 12 11:53:11 ptec-tp psusensor[17343]: beep error (ec = generic:113)\n> ```\n\nThis package is: https://github.com/Intel-BMC/openbmc/tree/intel/meta-openbmc-mods/meta-common/recipes-phosphor/beepcode-mgr"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "db4ddbbffa363847c3d7dd4478278cca79a117b9",
            "parents": [
                "f3fd1915faa9a80a6d7baec7f0dcd6ac34753a6c"
            ],
            "ref": "refs/changes/65/30965/1",
            "uploader": {
                "name": "Yong Li",
                "email": "yong.b.li@intel.com",
                "username": "yongli3"
            },
            "createdOn": 1585890470,
            "author": {
                "name": "Yong Li",
                "email": "yong.b.li@intel.com",
                "username": "yongli3"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "include/PSUEvent.hpp",
                    "line": 57,
                    "reviewer": {
                        "name": "Cheng C Yang",
                        "email": "cheng.c.yang@linux.intel.com",
                        "username": "cyang29"
                    },
                    "message": "magic number"
                },
                {
                    "file": "include/PSUEvent.hpp",
                    "line": 57,
                    "reviewer": {
                        "name": "Yong Li",
                        "email": "yong.b.li@intel.com",
                        "username": "yongli3"
                    },
                    "message": "It is the beep code for PSU failure, defined in the spec with pattern 1-5-1-4"
                },
                {
                    "file": "include/PSUEvent.hpp",
                    "line": 57,
                    "reviewer": {
                        "name": "Cheng C Yang",
                        "email": "cheng.c.yang@linux.intel.com",
                        "username": "cyang29"
                    },
                    "message": "Done. I made a mistake."
                },
                {
                    "file": "src/PSUEvent.cpp",
                    "line": 313,
                    "reviewer": {
                        "name": "James Feist",
                        "email": "james.feist@linux.intel.com",
                        "username": "feistjj"
                    },
                    "message": "don't use endl, does unnecessary flush"
                },
                {
                    "file": "src/PSUEvent.cpp",
                    "line": 313,
                    "reviewer": {
                        "name": "Yong Li",
                        "email": "yong.b.li@intel.com",
                        "username": "yongli3"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "include/PSUEvent.hpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": -2
                },
                {
                    "file": "src/PSUEvent.cpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": -7
                },
                {
                    "file": "src/PSUSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 43,
            "sizeDeletions": 12
        },
        {
            "number": 2,
            "revision": "b75e6c5c890ca0cbced2cb4ae3197b02fe7a80cb",
            "parents": [
                "a2cec8ca2444777a15fa3d76295416dd1a01ef37"
            ],
            "ref": "refs/changes/65/30965/2",
            "uploader": {
                "name": "Yong Li",
                "email": "yong.b.li@intel.com",
                "username": "yongli3"
            },
            "createdOn": 1586393040,
            "author": {
                "name": "Yong Li",
                "email": "yong.b.li@intel.com",
                "username": "yongli3"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "include/PSUEvent.hpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": -2
                },
                {
                    "file": "src/PSUEvent.cpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": -7
                },
                {
                    "file": "src/PSUSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 43,
            "sizeDeletions": 12
        },
        {
            "number": 3,
            "revision": "3046a0242cfde0cbf871f632c2c143b48ac30c71",
            "parents": [
                "0a4c480e1b53f43c60f7aabf155a837df7c681cd"
            ],
            "ref": "refs/changes/65/30965/3",
            "uploader": {
                "name": "Yong Li",
                "email": "yong.b.li@intel.com",
                "username": "yongli3"
            },
            "createdOn": 1586674183,
            "author": {
                "name": "Yong Li",
                "email": "yong.b.li@intel.com",
                "username": "yongli3"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "include/PSUEvent.hpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": -2
                },
                {
                    "file": "src/PSUEvent.cpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": -7
                },
                {
                    "file": "src/PSUSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 43,
            "sizeDeletions": 12
        }
    ]
}