{
    "project": "openbmc/entity-manager",
    "branch": "master",
    "id": "I7139a51e9644dba857ff1c542cf127e723182375",
    "number": 40451,
    "subject": "entity-manager: allow non-numeric substitution for name",
    "owner": {
        "name": "Andrei Kartashev",
        "email": "a.kartashev@yadro.com",
        "username": "alatarum"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/entity-manager/+/40451",
    "commitMessage": "entity-manager: allow non-numeric substitution for name\n\nCurrently EntityManager crashes if it can't parse template substitution\nas numeric variable. This prevent to use test string substitutions there.\n\nTested: use string for template substitution in configuration name:\n{\n    \"Name\": \"$name\",\n    \"Probe\": [\n        \"com.yadro.HWManager.Fan({'part_number': 'ASMFAN781101A'})\"\n    ],\n    .....\n}\nWhere name is string:\ncom.yadro.HWManager.Fan             interface -         -                        -\n.name                               property  s         \"Sys_Fan1\"               emits-change writable\n.part_number                        property  s         \"ASMFAN781102A\"          emits-change writable\n\nChange-Id: I7139a51e9644dba857ff1c542cf127e723182375\nSigned-off-by: Igor Kononenko <i.kononenko@yadro.com>\nSigned-off-by: Andrei Kartashev <a.kartashev@yadro.com>\n",
    "createdOn": 1612906206,
    "lastUpdated": 1619104409,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1612906206,
            "reviewer": {
                "name": "Andrei Kartashev",
                "email": "a.kartashev@yadro.com",
                "username": "alatarum"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1612906223,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1612906537,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/12199/ : SUCCESS"
        },
        {
            "timestamp": 1612956823,
            "reviewer": {
                "name": "Alexander Filippov",
                "email": "a.filippov@yadro.com",
                "username": "nest1ing"
            },
            "message": "Patch Set 1:\n\n(2 comments)"
        },
        {
            "timestamp": 1616780548,
            "reviewer": {
                "name": "Andrei Kartashev",
                "email": "a.kartashev@yadro.com",
                "username": "alatarum"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1616780570,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1616780578,
            "reviewer": {
                "name": "Andrei Kartashev",
                "email": "a.kartashev@yadro.com",
                "username": "alatarum"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1616780757,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/14438/ : SUCCESS"
        },
        {
            "timestamp": 1616782000,
            "reviewer": {
                "name": "Andrei Kartashev",
                "email": "a.kartashev@yadro.com",
                "username": "alatarum"
            },
            "message": "Uploaded patch set 3: New patch set was added with same tree, parent, and commit message as Patch Set 2."
        },
        {
            "timestamp": 1616782014,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1616782022,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1616782340,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3:\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/14439/ : SUCCESS"
        },
        {
            "timestamp": 1616782373,
            "reviewer": {
                "name": "Alexander Filippov",
                "email": "a.filippov@yadro.com",
                "username": "nest1ing"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1616965328,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1617363362,
            "reviewer": {
                "name": "Andrei Kartashev",
                "email": "a.kartashev@yadro.com",
                "username": "alatarum"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1617363380,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1617363576,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/14809/ : SUCCESS"
        },
        {
            "timestamp": 1617363710,
            "reviewer": {
                "name": "Andrei Kartashev",
                "email": "a.kartashev@yadro.com",
                "username": "alatarum"
            },
            "message": "Patch Set 4:\n\n(2 comments)"
        },
        {
            "timestamp": 1617368154,
            "reviewer": {
                "name": "Alexander Amelkin",
                "email": "a.amelkin@yadro.com",
                "username": "AlexanderAmelkin"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1617369086,
            "reviewer": {
                "name": "Alexander Filippov",
                "email": "a.filippov@yadro.com",
                "username": "nest1ing"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1619084503,
            "reviewer": {
                "name": "Andrei Kartashev",
                "email": "a.kartashev@yadro.com",
                "username": "alatarum"
            },
            "message": "Patch Set 4:\n\nping"
        },
        {
            "timestamp": 1619104406,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 4: Code-Review+2"
        },
        {
            "timestamp": 1619104409,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Change has been successfully rebased and submitted as 9fd87e54f5a65f3103b996114e052470dd1afd03 by Ed Tanous"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "71293c2c5eae18927df9163b5e850000940c13fb",
            "parents": [
                "35fec18555df185754b7b4b5093c77a718899174"
            ],
            "ref": "refs/changes/51/40451/1",
            "uploader": {
                "name": "Andrei Kartashev",
                "email": "a.kartashev@yadro.com",
                "username": "alatarum"
            },
            "createdOn": 1612906206,
            "author": {
                "name": "Igor Kononenko",
                "email": "i.kononenko@yadro.com",
                "username": "ikmsk10"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "src/EntityManager.cpp",
                    "line": 1347,
                    "reviewer": {
                        "name": "Alexander Filippov",
                        "email": "a.filippov@yadro.com",
                        "username": "nest1ing"
                    },
                    "message": "Probably default value should be here."
                },
                {
                    "file": "src/EntityManager.cpp",
                    "line": 1347,
                    "reviewer": {
                        "name": "Andrei Kartashev",
                        "email": "a.kartashev@yadro.com",
                        "username": "alatarum"
                    },
                    "message": "Done"
                },
                {
                    "file": "src/EntityManager.cpp",
                    "line": 1354,
                    "reviewer": {
                        "name": "Alexander Filippov",
                        "email": "a.filippov@yadro.com",
                        "username": "nest1ing"
                    },
                    "message": "unused variable"
                },
                {
                    "file": "src/EntityManager.cpp",
                    "line": 1354,
                    "reviewer": {
                        "name": "Andrei Kartashev",
                        "email": "a.kartashev@yadro.com",
                        "username": "alatarum"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "src/EntityManager.cpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 11,
            "sizeDeletions": 4
        },
        {
            "number": 2,
            "revision": "8c64ea32910c28d96ed618585a01652f1327cf54",
            "parents": [
                "00ce731f9fb851ddd05d3d4d912ec9de489ee60c"
            ],
            "ref": "refs/changes/51/40451/2",
            "uploader": {
                "name": "Andrei Kartashev",
                "email": "a.kartashev@yadro.com",
                "username": "alatarum"
            },
            "createdOn": 1616780548,
            "author": {
                "name": "Igor Kononenko",
                "email": "i.kononenko@yadro.com",
                "username": "ikmsk10"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "src/EntityManager.cpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 11,
            "sizeDeletions": 4
        },
        {
            "number": 3,
            "revision": "80d069c369fb4193b2110b45c1b3dd5dc82b6e7f",
            "parents": [
                "26c09c231d559b194643aaa3cc040f8448ac2e5e"
            ],
            "ref": "refs/changes/51/40451/3",
            "uploader": {
                "name": "Andrei Kartashev",
                "email": "a.kartashev@yadro.com",
                "username": "alatarum"
            },
            "createdOn": 1616782000,
            "author": {
                "name": "Igor Kononenko",
                "email": "i.kononenko@yadro.com",
                "username": "ikmsk10"
            },
            "kind": "NO_CHANGE",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "obviously crashing isn't good, but can you give an example of where someone would want to use a non-numeric name substitution?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "Andrei Kartashev",
                        "email": "a.kartashev@yadro.com",
                        "username": "alatarum"
                    },
                    "message": "We use it e.g. in Fans configuration, where we can have either \"Sys FanN\" or \"CPUn Fan\""
                },
                {
                    "file": "src/EntityManager.cpp",
                    "line": 1373,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Can you use std::from_chars here, it seems like a better fit, rather than throwing and catching the expcetion."
                },
                {
                    "file": "src/EntityManager.cpp",
                    "line": 1373,
                    "reviewer": {
                        "name": "Andrei Kartashev",
                        "email": "a.kartashev@yadro.com",
                        "username": "alatarum"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "src/EntityManager.cpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 11,
            "sizeDeletions": 4
        },
        {
            "number": 4,
            "revision": "a2cbfa91193f318460fef507177c67bfceb406f7",
            "parents": [
                "97353ed26200a7d1c29d8e85983fb7d9bd7b94aa"
            ],
            "ref": "refs/changes/51/40451/4",
            "uploader": {
                "name": "Andrei Kartashev",
                "email": "a.kartashev@yadro.com",
                "username": "alatarum"
            },
            "createdOn": 1617363362,
            "author": {
                "name": "Igor Kononenko",
                "email": "i.kononenko@yadro.com",
                "username": "ikmsk10"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 27,
                    "deletions": 0
                },
                {
                    "file": "src/EntityManager.cpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 10,
            "sizeDeletions": 4
        },
        {
            "number": 5,
            "revision": "9fd87e54f5a65f3103b996114e052470dd1afd03",
            "parents": [
                "09e177fb1b10f49527b2db550197b7b63aed37e1"
            ],
            "ref": "refs/changes/51/40451/5",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1619104409,
            "author": {
                "name": "Igor Kononenko",
                "email": "i.kononenko@yadro.com",
                "username": "ikmsk10"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 27,
                    "deletions": 0
                },
                {
                    "file": "src/EntityManager.cpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 10,
            "sizeDeletions": 4
        }
    ]
}