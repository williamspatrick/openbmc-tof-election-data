{
    "project": "openbmc/phosphor-bmc-code-mgmt",
    "branch": "master",
    "id": "I0e658b9dd90ea405a9c8292f29183ab516a0fa31",
    "number": 39118,
    "subject": "Add support for tarball contents signature",
    "owner": {
        "name": "George Liu",
        "email": "liuxiwei@inspur.com",
        "username": "lxwinspur"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-bmc-code-mgmt/+/39118",
    "commitMessage": "Add support for tarball contents signature\n\nCurrently only supported to allow optional image files in BMC tarball.\nIn order to ensure that the contents of the tarball are the expected\nones as a full package, an additional signature file has been created\nfor all the signature files in the tarball,\n(ex: image-full.sig = hash(file1.sig + file2.sig + file3.sig...)).\nNeed to check the existence of the file and the signature verification\npassed.\n\nAlso, added unit test case for the mergeFiles method.\n\nTested:\nEnable `WANT_SIGNATURE_FULL_VERIFY` and ran the following command:\n\ncurl -k -H \"X-Auth-Token: $token\" -H \"Content-Type: application/octet-stream\"\n-X POST -T obmc-phosphor-image-fp5280g2.static.mtd.tar\n\nhttps://${bmc}/redfish/v1/UpdateService\n{\n  \"@odata.id\": \"/redfish/v1/TaskService/Tasks/1\",\n  \"@odata.type\": \"#Task.v1_4_3.Task\",\n  \"Id\": \"1\",\n  \"TaskState\": \"Running\",\n  \"TaskStatus\": \"OK\"\n}\n\nAnd Log output:\n`Successfully completed Signature vaildation.`\n\nSigned-off-by: George Liu <liuxiwei@inspur.com>\nChange-Id: I0e658b9dd90ea405a9c8292f29183ab516a0fa31\n",
    "createdOn": 1608169042,
    "lastUpdated": 1611261113,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1608169042,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1608169055,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1608169183,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/9982/ : SUCCESS"
        },
        {
            "timestamp": 1608186550,
            "reviewer": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1608188867,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1609884688,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1609885133,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1609887495,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1610000724,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1610000735,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1610000845,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/10590/ : SUCCESS"
        },
        {
            "timestamp": 1610000943,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1610000955,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1610001061,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/10591/ : SUCCESS"
        },
        {
            "timestamp": 1610001075,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1610056822,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 3:\n\n(2 comments)\n\nLooking good George."
        },
        {
            "timestamp": 1610328660,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1610328674,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1610328720,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 4:\n\n(2 comments)"
        },
        {
            "timestamp": 1610328781,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/10700/ : SUCCESS"
        },
        {
            "timestamp": 1610403271,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 4:\n\n(3 comments)"
        },
        {
            "timestamp": 1610441171,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1610441183,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1610441205,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 5:\n\n(3 comments)"
        },
        {
            "timestamp": 1610441285,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/10802/ : SUCCESS"
        },
        {
            "timestamp": 1610486203,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 5:\n\n(2 comments)"
        },
        {
            "timestamp": 1610522068,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 6."
        },
        {
            "timestamp": 1610522089,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1610522195,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/10878/ : SUCCESS"
        },
        {
            "timestamp": 1610522216,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 6:\n\n(2 comments)"
        },
        {
            "timestamp": 1610571506,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 6: Code-Review+1"
        },
        {
            "timestamp": 1610609924,
            "reviewer": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "message": "Patch Set 6:\n\nThis works for the tarball that contains the separated images.\nBut if we try to update with the static.mtd.all.tar, this function will probably return false.\n\nBtw, the signature check of static.mtd.all.tar is not implemented in upstream yet, we will send a patch for this.\n\nI think this change shall handle the case (e.g. skip the check if the tarball is static.mtd.all.tar)"
        },
        {
            "timestamp": 1610612538,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 6:\n\n> Patch Set 6:\n> \n> This works for the tarball that contains the separated images.\n> But if we try to update with the static.mtd.all.tar, this function will probably return false.\n> \nRight.\nIt only supports static.mtd.tar now.\nhttps://github.com/openbmc/phosphor-bmc-code-mgmt/blob/master/image_verify.cpp#L104-L122.\n\n> Btw, the signature check of static.mtd.all.tar is not implemented in upstream yet, we will send a patch for this.\nI think we have implemented in upstream.\nhttps://gerrit.openbmc-project.xyz/c/openbmc/meta-phosphor/+/39036/6/classes/image_types_phosphor.bbclass#350\n`image-full.sig` is already included in static.mtd.all.tar\n\n> \n> I think this change shall handle the case (e.g. skip the check if the tarball is static.mtd.all.tar)\nSince the original bmc-code-mgmt has not implemented the signature check of static.all.tar yet, I think it can be implemented in a new commit.\n@Lei, @Adriana What do you think?"
        },
        {
            "timestamp": 1610612898,
            "reviewer": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "message": "Patch Set 6:\n\n> Patch Set 6:\n> \n> This works for the tarball that contains the separated images.\n> But if we try to update with the static.mtd.all.tar, this function will probably return false.\n> \n> Btw, the signature check of static.mtd.all.tar is not implemented in upstream yet, we will send a patch for this.\n> \n> I think this change shall handle the case (e.g. skip the check if the tarball is static.mtd.all.tar)\n\nhttps://gerrit.openbmc-project.xyz/c/openbmc/phosphor-bmc-code-mgmt/+/39702 is submitted for static.mtd.all.tar case"
        },
        {
            "timestamp": 1610613908,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 7: Patch Set 6 was rebased."
        },
        {
            "timestamp": 1610613919,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1610614021,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/10926/ : SUCCESS"
        },
        {
            "timestamp": 1610623098,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 8."
        },
        {
            "timestamp": 1610623109,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1610623216,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/10928/ : SUCCESS"
        },
        {
            "timestamp": 1610664931,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1610673310,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 9."
        },
        {
            "timestamp": 1610673322,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1610673430,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/10956/ : SUCCESS"
        },
        {
            "timestamp": 1610673721,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 9:\n\n(1 comment)"
        },
        {
            "timestamp": 1610693112,
            "reviewer": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "message": "Patch Set 9:\n\n(2 comments)"
        },
        {
            "timestamp": 1610703296,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 10."
        },
        {
            "timestamp": 1610703318,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 10: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1610703409,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 10:\n\n(2 comments)"
        },
        {
            "timestamp": 1610703429,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 10: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/10965/ : SUCCESS"
        },
        {
            "timestamp": 1610704372,
            "reviewer": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "message": "Patch Set 10:\n\n(3 comments)"
        },
        {
            "timestamp": 1610940944,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 11."
        },
        {
            "timestamp": 1610940957,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 11: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1610940975,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 10:\n\n(3 comments)"
        },
        {
            "timestamp": 1610941141,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 11: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/11009/ : SUCCESS"
        },
        {
            "timestamp": 1610946233,
            "reviewer": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "message": "Patch Set 11:\n\n(1 comment)"
        },
        {
            "timestamp": 1610951394,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 12."
        },
        {
            "timestamp": 1610951413,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 12: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1610951416,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 12:\n\n(1 comment)"
        },
        {
            "timestamp": 1610951522,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 12: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/11020/ : SUCCESS"
        },
        {
            "timestamp": 1610953004,
            "reviewer": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "message": "Patch Set 12: Code-Review+1"
        },
        {
            "timestamp": 1611076427,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 12: Code-Review+1"
        },
        {
            "timestamp": 1611077668,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 12: Code-Review+2"
        },
        {
            "timestamp": 1611077702,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Change has been successfully merged by Adriana Kobylak"
        },
        {
            "timestamp": 1611247507,
            "reviewer": {
                "name": "Joseph Reynolds",
                "email": "joseph-reynolds@charter.net",
                "username": "joseph-reynolds"
            },
            "message": "Patch Set 12:\n\nWas there a test case that swapped out one of the signed component pieces, then tried to install the resulting image, and verified the signature validation step failed?"
        },
        {
            "timestamp": 1611261113,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 12:\n\n> Patch Set 12:\n> \n> Was there a test case that swapped out one of the signed component pieces, then tried to install the resulting image, and verified the signature validation step failed?\n\nGood point, I just tried and failed as expected. I copied the image-rofs and image-rofs.sig from a different tarball, and the 'file' signature passed, but the 'full signature' failed, debug logs:\n\nJan 22 01:16:32 localhost phosphor-image-updater[368]: verifyFile: 1: /tmp/images/87edb22d/MANIFEST: /tmp/images/87edb22d/MANIFEST.sig\nJan 22 01:16:32 localhost phosphor-image-updater[368]: verifyFile: 1: /tmp/images/87edb22d/publickey: /tmp/images/87edb22d/publickey.sig\nJan 22 01:16:33 localhost phosphor-image-updater[368]: verifyFile: 1: /tmp/images/87edb22d/image-kernel: /tmp/images/87edb22d/image-kernel.sig\nJan 22 01:16:33 localhost phosphor-image-updater[368]: verifyFile: 1: /tmp/images/87edb22d/image-rofs: /tmp/images/87edb22d/image-rofs.sig\nJan 22 01:16:34 localhost phosphor-image-updater[368]: verifyFile: 1: /tmp/images/87edb22d/image-rwfs: /tmp/images/87edb22d/image-rwfs.sig\nJan 22 01:16:34 localhost phosphor-image-updater[368]: verifyFile: 1: /tmp/images/87edb22d/image-u-boot: /tmp/images/87edb22d/image-u-boot.sig\nJan 22 01:16:36 localhost phosphor-image-updater[368]: verifyFile: 1: /tmp/images/87edb22d/image-hostfw: /tmp/images/87edb22d/image-hostfw.sig\nJan 22 01:16:36 localhost phosphor-image-updater[368]: verifyFile: 0: /tmp/image-full: /tmp/images/87edb22d/image-full.sig\nJan 22 01:16:36 localhost phosphor-image-updater[368]: EVP_DigestVerifyFinal:Signature validation failed\nJan 22 01:16:36 localhost phosphor-image-updater[368]: Image full file Signature Validation failed"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "a8d9638da0ba80d6a822282235b4604b91dc8181",
            "parents": [
                "837de88135a12b43c8fae84937e34d84ab462807"
            ],
            "ref": "refs/changes/18/39118/1",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1608169042,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "Lei YU",
                        "email": "yulei.sh@bytedance.com",
                        "username": "mine260309"
                    },
                    "message": "I do not understand why it is needed.\nIs it to prevent the user who removes part of the images from the tarball?\nIf yes, one could just remove the image-full.sig becase the code does not check this signature if it does not exist."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "the issue is: https://github.com/ibm-openbmc/dev/issues/2798"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "Hi Lei. Right, the concern is not only that the user can remove parts of the image, but also a user can mix parts of the image. For example a tarball can be created with the kernel + kernel.sig from another package and the user would not know that their system is now running with a kernel level different than they thought they put on."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "For the enforcement, I was mentioning to George in that issue that we could create a new config option to enforce that the file exists. Therefore users that want to check this new image signature can enable the new config, and in the code we use that config to check if we should fail if the image signature file doesn't exist."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Ack"
                },
                {
                    "file": "image_verify.cpp",
                    "line": 149,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "Instead of verifying a file, we'll need to create it using the .sig files that came in the tarball, in order to ensure the contents of the tarball are the ones that got packaged when the image signature file was created."
                },
                {
                    "file": "image_verify.cpp",
                    "line": 149,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Ack"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "image_verify.cpp",
                    "type": "MODIFIED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "meson_options.txt",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 23,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "6df3d6ea14fddd53e5265e93da6120a863f162cd",
            "parents": [
                "837de88135a12b43c8fae84937e34d84ab462807"
            ],
            "ref": "refs/changes/18/39118/2",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1610000724,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "image_verify.cpp",
                    "type": "MODIFIED",
                    "insertions": 47,
                    "deletions": 0
                },
                {
                    "file": "image_verify.hpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                },
                {
                    "file": "meson_options.txt",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 65,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "63730de8975717b3f9aa22d1aeac5e8ec6c35a42",
            "parents": [
                "837de88135a12b43c8fae84937e34d84ab462807"
            ],
            "ref": "refs/changes/18/39118/3",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1610000943,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "image_verify.cpp",
                    "line": 93,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "We'll want to build this list because image-hostfw for example is optional and not always included in the tarball.\nWe already have the signature files (variable \"sigFile\") from the verify() function below. Let's use those to build a list that we can then pass to this new function, something like:\n  in verify():\n  fullImagesSig += sigFile (syntax not correct, just the idea that we want to add all the sigFiles to a variable)\n  verifyFullImage(fullImageSig);\n\nThen on this verifyFullImage function we'd sort the fullImagesSig in alphabetical order to create the image-full file."
                },
                {
                    "file": "image_verify.cpp",
                    "line": 93,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "> We'll want to build this list because image-hostfw for example is optional and not always included in the tarball.\n\nRight.\nBut it will not be added to the `image-full` file when `image-hostfw` does not exist, refer to L:106-109.\nSo, I think this logic makes sense, What do you think? \ud83d\ude0a"
                },
                {
                    "file": "image_verify.cpp",
                    "line": 93,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "Ah I see, the open does not fail if the file doesn't exist. Yeah this logic works, since the signature validation would fail."
                },
                {
                    "file": "image_verify.cpp",
                    "line": 93,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "+1"
                },
                {
                    "file": "meson_options.txt",
                    "line": 76,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "No need for this option since it doesn't matter what the name of the temporary full-image file is that holds the signatures to be decrypted, so we don't need to give the user this option."
                },
                {
                    "file": "meson_options.txt",
                    "line": 76,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "image_verify.cpp",
                    "type": "MODIFIED",
                    "insertions": 47,
                    "deletions": 0
                },
                {
                    "file": "image_verify.hpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                },
                {
                    "file": "meson_options.txt",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 65,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "1686ff649e0586f41ff55b23a89c75ae3e2045b7",
            "parents": [
                "837de88135a12b43c8fae84937e34d84ab462807"
            ],
            "ref": "refs/changes/18/39118/4",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1610328660,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "image_verify.cpp",
                    "line": 105,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "Need to specify the full path to the image files, otherwise the app won't find them. The path is already populated in the constructor via the imageDirPath  variable, so something like: \"auto imagePath = fs::path(imageDirPath) / image;\" then you can pass imagePath to the open() function."
                },
                {
                    "file": "image_verify.cpp",
                    "line": 105,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                },
                {
                    "file": "image_verify.cpp",
                    "line": 115,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "The full-image signature file is located in the \"imageDirPath\" directory, not under /tmp."
                },
                {
                    "file": "image_verify.cpp",
                    "line": 115,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "image_verify.cpp",
                    "type": "MODIFIED",
                    "insertions": 46,
                    "deletions": 0
                },
                {
                    "file": "image_verify.hpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "meson_options.txt",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 57,
            "sizeDeletions": 0
        },
        {
            "number": 5,
            "revision": "092eacdb6536ff5c84b199f8d1bdde8577ce2f3d",
            "parents": [
                "837de88135a12b43c8fae84937e34d84ab462807"
            ],
            "ref": "refs/changes/18/39118/5",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1610441171,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 16,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "I tried testing this but getting an error even though the image-full file is the same one as the one built during the build:\nan 12 20:57:18 bmc phosphor-image-updater[6846]: EVP_DigestVerifyFinal:Signature validation failed\nJan 12 20:57:18 bmc phosphor-image-updater[6846]: Image full file Signature Validation failed\n\nCould you see why the validation may be failing? You can then add to the commit msg \"Tested:\" and a summary of your results. Thanks."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 16,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Sorry, I tested it and found a bug\nFixed it and test passed."
                },
                {
                    "file": "image_verify.cpp",
                    "line": 107,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "This needs to open the new \"imagePath\" instead of \"image\"."
                },
                {
                    "file": "image_verify.cpp",
                    "line": 107,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "image_verify.cpp",
                    "type": "MODIFIED",
                    "insertions": 49,
                    "deletions": 0
                },
                {
                    "file": "image_verify.hpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "meson_options.txt",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 60,
            "sizeDeletions": 0
        },
        {
            "number": 6,
            "revision": "f5f390990dd4e219655179ec7b8ee0380f20aebc",
            "parents": [
                "837de88135a12b43c8fae84937e34d84ab462807"
            ],
            "ref": "refs/changes/18/39118/6",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1610522068,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 36,
                    "deletions": 0
                },
                {
                    "file": "image_verify.cpp",
                    "type": "MODIFIED",
                    "insertions": 50,
                    "deletions": 0
                },
                {
                    "file": "image_verify.hpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "meson_options.txt",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 61,
            "sizeDeletions": 0
        },
        {
            "number": 7,
            "revision": "05b8b837a0f699b817270fa665e1d27c0e2e2bae",
            "parents": [
                "574f94bcf122246b991c8b75cf8f314a2f844bbb"
            ],
            "ref": "refs/changes/18/39118/7",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1610613908,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 36,
                    "deletions": 0
                },
                {
                    "file": "image_verify.cpp",
                    "type": "MODIFIED",
                    "insertions": 50,
                    "deletions": 0
                },
                {
                    "file": "image_verify.hpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "meson_options.txt",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 61,
            "sizeDeletions": 0
        },
        {
            "number": 8,
            "revision": "691c8fb78ddd0f3d3cbaa1ed8708c19273fac1e8",
            "parents": [
                "574f94bcf122246b991c8b75cf8f314a2f844bbb"
            ],
            "ref": "refs/changes/18/39118/8",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1610623098,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "image_verify.cpp",
                    "line": 114,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "Seems with these latest changes, the /tmp/image-full is empty. Could you check what the issue may be? Thanks."
                },
                {
                    "file": "image_verify.cpp",
                    "line": 114,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Yes, Need to check if the file exist.\nDone"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 36,
                    "deletions": 0
                },
                {
                    "file": "image_verify.cpp",
                    "type": "MODIFIED",
                    "insertions": 53,
                    "deletions": 0
                },
                {
                    "file": "image_verify.hpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "meson_options.txt",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 64,
            "sizeDeletions": 0
        },
        {
            "number": 9,
            "revision": "d7b93749dfeab3c86a4783f7e2d8291d02067cd4",
            "parents": [
                "574f94bcf122246b991c8b75cf8f314a2f844bbb"
            ],
            "ref": "refs/changes/18/39118/9",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1610673310,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "image_verify.cpp",
                    "line": 100,
                    "reviewer": {
                        "name": "Lei YU",
                        "email": "yulei.sh@bytedance.com",
                        "username": "mine260309"
                    },
                    "message": "It could be better to split this part into a separated function, and add unit test cases for the \"merging files\" function."
                },
                {
                    "file": "image_verify.cpp",
                    "line": 100,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                },
                {
                    "file": "image_verify.cpp",
                    "line": 134,
                    "reviewer": {
                        "name": "Lei YU",
                        "email": "yulei.sh@bytedance.com",
                        "username": "mine260309"
                    },
                    "message": "This should be wrong, it should be fs::remove"
                },
                {
                    "file": "image_verify.cpp",
                    "line": 134,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 36,
                    "deletions": 0
                },
                {
                    "file": "image_verify.cpp",
                    "type": "MODIFIED",
                    "insertions": 58,
                    "deletions": 0
                },
                {
                    "file": "image_verify.hpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "meson_options.txt",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 69,
            "sizeDeletions": 0
        },
        {
            "number": 10,
            "revision": "d3dbb9b527585b8c3c6f52073e0107ee1384107d",
            "parents": [
                "574f94bcf122246b991c8b75cf8f314a2f844bbb"
            ],
            "ref": "refs/changes/18/39118/10",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1610703296,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "image_verify.cpp",
                    "line": 93,
                    "reviewer": {
                        "name": "Lei YU",
                        "email": "yulei.sh@bytedance.com",
                        "username": "mine260309"
                    },
                    "message": "Possibly make this fs::path?"
                },
                {
                    "file": "image_verify.cpp",
                    "line": 93,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Since I used ifstream::open, I think `std::string` should be used.\nhttps://gerrit.openbmc-project.xyz/c/openbmc/phosphor-bmc-code-mgmt/+/39118/10/utils.cpp#50"
                },
                {
                    "file": "test/utest.cpp",
                    "line": 270,
                    "reviewer": {
                        "name": "Lei YU",
                        "email": "yulei.sh@bytedance.com",
                        "username": "mine260309"
                    },
                    "message": "Please use fs::temp_directory_path() to get the temp dir."
                },
                {
                    "file": "test/utest.cpp",
                    "line": 270,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                },
                {
                    "file": "test/utest.cpp",
                    "line": 289,
                    "reviewer": {
                        "name": "Lei YU",
                        "email": "yulei.sh@bytedance.com",
                        "username": "mine260309"
                    },
                    "message": "Then you could do something like this:\n\n  auto tmpPath = fs::temp_directory_path();\n  tmpDir = (tmpPath / \"test_XXXXXX\");\n  if (!mkdtemp(tmpDir.data()))\n  {\n    throw ...\n  }\n\nWhere tmpDir is the test class's member.\n\nAnd when the test is done, remove the folder without removing the files one-by-one."
                },
                {
                    "file": "test/utest.cpp",
                    "line": 289,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 38,
                    "deletions": 0
                },
                {
                    "file": "image_verify.cpp",
                    "type": "MODIFIED",
                    "insertions": 42,
                    "deletions": 0
                },
                {
                    "file": "image_verify.hpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                },
                {
                    "file": "meson_options.txt",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                },
                {
                    "file": "test/utest.cpp",
                    "type": "MODIFIED",
                    "insertions": 65,
                    "deletions": 0
                },
                {
                    "file": "utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "utils.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 154,
            "sizeDeletions": 0
        },
        {
            "number": 11,
            "revision": "71c44ea9b64307ef6f1d18db10b4f5bda2253025",
            "parents": [
                "574f94bcf122246b991c8b75cf8f314a2f844bbb"
            ],
            "ref": "refs/changes/18/39118/11",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1610940944,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "test/utest.cpp",
                    "line": 321,
                    "reviewer": {
                        "name": "Lei YU",
                        "email": "yulei.sh@bytedance.com",
                        "username": "mine260309"
                    },
                    "message": "Not only file size, you should check that the content of dstFile and retFile shall be the same.\n\nAnd possibly add an extra case that contains several blank lines to make sure the merged file's content is expected."
                },
                {
                    "file": "test/utest.cpp",
                    "line": 321,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 38,
                    "deletions": 0
                },
                {
                    "file": "image_verify.cpp",
                    "type": "MODIFIED",
                    "insertions": 42,
                    "deletions": 0
                },
                {
                    "file": "image_verify.hpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                },
                {
                    "file": "meson_options.txt",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                },
                {
                    "file": "test/utest.cpp",
                    "type": "MODIFIED",
                    "insertions": 57,
                    "deletions": 0
                },
                {
                    "file": "utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "utils.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 146,
            "sizeDeletions": 0
        },
        {
            "number": 12,
            "revision": "0a06e97ff30ba125f13bfcbe2adaaeb1e5333a68",
            "parents": [
                "574f94bcf122246b991c8b75cf8f314a2f844bbb"
            ],
            "ref": "refs/changes/18/39118/12",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1610951394,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 38,
                    "deletions": 0
                },
                {
                    "file": "image_verify.cpp",
                    "type": "MODIFIED",
                    "insertions": 42,
                    "deletions": 0
                },
                {
                    "file": "image_verify.hpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                },
                {
                    "file": "meson_options.txt",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                },
                {
                    "file": "test/utest.cpp",
                    "type": "MODIFIED",
                    "insertions": 71,
                    "deletions": 0
                },
                {
                    "file": "utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "utils.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 160,
            "sizeDeletions": 0
        }
    ]
}