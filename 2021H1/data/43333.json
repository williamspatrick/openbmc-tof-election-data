{
    "project": "openbmc/phosphor-logging",
    "branch": "master",
    "id": "I6a45e0450928e49c8789cc2f93baad03cccf90c7",
    "number": 43333,
    "subject": "Add system IM keyword to PEL userdata0 section",
    "owner": {
        "name": "Ben Tyner",
        "email": "ben.tyner@ibm.com",
        "username": "bentyner"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-logging/+/43333",
    "commitMessage": "Add system IM keyword to PEL userdata0 section\n\nRead the system IM keyword via dbus and add it to the PEL userdata0 section.\n\nSigned-off-by: Ben Tyner <ben.tyner@ibm.com>\nChange-Id: I6a45e0450928e49c8789cc2f93baad03cccf90c7\n",
    "createdOn": 1621359668,
    "lastUpdated": 1621952820,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1621359668,
            "reviewer": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1621359684,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1621360342,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/17531/ : SUCCESS"
        },
        {
            "timestamp": 1621363513,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1621605125,
            "reviewer": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1621605649,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1621607222,
            "reviewer": {
                "name": "Derek Howard",
                "email": "derekh@us.ibm.com",
                "username": "derekhoward55"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1621615901,
            "reviewer": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1621615934,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1621616143,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/17828/ : FAILURE"
        },
        {
            "timestamp": 1621619851,
            "reviewer": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "message": "Patch Set 2:\n\nNot sure why CI failed. Does not look like my changes."
        },
        {
            "timestamp": 1621622092,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 2:\n\n(1 comment)\n\n> Patch Set 2:\n> \n> Not sure why CI failed. Does not look like my changes.\n\nI just merged a fix for that, so if you rebase on master you should be good."
        },
        {
            "timestamp": 1621625517,
            "reviewer": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "message": "Patch Set 3: Patch Set 2 was rebased"
        },
        {
            "timestamp": 1621625536,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1621626373,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/17839/ : SUCCESS"
        },
        {
            "timestamp": 1621626869,
            "reviewer": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "message": "Patch Set 4: Published edit on patch set 3."
        },
        {
            "timestamp": 1621626886,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1621627157,
            "reviewer": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1621627556,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/17843/ : SUCCESS"
        },
        {
            "timestamp": 1621627680,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1621858114,
            "reviewer": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1621863593,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1621893710,
            "reviewer": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1621893724,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1621893937,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/17947/ : FAILURE"
        },
        {
            "timestamp": 1621894356,
            "reviewer": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "message": "Patch Set 6: Patch Set 5 was rebased"
        },
        {
            "timestamp": 1621894369,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1621894416,
            "reviewer": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1621895028,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/17948/ : SUCCESS"
        },
        {
            "timestamp": 1621950494,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 6: Code-Review+2"
        },
        {
            "timestamp": 1621952575,
            "reviewer": {
                "name": "Derek Howard",
                "email": "derekh@us.ibm.com",
                "username": "derekhoward55"
            },
            "message": "Patch Set 6: Code-Review+1"
        },
        {
            "timestamp": 1621952820,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Change has been successfully merged by Matt Spinler"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "61423e8dffd309b1462efea31ca3f7e5c4830633",
            "parents": [
                "cad16201f83a1a91b29781cff26e9e09158cae0e"
            ],
            "ref": "refs/changes/33/43333/1",
            "uploader": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "createdOn": 1621359668,
            "author": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "extensions/openpower-pels/pel.cpp",
                    "line": 633,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "I think it would be useful to store the value even if it is wrong, since it would be good for debug.  Something like the following maybe:\n\nstd::string value{\"0x\"};\nstd::for_each(keyword.begin(), keyword.end(), [] (const auto& byte)\n{\n   value += fmt::format(\"{0x:}\", byte);\n})\n\n\nAll the format documentation is at https://fmt.dev/latest/syntax.html.  Not sure if the {0x:} on a value of 0 would convert to a \"0\" or \"00\", but there's hopefully a way to specify a width.  Could also maybe just use the getNumberString() function used elsewhere in this file if fmt::format won't work right."
                },
                {
                    "file": "extensions/openpower-pels/pel.cpp",
                    "line": 633,
                    "reviewer": {
                        "name": "Ben Tyner",
                        "email": "ben.tyner@ibm.com",
                        "username": "bentyner"
                    },
                    "message": "so if the value is 0 do we want 0, 0x0, 0x00, 0x00000000 etc also since the dbus call could return invalid data of any length (invalid) do we want to cap the invalid data that we store at some length?"
                },
                {
                    "file": "extensions/openpower-pels/pel.cpp",
                    "line": 633,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Derek, how would you like this displayed?"
                },
                {
                    "file": "extensions/openpower-pels/pel.cpp",
                    "line": 633,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "I don't have a strong opinion.\nEM files will have in format \"80001603\"\nSantosh's wiki has \"0x50001003\"\nEither one works for me.  So for the 0 case, maybe 4 bytes of 0's in the same way as above."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/data_interface.cpp",
                    "type": "MODIFIED",
                    "insertions": 30,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/data_interface.hpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/pel.cpp",
                    "type": "MODIFIED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "test/openpower-pels/mocks.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "test/openpower-pels/pel_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 72,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "bfa7bb6dc3594345ece7595bfacd6659cabd0dee",
            "parents": [
                "cad16201f83a1a91b29781cff26e9e09158cae0e"
            ],
            "ref": "refs/changes/33/43333/2",
            "uploader": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "createdOn": 1621615901,
            "author": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "minor thing - I've been prefixing all the PEL specific commits in the repo with PEL:"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/data_interface.cpp",
                    "type": "MODIFIED",
                    "insertions": 30,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/data_interface.hpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/pel.cpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "test/openpower-pels/mocks.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "test/openpower-pels/pel_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 64,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "1126e6158092ba7c4556dff3531daac6156e8d95",
            "parents": [
                "0b08776a882357d7e96ee072d14ba0940287ca93"
            ],
            "ref": "refs/changes/33/43333/3",
            "uploader": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "createdOn": 1621625517,
            "author": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/data_interface.cpp",
                    "type": "MODIFIED",
                    "insertions": 30,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/data_interface.hpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/pel.cpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "test/openpower-pels/mocks.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "test/openpower-pels/pel_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 64,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "1d6dd492f8e535262cb2be151dc87dccc7bb466a",
            "parents": [
                "0b08776a882357d7e96ee072d14ba0940287ca93"
            ],
            "ref": "refs/changes/33/43333/4",
            "uploader": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "createdOn": 1621626869,
            "author": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "extensions/openpower-pels/pel.cpp",
                    "line": 630,
                    "reviewer": {
                        "name": "Ben Tyner",
                        "email": "ben.tyner@ibm.com",
                        "username": "bentyner"
                    },
                    "message": "If this call fails and/or an empty vector is returned then the entry will be \"System IM: 0x\" is this OK?"
                },
                {
                    "file": "extensions/openpower-pels/pel.cpp",
                    "line": 630,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Hmm, I guess maybe leaving it empty is slightly better"
                },
                {
                    "file": "extensions/openpower-pels/pel.cpp",
                    "line": 630,
                    "reviewer": {
                        "name": "Ben Tyner",
                        "email": "ben.tyner@ibm.com",
                        "username": "bentyner"
                    },
                    "message": "Will the json/pel backend stuff be ok with an empty string as value (accept/add the key with no value)?"
                },
                {
                    "file": "extensions/openpower-pels/pel.cpp",
                    "line": 630,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "yea, i'm pretty sure an empty string is fine.  could try a testcase run to be sure"
                },
                {
                    "file": "extensions/openpower-pels/pel.cpp",
                    "line": 630,
                    "reviewer": {
                        "name": "Ben Tyner",
                        "email": "ben.tyner@ibm.com",
                        "username": "bentyner"
                    },
                    "message": "I omitted the 0x since there did not seem to be a preference in the display value."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/data_interface.cpp",
                    "type": "MODIFIED",
                    "insertions": 30,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/data_interface.hpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/pel.cpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "test/openpower-pels/mocks.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "test/openpower-pels/pel_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 64,
            "sizeDeletions": 0
        },
        {
            "number": 5,
            "revision": "5b54617017b9db40cb0d1e85d7b7d02aba39d325",
            "parents": [
                "cad16201f83a1a91b29781cff26e9e09158cae0e"
            ],
            "ref": "refs/changes/33/43333/5",
            "uploader": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "createdOn": 1621893710,
            "author": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/data_interface.cpp",
                    "type": "MODIFIED",
                    "insertions": 30,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/data_interface.hpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/pel.cpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "test/openpower-pels/mocks.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "test/openpower-pels/pel_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 65,
            "sizeDeletions": 0
        },
        {
            "number": 6,
            "revision": "e32b7e76d17f506477b3dfea937739785a7d3f6f",
            "parents": [
                "c2b8a51774a5a3e6f169da6a6c1d5d5fe4fb53d2"
            ],
            "ref": "refs/changes/33/43333/6",
            "uploader": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "createdOn": 1621894356,
            "author": {
                "name": "Ben Tyner",
                "email": "ben.tyner@ibm.com",
                "username": "bentyner"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/data_interface.cpp",
                    "type": "MODIFIED",
                    "insertions": 30,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/data_interface.hpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/pel.cpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "test/openpower-pels/mocks.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "test/openpower-pels/pel_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 65,
            "sizeDeletions": 0
        }
    ]
}