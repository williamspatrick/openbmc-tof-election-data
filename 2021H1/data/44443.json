{
    "project": "openbmc/openpower-proc-control",
    "branch": "master",
    "topic": "bmc-reset-cfam",
    "id": "I349505aa19bf0164a2f01d133a47298fabbf3299",
    "number": 44443,
    "subject": "bmc-reset: add support to write a cfam",
    "owner": {
        "name": "Andrew Geissler",
        "email": "geissonator@yahoo.com",
        "username": "geissonator"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/openpower-proc-control/+/44443",
    "commitMessage": "bmc-reset: add support to write a cfam\n\nA future commit requires this support so refactor the getCFAM a bit to\nmove some shared code to a common function and add putCFAM\n\nTested:\n- Verified the putCFAM worked as expected when called on p10bmc hardware\n\nSigned-off-by: Andrew Geissler <geissonator@yahoo.com>\nChange-Id: I349505aa19bf0164a2f01d133a47298fabbf3299\n",
    "createdOn": 1624553887,
    "lastUpdated": 1625748327,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1624553887,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1624553906,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1624553977,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/20629/ : SUCCESS"
        },
        {
            "timestamp": 1624644438,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1624862587,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 1:\n\n(2 comments)"
        },
        {
            "timestamp": 1625080445,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1625080445,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Patch Set 2:\n\n(4 comments)"
        },
        {
            "timestamp": 1625080467,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1625080528,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/21162/ : FAILURE"
        },
        {
            "timestamp": 1625083139,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Uploaded patch set 3: Patch Set 2 was rebased."
        },
        {
            "timestamp": 1625083169,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1625083247,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/21180/ : SUCCESS"
        },
        {
            "timestamp": 1625636576,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1625662363,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1625662363,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1625662386,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1625662699,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/21539/ : SUCCESS"
        },
        {
            "timestamp": 1625670069,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1625670155,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 4: Code-Review+2"
        },
        {
            "timestamp": 1625672470,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1625712944,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Change has been successfully merged by Andrew Geissler"
        },
        {
            "timestamp": 1625748327,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Topic set to bmc-reset-cfam"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "958526178810c664f5afa2f8b58c8ac081f8ca90",
            "parents": [
                "f6b1b41d9cffb9cdd4e77ac3d77579e462c4133b"
            ],
            "ref": "refs/changes/43/44443/1",
            "uploader": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "createdOn": 1624553887,
            "author": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "procedures/phal/common_utils.cpp",
                    "line": 102,
                    "reviewer": {
                        "name": "Jayanth Othayoth",
                        "email": "ojayanth@gmail.com",
                        "username": "ojayanth"
                    },
                    "message": "getting fsi target , below code is sufficient.\n\nProbe is expensive operation, and only required only for hw access ,better to move this function move under hw access function. Need to figure out better way of handling prob. like adding at one place from the application scope.\n\ninline struct pdbg_target *get_fsi_target(struct pdbg_target *proc)\n{\n\tstruct pdbg_target *fsi = NULL;\n\n\t/* We assume each processor chip contains one and only one pib */\n\tpdbg_for_each_target(\"fsi\", proc, fsi) {\n\t\tbreak;\n\t}\n\n\tif (!fsi) {\n      <Error>\t\t\n\t}\n      \n\treturn fsi;\n}"
                },
                {
                    "file": "procedures/phal/common_utils.cpp",
                    "line": 102,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "geissonator@yahoo.com",
                        "username": "geissonator"
                    },
                    "message": "ok, I'll simplify code and make the probe a separate call that only runs once per application lifetime."
                },
                {
                    "file": "procedures/phal/common_utils.cpp",
                    "line": 139,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "probably good to log the target/path here too"
                },
                {
                    "file": "procedures/phal/common_utils.cpp",
                    "line": 139,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "geissonator@yahoo.com",
                        "username": "geissonator"
                    },
                    "message": "Done"
                },
                {
                    "file": "procedures/phal/common_utils.hpp",
                    "line": 49,
                    "reviewer": {
                        "name": "Jayanth Othayoth",
                        "email": "ojayanth@gmail.com",
                        "username": "ojayanth"
                    },
                    "message": "\"Processor target\""
                },
                {
                    "file": "procedures/phal/common_utils.hpp",
                    "line": 49,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "geissonator@yahoo.com",
                        "username": "geissonator"
                    },
                    "message": "Fixed, other ones in here too"
                },
                {
                    "file": "procedures/phal/common_utils.hpp",
                    "line": 55,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "geissonator@yahoo.com",
                        "username": "geissonator"
                    },
                    "message": "Make uint32_t per earlier review comment"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "procedures/phal/common_utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 37,
                    "deletions": -4
                },
                {
                    "file": "procedures/phal/common_utils.hpp",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 58,
            "sizeDeletions": 4
        },
        {
            "number": 2,
            "revision": "b1693f2c428aa6478e8d033ba9857c5a39476733",
            "parents": [
                "c0062d5a2f309794805463cc8d922dc580f2b06d"
            ],
            "ref": "refs/changes/43/44443/2",
            "uploader": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "createdOn": 1625080445,
            "author": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "procedures/phal/common_utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 90,
                    "deletions": -18
                },
                {
                    "file": "procedures/phal/common_utils.hpp",
                    "type": "MODIFIED",
                    "insertions": 35,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 125,
            "sizeDeletions": 20
        },
        {
            "number": 3,
            "revision": "415bb49d3403675c29691b589a3b8398a3a94903",
            "parents": [
                "8e73da030644ad9b9ff0ed71cbcff0fd1a2804ab"
            ],
            "ref": "refs/changes/43/44443/3",
            "uploader": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "createdOn": 1625083139,
            "author": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "procedures/phal/common_utils.cpp",
                    "line": 112,
                    "reviewer": {
                        "name": "Jayanth Othayoth",
                        "email": "ojayanth@gmail.com",
                        "username": "ojayanth"
                    },
                    "message": "Not required this."
                },
                {
                    "file": "procedures/phal/common_utils.cpp",
                    "line": 112,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "geissonator@yahoo.com",
                        "username": "geissonator"
                    },
                    "message": "oh ok, I thought you wanted me to make sure we only called this once per process instantiation but with the code I have here, you're right, it doesn't matter because we only ever do one hw operation. I'll remove and we can optimize later if needed."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "procedures/phal/common_utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 90,
                    "deletions": -18
                },
                {
                    "file": "procedures/phal/common_utils.hpp",
                    "type": "MODIFIED",
                    "insertions": 35,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 125,
            "sizeDeletions": 20
        },
        {
            "number": 4,
            "revision": "af48bed2c2838f74aefa1a837e222346e26bbf7d",
            "parents": [
                "8e73da030644ad9b9ff0ed71cbcff0fd1a2804ab"
            ],
            "ref": "refs/changes/43/44443/4",
            "uploader": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "createdOn": 1625662363,
            "author": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "procedures/phal/common_utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 82,
                    "deletions": -18
                },
                {
                    "file": "procedures/phal/common_utils.hpp",
                    "type": "MODIFIED",
                    "insertions": 35,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 117,
            "sizeDeletions": 20
        }
    ]
}