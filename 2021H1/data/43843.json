{
    "project": "openbmc/phosphor-led-manager",
    "branch": "master",
    "id": "I73aced08a288db5d70440e0c18d194a30158e467",
    "number": 43843,
    "subject": "meson: support custom led yaml path",
    "owner": {
        "name": "Seires Li",
        "email": "seiresli@pcpartner.com",
        "username": "seirespcp"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-led-manager/+/43843",
    "commitMessage": "meson: support custom led yaml path\n\nMost machines using phosphor-led-manager push their led.yaml with\nvirtual/phosphor-led-manager-config-native, which installs led.yaml\nto a native tree.\nWithout led yaml path support, those machines are getting the wrong\nled groups.\nFor compatibility, add this support back.\n\nSigned-off-by: Seires Li <seiresli@pcpartner.com>\nChange-Id: I73aced08a288db5d70440e0c18d194a30158e467\n",
    "createdOn": 1623124946,
    "lastUpdated": 1623668444,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1623124946,
            "reviewer": {
                "name": "Seires Li",
                "email": "seiresli@pcpartner.com",
                "username": "seirespcp"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1623124964,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1:\n\nUser not approved, see admin, no CI"
        },
        {
            "timestamp": 1623125660,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 1: Ok-To-Test+1"
        },
        {
            "timestamp": 1623125722,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/18895/ : SUCCESS"
        },
        {
            "timestamp": 1623128658,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 1: Code-Review-1\n\n(1 comment)"
        },
        {
            "timestamp": 1623129139,
            "reviewer": {
                "name": "Seires Li",
                "email": "seiresli@pcpartner.com",
                "username": "seirespcp"
            },
            "message": "Uploaded patch set 2: Commit message was updated."
        },
        {
            "timestamp": 1623129304,
            "reviewer": {
                "name": "Seires Li",
                "email": "seiresli@pcpartner.com",
                "username": "seirespcp"
            },
            "message": "Description of patch set 2 set to \"Adds a newline after commit message subject\""
        },
        {
            "timestamp": 1623130320,
            "reviewer": {
                "name": "Seires Li",
                "email": "seiresli@pcpartner.com",
                "username": "seirespcp"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1623140220,
            "reviewer": {
                "name": "Vishwanatha Subbanna",
                "email": "vishwa@linux.vnet.ibm.com",
                "username": "vishwabmc"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1623141965,
            "reviewer": {
                "name": "Seires Li",
                "email": "seiresli@pcpartner.com",
                "username": "seirespcp"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1623150101,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Removed Code-Review-1 by Andrew Jeffery <andrew@aj.id.au>\n"
        },
        {
            "timestamp": 1623174150,
            "reviewer": {
                "name": "Vishwanatha Subbanna",
                "email": "vishwa@linux.vnet.ibm.com",
                "username": "vishwabmc"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1623182194,
            "reviewer": {
                "name": "Seires Li",
                "email": "seiresli@pcpartner.com",
                "username": "seirespcp"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1623244288,
            "reviewer": {
                "name": "Vishwanatha Subbanna",
                "email": "vishwa@linux.vnet.ibm.com",
                "username": "vishwabmc"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1623252431,
            "reviewer": {
                "name": "Seires Li",
                "email": "seiresli@pcpartner.com",
                "username": "seirespcp"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1623263480,
            "reviewer": {
                "name": "Seires Li",
                "email": "seiresli@pcpartner.com",
                "username": "seirespcp"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1623304472,
            "reviewer": {
                "name": "Vishwanatha Subbanna",
                "email": "vishwa@linux.vnet.ibm.com",
                "username": "vishwabmc"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1623330606,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Patch Set 2: Code-Review+1"
        },
        {
            "timestamp": 1623668394,
            "reviewer": {
                "name": "Vishwanatha Subbanna",
                "email": "vishwa@linux.vnet.ibm.com",
                "username": "vishwabmc"
            },
            "message": "Patch Set 2: Code-Review+2"
        },
        {
            "timestamp": 1623668444,
            "reviewer": {
                "name": "Vishwanatha Subbanna",
                "email": "vishwa@linux.vnet.ibm.com",
                "username": "vishwabmc"
            },
            "message": "Change has been successfully rebased and submitted as fcfb2b62c5bc74ce42500c5d3d421860c8a74425 by Vishwanatha Subbanna"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "0fad733df1c0bd630c3fff3543251076c4c4485f",
            "parents": [
                "cc9a575399bfcdb42f4ec3b78d840ca06f48ad58"
            ],
            "ref": "refs/changes/43/43843/1",
            "uploader": {
                "name": "Seires Li",
                "email": "seiresli@pcpartner.com",
                "username": "seirespcp"
            },
            "createdOn": 1623124946,
            "author": {
                "name": "Seires Li",
                "email": "seiresli@pcpartner.com",
                "username": "seirespcp"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 8,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "You need a new-line after the subject; have a look at the guidelines here for writing commit messages:\n\nhttps://chris.beams.io/posts/git-commit/#seven-rules"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 8,
                    "reviewer": {
                        "name": "Seires Li",
                        "email": "seiresli@pcpartner.com",
                        "username": "seirespcp"
                    },
                    "message": "Done, sorry about that"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -1
                },
                {
                    "file": "meson_options.txt",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 9,
            "sizeDeletions": 2
        },
        {
            "number": 2,
            "revision": "3945fc7bd2190218d2c673c167198fb63f454ce4",
            "parents": [
                "cc9a575399bfcdb42f4ec3b78d840ca06f48ad58"
            ],
            "ref": "refs/changes/43/43843/2",
            "uploader": {
                "name": "Seires Li",
                "email": "seiresli@pcpartner.com",
                "username": "seirespcp"
            },
            "createdOn": 1623129139,
            "author": {
                "name": "Seires Li",
                "email": "seiresli@pcpartner.com",
                "username": "seirespcp"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "meson.build",
                    "line": 130,
                    "reviewer": {
                        "name": "Vishwanatha Subbanna",
                        "email": "vishwa@linux.vnet.ibm.com",
                        "username": "vishwabmc"
                    },
                    "message": "In the bb files, I see we have \n\nEXTRA_OECONF = \"YAML_PATH=${STAGING_DATADIR_NATIVE}/${PN}\"\n\nSo, when we moved over to meson, I believe we should have taken care of all the instances of this I think ?. \n\nShould we change this to OEMESON ?. and if so, should we retain the name YAML_PATH and not the \"led-yaml-path\" ?"
                },
                {
                    "file": "meson.build",
                    "line": 130,
                    "reviewer": {
                        "name": "Seires Li",
                        "email": "seiresli@pcpartner.com",
                        "username": "seirespcp"
                    },
                    "message": "OECONF didn't work for meson.\nIt should be OEMESON.\nIt also got removed in \nhttps://github.com/openbmc/openbmc/commit/643d97391de9a5fc658db9a8b037c752624b847c#diff-1e185791cc4818615edb41a433cf69c5ba15dd695fe568474c29d7801c7cbfa4\n\nRegarding the variable name, on\nhttps://github.com/openbmc/phosphor-led-manager/issues/10#issuecomment-855238822\n, stwcx commented that we should use a different variable name,\nI think he has a point.\n\nso based on the following reasons I changed the name:\n1. it got removed\n2. YAML_PATH implies something else in other repos\n3. This variable is used only between bb and meson only."
                },
                {
                    "file": "meson.build",
                    "line": 130,
                    "reviewer": {
                        "name": "Vishwanatha Subbanna",
                        "email": "vishwa@linux.vnet.ibm.com",
                        "username": "vishwabmc"
                    },
                    "message": "I am fine with changing the name of YAML_PATH.\n\nhttps://github.com/openbmc/openbmc/commit/643d97391de9a5fc658db9a8b037c752624b847c\n\nI have no clue why that EXTRA_OECONF YAML_PATH was removed. I had not looked at that commit. \n\nAnyway, what I said was this : we are going to need the variable back on as part of OEMESON .. Similarly, if some other machine layer .bbappend files have that, we need to go make that change as well"
                },
                {
                    "file": "meson.build",
                    "line": 130,
                    "reviewer": {
                        "name": "Seires Li",
                        "email": "seiresli@pcpartner.com",
                        "username": "seirespcp"
                    },
                    "message": "There does seem to be machines using bbappend to override the path."
                },
                {
                    "file": "meson.build",
                    "line": 130,
                    "reviewer": {
                        "name": "Vishwanatha Subbanna",
                        "email": "vishwa@linux.vnet.ibm.com",
                        "username": "vishwabmc"
                    },
                    "message": "right.. I am saying we may need to put all those changes in the review chain based on this. Is that something you could help with ?"
                },
                {
                    "file": "meson.build",
                    "line": 130,
                    "reviewer": {
                        "name": "Seires Li",
                        "email": "seiresli@pcpartner.com",
                        "username": "seirespcp"
                    },
                    "message": "Sure, I'll push a patch."
                },
                {
                    "file": "meson.build",
                    "line": 130,
                    "reviewer": {
                        "name": "Seires Li",
                        "email": "seiresli@pcpartner.com",
                        "username": "seirespcp"
                    },
                    "message": "Patch up, please review\nhttps://gerrit.openbmc-project.xyz/c/openbmc/openbmc/+/43927"
                },
                {
                    "file": "meson.build",
                    "line": 130,
                    "reviewer": {
                        "name": "Vishwanatha Subbanna",
                        "email": "vishwa@linux.vnet.ibm.com",
                        "username": "vishwabmc"
                    },
                    "message": "Thank you.. Appreciate the support !"
                },
                {
                    "file": "meson.build",
                    "line": 142,
                    "reviewer": {
                        "name": "Vishwanatha Subbanna",
                        "email": "vishwa@linux.vnet.ibm.com",
                        "username": "vishwabmc"
                    },
                    "message": "Does this change make sure it takes the source_root() yaml if I don't give -I ?"
                },
                {
                    "file": "meson.build",
                    "line": 142,
                    "reviewer": {
                        "name": "Seires Li",
                        "email": "seiresli@pcpartner.com",
                        "username": "seirespcp"
                    },
                    "message": "It would use the led.yaml in project source root if no path is passed to meson"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -1
                },
                {
                    "file": "meson_options.txt",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 9,
            "sizeDeletions": 2
        },
        {
            "number": 3,
            "revision": "fcfb2b62c5bc74ce42500c5d3d421860c8a74425",
            "parents": [
                "7f53a0374dfc1d543daf63aaa26ef3a739451ecc"
            ],
            "ref": "refs/changes/43/43843/3",
            "uploader": {
                "name": "Vishwanatha Subbanna",
                "email": "vishwa@linux.vnet.ibm.com",
                "username": "vishwabmc"
            },
            "createdOn": 1623668444,
            "author": {
                "name": "Seires Li",
                "email": "seiresli@pcpartner.com",
                "username": "seirespcp"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -1
                },
                {
                    "file": "meson_options.txt",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 9,
            "sizeDeletions": 2
        }
    ]
}