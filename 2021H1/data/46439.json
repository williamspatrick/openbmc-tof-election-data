{
    "project": "openbmc/bmcweb",
    "branch": "master",
    "topic": "PcieType",
    "id": "Ic6bc19455c648a3d256856938a79a4265ce8eb59",
    "number": 46439,
    "subject": "PCIe: Implement \"PcieType\" PCIe device property",
    "owner": {
        "name": "Spencer Ku",
        "email": "Spencer.Ku@quantatw.com",
        "username": "SpencerKu"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/bmcweb/+/46439",
    "commitMessage": "PCIe: Implement \"PcieType\" PCIe device property\n\nThis commit publishes PCIe device property \"PcieType\" which\ndefined in the Redfish PCIeDevice schema.\n\nNew property:\nPCIeType   : The PCIe interface generation in use by the device.\n\nDbus interfaces dependency PR:\nhttps://gerrit.openbmc-project.xyz/c/openbmc/phosphor-dbus-interfaces/+/46437\n\nPeci-pcie dependency PR:\nhttps://gerrit.openbmc-project.xyz/c/openbmc/peci-pcie/+/46438\n\nSample output:\n\n/redfish/v1/Systems/systemPCIeDevices/S0B1D0/\n{\n  \"@odata.id\": \"/redfish/v1/Systems/system/PCIeDevices/S0B1D0\",\n  \"@odata.type\": \"#PCIeDevice.v1_4_0.PCIeDevice\",\n  \"DeviceType\": \"SingleFunction\",\n  \"Id\": \"S0B1D0\",\n  \"Manufacturer\": \"PLDA\",\n  \"Name\": \"PCIe Device\",\n  \"PCIeFunctions\": {\n    \"@odata.id\": \"/redfish/v1/Systems/system/PCIeDevices/S0B1D0/PCIeFunctions\"\n  },\n  \"PCIeInterface\": {\n    \"PcieType\": \"Gen2\"\n  }\n}\n\nSigned-off-by: Spencer Ku <Spencer.Ku@quantatw.com>\nChange-Id: Ic6bc19455c648a3d256856938a79a4265ce8eb59\n",
    "createdOn": 1630570816,
    "lastUpdated": 1632758813,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1630570816,
            "reviewer": {
                "name": "Spencer Ku",
                "email": "Spencer.Ku@quantatw.com",
                "username": "SpencerKu"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1630570834,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1630570882,
            "reviewer": {
                "name": "Spencer Ku",
                "email": "Spencer.Ku@quantatw.com",
                "username": "SpencerKu"
            },
            "message": "Topic set to PcieType"
        },
        {
            "timestamp": 1630571261,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/25509/ : SUCCESS"
        },
        {
            "timestamp": 1630667614,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\nPlease ensure the dbus interface is merged before this code change."
        },
        {
            "timestamp": 1631691670,
            "reviewer": {
                "name": "Spencer Ku",
                "email": "Spencer.Ku@quantatw.com",
                "username": "SpencerKu"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1631691690,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1631691721,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/26342/ : FAILURE"
        },
        {
            "timestamp": 1631691902,
            "reviewer": {
                "name": "Spencer Ku",
                "email": "Spencer.Ku@quantatw.com",
                "username": "SpencerKu"
            },
            "message": "Uploaded patch set 3: Patch Set 2 was rebased."
        },
        {
            "timestamp": 1631691925,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1631692358,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/26343/ : SUCCESS"
        },
        {
            "timestamp": 1631919663,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1631919702,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1632380237,
            "reviewer": {
                "name": "Spencer Ku",
                "email": "Spencer.Ku@quantatw.com",
                "username": "SpencerKu"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1632380252,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1632380673,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/26814/ : SUCCESS"
        },
        {
            "timestamp": 1632380981,
            "reviewer": {
                "name": "Spencer Ku",
                "email": "Spencer.Ku@quantatw.com",
                "username": "SpencerKu"
            },
            "message": "Patch Set 4:\n\n(3 comments)"
        },
        {
            "timestamp": 1632583527,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 4: Code-Review+2"
        },
        {
            "timestamp": 1632583529,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Change has been successfully rebased and submitted as 3e8c7dfce4869711e22ccc76c90cebb55984d36c by Ed Tanous"
        },
        {
            "timestamp": 1632758391,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 5:\n\nI don't understand why this was merged when none of the dependencies are ready.  This is effectively dead-code until that is done and fundamentally, this commit will need to be updated because we've said that \"PCIeType\" is not going to fly as a property name for this on the dbus interface."
        },
        {
            "timestamp": 1632758813,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 5:\n\n> Patch Set 5:\n> \n> I don't understand why this was merged when none of the dependencies are ready.  This is effectively dead-code until that is done and fundamentally, this commit will need to be updated because we've said that \"PCIeType\" is not going to fly as a property name for this on the dbus interface.\n\nFair point.  I thought this patchset had updated the dbus side and had the latest dbus interface implemented, but in looking again.... it clearly hasn't.  Revert coming shortly."
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "4c08cb580c8430ed8f83caac45080c41877e3863",
            "parents": [
                "877044644f53d4dd93499d3a99d8c227694fd3a5"
            ],
            "ref": "refs/changes/39/46439/1",
            "uploader": {
                "name": "Spencer Ku",
                "email": "Spencer.Ku@quantatw.com",
                "username": "SpencerKu"
            },
            "createdOn": 1630570816,
            "author": {
                "name": "Spencer Ku",
                "email": "Spencer.Ku@quantatw.com",
                "username": "SpencerKu"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "redfish-core/lib/pcie.hpp",
                    "line": 158,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This is duplicating your null check."
                },
                {
                    "file": "redfish-core/lib/pcie.hpp",
                    "line": 158,
                    "reviewer": {
                        "name": "Spencer Ku",
                        "email": "Spencer.Ku@quantatw.com",
                        "username": "SpencerKu"
                    },
                    "message": "Remove the nullptr checker here."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 40,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/pcie.hpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 12,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "93489f3846f32eddb8ee130eef83f44f476ce359",
            "parents": [
                "877044644f53d4dd93499d3a99d8c227694fd3a5"
            ],
            "ref": "refs/changes/39/46439/2",
            "uploader": {
                "name": "Spencer Ku",
                "email": "Spencer.Ku@quantatw.com",
                "username": "SpencerKu"
            },
            "createdOn": 1631691670,
            "author": {
                "name": "Spencer Ku",
                "email": "Spencer.Ku@quantatw.com",
                "username": "SpencerKu"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 40,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/pcie.hpp",
                    "type": "MODIFIED",
                    "insertions": 49,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 49,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "d19783e2c5576e499e302f17b6efc714e13f545d",
            "parents": [
                "9a69d5a5efde522fccac2fcbf50052a73aaab671"
            ],
            "ref": "refs/changes/39/46439/3",
            "uploader": {
                "name": "Spencer Ku",
                "email": "Spencer.Ku@quantatw.com",
                "username": "SpencerKu"
            },
            "createdOn": 1631691902,
            "author": {
                "name": "Spencer Ku",
                "email": "Spencer.Ku@quantatw.com",
                "username": "SpencerKu"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "redfish-core/lib/pcie.hpp",
                    "line": 182,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "For what it's worth, this is incorrect.  DeviceType is an enum, so we should be converting the dbus enum to the Redfish enum here.\n\nNot part of your patch, but something I noticed in this review."
                },
                {
                    "file": "redfish-core/lib/pcie.hpp",
                    "line": 182,
                    "reviewer": {
                        "name": "Spencer Ku",
                        "email": "Spencer.Ku@quantatw.com",
                        "username": "SpencerKu"
                    },
                    "message": "Thanks for your explanation. I will pay attention about this problem."
                },
                {
                    "file": "redfish-core/lib/pcie.hpp",
                    "line": 189,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Commented on an earlier patchset, but you've already checked this property against nullptr on line 185."
                },
                {
                    "file": "redfish-core/lib/pcie.hpp",
                    "line": 189,
                    "reviewer": {
                        "name": "Spencer Ku",
                        "email": "Spencer.Ku@quantatw.com",
                        "username": "SpencerKu"
                    },
                    "message": "Remove the nullptr checker here."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 40,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/pcie.hpp",
                    "type": "MODIFIED",
                    "insertions": 49,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 49,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "ad7a536a21e033c336d33279d55acff0c35840d1",
            "parents": [
                "9a69d5a5efde522fccac2fcbf50052a73aaab671"
            ],
            "ref": "refs/changes/39/46439/4",
            "uploader": {
                "name": "Spencer Ku",
                "email": "Spencer.Ku@quantatw.com",
                "username": "SpencerKu"
            },
            "createdOn": 1632380237,
            "author": {
                "name": "Spencer Ku",
                "email": "Spencer.Ku@quantatw.com",
                "username": "SpencerKu"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 40,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/pcie.hpp",
                    "type": "MODIFIED",
                    "insertions": 45,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 45,
            "sizeDeletions": 0
        },
        {
            "number": 5,
            "revision": "3e8c7dfce4869711e22ccc76c90cebb55984d36c",
            "parents": [
                "81856681e1feabe267c0d1998182c9226106aa6d"
            ],
            "ref": "refs/changes/39/46439/5",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1632583529,
            "author": {
                "name": "Spencer Ku",
                "email": "Spencer.Ku@quantatw.com",
                "username": "SpencerKu"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 40,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/pcie.hpp",
                    "type": "MODIFIED",
                    "insertions": 45,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 45,
            "sizeDeletions": 0
        }
    ]
}