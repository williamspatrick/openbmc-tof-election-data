{
    "project": "openbmc/phosphor-dbus-interfaces",
    "branch": "master",
    "topic": "bmc-reset-host-up",
    "id": "I102b07a0c795e6af3be48fedee9a31ae816dba11",
    "number": 42435,
    "subject": "host: define new interface for checking condition",
    "owner": {
        "name": "Andrew Geissler",
        "email": "geissonator@yahoo.com",
        "username": "geissonator"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-dbus-interfaces/+/42435",
    "commitMessage": "host: define new interface for checking condition\n\nWith the introduction of the PLDM protocol as a mechanism to communicate\nwith the host firmware, a more specific mechanism is needed for BMC\nsoftware to check if the host is running. Utilizing the generic\nExecute() method is confusing, especially considering that all of the\nCommand types may not be supported by all protocols.\n\nThe plan is to deprecate the Control.Host, Execute() with the HeartBeat\ncommand type, in place of this new interface and property. Both IPMI\nand PLDM will implement this method and BMC software can query mapper\nfor implementers on their specific systems.\n\nSigned-off-by: Andrew Geissler <geissonator@yahoo.com>\nChange-Id: I102b07a0c795e6af3be48fedee9a31ae816dba11\n",
    "createdOn": 1618869603,
    "lastUpdated": 1619630082,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1618869603,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1618869617,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1618869686,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1618869795,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/15757/ : FAILURE"
        },
        {
            "timestamp": 1618870154,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1618870167,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1618871021,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/15758/ : SUCCESS"
        },
        {
            "timestamp": 1619016235,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1619048175,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1619048175,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1619048185,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1619049036,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/15934/ : SUCCESS"
        },
        {
            "timestamp": 1619210732,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Topic set to bmc-reset-host-up"
        },
        {
            "timestamp": 1619452604,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Patch Set 3:\n\nUpdated design doc over at https://gerrit.openbmc-project.xyz/c/openbmc/docs/+/42605"
        },
        {
            "timestamp": 1619529383,
            "reviewer": {
                "name": "Pavithra Barithaya",
                "email": "pavithra.b@ibm.com",
                "username": "Pavithrab7"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1619625000,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 3:\n\n(4 comments)"
        },
        {
            "timestamp": 1619626148,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1619626148,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Patch Set 4:\n\n(4 comments)"
        },
        {
            "timestamp": 1619626160,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1619626186,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/16330/ : FAILURE"
        },
        {
            "timestamp": 1619627479,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1619627490,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1619627751,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 5: Code-Review+2"
        },
        {
            "timestamp": 1619627879,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/16331/ : SUCCESS"
        },
        {
            "timestamp": 1619630082,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Change has been successfully merged by Andrew Geissler"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "1e0708080b3f5eddc295a1e821ed706686255cd9",
            "parents": [
                "495981805244269650bee13d1ee8f13543b2bc5a"
            ],
            "ref": "refs/changes/35/42435/1",
            "uploader": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "createdOn": 1618869603,
            "author": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "xyz/openbmc_project/Control/Host.interface.yaml",
                    "line": 22,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "geissonator@yahoo.com",
                        "username": "geissonator"
                    },
                    "message": "I added this detail because we now have two methods and it was not clear who was utilizing the CommandComplete signal."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "xyz/openbmc_project/Control/Host.interface.yaml",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 15,
            "sizeDeletions": 1
        },
        {
            "number": 2,
            "revision": "b74eac71fae094022a0a820463bec747c576dacd",
            "parents": [
                "495981805244269650bee13d1ee8f13543b2bc5a"
            ],
            "ref": "refs/changes/35/42435/2",
            "uploader": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "createdOn": 1618870154,
            "author": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "xyz/openbmc_project/Control/Host.interface.yaml",
                    "line": 5,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I would recommend a separate interface for this so that implementations which do not support the other Commands don't have to make a dummy implementation that throws a \"NotSupported\".\n\nWe do not have any other properties or methods with \"Is\" prefixes.  I would suggest another name.\n\nThe implication to me, based on the name and description, is that this should be a property.  Is there a reason why it is a method?  Please document the reasons.\n\nWill this always be a simple \"yes/no\" answer?  Should there be an enumeration or enumeration-set returned by this?"
                },
                {
                    "file": "xyz/openbmc_project/Control/Host.interface.yaml",
                    "line": 5,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "geissonator@yahoo.com",
                        "username": "geissonator"
                    },
                    "message": "> I would recommend a separate interface for this so that implementations which do not support the other Commands don't have to make a dummy implementation that throws a \"NotSupported\".\n\nYeah, makes sense. I'm struggling a bit with the right interface name but I'll put something up and we can discuss.\n\n> We do not have any other properties or methods with \"Is\" prefixes.  I would suggest another name.\n\nSure\n\n> The implication to me, based on the name and description, is that this should be a property.  Is there a reason why it is a method?  Please document the reasons.\n\nI assumed there was a reason we made the \"Execute\" one a method but I can't some up with any reason so will make a property.\n\n> Will this always be a simple \"yes/no\" answer?  Should there be an enumeration or enumeration-set returned by this?\n\nWe always start simple and get burned later so yeah, I like the idea of an enum that we could expand later if needed."
                },
                {
                    "file": "xyz/openbmc_project/Control/Host.interface.yaml",
                    "line": 12,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Lowercase (you don't need to name returns, but if you do they should be the same style as parameters)."
                },
                {
                    "file": "xyz/openbmc_project/Control/Host.interface.yaml",
                    "line": 12,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "geissonator@yahoo.com",
                        "username": "geissonator"
                    },
                    "message": "Moved to a property"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "xyz/openbmc_project/Control/Host.interface.yaml",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 13,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "bd6609ec61df46514cd6935a6c09897dff510735",
            "parents": [
                "495981805244269650bee13d1ee8f13543b2bc5a"
            ],
            "ref": "refs/changes/35/42435/3",
            "uploader": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "createdOn": 1619048175,
            "author": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "xyz/openbmc_project/Condition/Host.interface.yaml",
                    "line": 2,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "How about HostFirmware as the interface then?  I suspect we'll have other things which might be related to the 'host' as a whole in the future."
                },
                {
                    "file": "xyz/openbmc_project/Condition/Host.interface.yaml",
                    "line": 2,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "geissonator@yahoo.com",
                        "username": "geissonator"
                    },
                    "message": "sounds good"
                },
                {
                    "file": "xyz/openbmc_project/Condition/Host.interface.yaml",
                    "line": 8,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "FirmwareCondition to go along with the interface change also?  \n\nI don't think we need to be too worried about property name collisions.  It is up to you if you want to do property:FirmwareCondition/enum:FirmwareConditions or property:CurrentFirmwareCondition/enum:FirmwareCondition.  Either of those seem reasonable to me."
                },
                {
                    "file": "xyz/openbmc_project/Condition/Host.interface.yaml",
                    "line": 8,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "geissonator@yahoo.com",
                        "username": "geissonator"
                    },
                    "message": "I like the \"Current\" because it's consistent with the host state property names and emphasizes the \"current\" nature of it."
                },
                {
                    "file": "xyz/openbmc_project/Condition/Host.interface.yaml",
                    "line": 10,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "\ud83d\udc4d.  Thanks for putting a default."
                },
                {
                    "file": "xyz/openbmc_project/Condition/Host.interface.yaml",
                    "line": 10,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "geissonator@yahoo.com",
                        "username": "geissonator"
                    },
                    "message": "Ack"
                },
                {
                    "file": "xyz/openbmc_project/Control/Host.interface.yaml",
                    "line": 39,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Might suggest adding a deprecated indication somewhere on this one?"
                },
                {
                    "file": "xyz/openbmc_project/Control/Host.interface.yaml",
                    "line": 39,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "geissonator@yahoo.com",
                        "username": "geissonator"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Condition/Host/meson.build",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Condition/meson.build",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "xyz/openbmc_project/Condition/Host.interface.yaml",
                    "type": "ADDED",
                    "insertions": 27,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 58,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "38d1e79ce0f1d5255d0f49e65899f24fff699bb6",
            "parents": [
                "495981805244269650bee13d1ee8f13543b2bc5a"
            ],
            "ref": "refs/changes/35/42435/4",
            "uploader": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "createdOn": 1619626148,
            "author": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Condition/Host/meson.build",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Condition/meson.build",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "xyz/openbmc_project/Condition/HostFirmware.interface.yaml",
                    "type": "ADDED",
                    "insertions": 27,
                    "deletions": 0
                },
                {
                    "file": "xyz/openbmc_project/Control/Host.interface.yaml",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 60,
            "sizeDeletions": 0
        },
        {
            "number": 5,
            "revision": "ec9fc42563bd5c68193e58ef0f533c0952e86ed7",
            "parents": [
                "a9942a456555e99cc4aa3b68bea024f3c4c38dbc"
            ],
            "ref": "refs/changes/35/42435/5",
            "uploader": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "createdOn": 1619627479,
            "author": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Condition/Host/meson.build",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Condition/HostFirmware/meson.build",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Condition/meson.build",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "xyz/openbmc_project/Condition/HostFirmware.interface.yaml",
                    "type": "ADDED",
                    "insertions": 27,
                    "deletions": 0
                },
                {
                    "file": "xyz/openbmc_project/Control/Host.interface.yaml",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 74,
            "sizeDeletions": 0
        }
    ]
}