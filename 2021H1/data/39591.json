{
    "project": "openbmc/meta-phosphor",
    "branch": "master",
    "id": "I765c1ea80beb66094d99d3c7f19f84480f3df06b",
    "number": 39591,
    "subject": "Add ssifbridge recipe",
    "owner": {
        "email": "dung@os.amperecomputing.com",
        "username": "dcao-ampere"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/meta-phosphor/+/39591",
    "commitMessage": "Add ssifbridge recipe\n\nThe ssifbride immplements a Dbus compliant interface for implementing\nSSIF interfaces. This daemon is standing between BMC SSIF kernel\ndriver and DBUS IPMI Interface for sending IPMI requests and return\nresponses.\n\nSigned-off-by: Dung Cao <dung@os.amperecomputing.com>\nChange-Id: I765c1ea80beb66094d99d3c7f19f84480f3df06b\n",
    "createdOn": 1610428967,
    "lastUpdated": 1610643335,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1610428967,
            "reviewer": {
                "email": "dung@os.amperecomputing.com",
                "username": "dcao-ampere"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1610428980,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1610428989,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1:\n\nBuild Started https://jenkins.openbmc.org/job/ci-meta/2433/"
        },
        {
            "timestamp": 1610430381,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-meta/2433/ : SUCCESS"
        },
        {
            "timestamp": 1610431721,
            "reviewer": {
                "name": "Jenkins OpenBMC IBM",
                "email": "geissonator+jenkinsibm@gmail.com",
                "username": "jenkins-openbmc-ibm"
            },
            "message": "Patch Set 1:\n\nBuild Successful \n\nIBM Hardware CI : witherspoon hardware tests passed"
        },
        {
            "timestamp": 1610486041,
            "reviewer": {
                "name": "Brad Bishop",
                "email": "bradleyb@fuzziesquirrel.com",
                "username": "bradbishop"
            },
            "message": "Patch Set 1:\n\n(7 comments)"
        },
        {
            "timestamp": 1610518381,
            "reviewer": {
                "name": "Thang Q. Nguyen",
                "email": "thang@os.amperecomputing.com",
                "username": "thangqn-ampere"
            },
            "message": "Patch Set 1:\n\n(5 comments)"
        },
        {
            "timestamp": 1610553367,
            "reviewer": {
                "name": "Brad Bishop",
                "email": "bradleyb@fuzziesquirrel.com",
                "username": "bradbishop"
            },
            "message": "Patch Set 1:\n\n(2 comments)"
        },
        {
            "timestamp": 1610601523,
            "reviewer": {
                "email": "dung@os.amperecomputing.com",
                "username": "dcao-ampere"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1610601536,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1610601545,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2:\n\nBuild Started https://jenkins.openbmc.org/job/ci-meta/2486/"
        },
        {
            "timestamp": 1610602842,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-meta/2486/ : SUCCESS"
        },
        {
            "timestamp": 1610604188,
            "reviewer": {
                "name": "Jenkins OpenBMC IBM",
                "email": "geissonator+jenkinsibm@gmail.com",
                "username": "jenkins-openbmc-ibm"
            },
            "message": "Patch Set 2:\n\nBuild Successful \n\nIBM Hardware CI : witherspoon hardware tests passed"
        },
        {
            "timestamp": 1610643333,
            "reviewer": {
                "name": "Brad Bishop",
                "email": "bradleyb@fuzziesquirrel.com",
                "username": "bradbishop"
            },
            "message": "Patch Set 2: Code-Review+2"
        },
        {
            "timestamp": 1610643335,
            "reviewer": {
                "name": "Brad Bishop",
                "email": "bradleyb@fuzziesquirrel.com",
                "username": "bradbishop"
            },
            "message": "Change has been successfully rebased and submitted as cf9a8ecdc994f24e7e5d52869fea528424028b8b by Brad Bishop"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "02b17044746e343828a92f0bedfe7a29f3d5410d",
            "parents": [
                "cca31dd086f425c5efb5534ea15eca90a786d587"
            ],
            "ref": "refs/changes/91/39591/1",
            "uploader": {
                "email": "dung@os.amperecomputing.com",
                "username": "dcao-ampere"
            },
            "createdOn": 1610428967,
            "author": {
                "email": "dung@os.amperecomputing.com",
                "username": "dcao-ampere"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "recipes-phosphor/ipmi/phosphor-ipmi-ssif.bb",
                    "line": 9,
                    "reviewer": {
                        "name": "Brad Bishop",
                        "email": "bradleyb@fuzziesquirrel.com",
                        "username": "bradbishop"
                    },
                    "message": "please just use systemd, not obmc-phosphor-systemd"
                },
                {
                    "file": "recipes-phosphor/ipmi/phosphor-ipmi-ssif.bb",
                    "line": 9,
                    "reviewer": {
                        "name": "Thang Q. Nguyen",
                        "email": "thang@os.amperecomputing.com",
                        "username": "thangqn-ampere"
                    },
                    "message": "Let Dung investigate more on this. Removing obmc-phosphor-systemd will make compilation failure:\n\nERROR: phosphor-ipmi-ssif-1.0-r1 do_package: SYSTEMD_SERVICE_phosphor-ipmi-ssif value org.openbmc.HostIpmi.service does not exist\nERROR: Logfile of failure stored in: /openbmc/jade_build/tmp/work/arm1176jzs-openbmc-linux-gnueabi/phosphor-ipmi-ssif/1.0-r1/temp/log.do_package.47683\nERROR: Task (/openbmc/meta-ampere/meta-common/recipes-phosphor/ipmi/phosphor-ipmi-ssif.bb:do_package) failed with exit code '1'"
                },
                {
                    "file": "recipes-phosphor/ipmi/phosphor-ipmi-ssif.bb",
                    "line": 9,
                    "reviewer": {
                        "name": "Brad Bishop",
                        "email": "bradleyb@fuzziesquirrel.com",
                        "username": "bradbishop"
                    },
                    "message": "right - you have to move the unit file to the ssifbridge repository and install it with meson before you can use systemd instead of obmc-phosphor-systemd.  thanks for looking into it."
                },
                {
                    "file": "recipes-phosphor/ipmi/phosphor-ipmi-ssif.bb",
                    "line": 14,
                    "reviewer": {
                        "name": "Brad Bishop",
                        "email": "bradleyb@fuzziesquirrel.com",
                        "username": "bradbishop"
                    },
                    "message": "what happens if we don't have these virtuals?  I'd like to deprecate them or come up with a better abstraction if possible."
                },
                {
                    "file": "recipes-phosphor/ipmi/phosphor-ipmi-ssif.bb",
                    "line": 14,
                    "reviewer": {
                        "name": "Thang Q. Nguyen",
                        "email": "thang@os.amperecomputing.com",
                        "username": "thangqn-ampere"
                    },
                    "message": "The platform .inc file will have below declaration for IPMI:\nPREFERRED_PROVIDER_virtual/obmc-host-ipmi-hw = phosphor-ipmi-ssif\n\nLike the way other platforms do for BT or KCS:\n./meta-arm/conf/machine/include/arm.inc:PREFERRED_PROVIDER_virtual/obmc-host-ipmi-hw = \"phosphor-ipmi-bt\"\n./meta-intel/conf/machine/include/intel.inc:PREFERRED_PROVIDER_virtual/obmc-host-ipmi-hw = \"phosphor-ipmi-kcs\"\n\nWithout these virtuals, the compilation will be fail because no application produce \nvirtual/obmc-host-ipmi-hw."
                },
                {
                    "file": "recipes-phosphor/ipmi/phosphor-ipmi-ssif.bb",
                    "line": 14,
                    "reviewer": {
                        "name": "Brad Bishop",
                        "email": "bradleyb@fuzziesquirrel.com",
                        "username": "bradbishop"
                    },
                    "message": "ok.  thx for trying.  we can refactor later - go ahead and disregard this comment."
                },
                {
                    "file": "recipes-phosphor/ipmi/phosphor-ipmi-ssif.bb",
                    "line": 17,
                    "reviewer": {
                        "name": "Brad Bishop",
                        "email": "bradleyb@fuzziesquirrel.com",
                        "username": "bradbishop"
                    },
                    "message": "above you inherited meson - why is this needed?"
                },
                {
                    "file": "recipes-phosphor/ipmi/phosphor-ipmi-ssif.bb",
                    "line": 17,
                    "reviewer": {
                        "name": "Thang Q. Nguyen",
                        "email": "thang@os.amperecomputing.com",
                        "username": "thangqn-ampere"
                    },
                    "message": "Yes, it does not need. Should be removed."
                },
                {
                    "file": "recipes-phosphor/ipmi/phosphor-ipmi-ssif.bb",
                    "line": 22,
                    "reviewer": {
                        "name": "Brad Bishop",
                        "email": "bradleyb@fuzziesquirrel.com",
                        "username": "bradbishop"
                    },
                    "message": "this is not necessary: https://github.com/openbmc/docs/blob/master/anti-patterns.md#explicit-listing-of-shared-library-packages-in-rdepends-in-bitbake-metadata"
                },
                {
                    "file": "recipes-phosphor/ipmi/phosphor-ipmi-ssif.bb",
                    "line": 22,
                    "reviewer": {
                        "name": "Thang Q. Nguyen",
                        "email": "thang@os.amperecomputing.com",
                        "username": "thangqn-ampere"
                    },
                    "message": "Yes, this should be removed."
                },
                {
                    "file": "recipes-phosphor/ipmi/phosphor-ipmi-ssif.bb",
                    "line": 29,
                    "reviewer": {
                        "name": "Brad Bishop",
                        "email": "bradleyb@fuzziesquirrel.com",
                        "username": "bradbishop"
                    },
                    "message": "why is this here?  Do we really have uapi headers that have not made it into the mainline kernel?  which ones?"
                },
                {
                    "file": "recipes-phosphor/ipmi/phosphor-ipmi-ssif.bb",
                    "line": 29,
                    "reviewer": {
                        "name": "Thang Q. Nguyen",
                        "email": "thang@os.amperecomputing.com",
                        "username": "thangqn-ampere"
                    },
                    "message": "Yes, this should be removed."
                },
                {
                    "file": "recipes-phosphor/ipmi/phosphor-ipmi-ssif/org.openbmc.HostIpmi.service",
                    "line": 0,
                    "reviewer": {
                        "name": "Brad Bishop",
                        "email": "bradleyb@fuzziesquirrel.com",
                        "username": "bradbishop"
                    },
                    "message": "please move this file to the ssifbridge repository and install it with meson"
                },
                {
                    "file": "recipes-phosphor/ipmi/phosphor-ipmi-ssif/org.openbmc.HostIpmi.service",
                    "line": 11,
                    "reviewer": {
                        "name": "Brad Bishop",
                        "email": "bradleyb@fuzziesquirrel.com",
                        "username": "bradbishop"
                    },
                    "message": "please don't start this way: https://github.com/openbmc/docs/blob/master/anti-patterns.md#use-of-usrbinenv-in-systemd-service-files"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "recipes-phosphor/ipmi/phosphor-ipmi-ssif.bb",
                    "type": "ADDED",
                    "insertions": 31,
                    "deletions": 0
                },
                {
                    "file": "recipes-phosphor/ipmi/phosphor-ipmi-ssif/org.openbmc.HostIpmi.service",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 47,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "c21a34b6c423a50a25b4ad3f38ee382a9dcdf252",
            "parents": [
                "cca31dd086f425c5efb5534ea15eca90a786d587"
            ],
            "ref": "refs/changes/91/39591/2",
            "uploader": {
                "email": "dung@os.amperecomputing.com",
                "username": "dcao-ampere"
            },
            "createdOn": 1610601523,
            "author": {
                "email": "dung@os.amperecomputing.com",
                "username": "dcao-ampere"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "recipes-phosphor/ipmi/phosphor-ipmi-ssif.bb",
                    "type": "ADDED",
                    "insertions": 24,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 24,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "cf9a8ecdc994f24e7e5d52869fea528424028b8b",
            "parents": [
                "80b9baede615563bc15e5218cb051f57ae451b8d"
            ],
            "ref": "refs/changes/91/39591/3",
            "uploader": {
                "name": "Brad Bishop",
                "email": "bradleyb@fuzziesquirrel.com",
                "username": "bradbishop"
            },
            "createdOn": 1610643335,
            "author": {
                "email": "dung@os.amperecomputing.com",
                "username": "dcao-ampere"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "recipes-phosphor/ipmi/phosphor-ipmi-ssif.bb",
                    "type": "ADDED",
                    "insertions": 24,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 24,
            "sizeDeletions": 0
        }
    ]
}