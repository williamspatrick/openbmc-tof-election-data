{
    "project": "openbmc/pldm",
    "branch": "master",
    "id": "Ife0ab62cf0890d0144b1fda1c4ba5e9262be4714",
    "number": 43948,
    "subject": "libpldm: Add API to decode component image info",
    "owner": {
        "name": "Tom Joseph",
        "email": "rushtotom@gmail.com",
        "username": "tomjoseph83"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/pldm/+/43948",
    "commitMessage": "libpldm: Add API to decode component image info\n\nThis patch provides API to decode the individual component image\ninformation and also do basic validation.\n\nThe API works with DSP0267_1.1.0, DSP0267_1.0.1 and DSP0267_1.0.0.\n\nTested: Unit tests passed\n\nSigned-off-by: Tom Joseph <rushtotom@gmail.com>\nChange-Id: Ife0ab62cf0890d0144b1fda1c4ba5e9262be4714\n",
    "createdOn": 1623304775,
    "lastUpdated": 1624540389,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1623304775,
            "reviewer": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1623304798,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1623304806,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/2122/ (1/2)\n\nppc64le CI Build Started"
        },
        {
            "timestamp": 1623306833,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/2122/ : ppc64le CI Build Successful\n\nhttps://jenkins.openbmc.org/job/ci-repository/19225/ : SUCCESS"
        },
        {
            "timestamp": 1623393945,
            "reviewer": {
                "name": "Gokul Sanker V G",
                "email": "gokul.sanker.v.g@intel.com",
                "username": "gokulsvg"
            },
            "message": "Uploaded patch set 2: Patch Set 1 was rebased."
        },
        {
            "timestamp": 1623393978,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1623393984,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/2128/ (1/2)\n\nppc64le CI Build Started"
        },
        {
            "timestamp": 1623396474,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/2128/ : ppc64le CI Build Successful\n\nhttps://jenkins.openbmc.org/job/ci-repository/19479/ : SUCCESS"
        },
        {
            "timestamp": 1624363418,
            "reviewer": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "message": "Uploaded patch set 3: Patch Set 2 was rebased."
        },
        {
            "timestamp": 1624363434,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1624363443,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/2235/ (1/2)\n\nppc64le CI Build Started"
        },
        {
            "timestamp": 1624364449,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/2235/ : ppc64le CI Build Successful\n\nhttps://jenkins.openbmc.org/job/ci-repository/20367/ : SUCCESS"
        },
        {
            "timestamp": 1624365587,
            "reviewer": {
                "email": "raja.sekhar.reddy.gade@linux.intel.com",
                "username": "Gade-RajasekharReddy"
            },
            "message": "Patch Set 3:\n\n(3 comments)"
        },
        {
            "timestamp": 1624379002,
            "reviewer": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "message": "Patch Set 3:\n\n(3 comments)"
        },
        {
            "timestamp": 1624433768,
            "reviewer": {
                "email": "raja.sekhar.reddy.gade@linux.intel.com",
                "username": "Gade-RajasekharReddy"
            },
            "message": "Patch Set 3:\n\n(3 comments)"
        },
        {
            "timestamp": 1624435412,
            "reviewer": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "message": "Patch Set 3:\n\n(3 comments)"
        },
        {
            "timestamp": 1624435453,
            "reviewer": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "message": "Uploaded patch set 4: Patch Set 3 was rebased."
        },
        {
            "timestamp": 1624435480,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1624435486,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/2255/ (1/2)\n\nppc64le CI Build Started"
        },
        {
            "timestamp": 1624436736,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/2255/ : ppc64le CI Build Successful\n\nhttps://jenkins.openbmc.org/job/ci-repository/20467/ : SUCCESS"
        },
        {
            "timestamp": 1624439596,
            "reviewer": {
                "email": "raja.sekhar.reddy.gade@linux.intel.com",
                "username": "Gade-RajasekharReddy"
            },
            "message": "Patch Set 4: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1624532682,
            "reviewer": {
                "name": "Deepak Kodihalli",
                "email": "deepak.kodihalli.83@gmail.com",
                "username": "dkodihal"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1624540249,
            "reviewer": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "message": "Patch Set 4: Code-Review+2"
        },
        {
            "timestamp": 1624540389,
            "reviewer": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "message": "Change has been successfully rebased and submitted as 58cc172cb54c9cef197d913936fa48c26497edec by Tom Joseph"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "b762f7a39f4b6040bbc34a791a326f2e3e1b0738",
            "parents": [
                "66c2291177f9ade7e68be1a8a6a1311a9b69f824"
            ],
            "ref": "refs/changes/48/43948/1",
            "uploader": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "createdOn": 1623304775,
            "author": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "libpldm/firmware_update.c",
                    "type": "MODIFIED",
                    "insertions": 64,
                    "deletions": 0
                },
                {
                    "file": "libpldm/firmware_update.h",
                    "type": "MODIFIED",
                    "insertions": 33,
                    "deletions": 0
                },
                {
                    "file": "libpldm/tests/libpldm_firmware_update_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 139,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 236,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "110c4788048b82e3c2ade1e09c0278dbb9d1cd0f",
            "parents": [
                "7aadaf465212d675e39b75978ea9fdcd2e7790e4"
            ],
            "ref": "refs/changes/48/43948/2",
            "uploader": {
                "name": "Gokul Sanker V G",
                "email": "gokul.sanker.v.g@intel.com",
                "username": "gokulsvg"
            },
            "createdOn": 1623393945,
            "author": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "libpldm/firmware_update.c",
                    "type": "MODIFIED",
                    "insertions": 64,
                    "deletions": 0
                },
                {
                    "file": "libpldm/firmware_update.h",
                    "type": "MODIFIED",
                    "insertions": 33,
                    "deletions": 0
                },
                {
                    "file": "libpldm/tests/libpldm_firmware_update_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 139,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 236,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "79d626bd94c06257d807b5cabc06785b61573580",
            "parents": [
                "4dde304e1e1268673ee61d1bb32253d3ab97b3d1"
            ],
            "ref": "refs/changes/48/43948/3",
            "uploader": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "createdOn": 1624363418,
            "author": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "libpldm/firmware_update.c",
                    "line": 327,
                    "reviewer": {
                        "email": "raja.sekhar.reddy.gade@linux.intel.com",
                        "username": "Gade-RajasekharReddy"
                    },
                    "message": "please verify the validity of comp_classification"
                },
                {
                    "file": "libpldm/firmware_update.c",
                    "line": 327,
                    "reviewer": {
                        "name": "Tom Joseph",
                        "email": "rushtotom@gmail.com",
                        "username": "tomjoseph83"
                    },
                    "message": "I intentionally avoided the validation here, if we look at the spec no value is invalid and additionally wanted any version specific check to be handled by the package specific parser."
                },
                {
                    "file": "libpldm/firmware_update.c",
                    "line": 327,
                    "reviewer": {
                        "email": "raja.sekhar.reddy.gade@linux.intel.com",
                        "username": "Gade-RajasekharReddy"
                    },
                    "message": "ok"
                },
                {
                    "file": "libpldm/firmware_update.c",
                    "line": 327,
                    "reviewer": {
                        "name": "Tom Joseph",
                        "email": "rushtotom@gmail.com",
                        "username": "tomjoseph83"
                    },
                    "message": "Done"
                },
                {
                    "file": "libpldm/firmware_update.c",
                    "line": 329,
                    "reviewer": {
                        "email": "raja.sekhar.reddy.gade@linux.intel.com",
                        "username": "Gade-RajasekharReddy"
                    },
                    "message": "we could validate the below as well\nIf ComponentClassification = 0xFFFF to state this component image is for a downstream device,\nthen this field shall be set to 0xFFFF in the package header."
                },
                {
                    "file": "libpldm/firmware_update.c",
                    "line": 329,
                    "reviewer": {
                        "name": "Tom Joseph",
                        "email": "rushtotom@gmail.com",
                        "username": "tomjoseph83"
                    },
                    "message": "Right, the validation can happen at the PackageVersion2 specific parser."
                },
                {
                    "file": "libpldm/firmware_update.c",
                    "line": 329,
                    "reviewer": {
                        "email": "raja.sekhar.reddy.gade@linux.intel.com",
                        "username": "Gade-RajasekharReddy"
                    },
                    "message": "ok"
                },
                {
                    "file": "libpldm/firmware_update.c",
                    "line": 329,
                    "reviewer": {
                        "name": "Tom Joseph",
                        "email": "rushtotom@gmail.com",
                        "username": "tomjoseph83"
                    },
                    "message": "Done"
                },
                {
                    "file": "libpldm/firmware_update.c",
                    "line": 332,
                    "reviewer": {
                        "email": "raja.sekhar.reddy.gade@linux.intel.com",
                        "username": "Gade-RajasekharReddy"
                    },
                    "message": "i think we can add helpers to validate the required fields"
                },
                {
                    "file": "libpldm/firmware_update.c",
                    "line": 332,
                    "reviewer": {
                        "name": "Tom Joseph",
                        "email": "rushtotom@gmail.com",
                        "username": "tomjoseph83"
                    },
                    "message": "What is the specific validation you are suggesting?"
                },
                {
                    "file": "libpldm/firmware_update.c",
                    "line": 332,
                    "reviewer": {
                        "email": "raja.sekhar.reddy.gade@linux.intel.com",
                        "username": "Gade-RajasekharReddy"
                    },
                    "message": "my intention is to validate the variables for proper values.\nEg: requested_comp_activation_method can have values for bits 0 to 5 and remaining are reserved. We should not set any reserved bits. Please correct me if i am wrong."
                },
                {
                    "file": "libpldm/firmware_update.c",
                    "line": 332,
                    "reviewer": {
                        "name": "Tom Joseph",
                        "email": "rushtotom@gmail.com",
                        "username": "tomjoseph83"
                    },
                    "message": "I did give it a thought on how much validation should happen for bitfields in libpldm apis. Between different versions of the firmware update spec we can see that bitfields range keep increasing. For example in 1.1.0 ComponentActivationMethods has two more supported bits [7],[6] compared to 1.0.0 and 1.0.1. Even though RequestedComponentActivationMethods is same across the versions, it can change in a later version. To keep the libpldm APIs as much reusable across different versions I am leaning towards keeping bitfield reserved bits validation in version specific package parser. Let me know your thoughts."
                },
                {
                    "file": "libpldm/firmware_update.c",
                    "line": 332,
                    "reviewer": {
                        "email": "raja.sekhar.reddy.gade@linux.intel.com",
                        "username": "Gade-RajasekharReddy"
                    },
                    "message": "agree"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "libpldm/firmware_update.c",
                    "type": "MODIFIED",
                    "insertions": 64,
                    "deletions": 0
                },
                {
                    "file": "libpldm/firmware_update.h",
                    "type": "MODIFIED",
                    "insertions": 33,
                    "deletions": 0
                },
                {
                    "file": "libpldm/tests/libpldm_firmware_update_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 139,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 236,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "8e4f14cc8f0f2a43e38f874a30660b92dba0c649",
            "parents": [
                "1d48ef84a6477c69a9bac185104bc960ad4d1d49"
            ],
            "ref": "refs/changes/48/43948/4",
            "uploader": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "createdOn": 1624435453,
            "author": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "libpldm/firmware_update.c",
                    "type": "MODIFIED",
                    "insertions": 64,
                    "deletions": 0
                },
                {
                    "file": "libpldm/firmware_update.h",
                    "type": "MODIFIED",
                    "insertions": 33,
                    "deletions": 0
                },
                {
                    "file": "libpldm/tests/libpldm_firmware_update_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 139,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 236,
            "sizeDeletions": 0
        },
        {
            "number": 5,
            "revision": "58cc172cb54c9cef197d913936fa48c26497edec",
            "parents": [
                "64af3454a09767eeadd70d25b94b5d6e6e164bec"
            ],
            "ref": "refs/changes/48/43948/5",
            "uploader": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "createdOn": 1624540389,
            "author": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "libpldm/firmware_update.c",
                    "type": "MODIFIED",
                    "insertions": 64,
                    "deletions": 0
                },
                {
                    "file": "libpldm/firmware_update.h",
                    "type": "MODIFIED",
                    "insertions": 33,
                    "deletions": 0
                },
                {
                    "file": "libpldm/tests/libpldm_firmware_update_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 139,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 236,
            "sizeDeletions": 0
        }
    ]
}