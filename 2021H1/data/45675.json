{
    "project": "openbmc/entity-manager",
    "branch": "master",
    "id": "I148f91e0fc0598bdc813a18ad8e65179453c4807",
    "number": 45675,
    "subject": "Units: Use full paths for valid unit types",
    "owner": {
        "name": "Rashmica K Gupta",
        "email": "rashmica.g@gmail.com",
        "username": "RashmicaG"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/entity-manager/+/45675",
    "commitMessage": "Units: Use full paths for valid unit types\n\nSigned-off-by: Rashmica Gupta <rashmica.g@gmail.com>\nChange-Id: I148f91e0fc0598bdc813a18ad8e65179453c4807\n",
    "createdOn": 1628234096,
    "lastUpdated": 1639029610,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1628234096,
            "reviewer": {
                "name": "Rashmica K Gupta",
                "email": "rashmica.g@gmail.com",
                "username": "RashmicaG"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1628234111,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1628234444,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/23958/ : FAILURE"
        },
        {
            "timestamp": 1628235699,
            "reviewer": {
                "name": "Rashmica K Gupta",
                "email": "rashmica.g@gmail.com",
                "username": "RashmicaG"
            },
            "message": "Uploaded patch set 2: Patch Set 1 was rebased."
        },
        {
            "timestamp": 1628235722,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1628236230,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/23961/ : SUCCESS"
        },
        {
            "timestamp": 1628236317,
            "reviewer": {
                "name": "Rashmica K Gupta",
                "email": "rashmica.g@gmail.com",
                "username": "RashmicaG"
            },
            "message": "Patch Set 2:\n\nThis change is ready for review."
        },
        {
            "timestamp": 1628264054,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1628582793,
            "reviewer": {
                "name": "Rashmica K Gupta",
                "email": "rashmica.g@gmail.com",
                "username": "RashmicaG"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1628591840,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1628618171,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1629126053,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1629135557,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1630463515,
            "reviewer": {
                "name": "Rashmica K Gupta",
                "email": "rashmica.g@gmail.com",
                "username": "RashmicaG"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1639029610,
            "reviewer": {
                "name": "Rashmica K Gupta",
                "email": "rashmica.g@gmail.com",
                "username": "RashmicaG"
            },
            "message": "Abandoned\n\nNeeds more discussion."
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "a8a0862b2da6bd9317821537279a20ea03f5e9d5",
            "parents": [
                "f8aeecdb7ee842bc38efd654a5b86abc0d32795d"
            ],
            "ref": "refs/changes/75/45675/1",
            "uploader": {
                "name": "Rashmica K Gupta",
                "email": "rashmica.g@gmail.com",
                "username": "RashmicaG"
            },
            "createdOn": 1628234096,
            "author": {
                "name": "Rashmica K Gupta",
                "email": "rashmica.g@gmail.com",
                "username": "RashmicaG"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "schemas/legacy.json",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -10
                }
            ],
            "sizeInsertions": 10,
            "sizeDeletions": 10
        },
        {
            "number": 2,
            "revision": "d4f39ebcc21446ba55e35c4cbb9e5a815e14d16a",
            "parents": [
                "5dbaece59ca4e3ee73d16e6559127607372f2806"
            ],
            "ref": "refs/changes/75/45675/2",
            "uploader": {
                "name": "Rashmica K Gupta",
                "email": "rashmica.g@gmail.com",
                "username": "RashmicaG"
            },
            "createdOn": 1628235699,
            "author": {
                "name": "Rashmica K Gupta",
                "email": "rashmica.g@gmail.com",
                "username": "RashmicaG"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "schemas/legacy.json",
                    "line": 530,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I think I misunderstood when you proposed this.  The config files shouldn't have anything dbus specific in them, and the old mechanisms for this were better, and don't require changing everyones config.\n\nIf we want to add the prefix we should be doing it in code."
                },
                {
                    "file": "schemas/legacy.json",
                    "line": 530,
                    "reviewer": {
                        "name": "Rashmica K Gupta",
                        "email": "rashmica.g@gmail.com",
                        "username": "RashmicaG"
                    },
                    "message": "OK"
                },
                {
                    "file": "schemas/legacy.json",
                    "line": 530,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "> The config files shouldn't have anything dbus specific in them, and the old mechanisms for this were better\n\nCan you expand on why?  I don't agree on the surface.  I'd like some more of your thoughts to back this up.  ie. why \"shouldn't\" and how was \"the old mechanism\" \"better\"?\n\nIt seems pointless to me to have this mapping spread around the code when we generate it already.  It isn't \"dbus specific\", it just happens to be the identifier scheme we've come up with."
                },
                {
                    "file": "schemas/legacy.json",
                    "line": 530,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> > The config files shouldn't have anything dbus specific in them, and the old mechanisms for this were better\n> \n> Can you expand on why?  I don't agree on the surface.  I'd like some more of your thoughts to back this up.  ie. why \"shouldn't\" and how was \"the old mechanism\" \"better\"?\n\nBecause the config files are designed to be used by an openbmc user, possibly a hardware person, not an openbmc developer.  In general, we shouldn't be exposing internal interface details on a user facing API.  For example, if we ever built a sensor subsystem that didn't use dbus at all (unlikely, but possible) the config files should be able to survive that without a backward compatibility issue.  If we ever dropped the prefix on the enum Units on dbus (also unlikely, but possible) that should also have a schema that can survive.\n\n> \n> It seems pointless to me to have this mapping spread around the code when we generate it already.  It isn't \"dbus specific\", it just happens to be the identifier scheme we've come up with.\n\nIt's an identifier that's used on dbus and is specific to the sensor interface.  I don't think it's used anywhere outside of dbus today?"
                },
                {
                    "file": "schemas/legacy.json",
                    "line": 530,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "It would be nice if we could induce EM to do the transformation of these enumerations then so the transformation isn't spread around.\n\nIs there any good way to keep the Units-enum values here in sync with what is in PDI?"
                },
                {
                    "file": "schemas/legacy.json",
                    "line": 530,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> It would be nice if we could induce EM to do the transformation of these enumerations then so the transformation isn't spread around.\n\nI thought there was already a patchset to do that.\n\n> \n> Is there any good way to keep the Units-enum values here in sync with what is in PDI?\n\nRemove it entirely, and derive the units automatically as a combination of the input parameters?  At the very least allowing a default of \"same units as the first sensor in the list\" would cover 90+% of the cases where median is used.\n\nWith that said, open to other ideas here.   Ignoring downstream platforms, everyone adding a new exposes record will have to check into this repo anyway, so it's not a huge difference in effort having this desynced from PDI.  For downstream platforms, yeah, that'll be a pain because you'll have to maintain a patch against the schemas, but I'm ok making downstream harder in this case.  Get your config files upstreamed."
                },
                {
                    "file": "schemas/legacy.json",
                    "line": 530,
                    "reviewer": {
                        "name": "Rashmica K Gupta",
                        "email": "rashmica.g@gmail.com",
                        "username": "RashmicaG"
                    },
                    "message": "> I thought there was already a patchset to do that.\nIs this what you thought I was going to do when I asked about using the full unit path on discord? If that's the case, I can look into that."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "schemas/legacy.json",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -10
                }
            ],
            "sizeInsertions": 10,
            "sizeDeletions": 10
        }
    ]
}