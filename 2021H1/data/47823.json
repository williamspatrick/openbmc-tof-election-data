{
    "project": "openbmc/phosphor-ipmi-flash",
    "branch": "master",
    "id": "Icfcc1d0c9ef20aa04de754bfe2da04add6ee51e6",
    "number": 47823,
    "subject": "tools: Support more frequent status checks",
    "owner": {
        "name": "William A. Kennington III",
        "email": "wak@google.com",
        "username": "wak-google"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-ipmi-flash/+/47823",
    "commitMessage": "tools: Support more frequent status checks\n\nThis changes the check logic to query the BMC more frequently at the\nbeginning and exponentially back off if the BMC is not yet ready. This\nmakes short updates significantly faster.\n\nChange-Id: Icfcc1d0c9ef20aa04de754bfe2da04add6ee51e6\nSigned-off-by: William A. Kennington III <wak@google.com>\n",
    "createdOn": 1634187083,
    "lastUpdated": 1634237958,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1634187083,
            "reviewer": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1634187104,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1634187527,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/28241/ : SUCCESS"
        },
        {
            "timestamp": 1634193348,
            "reviewer": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1634193360,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1634193418,
            "reviewer": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1634193430,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1634193434,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/28245/ : ABORTED"
        },
        {
            "timestamp": 1634193722,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/28246/ : FAILURE"
        },
        {
            "timestamp": 1634194871,
            "reviewer": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1634194890,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1634195176,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/28250/ : FAILURE"
        },
        {
            "timestamp": 1634195708,
            "reviewer": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1634195720,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1634196008,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/28253/ : FAILURE"
        },
        {
            "timestamp": 1634196123,
            "reviewer": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "message": "Uploaded patch set 6."
        },
        {
            "timestamp": 1634196135,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1634196533,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/28255/ : SUCCESS"
        },
        {
            "timestamp": 1634199991,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 6:\n\n(3 comments)"
        },
        {
            "timestamp": 1634203868,
            "reviewer": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "message": "Uploaded patch set 7."
        },
        {
            "timestamp": 1634203882,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1634203959,
            "reviewer": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "message": "Uploaded patch set 8."
        },
        {
            "timestamp": 1634203972,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1634203975,
            "reviewer": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "message": "Patch Set 8:\n\n(3 comments)"
        },
        {
            "timestamp": 1634203976,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/28267/ : ABORTED"
        },
        {
            "timestamp": 1634204371,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/28269/ : SUCCESS"
        },
        {
            "timestamp": 1634225042,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 8: Code-Review+1\n\n(2 comments)"
        },
        {
            "timestamp": 1634234613,
            "reviewer": {
                "name": "Brandon Kim",
                "email": "brandonkim@google.com",
                "username": "brandonkimbk"
            },
            "message": "Patch Set 8: Code-Review+2\n\nThis is pretty awesome"
        },
        {
            "timestamp": 1634237070,
            "reviewer": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "message": "Uploaded patch set 9: Patch Set 8 was rebased."
        },
        {
            "timestamp": 1634237083,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1634237477,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/28298/ : SUCCESS"
        },
        {
            "timestamp": 1634237958,
            "reviewer": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "message": "Change has been successfully merged by William A. Kennington III"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "40f42ecffa5e503c8e4228743c4373063311489c",
            "parents": [
                "9b7a3b4fc71d100f2ad29bdf01143f8fb8deb838"
            ],
            "ref": "refs/changes/23/47823/1",
            "uploader": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "createdOn": 1634187083,
            "author": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "tools/helper.cpp",
                    "type": "MODIFIED",
                    "insertions": 28,
                    "deletions": -16
                }
            ],
            "sizeInsertions": 28,
            "sizeDeletions": 16
        },
        {
            "number": 2,
            "revision": "48ca83079c281d3aaaf814db04077bc1a9bd749d",
            "parents": [
                "9b7a3b4fc71d100f2ad29bdf01143f8fb8deb838"
            ],
            "ref": "refs/changes/23/47823/2",
            "uploader": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "createdOn": 1634193348,
            "author": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "tools/helper.cpp",
                    "type": "MODIFIED",
                    "insertions": 70,
                    "deletions": -98
                }
            ],
            "sizeInsertions": 70,
            "sizeDeletions": 98
        },
        {
            "number": 3,
            "revision": "afefd435651e573c5361b212486edc24cd7081bd",
            "parents": [
                "9b7a3b4fc71d100f2ad29bdf01143f8fb8deb838"
            ],
            "ref": "refs/changes/23/47823/3",
            "uploader": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "createdOn": 1634193418,
            "author": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "tools/helper.cpp",
                    "type": "MODIFIED",
                    "insertions": 70,
                    "deletions": -98
                }
            ],
            "sizeInsertions": 70,
            "sizeDeletions": 98
        },
        {
            "number": 4,
            "revision": "708fe78b6a8a886b171f7f9278152f7b6a8fdc7e",
            "parents": [
                "9b7a3b4fc71d100f2ad29bdf01143f8fb8deb838"
            ],
            "ref": "refs/changes/23/47823/4",
            "uploader": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "createdOn": 1634194871,
            "author": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "tools/handler.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -7
                },
                {
                    "file": "tools/helper.cpp",
                    "type": "MODIFIED",
                    "insertions": 70,
                    "deletions": -98
                },
                {
                    "file": "tools/test/tools_updater_unittest.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 79,
            "sizeDeletions": 108
        },
        {
            "number": 5,
            "revision": "bbaaeab8e03dd9677d9694d4c324472cff2c3e86",
            "parents": [
                "9b7a3b4fc71d100f2ad29bdf01143f8fb8deb838"
            ],
            "ref": "refs/changes/23/47823/5",
            "uploader": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "createdOn": 1634195708,
            "author": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "tools/handler.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -7
                },
                {
                    "file": "tools/helper.cpp",
                    "type": "MODIFIED",
                    "insertions": 70,
                    "deletions": -98
                },
                {
                    "file": "tools/test/tools_helper_unittest.cpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -3
                },
                {
                    "file": "tools/test/tools_updater_unittest.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 82,
            "sizeDeletions": 111
        },
        {
            "number": 6,
            "revision": "8c39ac13f094a9f08babfbe96d892e7f6fc903ac",
            "parents": [
                "9b7a3b4fc71d100f2ad29bdf01143f8fb8deb838"
            ],
            "ref": "refs/changes/23/47823/6",
            "uploader": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "createdOn": 1634196123,
            "author": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "tools/helper.cpp",
                    "line": 70,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "Is this just used to make sure that when the sleep is over the total time is over the timeout?\n\ndo we need this tho? it is at most 1 sec right now. but I guess it is fine eitherway."
                },
                {
                    "file": "tools/helper.cpp",
                    "line": 70,
                    "reviewer": {
                        "name": "William A. Kennington III",
                        "email": "wak@google.com",
                        "username": "wak-google"
                    },
                    "message": "It was just to avoid having to sleep and then terminate. It's nice to have and not too hard to reason about. Commented in the file."
                },
                {
                    "file": "tools/helper.cpp",
                    "line": 70,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "ack"
                },
                {
                    "file": "tools/helper.cpp",
                    "line": 97,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "do we know why this the required size of metadata is 1? is this just in here or across the whole program?\n\nCan/should we change the type?"
                },
                {
                    "file": "tools/helper.cpp",
                    "line": 97,
                    "reviewer": {
                        "name": "William A. Kennington III",
                        "email": "wak@google.com",
                        "username": "wak-google"
                    },
                    "message": "Because the next thing it does is `resp.metadata[0]`. It's only for blobs that perform a background action like verifying and activating."
                },
                {
                    "file": "tools/helper.cpp",
                    "line": 97,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "ack"
                },
                {
                    "file": "tools/helper.cpp",
                    "line": 139,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "don't need the else?"
                },
                {
                    "file": "tools/helper.cpp",
                    "line": 139,
                    "reviewer": {
                        "name": "William A. Kennington III",
                        "email": "wak@google.com",
                        "username": "wak-google"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "tools/handler.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -7
                },
                {
                    "file": "tools/helper.cpp",
                    "type": "MODIFIED",
                    "insertions": 70,
                    "deletions": -98
                },
                {
                    "file": "tools/test/tools_helper_unittest.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -3
                },
                {
                    "file": "tools/test/tools_updater_unittest.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 83,
            "sizeDeletions": 111
        },
        {
            "number": 7,
            "revision": "4b7f8f4dbd0656a4e098dcf6ad9f452159c42a09",
            "parents": [
                "07eead118d0b5fdb7bc10c2fd17dd26376af9df5"
            ],
            "ref": "refs/changes/23/47823/7",
            "uploader": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "createdOn": 1634203868,
            "author": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "tools/helper.cpp",
                    "type": "MODIFIED",
                    "insertions": 64,
                    "deletions": -97
                }
            ],
            "sizeInsertions": 64,
            "sizeDeletions": 97
        },
        {
            "number": 8,
            "revision": "cdb05385c2594c311e3866d5f531b6cf9918c702",
            "parents": [
                "07eead118d0b5fdb7bc10c2fd17dd26376af9df5"
            ],
            "ref": "refs/changes/23/47823/8",
            "uploader": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "createdOn": 1634203959,
            "author": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "tools/helper.cpp",
                    "type": "MODIFIED",
                    "insertions": 66,
                    "deletions": -97
                }
            ],
            "sizeInsertions": 66,
            "sizeDeletions": 97
        },
        {
            "number": 9,
            "revision": "cf37663be89f128642092f7e04d8b6f00543b357",
            "parents": [
                "f88bcf3babb0de4795ddc5f6ba74be67c5d1605b"
            ],
            "ref": "refs/changes/23/47823/9",
            "uploader": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "createdOn": 1634237070,
            "author": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "tools/helper.cpp",
                    "type": "MODIFIED",
                    "insertions": 66,
                    "deletions": -97
                }
            ],
            "sizeInsertions": 66,
            "sizeDeletions": 97
        }
    ]
}