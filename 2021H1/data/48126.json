{
    "project": "openbmc/phosphor-networkd",
    "branch": "master",
    "id": "I00772361090430ff79a5dd1dcf6cc6077f3f55f1",
    "number": 48126,
    "subject": "routing_table: Use common netlink parser",
    "owner": {
        "name": "William A. Kennington III",
        "email": "wak@google.com",
        "username": "wak-google"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-networkd/+/48126",
    "commitMessage": "routing_table: Use common netlink parser\n\nThis reduces the LOC and redundant netlink parsing logic that is\nuntested.\n\nIt also happens to fix an issue with the current parsing breaking with\nsome of the routes returned by the kernel\n```\n[19259.086333] phosphor-network-manager[400]: Refreshing the objects.\n[19259.094507] phosphor-network-manager[400]: Error validating header\n[19259.095419] phosphor-network-manager[400]: The operation failed internally.\n[19259.124862] phosphor-network-manager[400]: Error validating header\n[19259.125593] phosphor-network-manager[400]: The operation failed internally.\n[19259.143722] phosphor-network-manager[400]: Error validating header\n[19259.144569] phosphor-network-manager[400]: The operation failed internally.\n[19259.165901] phosphor-network-manager[400]: Error validating header\n[19259.169497] phosphor-network-manager[400]: The operation failed internally.\n[19259.204178] phosphor-network-manager[400]: Error validating header\n[19259.204838] phosphor-network-manager[400]: The operation failed internally.\n[19259.223547] phosphor-network-manager[400]: Error validating header\n[19259.224302] phosphor-network-manager[400]: The operation failed internally.\n[19259.604162] phosphor-network-manager[400]: Error validating header\n[19259.605017] phosphor-network-manager[400]: The operation failed internally.\n[19259.623701] phosphor-network-manager[400]: Refreshing complete.\n```\n\nChange-Id: I00772361090430ff79a5dd1dcf6cc6077f3f55f1\nSigned-off-by: William A. Kennington III <wak@google.com>\n",
    "createdOn": 1635030454,
    "lastUpdated": 1635243191,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1635030454,
            "reviewer": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1635030480,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1635030708,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/28863/ : SUCCESS"
        },
        {
            "timestamp": 1635030743,
            "reviewer": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1635030754,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1635030791,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/28865/ : FAILURE"
        },
        {
            "timestamp": 1635031146,
            "reviewer": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1635031159,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1635031295,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/28867/ : SUCCESS"
        },
        {
            "timestamp": 1635133181,
            "reviewer": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1635135390,
            "reviewer": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1635157086,
            "reviewer": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "message": "Patch Set 3: Code-Review+2\n\n(1 comment)"
        },
        {
            "timestamp": 1635197930,
            "reviewer": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "message": "Uploaded patch set 4: Patch Set 3 was rebased."
        },
        {
            "timestamp": 1635197945,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1635198094,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/28960/ : SUCCESS"
        },
        {
            "timestamp": 1635243191,
            "reviewer": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "message": "Change has been successfully merged by William A. Kennington III"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "44e9d784863e21c8ae94a3d352f8fdf8420d8515",
            "parents": [
                "bd649af91ed1fe74efd745e398d5640f4ab6e5af"
            ],
            "ref": "refs/changes/26/48126/1",
            "uploader": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "createdOn": 1635030454,
            "author": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 34,
                    "deletions": 0
                },
                {
                    "file": "src/routing_table.cpp",
                    "type": "MODIFIED",
                    "insertions": 26,
                    "deletions": -144
                },
                {
                    "file": "src/routing_table.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -15
                }
            ],
            "sizeInsertions": 28,
            "sizeDeletions": 159
        },
        {
            "number": 2,
            "revision": "2a7102a1f46f9dd15a894ba7e49e3e1fe773b9c4",
            "parents": [
                "bd649af91ed1fe74efd745e398d5640f4ab6e5af"
            ],
            "ref": "refs/changes/26/48126/2",
            "uploader": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "createdOn": 1635030743,
            "author": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 34,
                    "deletions": 0
                },
                {
                    "file": "src/routing_table.cpp",
                    "type": "MODIFIED",
                    "insertions": 26,
                    "deletions": -144
                },
                {
                    "file": "src/routing_table.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -23
                }
            ],
            "sizeInsertions": 28,
            "sizeDeletions": 167
        },
        {
            "number": 3,
            "revision": "94e15ab181b39602ee48e0ef9665e54a27b22f26",
            "parents": [
                "bd649af91ed1fe74efd745e398d5640f4ab6e5af"
            ],
            "ref": "refs/changes/26/48126/3",
            "uploader": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "createdOn": 1635031146,
            "author": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "src/routing_table.cpp",
                    "line": 88,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "Do you mean to say that length of source should be 0 then the destination address for the default gateway?\nrtm_src_len==0"
                },
                {
                    "file": "src/routing_table.cpp",
                    "line": 88,
                    "reviewer": {
                        "name": "William A. Kennington III",
                        "email": "wak@google.com",
                        "username": "wak-google"
                    },
                    "message": "No, the gateway is always a destination (all addresses) of ::/0. The bytes in the address don't matter, all we need to know is that the prefix length is 0.\n\nThe source address for a route is used for output packets from the current machine to determine their default source address."
                },
                {
                    "file": "src/routing_table.cpp",
                    "line": 88,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "Ack"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 34,
                    "deletions": 0
                },
                {
                    "file": "src/routing_table.cpp",
                    "type": "MODIFIED",
                    "insertions": 26,
                    "deletions": -144
                },
                {
                    "file": "src/routing_table.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -21
                }
            ],
            "sizeInsertions": 28,
            "sizeDeletions": 165
        },
        {
            "number": 4,
            "revision": "e0b8fd6a67564908a97cff9d0bde14069a04a8c5",
            "parents": [
                "c8cda5aeabf2abcb520e77d07c173609fba9026c"
            ],
            "ref": "refs/changes/26/48126/4",
            "uploader": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "createdOn": 1635197930,
            "author": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 34,
                    "deletions": 0
                },
                {
                    "file": "src/routing_table.cpp",
                    "type": "MODIFIED",
                    "insertions": 26,
                    "deletions": -144
                },
                {
                    "file": "src/routing_table.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -21
                }
            ],
            "sizeInsertions": 28,
            "sizeDeletions": 165
        }
    ]
}