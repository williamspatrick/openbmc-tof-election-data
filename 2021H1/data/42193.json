{
    "project": "openbmc/phosphor-psu-code-mgmt",
    "branch": "master",
    "id": "I7ec92dfc1306a53544996a61c79426ede6dac54b",
    "number": 42193,
    "subject": "generate-psu-tar: fix shellcheck warnings",
    "owner": {
        "name": "Patrick Williams",
        "email": "patrick@stwcx.xyz",
        "username": "williamspatrick"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-psu-code-mgmt/+/42193",
    "commitMessage": "generate-psu-tar: fix shellcheck warnings\n\nSigned-off-by: Patrick Williams <patrick@stwcx.xyz>\nChange-Id: I7ec92dfc1306a53544996a61c79426ede6dac54b\n",
    "createdOn": 1618365968,
    "lastUpdated": 1633730457,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1618365968,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1618365983,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1618366506,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/15352/ : SUCCESS"
        },
        {
            "timestamp": 1618368027,
            "reviewer": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "message": "Patch Set 1: Code-Review+1"
        },
        {
            "timestamp": 1618371089,
            "reviewer": {
                "name": "Chicago Duan",
                "email": "duanzhijia01@inspur.com",
                "username": "ChicagoDuan"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1618399690,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1618474199,
            "reviewer": {
                "name": "Chicago Duan",
                "email": "duanzhijia01@inspur.com",
                "username": "ChicagoDuan"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1618509194,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1618509200,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1: Code-Review-1"
        },
        {
            "timestamp": 1630594043,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Uploaded patch set 2: Patch Set 1 was rebased."
        },
        {
            "timestamp": 1630594058,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1630594347,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/25561/ : SUCCESS"
        },
        {
            "timestamp": 1633552774,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Uploaded patch set 3: Patch Set 2 was rebased."
        },
        {
            "timestamp": 1633552786,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1633553075,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/27646/ : SUCCESS"
        },
        {
            "timestamp": 1633684360,
            "reviewer": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "message": "Patch Set 3:\n\n@Patrick @Chicago Do you have any update on this?"
        },
        {
            "timestamp": 1633730457,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 3:\n\n> Patch Set 3:\n> \n> @Patrick @Chicago Do you have any update on this?\n\nI haven't had a chance to follow up on the issues in it.  The noise was created because I forgot I had this commits laying around in the repository and did some automated/scripted changes across a big set of the repositories."
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "772cb443377ced2dbc1508add7c983679749d9a5",
            "parents": [
                "de27029319bf04250d7660976091b7c297ed3c41"
            ],
            "ref": "refs/changes/93/42193/1",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1618365968,
            "author": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "tools/generate-psu-tar",
                    "line": 184,
                    "reviewer": {
                        "name": "Chicago Duan",
                        "email": "duanzhijia01@inspur.com",
                        "username": "ChicagoDuan"
                    },
                    "message": "If files_to_sign is empty, this tar command will fail.\nNo sign parameter, for example: \n./generate-psu-tar --image PSU.hex --version 12-34 --model 432-1 --manufacture LITEON"
                },
                {
                    "file": "tools/generate-psu-tar",
                    "line": 184,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Was this an existing failure or something new I introduced?  It isn't obvious to me that I introduced this.  Do you have any proposal on the fix?"
                },
                {
                    "file": "tools/generate-psu-tar",
                    "line": 184,
                    "reviewer": {
                        "name": "Chicago Duan",
                        "email": "duanzhijia01@inspur.com",
                        "username": "ChicagoDuan"
                    },
                    "message": "It is a new failure you introduced. I think it can be changed to this\uff1a\n\nif [[ \"${do_sign}\" == true ]]; then\n\ttar -cvf \"$outfile\" \"${files_to_sign[@]}\" $additional_files\nelse\n\ttar -cvf \"$outfile\" \"$manifest_location\" \"$image\" $additional_files\nfi"
                },
                {
                    "file": "tools/generate-psu-tar",
                    "line": 184,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Oh.  I understand the issue now.  $public_key_file is sometimes empty and then files_to_sign has an empty string parameter that gets passed along to tar.  I'll fix it.  Thank you for noticing this."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "tools/generate-psu-tar",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": -13
                }
            ],
            "sizeInsertions": 14,
            "sizeDeletions": 13
        },
        {
            "number": 2,
            "revision": "1548660af6e3e6f96fbb20fb44349d259f951457",
            "parents": [
                "7905f587ac6aace27e7238a815b7cf5c1025c6ea"
            ],
            "ref": "refs/changes/93/42193/2",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1630594043,
            "author": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "tools/generate-psu-tar",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": -13
                }
            ],
            "sizeInsertions": 14,
            "sizeDeletions": 13
        },
        {
            "number": 3,
            "revision": "9294a4440681d2e0ff32fee807d68eecfe4907de",
            "parents": [
                "6d62ceb307409a3b5f1b0012558108bfbfa4300c"
            ],
            "ref": "refs/changes/93/42193/3",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1633552774,
            "author": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "tools/generate-psu-tar",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": -13
                }
            ],
            "sizeInsertions": 14,
            "sizeDeletions": 13
        }
    ]
}