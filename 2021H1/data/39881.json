{
    "project": "openbmc/phosphor-dbus-interfaces",
    "branch": "master",
    "topic": "telemetry",
    "id": "I41c31aa2ae091d3283ddb4ec422885483f4d0429",
    "number": 39881,
    "subject": "Add Trigger and TriggerManager interfaces",
    "owner": {
        "name": "Jozef Wludzik",
        "email": "jozef.wludzik@intel.com",
        "username": "jwludzik"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-dbus-interfaces/+/39881",
    "commitMessage": "Add Trigger and TriggerManager interfaces\n\nTrigger and TriggerManager interfaces design are based on Telemetry\ndesign. Interfaces be implemented in openbmc/telemetry repository.\n\nRef.:\n  https://github.com/openbmc/docs/blob/master/designs/telemetry.md\n\nSigned-off-by: Wludzik, Jozef <jozef.wludzik@intel.com>\nChange-Id: I41c31aa2ae091d3283ddb4ec422885483f4d0429\n",
    "createdOn": 1611232206,
    "lastUpdated": 1613050863,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1611232206,
            "reviewer": {
                "name": "Jozef Wludzik",
                "email": "jozef.wludzik@intel.com",
                "username": "jwludzik"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1611232226,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1611232492,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/11246/ : SUCCESS"
        },
        {
            "timestamp": 1611307822,
            "reviewer": {
                "name": "Jozef Wludzik",
                "email": "jozef.wludzik@intel.com",
                "username": "jwludzik"
            },
            "message": "Topic set to telemetry"
        },
        {
            "timestamp": 1611575950,
            "reviewer": {
                "name": "Krzysztof Grobelny",
                "email": "krzysztof.grobelny@intel.com",
                "username": "krzysztof-i"
            },
            "message": "Patch Set 1: Code-Review+1"
        },
        {
            "timestamp": 1612777203,
            "reviewer": {
                "name": "Zbigniew Kurzynski",
                "email": "zbigniew.kurzynski@intel.com",
                "username": "zkurzyns"
            },
            "message": "Patch Set 1: Code-Review+1"
        },
        {
            "timestamp": 1612790949,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\n(2 comments)"
        },
        {
            "timestamp": 1612793994,
            "reviewer": {
                "name": "Jozef Wludzik",
                "email": "jozef.wludzik@intel.com",
                "username": "jwludzik"
            },
            "message": "Patch Set 1:\n\n(2 comments)"
        },
        {
            "timestamp": 1612961590,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1613042684,
            "reviewer": {
                "name": "Jozef Wludzik",
                "email": "jozef.wludzik@intel.com",
                "username": "jwludzik"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1613042710,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1613042995,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/12295/ : SUCCESS"
        },
        {
            "timestamp": 1613045647,
            "reviewer": {
                "name": "Jozef Wludzik",
                "email": "jozef.wludzik@intel.com",
                "username": "jwludzik"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1613050859,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2: Code-Review+2"
        },
        {
            "timestamp": 1613050863,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Change has been successfully merged by Patrick Williams"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "f1252332b9f14738eefc7486eb0b432f2874570d",
            "parents": [
                "6f8ebc58ebe13e97522a7d1740690dde1adadaa8"
            ],
            "ref": "refs/changes/81/39881/1",
            "uploader": {
                "name": "Jozef Wludzik",
                "email": "jozef.wludzik@intel.com",
                "username": "jwludzik"
            },
            "createdOn": 1611232206,
            "author": {
                "name": "Jozef Wludzik",
                "email": "jozef.wludzik@intel.com",
                "username": "jwludzik"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "xyz/openbmc_project/Telemetry/Trigger.interface.yaml",
                    "line": 66,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "We have new thresholds defined now.  Are any of those needed here?\n\nI feel like we should move this enumeration somewhere into the Sensors namespace so that we do not have to maintain it across multiple namespaces.  (ie. when we add a new threshold how do we find this location to update?)."
                },
                {
                    "file": "xyz/openbmc_project/Telemetry/Trigger.interface.yaml",
                    "line": 66,
                    "reviewer": {
                        "name": "Jozef Wludzik",
                        "email": "jozef.wludzik@intel.com",
                        "username": "jwludzik"
                    },
                    "message": "Thanks for comment. It is not connected with Sensors.Threshold interfaces. Type only defines a context of a message that is send when numeric threshold conditions are met.\nThis Trigger interface is based on Redfish Trigger schema. We want to provide an API to a user that allows to define custom thresholds. Interfaces from Sensors namespace are implemented in dbus-sensors services and are critical for system. User should not modify them. Here we come with solution where user is able to set many custom thresholds on different sensors or same sensor. Mostly it could be used as debug tool to catch specific sensor reading. If you feel like this is a wrong way, I can try to connect Trigger with Sensors.Threshold but it limit user to amount of Threshold implemented by dbus-serivces.\nThe other way is to change Type enumaration to string and let user to chose the context of a message, ex. instead of LowerWarning user would set it to 'Lower Warning is reached'"
                },
                {
                    "file": "xyz/openbmc_project/Telemetry/Trigger.interface.yaml",
                    "line": 86,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I\u2019m not sure if these severities all make sense now.  We also added a \u201cPerformanceLoss\u201d threshold recently."
                },
                {
                    "file": "xyz/openbmc_project/Telemetry/Trigger.interface.yaml",
                    "line": 86,
                    "reviewer": {
                        "name": "Jozef Wludzik",
                        "email": "jozef.wludzik@intel.com",
                        "username": "jwludzik"
                    },
                    "message": "Severity is used to define a context of a message that is send when discrete threshold conditions are met. Maybe I should rewrite a description"
                },
                {
                    "file": "xyz/openbmc_project/Telemetry/Trigger.interface.yaml",
                    "line": 86,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Ok.  Let me know if you plan on making any change to better clarify."
                },
                {
                    "file": "xyz/openbmc_project/Telemetry/Trigger.interface.yaml",
                    "line": 86,
                    "reviewer": {
                        "name": "Jozef Wludzik",
                        "email": "jozef.wludzik@intel.com",
                        "username": "jwludzik"
                    },
                    "message": "I changed the description in the patchset 2"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Telemetry/Trigger/meson.build",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Telemetry/TriggerManager/meson.build",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Telemetry/meson.build",
                    "type": "MODIFIED",
                    "insertions": 30,
                    "deletions": 0
                },
                {
                    "file": "xyz/openbmc_project/Telemetry/Trigger.interface.yaml",
                    "type": "ADDED",
                    "insertions": 91,
                    "deletions": 0
                },
                {
                    "file": "xyz/openbmc_project/Telemetry/TriggerManager.interface.yaml",
                    "type": "ADDED",
                    "insertions": 59,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 208,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "b2bbac7e2986decf1ed5d102e79f1872ddd84881",
            "parents": [
                "4461e14097547ca2b85945e371c260c40a5d6d86"
            ],
            "ref": "refs/changes/81/39881/2",
            "uploader": {
                "name": "Jozef Wludzik",
                "email": "jozef.wludzik@intel.com",
                "username": "jwludzik"
            },
            "createdOn": 1613042684,
            "author": {
                "name": "Jozef Wludzik",
                "email": "jozef.wludzik@intel.com",
                "username": "jwludzik"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Telemetry/Trigger/meson.build",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Telemetry/TriggerManager/meson.build",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Telemetry/meson.build",
                    "type": "MODIFIED",
                    "insertions": 30,
                    "deletions": 0
                },
                {
                    "file": "xyz/openbmc_project/Telemetry/Trigger.interface.yaml",
                    "type": "ADDED",
                    "insertions": 96,
                    "deletions": 0
                },
                {
                    "file": "xyz/openbmc_project/Telemetry/TriggerManager.interface.yaml",
                    "type": "ADDED",
                    "insertions": 59,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 213,
            "sizeDeletions": 0
        }
    ]
}