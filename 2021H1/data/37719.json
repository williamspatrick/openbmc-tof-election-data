{
    "project": "openbmc/phosphor-fan-presence",
    "branch": "master",
    "id": "I76de9d8d1bf6e283560b1ce46e70f84522e2d708",
    "number": 37719,
    "subject": "monitor: Event logs for missing fans",
    "owner": {
        "name": "Matt Spinler",
        "email": "spinler@us.ibm.com",
        "username": "spinler"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-fan-presence/+/37719",
    "commitMessage": "monitor: Event logs for missing fans\n\nThis commit adds the code to create event logs calling out the fan when\nit has been missing for a certain amount of time.\n\nThis is basically identical to the functionality that the fan presence\napplication in this repo provides, but with it in this application all\nfan errors are created from the same place.  This will become important\nwhen there is a power off due to a fan missing and the error for that\nneeds to be re-committed at power off time so it can be shown as the\ncause of the power off.\n\nThe functionality is configured in the JSON:\n\nfan_missing_error_delay:\nDefines the number of seconds a fan must be missing with power on before\nan error will be created.  If this isn't present in the JSON, then\nerrors will not be created at all.\n\nSigned-off-by: Matt Spinler <spinler@us.ibm.com>\nChange-Id: I76de9d8d1bf6e283560b1ce46e70f84522e2d708\n",
    "createdOn": 1603826082,
    "lastUpdated": 1609770867,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1603826082,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1603826136,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1603826285,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/6955/ : SUCCESS"
        },
        {
            "timestamp": 1603828066,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 2: Patch Set 1 was rebased."
        },
        {
            "timestamp": 1603828086,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1603828205,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/6965/ : SUCCESS"
        },
        {
            "timestamp": 1603834533,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 3: Patch Set 2 was rebased."
        },
        {
            "timestamp": 1603834561,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1603834690,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/6972/ : SUCCESS"
        },
        {
            "timestamp": 1605642049,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 4: Patch Set 3 was rebased."
        },
        {
            "timestamp": 1605642117,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1605642258,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/8005/ : SUCCESS"
        },
        {
            "timestamp": 1606753301,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 5: Patch Set 4 was rebased."
        },
        {
            "timestamp": 1606753340,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1606754707,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/8736/ : SUCCESS"
        },
        {
            "timestamp": 1606967541,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Patch Set 5:\n\n(2 comments)"
        },
        {
            "timestamp": 1607012033,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 6.\n\n(2 comments)"
        },
        {
            "timestamp": 1607012055,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1607012682,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/9044/ : SUCCESS"
        },
        {
            "timestamp": 1607034711,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Patch Set 6: Code-Review+1"
        },
        {
            "timestamp": 1607036621,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Patch Set 6: Code-Review+2"
        },
        {
            "timestamp": 1609770867,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Change has been successfully merged by Matt Spinler"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "4ff66bb8faa393458a8779371910de02b7b54528",
            "parents": [
                "b8555bf1d9c50e624c036fbbbc0c47c6f703b66f"
            ],
            "ref": "refs/changes/19/37719/1",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1603826082,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 27,
                    "deletions": 0
                },
                {
                    "file": "logger.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -2
                },
                {
                    "file": "monitor/fan.cpp",
                    "type": "MODIFIED",
                    "insertions": 40,
                    "deletions": -1
                },
                {
                    "file": "monitor/fan.hpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "monitor/gen-fan-monitor-defs.py",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "monitor/json.md",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": 0
                },
                {
                    "file": "monitor/json_parser.cpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -5
                },
                {
                    "file": "monitor/system.cpp",
                    "type": "MODIFIED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "monitor/system.hpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": 0
                },
                {
                    "file": "monitor/types.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 113,
            "sizeDeletions": 12
        },
        {
            "number": 2,
            "revision": "8f3c23867f78741483f2419857e10001a7f5f462",
            "parents": [
                "53a821d896b9ca32b76f62a295dd780e07327884"
            ],
            "ref": "refs/changes/19/37719/2",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1603828066,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 27,
                    "deletions": 0
                },
                {
                    "file": "logger.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -2
                },
                {
                    "file": "monitor/fan.cpp",
                    "type": "MODIFIED",
                    "insertions": 40,
                    "deletions": -1
                },
                {
                    "file": "monitor/fan.hpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "monitor/gen-fan-monitor-defs.py",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "monitor/json.md",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": 0
                },
                {
                    "file": "monitor/json_parser.cpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -5
                },
                {
                    "file": "monitor/system.cpp",
                    "type": "MODIFIED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "monitor/system.hpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": 0
                },
                {
                    "file": "monitor/types.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 113,
            "sizeDeletions": 12
        },
        {
            "number": 3,
            "revision": "723b94ce16181ee903d499607e3cbe4b7da1dde8",
            "parents": [
                "ec2d8e4b1b010a9936b1f5a215e2f79f8d9d16b3"
            ],
            "ref": "refs/changes/19/37719/3",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1603834533,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 27,
                    "deletions": 0
                },
                {
                    "file": "logger.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -2
                },
                {
                    "file": "monitor/fan.cpp",
                    "type": "MODIFIED",
                    "insertions": 40,
                    "deletions": -1
                },
                {
                    "file": "monitor/fan.hpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "monitor/gen-fan-monitor-defs.py",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "monitor/json.md",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": 0
                },
                {
                    "file": "monitor/json_parser.cpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -5
                },
                {
                    "file": "monitor/system.cpp",
                    "type": "MODIFIED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "monitor/system.hpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": 0
                },
                {
                    "file": "monitor/types.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 113,
            "sizeDeletions": 12
        },
        {
            "number": 4,
            "revision": "2dc045ddd5fc655e7aacbb4f44a982d3e0601fcc",
            "parents": [
                "5c7f07bf65429e4f74243d11ab08b9edcd226129"
            ],
            "ref": "refs/changes/19/37719/4",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1605642049,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 27,
                    "deletions": 0
                },
                {
                    "file": "logger.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -2
                },
                {
                    "file": "monitor/fan.cpp",
                    "type": "MODIFIED",
                    "insertions": 40,
                    "deletions": -1
                },
                {
                    "file": "monitor/fan.hpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "monitor/gen-fan-monitor-defs.py",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "monitor/json.md",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": 0
                },
                {
                    "file": "monitor/json_parser.cpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -5
                },
                {
                    "file": "monitor/system.cpp",
                    "type": "MODIFIED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "monitor/system.hpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": 0
                },
                {
                    "file": "monitor/types.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 113,
            "sizeDeletions": 12
        },
        {
            "number": 5,
            "revision": "985eff29d2eb1bd65ae009b686b732be00d04888",
            "parents": [
                "ec30bf7f72fa064890200b218ee56ec7651a7f17"
            ],
            "ref": "refs/changes/19/37719/5",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1606753301,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "monitor/fan.cpp",
                    "line": 322,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "These can be combined to an `else if..` similar to what was done for the nonfunctional sensor in the prior commit."
                },
                {
                    "file": "monitor/fan.cpp",
                    "line": 322,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Done"
                },
                {
                    "file": "monitor/fan.hpp",
                    "line": 290,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "const"
                },
                {
                    "file": "monitor/fan.hpp",
                    "line": 290,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 27,
                    "deletions": 0
                },
                {
                    "file": "logger.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -2
                },
                {
                    "file": "monitor/fan.cpp",
                    "type": "MODIFIED",
                    "insertions": 40,
                    "deletions": -1
                },
                {
                    "file": "monitor/fan.hpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "monitor/gen-fan-monitor-defs.py",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "monitor/json.md",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": 0
                },
                {
                    "file": "monitor/json_parser.cpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -5
                },
                {
                    "file": "monitor/system.cpp",
                    "type": "MODIFIED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "monitor/system.hpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": 0
                },
                {
                    "file": "monitor/types.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 113,
            "sizeDeletions": 12
        },
        {
            "number": 6,
            "revision": "27f6b686b385e5f946e5b3b2cf616bd7bb792bc4",
            "parents": [
                "f13b42e22a2a2d747567dd138dc9ff7b76251ff8"
            ],
            "ref": "refs/changes/19/37719/6",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1607012033,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 27,
                    "deletions": 0
                },
                {
                    "file": "logger.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -2
                },
                {
                    "file": "monitor/fan.cpp",
                    "type": "MODIFIED",
                    "insertions": 37,
                    "deletions": -1
                },
                {
                    "file": "monitor/fan.hpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "monitor/gen-fan-monitor-defs.py",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "monitor/json.md",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": 0
                },
                {
                    "file": "monitor/json_parser.cpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -5
                },
                {
                    "file": "monitor/system.cpp",
                    "type": "MODIFIED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "monitor/system.hpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": 0
                },
                {
                    "file": "monitor/types.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 110,
            "sizeDeletions": 12
        }
    ]
}