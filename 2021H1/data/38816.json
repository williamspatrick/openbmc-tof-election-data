{
    "project": "openbmc/phosphor-logging",
    "branch": "master",
    "id": "I2a7315bbc3f0f4699e77aadbc7da05818c0c15e3",
    "number": 38816,
    "subject": "extensions: pels: Add PEL path to elog entry",
    "owner": {
        "name": "Adriana Kobylak",
        "email": "anoo@linux.ibm.com",
        "username": "anoo1"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-logging/+/38816",
    "commitMessage": "extensions: pels: Add PEL path to elog entry\n\nPopulate the path property of the error log entry with the path\nto the PEL path. This requires making the entries map public.\n\nRestore the value of the path for the entries when the PEL\nmanager starts up once the Repository has verified each PEL file.\n\nTested: Verified the PEL path was populated in the path property\n        and that it was re-populated after restarting the app.\nroot@openbmc:~# busctl --no-pager get-property xyz.openbmc_project.Logging \\\n  /xyz/openbmc_project/logging/entry/884 xyz.openbmc_project.Common.FilePath Path\ns \"/var/lib/phosphor-logging/extensions/pels/logs/2020120522023306_50000D30\"\n\nChange-Id: I2a7315bbc3f0f4699e77aadbc7da05818c0c15e3\nSigned-off-by: Adriana Kobylak <anoo@us.ibm.com>\n",
    "createdOn": 1607282385,
    "lastUpdated": 1610392753,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1607282385,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1607282400,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1607282731,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/9110/ : SUCCESS"
        },
        {
            "timestamp": 1607395264,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1607395281,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1607395457,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/9248/ : SUCCESS"
        },
        {
            "timestamp": 1607446630,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1607447488,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1607447500,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1607447563,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1607447653,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/9323/ : SUCCESS"
        },
        {
            "timestamp": 1607453623,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 3: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1607455080,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1607704082,
            "reviewer": {
                "name": "Bruce Mitchell",
                "email": "bruce.mitchell@linux.vnet.ibm.com",
                "username": "BMC-Bruce"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1607716394,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1610375611,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 3: Code-Review+2"
        },
        {
            "timestamp": 1610392753,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Change has been successfully rebased and submitted as e7d271ae7ecf460b9c4b76caf9ba555f7d8a532e by Matt Spinler"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "44fd4dd7df8fc62cb36fd45847f3d6aed59253d5",
            "parents": [
                "5d9b36a06c17659768c473f42d5f74490eb5bc50"
            ],
            "ref": "refs/changes/16/38816/1",
            "uploader": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "createdOn": 1607282385,
            "author": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": 0
                },
                {
                    "file": "log_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -3
                },
                {
                    "file": "log_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 20,
            "sizeDeletions": 6
        },
        {
            "number": 2,
            "revision": "4daea80bcb95c958fc2187b582482bd2d433bacb",
            "parents": [
                "20abb00d9742d58f432109ee674b51a57335ea5d"
            ],
            "ref": "refs/changes/16/38816/2",
            "uploader": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "createdOn": 1607395264,
            "author": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "extensions/openpower-pels/manager.cpp",
                    "line": 622,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "I don't think auto is a reference by default?  So probably better as auto&"
                },
                {
                    "file": "extensions/openpower-pels/manager.cpp",
                    "line": 622,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "Done. Agree."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "log_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -3
                },
                {
                    "file": "log_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 35,
            "sizeDeletions": 6
        },
        {
            "number": 3,
            "revision": "1bb3e5ae0926ae7847c33e772878d7dc4bb92833",
            "parents": [
                "20abb00d9742d58f432109ee674b51a57335ea5d"
            ],
            "ref": "refs/changes/16/38816/3",
            "uploader": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "createdOn": 1607447488,
            "author": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "log_manager.hpp",
                    "line": 234,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Instead of making this public, you could also add a setEntryFilePath(entry, path) function to wrap setting the path.  I don't really feel that strongly though if nobody else does."
                },
                {
                    "file": "log_manager.hpp",
                    "line": 234,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "I started making the change, but when I got to the PEL manager constructor realized that it needs to loop through all the entries to restsore the paths, so we'd also need a new public interface that would return the IDs of all the entries to be able to set the path for each one."
                },
                {
                    "file": "log_manager.hpp",
                    "line": 234,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "Therefore leaning towards leaving it as is unless there's additional feedback."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "log_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -3
                },
                {
                    "file": "log_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 35,
            "sizeDeletions": 6
        },
        {
            "number": 4,
            "revision": "e7d271ae7ecf460b9c4b76caf9ba555f7d8a532e",
            "parents": [
                "eb3dd4b0664d2d92d01023d35926169c4d234358"
            ],
            "ref": "refs/changes/16/38816/4",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1610392753,
            "author": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "log_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -3
                },
                {
                    "file": "log_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 35,
            "sizeDeletions": 6
        }
    ]
}