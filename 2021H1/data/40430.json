{
    "project": "openbmc/phosphor-debug-collector",
    "branch": "master",
    "topic": "HOSTBOOTDUMP",
    "id": "Iebfd91b6c58ef0e0babc760ec8efeab1219d2c51",
    "number": 40430,
    "subject": "Modify phosphor-dump-monitor to enable multiple file watching",
    "owner": {
        "name": "Dhruvaraj S",
        "email": "dhruvaraj@gmail.com",
        "username": "dhruvibm"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-debug-collector/+/40430",
    "commitMessage": "Modify phosphor-dump-monitor to enable multiple file watching\n\nThe current phosphor-dump-monitor is watching core files.\nRefactoring it to watch for files for different kinds of\ndumps.\n\nSigned-off-by: Dhruvaraj Subhashchandran <dhruvaraj@in.ibm.com>\nChange-Id: Iebfd91b6c58ef0e0babc760ec8efeab1219d2c51\n",
    "createdOn": 1612900096,
    "lastUpdated": 1615144869,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1612900096,
            "reviewer": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1612900106,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1612900142,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/12181/ : FAILURE"
        },
        {
            "timestamp": 1612901192,
            "reviewer": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1612901237,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1612901266,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/12187/ : FAILURE"
        },
        {
            "timestamp": 1612901415,
            "reviewer": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1612901426,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1612901468,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/12188/ : FAILURE"
        },
        {
            "timestamp": 1612904172,
            "reviewer": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "message": "Topic set to HOSTBOOTDUMP"
        },
        {
            "timestamp": 1612905206,
            "reviewer": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1612905217,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1612905310,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/12194/ : SUCCESS"
        },
        {
            "timestamp": 1613369800,
            "reviewer": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "message": "Uploaded patch set 5: Patch Set 4 was rebased."
        },
        {
            "timestamp": 1613369826,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1613369857,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/12450/ : FAILURE"
        },
        {
            "timestamp": 1614671710,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 5:\n\nWhy we need to include host type dumps ( enabled only for openpower boxes) file monitor app is added here . Openpower-debug-collector you already added code to implement com/ibm specific dump requests. Based on the existing code implemented code for creating dump file and store into specific path. Adding hostdumps monitor application in the openpower-debug-collector will help to keep the openpower specific code in common place and keep the core monitor for app for BMC specific dumps. \n\nHigh level design direction:\n  Openpower-debug-collector -> \n      Implement com/ibm Dump create interface, which includes\n       - Dump content collection and store the file for derport packaging\n       - Add file monitor apps to watch for new file creation. \n       - For any new file call  xyz create interface to create dump entry/packaging.\n  phosphor-debug-collector:\n       - Extend the enty/packaging for new dump types. ( re-use the existing infrastructure).\n\nThis approach will help to keep phosphor-debug-collector dump manager/monitor clean. \n\nGeorge Lieu already pushed commit to enable Kernel oops type dump.  Based on the the design direction we discussed in https://github.com/openbmc/phosphor-debug-collector/issues/15 , decided to add new app to monitor the kernel oops. As per Andrew J this is a temporary fix till the actual kdump support in place. To avoid refactoring the existing core monitor to support this new temporary dump decided to go with new app for this."
        },
        {
            "timestamp": 1614673038,
            "reviewer": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "message": "Patch Set 5:\n\n> Patch Set 5:\n> \n> Why we need to include host type dumps ( enabled only for openpower boxes) file monitor app is added here . Openpower-debug-collector you already added code to implement com/ibm specific dump requests. Based on the existing code implemented code for creating dump file and store into specific path. Adding hostdumps monitor application in the openpower-debug-collector will help to keep the openpower specific code in common place and keep the core monitor for app for BMC specific dumps. \n> \n> High level design direction:\n>   Openpower-debug-collector -> \n>       Implement com/ibm Dump create interface, which includes\n>        - Dump content collection and store the file for derport packaging\n>        - Add file monitor apps to watch for new file creation. \n>        - For any new file call  xyz create interface to create dump entry/packaging.\n>   phosphor-debug-collector:\n>        - Extend the enty/packaging for new dump types. ( re-use the existing infrastructure).\n> \n> This approach will help to keep phosphor-debug-collector dump manager/monitor clean. \n> \n> George Lieu already pushed commit to enable Kernel oops type dump.  Based on the the design direction we discussed in https://github.com/openbmc/phosphor-debug-collector/issues/15 , decided to add new app to monitor the kernel oops. As per Andrew J this is a temporary fix till the actual kdump support in place. To avoid refactoring the existing core monitor to support this new temporary dump decided to go with new app for this.\n\nthis will be reverted to keep core monitor separately"
        },
        {
            "timestamp": 1615144847,
            "reviewer": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "message": "Removed reviewer MARRI DEVENDER RAO."
        },
        {
            "timestamp": 1615144850,
            "reviewer": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "message": "Removed reviewer Jayanth Othayoth."
        },
        {
            "timestamp": 1615144854,
            "reviewer": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "message": "Removed reviewer Brad Bishop."
        },
        {
            "timestamp": 1615144856,
            "reviewer": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "message": "Removed reviewer George Liu."
        },
        {
            "timestamp": 1615144859,
            "reviewer": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "message": "Removed reviewer Ramesh Iyyar."
        },
        {
            "timestamp": 1615144861,
            "reviewer": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "message": "Removed reviewer null."
        },
        {
            "timestamp": 1615144869,
            "reviewer": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "message": "Abandoned"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "7162e0de8de95310427d0d3225c6aa0a5cd4fb50",
            "parents": [
                "ffe829ed3a3f0b7c34fa5be90e871537f816bf89"
            ],
            "ref": "refs/changes/30/40430/1",
            "uploader": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "createdOn": 1612900096,
            "author": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "core_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -47
                },
                {
                    "file": "core_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -31
                },
                {
                    "file": "dump-extensions.hpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/default/default-watch.cpp",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/default/default.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/default/meson.build",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/openpower-dumps/dump-extensions.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/openpower-dumps/dump-watch-extensions.cpp",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/openpower-dumps/meson.build",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "file_watch_manager.cpp",
                    "type": "ADDED",
                    "insertions": 66,
                    "deletions": 0
                },
                {
                    "file": "file_watch_manager.hpp",
                    "type": "ADDED",
                    "insertions": 83,
                    "deletions": 0
                },
                {
                    "file": "file_watch_manager_main.cpp",
                    "fileOld": "core_manager_main.cpp",
                    "type": "RENAMED",
                    "insertions": 7,
                    "deletions": -1
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -5
                }
            ],
            "sizeInsertions": 225,
            "sizeDeletions": 84
        },
        {
            "number": 2,
            "revision": "8937f92906865fd0aef30eeb545d17e9ca2746df",
            "parents": [
                "2ee34792dbb9dc2a7d5370e7b65d9bec0a4cb788"
            ],
            "ref": "refs/changes/30/40430/2",
            "uploader": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "createdOn": 1612901192,
            "author": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "core_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -47
                },
                {
                    "file": "core_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -34
                },
                {
                    "file": "dump-extensions.hpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/default/default-watch.cpp",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/default/default.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/default/meson.build",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/openpower-dumps/dump-extensions.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/openpower-dumps/dump-watch-extensions.cpp",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/openpower-dumps/meson.build",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "file_watch_manager.cpp",
                    "type": "ADDED",
                    "insertions": 66,
                    "deletions": 0
                },
                {
                    "file": "file_watch_manager.hpp",
                    "type": "ADDED",
                    "insertions": 84,
                    "deletions": 0
                },
                {
                    "file": "file_watch_manager_main.cpp",
                    "fileOld": "core_manager_main.cpp",
                    "type": "RENAMED",
                    "insertions": 7,
                    "deletions": -1
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 225,
            "sizeDeletions": 86
        },
        {
            "number": 3,
            "revision": "044e7421ae6a6587ba068593d2172dd4c64073b1",
            "parents": [
                "2ee34792dbb9dc2a7d5370e7b65d9bec0a4cb788"
            ],
            "ref": "refs/changes/30/40430/3",
            "uploader": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "createdOn": 1612901415,
            "author": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "core_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -47
                },
                {
                    "file": "core_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -34
                },
                {
                    "file": "dump-extensions.hpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/default/default-watch.cpp",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/default/default.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/default/meson.build",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/openpower-dumps/dump-extensions.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/openpower-dumps/dump-watch-extensions.cpp",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/openpower-dumps/meson.build",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "file_watch_manager.cpp",
                    "type": "ADDED",
                    "insertions": 66,
                    "deletions": 0
                },
                {
                    "file": "file_watch_manager.hpp",
                    "type": "ADDED",
                    "insertions": 84,
                    "deletions": 0
                },
                {
                    "file": "file_watch_manager_main.cpp",
                    "fileOld": "core_manager_main.cpp",
                    "type": "RENAMED",
                    "insertions": 7,
                    "deletions": -1
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 225,
            "sizeDeletions": 86
        },
        {
            "number": 4,
            "revision": "316041da42a0620e40470414b7495175a2ab3b8e",
            "parents": [
                "2ee34792dbb9dc2a7d5370e7b65d9bec0a4cb788"
            ],
            "ref": "refs/changes/30/40430/4",
            "uploader": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "createdOn": 1612905206,
            "author": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "core_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -47
                },
                {
                    "file": "core_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -34
                },
                {
                    "file": "dump-extensions-watch.hpp",
                    "type": "ADDED",
                    "insertions": 24,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/default/default-watch.cpp",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/default/meson.build",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/openpower-dumps/dump-extensions.cpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/openpower-dumps/dump-watch-extensions.cpp",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/openpower-dumps/meson.build",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "file_watch_manager.cpp",
                    "type": "ADDED",
                    "insertions": 66,
                    "deletions": 0
                },
                {
                    "file": "file_watch_manager.hpp",
                    "type": "ADDED",
                    "insertions": 84,
                    "deletions": 0
                },
                {
                    "file": "file_watch_manager_main.cpp",
                    "fileOld": "core_manager_main.cpp",
                    "type": "RENAMED",
                    "insertions": 7,
                    "deletions": -1
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 230,
            "sizeDeletions": 86
        },
        {
            "number": 5,
            "revision": "b0ed62f1b650839f49cd3a1d1a6c296384c3b445",
            "parents": [
                "c142e19bde7cb932fc2d47b8dc4274020cd57e75"
            ],
            "ref": "refs/changes/30/40430/5",
            "uploader": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "createdOn": 1613369800,
            "author": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "core_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -47
                },
                {
                    "file": "core_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -34
                },
                {
                    "file": "dump-extensions-watch.hpp",
                    "type": "ADDED",
                    "insertions": 24,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/default/default-watch.cpp",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/default/meson.build",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/openpower-dumps/dump-extensions.cpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/openpower-dumps/dump-watch-extensions.cpp",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "dump-extensions/openpower-dumps/meson.build",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "file_watch_manager.cpp",
                    "type": "ADDED",
                    "insertions": 66,
                    "deletions": 0
                },
                {
                    "file": "file_watch_manager.hpp",
                    "type": "ADDED",
                    "insertions": 84,
                    "deletions": 0
                },
                {
                    "file": "file_watch_manager_main.cpp",
                    "fileOld": "core_manager_main.cpp",
                    "type": "RENAMED",
                    "insertions": 7,
                    "deletions": -1
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 230,
            "sizeDeletions": 86
        }
    ]
}