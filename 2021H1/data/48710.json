{
    "project": "openbmc/phosphor-bmc-code-mgmt",
    "branch": "master",
    "topic": "usb-code-update",
    "id": "I0e0c33fd6ec5db3a47babaf417b0c708709e580b",
    "number": 48710,
    "subject": "usb: Add utility for D-Bus",
    "owner": {
        "name": "George Liu",
        "email": "liuxiwei@inspur.com",
        "username": "lxwinspur"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-bmc-code-mgmt/+/48710",
    "commitMessage": "usb: Add utility for D-Bus\n\nPutting all D-Bus related operation to the utils file.\n\nTested: Call the set/getProperty functions locally and successfully\nset/get the corresponding attribute value.\n\nSigned-off-by: George Liu <liuxiwei@inspur.com>\nChange-Id: I0e0c33fd6ec5db3a47babaf417b0c708709e580b\n",
    "createdOn": 1636460546,
    "lastUpdated": 1639511355,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1636460546,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1636460566,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1636460584,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Topic set to usb-code-update"
        },
        {
            "timestamp": 1636460652,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/29945/ : SUCCESS"
        },
        {
            "timestamp": 1636537605,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 2: Patch Set 1 was rebased."
        },
        {
            "timestamp": 1636537622,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1636537700,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/30032/ : SUCCESS"
        },
        {
            "timestamp": 1637187647,
            "reviewer": {
                "name": "Bruce Mitchell",
                "email": "bruce.mitchell@linux.vnet.ibm.com",
                "username": "BMC-Bruce"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1637272816,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1637316352,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1637316373,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1637316454,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/30553/ : SUCCESS"
        },
        {
            "timestamp": 1637316531,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1637355363,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1637557256,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1637557272,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1637557356,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/30631/ : SUCCESS"
        },
        {
            "timestamp": 1637557441,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 4:\n\n(2 comments)"
        },
        {
            "timestamp": 1638307801,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1638325982,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1638326387,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1638427426,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 5: Patch Set 4 was rebased."
        },
        {
            "timestamp": 1638427442,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1638427525,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/31045/ : SUCCESS"
        },
        {
            "timestamp": 1638492751,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 6: Patch Set 5 was rebased."
        },
        {
            "timestamp": 1638492766,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1638492845,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/31123/ : SUCCESS"
        },
        {
            "timestamp": 1638568105,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Uploaded patch set 7: New patch set was added with same tree, parent, and commit message as Patch Set 6."
        },
        {
            "timestamp": 1638568116,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: -Ok-To-Test"
        },
        {
            "timestamp": 1638568120,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1638568205,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7:\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/31228/ : SUCCESS"
        },
        {
            "timestamp": 1639498733,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 7: Code-Review+2"
        },
        {
            "timestamp": 1639511355,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Change has been successfully rebased and submitted as fc025e14beea9bfbe4dae44cd539fb09b1e95ef0 by Adriana Kobylak"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "4ee4400fb471c99a501e45417510ec5f30b5ea3c",
            "parents": [
                "411d3de8550faa00a5b67c5e6e9b1bea2dbf184f"
            ],
            "ref": "refs/changes/10/48710/1",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1636460546,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "usb/meson.build",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                },
                {
                    "file": "usb/utils.cpp",
                    "type": "ADDED",
                    "insertions": 89,
                    "deletions": 0
                },
                {
                    "file": "usb/utils.hpp",
                    "type": "ADDED",
                    "insertions": 76,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 167,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "0369214c2e9c4f8ee655ebb5f89654cf171e0275",
            "parents": [
                "ea3a0b130e013f954c4a27352aaf1f9bd4fcaedf"
            ],
            "ref": "refs/changes/10/48710/2",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1636537605,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "There's already a utils.cpp in the base directory with the getService() function. Could you add the get/set property functions to that file instead of creating a new duplicate utils one? then include ../utils.cpp in the usb meson.build file."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 10,
                    "reviewer": {
                        "name": "Bruce Mitchell",
                        "email": "bruce.mitchell@linux.vnet.ibm.com",
                        "username": "BMC-Bruce"
                    },
                    "message": "Please add Tested: and how it was tested."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 10,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "@Adriana will help test, and then I will update Tested."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 10,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "Some of these commits you can test because you can create a directory in the bmc with a tarball and call the usb app and point it to that directory as if it was the usb mount directory."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 10,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Yes, I will test it and add Tested"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "usb/meson.build",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                },
                {
                    "file": "usb/utils.cpp",
                    "type": "ADDED",
                    "insertions": 89,
                    "deletions": 0
                },
                {
                    "file": "usb/utils.hpp",
                    "type": "ADDED",
                    "insertions": 76,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 167,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "a3b6ff5b8375ee942bad12792360fea2005e5bef",
            "parents": [
                "f474b7d3cea0dc2e7c7ef91012f0af90fcaa4068"
            ],
            "ref": "refs/changes/10/48710/3",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1637316352,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "utils.cpp",
                    "line": 43,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "Thinking more about this commmit, I'm not sure it's worth having these new functions because they only apply to string properties. Ideally a generic set/get property function would be a templated function that can set/get any type of property type variant. Seems in your usb code you only do one get and one set call, so maybe make those calls in the usb code instead of adding these get/set property functions?"
                },
                {
                    "file": "utils.cpp",
                    "line": 43,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "I don\u2019t think so. \nFor the set/get property functions, it is everywhere in a repo.\neg (https://github.com/openbmc/phosphor-bmc-code-mgmt/blob/master/activation.cpp#L361 ),\nwe define it as a general interface for direct use by the caller."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "usb/meson.build",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                },
                {
                    "file": "utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 39,
                    "deletions": 0
                },
                {
                    "file": "utils.hpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 73,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "ea4c8c8f0d0aa8f40a53343fddf90e5d7f1dd16f",
            "parents": [
                "18e503b34e44966a6f63af6cf91b32a8489f5d1a"
            ],
            "ref": "refs/changes/10/48710/4",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1637557256,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "utils.cpp",
                    "line": 44,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "Have we investigated sdbusplus::asio::getProperty ?"
                },
                {
                    "file": "utils.cpp",
                    "line": 44,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "We did not use sdbusplus::asio in the usb app, so I suggest keeping it the way it is"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "usb/meson.build",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                },
                {
                    "file": "utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 39,
                    "deletions": 0
                },
                {
                    "file": "utils.hpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 73,
            "sizeDeletions": 0
        },
        {
            "number": 5,
            "revision": "41eb38726ddaafc49c7edd9473a5e3192317b73a",
            "parents": [
                "52ac7d5601ed7420d7fa27355d61d3d47a6ee2d0"
            ],
            "ref": "refs/changes/10/48710/5",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1638427426,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "usb/meson.build",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                },
                {
                    "file": "utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 39,
                    "deletions": 0
                },
                {
                    "file": "utils.hpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 73,
            "sizeDeletions": 0
        },
        {
            "number": 6,
            "revision": "4cd0dc30fe45a9a563caacba413adfc8a91b8347",
            "parents": [
                "fcc678d96172d746b5b6126c5e023ba4d9812894"
            ],
            "ref": "refs/changes/10/48710/6",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1638492751,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "usb/meson.build",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                },
                {
                    "file": "utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 39,
                    "deletions": 0
                },
                {
                    "file": "utils.hpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 73,
            "sizeDeletions": 0
        },
        {
            "number": 7,
            "revision": "e5b98155fc6754ba4d17182d13bddd9174715d8c",
            "parents": [
                "dd2f15599c1f984f2e6fceaf359bdd6de89ecb64"
            ],
            "ref": "refs/changes/10/48710/7",
            "uploader": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "createdOn": 1638568105,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "NO_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "usb/meson.build",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                },
                {
                    "file": "utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 39,
                    "deletions": 0
                },
                {
                    "file": "utils.hpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 73,
            "sizeDeletions": 0
        },
        {
            "number": 8,
            "revision": "fc025e14beea9bfbe4dae44cd539fb09b1e95ef0",
            "parents": [
                "073a653000d65b2a83b6fb253f5893c7c5af4cf7"
            ],
            "ref": "refs/changes/10/48710/8",
            "uploader": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "createdOn": 1639511355,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "usb/meson.build",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                },
                {
                    "file": "utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 39,
                    "deletions": 0
                },
                {
                    "file": "utils.hpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 73,
            "sizeDeletions": 0
        }
    ]
}