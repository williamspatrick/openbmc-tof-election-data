{
    "project": "openbmc/pldm",
    "branch": "master",
    "id": "I8fdc258195aef998d10e33577f3ec98da48b3d40",
    "number": 43021,
    "subject": "entity_association_tree: Keep tree always updated",
    "owner": {
        "name": "Sampa Misra",
        "email": "sampmisr@in.ibm.com",
        "username": "sampmisr"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/pldm/+/43021",
    "commitMessage": "entity_association_tree: Keep tree always updated\n\nThis commit keeps the entity association tree updated across Host\nreboots. It deletes the Host entries from the entity associaton\ntree when Host is powered off.\n\nWithout this fix the entity association tree keeps on growing with\nduplicate Host entries during each power on(PDR exchange) resulting\na crash of pldm daemon after few power on-off sequence\n\nChange-Id: I8fdc258195aef998d10e33577f3ec98da48b3d40\nSigned-off-by: Sampa Misra <sampmisr@in.ibm.com>\n",
    "createdOn": 1620489511,
    "lastUpdated": 1621940705,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1620489511,
            "reviewer": {
                "name": "Sampa Misra",
                "email": "sampmisr@in.ibm.com",
                "username": "sampmisr"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1620489527,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1620489537,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/1695/ (2/2)\n\nppc64le CI Build Started"
        },
        {
            "timestamp": 1620489901,
            "reviewer": {
                "name": "Sampa Misra",
                "email": "sampmisr@in.ibm.com",
                "username": "sampmisr"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1620489928,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1620489931,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/16885/ : ABORTED\n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/1695/ : ABORTED"
        },
        {
            "timestamp": 1620489937,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/1696/ (2/2)\n\nppc64le CI Build Started"
        },
        {
            "timestamp": 1620490594,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/16886/ : SUCCESS\n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/1696/ : ppc64le CI Build Successful"
        },
        {
            "timestamp": 1620634077,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Patch Set 2: Code-Review+1"
        },
        {
            "timestamp": 1620636195,
            "reviewer": {
                "name": "Pavithra Barithaya",
                "email": "pavithra.b@ibm.com",
                "username": "Pavithrab7"
            },
            "message": "Patch Set 2: Code-Review+1"
        },
        {
            "timestamp": 1620646331,
            "reviewer": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "message": "Patch Set 2: Code-Review-1\n\n(6 comments)"
        },
        {
            "timestamp": 1620730592,
            "reviewer": {
                "name": "Sampa Misra",
                "email": "sampmisr@in.ibm.com",
                "username": "sampmisr"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1620730605,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1620730611,
            "reviewer": {
                "name": "Sampa Misra",
                "email": "sampmisr@in.ibm.com",
                "username": "sampmisr"
            },
            "message": "Patch Set 3:\n\n(6 comments)"
        },
        {
            "timestamp": 1620730614,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/1719/ (2/2)\n\nppc64le CI Build Started"
        },
        {
            "timestamp": 1620730772,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/17009/ : FAILURE\n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/1719/ : ppc64le CI Build Failed"
        },
        {
            "timestamp": 1620731081,
            "reviewer": {
                "name": "Sampa Misra",
                "email": "sampmisr@in.ibm.com",
                "username": "sampmisr"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1620731094,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1620731104,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/1720/ (2/2)\n\nppc64le CI Build Started"
        },
        {
            "timestamp": 1620731755,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/17010/ : SUCCESS\n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/1720/ : ppc64le CI Build Successful"
        },
        {
            "timestamp": 1620745264,
            "reviewer": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "message": "Patch Set 4:\n\n(2 comments)"
        },
        {
            "timestamp": 1620886967,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1620913023,
            "reviewer": {
                "name": "Deepak Kodihalli",
                "email": "deepak.kodihalli.83@gmail.com",
                "username": "dkodihal"
            },
            "message": "Patch Set 4:\n\n(4 comments)"
        },
        {
            "timestamp": 1620916289,
            "reviewer": {
                "name": "Sampa Misra",
                "email": "sampmisr@in.ibm.com",
                "username": "sampmisr"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1620916301,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1620916311,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/1771/ (2/2)\n\nppc64le CI Build Started"
        },
        {
            "timestamp": 1620916954,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/17210/ : SUCCESS\n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/1771/ : ppc64le CI Build Successful"
        },
        {
            "timestamp": 1621697225,
            "reviewer": {
                "name": "Sampa Misra",
                "email": "sampmisr@in.ibm.com",
                "username": "sampmisr"
            },
            "message": "Patch Set 5:\n\n(4 comments)"
        },
        {
            "timestamp": 1621697254,
            "reviewer": {
                "name": "Sampa Misra",
                "email": "sampmisr@in.ibm.com",
                "username": "sampmisr"
            },
            "message": "Uploaded patch set 6."
        },
        {
            "timestamp": 1621697270,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1621697279,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/1855/ (2/2)\n\nppc64le CI Build Started"
        },
        {
            "timestamp": 1621697874,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/17855/ : SUCCESS\n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/1855/ : ppc64le CI Build Successful"
        },
        {
            "timestamp": 1621862292,
            "reviewer": {
                "name": "Deepak Kodihalli",
                "email": "deepak.kodihalli.83@gmail.com",
                "username": "dkodihal"
            },
            "message": "Patch Set 6: Code-Review+1\n\nTom - do you want to check as well since you had some comments?"
        },
        {
            "timestamp": 1621918998,
            "reviewer": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "message": "Patch Set 6: Code-Review+1\n\n(2 comments)"
        },
        {
            "timestamp": 1621932520,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Patch Set 6: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1621934199,
            "reviewer": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "message": "Patch Set 6: Code-Review+2"
        },
        {
            "timestamp": 1621940698,
            "reviewer": {
                "name": "Sampa Misra",
                "email": "sampmisr@in.ibm.com",
                "username": "sampmisr"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1621940705,
            "reviewer": {
                "name": "Sampa Misra",
                "email": "sampmisr@in.ibm.com",
                "username": "sampmisr"
            },
            "message": "Change has been successfully rebased and submitted as c073a20e1fecd42f4c930f2c4bfcbf433f318b9d by Sampa Misra"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "863020c84aa13dbb8ef179d479558a9e2e93bef5",
            "parents": [
                "ada39c0f5d3a8052a0d9364d3eed6977df526eb7"
            ],
            "ref": "refs/changes/21/43021/1",
            "uploader": {
                "name": "Sampa Misra",
                "email": "sampmisr@in.ibm.com",
                "username": "sampmisr"
            },
            "createdOn": 1620489511,
            "author": {
                "name": "Sampa Misra",
                "email": "sampmisr@in.ibm.com",
                "username": "sampmisr"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "host-bmc/host_pdr_handler.cpp",
                    "type": "MODIFIED",
                    "insertions": 44,
                    "deletions": -2
                },
                {
                    "file": "host-bmc/host_pdr_handler.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -1
                },
                {
                    "file": "libpldm/pdr.c",
                    "type": "MODIFIED",
                    "insertions": 40,
                    "deletions": 0
                },
                {
                    "file": "libpldm/pdr.h",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 112,
            "sizeDeletions": 3
        },
        {
            "number": 2,
            "revision": "d349f55b78599e9a9be601295b49f4cb05f6a54c",
            "parents": [
                "ada39c0f5d3a8052a0d9364d3eed6977df526eb7"
            ],
            "ref": "refs/changes/21/43021/2",
            "uploader": {
                "name": "Sampa Misra",
                "email": "sampmisr@in.ibm.com",
                "username": "sampmisr"
            },
            "createdOn": 1620489901,
            "author": {
                "name": "Sampa Misra",
                "email": "sampmisr@in.ibm.com",
                "username": "sampmisr"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Tom Joseph",
                        "email": "rushtotom@gmail.com",
                        "username": "tomjoseph83"
                    },
                    "message": "\"entity_association_tree: Keep tree updated across host reboots\"\n\nThis is a more specific heading."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Sampa Misra",
                        "email": "sampmisr@in.ibm.com",
                        "username": "sampmisr"
                    },
                    "message": "tried to fit in as much as possible (within 50chars)"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "Tom Joseph",
                        "email": "rushtotom@gmail.com",
                        "username": "tomjoseph83"
                    },
                    "message": "Please align the commit message text."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "Sampa Misra",
                        "email": "sampmisr@in.ibm.com",
                        "username": "sampmisr"
                    },
                    "message": "Done"
                },
                {
                    "file": "host-bmc/host_pdr_handler.cpp",
                    "line": 86,
                    "reviewer": {
                        "name": "Tom Joseph",
                        "email": "rushtotom@gmail.com",
                        "username": "tomjoseph83"
                    },
                    "message": "https://github.com/openbmc/pldm/blob/master/libpldm/pdr.h#L251\n\nDoes this pldm_entity_association_tree_destroy serve the purpose?"
                },
                {
                    "file": "host-bmc/host_pdr_handler.cpp",
                    "line": 86,
                    "reviewer": {
                        "name": "Sampa Misra",
                        "email": "sampmisr@in.ibm.com",
                        "username": "sampmisr"
                    },
                    "message": "no. that destroys the tree also which can not be done here. we just need to make the tree empty while the tree still being valid"
                },
                {
                    "file": "host-bmc/host_pdr_handler.cpp",
                    "line": 86,
                    "reviewer": {
                        "name": "Tom Joseph",
                        "email": "rushtotom@gmail.com",
                        "username": "tomjoseph83"
                    },
                    "message": "Not very familiar with the entity association tree code, will defer this to Deepak."
                },
                {
                    "file": "host-bmc/host_pdr_handler.cpp",
                    "line": 86,
                    "reviewer": {
                        "name": "Deepak Kodihalli",
                        "email": "deepak.kodihalli.83@gmail.com",
                        "username": "dkodihal"
                    },
                    "message": "> no. that destroys the tree also which can not be done here. we just need to make the tree empty while the tree still being valid\n\nI'm not following this."
                },
                {
                    "file": "host-bmc/host_pdr_handler.cpp",
                    "line": 86,
                    "reviewer": {
                        "name": "Sampa Misra",
                        "email": "sampmisr@in.ibm.com",
                        "username": "sampmisr"
                    },
                    "message": "the entity association tree (unique pointer) is created at pldmd.cpp and the reference of the tree is passed here and in fru table. the tree will be deleted automatically when the daemon dies.\nhere had to make the content of the tree empty while the tree pointer still being valid\n\ntypedef struct pldm_entity_association_tree {\n    pldm_entity_node *root;  <=============the content is destroyed\n    uint16_t last_used_container_id;\n} pldm_entity_association_tree; <=========the tree remains valid as it should be"
                },
                {
                    "file": "host-bmc/host_pdr_handler.cpp",
                    "line": 86,
                    "reviewer": {
                        "name": "Tom Joseph",
                        "email": "rushtotom@gmail.com",
                        "username": "tomjoseph83"
                    },
                    "message": "Ack"
                },
                {
                    "file": "host-bmc/host_pdr_handler.hpp",
                    "line": 180,
                    "reviewer": {
                        "name": "Tom Joseph",
                        "email": "rushtotom@gmail.com",
                        "username": "tomjoseph83"
                    },
                    "message": "Making the bmcEntityTree static and initialize it from _fetchPDR makes the code difficult to read and dependency is not clear. \n\nInstead of that I would suggeste bmcEntityTree is initialised when BMC's entity association tree is built.(https://github.com/openbmc/pldm/blob/master/libpldmresponder/fru.cpp#L21)"
                },
                {
                    "file": "host-bmc/host_pdr_handler.hpp",
                    "line": 180,
                    "reviewer": {
                        "name": "Sampa Misra",
                        "email": "sampmisr@in.ibm.com",
                        "username": "sampmisr"
                    },
                    "message": "yeah ack. but that needs a detailed design considering the CM activity(concurrent maintenance). i am preparing the design for that. but until the CM feature comes in we need to solve the issue as this has been blocking several ipls. as of now we can safely assume that the whole bmc entity tree is constructed and will not be changed when we start getting Host PDRs. so i kept the bmc entity tree here. the future plan is to maintain a separate copy of the tree starting from pldmd.cpp and keep that updated whenever any fru is added/deleted from the bmc"
                },
                {
                    "file": "host-bmc/host_pdr_handler.hpp",
                    "line": 180,
                    "reviewer": {
                        "name": "Tom Joseph",
                        "email": "rushtotom@gmail.com",
                        "username": "tomjoseph83"
                    },
                    "message": "My suggestion will not need any major change, HostPDRHandler needs to expose an API to set the BMC entity tree once it is built in builtFruTable."
                },
                {
                    "file": "host-bmc/host_pdr_handler.hpp",
                    "line": 180,
                    "reviewer": {
                        "name": "Deepak Kodihalli",
                        "email": "deepak.kodihalli.83@gmail.com",
                        "username": "dkodihal"
                    },
                    "message": "Tom's suggestion seems feasible to me. What is the challenge doing that. The current approach seems a bit like a workaround."
                },
                {
                    "file": "host-bmc/host_pdr_handler.hpp",
                    "line": 180,
                    "reviewer": {
                        "name": "Sampa Misra",
                        "email": "sampmisr@in.ibm.com",
                        "username": "sampmisr"
                    },
                    "message": "changed this. bmc entity tree will always be updated when bmc fru table is built"
                },
                {
                    "file": "libpldm/pdr.c",
                    "line": 679,
                    "reviewer": {
                        "name": "Tom Joseph",
                        "email": "rushtotom@gmail.com",
                        "username": "tomjoseph83"
                    },
                    "message": "Please add unit test"
                },
                {
                    "file": "libpldm/pdr.c",
                    "line": 679,
                    "reviewer": {
                        "name": "Sampa Misra",
                        "email": "sampmisr@in.ibm.com",
                        "username": "sampmisr"
                    },
                    "message": "yeah"
                },
                {
                    "file": "libpldm/pdr.h",
                    "line": 297,
                    "reviewer": {
                        "name": "Tom Joseph",
                        "email": "rushtotom@gmail.com",
                        "username": "tomjoseph83"
                    },
                    "message": "nit: pldm_entity_association_tree_copy"
                },
                {
                    "file": "libpldm/pdr.h",
                    "line": 297,
                    "reviewer": {
                        "name": "Sampa Misra",
                        "email": "sampmisr@in.ibm.com",
                        "username": "sampmisr"
                    },
                    "message": "but i am not creating the copy of the tree pointer here. the content of the tree starting from the root is getting copied to another existing tree"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "host-bmc/host_pdr_handler.cpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -2
                },
                {
                    "file": "host-bmc/host_pdr_handler.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -1
                },
                {
                    "file": "libpldm/pdr.c",
                    "type": "MODIFIED",
                    "insertions": 39,
                    "deletions": 0
                },
                {
                    "file": "libpldm/pdr.h",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 80,
            "sizeDeletions": 3
        },
        {
            "number": 3,
            "revision": "9d328e1b4bae9e44bbb7cab58472d9a739a37b32",
            "parents": [
                "50304da5f27c3f6a6c12a016a1390385a2e99859"
            ],
            "ref": "refs/changes/21/43021/3",
            "uploader": {
                "name": "Sampa Misra",
                "email": "sampmisr@in.ibm.com",
                "username": "sampmisr"
            },
            "createdOn": 1620730592,
            "author": {
                "name": "Sampa Misra",
                "email": "sampmisr@in.ibm.com",
                "username": "sampmisr"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "host-bmc/host_pdr_handler.cpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -2
                },
                {
                    "file": "host-bmc/host_pdr_handler.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -1
                },
                {
                    "file": "libpldm/pdr.c",
                    "type": "MODIFIED",
                    "insertions": 39,
                    "deletions": 0
                },
                {
                    "file": "libpldm/pdr.h",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "libpldm/tests/libpldm_pdr_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 41,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 121,
            "sizeDeletions": 3
        },
        {
            "number": 4,
            "revision": "b6c32fef1769b34204c4497a1fcbb8e371ed5a50",
            "parents": [
                "50304da5f27c3f6a6c12a016a1390385a2e99859"
            ],
            "ref": "refs/changes/21/43021/4",
            "uploader": {
                "name": "Sampa Misra",
                "email": "sampmisr@in.ibm.com",
                "username": "sampmisr"
            },
            "createdOn": 1620731081,
            "author": {
                "name": "Sampa Misra",
                "email": "sampmisr@in.ibm.com",
                "username": "sampmisr"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "host-bmc/host_pdr_handler.hpp",
                    "line": 180,
                    "reviewer": {
                        "name": "Deepak Kodihalli",
                        "email": "deepak.kodihalli.83@gmail.com",
                        "username": "dkodihal"
                    },
                    "message": "static inline for a member variable?"
                },
                {
                    "file": "host-bmc/host_pdr_handler.hpp",
                    "line": 180,
                    "reviewer": {
                        "name": "Sampa Misra",
                        "email": "sampmisr@in.ibm.com",
                        "username": "sampmisr"
                    },
                    "message": "removed this. but just to make myself aware, is it not recommended to have a member variable static?"
                },
                {
                    "file": "libpldm/pdr.c",
                    "line": 704,
                    "reviewer": {
                        "name": "Deepak Kodihalli",
                        "email": "deepak.kodihalli.83@gmail.com",
                        "username": "dkodihal"
                    },
                    "message": "why not use/modify pldm_entity_association_tree_destroy?"
                },
                {
                    "file": "libpldm/pdr.c",
                    "line": 704,
                    "reviewer": {
                        "name": "Sampa Misra",
                        "email": "sampmisr@in.ibm.com",
                        "username": "sampmisr"
                    },
                    "message": "this api destroys the tree itself which is used in pldmd.cpp while declaring the tree. we need to keep the tree valid but make that an empty tree"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "host-bmc/host_pdr_handler.cpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -2
                },
                {
                    "file": "host-bmc/host_pdr_handler.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -1
                },
                {
                    "file": "libpldm/pdr.c",
                    "type": "MODIFIED",
                    "insertions": 39,
                    "deletions": 0
                },
                {
                    "file": "libpldm/pdr.h",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "libpldm/tests/libpldm_pdr_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 41,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 121,
            "sizeDeletions": 3
        },
        {
            "number": 5,
            "revision": "605b51065540d90da6579e80706c55ff8688922a",
            "parents": [
                "50304da5f27c3f6a6c12a016a1390385a2e99859"
            ],
            "ref": "refs/changes/21/43021/5",
            "uploader": {
                "name": "Sampa Misra",
                "email": "sampmisr@in.ibm.com",
                "username": "sampmisr"
            },
            "createdOn": 1620916289,
            "author": {
                "name": "Sampa Misra",
                "email": "sampmisr@in.ibm.com",
                "username": "sampmisr"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "host-bmc/host_pdr_handler.cpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -1
                },
                {
                    "file": "host-bmc/host_pdr_handler.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -1
                },
                {
                    "file": "libpldm/pdr.c",
                    "type": "MODIFIED",
                    "insertions": 39,
                    "deletions": 0
                },
                {
                    "file": "libpldm/pdr.h",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "libpldm/tests/libpldm_pdr_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 41,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 119,
            "sizeDeletions": 2
        },
        {
            "number": 6,
            "revision": "a4a91023f2751209635b1355fa7a9e62761278d9",
            "parents": [
                "144ef2bd474b518de0568d3d70cf5ef33eddf0b8"
            ],
            "ref": "refs/changes/21/43021/6",
            "uploader": {
                "name": "Sampa Misra",
                "email": "sampmisr@in.ibm.com",
                "username": "sampmisr"
            },
            "createdOn": 1621697254,
            "author": {
                "name": "Sampa Misra",
                "email": "sampmisr@in.ibm.com",
                "username": "sampmisr"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "host-bmc/host_pdr_handler.cpp",
                    "line": 83,
                    "reviewer": {
                        "name": "Tom Joseph",
                        "email": "rushtotom@gmail.com",
                        "username": "tomjoseph83"
                    },
                    "message": "Did you intend it to be \"TransitioningToOff\"? Just checking to make sure the change in the last patch was was intentional."
                },
                {
                    "file": "host-bmc/host_pdr_handler.cpp",
                    "line": 83,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "We are not supposed to clear the remote PDR's until we reach the HostSate.Off, because the softoff application would need the PDR's to detect the right host effecter to ask it to terminate. If we clear the PDR's even when we reach transitioningToOff(which we reach when we just trigger the softoff app), we might get into a race condition where we will not find the host effecterPDR to trigger the termination of host.\n\nI think sampa reverted the state change after we uncovered the above mentioned issue."
                },
                {
                    "file": "host-bmc/host_pdr_handler.cpp",
                    "line": 83,
                    "reviewer": {
                        "name": "Sampa Misra",
                        "email": "sampmisr@in.ibm.com",
                        "username": "sampmisr"
                    },
                    "message": "yeah i did \"TransitioningToOff\" initially but in a continuous run in DVT, the softoff app is getting into race condition because of that. sometimes it does not get the PDR"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "host-bmc/host_pdr_handler.cpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -2
                },
                {
                    "file": "host-bmc/host_pdr_handler.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -1
                },
                {
                    "file": "libpldm/pdr.c",
                    "type": "MODIFIED",
                    "insertions": 39,
                    "deletions": 0
                },
                {
                    "file": "libpldm/pdr.h",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "libpldm/tests/libpldm_pdr_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 41,
                    "deletions": 0
                },
                {
                    "file": "libpldmresponder/fru.cpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                },
                {
                    "file": "libpldmresponder/fru.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -4
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 133,
            "sizeDeletions": 9
        },
        {
            "number": 7,
            "revision": "c073a20e1fecd42f4c930f2c4bfcbf433f318b9d",
            "parents": [
                "79175b44a2a001dda28281833031fb805224662e"
            ],
            "ref": "refs/changes/21/43021/7",
            "uploader": {
                "name": "Sampa Misra",
                "email": "sampmisr@in.ibm.com",
                "username": "sampmisr"
            },
            "createdOn": 1621940705,
            "author": {
                "name": "Sampa Misra",
                "email": "sampmisr@in.ibm.com",
                "username": "sampmisr"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "host-bmc/host_pdr_handler.cpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -2
                },
                {
                    "file": "host-bmc/host_pdr_handler.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -1
                },
                {
                    "file": "libpldm/pdr.c",
                    "type": "MODIFIED",
                    "insertions": 39,
                    "deletions": 0
                },
                {
                    "file": "libpldm/pdr.h",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "libpldm/tests/libpldm_pdr_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 41,
                    "deletions": 0
                },
                {
                    "file": "libpldmresponder/fru.cpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                },
                {
                    "file": "libpldmresponder/fru.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -4
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 133,
            "sizeDeletions": 9
        }
    ]
}