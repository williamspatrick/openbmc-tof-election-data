{
    "project": "openbmc/phosphor-dbus-interfaces",
    "branch": "master",
    "topic": "dbus-api-drive-wltu-WIP",
    "id": "Ic4488130b0f016daa76a29bf61b8483360ba3070",
    "number": 43428,
    "subject": "Drive: Power: add power states for Drive",
    "owner": {
        "name": "Willy Tu",
        "email": "wltu@google.com",
        "username": "wltu"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-dbus-interfaces/+/43428",
    "commitMessage": "Drive: Power: add power states for Drive\n\nAdd PowerSequence and PowerSignal interface for Drive.\n\nThe PowerSequence interface represents the power sequence state of the\ndevice as a string that is decoded at a lower level.\n\nThe PowerSignal represents the state of a given signal in the Drive.\n\nChange-Id: Ic4488130b0f016daa76a29bf61b8483360ba3070\nSigned-off-by: Willy Tu <wltu@google.com>\n",
    "hashtags": [
        "dbus-api-drive-wltu"
    ],
    "createdOn": 1621580926,
    "lastUpdated": 1624291119,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1621580926,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1621580938,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1621580969,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/17760/ : FAILURE"
        },
        {
            "timestamp": 1621580993,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Hashtag added: dbus-api-drive-wltu"
        },
        {
            "timestamp": 1621583710,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1621583727,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1621584111,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/17777/ : SUCCESS"
        },
        {
            "timestamp": 1621641347,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1621641361,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1621642095,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/17850/ : SUCCESS"
        },
        {
            "timestamp": 1621812695,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 4: Commit message was updated."
        },
        {
            "timestamp": 1621874002,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 4:\n\n(2 comments)"
        },
        {
            "timestamp": 1621881042,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 4:\n\n(2 comments)"
        },
        {
            "timestamp": 1622827166,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1622829042,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1623773375,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Topic set to dbus-api-drive-wltu-WIP"
        },
        {
            "timestamp": 1624291119,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Abandoned\n\nWill use Chassis.Control.Power for pgood signals... \n\nPower sequence are too device specific to be in d-bus API."
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "a98591141789fc3dd4ee895f62a3c8f14f37f8cf",
            "parents": [
                "33458d4432a8323616622881f314a73cf0b04d97"
            ],
            "ref": "refs/changes/28/43428/1",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1621580926,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Inventory/Item/Drive/Power/meson.build",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Inventory/Item/Drive/meson.build",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Inventory/Item/meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 31,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "d5d5839eeb0f96cdd3df61d2acdce0ba1af14680",
            "parents": [
                "33458d4432a8323616622881f314a73cf0b04d97"
            ],
            "ref": "refs/changes/28/43428/2",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1621583710,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Inventory/Item/Drive/Power/meson.build",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Inventory/Item/Drive/meson.build",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Inventory/Item/meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "xyz/openbmc_project/Inventory/Item/Drive/Power.interface.yaml",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 49,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "d0ce8340fd0d4ccdbb440a590ddd8a399f816a23",
            "parents": [
                "33458d4432a8323616622881f314a73cf0b04d97"
            ],
            "ref": "refs/changes/28/43428/3",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1621641347,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Inventory/Item/Drive/PowerSignal/meson.build",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Inventory/Item/Drive/meson.build",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Inventory/Item/meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "xyz/openbmc_project/Inventory/Item/Drive/PowerSequence.interface copy.yaml",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "xyz/openbmc_project/Inventory/Item/Drive/PowerSignal.interface.yaml",
                    "type": "ADDED",
                    "insertions": 11,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 52,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "fa9f501b24066934faf9af2a25778d28703e3bc1",
            "parents": [
                "33458d4432a8323616622881f314a73cf0b04d97"
            ],
            "ref": "refs/changes/28/43428/4",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1621812695,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "xyz/openbmc_project/Inventory/Item/Drive/PowerSequence.interface copy.yaml",
                    "line": 5,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "This needs more definition.  Arbitrary strings are generally not acceptable especially because in this case it sounds like someone is going to have to write code utilizing the contents of it."
                },
                {
                    "file": "xyz/openbmc_project/Inventory/Item/Drive/PowerSequence.interface copy.yaml",
                    "line": 5,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "I'll add some enums to cover some of the status.\n\nThe only issue is that I want to support might be too specific."
                },
                {
                    "file": "xyz/openbmc_project/Inventory/Item/Drive/PowerSequence.interface copy.yaml",
                    "line": 5,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "Looking at Redfish's Drive schema, wondering if you had thoughts on what this maps to? https://redfish.dmtf.org/schemas/v1/Drive.v1_12_1.json"
                },
                {
                    "file": "xyz/openbmc_project/Inventory/Item/Drive/PowerSequence.interface copy.yaml",
                    "line": 5,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "yeah, this is a bit outdate.\n\nInitially I wanted add a new resource for Drive and maybe other. Similar issue in https://github.com/DMTF/Redfish/issues/4523.\n\nMaybe this is not needed anymore, since I am not sure what different PowerSequenceState that we  want to support in general.\n\nMaybe just wrap it around DriveState in https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-dbus-interfaces/+/43155 instead... and just map it to State.Status on Redfish."
                },
                {
                    "file": "xyz/openbmc_project/Inventory/Item/Drive/PowerSignal.interface.yaml",
                    "line": 1,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "We already have Chassis.Control.Power, which contains a pgood field.  Is this something that could be adapted to drives?"
                },
                {
                    "file": "xyz/openbmc_project/Inventory/Item/Drive/PowerSignal.interface.yaml",
                    "line": 1,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "Thanks for the update,\n\nyeah, I think it can work with Chassis.Control.Power.\n\nThanks.\n\n----\n\nDo you think it is still appropriate if we want to have multiple PGood signals? In this case, it does not fully represent a PSU, but more of just a power signal.\n\nSo like\n\n```\nDrive\n |_Drive/power_signal_0\n |_Drive/power_signal_1\n```\n\nThen `Chassis.Control.Power` is under `Drive/power_signal_X` with the PGood info. Don't care about State and the method."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Inventory/Item/Drive/PowerSignal/meson.build",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Inventory/Item/Drive/meson.build",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Inventory/Item/meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "xyz/openbmc_project/Inventory/Item/Drive/PowerSequence.interface copy.yaml",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "xyz/openbmc_project/Inventory/Item/Drive/PowerSignal.interface.yaml",
                    "type": "ADDED",
                    "insertions": 11,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 52,
            "sizeDeletions": 0
        }
    ]
}