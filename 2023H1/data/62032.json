{
    "project": "openbmc/phosphor-user-manager",
    "branch": "master",
    "id": "I0701e4148c0b8333c6b8889d4695e61ce7f5366d",
    "number": 62032,
    "subject": "Change to pam_faillock and pam pwquality",
    "owner": {
        "name": "Jason Bills",
        "email": "jason.m.bills@linux.intel.com",
        "username": "jmbills"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-user-manager/+/62032",
    "hashtags": [],
    "createdOn": 1680109560,
    "lastUpdated": 1684178664,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1680109560,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1680109608,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1680109608,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1680109643,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/63334/ : FAILURE"
        },
        {
            "timestamp": 1680109888,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1680129893,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Uploaded patch set 2.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1680129929,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1680129929,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1680130114,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/63357/ : SUCCESS"
        },
        {
            "timestamp": 1680663211,
            "reviewer": {
                "name": "Jonathan Doman",
                "email": "jonathan.doman@intel.com",
                "username": "jonathan-doman"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1680717124,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1680731090,
            "reviewer": {
                "name": "Jonathan Doman",
                "email": "jonathan.doman@intel.com",
                "username": "jonathan-doman"
            },
            "message": "Patch Set 2: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1680777475,
            "reviewer": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1680812427,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1681412998,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Code-Review+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE OR changekind:TRIVIAL_REBASE OR is:MIN\")\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1681413013,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1681413013,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1681413195,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/64221/ : SUCCESS"
        },
        {
            "timestamp": 1681413316,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1681414606,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Uploaded patch set 4.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1681414633,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1681414633,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1681414816,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/64223/ : SUCCESS"
        },
        {
            "timestamp": 1681757139,
            "reviewer": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1681757464,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1681762947,
            "reviewer": {
                "name": "Jonathan Doman",
                "email": "jonathan.doman@intel.com",
                "username": "jonathan-doman"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1682009286,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1682011267,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1682722114,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1683062500,
            "reviewer": {
                "name": "Joseph Reynolds",
                "email": "joseph.reynolds1@ibm.com",
                "username": "joseph-reynolds"
            },
            "message": "Patch Set 4:\n\n(4 comments)"
        },
        {
            "timestamp": 1683221781,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 4:\n\n(4 comments)"
        },
        {
            "timestamp": 1683255807,
            "reviewer": {
                "name": "Joseph Reynolds",
                "email": "joseph.reynolds1@ibm.com",
                "username": "joseph-reynolds"
            },
            "message": "Patch Set 4: Code-Review+1\n\n(3 comments)"
        },
        {
            "timestamp": 1683526798,
            "reviewer": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1683583340,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1683621515,
            "reviewer": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "message": "Patch Set 4: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1683669279,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1683784889,
            "reviewer": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "message": "Patch Set 4: Code-Review+2"
        },
        {
            "timestamp": 1683836873,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Uploaded patch set 5.\n\nOutdated Votes:\n* Code-Review+1, Code-Review+2 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE OR changekind:TRIVIAL_REBASE OR is:MIN\")\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1683836920,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1683836922,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1683836922,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1683837111,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/66269/ : SUCCESS"
        },
        {
            "timestamp": 1684167748,
            "reviewer": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "message": "Patch Set 5: Code-Review+2"
        },
        {
            "timestamp": 1684178664,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Change has been successfully merged"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "33dc1db1cf058159b158ef7246848ae24abb4db8",
            "parents": [
                "e8d664d1689cfec3449ec964262d665f7b4ec873"
            ],
            "ref": "refs/changes/32/62032/1",
            "uploader": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "createdOn": 1680109560,
            "author": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "This change references and replaces the pam_faillock portion of this change: https://gerrit.openbmc.org/c/openbmc/phosphor-user-manager/+/39853."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 38,
                    "deletions": 0
                },
                {
                    "file": "user_mgr.hpp",
                    "type": "MODIFIED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "user_mgr.cpp",
                    "type": "MODIFIED",
                    "insertions": 139,
                    "deletions": -28
                }
            ],
            "sizeInsertions": 193,
            "sizeDeletions": 28
        },
        {
            "number": 2,
            "revision": "adaeb18e3217b64bfddf5df7632f6ccc79976858",
            "parents": [
                "e8d664d1689cfec3449ec964262d665f7b4ec873"
            ],
            "ref": "refs/changes/32/62032/2",
            "uploader": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "createdOn": 1680129893,
            "author": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "user_mgr.cpp",
                    "line": 619,
                    "reviewer": {
                        "name": "Jonathan Doman",
                        "email": "jonathan.doman@intel.com",
                        "username": "jonathan-doman"
                    },
                    "message": "Is there a way we can do a one-time check for which module the system supports, and then we know for the rest of the code which module to use?"
                },
                {
                    "file": "user_mgr.cpp",
                    "line": 619,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "Yes, that would be better.  However, pam_tally2 is removed in libpam 1.5.2, so this is a temporary situation.  Sometime after updating OpenBMC to libpam 1.5.2, we can delete support for pam_tally2 from this file.\n\nI did it this way to avoid having to coordinate a cutover to 1.5.2 in multiple repos."
                },
                {
                    "file": "user_mgr.cpp",
                    "line": 619,
                    "reviewer": {
                        "name": "Jonathan Doman",
                        "email": "jonathan.doman@intel.com",
                        "username": "jonathan-doman"
                    },
                    "message": "Ack"
                },
                {
                    "file": "user_mgr.cpp",
                    "line": 619,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "@jason: I think we can take openBMC to move to libpam1.5.2 and we can have only single module to check.\nThere were effort to do the same.\nhttps://gerrit.openbmc.org/c/openbmc/openbmc/+/41357"
                },
                {
                    "file": "user_mgr.cpp",
                    "line": 619,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "I plan to restart that effort to move to libpam 1.5.2, but it seemed simpler to have phosphor-user-manager support both versions while we work on the transition.  That way we don't have to coordinate merges in two repos and can keep some time of backward-compatibility.\n\nAfter the transition to libpam 1.5.2 is completed, we can remove the pam_tally2 sections of this code."
                },
                {
                    "file": "user_mgr.cpp",
                    "line": 619,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "Based on feedback and documentation, I got have switched to the conf files for configuration of the faillock and pwquality modules.  After that, it was easier to do as you recommended and just switch directly to the new libpam modules.\n\nThis will need to be coordinated with the upstream commit to move to libpam 1.5.2 which I have not started yet, but plan to start soon."
                },
                {
                    "file": "user_mgr.cpp",
                    "line": 619,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "Do you mean to say that enable this change through compile time configuration?"
                },
                {
                    "file": "user_mgr.cpp",
                    "line": 619,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "No. The change will fully switch to faillock and pwquality and remove support for tally2 and cracklib. There won't be an option to use the old modules anymore, so this will need to be merged at the same time as the change to libpam 1.5.2 that I plan to start upstream soon.\n\nThe configuration I mentioned is that instead of adding the parameters for account lockout and password length directly to common-auth and common-password, the new modules support individual conf files in /etc/security that are recommended. So, with this latest patch set, I changed the code to get/set the account lockout and password length options using the conf files."
                },
                {
                    "file": "user_mgr.cpp",
                    "line": 935,
                    "reviewer": {
                        "name": "Jonathan Doman",
                        "email": "jonathan.doman@intel.com",
                        "username": "jonathan-doman"
                    },
                    "message": "It would be cool to just use the PAM library to do this work instead of maintaining 2 complicated string parsing functions based on userspace utilities with no guaranteed format. I think we could do it by creating a temporary PAM stack that just includes the relevant auth line from common-auth (either tally or faillock) and running a pam_authenticate with a dummy password. But since this code is already written, we can leave this for a future improvement."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 38,
                    "deletions": 0
                },
                {
                    "file": "user_mgr.hpp",
                    "type": "MODIFIED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "user_mgr.cpp",
                    "type": "MODIFIED",
                    "insertions": 139,
                    "deletions": -28
                },
                {
                    "file": "test/user_mgr_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 22,
                    "deletions": -11
                }
            ],
            "sizeInsertions": 215,
            "sizeDeletions": 39
        },
        {
            "number": 3,
            "revision": "4d40d1b6106e706bbc60ccfa6ab76dff4e1fe096",
            "parents": [
                "e8d664d1689cfec3449ec964262d665f7b4ec873"
            ],
            "ref": "refs/changes/32/62032/3",
            "uploader": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "createdOn": 1681412998,
            "author": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 51,
                    "deletions": 0
                },
                {
                    "file": "user_mgr.hpp",
                    "type": "MODIFIED",
                    "insertions": 38,
                    "deletions": -1
                },
                {
                    "file": "user_mgr.cpp",
                    "type": "MODIFIED",
                    "insertions": 190,
                    "deletions": -98
                },
                {
                    "file": "test/user_mgr_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 119,
                    "deletions": -63
                }
            ],
            "sizeInsertions": 398,
            "sizeDeletions": 162
        },
        {
            "number": 4,
            "revision": "efe505980266ae745bc00bfe921f86c6c599400b",
            "parents": [
                "e8d664d1689cfec3449ec964262d665f7b4ec873"
            ],
            "ref": "refs/changes/32/62032/4",
            "uploader": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "createdOn": 1681414606,
            "author": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "Is there a build dependency already update for require libpam version?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "Not yet. I still need to prepare and push the libpam 1.5.2 update.  We should hold off on merging this change until that change is ready."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "I have pushed the libpam 1.5.2 update for review, here: https://gerrit.openbmc.org/c/openbmc/openbmc/+/41357.\n\nWhen that is approved, it will need to merge together with this change."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph.reynolds1@ibm.com",
                        "username": "joseph-reynolds"
                    },
                    "message": "Looks good to me..."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "It looks like the libpam update merged: https://gerrit.openbmc.org/c/openbmc/openbmc/+/41357.  That means that phosphor-user-manager is broken without this change.\n\nCan we move this to +2 and merge it to get everything in sync and work on the remaining feedback in separate reviews?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph.reynolds1@ibm.com",
                        "username": "joseph-reynolds"
                    },
                    "message": "LGTM"
                },
                {
                    "file": "user_mgr.cpp",
                    "line": 683,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "What is the difference between two functions?  One is looks for module name and then looks for arg to search,\n\nCan we merge both functions to avoid code duplication?"
                },
                {
                    "file": "user_mgr.cpp",
                    "line": 683,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "Yes, they can probably be merged, but it will require additional refactoring.  Can this go in as-is and work on refactoring in a separate patch set?  The libpam update merged, so phosphor-user-manager is currently broken."
                },
                {
                    "file": "user_mgr.cpp",
                    "line": 683,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "+1, Can you open a github issue and update it here as the comment and assign it to you?"
                },
                {
                    "file": "user_mgr.cpp",
                    "line": 683,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "https://github.com/openbmc/phosphor-user-manager/issues/16"
                },
                {
                    "file": "user_mgr.cpp",
                    "line": 840,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph.reynolds1@ibm.com",
                        "username": "joseph-reynolds"
                    },
                    "message": "(!found) leaves the temp file around.  Should this code open the temp file using ios::out|ios::trunc  so it it guaranteed an empty file?"
                },
                {
                    "file": "user_mgr.cpp",
                    "line": 840,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "Good catch! This is a copy/paste of the function that writes to the pam.d files, so it would be better to add as a separate fix."
                },
                {
                    "file": "user_mgr.cpp",
                    "line": 840,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph.reynolds1@ibm.com",
                        "username": "joseph-reynolds"
                    },
                    "message": "Ack"
                },
                {
                    "file": "user_mgr.cpp",
                    "line": 876,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph.reynolds1@ibm.com",
                        "username": "joseph-reynolds"
                    },
                    "message": "The following issue asks for a better interface to determine if a user is faillock'ed which would make this code not needed: https://github.com/linux-pam/linux-pam/issues/327"
                },
                {
                    "file": "user_mgr.cpp",
                    "line": 876,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "Ack"
                },
                {
                    "file": "user_mgr.cpp",
                    "line": 934,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph.reynolds1@ibm.com",
                        "username": "joseph-reynolds"
                    },
                    "message": "Was this tested with a new user who has never tried to authenticate (so is unknown to faillock), and with various error conditions?  My notes:\n    // Expected output:\n    // If user is not known to faillock [because they have never attempt to authenticate], output is empty.\n    // If user is known to faillock, output is two header lines followed by zero\n    // or more records:\n    // > {userName}:\n    // > \"When        Type    Source          Valid\"\n    // > ${timestamp} ${type} {RHOST,TTY,SVC} {V,I}\n    //\n    // If there is an error, the output is a single line like this:\n    // /usr/sbin/faillock: Error clearing the tally file for {user}:{output from\n    // perror}\n    // Example: /usr/sbin/faillock: Error opening the tally file for admin:Not\n    // a directory"
                },
                {
                    "file": "user_mgr.cpp",
                    "line": 934,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "Yes, I tested with a user who has never tried to authenticate.  I didn't do much testing with error conditions, though.  But as long as the error output doesn't end in \"V\", I don't think it will cause issues."
                },
                {
                    "file": "user_mgr.cpp",
                    "line": 934,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph.reynolds1@ibm.com",
                        "username": "joseph-reynolds"
                    },
                    "message": "The code seems okay."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 51,
                    "deletions": 0
                },
                {
                    "file": "user_mgr.hpp",
                    "type": "MODIFIED",
                    "insertions": 38,
                    "deletions": -1
                },
                {
                    "file": "user_mgr.cpp",
                    "type": "MODIFIED",
                    "insertions": 189,
                    "deletions": -98
                },
                {
                    "file": "test/user_mgr_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 119,
                    "deletions": -63
                }
            ],
            "sizeInsertions": 397,
            "sizeDeletions": 162
        },
        {
            "number": 5,
            "revision": "2d042d143b655e1133e1eeeb6a438460bec83e6c",
            "parents": [
                "b704304707be1a8290e61d851274f5de2e49ce6d"
            ],
            "ref": "refs/changes/32/62032/5",
            "uploader": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "createdOn": 1683836873,
            "author": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "Needed a rebase"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 51,
                    "deletions": 0
                },
                {
                    "file": "user_mgr.hpp",
                    "type": "MODIFIED",
                    "insertions": 38,
                    "deletions": -1
                },
                {
                    "file": "user_mgr.cpp",
                    "type": "MODIFIED",
                    "insertions": 189,
                    "deletions": -98
                },
                {
                    "file": "test/user_mgr_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 119,
                    "deletions": -63
                }
            ],
            "sizeInsertions": 397,
            "sizeDeletions": 162
        }
    ]
}