{
    "project": "openbmc/bmcweb",
    "branch": "master",
    "id": "I5df52786afe21d9267188a86c4dc62f1d97f0298",
    "number": 60798,
    "subject": "Fix popup-box authenticate on session disconnect",
    "owner": {
        "name": "Kiran Kumar Ballapalli",
        "email": "kirankumarb@ami.com",
        "username": "kirankumarb07"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/bmcweb/+/60798",
    "hashtags": [],
    "createdOn": 1675957543,
    "lastUpdated": 1680506492,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1675957543,
            "reviewer": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1675957587,
            "reviewer": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "message": "Patch Set 2: Commit message was updated."
        },
        {
            "timestamp": 1675957610,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1675957610,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1675958430,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/60603/ : SUCCESS"
        },
        {
            "timestamp": 1675963369,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1675963449,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1677666862,
            "reviewer": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1677667282,
            "reviewer": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "message": "Patch Set 3: Commit message was updated.\n\nCopied Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1677667353,
            "reviewer": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1677714186,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1677714222,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1679661764,
            "reviewer": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1679924267,
            "reviewer": {
                "name": "Dhineshkumar Rajendran",
                "email": "dineshkumar@ami.com",
                "username": "dineshkumar9376"
            },
            "message": "Uploaded patch set 4.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1679924308,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1679924308,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1679924344,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/63161/ : FAILURE"
        },
        {
            "timestamp": 1679924638,
            "reviewer": {
                "name": "Dhineshkumar Rajendran",
                "email": "dineshkumar@ami.com",
                "username": "dineshkumar9376"
            },
            "message": "Uploaded patch set 5.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1679924678,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1679924678,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1679924709,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/63162/ : FAILURE"
        },
        {
            "timestamp": 1679924990,
            "reviewer": {
                "name": "Dhineshkumar Rajendran",
                "email": "dineshkumar@ami.com",
                "username": "dineshkumar9376"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1679927408,
            "reviewer": {
                "name": "Dhineshkumar Rajendran",
                "email": "dineshkumar@ami.com",
                "username": "dineshkumar9376"
            },
            "message": "Uploaded patch set 6.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1679927442,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1679927443,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: -Ok-To-Test"
        },
        {
            "timestamp": 1679927612,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/63166/ : FAILURE"
        },
        {
            "timestamp": 1679933092,
            "reviewer": {
                "name": "Dhineshkumar Rajendran",
                "email": "dineshkumar@ami.com",
                "username": "dineshkumar9376"
            },
            "message": "Uploaded patch set 7.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1679933146,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1679933146,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: -Ok-To-Test"
        },
        {
            "timestamp": 1679934035,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/63174/ : FAILURE"
        },
        {
            "timestamp": 1679935002,
            "reviewer": {
                "name": "Dhineshkumar Rajendran",
                "email": "dineshkumar@ami.com",
                "username": "dineshkumar9376"
            },
            "message": "Uploaded patch set 8.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1679935060,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1679935060,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: -Ok-To-Test"
        },
        {
            "timestamp": 1679935779,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 8:\n\n(4 comments)"
        },
        {
            "timestamp": 1679935852,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1679936430,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/63175/ : SUCCESS"
        },
        {
            "timestamp": 1679945841,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 8:\n\n(2 comments)"
        },
        {
            "timestamp": 1679947596,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1679947724,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 8:\n\n(2 comments)"
        },
        {
            "timestamp": 1679948057,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1679948060,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1679948724,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1680172026,
            "reviewer": {
                "name": "Dhineshkumar Rajendran",
                "email": "dineshkumar@ami.com",
                "username": "dineshkumar9376"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1680177509,
            "reviewer": {
                "name": "Dhineshkumar Rajendran",
                "email": "dineshkumar@ami.com",
                "username": "dineshkumar9376"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1680192201,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1680506453,
            "reviewer": {
                "name": "Dhineshkumar Rajendran",
                "email": "dineshkumar@ami.com",
                "username": "dineshkumar9376"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1680506492,
            "reviewer": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "message": "Abandoned"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "29e94ff54acd3ffd7702ca8b1e370f2f11db7684",
            "parents": [
                "369ea3ffb0c76c33c7ccd0bbb0e8dcb0039cd285"
            ],
            "ref": "refs/changes/98/60798/1",
            "uploader": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "createdOn": 1675957543,
            "author": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 28,
            "sizeDeletions": 1
        },
        {
            "number": 2,
            "revision": "9479cf27ec25f56709f79825303f023ad18f22a9",
            "parents": [
                "369ea3ffb0c76c33c7ccd0bbb0e8dcb0039cd285"
            ],
            "ref": "refs/changes/98/60798/2",
            "uploader": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "createdOn": 1675957587,
            "author": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 17,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This is not what the code you wrote is doing.  The parameter you used determines whether a UI is installed, not whether or not it is being used at the moment."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 17,
                    "reviewer": {
                        "name": "Kiran Kumar Ballapalli",
                        "email": "kirankumarb@ami.com",
                        "username": "kirankumarb07"
                    },
                    "message": "Updated the commit message."
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "line": 53,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This will cause us to fail redfish as well.  Please take a look at section 8.1 of the redfish specification.\n\nhasWebuiRoute just determines if the webui is installed, not whether or not this is the webui accessing the page."
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "line": 53,
                    "reviewer": {
                        "name": "Kiran Kumar Ballapalli",
                        "email": "kirankumarb@ami.com",
                        "username": "kirankumarb07"
                    },
                    "message": "As per my further analysis, I have found that we are not allowing any Redfish API calls in the browser when the WebUI is not installed.\n\nIf WebUI is installed, we can redirect to the login page for basic authentication. So there is no need to add www-authenticate in the header and we can avoid the authentication pop-up when disconnecting the session.\n\nI hope the current patch is handling the above behavior."
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "line": 53,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Your analysis doesn't track for me, because it's still removing the www-authenticate header from redfish.  When you reply next, please quote how you believe we're following section 8.1, because I'm not understanding it."
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "line": 53,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> If WebUI is installed, we can redirect to the login page for basic authentication.\n\nNot all Redfish clients are browsers or support Redirect."
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "line": 53,
                    "reviewer": {
                        "name": "Kiran Kumar Ballapalli",
                        "email": "kirankumarb@ami.com",
                        "username": "kirankumarb07"
                    },
                    "message": "@Dhineshkumar Rajendran please provide further update."
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "line": 53,
                    "reviewer": {
                        "name": "Dhineshkumar Rajendran",
                        "email": "dineshkumar@ami.com",
                        "username": "dineshkumar9376"
                    },
                    "message": "Hi ed,\n\nWe are not trying to remove the \"www-authenticate\" header from redfish.\n\nSo I have updated the patchset to check the \"User-Agent\" and the \"Accept\" value from the API's request header. If an unauthorized request is made from the browser and the Accept header value contains JSON, then that unauthorized request will be set with a 401 status instead of adding the \"www-authenticate\" header. So the browser won't populate the authentication window, and Web UI will navigate to the login page since the API responded with a 401 status.\n\nThe reason I have used the Accept header value to validate is that if we call the redfish URL directly from the browser, the Accept header value will be HTML, while API calls from a web UI application will have the JSON value in the \"Accept\" header. And used the \"User-Agent\" header to confirm that request made from the browser. With these two, I am confident that an unauthorized request is sent from the web UI application."
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "line": 53,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> We are not trying to remove the \"www-authenticate\" header from redfish.\n\nUnderstood, but in the original patch, that's how the original patch behaved.\n\n>  the Accept header value will be HTML,\n\nThis isn't true for browser XHR requests, although we already do this check in the existing code."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 28,
            "sizeDeletions": 1
        },
        {
            "number": 3,
            "revision": "b1b723284c29390365d9c7050fba294b8a76aae3",
            "parents": [
                "369ea3ffb0c76c33c7ccd0bbb0e8dcb0039cd285"
            ],
            "ref": "refs/changes/98/60798/3",
            "uploader": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "createdOn": 1677667282,
            "author": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 28,
            "sizeDeletions": 1
        },
        {
            "number": 4,
            "revision": "695a756918d4bec1bdba6cbefa3533fbe49861b8",
            "parents": [
                "369ea3ffb0c76c33c7ccd0bbb0e8dcb0039cd285"
            ],
            "ref": "refs/changes/98/60798/4",
            "uploader": {
                "name": "Dhineshkumar Rajendran",
                "email": "dineshkumar@ami.com",
                "username": "dineshkumar9376"
            },
            "createdOn": 1679924267,
            "author": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "include/http_utility.hpp",
                    "type": "MODIFIED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "http/http_connection.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 61,
            "sizeDeletions": 2
        },
        {
            "number": 5,
            "revision": "df79e9fa14d842fd97059faa353f607dbfc73c1b",
            "parents": [
                "6c3e94511027133db407f9e1c3c628927ec1332f"
            ],
            "ref": "refs/changes/98/60798/5",
            "uploader": {
                "name": "Dhineshkumar Rajendran",
                "email": "dineshkumar@ami.com",
                "username": "dineshkumar9376"
            },
            "createdOn": 1679924638,
            "author": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "include/http_utility.hpp",
                    "type": "MODIFIED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "http/http_connection.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 61,
            "sizeDeletions": 2
        },
        {
            "number": 6,
            "revision": "e744430aa1da63411c5edbdba8fac843129a0f37",
            "parents": [
                "6c3e94511027133db407f9e1c3c628927ec1332f"
            ],
            "ref": "refs/changes/98/60798/6",
            "uploader": {
                "name": "Dhineshkumar Rajendran",
                "email": "dineshkumar@ami.com",
                "username": "dineshkumar9376"
            },
            "createdOn": 1679927408,
            "author": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "include/http_utility.hpp",
                    "type": "MODIFIED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "http/http_connection.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 55,
            "sizeDeletions": 2
        },
        {
            "number": 7,
            "revision": "7696a798f2a1a6946ee8dbcb190686d3e4192c8a",
            "parents": [
                "6c3e94511027133db407f9e1c3c628927ec1332f"
            ],
            "ref": "refs/changes/98/60798/7",
            "uploader": {
                "name": "Dhineshkumar Rajendran",
                "email": "dineshkumar@ami.com",
                "username": "dineshkumar9376"
            },
            "createdOn": 1679933092,
            "author": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "include/http_utility.hpp",
                    "type": "MODIFIED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "http/http_connection.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 55,
            "sizeDeletions": 2
        },
        {
            "number": 8,
            "revision": "79e6a80b1517623dda70b81f9cc40d48cd0b2289",
            "parents": [
                "6c3e94511027133db407f9e1c3c628927ec1332f"
            ],
            "ref": "refs/changes/98/60798/8",
            "uploader": {
                "name": "Dhineshkumar Rajendran",
                "email": "dineshkumar@ami.com",
                "username": "dineshkumar9376"
            },
            "createdOn": 1679935002,
            "author": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "https://gerrit.openbmc.org/c/openbmc/webui-vue/+/61961"
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "line": 39,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This check is already effectively present on line 19.\n\nwhat values other than HTML or JSON get sent?"
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "line": 39,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "When I reproduce this issue, the web UI sends a DELETE to the session, then sends this request which causes the pop-up box to appear:\nGeneral:\nRequest URL: https://xxx.xxx.49.59/redfish/v1/SessionService/Sessions\nReferrer Policy: strict-origin-when-cross-origin\n\nRequest Headers:\nAccept: application/json, text/plain, */*\nAccept-Encoding: gzip, deflate, br\nAccept-Language: en-US,en;q=0.9\nConnection: keep-alive\nCookie: XSRF-TOKEN=vkK2PxmpltjU3UvWQRAM; SESSION=TYYxjaHPKfxo5FZGDGTo\nHost: xxx.xxx.49.59\nReferer: https://xxx.xxx.49.59/\nsec-ch-ua: \"Microsoft Edge\";v=\"111\", \"Not(A:Brand\";v=\"8\", \"Chromium\";v=\"111\"\nsec-ch-ua-mobile: ?0\nsec-ch-ua-platform: \"Windows\"\nSec-Fetch-Dest: empty\nSec-Fetch-Mode: cors\nSec-Fetch-Site: same-origin\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36 Edg/111.0.1661.51\nX-XSRF-TOKEN: vkK2PxmpltjU3UvWQRAM\n\nAs a side note: refreshing the page continues to show the pop-up box, but pressing ESC on the pop-up box causes the web UI to redirect to the login page."
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "line": 39,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> Accept: application/json, text/plain, /\n\nAssuming that is the real header and not some encoding mistake, that's the problem,  the webui should not be accepting text/plain, and the \", /\" at the end looks completely wrong.  If it wants to accept anything, it should be setting */*.\n\nI suspect next steps are someone needs to triage webui-vue, and why it's setting that accepts header, especially on a redfish resource."
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "line": 39,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "oh, interesting, might be gerrit escaping.  Should've been\n\n```\nshould be setting */*\n```"
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "line": 39,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "Yes. I guess I should have put it in backticks. \ud83d\ude0a\n```\nRequest URL: https://xxx.xxx.49.59/redfish/v1/SessionService/Sessions\nReferrer Policy: strict-origin-when-cross-origin\nAccept: application/json, text/plain, */*\nAccept-Encoding: gzip, deflate, br\nAccept-Language: en-US,en;q=0.9\nConnection: keep-alive\nCookie: XSRF-TOKEN=vkK2PxmpltjU3UvWQRAM; SESSION=TYYxjaHPKfxo5FZGDGTo\nHost: xxx.xxx.49.59\nReferer: https://xxx.xxx.49.59/\nsec-ch-ua: \"Microsoft Edge\";v=\"111\", \"Not(A:Brand\";v=\"8\", \"Chromium\";v=\"111\"\nsec-ch-ua-mobile: ?0\nsec-ch-ua-platform: \"Windows\"\nSec-Fetch-Dest: empty\nSec-Fetch-Mode: cors\nSec-Fetch-Site: same-origin\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36 Edg/111.0.1661.51\nX-XSRF-TOKEN: vkK2PxmpltjU3UvWQRAM\n```\n\nFrom what I could tell, it's the `*/*` that is causing `isContentTypeAllowed()` on line 19 to return false, but I couldn't ever figure out why it's added."
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "line": 39,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "With that said, if it is setting ```*/*```, that's the problem."
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "line": 50,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Can you please comment  in your commit message on why:\n\n1. This check is left in place in this patch.  This patch seems to be replacing this check, so it's not clear why it's left.\n\n2. Why the browser was not sending an X-Requested-With header during this bug?\n\nThis line of code is supposed to solve the problem you're solving."
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "line": 50,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "Does the web UI need to set this header manually?"
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "line": 50,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I wasn't able to tell if it's set by default these days, although it was requested:\n\nAt the very least, it's a one line change to set it by default.\nhttps://github.com/axios/axios/issues/1322#issuecomment-449626391"
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "line": 50,
                    "reviewer": {
                        "name": "Dhineshkumar Rajendran",
                        "email": "dineshkumar@ami.com",
                        "username": "dineshkumar9376"
                    },
                    "message": "> This check is left in place in this patch. This patch seems to be replacing this check, so it's not clear why it's left.\n\nYes. I have added the header `X-Requested-With` in webui-vue and which is working as expected.\n\n> Why the browser was not sending an X-Requested-With header during this bug?\n\nFrom the webui-vue, header `X-Requested-With` is not added for any API request. That is the reason why the browser popped up the authentication box."
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "line": 50,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "So this review can be abandoned then?"
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "line": 50,
                    "reviewer": {
                        "name": "Dhineshkumar Rajendran",
                        "email": "dineshkumar@ami.com",
                        "username": "dineshkumar9376"
                    },
                    "message": "ACK.\n\nWe can proceed with the below changes.\nhttps://gerrit.openbmc.org/c/openbmc/webui-vue/+/61961"
                },
                {
                    "file": "include/http_utility.hpp",
                    "line": 47,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Where is this list sourced from?  How do we verify this includes all browsers?"
                },
                {
                    "file": "include/http_utility.hpp",
                    "line": 47,
                    "reviewer": {
                        "name": "Dhineshkumar Rajendran",
                        "email": "dineshkumar@ami.com",
                        "username": "dineshkumar9376"
                    },
                    "message": "Refered from below,\n\nhttps://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/User-Agent"
                },
                {
                    "file": "include/http_utility.hpp",
                    "line": 53,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Please do not parse structured strings with find().  Please parse them using the appropriate functions. This is called out in COMMON_ERRORS.md"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "include/http_utility.hpp",
                    "type": "MODIFIED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "http/http_connection.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                },
                {
                    "file": "include/forward_unauthorized.hpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 57,
            "sizeDeletions": 2
        }
    ]
}