{
    "project": "openbmc/libpldm",
    "branch": "main",
    "id": "Ide7dbf735f69a8288e6f39a0b7b5c33aad38a98e",
    "number": 62773,
    "subject": "msgbuf: Add insert and span APIs",
    "owner": {
        "name": "Thu Nguyen",
        "email": "thu@os.amperecomputing.com",
        "username": "ThuBaNguyen"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/libpldm/+/62773",
    "hashtags": [],
    "createdOn": 1682175438,
    "lastUpdated": 1682738776,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1682175438,
            "reviewer": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1682175477,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1682175477,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1682175699,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/64752/ : FAILURE"
        },
        {
            "timestamp": 1682202091,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1682207082,
            "reviewer": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1682208726,
            "reviewer": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Uploaded patch set 2.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1682208751,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1682208751,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1682208982,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/64753/ : SUCCESS"
        },
        {
            "timestamp": 1682312749,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 2:\n\n(3 comments)"
        },
        {
            "timestamp": 1682438891,
            "reviewer": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1682438922,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1682438922,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1682439148,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/64920/ : SUCCESS"
        },
        {
            "timestamp": 1682439214,
            "reviewer": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1682465553,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 3:\n\n(12 comments)"
        },
        {
            "timestamp": 1682495231,
            "reviewer": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Uploaded patch set 4.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1682495263,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1682495263,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1682495588,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/64953/ : SUCCESS"
        },
        {
            "timestamp": 1682496100,
            "reviewer": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Patch Set 4:\n\n(11 comments)"
        },
        {
            "timestamp": 1682551988,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 4: Code-Review-1\n\n(5 comments)"
        },
        {
            "timestamp": 1682563852,
            "reviewer": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Uploaded patch set 5.\n\nOutdated Votes:\n* Code-Review-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE OR changekind:TRIVIAL_REBASE OR is:MIN\")\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1682563903,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1682563903,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1682564279,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/65058/ : SUCCESS"
        },
        {
            "timestamp": 1682565821,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1682568107,
            "reviewer": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Uploaded patch set 6.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1682568143,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1682568143,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: -Ok-To-Test"
        },
        {
            "timestamp": 1682568168,
            "reviewer": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Patch Set 6:\n\n(2 comments)"
        },
        {
            "timestamp": 1682568391,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/65064/ : SUCCESS"
        },
        {
            "timestamp": 1682569802,
            "reviewer": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1682570776,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 6: Code-Review+1"
        },
        {
            "timestamp": 1682690204,
            "reviewer": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Uploaded patch set 7.\n\nOutdated Votes:\n* Code-Review+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE OR changekind:TRIVIAL_REBASE OR is:MIN\")\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1682690256,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1682690256,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: -Ok-To-Test"
        },
        {
            "timestamp": 1682690619,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/65359/ : SUCCESS"
        },
        {
            "timestamp": 1682690714,
            "reviewer": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1682722018,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 7:\n\n(6 comments)"
        },
        {
            "timestamp": 1682736491,
            "reviewer": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Uploaded patch set 8.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1682736509,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1682736509,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: -Ok-To-Test"
        },
        {
            "timestamp": 1682736843,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/65390/ : SUCCESS"
        },
        {
            "timestamp": 1682736967,
            "reviewer": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Patch Set 8:\n\n(5 comments)"
        },
        {
            "timestamp": 1682738462,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 8: Code-Review+2"
        },
        {
            "timestamp": 1682738776,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Change has been successfully rebased and submitted as 062c8762c7ebf112a4a5c7b6c0424341ac38ea33"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "cdfe60b93ff8c404487db23368ae79fc194768ba",
            "parents": [
                "7992eb8415cb8d9939d8b635654b238a0848ee91"
            ],
            "ref": "refs/changes/73/62773/1",
            "uploader": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "createdOn": 1682175438,
            "author": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "some of the ubsan errors may be fixed by a fetch and rebase"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Thu Nguyen",
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Yes. I'm working on that."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "src/msgbuf.h",
                    "type": "MODIFIED",
                    "insertions": 85,
                    "deletions": 0
                },
                {
                    "file": "tests/msgbuf.cpp",
                    "type": "MODIFIED",
                    "insertions": 126,
                    "deletions": 0
                },
                {
                    "file": "tests/msgbuf_generic.c",
                    "type": "MODIFIED",
                    "insertions": 74,
                    "deletions": -5
                }
            ],
            "sizeInsertions": 299,
            "sizeDeletions": 5
        },
        {
            "number": 2,
            "revision": "cc32445bb616e45e5e8a1044f61ddb2042042157",
            "parents": [
                "9667f58239302e6053da27876981cdd0bf9c5de2"
            ],
            "ref": "refs/changes/73/62773/2",
            "uploader": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "createdOn": 1682208726,
            "author": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Hi Thu, I think this is definitely the direction we want to go, however I have some suggestions for better integrating what you've done with the existing `struct pldm_msgbuf` object."
                },
                {
                    "file": "meson_options.txt",
                    "line": 2,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Please drop this addition of whitespace."
                },
                {
                    "file": "meson_options.txt",
                    "line": 2,
                    "reviewer": {
                        "name": "Thu Nguyen",
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "I removed the file from change list. The file is added because of one mistake."
                },
                {
                    "file": "src/msgbuf.h",
                    "line": 369,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "I agree we need to add APIs for packing data into a buffer, in addition to the existing `pldm_msgbuf_extract*()` APIs for extracting it.\n\nA couple of things:\n\n1. If we're going to define these types of APIs in `src/msgbuf.h` then they should integrate with the actual `struct pldm_msgbuf` object\n2. I will argue they should be part of the `struct pldm_msgbuf` object as they are the dual of the \"extract\" operations.\n\nI think the prototype should look like the following:\n\n```\nstatic inline int pldm_msgbuf_insert_uint32(struct pldm_msgbuf *ctx, uint32_t src);\n```\n\nFor this example the operation should insert a `uint32_t` type, in the correct endian form (LE for the PLDM specs), at the current cursor position for the buffer associated with the `struct pldm_msgbuf` instance.\n\nIn this way we can uphold the \"doesn't overflow\" property by checking against `struct pldm_msgbuf`'s `remaining` member in the same way that the `pldm_msgbuf_extract*()` functions do.\n\nAlso note that `src` doesn't need to be a pointer here, I think that just makes the API a little more awkward than is necessary. It's necessary that it's a pointer for the `pldm_msgbuf_extract*()` functions as it's an out-parameter (the return value is the succes/error result) but there's no reason to try to be consistent with that between these functions you've added and the extract functions.\n\nThis comment also applies for the remaining functions you've added below."
                },
                {
                    "file": "src/msgbuf.h",
                    "line": 369,
                    "reviewer": {
                        "name": "Thu Nguyen",
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "I updated the code as you said. Please review."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "meson_options.txt",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                },
                {
                    "file": "src/msgbuf.h",
                    "type": "MODIFIED",
                    "insertions": 85,
                    "deletions": 0
                },
                {
                    "file": "tests/msgbuf.cpp",
                    "type": "MODIFIED",
                    "insertions": 126,
                    "deletions": 0
                },
                {
                    "file": "tests/msgbuf_generic.c",
                    "type": "MODIFIED",
                    "insertions": 66,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 293,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "8528faf6a75cd1f13bf278dacf289d4dd1581e0d",
            "parents": [
                "9667f58239302e6053da27876981cdd0bf9c5de2"
            ],
            "ref": "refs/changes/73/62773/3",
            "uploader": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "createdOn": 1682438891,
            "author": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Given we've renamed the APIs this should instead say:\n\n> msgbuf: Add pldm_msgbuf_insert APIs"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Thu Nguyen",
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Updated."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Done"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Rework this also as it should reflect that we're expanding the msgbuf API."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "Thu Nguyen",
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Updated."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Done"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Hi Thu, this is starting to look good. I have a few minor comments"
                },
                {
                    "file": "src/msgbuf.h",
                    "line": 491,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "For consistency with `pldm_msgbuf_extract()` can we drop `_data` here so it's just called `pldm_msgbuf_insert()`?"
                },
                {
                    "file": "src/msgbuf.h",
                    "line": 491,
                    "reviewer": {
                        "name": "Thu Nguyen",
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Updated."
                },
                {
                    "file": "src/msgbuf.h",
                    "line": 530,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Nit: Maybe make this `count` for consistency with the definition of `pldm_msgbuf_extract_array()`?"
                },
                {
                    "file": "src/msgbuf.h",
                    "line": 530,
                    "reviewer": {
                        "name": "Thu Nguyen",
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Updated."
                },
                {
                    "file": "tests/msgbuf.cpp",
                    "line": 397,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Given we're testing signed integer insertion it would be nice to test a negative value.\n\nThis applies to all the signed integer tests."
                },
                {
                    "file": "tests/msgbuf.cpp",
                    "line": 397,
                    "reviewer": {
                        "name": "Thu Nguyen",
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Updated to int32_t src = 0xf1223344;"
                },
                {
                    "file": "tests/msgbuf.cpp",
                    "line": 403,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "I think it's less noise just to combine these two lines?\n\n```\nEXPECT_EQ(pldm_msgbuf_insert_int32(ctx, src), PLDM_SUCCESS);\n```"
                },
                {
                    "file": "tests/msgbuf.cpp",
                    "line": 403,
                    "reviewer": {
                        "name": "Thu Nguyen",
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Updated."
                },
                {
                    "file": "tests/msgbuf.cpp",
                    "line": 406,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "I'd much prefer we create a new context rather than fiddle with the internals of the existing context.\n\nAny similar cases below also should be fixed."
                },
                {
                    "file": "tests/msgbuf.cpp",
                    "line": 406,
                    "reviewer": {
                        "name": "Thu Nguyen",
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Updated."
                },
                {
                    "file": "tests/msgbuf.cpp",
                    "line": 409,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Again, I think it's less noise to combine them.\n\nDo the same for any similar cases below."
                },
                {
                    "file": "tests/msgbuf.cpp",
                    "line": 409,
                    "reviewer": {
                        "name": "Thu Nguyen",
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Updated."
                },
                {
                    "file": "tests/msgbuf_generic.c",
                    "line": 155,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "This should be calling the generic macro, otherwise the test is no different to what's in `tests/msgbuf.cpp`:\n\n```\nint rc = pldm_msgbuf_insert(ctx, src);\n```\n\nAgain though, I think it's an improvement to readability if we combine it with the line below, so:\n\n```\nexpect(pldm_msgbuf_insert(ctx, src) == PLDM_SUCCESS);\n```"
                },
                {
                    "file": "tests/msgbuf_generic.c",
                    "line": 155,
                    "reviewer": {
                        "name": "Thu Nguyen",
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Updated."
                },
                {
                    "file": "tests/msgbuf_generic.c",
                    "line": 159,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "As mentioned on the other tests, please just use a separate, second context rather than fiddle with the internals of the one context."
                },
                {
                    "file": "tests/msgbuf_generic.c",
                    "line": 159,
                    "reviewer": {
                        "name": "Thu Nguyen",
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Updated."
                },
                {
                    "file": "tests/msgbuf_generic.c",
                    "line": 287,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "The test functions should all use the prefix `pldm_msgbuf_insert_generic_`, e.g. `pldm_msgbuf_insert_generic_uint32`.\n\nWe also need a test for `pldm_msgbuf_insert_array_generic_uint8()`"
                },
                {
                    "file": "tests/msgbuf_generic.c",
                    "line": 287,
                    "reviewer": {
                        "name": "Thu Nguyen",
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Updated."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "src/msgbuf.h",
                    "type": "MODIFIED",
                    "insertions": 166,
                    "deletions": -1
                },
                {
                    "file": "tests/msgbuf.cpp",
                    "type": "MODIFIED",
                    "insertions": 218,
                    "deletions": 0
                },
                {
                    "file": "tests/msgbuf_generic.c",
                    "type": "MODIFIED",
                    "insertions": 132,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 530,
            "sizeDeletions": 1
        },
        {
            "number": 4,
            "revision": "792b4612f358fba5062ef8de371b35dcadfbe178",
            "parents": [
                "9667f58239302e6053da27876981cdd0bf9c5de2"
            ],
            "ref": "refs/changes/73/62773/4",
            "uploader": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "createdOn": 1682495231,
            "author": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Okay, it's mostly looking good. One further class of issues and then this should be good to go."
                },
                {
                    "file": "tests/msgbuf.cpp",
                    "line": 397,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "This yields implementation-defined behaviour - see 6.2.6.2 Integer Types, paragraph 2 of N2176 (C17 draft standard). The representation of signed values is not constrained to twos-complement by the C standard: sign-magnitude and ones-complement are also valid representations.\n\nNow, is twos-complement pretty much the universal signed-value representation? Sure. But why not avoid all the language legalese and use a regular signed source representation for a negative value?\n\n```\nint32_t src = -12345;\n```\n\nPlease fix all the further test cases where this applies."
                },
                {
                    "file": "tests/msgbuf.cpp",
                    "line": 397,
                    "reviewer": {
                        "name": "Thu Nguyen",
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Updated."
                },
                {
                    "file": "tests/msgbuf_generic.c",
                    "line": 150,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Again, please don't invoke implementation-defined behaviour to assign a negative value. `int32_t src = -12345;` is good enough and doesn't get us into a fight with the compiler and the language definition.\n\nPlease fix all the cases below as well."
                },
                {
                    "file": "tests/msgbuf_generic.c",
                    "line": 150,
                    "reviewer": {
                        "name": "Thu Nguyen",
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Updated."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "src/msgbuf.h",
                    "type": "MODIFIED",
                    "insertions": 166,
                    "deletions": -1
                },
                {
                    "file": "tests/msgbuf.cpp",
                    "type": "MODIFIED",
                    "insertions": 226,
                    "deletions": 0
                },
                {
                    "file": "tests/msgbuf_generic.c",
                    "type": "MODIFIED",
                    "insertions": 162,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 568,
            "sizeDeletions": 1
        },
        {
            "number": 5,
            "revision": "7c6f5bb8d9062457824174e2a81c6b9070e502b7",
            "parents": [
                "9667f58239302e6053da27876981cdd0bf9c5de2"
            ],
            "ref": "refs/changes/73/62773/5",
            "uploader": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "createdOn": 1682563852,
            "author": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "tests/msgbuf_generic.c",
                    "line": 150,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "The signed tests in this file don't seem to have been addressed"
                },
                {
                    "file": "tests/msgbuf_generic.c",
                    "line": 150,
                    "reviewer": {
                        "name": "Thu Nguyen",
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "I updated the code in latest patch set."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "src/msgbuf.h",
                    "type": "MODIFIED",
                    "insertions": 166,
                    "deletions": -1
                },
                {
                    "file": "tests/msgbuf.cpp",
                    "type": "MODIFIED",
                    "insertions": 226,
                    "deletions": 0
                },
                {
                    "file": "tests/msgbuf_generic.c",
                    "type": "MODIFIED",
                    "insertions": 162,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 568,
            "sizeDeletions": 1
        },
        {
            "number": 6,
            "revision": "c3c305e9717983a49f827c881e7803309169b810",
            "parents": [
                "9667f58239302e6053da27876981cdd0bf9c5de2"
            ],
            "ref": "refs/changes/73/62773/6",
            "uploader": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "createdOn": 1682568107,
            "author": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "src/msgbuf.h",
                    "type": "MODIFIED",
                    "insertions": 166,
                    "deletions": -1
                },
                {
                    "file": "tests/msgbuf.cpp",
                    "type": "MODIFIED",
                    "insertions": 226,
                    "deletions": 0
                },
                {
                    "file": "tests/msgbuf_generic.c",
                    "type": "MODIFIED",
                    "insertions": 162,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 568,
            "sizeDeletions": 1
        },
        {
            "number": 7,
            "revision": "f310c2ce2aac84f41f2f771730a1c1d12d3666ec",
            "parents": [
                "9667f58239302e6053da27876981cdd0bf9c5de2"
            ],
            "ref": "refs/changes/73/62773/7",
            "uploader": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "createdOn": 1682690204,
            "author": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "We're also adding the span APIs now. How about:\n\n> msgbuf: Add insert and span APIs"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Thu Nguyen",
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Updated."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Also expand a bit on why the span APIs are useful here."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "Thu Nguyen",
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Updated."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Thu Nguyen",
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Add pldm_msgbuf_span_required and pldm_msgbuf_span_remaining."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Hi Thu, a couple more minor comments mainly as a result of adding the span APIs. Once they're addressed this should be good to go"
                },
                {
                    "file": "src/msgbuf.h",
                    "line": 384,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Something I just noticed here is you're providing `val` as the source pointer but defining its size in terms of the `src` variable (`sizeof(src)`). This isn't wrong as it stands, but it is surprising. Surprising is generally not something we want in buffer handling code. If we're taking a pointer to `val` then the `sizeof()` expression should be in terms of `val`. So:\n\n```\nmemcpy(ctx->cursor, &val, sizeof(val));\n```\n\nPlease also address this for all the calls to `memcpy()` added below."
                },
                {
                    "file": "src/msgbuf.h",
                    "line": 384,
                    "reviewer": {
                        "name": "Thu Nguyen",
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Updated."
                },
                {
                    "file": "tests/msgbuf_generic.c",
                    "line": 301,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "we can remove this as this should be equivalent to the C++ tests right? there's no `_Generic()` macro for this function"
                },
                {
                    "file": "tests/msgbuf_generic.c",
                    "line": 301,
                    "reviewer": {
                        "name": "Thu Nguyen",
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "I agree with that."
                },
                {
                    "file": "tests/msgbuf_generic.c",
                    "line": 328,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "we can remove this as this should be equivalent to the C++ tests right? there's no `_Generic()` macro for this function"
                },
                {
                    "file": "tests/msgbuf_generic.c",
                    "line": 328,
                    "reviewer": {
                        "name": "Thu Nguyen",
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "I agree with that."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "src/msgbuf.h",
                    "type": "MODIFIED",
                    "insertions": 208,
                    "deletions": -1
                },
                {
                    "file": "tests/msgbuf.cpp",
                    "type": "MODIFIED",
                    "insertions": 342,
                    "deletions": 0
                },
                {
                    "file": "tests/msgbuf_generic.c",
                    "type": "MODIFIED",
                    "insertions": 218,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 782,
            "sizeDeletions": 1
        },
        {
            "number": 8,
            "revision": "a63c4d41b4ff93d15fdab11598525665ca5d882e",
            "parents": [
                "9667f58239302e6053da27876981cdd0bf9c5de2"
            ],
            "ref": "refs/changes/73/62773/8",
            "uploader": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "createdOn": 1682736491,
            "author": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "src/msgbuf.h",
                    "type": "MODIFIED",
                    "insertions": 218,
                    "deletions": -1
                },
                {
                    "file": "tests/msgbuf.cpp",
                    "type": "MODIFIED",
                    "insertions": 342,
                    "deletions": -10
                },
                {
                    "file": "tests/msgbuf_generic.c",
                    "type": "MODIFIED",
                    "insertions": 162,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 740,
            "sizeDeletions": 11
        },
        {
            "number": 9,
            "revision": "062c8762c7ebf112a4a5c7b6c0424341ac38ea33",
            "parents": [
                "3a6a001b6c1d755df762868a686adf57daefb8e1"
            ],
            "ref": "refs/changes/73/62773/9",
            "uploader": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "createdOn": 1682738776,
            "author": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "src/msgbuf.h",
                    "type": "MODIFIED",
                    "insertions": 218,
                    "deletions": -1
                },
                {
                    "file": "tests/msgbuf.cpp",
                    "type": "MODIFIED",
                    "insertions": 342,
                    "deletions": -10
                },
                {
                    "file": "tests/msgbuf_generic.c",
                    "type": "MODIFIED",
                    "insertions": 162,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 740,
            "sizeDeletions": 11
        }
    ]
}