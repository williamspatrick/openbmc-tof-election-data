{
    "project": "openbmc/phosphor-pid-control",
    "branch": "master",
    "id": "I6bea34c91c423e50101e397efb63c436c66e0587",
    "number": 62738,
    "subject": "fix shellcheck failure detected by  CI",
    "owner": {
        "name": "Jinliang Wang",
        "email": "jinliangw@google.com",
        "username": "jinliangw"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-pid-control/+/62738",
    "hashtags": [],
    "createdOn": 1682031503,
    "lastUpdated": 1682044175,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1682031503,
            "reviewer": {
                "name": "Jinliang Wang",
                "email": "jinliangw@google.com",
                "username": "jinliangw"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1682031547,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1682031548,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1682031568,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/64633/ : FAILURE"
        },
        {
            "timestamp": 1682031897,
            "reviewer": {
                "name": "Jinliang Wang",
                "email": "jinliangw@google.com",
                "username": "jinliangw"
            },
            "message": "Uploaded patch set 2.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1682031937,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1682031937,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1682032114,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "message": "Patch Set 2: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1682032291,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/64634/ : SUCCESS"
        },
        {
            "timestamp": 1682032777,
            "reviewer": {
                "name": "Jinliang Wang",
                "email": "jinliangw@google.com",
                "username": "jinliangw"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1682033264,
            "reviewer": {
                "name": "Patrick Venture",
                "email": "venture@google.com",
                "username": "pstrinkle"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1682033591,
            "reviewer": {
                "name": "Jinliang Wang",
                "email": "jinliangw@google.com",
                "username": "jinliangw"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1682033636,
            "reviewer": {
                "name": "Patrick Venture",
                "email": "venture@google.com",
                "username": "pstrinkle"
            },
            "message": "Patch Set 2: Code-Review+2"
        },
        {
            "timestamp": 1682039875,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "message": "Patch Set 2: Code-Review+2"
        },
        {
            "timestamp": 1682044175,
            "reviewer": {
                "name": "Jinliang Wang",
                "email": "jinliangw@google.com",
                "username": "jinliangw"
            },
            "message": "Change has been successfully merged"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "11b2acdff144acca0b776c1cc08068a14ed549a4",
            "parents": [
                "5293ec2e5750456f705b6c06dcb7a4a106e4b296"
            ],
            "ref": "refs/changes/38/62738/1",
            "uploader": {
                "name": "Jinliang Wang",
                "email": "jinliangw@google.com",
                "username": "jinliangw"
            },
            "createdOn": 1682031503,
            "author": {
                "name": "Jinliang Wang",
                "email": "jinliangw@google.com",
                "username": "jinliangw"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 29,
                    "deletions": 0
                },
                {
                    "file": "tools/fan_rpm_loop_unittest.sh",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -2
                },
                {
                    "file": "tools/fan_rpm_loop_test.sh",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 37,
            "sizeDeletions": 4
        },
        {
            "number": 2,
            "revision": "687d8413a457781599298b8c1f7724e07be62d47",
            "parents": [
                "5293ec2e5750456f705b6c06dcb7a4a106e4b296"
            ],
            "ref": "refs/changes/38/62738/2",
            "uploader": {
                "name": "Jinliang Wang",
                "email": "jinliangw@google.com",
                "username": "jinliangw"
            },
            "createdOn": 1682031897,
            "author": {
                "name": "Jinliang Wang",
                "email": "jinliangw@google.com",
                "username": "jinliangw"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "Nice, good find, let's see if Jenkins passes now"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Jinliang Wang",
                        "email": "jinliangw@google.com",
                        "username": "jinliangw"
                    },
                    "message": "Hi Patrick, please help to review whether the fix will work for all cases when it get sourced."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Patrick Venture",
                        "email": "venture@google.com",
                        "username": "pstrinkle"
                    },
                    "message": "I dont' know what you're asking me to review about this."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Jinliang Wang",
                        "email": "jinliangw@google.com",
                        "username": "jinliangw"
                    },
                    "message": "Hi Patrick, I saw you checked in the these two scripts in https://gerrit.openbmc.org/plugins/gitiles/openbmc/phosphor-pid-control/+/ca97c83d151ba5d5cca0518420662abc298cce50.  The last two lines will cause shellcheck CI failure. I'm trying to fix it. The fix works as it will execute main when got executed, and won't execute main when sourced. Just need to make sure if there any other concerns if you have with the fix."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 29,
                    "deletions": 0
                },
                {
                    "file": "tools/fan_rpm_loop_unittest.sh",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -2
                },
                {
                    "file": "tools/fan_rpm_loop_test.sh",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 37,
            "sizeDeletions": 4
        }
    ]
}