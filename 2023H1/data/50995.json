{
    "project": "openbmc/bmcweb",
    "branch": "master",
    "id": "I086bf437adab75eecc4cb54774ef17998c0f6465",
    "number": 50995,
    "subject": "EventService: Abstract EventService data storage",
    "owner": {
        "name": "Shichen Lin",
        "email": "shichenl@nvidia.com",
        "username": "ShichenLin"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/bmcweb/+/50995",
    "hashtags": [],
    "createdOn": 1644284762,
    "lastUpdated": 1677527071,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1644284762,
            "reviewer": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1644284779,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1644284779,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1644284808,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/36779/ : FAILURE"
        },
        {
            "timestamp": 1644378144,
            "reviewer": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1644378166,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1644378166,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1644378741,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/36926/ : SUCCESS"
        },
        {
            "timestamp": 1644387864,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1644432738,
            "reviewer": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1644432754,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1644432754,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1644433483,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/36985/ : SUCCESS"
        },
        {
            "timestamp": 1644434137,
            "reviewer": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1644434155,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1644434155,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1644434891,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/36991/ : SUCCESS"
        },
        {
            "timestamp": 1644436445,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1644436501,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1644463903,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1645000644,
            "reviewer": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1647654839,
            "reviewer": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1647654871,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1647654871,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1647655400,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/39288/ : SUCCESS"
        },
        {
            "timestamp": 1658495149,
            "reviewer": {
                "name": "Krzysztof Grobelny",
                "email": "krzysztof.grobelny@intel.com",
                "username": "krzysztof-i"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1658590159,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 5:\n\n(2 comments)"
        },
        {
            "timestamp": 1658732136,
            "reviewer": {
                "name": "Krzysztof Grobelny",
                "email": "krzysztof.grobelny@intel.com",
                "username": "krzysztof-i"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1658766315,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1658824288,
            "reviewer": {
                "name": "Krzysztof Grobelny",
                "email": "krzysztof.grobelny@intel.com",
                "username": "krzysztof-i"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1677527071,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Abandoned\n\nNo Response from submitter."
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "d94a507b7b585dea9c98b473740e4275f6117f0c",
            "parents": [
                "4db417e63ac00549c54b4e8bdfbe78524680995d"
            ],
            "ref": "refs/changes/95/50995/1",
            "uploader": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "createdOn": 1644284762,
            "author": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "include/persistent_data.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -25
                },
                {
                    "file": "include/event_service_store.hpp",
                    "type": "MODIFIED",
                    "insertions": 67,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 87,
            "sizeDeletions": 25
        },
        {
            "number": 2,
            "revision": "628a2dbfff466c693a8cd99af7cfdec13d1882d7",
            "parents": [
                "4135d3dc6e9786218bd91db53b77c5fe5a100014"
            ],
            "ref": "refs/changes/95/50995/2",
            "uploader": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "createdOn": 1644378144,
            "author": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "We actually already moved this code from EventService to where it is now, to centralize the serialization/deserialization in bmcweb in one place, so we know what things are being persisted.  I don't see a strong reason to move it back."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "Shichen Lin",
                        "email": "shichenl@nvidia.com",
                        "username": "ShichenLin"
                    },
                    "message": "To centralize the serialization, why do we move it to where it is now? From my perspective, it's actually a decentralization since what this part of codes does can be centralized to UserSubscription structure. It will also involve fewer file changes when we want to change the properties in UserSubscription."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> To centralize the serialization, why do we move it to where it is now?\n\nBecause having all the serialization code in one place lets us make sure that it's backward compatible and following the requirements for the persistent data file.\n\n> From my perspective, it's actually a decentralization since what this part of codes does can be centralized to UserSubscription structure. It will also involve fewer file changes when we want to change the properties in UserSubscription.\n\nI can't say I agree with you there.  On the project we optimize for \"most likely to result in a correct behavior\" and \"Readable by the developer\" not \"fewer files changed for a patchset\"."
                },
                {
                    "file": "include/event_service_store.hpp",
                    "line": 209,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "New fields should be added in the commits that use them."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "include/persistent_data.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -25
                },
                {
                    "file": "include/event_service_store.hpp",
                    "type": "MODIFIED",
                    "insertions": 63,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 83,
            "sizeDeletions": 25
        },
        {
            "number": 3,
            "revision": "e89f4ec6b9bc859880dd9460abe522cd149d0811",
            "parents": [
                "4135d3dc6e9786218bd91db53b77c5fe5a100014"
            ],
            "ref": "refs/changes/95/50995/3",
            "uploader": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "createdOn": 1644432738,
            "author": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "include/persistent_data.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -25
                },
                {
                    "file": "include/event_service_store.hpp",
                    "type": "MODIFIED",
                    "insertions": 31,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 25
        },
        {
            "number": 4,
            "revision": "eec8bd27757708dfb507c5548ac4a3de5e303fa8",
            "parents": [
                "4135d3dc6e9786218bd91db53b77c5fe5a100014"
            ],
            "ref": "refs/changes/95/50995/4",
            "uploader": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "createdOn": 1644434137,
            "author": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "This isn't needed, since this information is already in the repo field, but if you have it, please fix the typo. :)"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "\"EventService: \" like you have in other patchsets is way better"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "+1"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "include/persistent_data.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -25
                },
                {
                    "file": "include/event_service_store.hpp",
                    "type": "MODIFIED",
                    "insertions": 28,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 48,
            "sizeDeletions": 25
        },
        {
            "number": 5,
            "revision": "b15d6f4d2a6854a1ab7f78b5102f7a6bef65009f",
            "parents": [
                "0584b75ad760dda45a2e57660a885b9444a6b206"
            ],
            "ref": "refs/changes/95/50995/5",
            "uploader": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "createdOn": 1647654839,
            "author": {
                "name": "Shichen Lin",
                "email": "shichenl@nvidia.com",
                "username": "ShichenLin"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Krzysztof Grobelny",
                        "email": "krzysztof.grobelny@intel.com",
                        "username": "krzysztof-i"
                    },
                    "message": "Resolve Merge Conflicts, Mark resolved comments as resolved then it should be good to go"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I'm pretty sure there's still several outstanding design issues that need resolved."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Krzysztof Grobelny",
                        "email": "krzysztof.grobelny@intel.com",
                        "username": "krzysztof-i"
                    },
                    "message": "Maybe I missing something. Currently this commit only extracts some code to class method where it belongs. I looked at other comments and they seem to be addressed, but were not marked as resolved.\n\nWhat design issues do you mean?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> Maybe I missing something. Currently this commit only extracts some code to class method where it belongs.\n> I looked at other comments and they seem to be addressed, but were not marked as resolved.\n> \n> What design issues do you mean?\n\n\nDisagree about that being \"where it belongs\".  Serialization/deserialization code should be separate from user code, with some shared types.\n\nWe do this to make sure that we can reasonably enforce the backward compatibility rules (no renaming parameters, backward compatible schema changes, etc) in one place."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Krzysztof Grobelny",
                        "email": "krzysztof.grobelny@intel.com",
                        "username": "krzysztof-i"
                    },
                    "message": "I am not sure if I understand you correctly.\n\nDoes that mean we should keep the code as is or instead of extracting this to class method it should be extracted to free function instead?"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "include/persistent_data.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -25
                },
                {
                    "file": "include/event_service_store.hpp",
                    "type": "MODIFIED",
                    "insertions": 28,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 48,
            "sizeDeletions": 25
        }
    ]
}