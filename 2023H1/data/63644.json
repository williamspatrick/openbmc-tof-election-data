{
    "project": "openbmc/bmcweb",
    "branch": "master",
    "id": "I9a6538bc2af1d89df3258d4f29b5113b228eee21",
    "number": 63644,
    "subject": "chassis: Efficient expand on Chassis Collection",
    "owner": {
        "name": "Willy Tu",
        "email": "wltu@google.com",
        "username": "wltu"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/bmcweb/+/63644",
    "hashtags": [],
    "createdOn": 1684714021,
    "lastUpdated": 1685032380,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1684714021,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1684714052,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 2: Commit message was updated."
        },
        {
            "timestamp": 1684714097,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1684714097,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1684714278,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1684714326,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1684714326,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1684714327,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/66898/ : ABORTED"
        },
        {
            "timestamp": 1684714823,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/66899/ : FAILURE"
        },
        {
            "timestamp": 1684715360,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Uploaded patch set 4.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1684715384,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1684715384,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1684715820,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1684716928,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/66900/ : SUCCESS"
        },
        {
            "timestamp": 1684773007,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1684773698,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 5: Commit message was updated.\n\nCopied Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1684773757,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1684773757,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1684773979,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1684774010,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1684774276,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1684774376,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1684774984,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5:\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/67037/ : SUCCESS"
        },
        {
            "timestamp": 1684789775,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 6: Published edit on patch set 5.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1684789810,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1684789810,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: -Ok-To-Test"
        },
        {
            "timestamp": 1684789850,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 7: Published edit on patch set 6."
        },
        {
            "timestamp": 1684789884,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1684789893,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1684789893,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: -Ok-To-Test"
        },
        {
            "timestamp": 1684789894,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/67062/ : ABORTED"
        },
        {
            "timestamp": 1684791134,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/67063/ : SUCCESS"
        },
        {
            "timestamp": 1684821286,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 7:\n\n(2 comments)"
        },
        {
            "timestamp": 1684821417,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1684860539,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1684865456,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1684865913,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1684866645,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1684960035,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 8: Patch Set 7 was rebased\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1684960096,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1684960096,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: -Ok-To-Test"
        },
        {
            "timestamp": 1684960251,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1684961456,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/67354/ : SUCCESS"
        },
        {
            "timestamp": 1684961879,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1685032380,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Abandoned\n\nThis change is not really needed after https://gerrit.openbmc.org/c/openbmc/bmcweb/+/63730"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "cfccd16dd28834e9980a0abcde655c7c0a5d9a13",
            "parents": [
                "3e72c2027aa4e64b9892ab0d3970358ba446f1fa"
            ],
            "ref": "refs/changes/44/63644/1",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1684714021,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 122,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -1
                },
                {
                    "file": "redfish-core/lib/chassis.hpp",
                    "type": "MODIFIED",
                    "insertions": 201,
                    "deletions": -122
                },
                {
                    "file": "redfish-core/lib/led.hpp",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -13
                }
            ],
            "sizeInsertions": 347,
            "sizeDeletions": 136
        },
        {
            "number": 2,
            "revision": "ba956371ff71c569922665cfa656597db4883d38",
            "parents": [
                "3e72c2027aa4e64b9892ab0d3970358ba446f1fa"
            ],
            "ref": "refs/changes/44/63644/2",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1684714052,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 121,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -1
                },
                {
                    "file": "redfish-core/lib/chassis.hpp",
                    "type": "MODIFIED",
                    "insertions": 201,
                    "deletions": -122
                },
                {
                    "file": "redfish-core/lib/led.hpp",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -13
                }
            ],
            "sizeInsertions": 346,
            "sizeDeletions": 136
        },
        {
            "number": 3,
            "revision": "2759bffcff5fcc13686b95276a1676a14bab1b16",
            "parents": [
                "3e72c2027aa4e64b9892ab0d3970358ba446f1fa"
            ],
            "ref": "refs/changes/44/63644/3",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1684714278,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 121,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -1
                },
                {
                    "file": "redfish-core/lib/chassis.hpp",
                    "type": "MODIFIED",
                    "insertions": 203,
                    "deletions": -124
                },
                {
                    "file": "redfish-core/lib/led.hpp",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -13
                }
            ],
            "sizeInsertions": 348,
            "sizeDeletions": 138
        },
        {
            "number": 4,
            "revision": "945d683cb11752178122ece3fa15d7a4c8a8f8c5",
            "parents": [
                "3e72c2027aa4e64b9892ab0d3970358ba446f1fa"
            ],
            "ref": "refs/changes/44/63644/4",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1684715360,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "redfish-core/lib/chassis.hpp",
                    "line": 532,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "um... it seems like level >= 2 will just not expand now. \ud83d\ude1e\n\nI thought it will just use the default expand handler at that point. Will need to take a closer look."
                },
                {
                    "file": "redfish-core/lib/chassis.hpp",
                    "line": 532,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "looked at the code and it should do that based on https://github.com/openbmc/bmcweb/blob/3e72c2027aa4e64b9892ab0d3970358ba446f1fa/redfish-core/include/query.hpp#L111-L119.\n\nI am looking at the example in existing usage like https://github.com/openbmc/bmcweb/blob/3e72c2027aa4e64b9892ab0d3970358ba446f1fa/redfish-core/lib/sensors.hpp#LL2809C5-L2809C30, and it also seems like level >= 2 doesn't expand further."
                },
                {
                    "file": "redfish-core/lib/chassis.hpp",
                    "line": 532,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Wait, what do you mean? I remember the behavior is it handles level 1 in efficient expand, and then expand the left levels in normal expand."
                },
                {
                    "file": "redfish-core/lib/chassis.hpp",
                    "line": 532,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "yeah, that's also my understanding. level 1 will use the efficient and level 2+ will be using the default expand.\n\nHere is an example,\n\n```\n wget -qO- 'http://localhost:80/redfish/v1/Chassis/BMC/Sensors?$expand=.($levels=1)'\n ...\n    {\n      \"@odata.id\": \"/redfish/v1/Chassis/BMC/Sensors/temperature_DIMMXX\",\n      \"@odata.type\": \"#Sensor.v1_2_0.Sensor\",\n      \"Id\": \"temperature_DIMMXX\",\n      \"Name\": \"DIMM16\",\n      \"Reading\": 30.0,\n      \"ReadingRangeMax\": 127.0,\n      \"ReadingRangeMin\": -128.0,\n      \"ReadingType\": \"Temperature\",\n      \"ReadingUnits\": \"Cel\",\n      \"RelatedItem\": [\n        {\n          \"@odata.id\": \"/redfish/v1/Systems/system/Memory/dimmXX\"\n        }\n      ],\n      \"Status\": {\n        \"Health\": \"OK\",\n        \"State\": \"Enabled\"\n      },\n      \"Thresholds\": {\n        \"LowerCaution\": {\n          \"Reading\": null\n        },\n        \"LowerCritical\": {\n          \"Reading\": null\n        },\n        \"UpperCaution\": {\n          \"Reading\": 93.0\n        },\n        \"UpperCritical\": {\n          \"Reading\": 95.0\n        }\n      }\n    }\n  ],\n  \"Members@odata.count\": 242,\n  \"Name\": \"Sensors\"\n}\n```\n\nAnd `level=2` gives out the same result. I thought it would also go into `/redfish/v1/Systems/system/Memory/dimmXX`?"
                },
                {
                    "file": "redfish-core/lib/chassis.hpp",
                    "line": 532,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "unrelated note. Is https://github.com/openbmc/bmcweb/blob/3e72c2027aa4e64b9892ab0d3970358ba446f1fa/redfish-core/lib/sensors.hpp#L2823 expected? level = 0 will still expand."
                },
                {
                    "file": "redfish-core/lib/chassis.hpp",
                    "line": 532,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "https://github.com/openbmc/bmcweb/blob/479e899d5f57a67647f83b7f615d2c8565290bcf/redfish-core/include/utils/query_param.hpp#L216\n\nHere the code should use the minimum level between (capacity, requested_level). The link looks like a bug, we should probably check if (delegated level == capacity)."
                },
                {
                    "file": "redfish-core/lib/chassis.hpp",
                    "line": 532,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "it seems like the fix is just https://gerrit.openbmc.org/c/openbmc/bmcweb/+/63695. \n\nWe shouldn't do\n```\nquery.expandLevel -= queryCapabilities.canDelegateExpandLevel;\n```"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 121,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -1
                },
                {
                    "file": "redfish-core/lib/chassis.hpp",
                    "type": "MODIFIED",
                    "insertions": 203,
                    "deletions": -124
                },
                {
                    "file": "redfish-core/lib/led.hpp",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -13
                }
            ],
            "sizeInsertions": 348,
            "sizeDeletions": 138
        },
        {
            "number": 5,
            "revision": "2dce33cf12354241ea0a9e5e41752fa07dec3174",
            "parents": [
                "3e72c2027aa4e64b9892ab0d3970358ba446f1fa"
            ],
            "ref": "refs/changes/44/63644/5",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1684773698,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "redfish-core/lib/health.hpp",
                    "line": 258,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Give it a more meaningful name?"
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "line": 258,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 121,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -1
                },
                {
                    "file": "redfish-core/lib/chassis.hpp",
                    "type": "MODIFIED",
                    "insertions": 203,
                    "deletions": -124
                },
                {
                    "file": "redfish-core/lib/led.hpp",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -13
                }
            ],
            "sizeInsertions": 348,
            "sizeDeletions": 138
        },
        {
            "number": 6,
            "revision": "a0c3dd053de002c0ad2d5b29f7fe4e66b6f24dd0",
            "parents": [
                "3e72c2027aa4e64b9892ab0d3970358ba446f1fa"
            ],
            "ref": "refs/changes/44/63644/6",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1684789775,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 121,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -1
                },
                {
                    "file": "redfish-core/lib/chassis.hpp",
                    "type": "MODIFIED",
                    "insertions": 203,
                    "deletions": -124
                },
                {
                    "file": "redfish-core/lib/led.hpp",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -13
                }
            ],
            "sizeInsertions": 348,
            "sizeDeletions": 138
        },
        {
            "number": 7,
            "revision": "b4e602432f8b7c21ebed60560408f68e3f8a3041",
            "parents": [
                "3e72c2027aa4e64b9892ab0d3970358ba446f1fa"
            ],
            "ref": "refs/changes/44/63644/7",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1684789850,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Overall, my worry on patches like this is that there are cases where they make things slower:\n\nhttps://lists.ozlabs.org/pipermail/openbmc/2023-April/033331.html\n\nIt seems to be highly related to how many elements exist on the service for which you're calling GetManagedObjects.  As systems are getting bigger, we're having the same problem on EM as well.  I'm a little bit worried about universally enabling this everywhere.\n\nHas the above problem in the ML been considered?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "not sure what is `ML` referring to in this case?\n\nIn the case of Chassis, it is not calling `GetManagedObjects` to get the Chassis, so maybe it is not an issue here? It is only called in `health->populate()` which I have tried to address along with this change. So in this case, that delay will not be portional to the number of Chassis / size of the system."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "The issue you linked is about \"querying sensors on chassis without sensors is as expensive as querying sensors on chassis with a lot of sensors\".\n\nThat's a known issue of the sensor handler code. This efficient expand in chassis won't make the situation worse at all."
                },
                {
                    "file": "redfish-core/lib/chassis.hpp",
                    "line": 197,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "from downstream discussion.\n\n+rahulkpr@google.com:\n\n>There are around 8 locations where we are checking for maybeChassisId to decide if it's directed query or collection. This number would grow as more attributes get added to chassis. I would recommend refactoring to separate the code for handling a chassis instance vs a collection.\n\n\nwltu@google.com:\n\n> I would prefer to keep the two common to prevent them from diverging. I don't believe more checks to maybeChassisId will be done. In most cases, they just need to pass chassisPtr to support direct query vs. collection."
                },
                {
                    "file": "redfish-core/lib/chassis.hpp",
                    "line": 384,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "From downstream discussion:\n\nrahulkpr@google.com\n> Was there an analysis done to understand if we do a single GetManagedObjects to the connectionName (and reuse the result for all functions) vs multiple getProperty + getAllProperties, which approach seems to be optimum? I see quite a lot of GetProperty in this file so was wondering."
                },
                {
                    "file": "redfish-core/lib/chassis.hpp",
                    "line": 384,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "I didn't do an analysis on using GetManagedObjects to get a single object. It would most likely be a bit faster than multipl dbus calls. The main issue here is that we don't know which path is the managed object path to make the GetManagedObjects call on. Each service could be different unless we enforce that it has to be a certain path.\n\nDon't believe we can do that at the moment."
                },
                {
                    "file": "redfish-core/lib/chassis.hpp",
                    "line": 384,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "Concern on using GetManagedObjects like in https://gerrit.openbmc.org/c/openbmc/bmcweb/+/63644/comments/6c7ccf62_0093fa4d as the system gets larger."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 121,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -1
                },
                {
                    "file": "redfish-core/lib/chassis.hpp",
                    "type": "MODIFIED",
                    "insertions": 203,
                    "deletions": -124
                },
                {
                    "file": "redfish-core/lib/led.hpp",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -13
                }
            ],
            "sizeInsertions": 348,
            "sizeDeletions": 138
        },
        {
            "number": 8,
            "revision": "a5c5ae88513eff5ebdd1da29d3c976d7dd5f0277",
            "parents": [
                "f19ab44ac9141e6aec10426914bd0075043ca173"
            ],
            "ref": "refs/changes/44/63644/8",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1684960035,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 121,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -1
                },
                {
                    "file": "redfish-core/lib/chassis.hpp",
                    "type": "MODIFIED",
                    "insertions": 203,
                    "deletions": -124
                },
                {
                    "file": "redfish-core/lib/led.hpp",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -13
                }
            ],
            "sizeInsertions": 348,
            "sizeDeletions": 138
        }
    ]
}