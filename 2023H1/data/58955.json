{
    "project": "openbmc/docs",
    "branch": "master",
    "id": "I9ac49cfd3669de1b7102d66143c3cfea2206f998",
    "number": 58955,
    "subject": "RedfishSensor: Configuration document",
    "owner": {
        "name": "Josh Lehan",
        "email": "krellan@google.com",
        "username": "Krellan"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/docs/+/58955",
    "hashtags": [],
    "createdOn": 1669412246,
    "lastUpdated": 1684775675,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1669412246,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1669412277,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1669412277,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1669412292,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/56100/ : SUCCESS"
        },
        {
            "timestamp": 1671484096,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "message": "Uploaded patch set 2: Patch Set 1 was rebased."
        },
        {
            "timestamp": 1671484132,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1671484132,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1671484152,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/58013/ : FAILURE"
        },
        {
            "timestamp": 1671486779,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1671486797,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1671486797,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1671486818,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/58016/ : SUCCESS"
        },
        {
            "timestamp": 1672441315,
            "reviewer": {
                "name": "Akshat Jain",
                "username": "AkshatZen"
            },
            "message": "Patch Set 3:\n\n(3 comments)"
        },
        {
            "timestamp": 1672446745,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "message": "Patch Set 3:\n\n(3 comments)"
        },
        {
            "timestamp": 1684775675,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "message": "Set Work In Progress"
        }
    ],
    "wip": true,
    "patchSets": [
        {
            "number": 1,
            "revision": "6785bb64a2c3c938dfe2c68057212c7d3f09a992",
            "parents": [
                "3f84e95386180033e6333e63dc165f121cd78a73"
            ],
            "ref": "refs/changes/55/58955/1",
            "uploader": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "createdOn": 1669412246,
            "author": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "designs/redfish-sensor-config.md",
                    "type": "ADDED",
                    "insertions": 337,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 350,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "9b73cac7c045f962d8abdb1bd4e27c01e8681ba0",
            "parents": [
                "f4febd002df578bad816239b70950f84ea4567e8"
            ],
            "ref": "refs/changes/55/58955/2",
            "uploader": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "createdOn": 1671484096,
            "author": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "designs/redfish-sensor-config.md",
                    "type": "ADDED",
                    "insertions": 337,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 350,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "3af6a6ea826c5e2a0eacffaac2cdb7ba93900901",
            "parents": [
                "f4febd002df578bad816239b70950f84ea4567e8"
            ],
            "ref": "refs/changes/55/58955/3",
            "uploader": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "createdOn": 1671486779,
            "author": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "designs/redfish-sensor-config.md",
                    "line": 17,
                    "reviewer": {
                        "name": "Akshat Jain",
                        "username": "AkshatZen"
                    },
                    "message": "Usual sensor URI is something like this:\n/redfish/v1/Chassis/<CHASSIS_ID>/Sensors/<SENSOR_NAME>\n\nIf we specify RedfishName for each Chassis and Sensor and build path using it, then isn't it essentially same thing.\n\nWould it be possible to probe Chassis based on BOM info like Product Name. Then find all resources it contains."
                },
                {
                    "file": "designs/redfish-sensor-config.md",
                    "line": 17,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "Yes, that's true for \"bmcweb\", but that URL layout can't be assumed. The server could put it anywhere. It's best to discover it by walking through the Redfish tree and following the appropriate links.\n\nThat's what the discovery phase of RedfishSensor does now. It walks through the tree and matches it up based on immutable string characteristics of the Chassis and Sensor objects that it finds, such as manufacturer, model number, product name, and so on."
                },
                {
                    "file": "designs/redfish-sensor-config.md",
                    "line": 232,
                    "reviewer": {
                        "name": "Akshat Jain",
                        "username": "AkshatZen"
                    },
                    "message": "Is this limitation because of limitation of http client library being used, which does not support timeout? If there is no HTTP response does the redfish sensor wait indefinitely?"
                },
                {
                    "file": "designs/redfish-sensor-config.md",
                    "line": 232,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "Yes. Boost Beast does not support asynchronous resolving of DNS names unless threads are enabled. Boost Beast also doesn't support built-in timeouts for many operations. The assumption is that you will add your own timers around them, and use the timers to enforce your own timeouts. I will add this feature in the future."
                },
                {
                    "file": "designs/redfish-sensor-config.md",
                    "line": 242,
                    "reviewer": {
                        "name": "Akshat Jain",
                        "username": "AkshatZen"
                    },
                    "message": "Multi-threaded should be possible and would be better performing when RedfishServer is slow to respond. If the sum of time taken to read all sensors is longer then the polling period then Readings will always be stale."
                },
                {
                    "file": "designs/redfish-sensor-config.md",
                    "line": 242,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "That's correct about it falling behind if it takes longer to read all sensors than there is time available during the sensor reading interval. Data is not considered stale, though, until more time has elapsed (currently I am using 4 seconds, to declare data stale if no update has been available for 4 seconds).\n\nI will look into multithreaded, once I get it up and running with single thread behavior."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "designs/redfish-sensor-config.md",
                    "type": "ADDED",
                    "insertions": 339,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 352,
            "sizeDeletions": 0
        }
    ]
}