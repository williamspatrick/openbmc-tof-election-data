{
    "project": "openbmc/phosphor-host-ipmid",
    "branch": "master",
    "id": "I0cd2ce3ab78c3e4d2f376a99ab1ebf33b0ea39d3",
    "number": 60537,
    "subject": "update return type of getDHCPEnabled function",
    "owner": {
        "name": "Thang Tran",
        "email": "thuutran@amperecomputing.com",
        "username": "thangtran-ampere"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-host-ipmid/+/60537",
    "hashtags": [],
    "createdOn": 1675151998,
    "lastUpdated": 1679023623,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1675151998,
            "reviewer": {
                "name": "Thang Tran",
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1675152017,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1675152017,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1675152264,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/59877/ : SUCCESS"
        },
        {
            "timestamp": 1675152341,
            "reviewer": {
                "name": "Thang Tran",
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1675235017,
            "reviewer": {
                "name": "Thang Tran",
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1675291130,
            "reviewer": {
                "name": "Johnathan Mantey",
                "email": "johnathanx.mantey@intel.com",
                "username": "Howitzer105mm"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1675303504,
            "reviewer": {
                "name": "Thang Tran",
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1675353676,
            "reviewer": {
                "name": "Johnathan Mantey",
                "email": "johnathanx.mantey@intel.com",
                "username": "Howitzer105mm"
            },
            "message": "Patch Set 1:\n\n(2 comments)"
        },
        {
            "timestamp": 1675654828,
            "reviewer": {
                "name": "Thang Tran",
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1675911027,
            "reviewer": {
                "name": "Thang Tran",
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1676043894,
            "reviewer": {
                "name": "Johnathan Mantey",
                "email": "johnathanx.mantey@intel.com",
                "username": "Howitzer105mm"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1676616468,
            "reviewer": {
                "name": "Thang Tran",
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1676616635,
            "reviewer": {
                "name": "Thang Q. Nguyen",
                "email": "thang@os.amperecomputing.com",
                "username": "thangqn-ampere"
            },
            "message": "Patch Set 1: Code-Review+1"
        },
        {
            "timestamp": 1676911216,
            "reviewer": {
                "name": "Johnathan Mantey",
                "email": "johnathanx.mantey@intel.com",
                "username": "Howitzer105mm"
            },
            "message": "Patch Set 1: Code-Review+1"
        },
        {
            "timestamp": 1676946099,
            "reviewer": {
                "name": "Thang Tran",
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1676972593,
            "reviewer": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "message": "Patch Set 1: Code-Review+1"
        },
        {
            "timestamp": 1678088474,
            "reviewer": {
                "name": "Thang Tran",
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1678847968,
            "reviewer": {
                "name": "Thang Tran",
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1679001718,
            "reviewer": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "message": "Patch Set 1: Code-Review+2"
        },
        {
            "timestamp": 1679023623,
            "reviewer": {
                "name": "Thang Tran",
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Change has been successfully rebased and submitted as 55cbf552439fc440ff12299e9cb1b8d485207b36"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "3d56aa5fdb6a43489dff3431aaa1f00dac1cdde2",
            "parents": [
                "ffa76e59f81feee67bdbf47f4df94baf72742c0d"
            ],
            "ref": "refs/changes/37/60537/1",
            "uploader": {
                "name": "Thang Tran",
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "createdOn": 1675151998,
            "author": {
                "name": "Thang Tran",
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Thang Tran",
                        "email": "thuutran@amperecomputing.com",
                        "username": "thangtran-ampere"
                    },
                    "message": "Hi @all,\n\nAfter the commit https://github.com/openbmc/phosphor-dbus-interfaces/commit/197705962bf99000168c993ab9ac4c69847b384d, the type of \"DHCPEnabled\" property has been changed from bool to DHCPConf type. Therefore, I updated the return type of getDHCPEnabled function.\n\nPlease help me review this patch."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Thang Tran",
                        "email": "thuutran@amperecomputing.com",
                        "username": "thangtran-ampere"
                    },
                    "message": "Hi @Johnathan,\n\nIt seems that the data type of DHCPEnabled property has been changed from boolean to enum DHCPConf by your commit (https://github.com/openbmc/phosphor-dbus-interfaces/commit/197705962bf99000168c993ab9ac4c69847b384d).\n\nCan you help me to review this patch?\n\nThanks."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Johnathan Mantey",
                        "email": "johnathanx.mantey@intel.com",
                        "username": "Howitzer105mm"
                    },
                    "message": "I do not believe the new enum style controls are actually being used.\nphosphor-network was modified to stop using those values.\nbmcweb has never enabled them.\nphoshpor-ipmi-host also never completed the transition.\nNothing is using the enumeration.\nphosphor-network relies on\nDHCP4\nDHCP6\nIPv6AcceptRA\n\nI don't agree with that decision as it creates odd side effects.\n\nYour change here will not do what you think due to the enumeration contract going unused."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Thang Tran",
                        "email": "thuutran@amperecomputing.com",
                        "username": "thangtran-ampere"
                    },
                    "message": "In the phosphor-host-ipmid, it did not change the value of DHCPEnabled property. It only checks DHCPEnabled property to ensure that DHCP feature has been enabled or not. It did not reset or enable DHCP.\n\nIn the old implementation, it checks that DHCPEnabled==true or not. But in my patch, I checked that DHCPEnabled!=None or not. Therefore, I think this change is necessary."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Johnathan Mantey",
                        "email": "johnathanx.mantey@intel.com",
                        "username": "Howitzer105mm"
                    },
                    "message": "It's been a long time since I made the DHCPConf code changes. I forgot some of that was accepted and merged. I have another commit that has additional functionality that has been rejected by one of the maintainers of phosphor-network. That was the basis of my prior comments.\n\nThat said I do have an enclosed comment concerning what is supposed to happen vis-a-vis IPv6 with regard to your change."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Thang Tran",
                        "email": "thuutran@amperecomputing.com",
                        "username": "thangtran-ampere"
                    },
                    "message": "DO you have any comment @Johnathan?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Johnathan Mantey",
                        "email": "johnathanx.mantey@intel.com",
                        "username": "Howitzer105mm"
                    },
                    "message": "I have no additional comments."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Thang Tran",
                        "email": "thuutran@amperecomputing.com",
                        "username": "thangtran-ampere"
                    },
                    "message": "Can you help me vote +1 for this commit @Johnathan?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Thang Tran",
                        "email": "thuutran@amperecomputing.com",
                        "username": "thangtran-ampere"
                    },
                    "message": "Hi @Tom and @Vernon,\nCan you help me to review this commit?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Thang Tran",
                        "email": "thuutran@amperecomputing.com",
                        "username": "thangtran-ampere"
                    },
                    "message": "Hi @Vernon, please help me to merge this commit"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Thang Tran",
                        "email": "thuutran@amperecomputing.com",
                        "username": "thangtran-ampere"
                    },
                    "message": "friendly ping"
                },
                {
                    "file": "dcmihandler.cpp",
                    "line": 1058,
                    "reviewer": {
                        "name": "Johnathan Mantey",
                        "email": "johnathanx.mantey@intel.com",
                        "username": "Howitzer105mm"
                    },
                    "message": "I expect this requires additional investigation. In the past getDHCPEnabled() was true only for IPv4. The previous code did not check DHCPv4 enabled vs DHCPv6 enabled.\nTo maintain the original code behavior this needs to be more selective:\nEthernetIntf::DHCPConf dhcpMode = getDHCPEnabled();\n\nif (( ....... &&\n    ((dhcpMode == both) || (dhcpMode == ipv4)))\n    \nI don't believe IPv6 is expected to be tested here.\n\nIt's really hard to know what the correct solution is supposed to be in IPMI land. What does it mean for \"DHCP enabled\" to encompass?\nTraditionally Get LAN Config IP Address Source was enough to know.\nNow with IPv6 more prominant we have to take into account Get LAN Config IPv6 Router Address Config too.\n\nI'm not sufficiently versed in the DCMI code to provide guidance."
                },
                {
                    "file": "dcmihandler.cpp",
                    "line": 1058,
                    "reviewer": {
                        "name": "Thang Tran",
                        "email": "thuutran@amperecomputing.com",
                        "username": "thangtran-ampere"
                    },
                    "message": "The \"ipmitool dcmi set_conf_param activate_dhcp\" command is used to reset/enable DHCP feature, it does not mention about DHCPv4 or DHCPv6. DHCP feature has been enabled when the \"DHCPEnabled \" property has been configured.\n\nI think that phosphor-host-ipmid shouldn't care about DHCPv4 or DHCPv6. It only cares whether this is DHCP or not. Therefore, ipmid only needs to check DHCP feature is enabled or not.\n\nIPv6 should be taken care of by another module (maybe is phosphor-network), not by ipmid."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "dcmihandler.cpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 26,
            "sizeDeletions": 3
        },
        {
            "number": 2,
            "revision": "55cbf552439fc440ff12299e9cb1b8d485207b36",
            "parents": [
                "5d2142028ae97e2c7c537cc979fd69ec966c8194"
            ],
            "ref": "refs/changes/37/60537/2",
            "uploader": {
                "name": "Thang Tran",
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "createdOn": 1679023623,
            "author": {
                "name": "Thang Tran",
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "dcmihandler.cpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 26,
            "sizeDeletions": 3
        }
    ]
}