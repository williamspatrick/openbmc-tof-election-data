{
    "project": "openbmc/openbmc",
    "branch": "master",
    "id": "Ia27955029f07980ffa5c49450804340c773b9169",
    "number": 61925,
    "subject": "meta-facebook: greatlakes: Enable pldm & mctp",
    "owner": {
        "name": "DelphineCCChiu",
        "email": "Delphine_CC_Chiu@wiwynn.com",
        "username": "DelphineCCChiu"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/openbmc/+/61925",
    "hashtags": [],
    "createdOn": 1679622188,
    "lastUpdated": 1682405065,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1679622188,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1679622282,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1679622282,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1679622291,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1:\n\nBuild Started https://jenkins.openbmc.org/job/ci-openbmc/16419/"
        },
        {
            "timestamp": 1679622379,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1679622471,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1679622471,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1679622509,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-openbmc/16419/ : ABORTED"
        },
        {
            "timestamp": 1679622509,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2:\n\nBuild Started https://jenkins.openbmc.org/job/ci-openbmc/16420/"
        },
        {
            "timestamp": 1679623058,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-openbmc/16420/ : SUCCESS"
        },
        {
            "timestamp": 1679623067,
            "reviewer": {
                "name": "Jenkins OpenBMC Google",
                "email": "haojenkinsg00gle@gmail.com",
                "username": "jenkins-openbmc-g00gle"
            },
            "message": "Patch Set 2:\n\nBuild Successful \n\nGoogle Internal CI : Google internal tests successfully started"
        },
        {
            "timestamp": 1679624273,
            "reviewer": {
                "name": "Jenkins OpenBMC IBM",
                "email": "geissonator+jenkinsibm@gmail.com",
                "username": "jenkins-openbmc-ibm"
            },
            "message": "Patch Set 2:\n\nBuild Successful \n\nIBM Hardware CI : witherspoon hardware tests passed"
        },
        {
            "timestamp": 1680205526,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2:\n\n(4 comments)"
        },
        {
            "timestamp": 1680837697,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Patch Set 2:\n\n(4 comments)"
        },
        {
            "timestamp": 1681378937,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1681388534,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1681388633,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1681452351,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1681473203,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1682400367,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Patch Set 3: Patch Set 2 was rebased\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1682404974,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1682405065,
            "reviewer": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "message": "Abandoned\n\nEncountered some unknown issues of Gerrit system, moved to new Gerrit id: 62827"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "2828d93116abbacd6b627b9a786753a86cc11a15",
            "parents": [
                "e6856152c8e40e916cac888805fa44e399e1a177"
            ],
            "ref": "refs/changes/25/61925/1",
            "uploader": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "createdOn": 1679622188,
            "author": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 31,
                    "deletions": 0
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-support/mctp/mctp_%.bbappend",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-support/mctp/mctp/mctp-setup-endpoints.service",
                    "type": "ADDED",
                    "insertions": 11,
                    "deletions": 0
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-support/mctp/mctp/setup-mctp-endpoints",
                    "type": "ADDED",
                    "insertions": 9,
                    "deletions": 0
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-kernel/linux/linux-aspeed/greatlakes.cfg",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-phosphor/images/fb-greatlakes-phosphor-image.inc",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -11
                }
            ],
            "sizeInsertions": 72,
            "sizeDeletions": 11
        },
        {
            "number": 2,
            "revision": "8c592a1fe74948dee9457754fcb4f4954e50aa3b",
            "parents": [
                "e6856152c8e40e916cac888805fa44e399e1a177"
            ],
            "ref": "refs/changes/25/61925/2",
            "uploader": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "createdOn": 1679622379,
            "author": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-kernel/linux/linux-aspeed/greatlakes.cfg",
                    "line": 94,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Please make a config snippet for this.\n\nSee meta-facebook/recipes-kernel/linux/linux-aspeed_%.bbappend\n\nAll of our MCTP-based BIC systems are going to need this so I'd like it to be a machine-flag instead of hard-coded in each kernel config."
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-kernel/linux/linux-aspeed/greatlakes.cfg",
                    "line": 94,
                    "reviewer": {
                        "name": "DelphineCCChiu",
                        "email": "Delphine_CC_Chiu@wiwynn.com",
                        "username": "DelphineCCChiu"
                    },
                    "message": "Sure, working on it."
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-phosphor/images/fb-greatlakes-phosphor-image.inc",
                    "line": 5,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "These should be utilizing the same machine flag."
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-phosphor/images/fb-greatlakes-phosphor-image.inc",
                    "line": 5,
                    "reviewer": {
                        "name": "DelphineCCChiu",
                        "email": "Delphine_CC_Chiu@wiwynn.com",
                        "username": "DelphineCCChiu"
                    },
                    "message": "Sure."
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-support/mctp/mctp/mctp-setup-endpoints.service",
                    "line": 8,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Can't we just add a PreExecStart to the mctpd.service as an extra config?"
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-support/mctp/mctp/mctp-setup-endpoints.service",
                    "line": 8,
                    "reviewer": {
                        "name": "DelphineCCChiu",
                        "email": "Delphine_CC_Chiu@wiwynn.com",
                        "username": "DelphineCCChiu"
                    },
                    "message": "Is it mean modifying the mctpd.service which located at meta-openembedded?"
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-support/mctp/mctp/mctp-setup-endpoints.service",
                    "line": 8,
                    "reviewer": {
                        "name": "DelphineCCChiu",
                        "email": "Delphine_CC_Chiu@wiwynn.com",
                        "username": "DelphineCCChiu"
                    },
                    "message": "The service \"mctp-setup-endpoints\" is for establishing MCTP endpoints, which is project-specific behavior, that is why I added the service at project layer and claimed that it is behind the mctpd.service. Surely it is also worth discussing to extract this kind of setup behavior to higher level."
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-support/mctp/mctp/mctp-setup-endpoints.service",
                    "line": 8,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "You can add a file in `mctpd.service.d` which extends the base mctpd.service file to add an ExecStartPre.\n\nSee meta-facebook/meta-bletchley/recipes-phosphor/state/phosphor-state-manager/bletchley-system-state-init.conf as an example file that ends up in a \"service.d\" directory."
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-support/mctp/mctp/mctp-setup-endpoints.service",
                    "line": 8,
                    "reviewer": {
                        "name": "DelphineCCChiu",
                        "email": "Delphine_CC_Chiu@wiwynn.com",
                        "username": "DelphineCCChiu"
                    },
                    "message": "Sure, thanks for the hint, I'm working on it."
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-support/mctp/mctp/setup-mctp-endpoints",
                    "line": 1,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Do we need `bash -e`?"
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-support/mctp/mctp/setup-mctp-endpoints",
                    "line": 1,
                    "reviewer": {
                        "name": "DelphineCCChiu",
                        "email": "Delphine_CC_Chiu@wiwynn.com",
                        "username": "DelphineCCChiu"
                    },
                    "message": "Do you means if any error encountered, just stop and exit the whole script? The script is like establish a relation chain, if one endpoint is failed to setup, the others might be still functional."
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-support/mctp/mctp/setup-mctp-endpoints",
                    "line": 1,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Isn't there only 1 in the file?\n\nCurrently the 3 commands that are here look pretty dependent on each other."
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-support/mctp/mctp/setup-mctp-endpoints",
                    "line": 1,
                    "reviewer": {
                        "name": "DelphineCCChiu",
                        "email": "Delphine_CC_Chiu@wiwynn.com",
                        "username": "DelphineCCChiu"
                    },
                    "message": "Yes, currently there is only 1 NIC card is routed, `bash -e` is indeed better in this scenario, but soon the BICs will be added into the MCTP network for updating its firmware, if one of the BIC fail to setup its endpoint, the rest of the setup commands would not be executed.\n\nHere is my thinking:\nI'll add `bash -e` in this commit, but when multiple endpoints are added, it should be  implemented the concept of `bash -e` at the granularity of endpoint, i.e., if any error is encountered during setting up endpoint A, then stop the rest of the commands related to endpoint A, but the rest of endpoints will not affected. \n\nIf there is any concern for my thought, please let me know, thanks."
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-support/mctp/mctp/setup-mctp-endpoints",
                    "line": 1,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "\ud83d\udc4d"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 31,
                    "deletions": 0
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-support/mctp/mctp_%.bbappend",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-support/mctp/mctp/mctp-setup-endpoints.service",
                    "type": "ADDED",
                    "insertions": 11,
                    "deletions": 0
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-support/mctp/mctp/setup-mctp-endpoints",
                    "type": "ADDED",
                    "insertions": 9,
                    "deletions": 0
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-kernel/linux/linux-aspeed/greatlakes.cfg",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-phosphor/images/fb-greatlakes-phosphor-image.inc",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 72,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "ca95a975865a5c6526790c20535a03421bfe109f",
            "parents": [
                "0ee1477590855a05ac2e7b1769a190e65aa5ebad"
            ],
            "ref": "refs/changes/25/61925/3",
            "uploader": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "createdOn": 1682400367,
            "author": {
                "name": "DelphineCCChiu",
                "email": "Delphine_CC_Chiu@wiwynn.com",
                "username": "DelphineCCChiu"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "DelphineCCChiu",
                        "email": "Delphine_CC_Chiu@wiwynn.com",
                        "username": "DelphineCCChiu"
                    },
                    "message": "Since some unknown issues, the Gerrit system generated multiple Gerrit id with the same commit and Change-id, which cause \"...has duplicates\" errors (Gerrit Error Messages).\n\nAccording to the suggestion from the doc, I've pushed my new patchset to another Gerrit id: 62827 and added you to the reviewers and CCs, please review the code of the new Gerrit id instead of this one, thanks."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 31,
                    "deletions": 0
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-support/mctp/mctp_%.bbappend",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-support/mctp/mctp/mctp-setup-endpoints.service",
                    "type": "ADDED",
                    "insertions": 11,
                    "deletions": 0
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-support/mctp/mctp/setup-mctp-endpoints",
                    "type": "ADDED",
                    "insertions": 9,
                    "deletions": 0
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-kernel/linux/linux-aspeed/greatlakes.cfg",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "meta-facebook/meta-greatlakes/recipes-phosphor/images/fb-greatlakes-phosphor-image.inc",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 72,
            "sizeDeletions": 0
        }
    ]
}