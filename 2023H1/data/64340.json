{
    "project": "openbmc/phosphor-debug-collector",
    "branch": "master",
    "id": "I186b123154098400245f24db438e2a79a8da8b10",
    "number": 64340,
    "subject": "Add linux trace events",
    "owner": {
        "name": "Edward A. James",
        "email": "eajames@us.ibm.com",
        "username": "eddiejames"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-debug-collector/+/64340",
    "hashtags": [],
    "createdOn": 1687374223,
    "lastUpdated": 1687791292,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1687374223,
            "reviewer": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1687374265,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1687374265,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1687374288,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/69299/ : FAILURE"
        },
        {
            "timestamp": 1687375082,
            "reviewer": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1687410824,
            "reviewer": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1687433621,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1687440193,
            "reviewer": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "message": "Patch Set 2: Patch Set 1 was rebased\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1687440229,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1687440229,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1687440295,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/69366/ : SUCCESS"
        },
        {
            "timestamp": 1687441236,
            "reviewer": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1687442846,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1687446740,
            "reviewer": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1687446789,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1687446789,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1687446795,
            "reviewer": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1687446814,
            "reviewer": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1687446852,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/69367/ : SUCCESS"
        },
        {
            "timestamp": 1687495380,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 3: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1687506222,
            "reviewer": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1687791276,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 3: Code-Review+2"
        },
        {
            "timestamp": 1687791292,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Change has been successfully rebased and submitted as c04e0e0a7022ac8cfdf3c820e59c71c71a5676d8"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "333c2071b3594f62715427e56534ff6ff05289ba",
            "parents": [
                "0b566d54978e4462e51e01414bcfc13918efcb45"
            ],
            "ref": "refs/changes/40/64340/1",
            "uploader": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "createdOn": 1687374223,
            "author": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Edward A. James",
                        "email": "eajames@us.ibm.com",
                        "username": "eddiejames"
                    },
                    "message": "CI failure appears unrelated?\n\nFAILED: phosphor-dump-manager.p/dump_manager_faultlog.cpp.o \nc++ -Iphosphor-dump-manager.p -I. -I.. -Ixyz/openbmc_project/Dump/Internal/Create -I/usr/local/include -fdiagnostics-color=never -D_FILE_OFFSET_BITS=64 -Wall -Winvalid-pch -Wextra -Wpedantic -Werror -std=c++20 -Og -g -DBOOST_ASIO_DISABLE_THREADS -DBOOST_ALL_NO_LIB -DBOOST_SYSTEM_NO_DEPRECATED -DBOOST_ERROR_CODE_HEADER_ONLY -DBOOST_COROUTINES_NO_DEPRECATION_WARNING -MD -MQ phosphor-dump-manager.p/dump_manager_faultlog.cpp.o -MF phosphor-dump-manager.p/dump_manager_faultlog.cpp.o.d -o phosphor-dump-manager.p/dump_manager_faultlog.cpp.o -c ../dump_manager_faultlog.cpp\nIn file included from /usr/include/c++/13/bits/shared_ptr_base.h:59,\n                 from /usr/include/c++/13/bits/shared_ptr.h:53,\n                 from /usr/include/c++/13/chrono:49,\n                 from /usr/local/include/sdbusplus/sdbus.hpp:5,\n                 from /usr/local/include/xyz/openbmc_project/Common/OriginatedBy/server.hpp:4,\n                 from ../dump_entry.hpp:3,\n                 from ../dump_manager.hpp:3,\n                 from ../dump_manager_faultlog.hpp:3,\n                 from ../dump_manager_faultlog.cpp:3:\n/usr/include/c++/13/bits/unique_ptr.h: In instantiation of \u2018std::__detail::__unique_ptr_t<_Tp> std::make_unique(_Args&& ...) [with _Tp = phosphor::dump::faultlog::Entry; _Args = {sdbusplus::bus::bus&, const char*, unsigned int&, long unsigned int&, long unsigned int, filesystem::__cxx11::path&, sdbusplus::common::xyz::openbmc_project::common::Progress::OperationStatus, __cxx11::basic_string<char, char_traits<char>, allocator<char> >&, sdbusplus::common::xyz::openbmc_project::common::OriginatedBy::OriginatorTypes&, phosphor::dump::faultlog::Manager&}; __detail::__unique_ptr_t<_Tp> = __detail::__unique_ptr_t<phosphor::dump::faultlog::Entry>]\u2019:\n../dump_manager_faultlog.cpp:99:65:   required from here\n/usr/include/c++/13/bits/unique_ptr.h:1070:30: error: invalid new-expression of abstract class type \u2018phosphor::dump::faultlog::Entry\u2019\n 1070 |     { return unique_ptr<_Tp>(new _Tp(std::forward<_Args>(__args)...)); }\n      |                              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nIn file included from ../dump_manager_faultlog.cpp:6:\n../faultlog_dump_entry.hpp:26:7: note:   because the following virtual functions are pure within \u2018phosphor::dump::faultlog::Entry\u2019:\n   26 | class Entry : virtual public phosphor::dump::Entry\n      |       ^~~~~\nIn file included from ../dump_entry.hpp:5:\n/usr/local/include/xyz/openbmc_project/Dump/Entry/server.hpp:80:45: note:     \u2018virtual sdbusplus::message::unix_fd sdbusplus::server::xyz::openbmc_project::dump::Entry::getFileHandle()\u2019\n   80 |         virtual sdbusplus::message::unix_fd getFileHandle(\n      |                                             ^~~~~~~~~~~~~"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Dhruvaraj S",
                        "email": "dhruvaraj@gmail.com",
                        "username": "dhruvibm"
                    },
                    "message": "I took and built the latest master and I didnt get this fail, I think you may have to rebase and push again"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Edward A. James",
                        "email": "eajames@us.ibm.com",
                        "username": "eddiejames"
                    },
                    "message": "Done"
                },
                {
                    "file": "tools/dreport.d/plugins.d/traceevents",
                    "line": 10,
                    "reviewer": {
                        "name": "Jayanth Othayoth",
                        "email": "ojayanth@gmail.com",
                        "username": "ojayanth"
                    },
                    "message": "What is the max size of this file?"
                },
                {
                    "file": "tools/dreport.d/plugins.d/traceevents",
                    "line": 10,
                    "reviewer": {
                        "name": "Edward A. James",
                        "email": "eajames@us.ibm.com",
                        "username": "eddiejames"
                    },
                    "message": "I see 10MB for a wrapped trace, so that should be the max."
                },
                {
                    "file": "tools/dreport.d/plugins.d/traceevents",
                    "line": 10,
                    "reviewer": {
                        "name": "Jayanth Othayoth",
                        "email": "ojayanth@gmail.com",
                        "username": "ojayanth"
                    },
                    "message": "config: 1234 means this particular plugin is enabled for core, user, elog, checkstop type dumps . Since the size f dump data file is high this can be issue with lower flash size ( 32 mb) systems, which got maximu dump size 200K. \nQuestion :\n1. is this required for all types of dump?\n2. how the file size is managed in smaller flash supported systems.\n      -- if the max file size is proportional to flash size we may be ok here\n       \nSince we don't cleaner solution to support plugins based on system type , one option to reduce the priority to \"50\" range and enable only for required dump may solve the issue tempoarily. we may need to relook the design to support system with flash size based logic  later,"
                },
                {
                    "file": "tools/dreport.d/plugins.d/traceevents",
                    "line": 10,
                    "reviewer": {
                        "name": "Edward A. James",
                        "email": "eajames@us.ibm.com",
                        "username": "eddiejames"
                    },
                    "message": "Ok, thanks.\nNo, it's not required for all dump types, so I'll set to user only.\nNo I don't think the max size is proportional to flash size - it's only configurable by linux kernel config, so I'll make it lowest priority."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "tools/dreport.d/plugins.d/traceevents",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": ".shellcheck-ignore",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "ffdc",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 26,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "9f95c9fca89d468979ffb9a39d32a1a9a431fa76",
            "parents": [
                "a72daf5c4128b27229685c0d555ac656d6c60000"
            ],
            "ref": "refs/changes/40/64340/2",
            "uploader": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "createdOn": 1687440193,
            "author": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "tools/dreport.d/plugins.d/traceevents",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": ".shellcheck-ignore",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "ffdc",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 26,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "25653becb237a2da3b902735b0a11ed9a0269d28",
            "parents": [
                "a72daf5c4128b27229685c0d555ac656d6c60000"
            ],
            "ref": "refs/changes/40/64340/3",
            "uploader": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "createdOn": 1687446740,
            "author": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Jayanth Othayoth",
                        "email": "ojayanth@gmail.com",
                        "username": "ojayanth"
                    },
                    "message": "Roughly 1MB file size increase in the BMC user initiated dump size."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "tools/dreport.d/plugins.d/traceevents",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": ".shellcheck-ignore",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "ffdc",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 27,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "c04e0e0a7022ac8cfdf3c820e59c71c71a5676d8",
            "parents": [
                "8098ca6a45ee7fc8f9e084f3507b91fed539a373"
            ],
            "ref": "refs/changes/40/64340/4",
            "uploader": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "createdOn": 1687791292,
            "author": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "tools/dreport.d/plugins.d/traceevents",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": ".shellcheck-ignore",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "ffdc",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 27,
            "sizeDeletions": 0
        }
    ]
}