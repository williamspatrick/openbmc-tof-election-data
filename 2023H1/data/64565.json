{
    "project": "openbmc/phosphor-debug-collector",
    "branch": "master",
    "id": "I79f68be6ac6892ac7754b7221db64c22330b1822",
    "number": 64565,
    "subject": "BMCDump: dump subtype input parameter support",
    "owner": {
        "name": "Dhruvaraj S",
        "email": "dhruvaraj@gmail.com",
        "username": "dhruvibm"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-debug-collector/+/64565",
    "hashtags": [],
    "createdOn": 1688109471,
    "lastUpdated": 1689055109,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1688109471,
            "reviewer": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1688109499,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1688109499,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1688109513,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/69919/ : FAILURE"
        },
        {
            "timestamp": 1688112920,
            "reviewer": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "message": "Uploaded patch set 2.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1688112944,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1688112944,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1688113007,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/69926/ : SUCCESS"
        },
        {
            "timestamp": 1688132295,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Patch Set 2:\n\n(5 comments)"
        },
        {
            "timestamp": 1688134079,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 2:\n\n(7 comments)"
        },
        {
            "timestamp": 1688134356,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1688907716,
            "reviewer": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1688907746,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1688907746,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1688907828,
            "reviewer": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "message": "Patch Set 3:\n\n(10 comments)"
        },
        {
            "timestamp": 1688907830,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/70441/ : SUCCESS"
        },
        {
            "timestamp": 1689000612,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1689001804,
            "reviewer": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1689051788,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1689055109,
            "reviewer": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "e1490472eb53c2c3524d0d6aa35188ad89e9d2ca",
            "parents": [
                "1934a845e6d4bc0431344d31bd7fae7ebfe44d32"
            ],
            "ref": "refs/changes/65/64565/1",
            "uploader": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "createdOn": 1688109471,
            "author": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 24,
                    "deletions": 0
                },
                {
                    "file": "dump_types.cpp",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "dump_utils.hpp",
                    "type": "MODIFIED",
                    "insertions": 53,
                    "deletions": 0
                },
                {
                    "file": "dump_types.hpp",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "dump_utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 34,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "dump_manager_bmc.cpp",
                    "type": "MODIFIED",
                    "insertions": 36,
                    "deletions": -13
                },
                {
                    "file": "dump_manager_bmc.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 192,
            "sizeDeletions": 13
        },
        {
            "number": 2,
            "revision": "6fb343e4004d6ec8200e35c03d6aca16714ca61c",
            "parents": [
                "1934a845e6d4bc0431344d31bd7fae7ebfe44d32"
            ],
            "ref": "refs/changes/65/64565/2",
            "uploader": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "createdOn": 1688112920,
            "author": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Jayanth Othayoth",
                        "email": "ojayanth@gmail.com",
                        "username": "ojayanth"
                    },
                    "message": "BMCDump: dump subtype input parameter support"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Dhruvaraj S",
                        "email": "dhruvaraj@gmail.com",
                        "username": "dhruvibm"
                    },
                    "message": "Done"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 22,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "geissonator@yahoo.com",
                        "username": "geissonator"
                    },
                    "message": "Should always have a Tested: with new-function code. Can just say \"Detailed tests will be in last commit of this series\" if you just want to test it all at once."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 22,
                    "reviewer": {
                        "name": "Dhruvaraj S",
                        "email": "dhruvaraj@gmail.com",
                        "username": "dhruvibm"
                    },
                    "message": "I was little struggeled with tests due to the difference between master and downstream, since the code difference is huge many times a one to one mapping of change is not available. which is complicating the testing and master can be used only for building not testing, anyway created a new test setup with 1050 now I am directly able to test master code with that"
                },
                {
                    "file": "dump_manager_bmc.cpp",
                    "line": 76,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "geissonator@yahoo.com",
                        "username": "geissonator"
                    },
                    "message": "I'd vote INFO here since we could see this happen in fail scenarios where multiple services are requesting dumps. Seeing error traces for this obfuscates the real error causing all the dump requests."
                },
                {
                    "file": "dump_manager_bmc.cpp",
                    "line": 76,
                    "reviewer": {
                        "name": "Jayanth Othayoth",
                        "email": "ojayanth@gmail.com",
                        "username": "ojayanth"
                    },
                    "message": "+1"
                },
                {
                    "file": "dump_manager_bmc.cpp",
                    "line": 76,
                    "reviewer": {
                        "name": "Dhruvaraj S",
                        "email": "dhruvaraj@gmail.com",
                        "username": "dhruvibm"
                    },
                    "message": "Done"
                },
                {
                    "file": "dump_manager_bmc.hpp",
                    "line": 116,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "geissonator@yahoo.com",
                        "username": "geissonator"
                    },
                    "message": "Why would we not just call the function above this with a single entry in the vector?"
                },
                {
                    "file": "dump_manager_bmc.hpp",
                    "line": 116,
                    "reviewer": {
                        "name": "Jayanth Othayoth",
                        "email": "ojayanth@gmail.com",
                        "username": "ojayanth"
                    },
                    "message": "+1 \"const std::vector<std::string>& fullPaths\" used to support mutiple files package option."
                },
                {
                    "file": "dump_manager_bmc.hpp",
                    "line": 116,
                    "reviewer": {
                        "name": "Dhruvaraj S",
                        "email": "dhruvaraj@gmail.com",
                        "username": "dhruvibm"
                    },
                    "message": "The dump collector picks only one file at a time, even if we have multiple files only first one is picked."
                },
                {
                    "file": "dump_manager_bmc.hpp",
                    "line": 116,
                    "reviewer": {
                        "name": "Jayanth Othayoth",
                        "email": "ojayanth@gmail.com",
                        "username": "ojayanth"
                    },
                    "message": "The initial design to support mutiples file based on dump type if required. I would like to keep the existing flow here."
                },
                {
                    "file": "dump_manager_bmc.hpp",
                    "line": 116,
                    "reviewer": {
                        "name": "Dhruvaraj S",
                        "email": "dhruvaraj@gmail.com",
                        "username": "dhruvibm"
                    },
                    "message": "But there is no use for that since the dreport is not accepting it, and if there is any usecase in future, we should add a vector of paths as part of the variant in the create parameters. I dont think we need it until we have  that support."
                },
                {
                    "file": "dump_manager_bmc.hpp",
                    "line": 116,
                    "reviewer": {
                        "name": "Jayanth Othayoth",
                        "email": "ojayanth@gmail.com",
                        "username": "ojayanth"
                    },
                    "message": "Here you are trying to remove the existing support. Unless there is strong reason for removing this , not a good idea to remove the existing working code. \nNote: There is already review in progress to package mutiple core file as part of dump, in this case we can use the existing interface with out any change."
                },
                {
                    "file": "dump_manager_bmc.hpp",
                    "line": 116,
                    "reviewer": {
                        "name": "Dhruvaraj S",
                        "email": "dhruvaraj@gmail.com",
                        "username": "dhruvibm"
                    },
                    "message": "The current interface does support multiple paths, but the underlying implementation doesn't. When a commit to package multiple core dumps into a single dump was pushed, I asked this question to the community via Discord, the consensus was that there should be one core dump per dump. Thus, if there are multiple core dumps, the core monitor would need to initiate multiple calls to package each dump individually.\n\nGiven this, in our current use cases, only one file needs to be added to each dump. If a new type of dump requires packaging all files in a folder, the folder can be directly sent to the dreport, allowing the script to process the specific dump accordingly.\n\nShould we encounter a rare use case in the future where files from multiple locations need to be collected for packaging, we'd need to discuss the best approach at that time. However, I think such a scenario is unlikely because a special dump type typically handles a specific use case and should package either a single file or multiple files from a specific folder.\n\nIn instances where multiple files must be packaged for a use case, a client application should collect the information from each file to be sent. In such cases, the client application can consolidate all the data in a temporary folder and send the folder name as part of the call.\n\nGiven these considerations, I don't see a compelling reason to maintain an array of files here"
                },
                {
                    "file": "dump_types.cpp",
                    "line": 6,
                    "reviewer": {
                        "name": "Jayanth Othayoth",
                        "email": "ojayanth@gmail.com",
                        "username": "ojayanth"
                    },
                    "message": "by defining const type map , you can move this initialization to hpp."
                },
                {
                    "file": "dump_types.cpp",
                    "line": 8,
                    "reviewer": {
                        "name": "Jayanth Othayoth",
                        "email": "ojayanth@gmail.com",
                        "username": "ojayanth"
                    },
                    "message": "\"BMC_DUMP\"?"
                },
                {
                    "file": "dump_types.cpp",
                    "line": 8,
                    "reviewer": {
                        "name": "Dhruvaraj S",
                        "email": "dhruvaraj@gmail.com",
                        "username": "dhruvibm"
                    },
                    "message": "Done"
                },
                {
                    "file": "dump_types.cpp",
                    "line": 9,
                    "reviewer": {
                        "name": "Jayanth Othayoth",
                        "email": "ojayanth@gmail.com",
                        "username": "ojayanth"
                    },
                    "message": "Missing // namespace dump"
                },
                {
                    "file": "dump_types.cpp",
                    "line": 9,
                    "reviewer": {
                        "name": "Dhruvaraj S",
                        "email": "dhruvaraj@gmail.com",
                        "username": "dhruvibm"
                    },
                    "message": "Done"
                },
                {
                    "file": "dump_types.hpp",
                    "line": 4,
                    "reviewer": {
                        "name": "Jayanth Othayoth",
                        "email": "ojayanth@gmail.com",
                        "username": "ojayanth"
                    },
                    "message": "Clang should create empty line after header definition?"
                },
                {
                    "file": "dump_types.hpp",
                    "line": 4,
                    "reviewer": {
                        "name": "Dhruvaraj S",
                        "email": "dhruvaraj@gmail.com",
                        "username": "dhruvibm"
                    },
                    "message": "It didnt add automatically and ci didnt complain, added manually"
                },
                {
                    "file": "dump_utils.hpp",
                    "line": 304,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "geissonator@yahoo.com",
                        "username": "geissonator"
                    },
                    "message": "nit: It should be like a commit message. @brief is the 50 chars or less high level overview. Then you have an empty line, then you have descriptive text if needed describing the function. Then the params and return types."
                },
                {
                    "file": "dump_utils.hpp",
                    "line": 304,
                    "reviewer": {
                        "name": "Dhruvaraj S",
                        "email": "dhruvaraj@gmail.com",
                        "username": "dhruvibm"
                    },
                    "message": "Done"
                },
                {
                    "file": "dump_utils.hpp",
                    "line": 348,
                    "reviewer": {
                        "name": "Jayanth Othayoth",
                        "email": "ojayanth@gmail.com",
                        "username": "ojayanth"
                    },
                    "message": "nit: remove extra space."
                },
                {
                    "file": "dump_utils.hpp",
                    "line": 348,
                    "reviewer": {
                        "name": "Dhruvaraj S",
                        "email": "dhruvaraj@gmail.com",
                        "username": "dhruvibm"
                    },
                    "message": "Done"
                },
                {
                    "file": "meson.build",
                    "line": 163,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "geissonator@yahoo.com",
                        "username": "geissonator"
                    },
                    "message": "tab introduced"
                },
                {
                    "file": "meson.build",
                    "line": 163,
                    "reviewer": {
                        "name": "Dhruvaraj S",
                        "email": "dhruvaraj@gmail.com",
                        "username": "dhruvibm"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 24,
                    "deletions": 0
                },
                {
                    "file": "dump_types.cpp",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "dump_utils.hpp",
                    "type": "MODIFIED",
                    "insertions": 53,
                    "deletions": 0
                },
                {
                    "file": "dump_types.hpp",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "dump_utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 34,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "dump_manager_bmc.cpp",
                    "type": "MODIFIED",
                    "insertions": 36,
                    "deletions": -13
                },
                {
                    "file": "dump_manager_bmc.hpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 191,
            "sizeDeletions": 13
        },
        {
            "number": 3,
            "revision": "163c497c42f0e89a02ed150c70b717d3d3fcecda",
            "parents": [
                "0518b74d7e03186b1128a37947a4973be4df5ea6"
            ],
            "ref": "refs/changes/65/64565/3",
            "uploader": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "createdOn": 1688907716,
            "author": {
                "name": "Dhruvaraj S",
                "email": "dhruvaraj@gmail.com",
                "username": "dhruvibm"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 24,
                    "deletions": 0
                },
                {
                    "file": "dump_types.cpp",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "dump_utils.hpp",
                    "type": "MODIFIED",
                    "insertions": 55,
                    "deletions": 0
                },
                {
                    "file": "dump_types.hpp",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "dump_utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 34,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "dump_manager_bmc.cpp",
                    "type": "MODIFIED",
                    "insertions": 36,
                    "deletions": -13
                },
                {
                    "file": "dump_manager_bmc.hpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 193,
            "sizeDeletions": 13
        }
    ]
}