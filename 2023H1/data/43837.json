{
    "project": "openbmc/webui-vue",
    "branch": "master",
    "id": "I8ffe2359aa454503d07e8895907202bd0d8493f5",
    "number": 43837,
    "subject": "Handle API error messages on add/edit user",
    "owner": {
        "name": "Michal Szopinski",
        "email": "michalx.szopinski@intel.com",
        "username": "mszopinx"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/webui-vue/+/43837",
    "hashtags": [],
    "createdOn": 1623074834,
    "lastUpdated": 1681096671,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1623074834,
            "reviewer": {
                "name": "Michal Szopinski",
                "email": "michalx.szopinski@intel.com",
                "username": "mszopinx"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1623074848,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1623075493,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/18876/ : SUCCESS"
        },
        {
            "timestamp": 1623076308,
            "reviewer": {
                "name": "Maciej Magdziarz",
                "email": "maciejx.magdziarz@intel.com",
                "username": "mmagdzix"
            },
            "message": "Patch Set 1: Code-Review+1"
        },
        {
            "timestamp": 1624657251,
            "reviewer": {
                "name": "Derick Montague",
                "email": "derick.montague@ibm.com",
                "username": "derick-montague"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1666274263,
            "reviewer": {
                "name": "Damian Celico",
                "email": "damianx.celico@intel.com",
                "username": "damianxc"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1666274325,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1666274325,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1666274408,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/53797/ : SUCCESS"
        },
        {
            "timestamp": 1667554796,
            "reviewer": {
                "name": "Sandeepa Singh",
                "email": "sandeepa.singh@ibm.com",
                "username": "sandeepasingh116"
            },
            "message": "Removed reviewer Sukanya Pandey <sukapan1@in.ibm.com>."
        },
        {
            "timestamp": 1667554801,
            "reviewer": {
                "name": "Sandeepa Singh",
                "email": "sandeepa.singh@ibm.com",
                "username": "sandeepasingh116"
            },
            "message": "Removed reviewer Surendra Neware <sneware9@in.ibm.com>."
        },
        {
            "timestamp": 1667554814,
            "reviewer": {
                "name": "Sandeepa Singh",
                "email": "sandeepa.singh@ibm.com",
                "username": "sandeepasingh116"
            },
            "message": "Removed reviewer Dixsie Wolmers <dixsiew@gmail.com>."
        },
        {
            "timestamp": 1667923580,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1674586945,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1674587131,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1674587176,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 2: Code-Review+1"
        },
        {
            "timestamp": 1675073886,
            "reviewer": {
                "name": "Nikhil Ashoka",
                "email": "a.nikhil@ibm.com",
                "username": "Nikhil-Ashoka"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1677256112,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1677267205,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1677678771,
            "reviewer": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Code-Review+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE OR changekind:TRIVIAL_REBASE OR is:MIN\")\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1677678799,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1677678799,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1677678826,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/61891/ : FAILURE"
        },
        {
            "timestamp": 1677678975,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3:\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/61892/ : FAILURE"
        },
        {
            "timestamp": 1677749884,
            "reviewer": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "message": "Uploaded patch set 4.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1677749919,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1677749919,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1677750005,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/62026/ : SUCCESS"
        },
        {
            "timestamp": 1678441423,
            "reviewer": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1678813716,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1678885407,
            "reviewer": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1678894281,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1679499564,
            "reviewer": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1680766363,
            "reviewer": {
                "name": "Nikhil Ashoka",
                "email": "a.nikhil@ibm.com",
                "username": "Nikhil-Ashoka"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1680879687,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1680887105,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 4: Code-Review+2"
        },
        {
            "timestamp": 1681096671,
            "reviewer": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "message": "Change has been successfully rebased and submitted as 5905f96bac2e8386f8b56b97c11f8e7655c8424a"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "2013797f2f06c1d0d3772b02488ff2de01338b2e",
            "parents": [
                "e516d4d9e8d14a826cd98b1b8ce5f5b117597a5a"
            ],
            "ref": "refs/changes/37/43837/1",
            "uploader": {
                "name": "Michal Szopinski",
                "email": "michalx.szopinski@intel.com",
                "username": "mszopinx"
            },
            "createdOn": 1623074834,
            "author": {
                "name": "Michal Szopinski",
                "email": "michalx.szopinski@intel.com",
                "username": "mszopinx"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "src/store/modules/AccessControl/LocalUserMangementStore.js",
                    "line": 132,
                    "reviewer": {
                        "name": "Derick Montague",
                        "email": "derick.montague@ibm.com",
                        "username": "derick-montague"
                    },
                    "message": "I have some questions about this. Do we know how this will impact other community members? If there are messages, they won't be translated and they also won't include the user info. Is this something we could demo either in the work group or possibly set up a story and post screen shots?"
                },
                {
                    "file": "src/store/modules/AccessControl/LocalUserMangementStore.js",
                    "line": 132,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "This still seems like an outstanding comment?"
                },
                {
                    "file": "src/store/modules/AccessControl/LocalUserMangementStore.js",
                    "line": 132,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "I feel like we discussed this in a web UI meeting and came up with the possibility to handle the translation in Redfish.  Can we move forward with this change in the web UI.  Then if someone needs Redfish translation, they can work on adding support to tell bmcweb what language to use and have Redfish itself return the corresponding translation?"
                },
                {
                    "file": "src/store/modules/AccessControl/LocalUserMangementStore.js",
                    "line": 132,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "I am fine with that direction"
                },
                {
                    "file": "src/store/modules/AccessControl/LocalUserMangementStore.js",
                    "line": 132,
                    "reviewer": {
                        "name": "Kiran Kumar Ballapalli",
                        "email": "kirankumarb@ami.com",
                        "username": "kirankumarb07"
                    },
                    "message": "Ack"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "src/store/modules/AccessControl/LocalUserMangementStore.js",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -8
                }
            ],
            "sizeInsertions": 33,
            "sizeDeletions": 8
        },
        {
            "number": 2,
            "revision": "308814e60754d398227124593e8f40e1ebe250eb",
            "parents": [
                "f7dd1bdffb3b14f8e819509fc7255b07bfaaedc8"
            ],
            "ref": "refs/changes/37/43837/2",
            "uploader": {
                "name": "Damian Celico",
                "email": "damianx.celico@intel.com",
                "username": "damianxc"
            },
            "createdOn": 1666274263,
            "author": {
                "name": "Michal Szopinski",
                "email": "michalx.szopinski@intel.com",
                "username": "mszopinx"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Nikhil Ashoka",
                        "email": "a.nikhil@ibm.com",
                        "username": "Nikhil-Ashoka"
                    },
                    "message": "When edit the user say \"user_name\", change role to Operator and save\n\nError message appears ->\n\nBefore change: Error updating user 'user_name'.\nAfter change: The request completed successfully.\n\nFirst one seems more relevant."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "Sorry for the delay.  After this change, the message should come directly from Redfish.  So, in the second case, did the operation fail?  If so, that would be an issue with Redfish returning a success message on a failure.  I'll try this on my system, too."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "I cherry-picked this to the latest webui-vue and tried various actions as follows:\n- Add Admin user 'debuguser' with a valid password:\nSuccess\nCreated user 'debuguser'.\n\n- Add Admin user 'jmbills' with invalid password:\nError\nThe value '11111111' for the property Password is of a different format than the property can accept.\n\n- Log in as 'debuguser' and change to Operator:\nSuccess\nUpdated user 'debuguser'.\n\n- Log in as 'debuguser' and change to Administrator:\nError\nObject.values(...).reduce(...).filter is not a function\n\n- Log in as 'root' and change 'debuguser' to Administrator:\nSuccess\nUpdated user 'debuguser'.\n\n- Add Admin user 'debuguser':\nError\nUsername 'debuguser' already exists.\n\n- Delete user 'debuguser':\nSuccess\nDeleted user 'debuguser'.\n\nAll of these look reasonable and informative to me except for case where 'debuguser' attempted to elevate itself from Operator to Administrator.  Other than that is anything missing or incorrect?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "I pulled patchset 4 and tested again.  Everything had the same results except for these tests:\n\n* Log in as 'debuguser' and change to Administrator:\nError\nThe property RoleId is not in the list of valid properties for the resource.\n\n* Add Admin user 'debuguser':\nError\nThe requested resource of type ManagerAccount with the property UserName with the value 'debuguser' already exists."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Kiran Kumar Ballapalli",
                        "email": "kirankumarb@ami.com",
                        "username": "kirankumarb07"
                    },
                    "message": "> Log in as 'debuguser' and change to Administrator:\n> Error\n> The property RoleId is not in the list of valid properties for the resource.\n\nWhich is expected. A non-admin user cannot change their privilege.\n\n> Add Admin user 'debuguser':\n> Error\n> The requested resource of type ManagerAccount with the property UserName with the value 'debuguser' already exists.\n\nWhich is expected. If the username already exists, the API call will fail, and the error message from the redfish will display in the WebUI."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "src/store/modules/SecurityAndAccess/UserManagementStore.js",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -6
                }
            ],
            "sizeInsertions": 33,
            "sizeDeletions": 6
        },
        {
            "number": 3,
            "revision": "2e3a2c47c36b4471353d3f6f9edc10b809da5c31",
            "parents": [
                "f7dd1bdffb3b14f8e819509fc7255b07bfaaedc8"
            ],
            "ref": "refs/changes/37/43837/3",
            "uploader": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "createdOn": 1677678771,
            "author": {
                "name": "Michal Szopinski",
                "email": "michalx.szopinski@intel.com",
                "username": "mszopinx"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "src/store/modules/SecurityAndAccess/UserManagementStore.js",
                    "type": "MODIFIED",
                    "insertions": 27,
                    "deletions": -6
                }
            ],
            "sizeInsertions": 39,
            "sizeDeletions": 6
        },
        {
            "number": 4,
            "revision": "693e56597bd557db9de9fd7185111fa88c55076f",
            "parents": [
                "d8c71c00c2e98703b6e33ca1f9c87966dfb21805"
            ],
            "ref": "refs/changes/37/43837/4",
            "uploader": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "createdOn": 1677749884,
            "author": {
                "name": "Michal Szopinski",
                "email": "michalx.szopinski@intel.com",
                "username": "mszopinx"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Kiran Kumar Ballapalli",
                        "email": "kirankumarb@ami.com",
                        "username": "kirankumarb07"
                    },
                    "message": "If there is no further concerns, shall we move forward to get +2?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "Any further feedback?  Can this be given +2?"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "src/store/modules/SecurityAndAccess/UserManagementStore.js",
                    "type": "MODIFIED",
                    "insertions": 27,
                    "deletions": -24
                }
            ],
            "sizeInsertions": 39,
            "sizeDeletions": 24
        },
        {
            "number": 5,
            "revision": "5905f96bac2e8386f8b56b97c11f8e7655c8424a",
            "parents": [
                "80d697d8a6e9343aeba1a4955fdbbc4627bf2e9e"
            ],
            "ref": "refs/changes/37/43837/5",
            "uploader": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "createdOn": 1681096671,
            "author": {
                "name": "Michal Szopinski",
                "email": "michalx.szopinski@intel.com",
                "username": "mszopinx"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "src/store/modules/SecurityAndAccess/UserManagementStore.js",
                    "type": "MODIFIED",
                    "insertions": 27,
                    "deletions": -24
                }
            ],
            "sizeInsertions": 39,
            "sizeDeletions": 24
        }
    ]
}