{
    "project": "openbmc/sdbusplus",
    "branch": "master",
    "id": "I4845d3b7e3619c8b10bed9db0d92a90ec09578b4",
    "number": 62561,
    "subject": "Make register_method accept 'Flags'",
    "owner": {
        "name": "Arun Lal K M",
        "email": "arun.lal@intel.com",
        "username": "arunlalkm-intel"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/sdbusplus/+/62561",
    "hashtags": [],
    "createdOn": 1681713390,
    "lastUpdated": 1682522639,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1681713390,
            "reviewer": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1681713438,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1681713438,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1681713487,
            "reviewer": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "message": "Patch Set 2: Commit message was updated."
        },
        {
            "timestamp": 1681713522,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1681713522,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1681713523,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/64306/ : ABORTED"
        },
        {
            "timestamp": 1681713664,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2:\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/64307/ : FAILURE"
        },
        {
            "timestamp": 1681718541,
            "reviewer": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1681718587,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1681718588,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1681718728,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/64308/ : FAILURE"
        },
        {
            "timestamp": 1681719219,
            "reviewer": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "message": "Uploaded patch set 4.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1681719277,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1681719277,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1681719559,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/64309/ : FAILURE"
        },
        {
            "timestamp": 1681728046,
            "reviewer": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "message": "Uploaded patch set 5.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1681728057,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1681728058,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1681728189,
            "reviewer": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "message": "Patch Set 6: Commit message was updated."
        },
        {
            "timestamp": 1681728243,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1681728243,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: -Ok-To-Test"
        },
        {
            "timestamp": 1681728244,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/64314/ : ABORTED"
        },
        {
            "timestamp": 1681729042,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/64315/ : SUCCESS"
        },
        {
            "timestamp": 1681744823,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 6:\n\n(2 comments)"
        },
        {
            "timestamp": 1681749130,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1681750432,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1681755295,
            "reviewer": {
                "name": "Nirav Shah",
                "email": "nirav.j2.shah@intel.com",
                "username": "njshah2"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1681761973,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1681762628,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1681763965,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1681764325,
            "reviewer": {
                "name": "Nirav Shah",
                "email": "nirav.j2.shah@intel.com",
                "username": "njshah2"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1681764431,
            "reviewer": {
                "name": "Nirav Shah",
                "email": "nirav.j2.shah@intel.com",
                "username": "njshah2"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1681764920,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1681789872,
            "reviewer": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1681790126,
            "reviewer": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1681794079,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1681800420,
            "reviewer": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1681837145,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 6: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1682504828,
            "reviewer": {
                "name": "Smriti-Ayushi",
                "email": "smriti.ayushi@linux.intel.com",
                "username": "Smriti-Ayushi"
            },
            "message": "Uploaded patch set 7.\n\nOutdated Votes:\n* Code-Review+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE OR changekind:TRIVIAL_REBASE OR is:MIN\")\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1682504865,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1682504865,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: -Ok-To-Test"
        },
        {
            "timestamp": 1682504956,
            "reviewer": {
                "name": "Smriti-Ayushi",
                "email": "smriti.ayushi@linux.intel.com",
                "username": "Smriti-Ayushi"
            },
            "message": "Uploaded patch set 8."
        },
        {
            "timestamp": 1682505009,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1682505009,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: -Ok-To-Test"
        },
        {
            "timestamp": 1682505011,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/64970/ : ABORTED"
        },
        {
            "timestamp": 1682505118,
            "reviewer": {
                "name": "Smriti-Ayushi",
                "email": "smriti.ayushi@linux.intel.com",
                "username": "Smriti-Ayushi"
            },
            "message": "Patch Set 8:\n\n(3 comments)"
        },
        {
            "timestamp": 1682505271,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/64971/ : FAILURE"
        },
        {
            "timestamp": 1682505520,
            "reviewer": {
                "name": "Smriti-Ayushi",
                "email": "smriti.ayushi@linux.intel.com",
                "username": "Smriti-Ayushi"
            },
            "message": "Uploaded patch set 9.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1682505564,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1682505564,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: -Ok-To-Test"
        },
        {
            "timestamp": 1682506197,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/64972/ : SUCCESS"
        },
        {
            "timestamp": 1682522594,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 9: Code-Review+2"
        },
        {
            "timestamp": 1682522639,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Change has been successfully merged"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "205fabf6a57fc82ab4b9186206c459c8da971ca2",
            "parents": [
                "946c940434a7d5403f469ce2ab56f9136293ff38"
            ],
            "ref": "refs/changes/61/62561/1",
            "uploader": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "createdOn": 1681713390,
            "author": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 40,
                    "deletions": 0
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 43,
            "sizeDeletions": 2
        },
        {
            "number": 2,
            "revision": "78864923619ccb83a2893b170064cf3f729574b7",
            "parents": [
                "946c940434a7d5403f469ce2ab56f9136293ff38"
            ],
            "ref": "refs/changes/61/62561/2",
            "uploader": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "createdOn": 1681713487,
            "author": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 40,
                    "deletions": 0
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 43,
            "sizeDeletions": 2
        },
        {
            "number": 3,
            "revision": "87baf608a392c0d70cca402768aea31424a42d10",
            "parents": [
                "946c940434a7d5403f469ce2ab56f9136293ff38"
            ],
            "ref": "refs/changes/61/62561/3",
            "uploader": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "createdOn": 1681718541,
            "author": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 40,
                    "deletions": 0
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 45,
            "sizeDeletions": 3
        },
        {
            "number": 4,
            "revision": "6c3107ec7c52c017dee78507076293dee3f1e96d",
            "parents": [
                "946c940434a7d5403f469ce2ab56f9136293ff38"
            ],
            "ref": "refs/changes/61/62561/4",
            "uploader": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "createdOn": 1681719219,
            "author": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 40,
                    "deletions": 0
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -5
                }
            ],
            "sizeInsertions": 49,
            "sizeDeletions": 5
        },
        {
            "number": 5,
            "revision": "e8692def5c97403b5bea885eab9263e677e4efaf",
            "parents": [
                "946c940434a7d5403f469ce2ab56f9136293ff38"
            ],
            "ref": "refs/changes/61/62561/5",
            "uploader": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "createdOn": 1681728046,
            "author": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 40,
                    "deletions": 0
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -7
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 7
        },
        {
            "number": 6,
            "revision": "2eb78c889eb5a21c378cd9d4588a0a9e7236c8b8",
            "parents": [
                "946c940434a7d5403f469ce2ab56f9136293ff38"
            ],
            "ref": "refs/changes/61/62561/6",
            "uploader": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "createdOn": 1681728189,
            "author": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "line": 53,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "It's unfortunate we've let this bleed out so far.  I probably should have added a saner typedef in vtable.hpp."
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "line": 53,
                    "reviewer": {
                        "name": "Smriti-Ayushi",
                        "email": "smriti.ayushi@linux.intel.com",
                        "username": "Smriti-Ayushi"
                    },
                    "message": "Ack"
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "line": 62,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Since this is just an integer, we shouldn't need the reference."
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "line": 62,
                    "reviewer": {
                        "name": "Smriti-Ayushi",
                        "email": "smriti.ayushi@linux.intel.com",
                        "username": "Smriti-Ayushi"
                    },
                    "message": "Done"
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "line": 584,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Should the default be unprivileged if that's what we expect going forward?"
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "line": 584,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I don't know enough yet to assess if that's what we should be doing or not.  I know people are claiming \"it works\" but it seems like the security implications to it put us in just as bad (or worse?) state than where we are now with everything running as root.  Unless we fully enable polkit which I don't know if we can do on the 32MB platforms.\n\nhttps://www.freedesktop.org/software/systemd/man/sd_bus_add_object.html#SD_BUS_VTABLE_UNPRIVILEGED\n\nBased on the word in that manpage it seems like adding CAP_SYS_ADMIN to the non-root users also gets past the issue, but that seems almost as bad as root itself:\n\n> If not specified, either for an individual entry or the whole array, CAP_SYS_ADMIN is checked by default"
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "line": 584,
                    "reviewer": {
                        "name": "Nirav Shah",
                        "email": "nirav.j2.shah@intel.com",
                        "username": "njshah2"
                    },
                    "message": "No matter what we default to, does the security become worse in any scenario compared to what we have today? if no, for now, it wont matter. There are 2 scenarios to consider.\n\n1. Accessing privileged information on DBUS\n2. Accessing privileged information on the system e.g. filesystem.\n\nMy contention is, no matter what the default, this change is better in one scenario and no worse in the other (since everything else runs as root anyways). \n\nThe answer to what should be a default will depend on, is there anything on the D-Bus worth protecting from non-root? Should we address that separately?"
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "line": 584,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Making UNPRIVILEDGED the default is potentially worse security than what we have today, yes, especially for users which might be using this library outside of a BMC (which there are a few who have contributed in the past).\n\nUntil we have a better grip on what is the requirement for running as non-root and the implications of setting that, I don't think we should change the default from 0 yet.\n\nThe rest of this commit is fine to me except for the nits I left earlier."
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "line": 584,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Sure, not doing it yet seems reasonable;  So long as the plan isn't to submit 400 PRs to every OpenBMC daemon to turn this on for every method call, because that seems like the logical result of this patchset.  Agreed, we should look at the security of the option, but I'm not following how it's possible that this makes security worse?  Maybe it's non-ideal, and maybe it makes DBus security no better, but it still seems like an improvement.  Something I'm missing that would make this worse than just running as root?"
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "line": 584,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "> So long as the plan isn't to submit 400 PRs to every OpenBMC daemon to turn this on for every method call,\n\n100% agree.  This can be used for experimentation, but we should not be punting a fundamental change like this out to all the repos.  sdbusplus is suppose to make dbus easier."
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "line": 584,
                    "reviewer": {
                        "name": "Nirav Shah",
                        "email": "nirav.j2.shah@intel.com",
                        "username": "njshah2"
                    },
                    "message": "So once we figure out all the moving parts with running BMCWeb as non-root which I believe we are close to, then there are no objections having the default be unprivileged? Am i understanding this correctly?"
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "line": 584,
                    "reviewer": {
                        "name": "Nirav Shah",
                        "email": "nirav.j2.shah@intel.com",
                        "username": "njshah2"
                    },
                    "message": "Because if we cant do a white list and the default cant be unprivileged then running BMCWeb as non root is DOA."
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "line": 584,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "You are fine experimenting with bmcweb and getting something to work.  But, just because something \"works\" doesn't mean that is the direction we're going to go.  I'm suspicious that UNPRIVILEGED is the only way forward here and I suspect we are more likely to want to use CAPABILITY(...).  In either case we need to understand the security implications of what we're setting as the default and/or direction in this area."
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "line": 584,
                    "reviewer": {
                        "name": "Arun Lal K M",
                        "email": "arun.lal@intel.com",
                        "username": "arunlalkm-intel"
                    },
                    "message": "CAPABILITY can not be safely used as per maintainer of systemd. \nHis reply was \"This is stuff that cannot safely be implemented on the AF_UNIX. It was a safe concept when kdbus was a thing.\"\n\nWe had gone extensively over different ways to handle it. And had mail discussion with systemd and polkit maintainers. \n\nIssue 1 is systemd needs to let the call pass through, for that we need UNPRIVILAGED. Then we can refine access by polkit or dbus conf. And dbus conf is easier approach as it does not touch code.\n\n@Ed, I agree that making UNPRIVILAGED as default will save us lot of effort. I also had same concerns as Patrick about others who use the repo will see a change in behavior in code if we do that. Can we think of taking the default value as some option coming from meson?"
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "line": 584,
                    "reviewer": {
                        "name": "Arun Lal K M",
                        "email": "arun.lal@intel.com",
                        "username": "arunlalkm-intel"
                    },
                    "message": "@Patrick, the question I asked to systemd maintainer is how to make the following condition return 1\n\nr = sd_bus_creds_has_effective_cap(creds, capability);\n    if (r > 0)\n        return 1;"
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "line": 584,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Do you have links to these discussions?  I would hope they\u2019re happening in public, but my reading of what you wrote leads me to believe otherwise. Who is the maintainer you\u2019re talking with?  Do you have specific links to the code you referenced here?  Did the maintainer have any explanation on why their suggestion doesn\u2019t align with the documentation I linked to?  There are a lot of questions I have that I think you could be less vague on, otherwise it feels like you\u2019re just trying to appeal to authority.  Frankly, private conversations don\u2019t hold much water in the open source world. \n\nI\u2019m not really sure what you want me to do with this information. Is there a decision you want made?  I\u2019ve already said I\u2019m mostly fine with this commit as-is, but Ed and I both agree that we do not want to see a bunch of changes across the codebase to individual vtable inits. Is there some other code change you want to propose or we need to decide on?\n\nOverall, I don\u2019t know how we get from where we are today with everything running as root to something different, partially because:\n1. It isn\u2019t a particularly interesting problem to me personally so I\u2019ve not done any investigation. \n2. I don\u2019t fully understand where the people involved would like to see we end up. \n\nIt is fine for you and your team to be doing experimentation and gathering data. Ultimately, we need a design document of where we want to go, how we\u2019re going to get there, and what the alternatives are. I don\u2019t think we\u2019re ever going to merge a fundamental change, like setting all dbus vtables to unprivileged, without having that bigger discussion. Trying to discuss that in this code review doesn\u2019t seem like the right venue."
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "line": 584,
                    "reviewer": {
                        "name": "Arun Lal K M",
                        "email": "arun.lal@intel.com",
                        "username": "arunlalkm-intel"
                    },
                    "message": "The discussion happened on sysyemd mail chain and polkit mail chain and anyone subscribed to it can see the conversation.\n\nSystemd discussion:\nhttps://www.spinics.net/lists/systemd-devel/msg08392.html\nhttps://www.spinics.net/lists/systemd-devel/msg08496.html\n\npolkit discussion \nhttps://gitlab.freedesktop.org/polkit/polkit/-/issues/192\n\nAnd as far as the PR is concerned register_method is not providing an option to change the flag, and PR address the same. And like you said we can take discussion of running bmcweb as non-root somewhere in discord and not in this PR. \n\nOn a quick summery to run bmcweb as non root we need the following:\n1) Make a non root user and give the required file access.\n2) Move libpam functionality from bmcweb to a different demon \n3) Make changes in this PR + dbus conf files to let non-root user make dbus calls.\n\nLike you suggested we can make a design document and share with all details."
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "line": 584,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I would also note that exposing these flags can have unintended consequences to users of this library, as I unfortunately discovered here:\nhttps://gerrit.openbmc.org/c/openbmc/sdbusplus/+/62122\n\nI'm not a huge fan of exposing them wholesale to a public API in the long term.  For a temporary thing, it's fine, but the end goal should ideally be to go back to the non-flag supported API we had before."
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "line": 584,
                    "reviewer": {
                        "name": "Smriti-Ayushi",
                        "email": "smriti.ayushi@linux.intel.com",
                        "username": "Smriti-Ayushi"
                    },
                    "message": "Ack"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 40,
                    "deletions": 0
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -7
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 7
        },
        {
            "number": 7,
            "revision": "0406df28dd26b09340a9c9d86c740edd91a0e241",
            "parents": [
                "1caa5e8a5ad9e9f26ddf2effe095ba1670911bc1"
            ],
            "ref": "refs/changes/61/62561/7",
            "uploader": {
                "name": "Smriti-Ayushi",
                "email": "smriti.ayushi@linux.intel.com",
                "username": "Smriti-Ayushi"
            },
            "createdOn": 1682504828,
            "author": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 40,
                    "deletions": 0
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": -9
                }
            ],
            "sizeInsertions": 52,
            "sizeDeletions": 9
        },
        {
            "number": 8,
            "revision": "8f014bf4345b6ffb606ff57b603b83224ee81165",
            "parents": [
                "1caa5e8a5ad9e9f26ddf2effe095ba1670911bc1"
            ],
            "ref": "refs/changes/61/62561/8",
            "uploader": {
                "name": "Smriti-Ayushi",
                "email": "smriti.ayushi@linux.intel.com",
                "username": "Smriti-Ayushi"
            },
            "createdOn": 1682504956,
            "author": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 40,
                    "deletions": 0
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": -9
                }
            ],
            "sizeInsertions": 52,
            "sizeDeletions": 9
        },
        {
            "number": 9,
            "revision": "d0f578dfd637da535e4fe11f0e581bb08fc5c79f",
            "parents": [
                "1caa5e8a5ad9e9f26ddf2effe095ba1670911bc1"
            ],
            "ref": "refs/changes/61/62561/9",
            "uploader": {
                "name": "Smriti-Ayushi",
                "email": "smriti.ayushi@linux.intel.com",
                "username": "Smriti-Ayushi"
            },
            "createdOn": 1682505520,
            "author": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 40,
                    "deletions": 0
                },
                {
                    "file": "include/sdbusplus/asio/object_server.hpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": -9
                }
            ],
            "sizeInsertions": 52,
            "sizeDeletions": 9
        }
    ]
}