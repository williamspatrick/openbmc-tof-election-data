{
    "project": "openbmc/dbus-sensors",
    "branch": "master",
    "id": "Ifae4abc64288e84023c045fc8b2c7a4f0d1b8498",
    "number": 62006,
    "subject": "detect fan type by matching against 'compatible'",
    "owner": {
        "name": "Christopher Sides",
        "email": "christopher.sides@hpe.com",
        "username": "csides-hpe"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/62006",
    "hashtags": [],
    "createdOn": 1680553396,
    "lastUpdated": 1682311954,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1680553396,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1680553453,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Patch Set 2: Commit message was updated."
        },
        {
            "timestamp": 1680553524,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1680553524,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1680553539,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/63589/ : FAILURE"
        },
        {
            "timestamp": 1680554146,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1680554240,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Uploaded patch set 4: Commit message was updated."
        },
        {
            "timestamp": 1680555018,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Uploaded patch set 5: Commit message was updated."
        },
        {
            "timestamp": 1680555034,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1680555034,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1680555053,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/63592/ : FAILURE"
        },
        {
            "timestamp": 1680555085,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Uploaded patch set 6: New patch set was added with same tree, parent tree, and commit message as Patch Set 5.\n\nCopied Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1680555149,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1680555150,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: -Ok-To-Test"
        },
        {
            "timestamp": 1680555165,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6:\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/63593/ : FAILURE"
        },
        {
            "timestamp": 1680556532,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1680559984,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1680560364,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Patch Set 7: Patch Set 6 was rebased\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1680560409,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1680560409,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: -Ok-To-Test"
        },
        {
            "timestamp": 1680560698,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/63595/ : SUCCESS"
        },
        {
            "timestamp": 1680742034,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 7:\n\n(5 comments)"
        },
        {
            "timestamp": 1680790923,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Patch Set 7:\n\n(5 comments)"
        },
        {
            "timestamp": 1680794868,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Uploaded patch set 8.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1680794918,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1680794919,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: -Ok-To-Test"
        },
        {
            "timestamp": 1680795234,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/63858/ : SUCCESS"
        },
        {
            "timestamp": 1680903243,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 8:\n\n(3 comments)"
        },
        {
            "timestamp": 1681157674,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Patch Set 8:\n\n(4 comments)"
        },
        {
            "timestamp": 1681160528,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1681162184,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1681172521,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 8:\n\n(3 comments)"
        },
        {
            "timestamp": 1681210356,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1681210824,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 8:\n\n(2 comments)"
        },
        {
            "timestamp": 1681331684,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Patch Set 8:\n\n(2 comments)"
        },
        {
            "timestamp": 1682013969,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 8:\n\n(2 comments)"
        },
        {
            "timestamp": 1682014001,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 8: Code-Review+1"
        },
        {
            "timestamp": 1682311928,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 8: Code-Review+2"
        },
        {
            "timestamp": 1682311954,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Change has been successfully rebased and submitted as 9a472e8ed1a0da677d2e28446db87b55677b8d83"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "c1ba05bd655d01e06019d726597c22e404718a8b",
            "parents": [
                "e4e6a28f391984564fe9fb3c804c5094908b9d76"
            ],
            "ref": "refs/changes/06/62006/1",
            "uploader": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "createdOn": 1680553396,
            "author": {
                "name": "Chris Sides",
                "email": "Christopher.Sides@hpe.com",
                "username": ""
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "src/FanMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 31,
                    "deletions": -8
                }
            ],
            "sizeInsertions": 53,
            "sizeDeletions": 8
        },
        {
            "number": 2,
            "revision": "4657fb198ea77c2804f043f60eba3c8de70f739a",
            "parents": [
                "e4e6a28f391984564fe9fb3c804c5094908b9d76"
            ],
            "ref": "refs/changes/06/62006/2",
            "uploader": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "createdOn": 1680553453,
            "author": {
                "name": "Chris Sides",
                "email": "Christopher.Sides@hpe.com",
                "username": ""
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "src/FanMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 31,
                    "deletions": -8
                }
            ],
            "sizeInsertions": 48,
            "sizeDeletions": 8
        },
        {
            "number": 3,
            "revision": "dc014a3439f36b2e810568cc6a284a8a3af46ea2",
            "parents": [
                "e4e6a28f391984564fe9fb3c804c5094908b9d76"
            ],
            "ref": "refs/changes/06/62006/3",
            "uploader": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "createdOn": 1680554146,
            "author": {
                "name": "Chris Sides",
                "email": "Christopher.Sides@hpe.com",
                "username": ""
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "src/FanMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 28,
                    "deletions": -7
                }
            ],
            "sizeInsertions": 47,
            "sizeDeletions": 7
        },
        {
            "number": 4,
            "revision": "d9af7378dd5678be4284ea91ec09ffcd8635c480",
            "parents": [
                "e4e6a28f391984564fe9fb3c804c5094908b9d76"
            ],
            "ref": "refs/changes/06/62006/4",
            "uploader": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "createdOn": 1680554240,
            "author": {
                "name": "Chris Sides",
                "email": "Christopher.Sides@hpe.com",
                "username": ""
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "src/FanMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 28,
                    "deletions": -7
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 7
        },
        {
            "number": 5,
            "revision": "cd04ac51b625c11065783ced86c6456e8a15e46b",
            "parents": [
                "e4e6a28f391984564fe9fb3c804c5094908b9d76"
            ],
            "ref": "refs/changes/06/62006/5",
            "uploader": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "createdOn": 1680555018,
            "author": {
                "name": "Chris Sides",
                "email": "Christopher.Sides@hpe.com",
                "username": ""
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "src/FanMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 28,
                    "deletions": -7
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 7
        },
        {
            "number": 6,
            "revision": "f9c3b908e04126177249967906accf69a1a728dc",
            "parents": [
                "e4e6a28f391984564fe9fb3c804c5094908b9d76"
            ],
            "ref": "refs/changes/06/62006/6",
            "uploader": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "createdOn": 1680555085,
            "author": {
                "name": "Chris Sides",
                "email": "Christopher.Sides@hpe.com",
                "username": ""
            },
            "kind": "NO_CHANGE",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Christopher Sides",
                        "email": "christopher.sides@hpe.com",
                        "username": "csides-hpe"
                    },
                    "message": "CI build is currently failing due to what look to be code-format complaints about  'PSUSensorMain.cpp' - which this change doesn't touch. \n\nPSUSensorMain was updated on github about 4-5 hours before this review was submitted. Investigating."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Christopher Sides",
                        "email": "christopher.sides@hpe.com",
                        "username": "csides-hpe"
                    },
                    "message": "Looks like the CI code-format rules were updated after the PSUSensorMain passed it's CI check.\n\nI've submitted a new review with the required code-format changes to PSUSensorMain\nhttps://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/62007\n\nThis review will be rebased against the above once it's been accepted."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "src/FanMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 28,
                    "deletions": -7
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 7
        },
        {
            "number": 7,
            "revision": "881d77f32b65bd88f7f1078a5e8dc1570bb6cc31",
            "parents": [
                "3fce1bf44e13b339d2d13eb0063858761cb512ed"
            ],
            "ref": "refs/changes/06/62006/7",
            "uploader": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "createdOn": 1680560364,
            "author": {
                "name": "Chris Sides",
                "email": "Christopher.Sides@hpe.com",
                "username": ""
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Hi Christopher, thanks for working on this! I have a few comments but really they're all just nit picks. Let me know what you think."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Christopher Sides",
                        "email": "christopher.sides@hpe.com",
                        "username": "csides-hpe"
                    },
                    "message": "This level of suggestion/commentary is definitely appreciated, thanks!"
                },
                {
                    "file": "src/FanMain.cpp",
                    "line": 70,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Nit: as a general comment with respect to `compatibilityPath`, `compatibilityNode` and `compatibilityString` I think we should `s/compatibility/compatible/` so the variable names align with the actual attribute name."
                },
                {
                    "file": "src/FanMain.cpp",
                    "line": 70,
                    "reviewer": {
                        "name": "Christopher Sides",
                        "email": "christopher.sides@hpe.com",
                        "username": "csides-hpe"
                    },
                    "message": "Ack"
                },
                {
                    "file": "src/FanMain.cpp",
                    "line": 71,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Nit: `compatibleStream` ?"
                },
                {
                    "file": "src/FanMain.cpp",
                    "line": 71,
                    "reviewer": {
                        "name": "Christopher Sides",
                        "email": "christopher.sides@hpe.com",
                        "username": "csides-hpe"
                    },
                    "message": "Ack"
                },
                {
                    "file": "src/FanMain.cpp",
                    "line": 73,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Bit of a nit, but can we un-nest the body by inverting the branch condition?\n\n```\nif (!compatibilityNode.is_open())\n{\n    std::cerr << \"Error opening \" << compatibilityPath << \"\\n\";\n    return FanTypes::i2c; // Should this throw an exception instead?\n}\n\nstd::string compatibilityString;\nwhile (compatibilityNode.peek() != EOF)\n{\n...\n}\n\nreturn FanTypes::i2c;\n```"
                },
                {
                    "file": "src/FanMain.cpp",
                    "line": 73,
                    "reviewer": {
                        "name": "Christopher Sides",
                        "email": "christopher.sides@hpe.com",
                        "username": "csides-hpe"
                    },
                    "message": "Ack"
                },
                {
                    "file": "src/FanMain.cpp",
                    "line": 73,
                    "reviewer": {
                        "name": "Christopher Sides",
                        "email": "christopher.sides@hpe.com",
                        "username": "csides-hpe"
                    },
                    "message": "> Ack"
                },
                {
                    "file": "src/FanMain.cpp",
                    "line": 82,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Nit: We could make this less noisy as just `compatibleString.pop_back()`"
                },
                {
                    "file": "src/FanMain.cpp",
                    "line": 82,
                    "reviewer": {
                        "name": "Christopher Sides",
                        "email": "christopher.sides@hpe.com",
                        "username": "csides-hpe"
                    },
                    "message": "Ack"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "src/FanMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 28,
                    "deletions": -7
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 7
        },
        {
            "number": 8,
            "revision": "450b1e88a0c306e1ed4eef7905904e2f979e90a9",
            "parents": [
                "3fce1bf44e13b339d2d13eb0063858761cb512ed"
            ],
            "ref": "refs/changes/06/62006/8",
            "uploader": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "createdOn": 1680794868,
            "author": {
                "name": "Chris Sides",
                "email": "Christopher.Sides@hpe.com",
                "username": ""
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "src/FanMain.cpp",
                    "line": 77,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "change this to \nif (compatibleStream)\n{\n\n}\nelse\n{\n  return FanTypes::i2c;\n}"
                },
                {
                    "file": "src/FanMain.cpp",
                    "line": 77,
                    "reviewer": {
                        "name": "Christopher Sides",
                        "email": "christopher.sides@hpe.com",
                        "username": "csides-hpe"
                    },
                    "message": "The conditional here was inverted in response to Andrew J's comment @ line 73: https://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/62006/7..8/src/FanMain.cpp#b73\n\nShould I switch over to the above-suggested format instead?\n\nAlso worth noting- this section of code has another change (also suggested by Andrew @ https://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/62008/2..4/src/FanMain.cpp#b97 ) applied to it in a 'child' update that's also in review @ https://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/62008"
                },
                {
                    "file": "src/FanMain.cpp",
                    "line": 77,
                    "reviewer": {
                        "name": "Christopher Sides",
                        "email": "christopher.sides@hpe.com",
                        "username": "csides-hpe"
                    },
                    "message": "Update: I've separated out the code for the 'std::map' change and the addition of HPE-GXP fan handling into separate reviews.\n\nThe new review for the compatible-check-only changes are now here https://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/62011\n\nwhere \nhttps://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/62008\nis being updated to *only* include the HPE-GXP fantype additions (and will be rebased on the above review soon)"
                },
                {
                    "file": "src/FanMain.cpp",
                    "line": 77,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "Reviewed new patch"
                },
                {
                    "file": "src/FanMain.cpp",
                    "line": 77,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "I prefer early exits but I'll defer to Zhikui who is a much more active maintainer of dbus-sensors than I am."
                },
                {
                    "file": "src/FanMain.cpp",
                    "line": 77,
                    "reviewer": {
                        "name": "Christopher Sides",
                        "email": "christopher.sides@hpe.com",
                        "username": "csides-hpe"
                    },
                    "message": "I'll update the code to \n> if (!compatible)\n\nin the subsequent review (as commented over there). I've already tested that the code works as expected- just need to push it to the right place now."
                },
                {
                    "file": "src/FanMain.cpp",
                    "line": 77,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "I wanted to make it obvious that i2c type if the default fallback type. OK for me with this patch as is. There is a follow up patch to improve."
                },
                {
                    "file": "src/FanMain.cpp",
                    "line": 86,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "should we just look for aspeed?"
                },
                {
                    "file": "src/FanMain.cpp",
                    "line": 86,
                    "reviewer": {
                        "name": "Christopher Sides",
                        "email": "christopher.sides@hpe.com",
                        "username": "csides-hpe"
                    },
                    "message": "If no one has objections, I believe I could switch the check to key off the \"aspeed,\" prefix with little issue."
                },
                {
                    "file": "src/FanMain.cpp",
                    "line": 86,
                    "reviewer": {
                        "name": "Christopher Sides",
                        "email": "christopher.sides@hpe.com",
                        "username": "csides-hpe"
                    },
                    "message": "I'm going to create a separate code review for using prefixes like 'aspeed,' and 'nuvoton,' on top of the std::map code @ https://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/62011\n\nthat way any comments can be made on that change alone. The new review will likely be online tomorrow once I've had time to test that the prefix-only checks work as expected on a test machine."
                },
                {
                    "file": "src/FanMain.cpp",
                    "line": 86,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "Ack"
                },
                {
                    "file": "src/FanMain.cpp",
                    "line": 86,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "I (strongly?) prefer we be explicit about the actual devices we support here, i.e. match against exact compatible strings and not do hazy prefix matching. It makes the intent clear, and it's not hard to add new compatible strings."
                },
                {
                    "file": "src/FanMain.cpp",
                    "line": 86,
                    "reviewer": {
                        "name": "Christopher Sides",
                        "email": "christopher.sides@hpe.com",
                        "username": "csides-hpe"
                    },
                    "message": "It makes sense that if someone wants to support a new fan type, they can just add it here - and doesn't seem like there's a huge, quickly-changing variety of fans at this time...\n\nBut, if there's a call for it (let me know), I'd be happy to submit a separate PR for separate discussion with some simple code that would match to prefixes like \"aspeed,\" only if a more specific string like \"aspeed, xxx\" weren't discovered first."
                },
                {
                    "file": "src/FanMain.cpp",
                    "line": 86,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "Fair point, especially when https://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/62011 put all compatible string in a map."
                },
                {
                    "file": "src/FanMain.cpp",
                    "line": 90,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "should we just look for nuvoton?"
                },
                {
                    "file": "src/FanMain.cpp",
                    "line": 90,
                    "reviewer": {
                        "name": "Christopher Sides",
                        "email": "christopher.sides@hpe.com",
                        "username": "csides-hpe"
                    },
                    "message": "I was initially worried about doing something like this since there are non-fan nuvoton drivers that I assume could come up under /sys/class/hwmon/../compatible - but I think this bit of FanMain.cpp code @ line 273: https://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/62008/4/src/FanMain.cpp#273\n\n>findFiles(fs::path(\"/sys/class/hwmon\"), R\"(fan\\d+_input)\", \n\nmeans that anything without the 'fan#_input' format won't be included in the results that get checked over.\n\nIf folks like the idea of this change, I can make it."
                },
                {
                    "file": "src/FanMain.cpp",
                    "line": 90,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "I am ok with the map change https://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/62008/2..4/src/FanMain.cpp#66"
                },
                {
                    "file": "src/FanMain.cpp",
                    "line": 90,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "> should we just look for nuvoton\n\nSee my reply above."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "src/FanMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 25,
                    "deletions": -7
                }
            ],
            "sizeInsertions": 48,
            "sizeDeletions": 7
        },
        {
            "number": 9,
            "revision": "9a472e8ed1a0da677d2e28446db87b55677b8d83",
            "parents": [
                "e456925b7361c8f95f1a80f510fe0dfff86d026c"
            ],
            "ref": "refs/changes/06/62006/9",
            "uploader": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "createdOn": 1682311954,
            "author": {
                "name": "Chris Sides",
                "email": "Christopher.Sides@hpe.com",
                "username": ""
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "src/FanMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 25,
                    "deletions": -7
                }
            ],
            "sizeInsertions": 48,
            "sizeDeletions": 7
        }
    ]
}