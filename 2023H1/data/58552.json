{
    "project": "openbmc/entity-manager",
    "branch": "master",
    "id": "I7a192681ba851baad1d1aa788dfbed9ac003d78b",
    "number": 58552,
    "subject": "RFC:ThresholdAsserted signal trigger twice",
    "owner": {
        "name": "lintao.lc",
        "email": "lintao.lc@ieisystem.com",
        "username": "lintaoInspur"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/entity-manager/+/58552",
    "hashtags": [],
    "createdOn": 1667890370,
    "lastUpdated": 1676862842,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1667890370,
            "reviewer": {
                "name": "lintao.lc",
                "email": "lintao.lc@ieisystem.com",
                "username": "lintaoInspur"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1667890415,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1667890415,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1667890732,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/54906/ : SUCCESS"
        },
        {
            "timestamp": 1667892790,
            "reviewer": {
                "name": "lintao.lc",
                "email": "lintao.lc@ieisystem.com",
                "username": "lintaoInspur"
            },
            "message": "Uploaded patch set 2: Commit message was updated."
        },
        {
            "timestamp": 1667892802,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1"
        },
        {
            "timestamp": 1667892825,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1667892825,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1667893082,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2:\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/54908/ : SUCCESS"
        },
        {
            "timestamp": 1667901026,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@ieisystem.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1667953497,
            "reviewer": {
                "name": "lintao.lc",
                "email": "lintao.lc@ieisystem.com",
                "username": "lintaoInspur"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1667953536,
            "reviewer": {
                "name": "lintao.lc",
                "email": "lintao.lc@ieisystem.com",
                "username": "lintaoInspur"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1667953549,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1667953549,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1667953791,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/55062/ : SUCCESS"
        },
        {
            "timestamp": 1668387447,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1668563269,
            "reviewer": {
                "name": "lintao.lc",
                "email": "lintao.lc@ieisystem.com",
                "username": "lintaoInspur"
            },
            "message": "Uploaded patch set 4: Commit message was updated."
        },
        {
            "timestamp": 1668563298,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1"
        },
        {
            "timestamp": 1668563386,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1668563391,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1668563628,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4:\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/55439/ : SUCCESS"
        },
        {
            "timestamp": 1668564241,
            "reviewer": {
                "name": "lintao.lc",
                "email": "lintao.lc@ieisystem.com",
                "username": "lintaoInspur"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1668567181,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@ieisystem.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 4: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1668659912,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1668732802,
            "reviewer": {
                "name": "lintao.lc",
                "email": "lintao.lc@ieisystem.com",
                "username": "lintaoInspur"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1676862842,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@ieisystem.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "00365b1a4012bbc47a89ca49e641c21e3ba0139d",
            "parents": [
                "8172db8faf14e08c03f693286716ce6c63ea3d2b"
            ],
            "ref": "refs/changes/52/58552/1",
            "uploader": {
                "name": "lintao.lc",
                "email": "lintao.lc@ieisystem.com",
                "username": "lintaoInspur"
            },
            "createdOn": 1667890370,
            "author": {
                "name": "Tao Lin",
                "email": "lintao.lc@inspur.com",
                "username": ""
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 293,
                    "deletions": 0
                },
                {
                    "file": "src/entity_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 47,
                    "deletions": -19
                }
            ],
            "sizeInsertions": 340,
            "sizeDeletions": 19
        },
        {
            "number": 2,
            "revision": "9413c57ab2fe70c7337026497e05216936caea47",
            "parents": [
                "8172db8faf14e08c03f693286716ce6c63ea3d2b"
            ],
            "ref": "refs/changes/52/58552/2",
            "uploader": {
                "name": "lintao.lc",
                "email": "lintao.lc@ieisystem.com",
                "username": "lintaoInspur"
            },
            "createdOn": 1667892790,
            "author": {
                "name": "Tao Lin",
                "email": "lintao.lc@inspur.com",
                "username": ""
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 14,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@ieisystem.com",
                        "username": "lxwinspur"
                    },
                    "message": "Could you remove unimportant test message?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 14,
                    "reviewer": {
                        "name": "lintao.lc",
                        "email": "lintao.lc@ieisystem.com",
                        "username": "lintaoInspur"
                    },
                    "message": "Done"
                },
                {
                    "file": "src/entity_manager.cpp",
                    "line": 240,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@ieisystem.com",
                        "username": "lxwinspur"
                    },
                    "message": "delete blank line"
                },
                {
                    "file": "src/entity_manager.cpp",
                    "line": 240,
                    "reviewer": {
                        "name": "lintao.lc",
                        "email": "lintao.lc@ieisystem.com",
                        "username": "lintaoInspur"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 302,
                    "deletions": 0
                },
                {
                    "file": "src/entity_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 47,
                    "deletions": -19
                }
            ],
            "sizeInsertions": 349,
            "sizeDeletions": 19
        },
        {
            "number": 3,
            "revision": "2c20f4bdc474c0dc794f789b792e6e615f94b864",
            "parents": [
                "8172db8faf14e08c03f693286716ce6c63ea3d2b"
            ],
            "ref": "refs/changes/52/58552/3",
            "uploader": {
                "name": "lintao.lc",
                "email": "lintao.lc@ieisystem.com",
                "username": "lintaoInspur"
            },
            "createdOn": 1667953497,
            "author": {
                "name": "Tao Lin",
                "email": "lintao.lc@inspur.com",
                "username": ""
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "Thanks for the long, detailed test steps. But without a high level description of why there are two signals, and why making Value only writable fixes the issue, it is hard to review the code change.  Please add high level explanation and also why this will not introduce unwanted side effect."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "lintao.lc",
                        "email": "lintao.lc@ieisystem.com",
                        "username": "lintaoInspur"
                    },
                    "message": "https://github.com/lintaoInspur/EntityManager/blob/master/gerritThresholdAssertedSignalTriggerTwice58552.md"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@ieisystem.com",
                        "username": "lxwinspur"
                    },
                    "message": "\ud83d\udc4d"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "So the issue is caused by the sensor gets destroyed and re-created when the threshold value changes. This patch will \"silently\" update the threshold value. I am wondering if there are other code/packages that depend on the threshold value change signal. \nWas the double signal causing any issues aside from maybe effciency?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "lintao.lc",
                        "email": "lintao.lc@ieisystem.com",
                        "username": "lintaoInspur"
                    },
                    "message": "Double signal impact depends on this signal for logging. record \"WarningAlarmHigh Asserted\" twice. There will only be one \"Deasserted\" log. This will confuse me."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 299,
                    "deletions": 0
                },
                {
                    "file": "src/entity_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 46,
                    "deletions": -19
                }
            ],
            "sizeInsertions": 345,
            "sizeDeletions": 19
        },
        {
            "number": 4,
            "revision": "ac586c79db0ed852582a5abdffaf51ae0a94b21b",
            "parents": [
                "8172db8faf14e08c03f693286716ce6c63ea3d2b"
            ],
            "ref": "refs/changes/52/58552/4",
            "uploader": {
                "name": "lintao.lc",
                "email": "lintao.lc@ieisystem.com",
                "username": "lintaoInspur"
            },
            "createdOn": 1668563269,
            "author": {
                "name": "Tao Lin",
                "email": "lintao.lc@inspur.com",
                "username": ""
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@ieisystem.com",
                        "username": "lxwinspur"
                    },
                    "message": "@Zhikui\nAny comments on this one?"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 335,
                    "deletions": 0
                },
                {
                    "file": "src/entity_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 46,
                    "deletions": -19
                }
            ],
            "sizeInsertions": 381,
            "sizeDeletions": 19
        }
    ]
}