{
    "project": "openbmc/bmcweb",
    "branch": "master",
    "id": "I4fde21da176acf515cf16043106d3990ab5184dc",
    "number": 53592,
    "subject": "Refactor getCollectionMembers for broader use",
    "owner": {
        "name": "John Broadbent",
        "email": "jebr@google.com",
        "username": "jebr224"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/bmcweb/+/53592",
    "commitMessage": "Refactor getCollectionMembers for broader use\n\nSplits getCollectionmember into two functions, and use the inner\nfunction in chassis drives collection.\n\nTested:\n$ wget -qO- http://localhost:18080/redfish/v1/Chassis/DC_SCM/Drives/\n{\n  \"@odata.id\": \"/redfish/v1/Chassis/DC_SCM/Drives\",\n  \"@odata.type\": \"#DriveCollection.DriveCollection\",\n  \"Members\": [\n    {\n      \"@odata.id\": \"/redfish/v1/Chassis/DC_SCM/Drives/mmcblk0\"\n    }\n  ],\n  \"Members@odata.count\": 1,\n  \"Name\": \"Drive Collection\"\n}\n\nSigned-off-by: John Edward Broadbent <jebr@google.com>\nChange-Id: I4fde21da176acf515cf16043106d3990ab5184dc\n",
    "createdOn": 1652138352,
    "lastUpdated": 1652290212,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1652138352,
            "reviewer": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1652138368,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1652138368,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1652138561,
            "reviewer": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "message": "Set Work In Progress"
        },
        {
            "timestamp": 1652139150,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/42855/ : SUCCESS"
        },
        {
            "timestamp": 1652143339,
            "reviewer": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1652143358,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1652143358,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1652144033,
            "reviewer": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "message": "Uploaded patch set 3: Commit message was updated."
        },
        {
            "timestamp": 1652144043,
            "reviewer": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "message": "Set Ready For Review"
        },
        {
            "timestamp": 1652144067,
            "reviewer": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "message": "Set Work In Progress"
        },
        {
            "timestamp": 1652144417,
            "reviewer": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1652144431,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1652144432,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1652144436,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/42866/ : ABORTED"
        },
        {
            "timestamp": 1652144437,
            "reviewer": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "message": "Patch Set 4:\n\nThis change is ready for review."
        },
        {
            "timestamp": 1652145126,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/42870/ : SUCCESS"
        },
        {
            "timestamp": 1652201427,
            "reviewer": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "message": "Set Work In Progress"
        },
        {
            "timestamp": 1652241365,
            "reviewer": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1652241378,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1652241378,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1652241696,
            "reviewer": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "message": "Patch Set 5:\n\n(2 comments)"
        },
        {
            "timestamp": 1652241798,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/43007/ : FAILURE"
        },
        {
            "timestamp": 1652290212,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 5:\n\n(2 comments)"
        }
    ],
    "wip": true,
    "patchSets": [
        {
            "number": 1,
            "revision": "de17c40b5713cef0eef11216096031f0b7f3d0c5",
            "parents": [
                "81c0a4d474189fd93d715d47062d025c9393d120"
            ],
            "ref": "refs/changes/92/53592/1",
            "uploader": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "createdOn": 1652138352,
            "author": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/chassis.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -23
                },
                {
                    "file": "redfish-core/include/utils/collection.hpp",
                    "type": "MODIFIED",
                    "insertions": 39,
                    "deletions": -25
                }
            ],
            "sizeInsertions": 54,
            "sizeDeletions": 48
        },
        {
            "number": 2,
            "revision": "051154c2c4c4ca18f2e1d35fe5f99cd93313ebac",
            "parents": [
                "81c0a4d474189fd93d715d47062d025c9393d120"
            ],
            "ref": "refs/changes/92/53592/2",
            "uploader": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "createdOn": 1652143339,
            "author": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/chassis.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -23
                },
                {
                    "file": "redfish-core/include/utils/collection.hpp",
                    "type": "MODIFIED",
                    "insertions": 39,
                    "deletions": -25
                }
            ],
            "sizeInsertions": 54,
            "sizeDeletions": 48
        },
        {
            "number": 3,
            "revision": "5f3bf7d189a4271a4eb712654a68f81bb28bc778",
            "parents": [
                "81c0a4d474189fd93d715d47062d025c9393d120"
            ],
            "ref": "refs/changes/92/53592/3",
            "uploader": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "createdOn": 1652144033,
            "author": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 27,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/chassis.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -23
                },
                {
                    "file": "redfish-core/include/utils/collection.hpp",
                    "type": "MODIFIED",
                    "insertions": 39,
                    "deletions": -25
                }
            ],
            "sizeInsertions": 69,
            "sizeDeletions": 48
        },
        {
            "number": 4,
            "revision": "b77f57cd0f17cea85a8fb53bb076d858c8471bcc",
            "parents": [
                "81c0a4d474189fd93d715d47062d025c9393d120"
            ],
            "ref": "refs/changes/92/53592/4",
            "uploader": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "createdOn": 1652144417,
            "author": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 27,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/chassis.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -23
                },
                {
                    "file": "redfish-core/include/utils/collection.hpp",
                    "type": "MODIFIED",
                    "insertions": 42,
                    "deletions": -25
                }
            ],
            "sizeInsertions": 72,
            "sizeDeletions": 48
        },
        {
            "number": 5,
            "revision": "e96d15a123472717e20d7a27e2aa3b384099eb90",
            "parents": [
                "26c3451ca2d9d210207f2519f5e557f86e33982e"
            ],
            "ref": "refs/changes/92/53592/5",
            "uploader": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "createdOn": 1652241365,
            "author": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "John Broadbent",
                        "email": "jebr@google.com",
                        "username": "jebr224"
                    },
                    "message": "\"In any moment of decision, the best thing you can do is the right thing, \nthe next best thing is the wrong thing, \nand the worst thing you can do is nothing.\""
                },
                {
                    "file": "redfish-core/include/utils/collection.hpp",
                    "line": 62,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "should probably have cb() make another callback instead of returning the error code.\n\nGetting ec required blocking calls and not sure if we want that."
                },
                {
                    "file": "redfish-core/lib/pcie.hpp",
                    "line": 0,
                    "reviewer": {
                        "name": "John Broadbent",
                        "email": "jebr@google.com",
                        "username": "jebr224"
                    },
                    "message": "callback gathers the results of the dbus call, and is used by the getCollectionMemberCallback to generated the members. \n\nHowever, the callback uses async_method_call, so it is two levels of callback."
                },
                {
                    "file": "redfish-core/lib/pcie.hpp",
                    "line": 47,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "this is not blocking and code will not be return when you return it."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 27,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/pcie.hpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": -38
                },
                {
                    "file": "redfish-core/lib/chassis.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -23
                },
                {
                    "file": "redfish-core/include/utils/collection.hpp",
                    "type": "MODIFIED",
                    "insertions": 68,
                    "deletions": -25
                },
                {
                    "file": "redfish-core/lib/systems.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 115,
            "sizeDeletions": 87
        }
    ]
}