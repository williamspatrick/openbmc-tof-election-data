{
    "project": "openbmc/bmcweb",
    "branch": "master",
    "id": "I305515522af50b48be92a3f4689d8166f3bc0cc0",
    "number": 53823,
    "subject": "health: take json_ptr instead of reference when filling status",
    "owner": {
        "name": "Nan Zhou",
        "email": "nanzhoumails@gmail.com",
        "username": "FighterNan"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/bmcweb/+/53823",
    "commitMessage": "health: take json_ptr instead of reference when filling status\n\nThe existing codes populates the health status on the |AsyncResponse| or\na given JSON reference. This doesn't work if we want to populates status\non an array of objects, since the array can be resized which changes the\naddress of each object.\n\nThis commit changed the contructor to take a JSON pointer instead.\n|HealthPopulate| will populates status on\n|AsyncResponse->res.jsonValue|[json_ptr]. If the point can't be resolved\nin the |jsonValue|, |HealthPopulate| populates nothing.\n\nFixed all places where the old reference based constructor is used.\n\nThis commit is extremely useful when implementing efficient level-1\nexpand handler on ResourceCollections. It also prevents issues on\nreference lifecycles.\n\nTested:\n1. It builds\n2. Tested DIMM/System/Storage health on real hardware, works as expected\n3. Tested on Redfish Service Validator, no new failures on health\nproperties.\n\nSigned-off-by: Nan Zhou <nanzhoumails@gmail.com>\nChange-Id: I305515522af50b48be92a3f4689d8166f3bc0cc0\n",
    "createdOn": 1652988224,
    "lastUpdated": 1653591242,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1652988224,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1652988250,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1652988250,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1652988936,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/43536/ : SUCCESS"
        },
        {
            "timestamp": 1653343626,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1653343652,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1653343652,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1653343674,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/43657/ : FAILURE"
        },
        {
            "timestamp": 1653343773,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Uploaded patch set 3: Patch Set 2 was rebased."
        },
        {
            "timestamp": 1653343806,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1653343806,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1653344494,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/43661/ : SUCCESS"
        },
        {
            "timestamp": 1653346877,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1653349029,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1653355300,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1653411476,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1653411495,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1653411516,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1653411517,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1653412216,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/43730/ : SUCCESS"
        },
        {
            "timestamp": 1653497309,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 4:\n\n(2 comments)"
        },
        {
            "timestamp": 1653501998,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1653502049,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 5: Published edit on patch set 4."
        },
        {
            "timestamp": 1653502054,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1653502060,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1653502060,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1653503225,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/43801/ : FAILURE"
        },
        {
            "timestamp": 1653508696,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 6: Commit message was updated."
        },
        {
            "timestamp": 1653508731,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 7: Published edit on patch set 6."
        },
        {
            "timestamp": 1653508792,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1653508793,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: -Ok-To-Test"
        },
        {
            "timestamp": 1653509776,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/43819/ : SUCCESS"
        },
        {
            "timestamp": 1653510580,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1653510815,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 7:\n\n(2 comments)"
        },
        {
            "timestamp": 1653512836,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 7:\n\n(2 comments)"
        },
        {
            "timestamp": 1653512846,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 8: Commit message was updated."
        },
        {
            "timestamp": 1653516297,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1653521932,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 9: Patch Set 8 was rebased"
        },
        {
            "timestamp": 1653521988,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1653521988,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: -Ok-To-Test"
        },
        {
            "timestamp": 1653522625,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 9:\n\n(1 comment)"
        },
        {
            "timestamp": 1653522660,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 10: Published edit on patch set 9."
        },
        {
            "timestamp": 1653522688,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 10: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1653522688,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 10: -Ok-To-Test"
        },
        {
            "timestamp": 1653522689,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/43857/ : ABORTED"
        },
        {
            "timestamp": 1653522696,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 11: Published edit on patch set 10."
        },
        {
            "timestamp": 1653522714,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 10: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/43858/ : FAILURE"
        },
        {
            "timestamp": 1653522723,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 11: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1653522723,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 11: -Ok-To-Test"
        },
        {
            "timestamp": 1653523420,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 11: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/43859/ : SUCCESS"
        },
        {
            "timestamp": 1653524571,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 11:\n\n(1 comment)"
        },
        {
            "timestamp": 1653591239,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 11: Code-Review+2"
        },
        {
            "timestamp": 1653591242,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Change has been successfully merged"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "4d3a985d36f852e7ac33532bcbccc7c1a7658330",
            "parents": [
                "9ed2ab14b85c4c68361b783c7eae145d71e4521c"
            ],
            "ref": "refs/changes/23/53823/1",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1652988224,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 28,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "type": "MODIFIED",
                    "insertions": 35,
                    "deletions": -9
                }
            ],
            "sizeInsertions": 63,
            "sizeDeletions": 9
        },
        {
            "number": 2,
            "revision": "06c2baeefd590b8434971a9d24bbd6a4591228a5",
            "parents": [
                "bbd2d2c5cb6c11840e7cf3dd39032f4cea5ef080"
            ],
            "ref": "refs/changes/23/53823/2",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1653343626,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 28,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "type": "MODIFIED",
                    "insertions": 35,
                    "deletions": -9
                }
            ],
            "sizeInsertions": 63,
            "sizeDeletions": 9
        },
        {
            "number": 3,
            "revision": "4dbb3759cd4c86a269db44f4bf9787937c77e3ad",
            "parents": [
                "1b918b58554d290de872869e3c57fce6298c6482"
            ],
            "ref": "refs/changes/23/53823/3",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1653343773,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "redfish-core/lib/health.hpp",
                    "line": 42,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Why wouldn't we just fully deprecate the old way?"
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "line": 42,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Oh, for sure I can do this. I leave this constructor since in this way I don't need to modify other codes.\n\nIf you agree with deprecating the old way, I can make it happen"
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "line": 42,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> Oh, for sure I can do this. I leave this constructor since in this way I don't need to modify other codes.\n\nIf the other codes are incorrect, which in this case, they seem to be (we've hit this failure mode before in other contexts) lets just fix all of them.\n\n> \n> If you agree with deprecating the old way, I can make it happen\n\nLets do it."
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "line": 42,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 28,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "type": "MODIFIED",
                    "insertions": 35,
                    "deletions": -9
                }
            ],
            "sizeInsertions": 63,
            "sizeDeletions": 9
        },
        {
            "number": 4,
            "revision": "88598c15dc31a03d07d6ef7cf483630a1d144d0f",
            "parents": [
                "1b918b58554d290de872869e3c57fce6298c6482"
            ],
            "ref": "refs/changes/23/53823/4",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1653411476,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "redfish-core/lib/health.hpp",
                    "line": 41,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "nit, this comment isn't very helpful when attached to the constructor, and the lifetime issue can be seen from the code."
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "line": 41,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Done"
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "line": 71,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Why did this code need to move?"
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "line": 71,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Yes, moving\n\n```\nfor (const std::shared_ptr<HealthPopulate>& healthChild : children)\n{\n  healthChild->globalInventoryPath = globalInventoryPath;\n  healthChild->statuses = statuses;\n}\n```\n\nbefore \"we check existence of JSON ptr\" since we might want to populate children if the parent health object doesn't have to be populated."
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "line": 71,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I'm also not following why we have to check for the existence.  There should only be one source of health for a given object."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 31,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/storage.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -1
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": -10
                },
                {
                    "file": "redfish-core/lib/systems.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 60,
            "sizeDeletions": 13
        },
        {
            "number": 5,
            "revision": "47d873ebd4fb4948a13b7978d261cfa31f7df2cd",
            "parents": [
                "1b918b58554d290de872869e3c57fce6298c6482"
            ],
            "ref": "refs/changes/23/53823/5",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1653502049,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 31,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/storage.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -1
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": -10
                },
                {
                    "file": "redfish-core/lib/systems.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 60,
            "sizeDeletions": 13
        },
        {
            "number": 6,
            "revision": "7a8ab353618baf7ce03cbd55d9cf3b6bf5fb7cf6",
            "parents": [
                "1b918b58554d290de872869e3c57fce6298c6482"
            ],
            "ref": "refs/changes/23/53823/6",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1653508696,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 32,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/storage.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -1
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": -10
                },
                {
                    "file": "redfish-core/lib/systems.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 61,
            "sizeDeletions": 13
        },
        {
            "number": 7,
            "revision": "dd7b68e1e78c8aa71cf521171dbeed325be94b4d",
            "parents": [
                "1b918b58554d290de872869e3c57fce6298c6482"
            ],
            "ref": "refs/changes/23/53823/7",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1653508731,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 26,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "Not sure I would call this Trivial but I see other testing later so I am okay here"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 26,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "The previous patchset where we didn't change any existing code is trivial. \n\nRemoved this comment on the latest patchset."
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "line": 64,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Why is this branch needed now?  This is duplicating the map lookup, so we at a minimum we want to avoid that (you'll notice there are no other uses of nlohmann::json::contains for this reason) but I'm not really following how this could be needed in a way that isn't a bug?"
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "line": 64,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "|statusPtr| is taken from the second constructor, there is no check in constructor wether the pointer is legal or not. Is it safe to trust callers?\n\nPreviously we don't this check since it takes a reference."
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "line": 64,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> |statusPtr| is taken from the second constructor, there is no check in constructor wether the pointer is legal or not. Is it safe to trust callers?\n\nI'm not quite following how a caller could call a safety issue here.  Can you expand on what you mean?\n\noperator[] creates an element if it doesn't already exist, so there's no way that (I think) any value could cause a safety issue here.  If this were a vector, you would be right to check this.\n\n> \n> Previously we don't this check since it takes a reference."
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "line": 64,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Okay, our gap is that \" thought [] will throw an exception if it can't be resolved by reading https://json.nlohmann.me/api/basic_json/operator%5B%5D/#exception-safety\n\n```\nThe function can throw the following exceptions:\nThrows parse_error.106 if an array index in the passed JSON pointer ptr begins with '0'.\nThrows parse_error.109 if an array index in the passed JSON pointer ptr is not a number.\nThrows out_of_range.402 if the array index '-' is used in the passed JSON pointer ptr for the const version.\nThrows out_of_range.404 if the JSON pointer ptr can not be resolved.\n```\n\nI quickly tested it just now. You are right, it creates an object if the key doesn't exist. It even extends the array the index is out of boundary. \n\n```\n  \"test_list\": [\n    1.0,\n    \"test\",\n    null,\n    null,\n    null,\n    null,\n    null,\n    null,\n    null,\n    null,\n    \"123\"\n  ],\n```"
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "line": 64,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Yep, you got it.  Ideally we'd do https://gerrit.openbmc.org/c/openbmc/bmcweb/+/52570\n\nto avoid the exception possibility entirely, but I haven't had a chance to clean that up."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 32,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/storage.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -1
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": -10
                },
                {
                    "file": "redfish-core/lib/systems.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 61,
            "sizeDeletions": 13
        },
        {
            "number": 8,
            "revision": "7413ac728fc737dc65a36fbb849b1aa9850da531",
            "parents": [
                "1b918b58554d290de872869e3c57fce6298c6482"
            ],
            "ref": "refs/changes/23/53823/8",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1653512846,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 32,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/storage.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -1
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": -10
                },
                {
                    "file": "redfish-core/lib/systems.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 61,
            "sizeDeletions": 13
        },
        {
            "number": 9,
            "revision": "ea3879e9699c614139e4219cedeb6fafb71e1d1c",
            "parents": [
                "ef00d7d42cc8f7d90957ab7ca1f678cd531c2cb4"
            ],
            "ref": "refs/changes/23/53823/9",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1653521932,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 32,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/storage.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -1
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": -10
                },
                {
                    "file": "redfish-core/lib/systems.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 61,
            "sizeDeletions": 13
        },
        {
            "number": 10,
            "revision": "23f0258cd60e6945442f9d2de2218c844fb1a2d9",
            "parents": [
                "ef00d7d42cc8f7d90957ab7ca1f678cd531c2cb4"
            ],
            "ref": "refs/changes/23/53823/10",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1653522660,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 32,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/storage.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -1
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -5
                },
                {
                    "file": "redfish-core/lib/systems.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 8
        },
        {
            "number": 11,
            "revision": "dfababfc65fb9f07050070910be0cc015df4fd2c",
            "parents": [
                "ef00d7d42cc8f7d90957ab7ca1f678cd531c2cb4"
            ],
            "ref": "refs/changes/23/53823/11",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1653522696,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 32,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/storage.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -1
                },
                {
                    "file": "redfish-core/lib/health.hpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": -4
                },
                {
                    "file": "redfish-core/lib/systems.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 50,
            "sizeDeletions": 7
        }
    ]
}