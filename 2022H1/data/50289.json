{
    "project": "openbmc/dbus-sensors",
    "branch": "master",
    "id": "Ic9a6e719a8343321f894bc031688a17a3ed7fd67",
    "number": 50289,
    "subject": "Add Softshutdown and Hardshutdown threshold interface",
    "owner": {
        "name": "Jayashree Dhanapal",
        "email": "jayashree-d@hcl.com",
        "username": "Jayashree-D"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/50289",
    "commitMessage": "Add Softshutdown and Hardshutdown threshold interface\n\nAdded threshold interfaces like Softshutdown and Hardshutdown\ninterfaces in dbus-sensors. This is similiar to warning and\ncritical threshold interfaces.\n\nTo enable this Softshutdown and Hardshutdown interfaces, need to\nset the Severity level in EM config. Severity value as 2 for\nSoftshutdown and Severity value as 3 for Hardshutdown.\n\nTESTED: Tested on Facebook YosemiteV2 hardware. Verified the\nHardshutdown and Softshutdown interfaces are created\nand displaying in dbus objects.\n\nSigned-off-by: Jayashree Dhanapal <jayashree-d@hcl.com>\nChange-Id: Ic9a6e719a8343321f894bc031688a17a3ed7fd67\n",
    "createdOn": 1641893341,
    "lastUpdated": 1642489153,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1641893341,
            "reviewer": {
                "name": "Jayashree Dhanapal",
                "email": "jayashree-d@hcl.com",
                "username": "Jayashree-D"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1641893356,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1641893356,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1641893615,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/35261/ : SUCCESS"
        },
        {
            "timestamp": 1641927923,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1641992017,
            "reviewer": {
                "name": "Jayashree Dhanapal",
                "email": "jayashree-d@hcl.com",
                "username": "Jayashree-D"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1641992040,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1641992040,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1641992296,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/35404/ : SUCCESS"
        },
        {
            "timestamp": 1641992424,
            "reviewer": {
                "name": "Jayashree Dhanapal",
                "email": "jayashree-d@hcl.com",
                "username": "Jayashree-D"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1642011269,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2: Code-Review+2"
        },
        {
            "timestamp": 1642011275,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Change has been successfully merged"
        },
        {
            "timestamp": 1642011341,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1642206255,
            "reviewer": {
                "name": "Rashmica K Gupta",
                "email": "rashmica@linux.ibm.com",
                "username": "RashmicaG"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1642206675,
            "reviewer": {
                "name": "Rashmica K Gupta",
                "email": "rashmica@linux.ibm.com",
                "username": "RashmicaG"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1642489153,
            "reviewer": {
                "name": "Jayashree Dhanapal",
                "email": "jayashree-d@hcl.com",
                "username": "Jayashree-D"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "6974c1c86bdd76d69a448888eac03680ff7203b6",
            "parents": [
                "3ec41c53ac70b69b023d7ed92bd2908104d7cdf4"
            ],
            "ref": "refs/changes/89/50289/1",
            "uploader": {
                "name": "Jayashree Dhanapal",
                "email": "jayashree-d@hcl.com",
                "username": "Jayashree-D"
            },
            "createdOn": 1641893341,
            "author": {
                "name": "Jayashree Dhanapal",
                "email": "jayashree-d@hcl.com",
                "username": "Jayashree-D"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "src/Thresholds.cpp",
                    "line": 20,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This looks like it's only really used for a check here, and is being compared against both level and direction?\n\nhttps://github.com/openbmc/dbus-sensors/blob/5667808ac51d3dbb61829b7e420c56f401d57edf/src/Thresholds.cpp#L130\n\n\nThis looks incorrect, and I don't think should exist at all.  That check should be checking against Level::ERROR, and this variable should be removed entirely.  As-written, this only works because prior to this patch both Direction::ERROR and Level::ERROR so happen to equal 2.  Please clean that up, ideally in a separate patch, but if you want to roll it into this one, that's fine too, but regardless, as written this patchset is incorrect."
                },
                {
                    "file": "src/Thresholds.cpp",
                    "line": 20,
                    "reviewer": {
                        "name": "Jayashree Dhanapal",
                        "email": "jayashree-d@hcl.com",
                        "username": "Jayashree-D"
                    },
                    "message": "> This looks like it's only really used for a check here, and is being compared against both level and direction?\n> \n\nYes\n\n> https://github.com/openbmc/dbus-sensors/blob/5667808ac51d3dbb61829b7e420c56f401d57edf/src/Thresholds.cpp#L130\n> \n> \n> This looks incorrect, and I don't think should exist at all.  That check should be checking against Level::ERROR, and this variable should be removed entirely.  As-written, this only works because prior to this patch both Direction::ERROR and Level::ERROR so happen to equal 2.  Please clean that up, ideally in a separate patch, but if you want to roll it into this one, that's fine too, but regardless, as written this patchset is incorrect.\n\nI have removed the variable and compared directly with the LEVEL::ERROR and Direction::ERROR."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "include/sensor.hpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -3
                },
                {
                    "file": "include/Thresholds.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                },
                {
                    "file": "src/Thresholds.cpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 42,
            "sizeDeletions": 4
        },
        {
            "number": 2,
            "revision": "091c92c0e1b320228abf3385e5284cc14ef20f68",
            "parents": [
                "3ec41c53ac70b69b023d7ed92bd2908104d7cdf4"
            ],
            "ref": "refs/changes/89/50289/2",
            "uploader": {
                "name": "Jayashree Dhanapal",
                "email": "jayashree-d@hcl.com",
                "username": "Jayashree-D"
            },
            "createdOn": 1641992017,
            "author": {
                "name": "Jayashree Dhanapal",
                "email": "jayashree-d@hcl.com",
                "username": "Jayashree-D"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I just realized I merged this a little quickly, considering this exact changeid has only been in review for <48 hours.  Happy to revert and  discuss if anyone sees issues here, but to me the patchset looks pretty trivial to me given the latest round of threshold cleanups."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Rashmica K Gupta",
                        "email": "rashmica@linux.ibm.com",
                        "username": "RashmicaG"
                    },
                    "message": "I thought that PerformanceLoss had the value of 2, and soft/hard shutdown had values 3 and 4? That's what I went off in p-v-s and here https://gerrit.openbmc-project.xyz/c/openbmc/entity-manager/+/48569/6/schemas/legacy.json"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Jayashree Dhanapal",
                        "email": "jayashree-d@hcl.com",
                        "username": "Jayashree-D"
                    },
                    "message": "If \"PerformanceLoss\" is needed for threshold interface, I can submit a new patchset with severity value as 2 for PerformanceLoss."
                },
                {
                    "file": "src/Thresholds.cpp",
                    "line": 569,
                    "reviewer": {
                        "name": "Rashmica K Gupta",
                        "email": "rashmica@linux.ibm.com",
                        "username": "RashmicaG"
                    },
                    "message": "Do we want consistency in the capitalisation?"
                },
                {
                    "file": "src/Thresholds.cpp",
                    "line": 569,
                    "reviewer": {
                        "name": "Jayashree Dhanapal",
                        "email": "jayashree-d@hcl.com",
                        "username": "Jayashree-D"
                    },
                    "message": "Yes, as of now."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "include/sensor.hpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -3
                },
                {
                    "file": "include/Thresholds.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                },
                {
                    "file": "src/Thresholds.cpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 42,
            "sizeDeletions": 6
        }
    ]
}