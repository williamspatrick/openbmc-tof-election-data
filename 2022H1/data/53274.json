{
    "project": "openbmc/openpower-occ-control",
    "branch": "master",
    "id": "I64e5b0fddcabe82e4642e9a3d2eae3232149d51f",
    "number": 53274,
    "subject": "failure to get OCC temp 0",
    "owner": {
        "name": "Sheldon Bailey",
        "email": "baileysh@us.ibm.com",
        "username": "baileysh"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/openpower-occ-control/+/53274",
    "commitMessage": "failure to get OCC temp 0\n\nFailure to get OCC temp 0 as a (temperature is no longer available)\ninstead code gets a file read error with errno = 11 (Resource\ntemporarily unavailable). This will indicate temp is no longer\navailable 0 for Fan Control.\nTested: HW error inject on DIMM to cause OCC to send a temp 0 to BMC.\nSigned-off-by: Sheldon Bailey <baileysh@us.ibm.com>\nChange-Id: I64e5b0fddcabe82e4642e9a3d2eae3232149d51f\n",
    "createdOn": 1651002123,
    "lastUpdated": 1656338464,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1651002123,
            "reviewer": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1651002146,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1651002146,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1651002282,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/41996/ : SUCCESS"
        },
        {
            "timestamp": 1651003343,
            "reviewer": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "message": "Patch Set 2: Commit message was updated."
        },
        {
            "timestamp": 1651003373,
            "reviewer": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "message": "Patch Set 3: Commit message was updated."
        },
        {
            "timestamp": 1651007120,
            "reviewer": {
                "name": "Chris Cain",
                "email": "cjcain@us.ibm.com",
                "username": "cjcain"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1651009221,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1651181704,
            "reviewer": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1651244211,
            "reviewer": {
                "name": "Chris Cain",
                "email": "cjcain@us.ibm.com",
                "username": "cjcain"
            },
            "message": "Patch Set 3: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1651257900,
            "reviewer": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1651257911,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1651257912,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1651258096,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/42355/ : SUCCESS"
        },
        {
            "timestamp": 1651264538,
            "reviewer": {
                "name": "Chris Cain",
                "email": "cjcain@us.ibm.com",
                "username": "cjcain"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1651500994,
            "reviewer": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1651501202,
            "reviewer": {
                "name": "Martha Broyles",
                "username": "marthabroyles"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1651501748,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 4:\n\n(3 comments)"
        },
        {
            "timestamp": 1651595627,
            "reviewer": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "message": "Patch Set 5: Commit message was updated."
        },
        {
            "timestamp": 1651596252,
            "reviewer": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "message": "Patch Set 6: Commit message was updated."
        },
        {
            "timestamp": 1651596326,
            "reviewer": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "message": "Patch Set 7: Commit message was updated."
        },
        {
            "timestamp": 1651596431,
            "reviewer": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "message": "Patch Set 7:\n\n(3 comments)"
        },
        {
            "timestamp": 1651600683,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 7: Code-Review+1"
        },
        {
            "timestamp": 1651612414,
            "reviewer": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "message": "Patch Set 7: Code-Review+2"
        },
        {
            "timestamp": 1651614015,
            "reviewer": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "message": "Change has been successfully rebased and submitted as cd0940b5d35777d7690146692c449c1db86d30d4"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "5a5dca516da45cd2574bd933419a5324d519a2b2",
            "parents": [
                "11fd1314ab630d0f62e3a33e118c18c27d8d3936"
            ],
            "ref": "refs/changes/74/53274/1",
            "uploader": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "createdOn": 1651002123,
            "author": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "occ_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 28,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "304175e72443db54e36d0084cd15faaa4adcf0d2",
            "parents": [
                "11fd1314ab630d0f62e3a33e118c18c27d8d3936"
            ],
            "ref": "refs/changes/74/53274/2",
            "uploader": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "createdOn": 1651003343,
            "author": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "occ_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 28,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "f3caf63dcca9b35ce4fbf9ddaf40828bd70379cf",
            "parents": [
                "11fd1314ab630d0f62e3a33e118c18c27d8d3936"
            ],
            "ref": "refs/changes/74/53274/3",
            "uploader": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "createdOn": 1651003373,
            "author": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "fan control isn't able to check for a '0' and do something special, so I assume a zero is just a low temp that is basically a no-op?\n\nOn witherspoon, an errno 11 would cause the sensor to be removed from dbus so fan control would also ignore it."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "Sheldon Bailey",
                        "email": "baileysh@us.ibm.com",
                        "username": "baileysh"
                    },
                    "message": "Done"
                },
                {
                    "file": "occ_manager.cpp",
                    "line": 836,
                    "reviewer": {
                        "name": "Chris Cain",
                        "email": "cjcain@us.ibm.com",
                        "username": "cjcain"
                    },
                    "message": "Do we still need to run lines 853-859?  You could just set tempValue to 0 here and fall through (the else leg can do the continue)"
                },
                {
                    "file": "occ_manager.cpp",
                    "line": 836,
                    "reviewer": {
                        "name": "Sheldon Bailey",
                        "email": "baileysh@us.ibm.com",
                        "username": "baileysh"
                    },
                    "message": "Done"
                },
                {
                    "file": "occ_manager.cpp",
                    "line": 839,
                    "reviewer": {
                        "name": "Chris Cain",
                        "email": "cjcain@us.ibm.com",
                        "username": "cjcain"
                    },
                    "message": "Wouldn't we want to trace these errors, since they indicate an issue on the BMC side?  If so, we probably would want to throttle (only trace first or something)"
                },
                {
                    "file": "occ_manager.cpp",
                    "line": 839,
                    "reviewer": {
                        "name": "Sheldon Bailey",
                        "email": "baileysh@us.ibm.com",
                        "username": "baileysh"
                    },
                    "message": "So to only get a trace on the first Temp / file that fails read for files (label, fruTypeValue, fault, temp). I am not sure we get any debug help from that.\n\nThere were a couple of other cases that did not have traces in as well.\ntotal I have 9 cases in this function alone that do not have traces.  Only 1 case I thought was alright that it did not have a trace."
                },
                {
                    "file": "occ_manager.cpp",
                    "line": 839,
                    "reviewer": {
                        "name": "Chris Cain",
                        "email": "cjcain@us.ibm.com",
                        "username": "cjcain"
                    },
                    "message": "Yea, I realize there is almost no error tracing.  It's fine without; just mentioned since I usually like to know when stuff starts failing and why."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "occ_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 28,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "d4b2e91a2180c9b79d5299c6fddfece59cb22656",
            "parents": [
                "11fd1314ab630d0f62e3a33e118c18c27d8d3936"
            ],
            "ref": "refs/changes/74/53274/4",
            "uploader": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "createdOn": 1651257900,
            "author": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "since this commit is in this repo, you don't need the name in the message"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Sheldon Bailey",
                        "email": "baileysh@us.ibm.com",
                        "username": "baileysh"
                    },
                    "message": "Done"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 10,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "this has weird wrapping.  let me know if you need help on getting vim (if you use it) to autowrap"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 10,
                    "reviewer": {
                        "name": "Sheldon Bailey",
                        "email": "baileysh@us.ibm.com",
                        "username": "baileysh"
                    },
                    "message": "OK,, re-formated in the gerrit tool directly... I hope that works for you."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "not sure you quite answered my question - Fan control can't do anything special with a '0', so is just treating it as zero degrees C enough?\n\n(also, this sentence doesn't quite read right as it is now)"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "Sheldon Bailey",
                        "email": "baileysh@us.ibm.com",
                        "username": "baileysh"
                    },
                    "message": "Treating the temp as zero is ok. It will not prevent the fans from staying high. and will use the other temps to get the True Fan Speed.  If the other temps go down, then the fans would go down."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "occ_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 28,
            "sizeDeletions": 1
        },
        {
            "number": 5,
            "revision": "14006042d14d40dcf9ba4acd9c5d46dad4072491",
            "parents": [
                "11fd1314ab630d0f62e3a33e118c18c27d8d3936"
            ],
            "ref": "refs/changes/74/53274/5",
            "uploader": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "createdOn": 1651595627,
            "author": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "occ_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 28,
            "sizeDeletions": 1
        },
        {
            "number": 6,
            "revision": "bf3bcb1863da7aa407bd445dbc4a913ebcea3bc0",
            "parents": [
                "11fd1314ab630d0f62e3a33e118c18c27d8d3936"
            ],
            "ref": "refs/changes/74/53274/6",
            "uploader": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "createdOn": 1651596252,
            "author": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "occ_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 28,
            "sizeDeletions": 1
        },
        {
            "number": 7,
            "revision": "2e83b1f5843f1eed6cdb58bde36b7a41af2bfdf1",
            "parents": [
                "11fd1314ab630d0f62e3a33e118c18c27d8d3936"
            ],
            "ref": "refs/changes/74/53274/7",
            "uploader": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "createdOn": 1651596326,
            "author": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "occ_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 29,
            "sizeDeletions": 1
        },
        {
            "number": 8,
            "revision": "cd0940b5d35777d7690146692c449c1db86d30d4",
            "parents": [
                "6d8f37a2c6d6f6b3408e3591f8b08a71e7b90601"
            ],
            "ref": "refs/changes/74/53274/8",
            "uploader": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "createdOn": 1651614015,
            "author": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "occ_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 29,
            "sizeDeletions": 1
        }
    ]
}