{
    "project": "openbmc/phosphor-state-manager",
    "branch": "master",
    "id": "I1dc55ec389e94e6c85aa7031b304f8c4ed15dc71",
    "number": 52152,
    "subject": "discover-system-state: add multi-host support",
    "owner": {
        "name": "PL",
        "email": "potin.lai@quantatw.com",
        "username": "potinlai"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-state-manager/+/52152",
    "commitMessage": "discover-system-state: add multi-host support\n\nAdd HostObjects class to fetch paths of settings d-bus objects under\n/xyz/openbmc_project/control/hostX .\n\nSigned-off-by: Potin Lai <potin.lai@quantatw.com>\nChange-Id: I1dc55ec389e94e6c85aa7031b304f8c4ed15dc71\n",
    "createdOn": 1647827077,
    "lastUpdated": 1648135779,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1647827077,
            "reviewer": {
                "name": "PL",
                "email": "potin.lai@quantatw.com",
                "username": "potinlai"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1647827089,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1647827090,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1647827718,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/39305/ : SUCCESS"
        },
        {
            "timestamp": 1647828404,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1: Code-Review+1"
        },
        {
            "timestamp": 1647868947,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "andrew@geissonator.com",
                "username": "geissonator"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1647933872,
            "reviewer": {
                "name": "PL",
                "email": "potin.lai@quantatw.com",
                "username": "potinlai"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1648041850,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "andrew@geissonator.com",
                "username": "geissonator"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1648085391,
            "reviewer": {
                "name": "PL",
                "email": "potin.lai@quantatw.com",
                "username": "potinlai"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1648085412,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1648085412,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1648085550,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/39599/ : SUCCESS"
        },
        {
            "timestamp": 1648085578,
            "reviewer": {
                "name": "PL",
                "email": "potin.lai@quantatw.com",
                "username": "potinlai"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1648134229,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2: Code-Review+1"
        },
        {
            "timestamp": 1648135776,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "andrew@geissonator.com",
                "username": "geissonator"
            },
            "message": "Patch Set 2: Code-Review+2"
        },
        {
            "timestamp": 1648135779,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "andrew@geissonator.com",
                "username": "geissonator"
            },
            "message": "Change has been successfully rebased and submitted as c328a4cf6100110bdb831637f1e429b6f89ec3d1"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "ad5462dd2d74d0e400701176e2bf81ed25947540",
            "parents": [
                "70f36d8efab3e57f941f1e4eddbffdda84879f0f"
            ],
            "ref": "refs/changes/52/52152/1",
            "uploader": {
                "name": "PL",
                "email": "potin.lai@quantatw.com",
                "username": "potinlai"
            },
            "createdOn": 1647827077,
            "author": {
                "name": "PL",
                "email": "potin.lai@quantatw.com",
                "username": "potinlai"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "settings.hpp",
                    "line": 20,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "andrew@geissonator.com",
                        "username": "geissonator"
                    },
                    "message": "My only concern is that this class was generic in that you could get any setting, and now we've restricted it to this specific object path. But...that's also been our only use case so I'm good if you can just add a note.\n\nCould you add something like this to the class now:\n@note  IMPORTANT: This class only supports settings under the /xyz/openbmc_project/control/hostX object paths\""
                },
                {
                    "file": "settings.hpp",
                    "line": 20,
                    "reviewer": {
                        "name": "PL",
                        "email": "potin.lai@quantatw.com",
                        "username": "potinlai"
                    },
                    "message": "Hi Andrew, I am thinking add new class called HostObjects which inheritance from settings::Objects, so that Objects can keep generic.\n\n```\n// Objects constructor\nObjects(sdbusplus::bus::bus& bus, const Path& path = \"/\");\n\n//HostObjects constructor\nHostObjects(sdbusplus::bus::bus& bus, size_t id): \n  Objects(bus,\n          std::string(\"/xyz/openbmc_project/control/host\") + std::to_string(id))\n{}\n```\n\n\nIs this method looks OK for you? or you prefer just adding comments?"
                },
                {
                    "file": "settings.hpp",
                    "line": 20,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "andrew@geissonator.com",
                        "username": "geissonator"
                    },
                    "message": "Yeah that works too. Whichever option you prefer Potin (either the extra comment in the doc or this inherited object)."
                },
                {
                    "file": "settings.hpp",
                    "line": 20,
                    "reviewer": {
                        "name": "PL",
                        "email": "potin.lai@quantatw.com",
                        "username": "potinlai"
                    },
                    "message": "Got it, I uploaded PS2, please have a check, thank you."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "settings.cpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -2
                },
                {
                    "file": "settings.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -2
                },
                {
                    "file": "service_files/phosphor-discover-system-state@.service",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -4
                },
                {
                    "file": "host_state_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                },
                {
                    "file": "discover_system_state.cpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 28,
            "sizeDeletions": 10
        },
        {
            "number": 2,
            "revision": "3c1047b17a23423e58ae96beea9e473d9d184958",
            "parents": [
                "70f36d8efab3e57f941f1e4eddbffdda84879f0f"
            ],
            "ref": "refs/changes/52/52152/2",
            "uploader": {
                "name": "PL",
                "email": "potin.lai@quantatw.com",
                "username": "potinlai"
            },
            "createdOn": 1648085391,
            "author": {
                "name": "PL",
                "email": "potin.lai@quantatw.com",
                "username": "potinlai"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "settings.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -1
                },
                {
                    "file": "settings.hpp",
                    "type": "MODIFIED",
                    "insertions": 20,
                    "deletions": -3
                },
                {
                    "file": "service_files/phosphor-discover-system-state@.service",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -4
                },
                {
                    "file": "host_state_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -3
                },
                {
                    "file": "discover_system_state.cpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 48,
            "sizeDeletions": 12
        },
        {
            "number": 3,
            "revision": "c328a4cf6100110bdb831637f1e429b6f89ec3d1",
            "parents": [
                "71e538fcec12c65db62cc5c9b02ed4350aa41ad7"
            ],
            "ref": "refs/changes/52/52152/3",
            "uploader": {
                "name": "Andrew Geissler",
                "email": "andrew@geissonator.com",
                "username": "geissonator"
            },
            "createdOn": 1648135779,
            "author": {
                "name": "PL",
                "email": "potin.lai@quantatw.com",
                "username": "potinlai"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "settings.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -1
                },
                {
                    "file": "settings.hpp",
                    "type": "MODIFIED",
                    "insertions": 20,
                    "deletions": -3
                },
                {
                    "file": "service_files/phosphor-discover-system-state@.service",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -4
                },
                {
                    "file": "host_state_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -3
                },
                {
                    "file": "discover_system_state.cpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 48,
            "sizeDeletions": 12
        }
    ]
}