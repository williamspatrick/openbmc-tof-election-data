{
    "project": "openbmc/phosphor-dbus-interfaces",
    "branch": "master",
    "id": "I969090951a2da59c67cea232f212e664a193425c",
    "number": 50045,
    "subject": "Certs: add Interfaces for bulk installation and replacement",
    "owner": {
        "name": "Nan Zhou",
        "email": "nanzhoumails@gmail.com",
        "username": "FighterNan"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-dbus-interfaces/+/50045",
    "commitMessage": "Certs: add Interfaces for bulk installation and replacement\n\nThe corresponding design is in\nhttps://gerrit.openbmc-project.xyz/c/openbmc/docs/+/49317.\n\nSigned-off-by: Nan Zhou <nanzhoumails@gmail.com>\nChange-Id: I969090951a2da59c67cea232f212e664a193425c\n",
    "createdOn": 1640804922,
    "lastUpdated": 1654110298,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1640804922,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1640804937,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1640804979,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Uploaded patch set 2: Commit message was updated."
        },
        {
            "timestamp": 1640805381,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1 Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/33611/ : SUCCESS"
        },
        {
            "timestamp": 1640805565,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1 Ok-To-Test+1 Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/33617/ : SUCCESS"
        },
        {
            "timestamp": 1640806019,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1 Ok-To-Test+1 Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/33622/ : SUCCESS"
        },
        {
            "timestamp": 1640806078,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Removed reviewer OpenBMC CI."
        },
        {
            "timestamp": 1640806216,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/33629/ : SUCCESS"
        },
        {
            "timestamp": 1641412557,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Removed reviewer Ed Tanous."
        },
        {
            "timestamp": 1642629062,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2:\n\n(6 comments)"
        },
        {
            "timestamp": 1642636327,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1642636337,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 3:\n\n(6 comments)"
        },
        {
            "timestamp": 1642636340,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1642636340,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1642636399,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1642636784,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/35804/ : SUCCESS"
        },
        {
            "timestamp": 1642648351,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1642658788,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1642658798,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1642658798,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1642658972,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1642659373,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/35820/ : SUCCESS"
        },
        {
            "timestamp": 1643247673,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1643261745,
            "reviewer": {
                "name": "MARRI DEVENDER RAO",
                "email": "devenrao@in.ibm.com",
                "username": "devenrao"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1643657011,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1643667232,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 4: Code-Review+2"
        },
        {
            "timestamp": 1643667236,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Change has been successfully rebased and submitted as b9dae7bed1789f712a68d09609cc889954a4f86c"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "d1c938db0cb70cd4ea5f3e8d459f059b69f26e1e",
            "parents": [
                "36ed8ad2b40e63eaa0aa8b37a5e6d6d2faa614db"
            ],
            "ref": "refs/changes/45/50045/1",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1640804922,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Certs/meson.build",
                    "type": "MODIFIED",
                    "insertions": 28,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Certs/ReplaceAll/meson.build",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Certs/ReplaceAll.interface.yaml",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Certs/InstallAll/meson.build",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Certs/InstallAll.interface.yaml",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 103,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "3b090f6d2575d83810d828842a5e76f69470f0a2",
            "parents": [
                "36ed8ad2b40e63eaa0aa8b37a5e6d6d2faa614db"
            ],
            "ref": "refs/changes/45/50045/2",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1640804979,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "yaml/xyz/openbmc_project/Certs/InstallAll.interface.yaml",
                    "line": 15,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "object_path"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Certs/InstallAll.interface.yaml",
                    "line": 15,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Done"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Certs/InstallAll.interface.yaml",
                    "line": 15,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Though it is string in the Install interface.\n\nhttps://github.com/openbmc/phosphor-dbus-interfaces/blob/master/yaml/xyz/openbmc_project/Certs/Install.interface.yaml#L18"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Certs/InstallAll.interface.yaml",
                    "line": 15,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Ideally the existing interfaces would be refactored in another commit.  Thanks for doing this one the correct way."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Certs/InstallAll.interface.yaml",
                    "line": 23,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Does there need to be any way to DeleteAll?  I guess the Manager already has Collection.DeleteAll?"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Certs/InstallAll.interface.yaml",
                    "line": 23,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Yes, we plan to use the existing Collection.DeleteAll."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Certs/ReplaceAll.interface.yaml",
                    "line": 1,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Now that I see how this is, does it make sense to have a single interface for Authority?  I guess there is already an Install and Replace interface so you're just following the pattern.  I just expect there aren't many cases where you have one implemented without the other so having them in separate interface probably doesn't do anything useful."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Certs/ReplaceAll.interface.yaml",
                    "line": 1,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Yes. The main reason I split them is to keep consistency with existing pattern. I can change to a single Authority interface if we strongly prefer it."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Certs/ReplaceAll.interface.yaml",
                    "line": 2,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "spelling"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Certs/ReplaceAll.interface.yaml",
                    "line": 2,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Done"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Certs/ReplaceAll.interface.yaml",
                    "line": 6,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "wrap?"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Certs/ReplaceAll.interface.yaml",
                    "line": 6,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Done"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Certs/ReplaceAll.interface.yaml",
                    "line": 11,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "InstallAll returns an array[object_path] for all the new installed certificates, right?  Why doesn't ReplaceAll?"
                },
                {
                    "file": "yaml/xyz/openbmc_project/Certs/ReplaceAll.interface.yaml",
                    "line": 11,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "This is to be aligned with the existing replace interface. I can add a return value if that's preferred. But internally, we don't plan to rely on returned object paths."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Certs/ReplaceAll.interface.yaml",
                    "line": 11,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "It seems like we should make them operate the same way.  Either remove it from InstallAll or add it to RemoveAll (even if the singular ones don't match; I wasn't around to review some of these older interfaces and I haven't forced any refactoring)."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Certs/ReplaceAll.interface.yaml",
                    "line": 11,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Certs/meson.build",
                    "type": "MODIFIED",
                    "insertions": 28,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Certs/ReplaceAll/meson.build",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Certs/ReplaceAll.interface.yaml",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Certs/InstallAll/meson.build",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Certs/InstallAll.interface.yaml",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 106,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "e765c57cc391ab5c91104244ba9a42871d5d187b",
            "parents": [
                "4f703341d9f9b1bf873d3aa93255573e9eb44bfa"
            ],
            "ref": "refs/changes/45/50045/3",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1642636327,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Certs/meson.build",
                    "type": "MODIFIED",
                    "insertions": 28,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Certs/ReplaceAll/meson.build",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Certs/ReplaceAll.interface.yaml",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Certs/InstallAll/meson.build",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Certs/InstallAll.interface.yaml",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 107,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "eb5067c16162370438561b91011046c7e9b8b613",
            "parents": [
                "4f703341d9f9b1bf873d3aa93255573e9eb44bfa"
            ],
            "ref": "refs/changes/45/50045/4",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1642658788,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Any more comments?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Thanks for +1!\n\nIs this change good to go?"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Certs/meson.build",
                    "type": "MODIFIED",
                    "insertions": 28,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Certs/ReplaceAll/meson.build",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Certs/ReplaceAll.interface.yaml",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Certs/InstallAll/meson.build",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Certs/InstallAll.interface.yaml",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 112,
            "sizeDeletions": 0
        },
        {
            "number": 5,
            "revision": "b9dae7bed1789f712a68d09609cc889954a4f86c",
            "parents": [
                "f4d2c113f4c87368780b49080efbb981856d54a4"
            ],
            "ref": "refs/changes/45/50045/5",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1643667236,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Certs/meson.build",
                    "type": "MODIFIED",
                    "insertions": 28,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Certs/ReplaceAll/meson.build",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Certs/ReplaceAll.interface.yaml",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "gen/xyz/openbmc_project/Certs/InstallAll/meson.build",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Certs/InstallAll.interface.yaml",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 112,
            "sizeDeletions": 0
        }
    ]
}