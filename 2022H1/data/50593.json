{
    "project": "openbmc/phosphor-fan-presence",
    "branch": "master",
    "id": "I90bf5de1e79738621e1bd0777bb5921fbace0164",
    "number": 50593,
    "subject": "control:p10bmc:ibm,rainier-4u - Support setting fan floor",
    "owner": {
        "name": "Matthew Barth",
        "email": "barton17pb@gmail.com",
        "username": "msbarth"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-fan-presence/+/50593",
    "commitMessage": "control:p10bmc:ibm,rainier-4u - Support setting fan floor\n\nAdd the supported list of PCIe hot adapter cards(PCIe cards without\ntemperature sensors) that will be used in determining the fan floor\nalong with the current ambient environment and power mode the system is\nin. In addition, include setting the `default_floor` to the floor that\nshould be used when the ambient environment is above 43C.\n\nThis essentially enables full function fan control on the Rainier 4U\nsystem by determining what floor the fans are allowed to decrease down\nto.\n\nChange-Id: I90bf5de1e79738621e1bd0777bb5921fbace0164\nSigned-off-by: Matthew Barth <msbarth@us.ibm.com>\n",
    "createdOn": 1642801037,
    "lastUpdated": 1645741832,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1642801037,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1642801046,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1642801047,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1642801073,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/35930/ : FAILURE"
        },
        {
            "timestamp": 1642801123,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1642801259,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1642801280,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1642801281,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1642801363,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "message": "Removed reviewer Brandon J. Wyman."
        },
        {
            "timestamp": 1642801369,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "message": "Removed reviewer Shawn McCarney."
        },
        {
            "timestamp": 1642801619,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/35931/ : SUCCESS"
        },
        {
            "timestamp": 1642802771,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1642802793,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1642802793,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1642802849,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "message": "Removed reviewer Shawn McCarney."
        },
        {
            "timestamp": 1642802853,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "message": "Removed reviewer Brandon J. Wyman."
        },
        {
            "timestamp": 1642802892,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/35932/ : SUCCESS"
        },
        {
            "timestamp": 1643036403,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1643046247,
            "reviewer": {
                "name": "Derek Howard",
                "email": "derekh@us.ibm.com",
                "username": "derekhoward55"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1643046374,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1643047991,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1643739421,
            "reviewer": {
                "name": "Sheldon Bailey",
                "email": "baileysh@us.ibm.com",
                "username": "baileysh"
            },
            "message": "Patch Set 3: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1644852654,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "message": "Uploaded patch set 4: Patch Set 3 was rebased."
        },
        {
            "timestamp": 1644852670,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1644852671,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1644852768,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/37189/ : SUCCESS"
        },
        {
            "timestamp": 1644873472,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "message": "Uploaded patch set 5: Patch Set 4 was rebased."
        },
        {
            "timestamp": 1644873484,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1644873484,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1644873576,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/37220/ : SUCCESS"
        },
        {
            "timestamp": 1645034510,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "message": "Uploaded patch set 6: Patch Set 5 was rebased."
        },
        {
            "timestamp": 1645034527,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1645034528,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: -Ok-To-Test"
        },
        {
            "timestamp": 1645034622,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/37378/ : SUCCESS"
        },
        {
            "timestamp": 1645035072,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1645035847,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "message": "Patch Set 6: Code-Review+2"
        },
        {
            "timestamp": 1645052307,
            "reviewer": {
                "name": "Brandon J. Wyman",
                "email": "bjwyman@gmail.com",
                "username": "bjwyman"
            },
            "message": "Patch Set 6: Code-Review+1"
        },
        {
            "timestamp": 1645104476,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "message": "Change has been successfully rebased and submitted as 59031d4a50457c44e0eec942f890edc485ba498b"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "2ae5d81d820a30e4a9fd67986478d5d067751a57",
            "parents": [
                "527982a3b243f17c56582484d22994c06048ea86"
            ],
            "ref": "refs/changes/93/50593/1",
            "uploader": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "createdOn": 1642801037,
            "author": {
                "name": "Matthew Barth",
                "email": "msbarth@us.ibm.com",
                "username": ""
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "barton17pb@gmail.com",
                        "username": "msbarth"
                    },
                    "message": "Some adjustments to the floor indexes and/or floor values may be in flight from the thermal team."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/pcie_cards.json",
                    "type": "ADDED",
                    "insertions": 292,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/events.json",
                    "type": "MODIFIED",
                    "insertions": 238,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/zones.json",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 551,
            "sizeDeletions": 1
        },
        {
            "number": 2,
            "revision": "4ac75c024ec73ad432a48e8776a0d53b096d36fb",
            "parents": [
                "527982a3b243f17c56582484d22994c06048ea86"
            ],
            "ref": "refs/changes/93/50593/2",
            "uploader": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "createdOn": 1642801259,
            "author": {
                "name": "Matthew Barth",
                "email": "msbarth@us.ibm.com",
                "username": ""
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/pcie_cards.json",
                    "type": "ADDED",
                    "insertions": 292,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/events.json",
                    "type": "MODIFIED",
                    "insertions": 238,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/zones.json",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 551,
            "sizeDeletions": 1
        },
        {
            "number": 3,
            "revision": "370317186250c99c1dc88fe3ecd8216445e2002d",
            "parents": [
                "527982a3b243f17c56582484d22994c06048ea86"
            ],
            "ref": "refs/changes/93/50593/3",
            "uploader": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "createdOn": 1642802771,
            "author": {
                "name": "Matthew Barth",
                "email": "msbarth@us.ibm.com",
                "username": ""
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/pcie_cards.json",
                    "line": 253,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "this is an NVMe drive, probably don't need it in here?\n\n(also, the pcie slots groups doesn't have the nvme slots anyway)"
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/pcie_cards.json",
                    "line": 253,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "barton17pb@gmail.com",
                        "username": "msbarth"
                    },
                    "message": "But isnt this a pcie connected nvme?\n\nI'm not sure if this will be used on 4U or not, so I defaulted to adding it since it was supported on the prior generation system."
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/pcie_cards.json",
                    "line": 253,
                    "reviewer": {
                        "name": "Sheldon Bailey",
                        "email": "baileysh@us.ibm.com",
                        "username": "baileysh"
                    },
                    "message": "that fell under my NVME part in THERM.\nand they had a PCI Slot index.\nmy testing list\n  0x144D 0xA808 0x1014 0x0637     Poseidon 1  800\n  0x144D 0xA808 0x1014 0x0638     Poseidon 1  1600\n  0x144D 0xA808 0x1014 0x0639     Poseidon 1  3200. <-----\n  0x144D 0xA80A 0x1014 0x068E     Poseidon 2  800GB"
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/pcie_cards.json",
                    "line": 253,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "barton17pb@gmail.com",
                        "username": "msbarth"
                    },
                    "message": "Done\n\nGot confirmation from thermal that Poseidon cards were used to know when nvmes were plugged, which is unnecessary as long as we use nvme drives that support nvme MI which is currently the Samsung nvmes and another that will be added/supported in the future.\n\nRemoved in: https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-fan-presence/+/51186"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/pcie_cards.json",
                    "type": "ADDED",
                    "insertions": 292,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/events.json",
                    "type": "MODIFIED",
                    "insertions": 238,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/zones.json",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 551,
            "sizeDeletions": 1
        },
        {
            "number": 4,
            "revision": "9145480e028e0041b9f1874bc1c0b2cb78986913",
            "parents": [
                "40c89f114424b78c0de993c5b3368efa2b2df64c"
            ],
            "ref": "refs/changes/93/50593/4",
            "uploader": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "createdOn": 1644852654,
            "author": {
                "name": "Matthew Barth",
                "email": "msbarth@us.ibm.com",
                "username": ""
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/pcie_cards.json",
                    "type": "ADDED",
                    "insertions": 292,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/events.json",
                    "type": "MODIFIED",
                    "insertions": 238,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/zones.json",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 551,
            "sizeDeletions": 1
        },
        {
            "number": 5,
            "revision": "bf10d83f83873913515e5cad11c64322c63aff77",
            "parents": [
                "a5aa92abe5e6e6ffbe10ad0878a404d608aae2d8"
            ],
            "ref": "refs/changes/93/50593/5",
            "uploader": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "createdOn": 1644873472,
            "author": {
                "name": "Matthew Barth",
                "email": "msbarth@us.ibm.com",
                "username": ""
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/pcie_cards.json",
                    "type": "ADDED",
                    "insertions": 292,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/events.json",
                    "type": "MODIFIED",
                    "insertions": 238,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/zones.json",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 551,
            "sizeDeletions": 1
        },
        {
            "number": 6,
            "revision": "5cffc6a017842714aebbddc9553ddf3cc804343f",
            "parents": [
                "e231a55387d1054a918fb4c90c0ac361d7d0acb7"
            ],
            "ref": "refs/changes/93/50593/6",
            "uploader": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "createdOn": 1645034510,
            "author": {
                "name": "Matthew Barth",
                "email": "msbarth@us.ibm.com",
                "username": ""
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/pcie_cards.json",
                    "type": "ADDED",
                    "insertions": 292,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/events.json",
                    "type": "MODIFIED",
                    "insertions": 238,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/zones.json",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 551,
            "sizeDeletions": 1
        },
        {
            "number": 7,
            "revision": "59031d4a50457c44e0eec942f890edc485ba498b",
            "parents": [
                "7c412cd9224408405e5c426a38e06adfc1853d07"
            ],
            "ref": "refs/changes/93/50593/7",
            "uploader": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "createdOn": 1645104476,
            "author": {
                "name": "Matthew Barth",
                "email": "msbarth@us.ibm.com",
                "username": ""
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/pcie_cards.json",
                    "type": "ADDED",
                    "insertions": 292,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/events.json",
                    "type": "MODIFIED",
                    "insertions": 238,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/zones.json",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 551,
            "sizeDeletions": 1
        }
    ]
}