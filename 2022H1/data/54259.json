{
    "project": "openbmc/phosphor-power",
    "branch": "master",
    "id": "I1effbf13f0b2fd234deea96171efa289f9fa2380",
    "number": 54259,
    "subject": "pseq: Create dump on runtime pgood failure",
    "owner": {
        "name": "Jim Wright",
        "email": "jlwright@us.ibm.com",
        "username": "wrightjl1"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-power/+/54259",
    "commitMessage": "pseq: Create dump on runtime pgood failure\n\nCurrently no dump is created when a power good failure occurs at\nruntime. Add the call to create a dump.\n\nSigned-off-by: Jim Wright <jlwright@us.ibm.com>\nChange-Id: I1effbf13f0b2fd234deea96171efa289f9fa2380\n",
    "createdOn": 1654264688,
    "lastUpdated": 1654544646,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1654264688,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1654264737,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1654264737,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1654265354,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/44363/ : SUCCESS"
        },
        {
            "timestamp": 1654274020,
            "reviewer": {
                "name": "Mike Capps",
                "email": "mikepcapps@gmail.com",
                "username": "mikecgithub"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1654276043,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1654276570,
            "reviewer": {
                "name": "Mike Capps",
                "email": "mikepcapps@gmail.com",
                "username": "mikecgithub"
            },
            "message": "Patch Set 1: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1654279177,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 1:\n\n(3 comments)"
        },
        {
            "timestamp": 1654305407,
            "reviewer": {
                "name": "Brandon J. Wyman",
                "email": "bjwyman@gmail.com",
                "username": "bjwyman"
            },
            "message": "Patch Set 1: Code-Review+1"
        },
        {
            "timestamp": 1654361461,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1654361475,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1654361475,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1654362085,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/44417/ : SUCCESS"
        },
        {
            "timestamp": 1654362786,
            "reviewer": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "message": "Patch Set 2:\n\n(3 comments)"
        },
        {
            "timestamp": 1654363038,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 2: Code-Review+1"
        },
        {
            "timestamp": 1654544321,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 2: Code-Review+1"
        },
        {
            "timestamp": 1654544643,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 2: Code-Review+2"
        },
        {
            "timestamp": 1654544646,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Change has been successfully merged"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "3a9c9147b3a3e120c286a58187acfa52b435cf55",
            "parents": [
                "ae35ac5df268473bccf115f50824cdef7c6df0bf"
            ],
            "ref": "refs/changes/59/54259/1",
            "uploader": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "createdOn": 1654264688,
            "author": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "phosphor-power-sequencer/src/ucd90320_monitor.cpp",
                    "line": 284,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "In the base class, I noticed it does not create a BMC dump if this is a powerSupplyError.  Do we need to add the same check here?"
                },
                {
                    "file": "phosphor-power-sequencer/src/ucd90320_monitor.cpp",
                    "line": 284,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Good catch.  I updated the base class. I want to call for dump creation anytime the failure is at runtime, whether the power supply error is used or not."
                },
                {
                    "file": "phosphor-power-sequencer/src/ucd90320_monitor.cpp",
                    "line": 315,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "Is your intent to catch this specific exception type and allow others to continue to an outer catch?\n\nWhile you can throw any data type in C++, the root of the built-in exception tree is std::exception.  So that is what people usually catch if they want to catch any exception from an underlying library call."
                },
                {
                    "file": "phosphor-power-sequencer/src/ucd90320_monitor.cpp",
                    "line": 315,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Done"
                },
                {
                    "file": "phosphor-power-sequencer/src/ucd90320_monitor.cpp",
                    "line": 323,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "Might help to document what is special about 84 and why it must be handled differently.  It seems like you are printing all 84 but are providing better labels?"
                },
                {
                    "file": "phosphor-power-sequencer/src/ucd90320_monitor.cpp",
                    "line": 323,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "Done, the check is really just to make sure I don't go over the size of the array. I subdivided the pins mostly because is was really hard to count correctly in the set of 84."
                },
                {
                    "file": "phosphor-power-sequencer/src/ucd90320_monitor.cpp",
                    "line": 446,
                    "reviewer": {
                        "name": "Mike Capps",
                        "email": "mikepcapps@gmail.com",
                        "username": "mikecgithub"
                    },
                    "message": "just confirming you no longer want to return here?"
                },
                {
                    "file": "phosphor-power-sequencer/src/ucd90320_monitor.cpp",
                    "line": 446,
                    "reviewer": {
                        "name": "Jim Wright",
                        "email": "jlwright@us.ibm.com",
                        "username": "wrightjl1"
                    },
                    "message": "That's correct. The intent of this change is to continue to set the message / RAIL_NAME (which determines the call outs in the PEL) on the fist fail found, but now continue through the full set of rails to capture all the rails with VOUT fails."
                },
                {
                    "file": "phosphor-power-sequencer/src/ucd90320_monitor.cpp",
                    "line": 446,
                    "reviewer": {
                        "name": "Mike Capps",
                        "email": "mikepcapps@gmail.com",
                        "username": "mikecgithub"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-sequencer/src/ucd90320_monitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 87,
                    "deletions": -39
                },
                {
                    "file": "phosphor-power-sequencer/src/power_interface.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -5
                },
                {
                    "file": "phosphor-power-sequencer/src/power_sequencer_monitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-sequencer/src/power_control.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -3
                },
                {
                    "file": "phosphor-power-sequencer/src/power_control.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -4
                },
                {
                    "file": "phosphor-power-sequencer/src/power_sequencer_monitor.hpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -5
                },
                {
                    "file": "phosphor-power-sequencer/src/power_interface.hpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -12
                },
                {
                    "file": "phosphor-power-sequencer/src/ucd90320_monitor.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 155,
            "sizeDeletions": 69
        },
        {
            "number": 2,
            "revision": "213ffe99299ce6bfcad0f628656757db4ce43e63",
            "parents": [
                "ae35ac5df268473bccf115f50824cdef7c6df0bf"
            ],
            "ref": "refs/changes/59/54259/2",
            "uploader": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "createdOn": 1654361461,
            "author": {
                "name": "Jim Wright",
                "email": "jlwright@us.ibm.com",
                "username": "wrightjl1"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-sequencer/src/ucd90320_monitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 89,
                    "deletions": -41
                },
                {
                    "file": "phosphor-power-sequencer/src/power_interface.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -5
                },
                {
                    "file": "phosphor-power-sequencer/src/power_sequencer_monitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-sequencer/src/power_control.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -3
                },
                {
                    "file": "phosphor-power-sequencer/src/power_control.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -4
                },
                {
                    "file": "phosphor-power-sequencer/src/power_sequencer_monitor.hpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -5
                },
                {
                    "file": "phosphor-power-sequencer/src/power_interface.hpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -12
                },
                {
                    "file": "phosphor-power-sequencer/src/ucd90320_monitor.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 160,
            "sizeDeletions": 71
        }
    ]
}