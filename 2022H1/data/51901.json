{
    "project": "openbmc/dbus-sensors",
    "branch": "master",
    "id": "I60aedb3333991243642057573cbfe6b7c0237a0c",
    "number": 51901,
    "subject": "[Fix]: Override pwm sensor name with PwmName",
    "owner": {
        "email": "sunitax.kumari@linux.intel.com",
        "username": "sunitakx"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/51901",
    "commitMessage": "[Fix]: Override pwm sensor name with PwmName\n\nParse sensor config file, if PwmName is defined,  use it to override the\ndefault PSU Pwm sensor name. If no PwmName is found,\nuse the current Pwm name as default to maintain backwards compatibility.\n\nThis change allows the sensor names be defined solely in the config file,\nremoves config file's dependency of the source code in psusensor.\n\nentity-manager review link\nhttps://gerrit.openbmc-project.xyz/c/openbmc/entity-manager/+/51902\n\nTested:\n\nPwm PSU1 Fan 1   | 0.000      | unspecified | ok    | na\nPwm PSU2 Fan 2   | 0.000      | unspecified | ok    | na\nPwm PSU1 Fan 1   | 0.000      | unspecified | ok    | na\nPwm PSU2 Fan 2   | 0.000      | unspecified | ok    | na\n\nSigned-off-by: Sunita Kumari <sunitax.kumari@intel.com>\nChange-Id: I60aedb3333991243642057573cbfe6b7c0237a0c\n",
    "createdOn": 1646975238,
    "lastUpdated": 1652179225,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1646975238,
            "reviewer": {
                "email": "sunitax.kumari@linux.intel.com",
                "username": "sunitakx"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1646975257,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1646975257,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1646975500,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/38833/ : SUCCESS"
        },
        {
            "timestamp": 1646975758,
            "reviewer": {
                "email": "sunitax.kumari@linux.intel.com",
                "username": "sunitakx"
            },
            "message": "Uploaded patch set 2: Commit message was updated."
        },
        {
            "timestamp": 1647019950,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1647278087,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1648126106,
            "reviewer": {
                "email": "sunitax.kumari@linux.intel.com",
                "username": "sunitakx"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1648126114,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1648126115,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1648126364,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/39632/ : SUCCESS"
        },
        {
            "timestamp": 1648127662,
            "reviewer": {
                "email": "sunitax.kumari@linux.intel.com",
                "username": "sunitakx"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1648127675,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1648127675,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1648127723,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/39636/ : FAILURE"
        },
        {
            "timestamp": 1648127768,
            "reviewer": {
                "email": "sunitax.kumari@linux.intel.com",
                "username": "sunitakx"
            },
            "message": "Uploaded patch set 5: New patch set was added with same tree, parent, and commit message as Patch Set 4."
        },
        {
            "timestamp": 1648127778,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified-1"
        },
        {
            "timestamp": 1648127780,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1648127780,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1648127828,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5:\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/39637/ : FAILURE"
        },
        {
            "timestamp": 1648128354,
            "reviewer": {
                "email": "sunitax.kumari@linux.intel.com",
                "username": "sunitakx"
            },
            "message": "Uploaded patch set 6."
        },
        {
            "timestamp": 1648128365,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1648128365,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: -Ok-To-Test"
        },
        {
            "timestamp": 1648128610,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/39639/ : SUCCESS"
        },
        {
            "timestamp": 1648128784,
            "reviewer": {
                "email": "sunitax.kumari@linux.intel.com",
                "username": "sunitakx"
            },
            "message": "Patch Set 6:\n\n(3 comments)"
        },
        {
            "timestamp": 1648156530,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1648165251,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 6:\n\n(2 comments)"
        },
        {
            "timestamp": 1648190859,
            "reviewer": {
                "email": "sunitax.kumari@linux.intel.com",
                "username": "sunitakx"
            },
            "message": "Uploaded patch set 7."
        },
        {
            "timestamp": 1648190872,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1648190872,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: -Ok-To-Test"
        },
        {
            "timestamp": 1648190878,
            "reviewer": {
                "email": "sunitax.kumari@linux.intel.com",
                "username": "sunitakx"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1648191125,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/39711/ : SUCCESS"
        },
        {
            "timestamp": 1648439397,
            "reviewer": {
                "email": "sunitax.kumari@linux.intel.com",
                "username": "sunitakx"
            },
            "message": "Patch Set 7:\n\n(2 comments)"
        },
        {
            "timestamp": 1648483640,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 7:\n\n(2 comments)"
        },
        {
            "timestamp": 1652179225,
            "reviewer": {
                "name": "Manish Baing",
                "email": "manish.baing@intel.com",
                "username": "manishbaing"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "8f58351e13f6360a120248f3f5879d0c110f82d1",
            "parents": [
                "842e543e8c157f47ed7e2c47bb258596481edb5e"
            ],
            "ref": "refs/changes/01/51901/1",
            "uploader": {
                "email": "sunitax.kumari@linux.intel.com",
                "username": "sunitakx"
            },
            "createdOn": 1646975238,
            "author": {
                "email": "sunitax.kumari@linux.intel.com",
                "username": "sunitakx"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 45,
                    "deletions": 0
                },
                {
                    "file": "src/PSUSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 46,
            "sizeDeletions": 1
        },
        {
            "number": 2,
            "revision": "e21ea03402d42aa9a530fadf8faeebf13c051b2a",
            "parents": [
                "842e543e8c157f47ed7e2c47bb258596481edb5e"
            ],
            "ref": "refs/changes/01/51901/2",
            "uploader": {
                "email": "sunitax.kumari@linux.intel.com",
                "username": "sunitakx"
            },
            "createdOn": 1646975758,
            "author": {
                "email": "sunitax.kumari@linux.intel.com",
                "username": "sunitakx"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "50/72 line breaks please.\n\n\nAlso, please make sure that your commit message documents the \"why\""
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "email": "sunitax.kumari@linux.intel.com",
                        "username": "sunitakx"
                    },
                    "message": "Done"
                },
                {
                    "file": "src/PSUSensorMain.cpp",
                    "line": 285,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This locks users into a naming convention, which we should avoid.  Can we simply remove the hardcoded \"_pwm_\" from this entirely, and inline it into the entity-manager config files where appropriate?"
                },
                {
                    "file": "src/PSUSensorMain.cpp",
                    "line": 285,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "+1, Please fix the issue by removing this dependency.\nAdd pwm sensor name to json file and just get the sensor name from the sensor config."
                },
                {
                    "file": "src/PSUSensorMain.cpp",
                    "line": 285,
                    "reviewer": {
                        "email": "sunitax.kumari@linux.intel.com",
                        "username": "sunitakx"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 45,
                    "deletions": 0
                },
                {
                    "file": "src/PSUSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 46,
            "sizeDeletions": 1
        },
        {
            "number": 3,
            "revision": "3b7d2280e5c6341fc0568f0fec563d0b3092c3cc",
            "parents": [
                "842e543e8c157f47ed7e2c47bb258596481edb5e"
            ],
            "ref": "refs/changes/01/51901/3",
            "uploader": {
                "email": "sunitax.kumari@linux.intel.com",
                "username": "sunitakx"
            },
            "createdOn": 1648126106,
            "author": {
                "email": "sunitax.kumari@linux.intel.com",
                "username": "sunitakx"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "src/PSUSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 34,
            "sizeDeletions": 2
        },
        {
            "number": 4,
            "revision": "352d70db53c3c3f9571caf287b043fcec10e5a81",
            "parents": [
                "842e543e8c157f47ed7e2c47bb258596481edb5e"
            ],
            "ref": "refs/changes/01/51901/4",
            "uploader": {
                "email": "sunitax.kumari@linux.intel.com",
                "username": "sunitakx"
            },
            "createdOn": 1648127662,
            "author": {
                "email": "sunitax.kumari@linux.intel.com",
                "username": "sunitakx"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "src/PSUSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 33,
            "sizeDeletions": 2
        },
        {
            "number": 5,
            "revision": "d6e33cde8bd8940dcd54bbac6ff487ccacc8f988",
            "parents": [
                "842e543e8c157f47ed7e2c47bb258596481edb5e"
            ],
            "ref": "refs/changes/01/51901/5",
            "uploader": {
                "email": "sunitax.kumari@linux.intel.com",
                "username": "sunitakx"
            },
            "createdOn": 1648127768,
            "author": {
                "email": "sunitax.kumari@linux.intel.com",
                "username": "sunitakx"
            },
            "kind": "NO_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "src/PSUSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 33,
            "sizeDeletions": 2
        },
        {
            "number": 6,
            "revision": "25edf7e1b938ccb873c8e90c778e087c5dd63fce",
            "parents": [
                "842e543e8c157f47ed7e2c47bb258596481edb5e"
            ],
            "ref": "refs/changes/01/51901/6",
            "uploader": {
                "email": "sunitax.kumari@linux.intel.com",
                "username": "sunitakx"
            },
            "createdOn": 1648128354,
            "author": {
                "email": "sunitax.kumari@linux.intel.com",
                "username": "sunitakx"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "Override pwm sensor name with PwmName"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "email": "sunitax.kumari@linux.intel.com",
                        "username": "sunitakx"
                    },
                    "message": "Done"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "Parse sensor config file, if PwmName is defined,  use it to override the default PSU Pwm sensor name. If no PwmName is found, use the current Pwm name as default to maintain backwards compatibility.\n\nThis change allows the sensor names be defined solely in the config file, removes config file's dependency of the source code in psusensor."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "email": "sunitax.kumari@linux.intel.com",
                        "username": "sunitakx"
                    },
                    "message": "Done"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "email": "sunitax.kumari@linux.intel.com",
                        "username": "sunitakx"
                    },
                    "message": "addressed all comments"
                },
                {
                    "file": "src/PSUSensorMain.cpp",
                    "line": 506,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "Please use this inline function https://github.com/openbmc/dbus-sensors/blob/master/include/Utils.hpp#L46"
                },
                {
                    "file": "src/PSUSensorMain.cpp",
                    "line": 506,
                    "reviewer": {
                        "email": "sunitax.kumari@linux.intel.com",
                        "username": "sunitakx"
                    },
                    "message": "Ack"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "src/PSUSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 33,
            "sizeDeletions": 2
        },
        {
            "number": 7,
            "revision": "fc234078fc297a3cee7500f1c3e5637feb1a11e3",
            "parents": [
                "842e543e8c157f47ed7e2c47bb258596481edb5e"
            ],
            "ref": "refs/changes/01/51901/7",
            "uploader": {
                "email": "sunitax.kumari@linux.intel.com",
                "username": "sunitakx"
            },
            "createdOn": 1648190859,
            "author": {
                "email": "sunitax.kumari@linux.intel.com",
                "username": "sunitakx"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "Please format it better - 2nd line can be longer."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 14,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "Sorry, I know this is what I suggested last time. Reading it again seems not very clear. Maybe this is better:\n\nPhosphor-Pid-Control requires PidZone output sensor name matches the Pwm sensor name created by psusensor service. This change allows config file to define the pwm sensor name used by psusensor service."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 24,
                    "reviewer": {
                        "name": "Manish Baing",
                        "email": "manish.baing@intel.com",
                        "username": "manishbaing"
                    },
                    "message": "Trying to map above output with your commit message \n\"Override pwm sensor name with PwmName \"\nCould please point which is pwm sensor and PwmName respectively here ..?"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 27,
                    "deletions": 0
                },
                {
                    "file": "src/PSUSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 36,
            "sizeDeletions": 2
        }
    ]
}