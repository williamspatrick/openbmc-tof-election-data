{
    "project": "openbmc/sdbusplus",
    "branch": "master",
    "id": "Idcb7b9841cc0253f2f7d5552dae540fba5ad488d",
    "number": 50244,
    "subject": "utility: add merge_variants_t",
    "owner": {
        "name": "Paul Fertser",
        "email": "fercerpav@gmail.com",
        "username": "paulfertser"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/sdbusplus/+/50244",
    "commitMessage": "utility: add merge_variants_t\n\nThis type is useful for processing D-Bus messages containing information\nfor multiple interfaces. For doing sdbusplus::message::message::read()\non them one needs to define an std::variant which would be a combination\nof all the PropertiesVariant's involved.\n\nSigned-off-by: Paul Fertser <fercerpav@gmail.com>\nChange-Id: Idcb7b9841cc0253f2f7d5552dae540fba5ad488d\n",
    "createdOn": 1641813786,
    "lastUpdated": 1642627530,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1641813786,
            "reviewer": {
                "name": "Paul Fertser",
                "email": "fercerpav@gmail.com",
                "username": "paulfertser"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1641813796,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1641813796,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1641814464,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/35162/ : SUCCESS"
        },
        {
            "timestamp": 1641814621,
            "reviewer": {
                "name": "Paul Fertser",
                "email": "fercerpav@gmail.com",
                "username": "paulfertser"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1642046566,
            "reviewer": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "message": "Patch Set 1: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1642066974,
            "reviewer": {
                "name": "Paul Fertser",
                "email": "fercerpav@gmail.com",
                "username": "paulfertser"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1642067611,
            "reviewer": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1642196602,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1642198633,
            "reviewer": {
                "name": "Paul Fertser",
                "email": "fercerpav@gmail.com",
                "username": "paulfertser"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1642524944,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1: Code-Review+2\n\n(1 comment)"
        },
        {
            "timestamp": 1642524951,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Change has been successfully rebased and submitted as 5770f51a37b8b76255b68ec5b3d471614ee9752c"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "2b22fda8fee6deda3fcf5e49676b1fdf0f34e6b7",
            "parents": [
                "6adfe948ee55ffde8457047042d0d55aa3d8b4a7"
            ],
            "ref": "refs/changes/44/50244/1",
            "uploader": {
                "name": "Paul Fertser",
                "email": "fercerpav@gmail.com",
                "username": "paulfertser"
            },
            "createdOn": 1641813786,
            "author": {
                "name": "Paul Fertser",
                "email": "fercerpav@gmail.com",
                "username": "paulfertser"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Paul Fertser",
                        "email": "fercerpav@gmail.com",
                        "username": "paulfertser"
                    },
                    "message": "Hello,\nAn example of how this can be useful: https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-dbus-monitor/+/50245"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Lei YU",
                        "email": "yulei.sh@bytedance.com",
                        "username": "mine260309"
                    },
                    "message": "It could be better to add some example code as well."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Paul Fertser",
                        "email": "fercerpav@gmail.com",
                        "username": "paulfertser"
                    },
                    "message": "> It could be better to add some example code as well.\n\nTo add example code to the doxygen comments? An example like I added to the tests or an example like in https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-dbus-monitor/+/50245 ? For the reference, this change is the result of this discussion: https://lore.kernel.org/openbmc/YcSZlt4HPeBO3sL3@home.paul.comp/T/#u , I just implemented Patrick's idea."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Lei YU",
                        "email": "yulei.sh@bytedance.com",
                        "username": "mine260309"
                    },
                    "message": "I mean to add some examples in sdbusplus/example to show the usage.\nBut I'm OK with current status as well because the test already shows the usage."
                },
                {
                    "file": "include/sdbusplus/utility/merge_variants.hpp",
                    "line": 25,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Something doesn't feel right about this.  How do we ever end up with this and how do you know it shouldn't be merged in?\n\nI would have expected the base-case to be merge_variants<T> only."
                },
                {
                    "file": "include/sdbusplus/utility/merge_variants.hpp",
                    "line": 25,
                    "reviewer": {
                        "name": "Paul Fertser",
                        "email": "fercerpav@gmail.com",
                        "username": "paulfertser"
                    },
                    "message": "I'm not sure about the terminology but I'd say if the template gets two or more arguments then it would be matched by the specialization below. But if it gets just one, \"Unused\" is going to be an empty parameter pack so it's clear there's nothing left to merge. Same as in https://github.com/openbmc/sdbusplus/blob/master/include/sdbusplus/utility/dedup_variant.hpp#L24 . Since we need this base case to be referenced from another template which is passing a parameter pack there, we need to accept a parameter pack too, even though it always gets just an empty one. I'm very far from being a C++ expert but I couldn't make it compile without \"Unused\", and that's my best explanation."
                },
                {
                    "file": "include/sdbusplus/utility/merge_variants.hpp",
                    "line": 25,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Ack"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "include/sdbusplus/utility/merge_variants.hpp",
                    "type": "ADDED",
                    "insertions": 59,
                    "deletions": 0
                },
                {
                    "file": "test/utility/type_traits.cpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 84,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "5770f51a37b8b76255b68ec5b3d471614ee9752c",
            "parents": [
                "69f5b901cdbac64df0030669379e148f5e8d44fe"
            ],
            "ref": "refs/changes/44/50244/2",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1642524951,
            "author": {
                "name": "Paul Fertser",
                "email": "fercerpav@gmail.com",
                "username": "paulfertser"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "include/sdbusplus/utility/merge_variants.hpp",
                    "type": "ADDED",
                    "insertions": 59,
                    "deletions": 0
                },
                {
                    "file": "test/utility/type_traits.cpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 84,
            "sizeDeletions": 0
        }
    ]
}