{
    "project": "openbmc/openpower-vpd-parser",
    "branch": "master",
    "id": "Ibaf9785314ca3920072663d52fffecfca28c9445",
    "number": 50614,
    "subject": "Fix HW Keyword Handling",
    "owner": {
        "name": "Santosh Puranik",
        "email": "santosh.puranik@in.ibm.com",
        "username": "santoshpuranik"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/openpower-vpd-parser/+/50614",
    "commitMessage": "Fix HW Keyword Handling\n\nThis commit fixes how we handle multiple planar passes.\nFor HW keywords above 2, we do not have an entry in the\nsystem type map.\n\nWe cannot keep adding a new entry to the system type to dev.\ntree map every time we get a new planar pass (when the new pass\ndoes not need a new device tree).\n\nThis commit makes use of existing code that handles\nconstraints in the systems JSON and enables us to default\nto a system type (which is basically our JSON name) when the\nconstraint is not met.\n\nTested:\nTested on a pass 4 planar and ensured we load the right device\ntree.\n\nSigned-off-by: Santosh Puranik <santosh.puranik@in.ibm.com>\nChange-Id: Ibaf9785314ca3920072663d52fffecfca28c9445\n",
    "createdOn": 1643036422,
    "lastUpdated": 1643363439,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1643036422,
            "reviewer": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik@in.ibm.com",
                "username": "santoshpuranik"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1643036434,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1643036434,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1643036684,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/35968/ : SUCCESS"
        },
        {
            "timestamp": 1643041347,
            "reviewer": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik@in.ibm.com",
                "username": "santoshpuranik"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1643041358,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1643041358,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1643041367,
            "reviewer": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik@in.ibm.com",
                "username": "santoshpuranik"
            },
            "message": "Set Ready For Review"
        },
        {
            "timestamp": 1643041534,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/35975/ : SUCCESS"
        },
        {
            "timestamp": 1643089692,
            "reviewer": {
                "name": "SunnySrivastava",
                "email": "sunnsr25@in.ibm.com",
                "username": "SunnySrivastava1984"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1643105384,
            "reviewer": {
                "email": "alpu8007@gmail.com",
                "username": "Alpana07"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1643118699,
            "reviewer": {
                "email": "priyanga24@in.ibm.com",
                "username": "PriyangaRamasamy"
            },
            "message": "Patch Set 2:\n\n(4 comments)"
        },
        {
            "timestamp": 1643121047,
            "reviewer": {
                "email": "alpu8007@gmail.com",
                "username": "Alpana07"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1643282104,
            "reviewer": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik@in.ibm.com",
                "username": "santoshpuranik"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1643282118,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1643282118,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1643282266,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/36150/ : SUCCESS"
        },
        {
            "timestamp": 1643282267,
            "reviewer": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik@in.ibm.com",
                "username": "santoshpuranik"
            },
            "message": "Patch Set 3:\n\n(4 comments)"
        },
        {
            "timestamp": 1643347726,
            "reviewer": {
                "name": "SunnySrivastava",
                "email": "sunnsr25@in.ibm.com",
                "username": "SunnySrivastava1984"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1643360457,
            "reviewer": {
                "email": "alpu8007@gmail.com",
                "username": "Alpana07"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1643363430,
            "reviewer": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik@in.ibm.com",
                "username": "santoshpuranik"
            },
            "message": "Patch Set 3: Code-Review+2"
        },
        {
            "timestamp": 1643363439,
            "reviewer": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik@in.ibm.com",
                "username": "santoshpuranik"
            },
            "message": "Change has been successfully merged"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "625b461f3f4ccadec22836431653e0b1cd90ad96",
            "parents": [
                "3723378568ede32203bbbb76f86083db50978803"
            ],
            "ref": "refs/changes/14/50614/1",
            "uploader": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik@in.ibm.com",
                "username": "santoshpuranik"
            },
            "createdOn": 1643036422,
            "author": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik@in.ibm.com",
                "username": "santoshpuranik"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 27,
                    "deletions": 0
                },
                {
                    "file": "const.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -6
                },
                {
                    "file": "ibm_vpd_app.cpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": -40
                }
            ],
            "sizeInsertions": 41,
            "sizeDeletions": 46
        },
        {
            "number": 2,
            "revision": "760e24d30927589686051e784f7fc3129c6db3ca",
            "parents": [
                "3723378568ede32203bbbb76f86083db50978803"
            ],
            "ref": "refs/changes/14/50614/2",
            "uploader": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik@in.ibm.com",
                "username": "santoshpuranik"
            },
            "createdOn": 1643041347,
            "author": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik@in.ibm.com",
                "username": "santoshpuranik"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "email": "priyanga24@in.ibm.com",
                        "username": "PriyangaRamasamy"
                    },
                    "message": "ok. so just confirming, if a new pass planar needs a new device tree, only then we add the entry to both systems json and devTreeToSystemTypeMap right?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "email": "alpu8007@gmail.com",
                        "username": "Alpana07"
                    },
                    "message": "Right."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik@in.ibm.com",
                        "username": "santoshpuranik"
                    },
                    "message": "Yes"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 15,
                    "reviewer": {
                        "email": "priyanga24@in.ibm.com",
                        "username": "PriyangaRamasamy"
                    },
                    "message": "Query: In what case we'll get a new pass planar without a need for device tree?\nWhat kind of change has happened in that planar?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 15,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik@in.ibm.com",
                        "username": "santoshpuranik"
                    },
                    "message": "Could be several things, such as the systems team replacing a chip with another without it causing any wiring/address changes on the board. Or it could simply be things the BMC does not control and hence its device treed does not care about."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "email": "alpu8007@gmail.com",
                        "username": "Alpana07"
                    },
                    "message": "please answer these questions."
                },
                {
                    "file": "ibm_vpd_app.cpp",
                    "line": 676,
                    "reviewer": {
                        "email": "alpu8007@gmail.com",
                        "username": "Alpana07"
                    },
                    "message": "2 questions-\n1. why we moved it inside from line 43. ?\n2. These const definition you have deleted from const.h but here using them,?"
                },
                {
                    "file": "ibm_vpd_app.cpp",
                    "line": 676,
                    "reviewer": {
                        "email": "priyanga24@in.ibm.com",
                        "username": "PriyangaRamasamy"
                    },
                    "message": "@alpana\n2. Santosh has edited the values in const.hpp (not deleted it)\n1. I think, no use in having the map as global. thats why he moved."
                },
                {
                    "file": "ibm_vpd_app.cpp",
                    "line": 676,
                    "reviewer": {
                        "email": "alpu8007@gmail.com",
                        "username": "Alpana07"
                    },
                    "message": "+1"
                },
                {
                    "file": "ibm_vpd_app.cpp",
                    "line": 676,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik@in.ibm.com",
                        "username": "santoshpuranik"
                    },
                    "message": "Whatever Priyanga said."
                },
                {
                    "file": "ibm_vpd_app.cpp",
                    "line": 1355,
                    "reviewer": {
                        "name": "SunnySrivastava",
                        "email": "sunnsr25@in.ibm.com",
                        "username": "SunnySrivastava1984"
                    },
                    "message": "Extra line."
                },
                {
                    "file": "ibm_vpd_app.cpp",
                    "line": 1355,
                    "reviewer": {
                        "email": "priyanga24@in.ibm.com",
                        "username": "PriyangaRamasamy"
                    },
                    "message": "+1"
                },
                {
                    "file": "ibm_vpd_app.cpp",
                    "line": 1355,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik@in.ibm.com",
                        "username": "santoshpuranik"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 27,
                    "deletions": 0
                },
                {
                    "file": "const.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -6
                },
                {
                    "file": "ibm_vpd_app.cpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -41
                }
            ],
            "sizeInsertions": 42,
            "sizeDeletions": 47
        },
        {
            "number": 3,
            "revision": "e5f177a5f08c5dfc9a11770c4270080cee73bd92",
            "parents": [
                "3723378568ede32203bbbb76f86083db50978803"
            ],
            "ref": "refs/changes/14/50614/3",
            "uploader": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik@in.ibm.com",
                "username": "santoshpuranik"
            },
            "createdOn": 1643282104,
            "author": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik@in.ibm.com",
                "username": "santoshpuranik"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 27,
                    "deletions": 0
                },
                {
                    "file": "const.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -6
                },
                {
                    "file": "ibm_vpd_app.cpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": -40
                }
            ],
            "sizeInsertions": 41,
            "sizeDeletions": 46
        }
    ]
}