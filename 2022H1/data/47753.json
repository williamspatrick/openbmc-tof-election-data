{
    "project": "openbmc/docs",
    "branch": "master",
    "topic": "usb-code-update",
    "id": "I04ad3d5f50d619cf6c60d0876c4b0138c0b5298c",
    "number": 47753,
    "subject": "Add USB code update design doc",
    "owner": {
        "name": "George Liu",
        "email": "liuxiwei@inspur.com",
        "username": "lxwinspur"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/docs/+/47753",
    "commitMessage": "Add USB code update design doc\n\nThis doc introduces the proposed design for firmware update via USB.\n\nSigned-off-by: George Liu <liuxiwei@inspur.com>\nChange-Id: I04ad3d5f50d619cf6c60d0876c4b0138c0b5298c\n",
    "createdOn": 1634032431,
    "lastUpdated": 1651293222,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1634032431,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1634069910,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 1:\n\n(3 comments)"
        },
        {
            "timestamp": 1634094110,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1634094214,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 2:\n\n(3 comments)"
        },
        {
            "timestamp": 1634158684,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 2: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1634172091,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1636450510,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1636592173,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Topic set to usb-code-update"
        },
        {
            "timestamp": 1637186024,
            "reviewer": {
                "name": "Bruce Mitchell",
                "email": "bruce.mitchell@linux.vnet.ibm.com",
                "username": "BMC-Bruce"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1637356353,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 3:\n\n(3 comments)"
        },
        {
            "timestamp": 1637561549,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1637561564,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 3:\n\n(4 comments)"
        },
        {
            "timestamp": 1638290592,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1638795602,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 4: Code-Review-1\n\n(10 comments)"
        },
        {
            "timestamp": 1638999880,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 4: -Code-Review\n\n(3 comments)"
        },
        {
            "timestamp": 1639389739,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1639389743,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 4:\n\n(11 comments)"
        },
        {
            "timestamp": 1639428567,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 5: Code-Review+1\n\nDoc describes the requested implementation updates, including having the compile option being enabled by default and having a udev rule that starts a systemd service file."
        },
        {
            "timestamp": 1639614963,
            "reviewer": {
                "name": "Chicago Duan",
                "email": "duanzhijia01@inspur.com",
                "username": "ChicagoDuan"
            },
            "message": "Patch Set 5: Code-Review+1"
        },
        {
            "timestamp": 1639679574,
            "reviewer": {
                "name": "Bruce Mitchell",
                "email": "bruce.mitchell@linux.vnet.ibm.com",
                "username": "BMC-Bruce"
            },
            "message": "Patch Set 5: Code-Review+1\n\nLooks reasonable."
        },
        {
            "timestamp": 1640040013,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 5: Code-Review-1\n\n(10 comments)"
        },
        {
            "timestamp": 1640422005,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 6."
        },
        {
            "timestamp": 1640422012,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 5:\n\n(10 comments)"
        },
        {
            "timestamp": 1641287501,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 7."
        },
        {
            "timestamp": 1641776652,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 7: Code-Review-1\n\n(8 comments)"
        },
        {
            "timestamp": 1641799101,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 8."
        },
        {
            "timestamp": 1641799163,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 8:\n\n(8 comments)"
        },
        {
            "timestamp": 1641863495,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 8: Code-Review-1\n\n(7 comments)"
        },
        {
            "timestamp": 1641954182,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 9."
        },
        {
            "timestamp": 1641954195,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 8:\n\n(7 comments)"
        },
        {
            "timestamp": 1641957799,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 9: Code-Review-1\n\n(3 comments)"
        },
        {
            "timestamp": 1641958315,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 9:\n\n(3 comments)"
        },
        {
            "timestamp": 1641959698,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 9:\n\n(1 comment)"
        },
        {
            "timestamp": 1641965942,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 10."
        },
        {
            "timestamp": 1641965957,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 9:\n\n(1 comment)"
        },
        {
            "timestamp": 1643747055,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 10:\n\n(4 comments)"
        },
        {
            "timestamp": 1644439150,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 10:\n\n(1 comment)"
        },
        {
            "timestamp": 1644499637,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 11."
        },
        {
            "timestamp": 1644499709,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 11:\n\n(3 comments)"
        },
        {
            "timestamp": 1644879721,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 11:\n\n(1 comment)"
        },
        {
            "timestamp": 1645082254,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 11:\n\n(1 comment)"
        },
        {
            "timestamp": 1645102481,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 12."
        },
        {
            "timestamp": 1645144307,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 12: Code-Review-1\n\n(2 comments)"
        },
        {
            "timestamp": 1645146002,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 13."
        },
        {
            "timestamp": 1645146764,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 13: Code-Review-1\n\n(1 comment)"
        },
        {
            "timestamp": 1645146990,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 14."
        },
        {
            "timestamp": 1645147142,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 14:\n\n(3 comments)"
        },
        {
            "timestamp": 1645157748,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 14: Code-Review+1"
        },
        {
            "timestamp": 1645221869,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 14: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1648514448,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 14:\n\n(2 comments)"
        },
        {
            "timestamp": 1651198377,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 14:\n\n(1 comment)"
        },
        {
            "timestamp": 1651198393,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 15: Published edit on patch set 14."
        },
        {
            "timestamp": 1651198400,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 15: Verified+1 Code-Review+2"
        },
        {
            "timestamp": 1651198404,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Change has been successfully rebased and submitted as 46f84ae481e697673a8925d8737f5f2767ab31ac"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "5933abce960294fe2aa2924e3872332f5c3ed037",
            "parents": [
                "7e1776ee0fa3db5bcffcd3fb68c7b546f5d2beec"
            ],
            "ref": "refs/changes/53/47753/1",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1634032431,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 22,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "We can probably add a bit more details on using udev rules. Brad is recommending to follow the implementation done in the hwmon repo."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 22,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Ack"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 34,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "How are security vulnerabilities going to be checked in the USB driver? Not sure that's a requirement. Maybe need more details to understand what the intention is for that sentence."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 34,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Right, This is not within the scope of the current design doc.\nRemoved."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 41,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "Just a bit more details, it'll need to set the RequestedActivation to Active, follow the state of the update, and reboot the BMC once it's done."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 41,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Ack"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "type": "ADDED",
                    "insertions": 46,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 59,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "172cc5bd3e3dc4d7112bbc1848da1354e5b17103",
            "parents": [
                "7e1776ee0fa3db5bcffcd3fb68c7b546f5d2beec"
            ],
            "ref": "refs/changes/53/47753/2",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1634094110,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 10,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "As George mentions, this doc can be updated with additional details as implementation gets started."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 10,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Ack"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "type": "ADDED",
                    "insertions": 62,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 75,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "78a8103d2079aaf4e2314bc671377dabcd5fb49d",
            "parents": [
                "7e1776ee0fa3db5bcffcd3fb68c7b546f5d2beec"
            ],
            "ref": "refs/changes/53/47753/3",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1636450510,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 13,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "\"through\""
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 13,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 32,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "probably \"extract the image\" so that we don't specify the method of uncompression."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 32,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 34,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "I'm going to propose to add that we set the ApplyTime property to OnReset so that the proposed usb code update app does not reboot the BMC after activation, this gives the user an opportunity to remove the key then reset the BMC. This is to avoid unintentional automatic code updates if the bmc were to be rebooted with the usb key still plugged in."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 34,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Ack"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 72,
                    "reviewer": {
                        "name": "Bruce Mitchell",
                        "email": "bruce.mitchell@linux.vnet.ibm.com",
                        "username": "BMC-Bruce"
                    },
                    "message": "nit: I believe a typo it should be firmware"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 72,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "type": "ADDED",
                    "insertions": 75,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 88,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "854beaa4b357a28ed1c20a5b467647170e7e00ec",
            "parents": [
                "7e1776ee0fa3db5bcffcd3fb68c7b546f5d2beec"
            ],
            "ref": "refs/changes/53/47753/4",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1637561549,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 14,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Everything up until this seems uselessly wordy.  We already have a way to do everything you've talked about here.  Just delete this."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 14,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 15,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I think we should avoid this term (out-of-band) here.  In general many people consider everything the BMC does to be the \"out of band\".\n\n\nAll we're proposing is a new way for images to get into the machine, right?  Instead of Redfish or scp?  Simplify this whole paragraph to get to the point then."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 15,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Ack"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 21,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "We don't have any existing code update design to reference?"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 21,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "We can reference the code update architecture doc that describes in order to perform an update, need first to copy the tarball image to the BMC - https://github.com/openbmc/docs/blob/master/architecture/code-update/code-update.md#steps-to-update"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 21,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Ack"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 25,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "This is a design and not a requirement."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 25,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 26,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I have no idea what this means.  Again, avoid 'in-band' and 'out-of-band' because I think you're using them in an entirely different manner than most people interacting with BMCs do.  (I suspect this is IBM terminology, but nobody else uses them in this way.)"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 26,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Yes, this is IBM terminology, and I have updated it."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 30,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Please fix the word wrap through this whole document.  It makes it hard to review."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 30,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Ack"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 31,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Add \"ex.\", right?  This is an example and not a literal?"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 31,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 50,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Everything in the repository should be _enabled_ by default so we get good CI testing.  Disable it in the recipe if you want."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 50,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 63,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "If this is a requirement, put it in the requirements section."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 63,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Ack"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 67,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "I've added a comment in the service-config review to disable the update by disabling the usb code update udev rule by creating a symlink to /dev/null so that we don't have dependencies on the code update repo."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 67,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Ack"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 73,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "This script should not go in /usr/bin.  See the other docs on file locations.\n\nAlso, I really despise this practice of naming files \"foo.sh\".  I don't care that you wrote it in shell, or python, or whatever language you chose.    All you're doing is adding maintenance trouble if we decide to refactor it into another language down the line."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 73,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "This needs updating, the udev rule was changed in favor of starting a service file instead:\nSUBSYSTEM==\"block\", ACTION==\"add\", KERNEL==\"sda1\", ENV{SYSTEMD_WANTS}=\"usb-code-update@sda1\", TAG+=\"systemd\"\nSUBSYSTEM==\"block\", ACTION==\"add\", KERNEL==\"sdb1\", ENV{SYSTEMD_WANTS}=\"usb-code-update@sdb1\", TAG+=\"systemd\""
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 73,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "> This needs updating, the udev rule was changed in favor of starting a service file instead:\n> SUBSYSTEM==\"block\", ACTION==\"add\", KERNEL==\"sda1\", ENV{SYSTEMD_WANTS}=\"usb-code-update@sda1\", TAG+=\"systemd\"\n> SUBSYSTEM==\"block\", ACTION==\"add\", KERNEL==\"sdb1\", ENV{SYSTEMD_WANTS}=\"usb-code-update@sdb1\", TAG+=\"systemd\"\n\nUpdate this udev rule file"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "type": "ADDED",
                    "insertions": 84,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 97,
            "sizeDeletions": 0
        },
        {
            "number": 5,
            "revision": "7453735fb6fb002661d02e09e647709fcc99cc81",
            "parents": [
                "7e1776ee0fa3db5bcffcd3fb68c7b546f5d2beec"
            ],
            "ref": "refs/changes/53/47753/5",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1639389739,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 10,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Do you intend this to be the commit message?  Doesn't seem particularly useful."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 10,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "No, I don't.\n\nSorry, this only applies to the description of the review stage, I will update when the entire design document is fine."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 10,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "> No, I don't.\n> \n> Sorry, this only applies to the description of the review stage, I will update when the entire design document is fine.\n\nUpdated"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 11,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Redfish or scp"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 11,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 20,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "'lack things' ?"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 20,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Updated"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 32,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I think you're missing the [] around the 1 here."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 32,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Yes\uff0c Updated"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 37,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "What happens if there are multiple Activation interfaces (see multi-host / multi-slot design)?  For the A/B BMC images, which one gets Activated?  I don't think you want both of them to be automatically activated?\n\nHow do you know the image update is for the BMC?  Is there a restriction that we're only doing this for the BMC itself?  Can you document that?\n\nIs there any reason we're doing this automatically and not requiring at least an op-panel interaction of some sort?  Is this safe from a security perspective?  Is there any way for a user and/or system designer to disable this automatic update aspect?"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 37,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "> What happens if there are multiple Activation interfaces (see multi-host / multi-slot design)?  For the A/B BMC images, which one gets Activated?  I don't think you want both of them to be automatically activated?\n\nSorry, Maybe I am not following.\nI think this will only activate the currently running BMC image right?\nBecause the Activation interface is created under the `xyz.openbmc_project.Software.BMC.Updater/xxx` path of the `xyz.openbmc_project.Software.BMC.Updater` service, and when we copy `image-bmc` to `/tmp/images`, it will immediately Untar and generate a new path under this service.\n\n> \n> How do you know the image update is for the BMC?  Is there a restriction that we're only doing this for the BMC itself?  Can you document that?\n\nFor the USB Code Update function, there is no restriction on whether the incoming image is BMC or something else. It will be checked when the BMC is upgraded after untar. If it is not a BMC image, the upgrade will fail.\n\n> \n> Is there any reason we're doing this automatically and not requiring at least an op-panel interaction of some sort?  Is this safe from a security perspective?  Is there any way for a user and/or system designer to disable this automatic update aspect?\n\nAs described below, this interaction mode is specially designed.  If we need to disable updates, we can disable this function through redfish.\nlike this: https://gerrit.openbmc-project.xyz/c/openbmc/service-config-manager/+/48780"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 42,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I don't understand how key-removal is related here.  Are you missing something in the design?\n\nWe've already copied the image to /tmp.  You could remove the USB key and the update would still be successful."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 42,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "This is a design scheme. We don\u2019t want to reboot the BMC to complete the upgrade when the USB key is inserted. This will cause unexpected situations, such as the user does not want to upgrade or inserts the USB key by mistake."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 43,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Check line wrap throughout the document."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 43,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Sorry, I don't understand, you mean that is there a spec that each line cannot exceed 80 bytes?"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 43,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Yes."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 43,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 47,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "What is it?  Who is \"the caller\"?"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 47,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "We can enable/disable this function(USB Code Update) via Redfish.\nI have removed these descriptions."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 58,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Shell script?  I don't see any shell script referenced anywhere else."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 58,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Yeah, We have removed the shell script.\nUpdated"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 83,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Suggest dropping this part."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 83,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "type": "ADDED",
                    "insertions": 83,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 96,
            "sizeDeletions": 0
        },
        {
            "number": 6,
            "revision": "bd394d57dd9f3c255983ce9e6e654406ff88a212",
            "parents": [
                "7e1776ee0fa3db5bcffcd3fb68c7b546f5d2beec"
            ],
            "ref": "refs/changes/53/47753/6",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1640422005,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "type": "ADDED",
                    "insertions": 80,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 93,
            "sizeDeletions": 0
        },
        {
            "number": 7,
            "revision": "49e0e4e389865df14f441bcaff8371490c0fc3ef",
            "parents": [
                "7e1776ee0fa3db5bcffcd3fb68c7b546f5d2beec"
            ],
            "ref": "refs/changes/53/47753/7",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1641287501,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Hi George, I have some comments on the structure of the document as well as some queries on your proposals."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 13,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "The first half of the sentence describes the problem. This last half however describes your proposed solution. The solution is not part of the problem definition. So this should be dropped"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 13,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 25,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "There's a lot of discussion of the specifics in this section when IMO it should just be the abstract set of requirements for how the system should behave."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 25,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Ack"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 46,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "This is where the specifics above should be moved."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 46,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Ack"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 70,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Where did the \"Impacts\" and \"Alternatives Considered\" sections go? The purpose of \"Alternatives Considered\" is to to strengthen the argument for your proposal and also head off architectural disagreements in code review. IMO it is essential."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 70,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Ack"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 74,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "This is pretty vague. What exactly are you proposing?"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 74,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "> This is pretty vague. What exactly are you proposing?\n\nFor security checks at the code level, I recommend running a local CI run and analyzing potential vulnerabilities through cppcheck.\n\nRefer: For security checks at the code level, I recommend running a local CI run and analyzing potential vulnerabilities through cppcheck"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 74,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "So I'm asking these questions with the expectation that you'll address them in the documentation. Can you please include the context that you're providing in your response in Gerrit in the document?\n\nRegardless, \"the code layer\" is pretty vague as I said. All of the firmware is just code, from u-boot to the kernel to userspace. I think what you're referring to here is the applications involved, specifically phosphor-software-manager. Is that right?"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 74,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "> So I'm asking these questions with the expectation that you'll address them in the documentation. Can you please include the context that you're providing in your response in Gerrit in the document?\n> \n> Regardless, \"the code layer\" is pretty vague as I said. All of the firmware is just code, from u-boot to the kernel to userspace. I think what you're referring to here is the applications involved, specifically phosphor-software-manager. Is that right?\n\nYes, Updated it"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 77,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "How do you propose this will work?"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 77,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "> How do you propose this will work?\n\nWe need to disable this feature via Redfish, the general logic is to symlink `/etc/udev/rules.d/70-bmc-usb.rules` to `/dev/null`\n\nWhen restoring `/etc/udev/rules.d/70-bmc-usb.rules` will be removed and `/lib/udev/rules.d/70-bmc-usb.rules` will be used\n\nRefer: https://gerrit.openbmc-project.xyz/c/openbmc/service-config-manager/+/48780"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 77,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "The udev rule will prevent the drive from being accessed by the update application but won't prevent the kernel from binding the usb-storage driver to the device. You'd need to blacklist the driver for that to hold. I think you need to be more specific about what behaviour you're after here in the name of security.\n\nIf you're going to talk security we need a threat model to reason against."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 77,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "> The udev rule will prevent the drive from being accessed by the update application but won't prevent the kernel from binding the usb-storage driver to the device. You'd need to blacklist the driver for that to hold. I think you need to be more specific about what behaviour you're after here in the name of security.\n> \n> If you're going to talk security we need a threat model to reason against.\n\n\nFrom the current logic, we can only prevent the update application from accessing the drive through udev rules, and will not touch the USB storage drive.\nSo can I remove the Security column?\nOr do you have any suggestions?"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 77,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "I'm saying if we're going to have discussion about security then we need to know what it is we're trying to secure.\n\nHowever I think things might be confused by your discussion of the \"USB driver\" specifically. I think you instead want to say you want to disable \"USB code update\" if physical security is a concern?"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 77,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "> I'm saying if we're going to have discussion about security then we need to know what it is we're trying to secure.\n> \n> However I think things might be confused by your discussion of the \"USB driver\" specifically. I think you instead want to say you want to disable \"USB code update\" if physical security is a concern?\n\nYes, if it's a physical security issue, we should disable \"USB code update\" via Redfish"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 77,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Right. Can you update the words in the document to reflect that?"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 77,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Ack"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 83,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Can you do this in qemu?"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 83,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "> Can you do this in qemu?\n\nYeah, I think it is possible, we can simulate `/dev/sda1` on qemu and enable the service (systemctl start usb-code-update@sda1.service)"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 83,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Right, so I think you need to put words here saying you'll work on some test scripts to implement this?"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 83,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Ack"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "type": "ADDED",
                    "insertions": 88,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 101,
            "sizeDeletions": 0
        },
        {
            "number": 8,
            "revision": "18a7c2ab68ee886c21fd01a7526e6016c134dd69",
            "parents": [
                "7e1776ee0fa3db5bcffcd3fb68c7b546f5d2beec"
            ],
            "ref": "refs/changes/53/47753/8",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1641799101,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Hi George, thanks for the update. I've still got some questions and comments inline."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Thanks Andrew.\nTBH, I am new to writing design documents \ud83d\ude0a"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 45,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Given we're using udev why does it have to specifically be /run/media/usb/sda1? Why not write the rule so it's generic for any device name?"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 45,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "> Given we're using udev why does it have to specifically be /run/media/usb/sda1? Why not write the rule so it's generic for any device name?\n\n`/run/media/usb` is hard-code, refer: https://github.com/openbmc/phosphor-bmc-code-mgmt/blob/master/usb/usb_manager_main.cpp#L31"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 45,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Oh, sorry, I wasn't clear in what I was asking. What you wrote makes it sound like it's specific to sda1 (the path to the mountpoint, /run/media/usb here, isn't really relevant). The code shouldn't be specific to sda1."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 45,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "> Oh, sorry, I wasn't clear in what I was asking. What you wrote makes it sound like it's specific to sda1 (the path to the mountpoint, /run/media/usb here, isn't really relevant). The code shouldn't be specific to sda1.\n\nOH, Sorry, it is not specific to sda1.\nRefer: https://github.com/openbmc/phosphor-bmc-code-mgmt/blob/master/usb/70-bmc-usb.rules"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 51,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "This is the first time this new daemon is mentioned. What's its purpose? I think it needs more words to describe its role."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 51,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Ack"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 57,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "We can use `DRIVERS==\"usb-storage\"` here instead and make it generic?"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 57,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "> We can use `DRIVERS==\"usb-storage\"` here instead and make it generic?\n\nSorry, USB driver is done by IBM.\n@Adriana, What do you think?"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 57,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "I don't understand. There's nothing that shouldn't work if you replace `KERNEL==\"sda1\"` with `DRIVERS==\"usb-storage\"`. It should just do the right thing automatically without any limitation like is imposed if we use `KERNEL==\"sda1\"`."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 57,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "> I don't understand. There's nothing that shouldn't work if you replace `KERNEL==\"sda1\"` with `DRIVERS==\"usb-storage\"`. It should just do the right thing automatically without any limitation like is imposed if we use `KERNEL==\"sda1\"`.\n\nOkay, Maybe I am not familiar with this, Let me test it, Thanks"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 57,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Agreed.  The choice of 'sda1' is rather restrictive.  You're not certain that the USB will be mounted as that device or if sda1 will contain a vfat file system.  (I don't see any mention of file system here... are you restricting to a particular file system)  On systems with eMMC, I wouldn't be surprised if sda is actually the eMMC device."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 57,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "I confirmed this line in the udev rules file works, needed also the devtype to differentiate the disk sdX from the partition sdX1:\n\nSUBSYSTEM==\"block\", ACTION==\"add\", ENV{ID_USB_DRIVER}==\"usb-storage\", ENV{DEVTYPE}==\"partition\", ENV{SYSTEMD_WANTS}=\"usb-code-update@%k\", TAG+=\"systemd\"\n\nIt removes the dependency on just supporting re-plugging the usb twice, so now even if the usb is plugged a 3rd time and the kernel creates the sdc1 partition the code update is still triggered:\n\nFeb 09 20:34:25 localhost kernel:  sdc: sdc1\nFeb 09 20:34:25 localhost kernel: sd 2:0:0:0: [sdc] Attached SCSI removable disk\nFeb 09 20:34:25 localhost systemd[1]: Started FW Code Update via USB sdc1.\n\nroot@localhost:~# udevadm test -a add $(udevadm info -q path -n /dev/sdc1)\n..\nSYSTEMD_WANTS=usb-code-update@sdc1"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 57,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "This isn't fixed?"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 57,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "> This isn't fixed?\n\nsorry.\nfixed"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "type": "ADDED",
                    "insertions": 91,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 103,
            "sizeDeletions": 0
        },
        {
            "number": 9,
            "revision": "ed156a3ef6e5d41a5b5609483ecaacaba967226f",
            "parents": [
                "7e1776ee0fa3db5bcffcd3fb68c7b546f5d2beec"
            ],
            "ref": "refs/changes/53/47753/9",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1641954182,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "type": "ADDED",
                    "insertions": 93,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 105,
            "sizeDeletions": 0
        },
        {
            "number": 10,
            "revision": "4071a6e993d79d0752df5627a278c8e4464535be",
            "parents": [
                "7e1776ee0fa3db5bcffcd3fb68c7b546f5d2beec"
            ],
            "ref": "refs/changes/53/47753/10",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1641965942,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 29,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Why \"first\"?  How is \"first\" defined?  I would think that you'd want a numeric-sorting \"last\" choice?  Maybe you should only allow a single file to prevent confusion?"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 29,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "> Why \"first\"?  How is \"first\" defined?  I would think that you'd want a numeric-sorting \"last\" choice?  Maybe you should only allow a single file to prevent confusion?\n\nYes, We only allow one file to prevent confusion, so when traversing, we only get the first file with tar extension, which is not necessarily sorted by number."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 29,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "No I don't think this is right. You need to define deterministic behaviour. Please sort the file list first."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 29,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "> No I don't think this is right. You need to define deterministic behaviour. Please sort the file list first.\n\nSure, Thanks @Patrick @Andrew.\nI will update it."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 31,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Can you elaborate on why this is a requirement?"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 31,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "> Can you elaborate on why this is a requirement?\n\n@Adriana explained:\nThe usb code update would not reboot the bmc, so that we don't get into a potential loop if the key is left inserted."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 31,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "That was the simplest first step, a future enhancement could be to create a 'breadcrumb' after usb code update is successful but before reboot, then reboot the bmc, and the usb code update service would check the breadcrump, delete it, and not start."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 31,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Ack"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "type": "ADDED",
                    "insertions": 93,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 105,
            "sizeDeletions": 0
        },
        {
            "number": 11,
            "revision": "19f4aa1915261819b6d307997211de34f9dae8e2",
            "parents": [
                "7e1776ee0fa3db5bcffcd3fb68c7b546f5d2beec"
            ],
            "ref": "refs/changes/53/47753/11",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1644499637,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "type": "ADDED",
                    "insertions": 99,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 111,
            "sizeDeletions": 0
        },
        {
            "number": 12,
            "revision": "db1f994e179911d52f236ed9523f2d23257b7e38",
            "parents": [
                "7e1776ee0fa3db5bcffcd3fb68c7b546f5d2beec"
            ],
            "ref": "refs/changes/53/47753/12",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1645102481,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 29,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "I think this needs to be re-written. How about:\n\n> The first tar file found in the sorted list of files on the USB device is copied to /tmp/images"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 29,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "> I think this needs to be re-written. How about:\n> \n> > The first tar file found in the sorted list of files on the USB device is copied to /tmp/images\n\nThanks\nDone"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "type": "ADDED",
                    "insertions": 99,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 111,
            "sizeDeletions": 0
        },
        {
            "number": 13,
            "revision": "a3d079d7516dd78981cd93afa9e0ea43d3bb12b9",
            "parents": [
                "7e1776ee0fa3db5bcffcd3fb68c7b546f5d2beec"
            ],
            "ref": "refs/changes/53/47753/13",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1645146002,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 61,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "This needs to be %k and we must delete the second rule below. As is the proposed rules still only work for sda1, and break on any other device name (as e.g. sdc1 will cause usb-code-update@sda1 to start)."
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 61,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "> This needs to be %k and we must delete the second rule below. As is the proposed rules still only work for sda1, and break on any other device name (as e.g. sdc1 will cause usb-code-update@sda1 to start).\n\nOops, so sorry, it is my mistake \ud83d\ude1e\nDone"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "type": "ADDED",
                    "insertions": 99,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 111,
            "sizeDeletions": 0
        },
        {
            "number": 14,
            "revision": "8e451bde0612dd978a4217808a44641998549df2",
            "parents": [
                "7e1776ee0fa3db5bcffcd3fb68c7b546f5d2beec"
            ],
            "ref": "refs/changes/53/47753/14",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1645146990,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "@Patrick, Do you have any comments?"
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "line": 31,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "nit: \"complete to\""
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "type": "ADDED",
                    "insertions": 98,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 110,
            "sizeDeletions": 0
        },
        {
            "number": 15,
            "revision": "b5c05cd51bf47c93bca08f1e1876574ca384cba3",
            "parents": [
                "7e1776ee0fa3db5bcffcd3fb68c7b546f5d2beec"
            ],
            "ref": "refs/changes/53/47753/15",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1651198393,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "type": "ADDED",
                    "insertions": 98,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 110,
            "sizeDeletions": 0
        },
        {
            "number": 16,
            "revision": "46f84ae481e697673a8925d8737f5f2767ab31ac",
            "parents": [
                "785a64ff6f07c743361cc2fc208fd53a5bbc2e41"
            ],
            "ref": "refs/changes/53/47753/16",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1651198404,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "designs/firmware-update-via-usb.md",
                    "type": "ADDED",
                    "insertions": 98,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 110,
            "sizeDeletions": 0
        }
    ]
}