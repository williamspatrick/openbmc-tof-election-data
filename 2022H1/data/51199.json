{
    "project": "openbmc/phosphor-power",
    "branch": "master",
    "id": "I349eddb8c052cf238276c832af0dde9e49f6d3f0",
    "number": 51199,
    "subject": "psu-ng: Add Availability support to power supplies",
    "owner": {
        "name": "Matt Spinler",
        "email": "spinler@us.ibm.com",
        "username": "spinler"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-power/+/51199",
    "commitMessage": "psu-ng: Add Availability support to power supplies\n\nAdd support for determining if a power supply is considered 'available'\nor not, and set the Available D-Bus property on the\nxyz.openbmc_project.State.Decorator.Availability interface with the\nresult.\n\nA power supply is considered unavailable if any of the following are\ntrue:\n - it isn't present\n - there is a input fault active\n - there is a Vin UV fault active\n - there is a PS KILL fault active\n - there is a Iout OC fault active\n\nThe latter four faults are the faults where it can't provide good\noutput power, hence the PS is unavailable.  These faults also don't\ncall out the power supply directly, so the Functional property won't\nget set to false, unlike other faults.\n\nThe Available D-Bus property is then able to be used in Redfish\nresponses for the heath and state properties in the power supply\nschema.\n\nSigned-off-by: Matt Spinler <spinler@us.ibm.com>\nChange-Id: I349eddb8c052cf238276c832af0dde9e49f6d3f0\n",
    "createdOn": 1644875564,
    "lastUpdated": 1645557535,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1644875564,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1644875579,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1644875579,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1644875602,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/37228/ : FAILURE"
        },
        {
            "timestamp": 1644875995,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1644876005,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1644876005,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1644876411,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1644876571,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/37229/ : SUCCESS"
        },
        {
            "timestamp": 1644877670,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1644881864,
            "reviewer": {
                "name": "Derek Howard",
                "email": "derekh@us.ibm.com",
                "username": "derekhoward55"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1644882152,
            "reviewer": {
                "name": "Derek Howard",
                "email": "derekh@us.ibm.com",
                "username": "derekhoward55"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1644935557,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1644945809,
            "reviewer": {
                "name": "Derek Howard",
                "email": "derekh@us.ibm.com",
                "username": "derekhoward55"
            },
            "message": "Patch Set 2: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1644946526,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1644950339,
            "reviewer": {
                "name": "Derek Howard",
                "email": "derekh@us.ibm.com",
                "username": "derekhoward55"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1644951289,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1644951507,
            "reviewer": {
                "name": "Derek Howard",
                "email": "derekh@us.ibm.com",
                "username": "derekhoward55"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1645046145,
            "reviewer": {
                "name": "Brandon J. Wyman",
                "email": "bjwyman@gmail.com",
                "username": "bjwyman"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1645046562,
            "reviewer": {
                "name": "Brandon J. Wyman",
                "email": "bjwyman@gmail.com",
                "username": "bjwyman"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1645116252,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1645116489,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1645118221,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1645118221,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1645118230,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1645118230,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1645118798,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/37521/ : SUCCESS"
        },
        {
            "timestamp": 1645119812,
            "reviewer": {
                "name": "Derek Howard",
                "email": "derekh@us.ibm.com",
                "username": "derekhoward55"
            },
            "message": "Patch Set 3: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1645120075,
            "reviewer": {
                "name": "Derek Howard",
                "email": "derekh@us.ibm.com",
                "username": "derekhoward55"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1645124332,
            "reviewer": {
                "name": "Brandon J. Wyman",
                "email": "bjwyman@gmail.com",
                "username": "bjwyman"
            },
            "message": "Patch Set 3:\n\n(4 comments)"
        },
        {
            "timestamp": 1645124434,
            "reviewer": {
                "name": "Brandon J. Wyman",
                "email": "bjwyman@gmail.com",
                "username": "bjwyman"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1645127137,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1645130914,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1645130914,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 4:\n\n(2 comments)"
        },
        {
            "timestamp": 1645130922,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1645130922,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1645130999,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1645131492,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/37580/ : SUCCESS"
        },
        {
            "timestamp": 1645131559,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1645132333,
            "reviewer": {
                "name": "Derek Howard",
                "email": "derekh@us.ibm.com",
                "username": "derekhoward55"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1645134547,
            "reviewer": {
                "name": "Brandon J. Wyman",
                "email": "bjwyman@gmail.com",
                "username": "bjwyman"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1645134589,
            "reviewer": {
                "name": "Brandon J. Wyman",
                "email": "bjwyman@gmail.com",
                "username": "bjwyman"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1645135207,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 4: Code-Review+2"
        },
        {
            "timestamp": 1645135213,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Change has been successfully rebased and submitted as 0975eaf4fa852a49a78968d2f38c9b8c3477dbcf"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "983c5ca66326c1b3169e76b751f8589331594d2b",
            "parents": [
                "8b150f30b78e52fe92ce340c1d1826f6dc343112"
            ],
            "ref": "refs/changes/99/51199/1",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1644875564,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 30,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/test/mock.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/test/power_supply_tests.cpp",
                    "type": "MODIFIED",
                    "insertions": 40,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/util.hpp",
                    "type": "MODIFIED",
                    "insertions": 44,
                    "deletions": -10
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "type": "MODIFIED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "types.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/util_base.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 171,
            "sizeDeletions": 10
        },
        {
            "number": 2,
            "revision": "55c5fb1ac2c0e8ed606f7b65cb3e89bc15aa89f7",
            "parents": [
                "8b150f30b78e52fe92ce340c1d1826f6dc343112"
            ],
            "ref": "refs/changes/99/51199/2",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1644875995,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 16,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "I need to think more about presence being included in here.  The redfish code already checks for presence when setting the State so it can get set to Absent.\n\nWhen a PS is missing:\na) on startup\n  - There will be an error log with a FRU callout that would set Functional to false, and hence Health to Critical (and State to Absent)\nb) at runtime\n - The AC cable would have to be removed first, leading to an input fault which would set available to false and Redfish Health would be Critical and State = UnavailableOffline (with upcoming bmcweb change)"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 16,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "we'll deglitch the input fault 3 times (3 sec), so if the CE pulls AC cable then pulls psu out within 3 sec, we'd still want status updated... ie, there's no guarantee there will be a input fault PEL logged."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 16,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Thanks.\n\nFor the configs that only require 2 PSUs as opposed to 4, is it possible someone would actually plug in more?  The available check only runs if something was present in the first place, but what if:\n* User plugs in 3 PSs even though they only need 2\n* User notices that and removes one\n* Its presence and available state change to false\n* No PSU missing error is logged because there's an valid config check first which passes\n* Because not available, status of the 3rd PS shows Critical in the web ui?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 16,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "It's possible for them to plug in more, but I'm not too worried about the gui being perfect if they do extra plugs/unplugs.  As long as we don't say missing ones are \"critical\" when they correctly have only ever had 2 of the 4 plugged in, good enough.  If they have to reboot the bmc after doing the extra add/remove to get the gui looking good again, so be it."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 16,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Makes sense.\nAnother situation I thought of.  The PSU polling is still happening with power off, so the available property would also be accurate then.  If someone were to look at Redfish/the web UI then, it could show Critical/UnavailableOffline.  Is that a problem do you think?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 16,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "sorry, when would it show critical/unavailableoffline when the system is powered off?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 16,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "For example if the cord was unplugged, then hasInputFault would return true even with power off:\n\n    bool hasInputFault() const\n    {\n        return (inputFault >= DEGLITCH_LIMIT);\n    }"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 16,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "ok, no I don't think thats a problem.. we're not logging power errors until the system is powered on, but the gui status might be an early notification that something is wrong..."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 16,
                    "reviewer": {
                        "name": "Brandon J. Wyman",
                        "email": "bjwyman@gmail.com",
                        "username": "bjwyman"
                    },
                    "message": "Not logging errors if the power is not on. The PSUManager only checks if it should log errors if powerOn is true: https://github.com/openbmc/phosphor-power/blob/e4c3a299cefd56c3bfebdb7f2cb36f88b91f4981/phosphor-power-supply/psu_manager.cpp#L426"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 16,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Ack"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 918,
                    "reviewer": {
                        "name": "Brandon J. Wyman",
                        "email": "bjwyman@gmail.com",
                        "username": "bjwyman"
                    },
                    "message": "If any of these faults lead to PGOOD not being good, or the unit being OFF, then are we really just interested in hasPgoodFault()? None of these checks down in the PowerSupply class care or check the main system power state, that is up in PSUManager."
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 918,
                    "reviewer": {
                        "name": "Brandon J. Wyman",
                        "email": "bjwyman@gmail.com",
                        "username": "bjwyman"
                    },
                    "message": "Actually, since the PowerSupply does not care about the main power state, having a hasPgoodFault() check here would potentially set Available to false when the power is off, since the power supply would indicate that POWER_GOOD# is inactive and the unit is off. That doesn't mean it is not available, that means it is off because we want it off! \ud83d\ude0a\n\nLeaving the calls/checks as they are seems better to me."
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "line": 418,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "hmmm I wonder about CML&comm fails.  looks like we do CALLOUT_DEVICE_PATH for callout for those errors, so that should result in PEL code setting the operational functional status to false for the psu, right?"
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "line": 418,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "yep, that's right."
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "line": 418,
                    "reviewer": {
                        "name": "Brandon J. Wyman",
                        "email": "bjwyman@gmail.com",
                        "username": "bjwyman"
                    },
                    "message": "The power supplies, at least the IBM power supplies, can/do shutdown if a 12V over-voltage condition is detected. Should that be included?\n\nIf I am reading things correctly, a 12V under-voltage can also lead to a shutdown, after a delay."
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "line": 418,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "So do we need to  add  the OV fault?"
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "line": 418,
                    "reviewer": {
                        "name": "Brandon J. Wyman",
                        "email": "bjwyman@gmail.com",
                        "username": "bjwyman"
                    },
                    "message": "So, if there is an OV fault, and were are using the PEL extension for logging the errors, the Functional will get set to false. The same goes for UV. This happens due to calling out the power supply itself, instead of a symbolic FRU or a procedure.\n\n\"The Available D-Bus property is then able to be used in Redfish\n responses for the heath and state properties in the power supply\n schema.\"\n\nThe Functional value is alsu osued to determine the Health for Redfish.\n\nI am okay with leaving out an OV and UV check."
                },
                {
                    "file": "phosphor-power-supply/test/power_supply_tests.cpp",
                    "line": 0,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "I didn't add expect calls for Available for every possible fault, but I probably could if desired."
                },
                {
                    "file": "phosphor-power-supply/test/power_supply_tests.cpp",
                    "line": 0,
                    "reviewer": {
                        "name": "Brandon J. Wyman",
                        "email": "bjwyman@gmail.com",
                        "username": "bjwyman"
                    },
                    "message": "Done"
                },
                {
                    "file": "phosphor-power-supply/util_base.hpp",
                    "line": 49,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "not necessary"
                },
                {
                    "file": "phosphor-power-supply/util_base.hpp",
                    "line": 49,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 30,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/test/mock.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/test/power_supply_tests.cpp",
                    "type": "MODIFIED",
                    "insertions": 40,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/util.hpp",
                    "type": "MODIFIED",
                    "insertions": 44,
                    "deletions": -10
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "types.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/util_base.hpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 171,
            "sizeDeletions": 10
        },
        {
            "number": 3,
            "revision": "a0b38f531f1345b93e816cce00dc125f1f20257b",
            "parents": [
                "8b150f30b78e52fe92ce340c1d1826f6dc343112"
            ],
            "ref": "refs/changes/99/51199/3",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1645118221,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "Maybe add a statement to the description at the end, something like \"For other power supply faults, the callout in the PEL will be the psu itself, which will result in the appropriate redfish status\"."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "...or a comment in the code... something to remind us why it's only set unavailable for certain faults..."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Brandon J. Wyman",
                        "email": "bjwyman@gmail.com",
                        "username": "bjwyman"
                    },
                    "message": "Oh! Yeah, that might be good to point out in the commit message. Something like what I said here: https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-power/+/51199/comment/ea4ab538_20ad547e/ (minus the typo)."
                },
                {
                    "file": "phosphor-power-supply/test/power_supply_tests.cpp",
                    "line": 1066,
                    "reviewer": {
                        "name": "Brandon J. Wyman",
                        "email": "bjwyman@gmail.com",
                        "username": "bjwyman"
                    },
                    "message": "Should we expect a setAvailable() false here, when it reaches the DEGLITCH_LIMIT? This 0xFF stuff basically makes EVERY SINGLE FAULT POSSIBLE happen."
                },
                {
                    "file": "phosphor-power-supply/test/power_supply_tests.cpp",
                    "line": 1066,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Done"
                },
                {
                    "file": "phosphor-power-supply/test/power_supply_tests.cpp",
                    "line": 1415,
                    "reviewer": {
                        "name": "Brandon J. Wyman",
                        "email": "bjwyman@gmail.com",
                        "username": "bjwyman"
                    },
                    "message": "Since we did not include temperature faults for Available status, this would be similar to the fan fault one. Should there be an expectation of 1 true and 0 false here as well?"
                },
                {
                    "file": "phosphor-power-supply/test/power_supply_tests.cpp",
                    "line": 1415,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "I didn't modify the testcase for every type of fault since it didn't seem necessary, though I guess I could"
                },
                {
                    "file": "phosphor-power-supply/test/power_supply_tests.cpp",
                    "line": 1415,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 30,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/test/mock.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/test/power_supply_tests.cpp",
                    "type": "MODIFIED",
                    "insertions": 40,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/util.hpp",
                    "type": "MODIFIED",
                    "insertions": 44,
                    "deletions": -10
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "types.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/util_base.hpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 171,
            "sizeDeletions": 10
        },
        {
            "number": 4,
            "revision": "77caa5aac4d181216548cb0477b1d265bff3db48",
            "parents": [
                "8b150f30b78e52fe92ce340c1d1826f6dc343112"
            ],
            "ref": "refs/changes/99/51199/4",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1645130914,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 25,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Though if we wanted the State to be UnavailableOffline for some other faults we could also add them in."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 32,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/test/mock.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/test/power_supply_tests.cpp",
                    "type": "MODIFIED",
                    "insertions": 48,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/util.hpp",
                    "type": "MODIFIED",
                    "insertions": 44,
                    "deletions": -10
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "type": "MODIFIED",
                    "insertions": 24,
                    "deletions": 0
                },
                {
                    "file": "types.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/util_base.hpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 184,
            "sizeDeletions": 10
        },
        {
            "number": 5,
            "revision": "0975eaf4fa852a49a78968d2f38c9b8c3477dbcf",
            "parents": [
                "5c6ac77e5e35f173a35bf432ecc6d457e63159c7"
            ],
            "ref": "refs/changes/99/51199/5",
            "uploader": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "createdOn": 1645135213,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 32,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/test/mock.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/test/power_supply_tests.cpp",
                    "type": "MODIFIED",
                    "insertions": 48,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/util.hpp",
                    "type": "MODIFIED",
                    "insertions": 44,
                    "deletions": -10
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "type": "MODIFIED",
                    "insertions": 24,
                    "deletions": 0
                },
                {
                    "file": "types.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/util_base.hpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 184,
            "sizeDeletions": 10
        }
    ]
}