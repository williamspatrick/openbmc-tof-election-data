{
    "project": "openbmc/dbus-sensors",
    "branch": "master",
    "id": "I32dbb582edc0e5c83e4ac63e7ae19e1158f4526f",
    "number": 42542,
    "subject": "adcsensor: Match the sensor device name",
    "owner": {
        "email": "thu@os.amperecomputing.com",
        "username": "ThuBaNguyen"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/42542",
    "commitMessage": "adcsensor: Match the sensor device name\n\nCurrently, ADCSensor daemon only accesses the sensor paths in\n/sys/devices/platform/iio-hwmon or their device name is iio-hwmon. So\nthe daemon created the sensor path filter by comparing the output name\nof /sys/class/hwmon/hwmon*/name with \"iio_hwmon\" string. But the linux\nkernel doesn't limit the number of ADC devices by one. Such as AST2600\nhas two ADC devices. So the sensor paths are not only in\n/sys/devices/platform/iio-hwmon but also in other paths such as\n/sys/devices/platform/iio-hwmon-*. That why, the filter should not\nexist.\n\nMoreover, when there are some ADC devices, the sensor index of\ndifferent ADC devices can be dupplicated. So only matching the sensor\npath index with the \"Index\" value in sensor configuration as the\ncurrent design is not enough. Therefore, ADCSensor daemon should add\nmore matching conditions. The device name in the device path can be\nused as the addition checking.\n\nThis commit will remove the sensor path filter and supports using the\ndevice name as the addition matching beside the sensor path index.\nBecause the current ADC sensor configurations do not have the device\nname setting, the default name \"iio-hwmon\" will be used for backward\ncompatible. The \"DevName\" option will be add later in sensor\nconfiguration file to support setting device name.\n\nBelow is an example of two sensor paths of two different devices with\nthe same index:\n$readlink -f /sys/class/hwmon/hwmon11/in1_input\n/sys/devices/platform/iio-hwmon/hwmon/hwmon11/in1_input\n$readlink -f /sys/class/hwmon/hwmon10/in1_input\n/sys/devices/platform/iio-hwmon-battery/hwmon/hwmon10/in1_input\n\nTested:\n    1. Configures ADC sensors as below:\n        { \"Index\": 0, \"Name\": \"S0_0V8_VDDC_SOC\", \"Type\": \"ADC\" }\n    2. The configured sensor should be matched with the sensor path\n        /sys/devices/platform/iio-hwmon/hwmon/hwmon11/in1_input.\n\nSigned-off-by: ThuBaNguyen <thu@os.amperecomputing.com>\nChange-Id: I32dbb582edc0e5c83e4ac63e7ae19e1158f4526f\n",
    "createdOn": 1619081900,
    "lastUpdated": 1653419647,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1619081900,
            "reviewer": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1619081912,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1619082034,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/15959/ : SUCCESS"
        },
        {
            "timestamp": 1619086017,
            "reviewer": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Uploaded patch set 2: Commit message was updated."
        },
        {
            "timestamp": 1619087306,
            "reviewer": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Patch Set 2:\n\nCan you help to review this patch?"
        },
        {
            "timestamp": 1619104716,
            "reviewer": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Uploaded patch set 3: Commit message was updated."
        },
        {
            "timestamp": 1620772192,
            "reviewer": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Uploaded patch set 4: Patch Set 3 was rebased."
        },
        {
            "timestamp": 1620772207,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1620772330,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/17052/ : SUCCESS"
        },
        {
            "timestamp": 1620774229,
            "reviewer": {
                "name": "Ted Striker",
                "email": "ja2utpb174od56evs6vq82ameu17fi@gmail.com",
                "username": "Airplane1980"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1620774991,
            "reviewer": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1620976550,
            "reviewer": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Uploaded patch set 5: Commit message was updated."
        },
        {
            "timestamp": 1623422296,
            "reviewer": {
                "name": "Bruce Mitchell",
                "email": "bruce.mitchell@linux.vnet.ibm.com",
                "username": "BMC-Bruce"
            },
            "message": "Patch Set 5: Code-Review+1\n\nI believe this sound like the proper thing to do\nof finding the iio_hwmon and allowing for multiple\nACD devices."
        },
        {
            "timestamp": 1623705489,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1623724640,
            "reviewer": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1623774387,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1623805054,
            "reviewer": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1624377271,
            "reviewer": {
                "name": "Patrick Venture",
                "email": "venture@google.com",
                "username": "pstrinkle"
            },
            "message": "Removed reviewer Patrick Venture."
        },
        {
            "timestamp": 1625756455,
            "reviewer": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Uploaded patch set 6."
        },
        {
            "timestamp": 1625756467,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1625756731,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/21646/ : SUCCESS"
        },
        {
            "timestamp": 1625757000,
            "reviewer": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Patch Set 6:\n\n(2 comments)\n\nWe;l is a"
        },
        {
            "timestamp": 1625777670,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 6:\n\nI am +1 this because the part I have comments on will be addressed by https://gerrit.openbmc-project.xyz/c/openbmc/dbus-sensors/+/42543"
        },
        {
            "timestamp": 1625777676,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 6: Code-Review+1"
        },
        {
            "timestamp": 1625874587,
            "reviewer": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Uploaded patch set 7: Commit message was updated."
        },
        {
            "timestamp": 1625915083,
            "reviewer": {
                "email": "rashmi.r.v@linux.intel.com",
                "username": "Rashmi-RV"
            },
            "message": "Patch Set 7: Code-Review+1"
        },
        {
            "timestamp": 1626855686,
            "reviewer": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Uploaded patch set 8."
        },
        {
            "timestamp": 1626855702,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1626855871,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/22452/ : SUCCESS"
        },
        {
            "timestamp": 1629715612,
            "reviewer": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Uploaded patch set 9."
        },
        {
            "timestamp": 1629715629,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1629715765,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/24800/ : SUCCESS"
        },
        {
            "timestamp": 1629870833,
            "reviewer": {
                "email": "rashmi.r.v@linux.intel.com",
                "username": "Rashmi-RV"
            },
            "message": "Patch Set 9: Code-Review+1"
        },
        {
            "timestamp": 1633447075,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 9: Code-Review+1\n\nI could see squashing this commit with the next one, since this isn't really changing any functionality as far as I can tell.\n\nBut, with the two together, it seems OK."
        },
        {
            "timestamp": 1633659341,
            "reviewer": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Uploaded patch set 10: Patch Set 9 was rebased."
        },
        {
            "timestamp": 1633659357,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 10: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1633659503,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 10: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/27808/ : SUCCESS"
        },
        {
            "timestamp": 1634023143,
            "reviewer": {
                "name": "Manish Baing",
                "email": "manish.baing@intel.com",
                "username": "manishbaing"
            },
            "message": "Patch Set 10:\n\n(2 comments)"
        },
        {
            "timestamp": 1634113297,
            "reviewer": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Uploaded patch set 11."
        },
        {
            "timestamp": 1634113312,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 11: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1634113368,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 11: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/28189/ : FAILURE"
        },
        {
            "timestamp": 1634113715,
            "reviewer": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Patch Set 10:\n\n(6 comments)\n\nResolved all comments."
        },
        {
            "timestamp": 1634113904,
            "reviewer": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Uploaded patch set 12."
        },
        {
            "timestamp": 1634113918,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 12: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1634114017,
            "reviewer": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Patch Set 12:\n\n(1 comment)"
        },
        {
            "timestamp": 1634114652,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 12: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/28191/ : SUCCESS"
        },
        {
            "timestamp": 1634308564,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 12: Code-Review+1"
        },
        {
            "timestamp": 1634317957,
            "reviewer": {
                "name": "Bruce Mitchell",
                "email": "bruce.mitchell@linux.vnet.ibm.com",
                "username": "BMC-Bruce"
            },
            "message": "Patch Set 12: Code-Review+1"
        },
        {
            "timestamp": 1634530148,
            "reviewer": {
                "name": "Manish Baing",
                "email": "manish.baing@intel.com",
                "username": "manishbaing"
            },
            "message": "Patch Set 12: Code-Review+1"
        },
        {
            "timestamp": 1634691645,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 12: Code-Review+1"
        },
        {
            "timestamp": 1635469361,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Removed reviewer Andrew Jeffery."
        },
        {
            "timestamp": 1636963198,
            "reviewer": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Uploaded patch set 13."
        },
        {
            "timestamp": 1636963215,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 13: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1636963466,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 13: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/30249/ : SUCCESS"
        },
        {
            "timestamp": 1636963989,
            "reviewer": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Patch Set 13:\n\nRebased to latest code in master branch.\n\nHi Ed Tanous,\n\nAre you Ok with the latest code?\n\nRegards.\nThu."
        },
        {
            "timestamp": 1639018638,
            "reviewer": {
                "name": "Tung Nguyen",
                "email": "tungnguyen@os.amperecomputing.com",
                "username": "tungnguyen-ampere"
            },
            "message": "Patch Set 13: Code-Review+1\n\nHi all,\njust a reminder, do you have any more comments ?\n\nBest regards,\nTung"
        },
        {
            "timestamp": 1641687541,
            "reviewer": {
                "name": "Thang Q. Nguyen",
                "email": "thang@os.amperecomputing.com",
                "username": "thangqn-ampere"
            },
            "message": "Patch Set 13:\n\n(1 comment)"
        },
        {
            "timestamp": 1642110874,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 13: Code-Review+1"
        },
        {
            "timestamp": 1648089754,
            "reviewer": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Uploaded patch set 14."
        },
        {
            "timestamp": 1648089768,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 14: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1648089768,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 14: -Ok-To-Test"
        },
        {
            "timestamp": 1648090013,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 14: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/39601/ : SUCCESS"
        },
        {
            "timestamp": 1651954507,
            "reviewer": {
                "name": "Arun Lal K M",
                "email": "arun.lal@intel.com",
                "username": "arunlalkm-intel"
            },
            "message": "Patch Set 14: Code-Review+1"
        },
        {
            "timestamp": 1653419118,
            "reviewer": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Patch Set 14:\n\n(1 comment)"
        },
        {
            "timestamp": 1653419647,
            "reviewer": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Abandoned"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "56b58a2837ef2e4e7a91b9a44b22039ac3d04993",
            "parents": [
                "12e3d67e3ba76bc832e2e1e1fc38933b055afd79"
            ],
            "ref": "refs/changes/42/42542/1",
            "uploader": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "createdOn": 1619081900,
            "author": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "src/ADCSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -22
                }
            ],
            "sizeInsertions": 34,
            "sizeDeletions": 22
        },
        {
            "number": 2,
            "revision": "d8f6d76d87175e4437b67a165eb1eb5f7acb7230",
            "parents": [
                "12e3d67e3ba76bc832e2e1e1fc38933b055afd79"
            ],
            "ref": "refs/changes/42/42542/2",
            "uploader": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "createdOn": 1619086017,
            "author": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "src/ADCSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -22
                }
            ],
            "sizeInsertions": 34,
            "sizeDeletions": 22
        },
        {
            "number": 3,
            "revision": "3fa8d6aab5836b1727f124866bd9699a4fb2302b",
            "parents": [
                "12e3d67e3ba76bc832e2e1e1fc38933b055afd79"
            ],
            "ref": "refs/changes/42/42542/3",
            "uploader": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "createdOn": 1619104716,
            "author": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "src/ADCSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -22
                }
            ],
            "sizeInsertions": 34,
            "sizeDeletions": 22
        },
        {
            "number": 4,
            "revision": "28ffff1abeb89004be8517620dfc282f86c5c569",
            "parents": [
                "5636d52baad683fbb51447a716d66cb06959e52f"
            ],
            "ref": "refs/changes/42/42542/4",
            "uploader": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "createdOn": 1620772192,
            "author": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 10,
                    "reviewer": {
                        "name": "Ted Striker",
                        "email": "ja2utpb174od56evs6vq82ameu17fi@gmail.com",
                        "username": "Airplane1980"
                    },
                    "message": "So that implies it would match Unicode strings too.\nIs that true?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 10,
                    "reviewer": {
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "The rules of device_name is detail in section 2.2.1 Node name of Devicetree specification v0.03. It should only includes [0:9][a-z][A-Z][,.+_-]. And it's convention should be node-name@unit-address."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 10,
                    "reviewer": {
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "src/ADCSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -22
                }
            ],
            "sizeInsertions": 34,
            "sizeDeletions": 22
        },
        {
            "number": 5,
            "revision": "475db89bef7ea3cebaceaef95fc51e9aef9b9585",
            "parents": [
                "5636d52baad683fbb51447a716d66cb06959e52f"
            ],
            "ref": "refs/changes/42/42542/5",
            "uploader": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "createdOn": 1620976550,
            "author": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "src/ADCSensorMain.cpp",
                    "line": 119,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "This can be outside of the for loop - after line 87.\nI realize the follow up patch https://gerrit.openbmc-project.xyz/c/openbmc/dbus-sensors/+/42543 actually would get DevName from sensor configuration, so it will be compared  in this loop. \nBut can we assume it will always start with iio-hwmon for all ADCs and still move this outside of this for loop?"
                },
                {
                    "file": "src/ADCSensorMain.cpp",
                    "line": 119,
                    "reviewer": {
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "If the device name is always \"iio-hwmon\", it is ok to move these code out side of loop.\nBut it is not, when the device name is not \"iio-hwmon\", the if is always true, the for to get sensor configuration will be bypassed."
                },
                {
                    "file": "src/ADCSensorMain.cpp",
                    "line": 119,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "For this patch, device name is set out side the for loop and not changed inside the loop."
                },
                {
                    "file": "src/ADCSensorMain.cpp",
                    "line": 119,
                    "reviewer": {
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Yes, deviceName value is device name from the sensor path and defaultADCName is \"iio-hwmon\". With this patch we can move the if outside of for, but in next patch 42543 we have to move it back to the for. I'm ok with move the if outside of for in this patch, but do we really need to do that?"
                },
                {
                    "file": "src/ADCSensorMain.cpp",
                    "line": 119,
                    "reviewer": {
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 74,
                    "deletions": 0
                },
                {
                    "file": "src/ADCSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -22
                }
            ],
            "sizeInsertions": 83,
            "sizeDeletions": 22
        },
        {
            "number": 6,
            "revision": "b49363b7cb01395f87181966b9cad2163a22dee1",
            "parents": [
                "f72eb8324e951a647e1625f55023c7ea8db00f67"
            ],
            "ref": "refs/changes/42/42542/6",
            "uploader": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "createdOn": 1625756455,
            "author": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "src/ADCSensorMain.cpp",
                    "line": 90,
                    "reviewer": {
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "This if filters out the sensor path of the ADC device which device name starts with \"iio-hwmon\"."
                },
                {
                    "file": "src/ADCSensorMain.cpp",
                    "line": 90,
                    "reviewer": {
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Done"
                },
                {
                    "file": "src/ADCSensorMain.cpp",
                    "line": 126,
                    "reviewer": {
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Match device name with the default ADC device name \"iio-hwmon\" for backward compatible. Next patch will support check the configuration devName with the sensor path device name."
                },
                {
                    "file": "src/ADCSensorMain.cpp",
                    "line": 126,
                    "reviewer": {
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 74,
                    "deletions": 0
                },
                {
                    "file": "src/ADCSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": -22
                }
            ],
            "sizeInsertions": 93,
            "sizeDeletions": 22
        },
        {
            "number": 7,
            "revision": "a808c9bb53e9b9bc45acaa487c2df094d2fdf981",
            "parents": [
                "f72eb8324e951a647e1625f55023c7ea8db00f67"
            ],
            "ref": "refs/changes/42/42542/7",
            "uploader": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "createdOn": 1625874587,
            "author": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 78,
                    "deletions": 0
                },
                {
                    "file": "src/ADCSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": -22
                }
            ],
            "sizeInsertions": 97,
            "sizeDeletions": 22
        },
        {
            "number": 8,
            "revision": "ef7bd92fc4f3d54252b9fd680f82938943e34531",
            "parents": [
                "3453354b838885bfe47754bdf116ecedde87116d"
            ],
            "ref": "refs/changes/42/42542/8",
            "uploader": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "createdOn": 1626855686,
            "author": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 47,
                    "deletions": 0
                },
                {
                    "file": "src/ADCSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": -22
                }
            ],
            "sizeInsertions": 66,
            "sizeDeletions": 22
        },
        {
            "number": 9,
            "revision": "11799ac68c36eb7273c8834d8d3796cda27e19d9",
            "parents": [
                "f1ace50bbb781c0febd15387110d1a03b11391f9"
            ],
            "ref": "refs/changes/42/42542/9",
            "uploader": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "createdOn": 1629715612,
            "author": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 47,
                    "deletions": 0
                },
                {
                    "file": "src/ADCSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": -22
                }
            ],
            "sizeInsertions": 66,
            "sizeDeletions": 22
        },
        {
            "number": 10,
            "revision": "3e0e48f7d7e20cbaa7bc45da9792ba1bff16ac1e",
            "parents": [
                "26601e8919552a52bd8b23aa85fac30088f03303"
            ],
            "ref": "refs/changes/42/42542/10",
            "uploader": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "createdOn": 1633659341,
            "author": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "src/ADCSensorMain.cpp",
                    "line": 43,
                    "reviewer": {
                        "name": "Manish Baing",
                        "email": "manish.baing@intel.com",
                        "username": "manishbaing"
                    },
                    "message": "nit : You can replace it with static constexpr ."
                },
                {
                    "file": "src/ADCSensorMain.cpp",
                    "line": 43,
                    "reviewer": {
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "Done"
                },
                {
                    "file": "src/ADCSensorMain.cpp",
                    "line": 43,
                    "reviewer": {
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "I'm using std::string in this case. Adding constexpr is not corrected in this case."
                },
                {
                    "file": "src/ADCSensorMain.cpp",
                    "line": 44,
                    "reviewer": {
                        "name": "Manish Baing",
                        "email": "manish.baing@intel.com",
                        "username": "manishbaing"
                    },
                    "message": "nit : it is possible to use any enumeration here instead magic number ,Just to improve readability of code ."
                },
                {
                    "file": "src/ADCSensorMain.cpp",
                    "line": 44,
                    "reviewer": {
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "This code is from original source. I don't change it in my patches."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 47,
                    "deletions": 0
                },
                {
                    "file": "src/ADCSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": -22
                }
            ],
            "sizeInsertions": 66,
            "sizeDeletions": 22
        },
        {
            "number": 11,
            "revision": "8084e6b1a2ee37750364f7377cb7331149c058d8",
            "parents": [
                "26601e8919552a52bd8b23aa85fac30088f03303"
            ],
            "ref": "refs/changes/42/42542/11",
            "uploader": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "createdOn": 1634113297,
            "author": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 47,
                    "deletions": 0
                },
                {
                    "file": "src/ADCSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": -22
                }
            ],
            "sizeInsertions": 66,
            "sizeDeletions": 22
        },
        {
            "number": 12,
            "revision": "a984a68bd29dde0ba2c3ddaf2ae25b5ca9a4b417",
            "parents": [
                "26601e8919552a52bd8b23aa85fac30088f03303"
            ],
            "ref": "refs/changes/42/42542/12",
            "uploader": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "createdOn": 1634113904,
            "author": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 47,
                    "deletions": 0
                },
                {
                    "file": "src/ADCSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": -22
                }
            ],
            "sizeInsertions": 66,
            "sizeDeletions": 22
        },
        {
            "number": 13,
            "revision": "8bb501f8465df42afe354e94389ea98a35bd84e8",
            "parents": [
                "66558235ce5d7568439ce7618dd0ce77fcc0b69c"
            ],
            "ref": "refs/changes/42/42542/13",
            "uploader": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "createdOn": 1636963198,
            "author": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Thang Q. Nguyen",
                        "email": "thang@os.amperecomputing.com",
                        "username": "thangqn-ampere"
                    },
                    "message": "Hi,\nDo you have any comment on this change? I think we need it for the case of AST2600 which has 2 ADC controllers. We can combine all ADC devices in a controller into a single device tree node but not for 2 separated ADC controllers."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 47,
                    "deletions": 0
                },
                {
                    "file": "src/ADCSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": -22
                }
            ],
            "sizeInsertions": 66,
            "sizeDeletions": 22
        },
        {
            "number": 14,
            "revision": "82a8817efa96ea59132a839688c2e7b8638b35cf",
            "parents": [
                "8418975235cb792235e7cdc8fb4951be2167ced9"
            ],
            "ref": "refs/changes/42/42542/14",
            "uploader": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "createdOn": 1648089754,
            "author": {
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "email": "thu@os.amperecomputing.com",
                        "username": "ThuBaNguyen"
                    },
                    "message": "The patch matchs device name in DTS:\n\n\tiio-hwmon {\n\t\tcompatible = \"iio-hwmon\";\n\t\tio-channels = <&adc0mux 0>, <&adc0mux 1>,\n\t\t\t<&adc1mux 0>, <&adc1mux 1>,\n\t\t\t<&adc2mux 0>, <&adc2mux 1>,\n\t\t\t<&adc3mux 0>, <&adc3mux 1>;\n\t};\n\tiio-hwmon-adc14 {\n\t\tcompatible = \"iio-hwmon\";\n\t\tio-channels = <&adc 14>;\n\t};\n\tiio-hwmon-battery {\n\t\tcompatible = \"iio-hwmon\";\n\t\tio-channels = <&adc 15>;\n\t};\nwith the configuration file in entity-manager.\nIt is breaked the rules \"Use real hardware info to match the configuration and should not depend on DTS\" when implement the dbus-sensors daemon.\n\nSo I will close this patch.\n\nThe possible solution is move all ADC channels into one device as below:\n\n        iio-hwmon {\n\t\tcompatible = \"iio-hwmon\";\n\t\tio-channels = <&adc0mux 0>, <&adc0mux 1>,\n\t\t\t<&adc1mux 0>, <&adc1mux 1>,\n\t\t\t<&adc2mux 0>, <&adc2mux 1>,\n\t\t\t<&adc3mux 0>, <&adc3mux 1>,\n\t\t\t<&adc4mux 0>, <&adc4mux 1>,\n\t\t\t<&adc5mux 0>, <&adc5mux 1>,\n\t\t\t<&adc6mux 0>, <&adc6mux 1>,\n\t\t\t<&adc7mux 0>, <&adc7mux 1>,\n\t\t\t<&adc8mux 0>, <&adc8mux 1>,\n\t\t\t<&adc9mux 0>, <&adc9mux 1>,\n\t\t\t<&adc10mux 0>, <&adc10mux 1>,\n\t\t\t<&adc11mux 0>, <&adc11mux 1>,\n\t\t\t<&adc12mux 0>, <&adc12mux 1>,\n\t\t\t<&adc13mux 0>, <&adc13mux 1>,\n\t\t\t<&adc 14>, <&adc 15>;\n\t};\nThen we don't need these patches."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 47,
                    "deletions": 0
                },
                {
                    "file": "src/ADCSensorMain.cpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": -22
                }
            ],
            "sizeInsertions": 66,
            "sizeDeletions": 22
        }
    ]
}