{
    "project": "openbmc/phosphor-bmc-code-mgmt",
    "branch": "master",
    "id": "Ia92aba70ea4b346b1473b557a5adeeea7a3cae3d",
    "number": 52421,
    "subject": "Signature Validation : Change Error Thrown",
    "owner": {
        "name": "Zami Seck",
        "email": "zimzam17@gmail.com",
        "username": "zamiseck"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-bmc-code-mgmt/+/52421",
    "commitMessage": "Signature Validation : Change Error Thrown\n\nThis commit changes the error reported when the signature\nrequirements are not met. Instead of reporting \"InternalError\",\nthe newly defined InvalidSignature error is thrown in its place.\nThis allows there to be a more specific error shown.\n\nTested:\nBefore:\nApr 08 19:04:44 witherspoon phosphor-image-updater[416]: Error occurred during image validation\nApr 08 19:04:44 witherspoon phosphor-image-updater[416]: The operation failed internally.\n\nAfter:\nJan 01 00:11:10 witherspoon phosphor-image-updater[403]: Signature Validation failed for image version.\n\nSigned-off-by: Zami Seck <zimzam17@gmail.com>\nChange-Id: Ia92aba70ea4b346b1473b557a5adeeea7a3cae3d\n",
    "createdOn": 1648486502,
    "lastUpdated": 1649452755,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1648486502,
            "reviewer": {
                "name": "Zami Seck",
                "email": "zimzam17@gmail.com",
                "username": "zamiseck"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1648486512,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1648486512,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1648486535,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/39932/ : FAILURE"
        },
        {
            "timestamp": 1648487057,
            "reviewer": {
                "name": "Zami Seck",
                "email": "zimzam17@gmail.com",
                "username": "zamiseck"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1648487067,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1648487067,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1648487146,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/39934/ : SUCCESS"
        },
        {
            "timestamp": 1649447391,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 2:\n\n(3 comments)"
        },
        {
            "timestamp": 1649452472,
            "reviewer": {
                "name": "Zami Seck",
                "email": "zimzam17@gmail.com",
                "username": "zamiseck"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1649452485,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1649452485,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1649452540,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 3: Code-Review+1\n\n(2 comments)"
        },
        {
            "timestamp": 1649452556,
            "reviewer": {
                "name": "Zami Seck",
                "email": "zimzam17@gmail.com",
                "username": "zamiseck"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1649452569,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/40845/ : SUCCESS"
        },
        {
            "timestamp": 1649452742,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 3: Code-Review+2"
        },
        {
            "timestamp": 1649452755,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Change has been successfully rebased and submitted as 3afdaaf36e7e7cd8ea0b8cee43b15811b8766868"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "3baad38d1bd96a79eabac16e1cfcee1834e69363",
            "parents": [
                "c026f6cdc3f7e305d98dc824fcba0f199a7aa157"
            ],
            "ref": "refs/changes/21/52421/1",
            "uploader": {
                "name": "Zami Seck",
                "email": "zimzam17@gmail.com",
                "username": "zamiseck"
            },
            "createdOn": 1648486502,
            "author": {
                "name": "Zami Seck",
                "email": "zimzam17@gmail.com",
                "username": "zamiseck"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "activation.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -7
                }
            ],
            "sizeInsertions": 19,
            "sizeDeletions": 7
        },
        {
            "number": 2,
            "revision": "349a211dead4833c9ae08b9e7fa1b3ad5d52c571",
            "parents": [
                "c026f6cdc3f7e305d98dc824fcba0f199a7aa157"
            ],
            "ref": "refs/changes/21/52421/2",
            "uploader": {
                "name": "Zami Seck",
                "email": "zimzam17@gmail.com",
                "username": "zamiseck"
            },
            "createdOn": 1648487057,
            "author": {
                "name": "Zami Seck",
                "email": "zimzam17@gmail.com",
                "username": "zamiseck"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "I tested on witherspoon, could you add the tested tag to the commit msg:\n\nTested:\n- Before:\nApr 08 19:04:44 witherspoon phosphor-image-updater[416]: Error occurred during image validation\nApr 08 19:04:44 witherspoon phosphor-image-updater[416]: The operation failed internally.\n- After:\nJan 01 00:11:10 witherspoon phosphor-image-updater[403]: Signature Validation failed for image version.\n$ busctl get-property xyz.openbmc_project.Logging /xyz/openbmc_project/logging/entry/4 xyz.openbmc_project.Logging.Entry Message\ns \"xyz.openbmc_project.Software.Version.Error.InvalidSignature\""
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "Done"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "Zami Seck",
                        "email": "zimzam17@gmail.com",
                        "username": "zamiseck"
                    },
                    "message": "Done"
                },
                {
                    "file": "activation.cpp",
                    "line": 348,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "I think it's that this journal entry was removed because the error message will say it's a signature validation error.\n\nBefore:\nApr 08 19:04:44 witherspoon phosphor-image-updater[416]: Error occurred during image validation\nApr 08 19:04:44 witherspoon phosphor-image-updater[416]: The operation failed internally.\n\nAfter:\nJan 01 00:11:10 witherspoon phosphor-image-updater[403]: Signature Validation failed for image version."
                },
                {
                    "file": "activation.cpp",
                    "line": 97,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "This is not needed since the logging namespace is already defined in the top of the file, could you remove it? Seems the minimum ship level error below in line 112 has the same, could you remove it from there too to avoid it being copied in the future?"
                },
                {
                    "file": "activation.cpp",
                    "line": 97,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "Done"
                },
                {
                    "file": "activation.cpp",
                    "line": 97,
                    "reviewer": {
                        "name": "Zami Seck",
                        "email": "zimzam17@gmail.com",
                        "username": "zamiseck"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "activation.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -7
                }
            ],
            "sizeInsertions": 19,
            "sizeDeletions": 7
        },
        {
            "number": 3,
            "revision": "855c55c95325fc80920a01ecee5427ddb12c8994",
            "parents": [
                "c026f6cdc3f7e305d98dc824fcba0f199a7aa157"
            ],
            "ref": "refs/changes/21/52421/3",
            "uploader": {
                "name": "Zami Seck",
                "email": "zimzam17@gmail.com",
                "username": "zamiseck"
            },
            "createdOn": 1649452472,
            "author": {
                "name": "Zami Seck",
                "email": "zimzam17@gmail.com",
                "username": "zamiseck"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "activation.cpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -8
                }
            ],
            "sizeInsertions": 26,
            "sizeDeletions": 8
        },
        {
            "number": 4,
            "revision": "3afdaaf36e7e7cd8ea0b8cee43b15811b8766868",
            "parents": [
                "35aa9a889fda41d75a35633faba1b081c70ce86c"
            ],
            "ref": "refs/changes/21/52421/4",
            "uploader": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "createdOn": 1649452755,
            "author": {
                "name": "Zami Seck",
                "email": "zimzam17@gmail.com",
                "username": "zamiseck"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "activation.cpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -8
                }
            ],
            "sizeInsertions": 26,
            "sizeDeletions": 8
        }
    ]
}