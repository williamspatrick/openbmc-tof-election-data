{
    "project": "openbmc/phosphor-fan-presence",
    "branch": "master",
    "topic": "ibm3262",
    "id": "Idab52a7533d626f1f7ef03397f904a74cb6457a3",
    "number": 50875,
    "subject": "control: `nameOwnerChanged` signals update all caches",
    "owner": {
        "name": "Matthew Barth",
        "email": "barton17pb@gmail.com",
        "username": "msbarth"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-fan-presence/+/50875",
    "commitMessage": "control: `nameOwnerChanged` signals update all caches\n\nWhen a `nameOwnerChanged` signal is received, update all entries within\nthe service tree cache for the given service's owner state change. Also,\nuse the service tree cache to cross reference removal of the associated\ninterfaces from objects within the objects cache.\n\nChange-Id: Idab52a7533d626f1f7ef03397f904a74cb6457a3\nSigned-off-by: Matthew Barth <msbarth@us.ibm.com>\n",
    "createdOn": 1643837532,
    "lastUpdated": 1644346370,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1643837532,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1643837542,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1643837542,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1643837619,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/36501/ : SUCCESS"
        },
        {
            "timestamp": 1643839372,
            "reviewer": {
                "name": "Mike Capps",
                "email": "mikepcapps@gmail.com",
                "username": "mikecgithub"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1643840063,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1643840071,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1643840073,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1643840073,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1643840882,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/36505/ : FAILURE"
        },
        {
            "timestamp": 1643840967,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1643840976,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "message": "Patch Set 2: Ok-To-Test+1"
        },
        {
            "timestamp": 1643841117,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/36507/ : SUCCESS"
        },
        {
            "timestamp": 1643842488,
            "reviewer": {
                "name": "Mike Capps",
                "email": "mikepcapps@gmail.com",
                "username": "mikecgithub"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1643842731,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "message": "Patch Set 2: -Ok-To-Test\n\n(1 comment)"
        },
        {
            "timestamp": 1643900752,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1643900762,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1643900762,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1643900808,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1643900855,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/36538/ : SUCCESS"
        },
        {
            "timestamp": 1643905405,
            "reviewer": {
                "name": "Mike Capps",
                "email": "mikepcapps@gmail.com",
                "username": "mikecgithub"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1643986284,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1644245282,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "message": "Patch Set 3: Code-Review+2"
        },
        {
            "timestamp": 1644245438,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "message": "Change has been successfully rebased and submitted as 6d8e2d3ed2dd9e19544f16ee395ff25f3e22c28e"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "c1658a22d70fa0a2f69d3bd82a9d843464b35e2d",
            "parents": [
                "cf8847e3d39ee45e167897d6581383c4ff7dd9d2"
            ],
            "ref": "refs/changes/75/50875/1",
            "uploader": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "createdOn": 1643837532,
            "author": {
                "name": "Matthew Barth",
                "email": "msbarth@us.ibm.com",
                "username": ""
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "control/json/manager.cpp",
                    "line": 320,
                    "reviewer": {
                        "name": "Mike Capps",
                        "email": "mikepcapps@gmail.com",
                        "username": "mikecgithub"
                    },
                    "message": "isn't this (the for() loop above + this if() statement) the same thing as a stanard map lookup? auto itServ = itPath.second.find(serv); ? You only want the map element whose key is serv."
                },
                {
                    "file": "control/json/manager.cpp",
                    "line": 320,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "barton17pb@gmail.com",
                        "username": "msbarth"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "control/json/triggers/signal.cpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -6
                },
                {
                    "file": "control/json/manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": 0
                },
                {
                    "file": "control/json/manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 26,
                    "deletions": 0
                },
                {
                    "file": "control/json/triggers/handlers.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -5
                }
            ],
            "sizeInsertions": 61,
            "sizeDeletions": 11
        },
        {
            "number": 2,
            "revision": "d5deda1c39a4ab4e90d803a55bc3b74a4953f259",
            "parents": [
                "cf8847e3d39ee45e167897d6581383c4ff7dd9d2"
            ],
            "ref": "refs/changes/75/50875/2",
            "uploader": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "createdOn": 1643840063,
            "author": {
                "name": "Matthew Barth",
                "email": "msbarth@us.ibm.com",
                "username": ""
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "barton17pb@gmail.com",
                        "username": "msbarth"
                    },
                    "message": "CI fail unrelated to change\n\nFileNotFoundError: [Errno 2] No such file or directory: '/tmp/tmpbnqocx7l/system_bus_socket'"
                },
                {
                    "file": "control/json/manager.cpp",
                    "line": 329,
                    "reviewer": {
                        "name": "Mike Capps",
                        "email": "mikepcapps@gmail.com",
                        "username": "mikecgithub"
                    },
                    "message": "Is it a given that _objects[itPath.first] will exist? operator[] will create an entry if the key doesnt exist. This is legal and wont cause a malfunction, but it could have an adverse memory impact depending on how many superfluous objects get created."
                },
                {
                    "file": "control/json/manager.cpp",
                    "line": 329,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "barton17pb@gmail.com",
                        "username": "msbarth"
                    },
                    "message": "Good point. It \"should\" already exist since all object paths would have been found thru the initial subtree call however for completeness, I'll update this to only erase the interface(s) if the path is in the object cache."
                },
                {
                    "file": "control/json/manager.cpp",
                    "line": 329,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "barton17pb@gmail.com",
                        "username": "msbarth"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "control/json/triggers/signal.cpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -6
                },
                {
                    "file": "control/json/manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": 0
                },
                {
                    "file": "control/json/manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "control/json/triggers/handlers.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -5
                }
            ],
            "sizeInsertions": 58,
            "sizeDeletions": 11
        },
        {
            "number": 3,
            "revision": "326e7d01515be4f7a9167af7fee45ce1bb0d8bf2",
            "parents": [
                "cf8847e3d39ee45e167897d6581383c4ff7dd9d2"
            ],
            "ref": "refs/changes/75/50875/3",
            "uploader": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "createdOn": 1643900752,
            "author": {
                "name": "Matthew Barth",
                "email": "msbarth@us.ibm.com",
                "username": ""
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "control/json/triggers/signal.cpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -6
                },
                {
                    "file": "control/json/manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": 0
                },
                {
                    "file": "control/json/manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "control/json/triggers/handlers.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -5
                }
            ],
            "sizeInsertions": 58,
            "sizeDeletions": 11
        },
        {
            "number": 4,
            "revision": "6d8e2d3ed2dd9e19544f16ee395ff25f3e22c28e",
            "parents": [
                "21dc91f693b5b127c5f4fd4dbe881f9ba6827559"
            ],
            "ref": "refs/changes/75/50875/4",
            "uploader": {
                "name": "Matthew Barth",
                "email": "barton17pb@gmail.com",
                "username": "msbarth"
            },
            "createdOn": 1644245438,
            "author": {
                "name": "Matthew Barth",
                "email": "msbarth@us.ibm.com",
                "username": ""
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "control/json/triggers/signal.cpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -6
                },
                {
                    "file": "control/json/manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": 0
                },
                {
                    "file": "control/json/manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "control/json/triggers/handlers.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -5
                }
            ],
            "sizeInsertions": 58,
            "sizeDeletions": 11
        }
    ]
}