{
    "project": "openbmc/openpower-vpd-parser",
    "branch": "master",
    "id": "I9dc991bd795cf3fad31cbd5da92cf8cd56b8aa6b",
    "number": 51398,
    "subject": "Fix code bug",
    "owner": {
        "email": "alpu8007@gmail.com",
        "username": "Alpana07"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/openpower-vpd-parser/+/51398",
    "commitMessage": "Fix code bug\n\nBefore fetching any of the JSON's key, need to check it's presence.\nIf we try to fetch the keyword and it is not present in the json\nthen code crashes in runtime.\nAlso, added a check before executing driver binding command, as with\nblank i2c address this execution will do nothing.\n\nSigned-off-by: Alpana Kumari <alpankum@in.ibm.com>\nChange-Id: I9dc991bd795cf3fad31cbd5da92cf8cd56b8aa6b\n",
    "createdOn": 1645299015,
    "lastUpdated": 1646626048,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1645299015,
            "reviewer": {
                "email": "alpu8007@gmail.com",
                "username": "Alpana07"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1645299028,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1645299028,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1645299173,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/37686/ : SUCCESS"
        },
        {
            "timestamp": 1645426867,
            "reviewer": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik@in.ibm.com",
                "username": "santoshpuranik"
            },
            "message": "Patch Set 1: Code-Review-1\n\n(1 comment)"
        },
        {
            "timestamp": 1645439379,
            "reviewer": {
                "email": "alpu8007@gmail.com",
                "username": "Alpana07"
            },
            "message": "Patch Set 2: Published edit on patch set 1."
        },
        {
            "timestamp": 1645439394,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1645439394,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1645439395,
            "reviewer": {
                "email": "alpu8007@gmail.com",
                "username": "Alpana07"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1645439418,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/37714/ : FAILURE"
        },
        {
            "timestamp": 1645635936,
            "reviewer": {
                "email": "alpu8007@gmail.com",
                "username": "Alpana07"
            },
            "message": "Uploaded patch set 3: New patch set was added with same tree, parent, and commit message as Patch Set 2."
        },
        {
            "timestamp": 1645635944,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1"
        },
        {
            "timestamp": 1645635945,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1645635945,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1645635969,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3:\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/37902/ : FAILURE"
        },
        {
            "timestamp": 1645636140,
            "reviewer": {
                "email": "alpu8007@gmail.com",
                "username": "Alpana07"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1645636150,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1645636150,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1645636485,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/37903/ : SUCCESS"
        },
        {
            "timestamp": 1646371589,
            "reviewer": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik@in.ibm.com",
                "username": "santoshpuranik"
            },
            "message": "Patch Set 4: Code-Review-1\n\n(1 comment)"
        },
        {
            "timestamp": 1646375846,
            "reviewer": {
                "email": "alpu8007@gmail.com",
                "username": "Alpana07"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1646386694,
            "reviewer": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik@in.ibm.com",
                "username": "santoshpuranik"
            },
            "message": "Patch Set 4: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1646387686,
            "reviewer": {
                "email": "alpu8007@gmail.com",
                "username": "Alpana07"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1646388208,
            "reviewer": {
                "name": "SunnySrivastava",
                "email": "sunnsr25@in.ibm.com",
                "username": "SunnySrivastava1984"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1646390402,
            "reviewer": {
                "email": "alpu8007@gmail.com",
                "username": "Alpana07"
            },
            "message": "Uploaded patch set 5: Commit message was updated."
        },
        {
            "timestamp": 1646390804,
            "reviewer": {
                "name": "SunnySrivastava",
                "email": "sunnsr25@in.ibm.com",
                "username": "SunnySrivastava1984"
            },
            "message": "Patch Set 5: Code-Review-1\n\n(1 comment)"
        },
        {
            "timestamp": 1646390991,
            "reviewer": {
                "email": "alpu8007@gmail.com",
                "username": "Alpana07"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1646391057,
            "reviewer": {
                "email": "alpu8007@gmail.com",
                "username": "Alpana07"
            },
            "message": "Patch Set 5:\n\n(3 comments)"
        },
        {
            "timestamp": 1646391366,
            "reviewer": {
                "name": "SunnySrivastava",
                "email": "sunnsr25@in.ibm.com",
                "username": "SunnySrivastava1984"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1646392759,
            "reviewer": {
                "email": "alpu8007@gmail.com",
                "username": "Alpana07"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1646393195,
            "reviewer": {
                "name": "SunnySrivastava",
                "email": "sunnsr25@in.ibm.com",
                "username": "SunnySrivastava1984"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1646393857,
            "reviewer": {
                "email": "alpu8007@gmail.com",
                "username": "Alpana07"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1646394001,
            "reviewer": {
                "name": "SunnySrivastava",
                "email": "sunnsr25@in.ibm.com",
                "username": "SunnySrivastava1984"
            },
            "message": "Patch Set 5: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1646626043,
            "reviewer": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik@in.ibm.com",
                "username": "santoshpuranik"
            },
            "message": "Patch Set 5: Code-Review+2"
        },
        {
            "timestamp": 1646626048,
            "reviewer": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik@in.ibm.com",
                "username": "santoshpuranik"
            },
            "message": "Change has been successfully rebased and submitted as 64b9f5f12083b15e47d1df63a3be3500d8c842c4"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "9efb9f9cac18f4492d2042db14e0be6eeada7aa6",
            "parents": [
                "187bc274184969959dfb3f337bbb13eb9ea6d387"
            ],
            "ref": "refs/changes/98/51398/1",
            "uploader": {
                "email": "alpu8007@gmail.com",
                "username": "Alpana07"
            },
            "createdOn": 1645299015,
            "author": {
                "email": "alpu8007@gmail.com",
                "username": "Alpana07"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "ibm_vpd_app.cpp",
                    "line": 490,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik@in.ibm.com",
                        "username": "santoshpuranik"
                    },
                    "message": "This won't compile"
                },
                {
                    "file": "ibm_vpd_app.cpp",
                    "line": 490,
                    "reviewer": {
                        "email": "alpu8007@gmail.com",
                        "username": "Alpana07"
                    },
                    "message": "Ack"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "ibm_vpd_app.cpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -6
                },
                {
                    "file": "vpd-manager/gpioMonitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": -10
                }
            ],
            "sizeInsertions": 38,
            "sizeDeletions": 16
        },
        {
            "number": 2,
            "revision": "f4f1d88cea2ef69cac4bce686717fe2c48dfec78",
            "parents": [
                "187bc274184969959dfb3f337bbb13eb9ea6d387"
            ],
            "ref": "refs/changes/98/51398/2",
            "uploader": {
                "email": "alpu8007@gmail.com",
                "username": "Alpana07"
            },
            "createdOn": 1645439379,
            "author": {
                "email": "alpu8007@gmail.com",
                "username": "Alpana07"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "ibm_vpd_app.cpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -6
                },
                {
                    "file": "vpd-manager/gpioMonitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": -10
                }
            ],
            "sizeInsertions": 38,
            "sizeDeletions": 16
        },
        {
            "number": 3,
            "revision": "68b37cb6e88bac94dfabf1cc35ff83a4e3128951",
            "parents": [
                "187bc274184969959dfb3f337bbb13eb9ea6d387"
            ],
            "ref": "refs/changes/98/51398/3",
            "uploader": {
                "email": "alpu8007@gmail.com",
                "username": "Alpana07"
            },
            "createdOn": 1645635936,
            "author": {
                "email": "alpu8007@gmail.com",
                "username": "Alpana07"
            },
            "kind": "NO_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "ibm_vpd_app.cpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -6
                },
                {
                    "file": "vpd-manager/gpioMonitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": -10
                }
            ],
            "sizeInsertions": 38,
            "sizeDeletions": 16
        },
        {
            "number": 4,
            "revision": "8dd9226e1d032d48f650412d23ae7a53e0f08c67",
            "parents": [
                "187bc274184969959dfb3f337bbb13eb9ea6d387"
            ],
            "ref": "refs/changes/98/51398/4",
            "uploader": {
                "email": "alpu8007@gmail.com",
                "username": "Alpana07"
            },
            "createdOn": 1645636140,
            "author": {
                "email": "alpu8007@gmail.com",
                "username": "Alpana07"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "SunnySrivastava",
                        "email": "sunnsr25@in.ibm.com",
                        "username": "SunnySrivastava1984"
                    },
                    "message": "Will wait for you to update the commit message. I will score post that."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "email": "alpu8007@gmail.com",
                        "username": "Alpana07"
                    },
                    "message": "Done"
                },
                {
                    "file": "ibm_vpd_app.cpp",
                    "line": 490,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik@in.ibm.com",
                        "username": "santoshpuranik"
                    },
                    "message": "Are you sure this \"crashes\" like you describe in the commit message? .value() is supposed to return the default \"\" if the devAddress key isn't found."
                },
                {
                    "file": "ibm_vpd_app.cpp",
                    "line": 490,
                    "reviewer": {
                        "email": "alpu8007@gmail.com",
                        "username": "Alpana07"
                    },
                    "message": "No, this place will not crash as you said.\nChecking the keyword here is to avoid executeCmd, which will not do anything without i2c line and address. 491-495 will be executed for nothing.\n\nAnd for best practice we should always check existence of any keyword before fetching it's value."
                },
                {
                    "file": "ibm_vpd_app.cpp",
                    "line": 490,
                    "reviewer": {
                        "name": "Santosh Puranik",
                        "email": "santosh.puranik@in.ibm.com",
                        "username": "santoshpuranik"
                    },
                    "message": "Okay, just did not match your commit message. You might want to update the message accordingly"
                },
                {
                    "file": "ibm_vpd_app.cpp",
                    "line": 490,
                    "reviewer": {
                        "email": "alpu8007@gmail.com",
                        "username": "Alpana07"
                    },
                    "message": "okay, will update the commit message"
                },
                {
                    "file": "ibm_vpd_app.cpp",
                    "line": 490,
                    "reviewer": {
                        "email": "alpu8007@gmail.com",
                        "username": "Alpana07"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "ibm_vpd_app.cpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -6
                },
                {
                    "file": "vpd-manager/gpioMonitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": -10
                }
            ],
            "sizeInsertions": 39,
            "sizeDeletions": 16
        },
        {
            "number": 5,
            "revision": "e2c7e2bd2ed2fa3a3509f914a78233122fa6f125",
            "parents": [
                "187bc274184969959dfb3f337bbb13eb9ea6d387"
            ],
            "ref": "refs/changes/98/51398/5",
            "uploader": {
                "email": "alpu8007@gmail.com",
                "username": "Alpana07"
            },
            "createdOn": 1646390402,
            "author": {
                "email": "alpu8007@gmail.com",
                "username": "Alpana07"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "SunnySrivastava",
                        "email": "sunnsr25@in.ibm.com",
                        "username": "SunnySrivastava1984"
                    },
                    "message": "I still don't understand this. \nThe code that was before will not crash because that was defaulting it to \"\".\nThe code that you added is to check before executing driver binding command.\n\nSo why this is there in the commit message?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "email": "alpu8007@gmail.com",
                        "username": "Alpana07"
                    },
                    "message": "https://gerrit.openbmc-project.xyz/c/openbmc/openpower-vpd-parser/+/51398/5/vpd-manager/gpioMonitor.cpp#99\nThis was crashing for Everest system, in one of our simics Jenkins"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "email": "alpu8007@gmail.com",
                        "username": "Alpana07"
                    },
                    "message": "Ack"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "SunnySrivastava",
                        "email": "sunnsr25@in.ibm.com",
                        "username": "SunnySrivastava1984"
                    },
                    "message": "The code that is there in base commit is \njson[\"frus\"][file].at(0).value(\"devAddress\", \"\");\n\nWhere as the link that you have pasted is doing direct access.\n\nSo one is using \".value\" where the value is defaulted. So it will not crash. Direct access can crash.\nSo these are two diferent scenarios.\n\nNow coming down to this commit message.\nThis code was not intended to solve any crash, as there was none here.\nThe code that you added was only required to execute the driver bind command conditionally."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "email": "alpu8007@gmail.com",
                        "username": "Alpana07"
                    },
                    "message": "This piece of code was crashing because of absence of these keywords in Everest json-\n                {\n\n                // Init all Gpio info variables\n                    devNameAddr = eachInventory[\"devAddress\"];\n                    driverType = eachInventory[\"driverType\"];\n                    busType = eachInventory[\"busType\"];\n\nI'm not understanding what are you saying in prev msg?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "SunnySrivastava",
                        "email": "sunnsr25@in.ibm.com",
                        "username": "SunnySrivastava1984"
                    },
                    "message": "devNameAddr = eachInventory[\"devAddress\"];\n   driverType = eachInventory[\"driverType\"];\n   busType = eachInventory[\"busType\"];\n\nThese are direct access these can crash. \n\nWhere as the code that you have changed in this commit is json[\"frus\"][file].at(0).value(\"devAddress\", \"\"); \nWhich is not a direct access, it will not crash. \n\nHence what I am trying to say is that your code change is not to fix any crash as reflected by the commit message."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "email": "alpu8007@gmail.com",
                        "username": "Alpana07"
                    },
                    "message": "Where as the code that you have changed in this commit is json[\"frus\"][file].at(0).value(\"devAddress\", \"\"); \nWhich is not a direct access, it will not crash. \n\nI agree with your statement but that is just a half part of this commit.\n\nIf you see there are 2 file changes-\n1. ibm_vpd_app.cpp \n2. vpd-manager/gpioMonitor.cpp \n\none is for-  json[\"frus\"][file].at(0).value(\"devAddress\", \"\"); \n2nd one is for - devNameAddr = eachInventory[\"devAddress\"];\n               These are direct access these can crash. \n\nAnd hence I have that msg in commit msg."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "SunnySrivastava",
                        "email": "sunnsr25@in.ibm.com",
                        "username": "SunnySrivastava1984"
                    },
                    "message": "Ack"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "ibm_vpd_app.cpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -6
                },
                {
                    "file": "vpd-manager/gpioMonitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": -10
                }
            ],
            "sizeInsertions": 41,
            "sizeDeletions": 16
        },
        {
            "number": 6,
            "revision": "64b9f5f12083b15e47d1df63a3be3500d8c842c4",
            "parents": [
                "01e6c6352adcc3a1e2746ef951e4a681c80ca596"
            ],
            "ref": "refs/changes/98/51398/6",
            "uploader": {
                "name": "Santosh Puranik",
                "email": "santosh.puranik@in.ibm.com",
                "username": "santoshpuranik"
            },
            "createdOn": 1646626048,
            "author": {
                "email": "alpu8007@gmail.com",
                "username": "Alpana07"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "ibm_vpd_app.cpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -6
                },
                {
                    "file": "vpd-manager/gpioMonitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": -10
                }
            ],
            "sizeInsertions": 41,
            "sizeDeletions": 16
        }
    ]
}