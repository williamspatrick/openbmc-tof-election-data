{
    "project": "openbmc/bmcweb",
    "branch": "master",
    "id": "I122774be1f81da6e5c3a833b83d2bd81b437c298",
    "number": 53791,
    "subject": "memory: Precisely match DIMM ID",
    "owner": {
        "name": "Sui Chen",
        "email": "suichen@google.com",
        "username": "quadpixels"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/bmcweb/+/53791",
    "commitMessage": "memory: Precisely match DIMM ID\n\nCurrently, getDimmData uses std::string::find to determine if a DBus\npath contains a dimmId. The result is if we have the following paths:\n\n/xyz/openbmc_project/inventory/system/chassis/motherboard/dimm1\n/xyz/openbmc_project/inventory/system/chassis/motherboard/dimm10\n/xyz/openbmc_project/inventory/system/chassis/motherboard/dimm11\n...\n/xyz/openbmc_project/inventory/system/chassis/motherboard/dimm19\n\nThey will all be considered to match dimmId \"dimm1\" with string::find.\n\nThis change switches to sdbusplus::message::object_path::filename(), so\npartial matches may be prevented.\n\nThis change also considers partition data and works for partitions.\n\nTested:\n1. No new Redfish Validator errors\n2. In my mock environment\nURL: /redfish/v1/Systems/system/Memory/dimm0\n{\n    \"@odata.id\": \"/redfish/v1/Systems/system/Memory/dimm0\",\n    \"@odata.type\": \"#Memory.v1_11_0.Memory\",\n    \"AllowedSpeedsMHz\": [],\n    \"BaseModuleType\": \"RDIMM\",\n    \"BusWidthBits\": 0,\n    \"CapacityMiB\": 1024,\n    \"DataWidthBits\": 0,\n    \"ErrorCorrection\": \"NoECC\",\n    \"FirmwareRevision\": \"0\",\n    \"Id\": \"dimm0\",\n    \"Name\": \"DIMM Slot\",\n    \"OperatingSpeedMhz\": 0,\n    \"RankCount\": 0,\n    \"Regions\": [\n        {\n            \"MemoryClassification\": \"Volatile\",\n            \"OffsetMiB\": 0,\n            \"PassphraseEnabled\": false,\n            \"RegionId\": \"\",\n            \"SizeMiB\": 1024\n        }\n    ],\n    \"Status\": {\n        \"Health\": \"OK\",\n        \"HealthRollup\": \"OK\",\n        \"State\": \"Enabled\"\n    }\n}\n\n\nSigned-off-by: Sui Chen <suichen@google.com>\nChange-Id: I122774be1f81da6e5c3a833b83d2bd81b437c298\n",
    "createdOn": 1652824344,
    "lastUpdated": 1654834515,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1652824344,
            "reviewer": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1652824362,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1652824363,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1652824700,
            "reviewer": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "message": "Set Work In Progress"
        },
        {
            "timestamp": 1652824708,
            "reviewer": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1652824723,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1652824723,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1652824728,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/43423/ : ABORTED"
        },
        {
            "timestamp": 1652824760,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/43424/ : FAILURE"
        },
        {
            "timestamp": 1652828205,
            "reviewer": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1652828218,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1652828218,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1652828240,
            "reviewer": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "message": "Set Ready For Review"
        },
        {
            "timestamp": 1652828656,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/43427/ : FAILURE"
        },
        {
            "timestamp": 1652828800,
            "reviewer": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1652828813,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1652828813,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1652829484,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/43429/ : SUCCESS"
        },
        {
            "timestamp": 1653412844,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 4:\n\n(2 comments)"
        },
        {
            "timestamp": 1653427304,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1653427413,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1653430501,
            "reviewer": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1653430572,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1653430573,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1653430574,
            "reviewer": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "message": "Patch Set 4:\n\n(3 comments)"
        },
        {
            "timestamp": 1653431246,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/43753/ : SUCCESS"
        },
        {
            "timestamp": 1653437544,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1653448000,
            "reviewer": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1653490638,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 5: Code-Review+1\n\n(2 comments)"
        },
        {
            "timestamp": 1653495468,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 5:\n\n(3 comments)"
        },
        {
            "timestamp": 1653495547,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1653497570,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 5:\n\n(2 comments)"
        },
        {
            "timestamp": 1653497708,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1653501824,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1653503944,
            "reviewer": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1653506124,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1653506818,
            "reviewer": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "message": "Uploaded patch set 6."
        },
        {
            "timestamp": 1653507321,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1653507321,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: -Ok-To-Test"
        },
        {
            "timestamp": 1653507863,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/43810/ : FAILURE"
        },
        {
            "timestamp": 1653691321,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 6:\n\n(2 comments)"
        },
        {
            "timestamp": 1654707577,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Uploaded patch set 7."
        },
        {
            "timestamp": 1654707617,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1654707617,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: -Ok-To-Test"
        },
        {
            "timestamp": 1654707709,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/44596/ : FAILURE"
        },
        {
            "timestamp": 1654707756,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Uploaded patch set 8."
        },
        {
            "timestamp": 1654707761,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1654707851,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1654707856,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: -Ok-To-Test"
        },
        {
            "timestamp": 1654709484,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/44599/ : FAILURE"
        },
        {
            "timestamp": 1654766129,
            "reviewer": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1654821608,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1654822316,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Uploaded patch set 9."
        },
        {
            "timestamp": 1654822337,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1654822363,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1654822363,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: -Ok-To-Test"
        },
        {
            "timestamp": 1654822616,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 10: Commit message was updated."
        },
        {
            "timestamp": 1654822812,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/44756/ : FAILURE"
        },
        {
            "timestamp": 1654823315,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 11: Published edit on patch set 10."
        },
        {
            "timestamp": 1654823373,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 11: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1654823378,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 11: -Ok-To-Test"
        },
        {
            "timestamp": 1654823879,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 11: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/44758/ : SUCCESS"
        },
        {
            "timestamp": 1654834510,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 11: Code-Review+2\n\n(1 comment)"
        },
        {
            "timestamp": 1654834515,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Change has been successfully rebased and submitted as 7267c21d36a0dfce37f4821e9cd0994156ae3ba7"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "46f7a90148e04c9b0814c641dd5c8dc6dd5ce487",
            "parents": [
                "c3e85ec36da7a64cf46f8767e70ed91fdb293078"
            ],
            "ref": "refs/changes/91/53791/1",
            "uploader": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "createdOn": 1652824344,
            "author": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 24,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "type": "MODIFIED",
                    "insertions": 20,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 44,
            "sizeDeletions": 1
        },
        {
            "number": 2,
            "revision": "53ffed1823d83939993c614afbb928b051167faa",
            "parents": [
                "c3e85ec36da7a64cf46f8767e70ed91fdb293078"
            ],
            "ref": "refs/changes/91/53791/2",
            "uploader": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "createdOn": 1652824708,
            "author": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 24,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "type": "MODIFIED",
                    "insertions": 16,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 40,
            "sizeDeletions": 1
        },
        {
            "number": 3,
            "revision": "2a25cad39dbdaa15d7aaaf2384659ed3314a4724",
            "parents": [
                "02da7c5a626a747ce93aead08ee050678a16c79b"
            ],
            "ref": "refs/changes/91/53791/3",
            "uploader": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "createdOn": 1652828205,
            "author": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 26,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "type": "MODIFIED",
                    "insertions": 17,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 43,
            "sizeDeletions": 1
        },
        {
            "number": 4,
            "revision": "8ae5896cb3e169dbc0352a9e2d5292812d8c0d7d",
            "parents": [
                "02da7c5a626a747ce93aead08ee050678a16c79b"
            ],
            "ref": "refs/changes/91/53791/4",
            "uploader": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "createdOn": 1652828800,
            "author": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "line": 804,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Should we use association to link Partition and DIMMs instead?"
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "line": 804,
                    "reviewer": {
                        "name": "Sui Chen",
                        "email": "suichen@google.com",
                        "username": "quadpixels"
                    },
                    "message": "If I understand correctly, \"PersistentMemory\" is about byte-addressible PMEM (or NVDIMM) devices (like Intel Optane DIMM).\n\nSo for regular volatile memory there might not be partition data available? (this is the case on the system I'm testing and it doesn't seem to feature persistent DIMM)\n\nThe code in this \"getDimmData\" function also seems to populate different information based on whether a memory resource is volatile DIMM or non-volatile DIMM."
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "line": 804,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "I don't have a full context about the physical devices, but what I meant here is in the original code, if there is a Partition Object whose path contains the specific DIMM, it will be considered as \"Partitions\" property of that DIMM.\n\nSo, does a partition object's path also end with the same dimm ID?"
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "line": 804,
                    "reviewer": {
                        "name": "Sui Chen",
                        "email": "suichen@google.com",
                        "username": "quadpixels"
                    },
                    "message": "For the following variables:\n\n1. dimmId passed in to this function\n2. the DIMM ID in a `PersistentMemory`'s partition's object path\n3. the DIMM ID in a `Inventory.Item.Dimm`'s object path\n4. the LocationCode property of a Dimm inventory\n\nI believe 1, 2, 3 must match while 4 don't have to agree with the top 3. Because 4 can be set in the SMBIOS, plus DIMM is a form factor, it doesn't matter if the memory stick is volatile or non-volatile, or a hybrid of volatile or non-volatile. Or in other words, a DIMM is a property of the socket, not the content in it.\n\nThe particular system I'm testing on does not have any PersistentMemory devices. If I find any exceptions of what I claimed above I'll update here."
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "line": 804,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Please see my another comment."
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "line": 804,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I'm quite confused...... This changeset is literally just fixing a bug, in the recommended way;  I'm not sure what this has to do with associations at all, or why we're talking about persistent memory (ie nvdimm).\n\nArguably, listing a PersistentMemory.Partition object as a \"Dimm\" is incorrect, but I don't think has any effect on this patchset, or I'm really missing something."
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "line": 804,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "I am not saying fixing comment error #12 is wrong. I just posted my question about Partitions. This fix will break partitions.\n\nI mention association because that's how we usually associate /xyz/openbmc_project/Inventory/Item/Partition1 and /xyz/openbmc_project/Inventory/Item/DIMM1, right?\n\nIf we know the existing Partition codes and comments are wrong, then we can delete them, right? Deleting partition codes also makes my change https://gerrit.openbmc.org/c/openbmc/bmcweb/+/53824 easier."
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "line": 804,
                    "reviewer": {
                        "name": "Sui Chen",
                        "email": "suichen@google.com",
                        "username": "quadpixels"
                    },
                    "message": "Oh I see, the question is for a path like \"/xyz/openbmc_project/Inventory/Item/Dimm1/Partition1\", `filename()` can only return \"Partition1\".\n\nChecking every level (\"Parititon1\", then \"Dimm1\", then \"Item\", then \"Inventory\", etgc) should work. This would be the intent of the original code. Let me update this change."
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "line": 804,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> If we know the existing Partition codes and comments are wrong, then we can delete them, right? Deleting partition codes also makes my change\n\nNot generally how that works.  It might be \"wrong\" internally, but give the correct response to the user.  There's an argument that might be made that OpenBMC doesn't have anything that implements these interfaces, but that's a different concern.\n\n> Oh I see, the question is for a path like \"/xyz/openbmc_project/Inventory/Item/Dimm1/Partition1\", `filename()` can only return \"Partition1\".\n\n\nBut returning Partition1 seems like the right response here?  The mapper queried all partitions, we want to enumerate Partition1, not dimm1."
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "line": 804,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "But we want Partition1 and Partition2 to be part of the properties of dimm1.\n\n\n```\n{\n    \"@odata.id\": \"/redfish/v1/Systems/system/Memory/dimm1\",\n    \"@odata.type\": \"#Memory.v1_11_0.Memory\",\n    \"Regions\": [\n        { \n            // from partition1\n            \"MemoryClassification\": \"Volatile\",\n            \"OffsetMiB\": 0,\n            \"PassphraseEnabled\": false,\n            \"RegionId\": \"\",\n            \"SizeMiB\": 1024\n        },\n        { \n            // from partition2\n            \"MemoryClassification\": \"Volatile\",\n            \"OffsetMiB\": 0,\n            \"PassphraseEnabled\": false,\n            \"RegionId\": \"\",\n            \"SizeMiB\": 1024\n        }\n    ],\n}\n```"
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "line": 804,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Done\n\nPlease take a look at the patch I pushed"
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "line": 807,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Common error #12"
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "line": 807,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "I thought Sui is trying to solve the existing error (#12) here."
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "line": 807,
                    "reviewer": {
                        "name": "Sui Chen",
                        "email": "suichen@google.com",
                        "username": "quadpixels"
                    },
                    "message": "Yeah somehow trying to resolve common error #12 and introduced common error #12 ..\nWill use the matching \"filename()\" method in the object path class."
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "line": 807,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> I thought Sui is trying to solve the existing error (#12) here.\n\nHe was, but still kept the common error in the code."
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "line": 816,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This relies on a naming convention that we can't enforce in bmcweb."
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "line": 816,
                    "reviewer": {
                        "name": "Sui Chen",
                        "email": "suichen@google.com",
                        "username": "quadpixels"
                    },
                    "message": "Switched to using sdbusplus::message::object_path::filename to avoid this problem."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 26,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 47,
            "sizeDeletions": 1
        },
        {
            "number": 5,
            "revision": "76b919efbc313922bdc6dd4707fc756cc05e3341",
            "parents": [
                "02da7c5a626a747ce93aead08ee050678a16c79b"
            ],
            "ref": "refs/changes/91/53791/5",
            "uploader": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "createdOn": 1653430501,
            "author": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "LGTM.  Leaving open for a day or two to see if this has any ill effects, but I can't imagine it does."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Please see my another comment."
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "line": 840,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Existing codes can handle this case:\n\n3 objects\n\n/xyz/openbmc_project/Inventory/Item/Dimm1\n/xyz/openbmc_project/Inventory/Item/Dimm1/Partition1\n/xyz/openbmc_project/Inventory/Item/Dimm1/Partition2\n\nThen Partition1 and Partition2 will be parsed as an attribute of Dimm1.\n\nBut your change assumes that the Dimm interface and the Partition interface are all implemented by a single object. This doesn't seem right, since how can you handle multiple partitions now?"
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "line": 840,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "multiple partitions: I would assume a single object can't implement Partition twice, so the DIMM object will ever be able to have a single partition."
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "line": 840,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "/xyz/openbmc_project/Inventory/Item/Dimm1/Partition1\n\nIs there a daemon that exposes this?  I don't think there is, and for some reason I thought it was /xyz/openbmc_project/Inventory/Item/Partition1."
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "line": 840,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "@Jason @Krzysztof, do you guys know how this is intended to be used?"
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "line": 840,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Asked in Discord."
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "line": 840,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Checked with Ed offline. There's a backend daemon. \n\nAnd the object path is /xyz/openbmc_project/Inventory/Item/DimmX/PartitionY"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 26,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 27,
            "sizeDeletions": 1
        },
        {
            "number": 6,
            "revision": "e65adbb3c91fdbf8a00aa85d46c2303860d08c45",
            "parents": [
                "02da7c5a626a747ce93aead08ee050678a16c79b"
            ],
            "ref": "refs/changes/91/53791/6",
            "uploader": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "createdOn": 1653506818,
            "author": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 26,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "type": "MODIFIED",
                    "insertions": 17,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 43,
            "sizeDeletions": 1
        },
        {
            "number": 7,
            "revision": "97ce0b5c6220756d6a6b185c9041a5f8172b8138",
            "parents": [
                "5b9e95a17fae7aaf9f8716b65345bb64ade5f403"
            ],
            "ref": "refs/changes/91/53791/7",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1654707577,
            "author": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "line": 805,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "We don't do case insensitive compares anywhere else, and if we do, we should use something intended for that, like icompare.\n\nI suspect this needs to be removed.\n\nI've made this change (untested)\n\nCan you guys make sure this works, then I think this patch can merge."
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "line": 805,
                    "reviewer": {
                        "name": "Sui Chen",
                        "email": "suichen@google.com",
                        "username": "quadpixels"
                    },
                    "message": "I examined the object names returned on my test system, the Item.Dimm objects are all owned by the smbios-mdr2 daemon. This daemon constructs the object names by concatenating `dimmPath` and the number, and dimmPath is all lowercase. (https://github.com/openbmc/smbios-mdr/blob/e4ea37716d0d282ef664d5a70979274fe40e7c8b/src/mdrv2.cpp#L445)\n\nBased on this, removing the \"to_lower_copy\" should work."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 26,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "type": "MODIFIED",
                    "insertions": 17,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 43,
            "sizeDeletions": 1
        },
        {
            "number": 8,
            "revision": "0c3838632b04cda33e2890018a68276cd58bbb02",
            "parents": [
                "5b9e95a17fae7aaf9f8716b65345bb64ade5f403"
            ],
            "ref": "refs/changes/91/53791/8",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1654707756,
            "author": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 26,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "type": "MODIFIED",
                    "insertions": 17,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 43,
            "sizeDeletions": 1
        },
        {
            "number": 9,
            "revision": "52a04e19636b68a8f928e9fc2304562f8c5d2682",
            "parents": [
                "5b9e95a17fae7aaf9f8716b65345bb64ade5f403"
            ],
            "ref": "refs/changes/91/53791/9",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1654822316,
            "author": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 28,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 43,
            "sizeDeletions": 1
        },
        {
            "number": 10,
            "revision": "7912121fbb5620adbf8eed61e740ab0d8c2fa0f8",
            "parents": [
                "5b9e95a17fae7aaf9f8716b65345bb64ade5f403"
            ],
            "ref": "refs/changes/91/53791/10",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1654822616,
            "author": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 61,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 76,
            "sizeDeletions": 1
        },
        {
            "number": 11,
            "revision": "841a10fbdbfa5fd8b3d0a1cbd7244ff8b26f76b2",
            "parents": [
                "5b9e95a17fae7aaf9f8716b65345bb64ade5f403"
            ],
            "ref": "refs/changes/91/53791/11",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1654823315,
            "author": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I suspect we'll have to revisit this, but it seems like it is better than what we've got, so merging."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 61,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 72,
            "sizeDeletions": 1
        },
        {
            "number": 12,
            "revision": "7267c21d36a0dfce37f4821e9cd0994156ae3ba7",
            "parents": [
                "593f6449a6afa130a28c4cc9a55fb857e019917e"
            ],
            "ref": "refs/changes/91/53791/12",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1654834515,
            "author": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 61,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/memory.hpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 72,
            "sizeDeletions": 1
        }
    ]
}