{
    "project": "openbmc/openbmc-tools",
    "branch": "master",
    "id": "Ice413270e744e83fc591ad360345f35c32ef24d5",
    "number": 51339,
    "subject": "Add ranking to developer script",
    "owner": {
        "name": "Ed Tanous",
        "email": "ed@tanous.net",
        "username": "edtanous"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/openbmc-tools/+/51339",
    "commitMessage": "Add ranking to developer script\n\nWhile it could always be better, many large corporations operate on data\nand numbers.  Given that the intent of this script and scoring is to\nattempt to quantify developer participation, it would be nice to be able\nto provide a concrete view of where an individual developer stands\nwithin a community to give opportunities for advancement, and to help\nquantify individuals improvement as they increase their velocity over\ntime.\n\nThis commit adds to the TOF report output a couple key parameters,\npercentile, and rank.  These take a developers given score, and provides\nan input to where they stand against the project as a whole over the\ngiven time period, and allows a quantitative measure for participation\nthat can be used as an (admittedly crude) yardstick.\n\nWhile I worry a little about this being taken too far, and being used as\nevidence that one developer as an individual is better than another, I would\nhope that it only reflects on their contributions to the OpenBMC\nproject, and that as a measure it would do less harm than good.\n\nWhile not directly important to the project, the hope is that by\nmeasuring and publishing this, it will improve individual developers\nability to quantify their open source contributions to their\norganization, thus incentivizing participation in the project upstream,\nand resulting in more participation overall.\n\nSigned-off-by: Ed Tanous <edtanous@google.com>\nChange-Id: Ice413270e744e83fc591ad360345f35c32ef24d5\n",
    "createdOn": 1645135557,
    "lastUpdated": 1648155714,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1645135557,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1645209589,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\n(2 comments)"
        },
        {
            "timestamp": 1645222346,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 1:\n\n(2 comments)"
        },
        {
            "timestamp": 1645222945,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1645222956,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1645223040,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1645310028,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 2: Code-Review+1"
        },
        {
            "timestamp": 1645653719,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1645654143,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2: -Code-Review\n\n(1 comment)"
        },
        {
            "timestamp": 1645891131,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1645892574,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1645893031,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1646172747,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 4: Commit message was updated."
        },
        {
            "timestamp": 1646172763,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1646173388,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 4:\n\n(2 comments)"
        },
        {
            "timestamp": 1646174803,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1648155714,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "50d293aa65e8942611c89b88e5422831a65f9047",
            "parents": [
                "385fd079135d3a7857150ebd759c99d59538b7d1"
            ],
            "ref": "refs/changes/39/51339/1",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1645135557,
            "author": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "tof-voters/libvoters/subcmd/report.py",
                    "line": 46,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I guess I forgot to format this file with `black`."
                },
                {
                    "file": "tof-voters/libvoters/subcmd/report.py",
                    "line": 46,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Learned about a new tool today.  I used autopep8 on this patch, and didn't catch that this was just whitespace.  Black looks more active than autopep8, so that's on my list of tools to install now.\n\nIf it matters I can break out the whitespace changes, but I suspect this is fine as is?"
                },
                {
                    "file": "tof-voters/libvoters/subcmd/report.py",
                    "line": 46,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Yes, fine as is."
                },
                {
                    "file": "tof-voters/libvoters/subcmd/report.py",
                    "line": 50,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "How about using a 'sorted' call here with a lambda that sorts on points?\n\nThat'll eliminate the O(n^2) search you're doing on line 53."
                },
                {
                    "file": "tof-voters/libvoters/subcmd/report.py",
                    "line": 50,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "ACK, seems reasonable."
                },
                {
                    "file": "tof-voters/libvoters/subcmd/report.py",
                    "line": 50,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 35,
                    "deletions": 0
                },
                {
                    "file": "tof-voters/libvoters/subcmd/report.py",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 48,
            "sizeDeletions": 3
        },
        {
            "number": 2,
            "revision": "6c122b05aa8becbda992b96c083cb51ab5e7e922",
            "parents": [
                "385fd079135d3a7857150ebd759c99d59538b7d1"
            ],
            "ref": "refs/changes/39/51339/2",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1645222945,
            "author": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "tof-voters/libvoters/subcmd/report.py",
                    "line": 53,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I don't know if this percentile is as useful as it seems in the current form.  For the \"Highly Productive\" number we only look at percentile within qualified members (ie. they have to have over 15 pts).  With the way you're calculating the metric, someone with a single commit ends up being listed as in the 40th percentile and someone who did exactly 1 review is in the 21st perentile.\n\nThere is a lot of noise in the Gerrit data because there are people who only operate in commits that are related to just a single company or people who seem to regularly give a token +1 without any feedback.  So, when we pull the data and find all the \"active users\" there are a lot more than those who are qualified."
                },
                {
                    "file": "tof-voters/libvoters/subcmd/report.py",
                    "line": 53,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> I don't know if this percentile is as useful as it seems in the current form.  For the \"Highly Productive\" number we only look at percentile within qualified members (ie. they have to have over 15 pts).  With the way you're calculating the metric, someone with a single commit ends up being listed as in the 40th percentile and someone who did exactly 1 review is in the 21st perentile.\n\nIDK, that kinda tells me the metric is working, considering that 40% of developers have zero commits on master in the quarter, but I'm open to other ideas.  Maybe we \"weight\" the percentile based on point count?\n\n\nFWIW, my use of this ranking is only really applied for the top 20 or so people on the list, so they can say \"I'm the #8 contributor in the world to openbmc\" on their yearly review, and get credit for their hard work.  At this point, I'm not using it for analyzing the lower 50% of reviewers.\n\n> \n> There is a lot of noise in the Gerrit data because there are people who only operate in commits that are related to just a single company or people who seem to regularly give a token +1 without any feedback.  So, when we pull the data and find all the \"active users\" there are a lot more than those who are qualified.\n\nYep."
                },
                {
                    "file": "tof-voters/libvoters/subcmd/report.py",
                    "line": 53,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "> FWIW, my use of this ranking is only really applied for the top 20 or so people on the list, so they can say \"I'm the #8 contributor in the world to openbmc\" on their yearly review, and get credit for their hard work.\n\nUnderstand.  Rank give you that and I have no concern about that metric.\n\n> Maybe we \"weight\" the percentile based on point count?\n\nMy opinion is that percentile should only \"among active developers\", which by our definition is anyone with 15pts or more, and this would align with our Highly Productive definition as well.\n\nUsing your example sentence and using the current code, someone who just barely qualifies with exactly 15 points could say \"I'm in the top 25% of all openbmc developers\", which is arguably a true statement, but not particularly helpful.\n\n> `percent = int(...)`\n\nWhile I'm at it, is it better for this to be `percent = 100 - int(...)` also?\n\nCurrent code meaning is: \"N% of developers have the same or less points than me\"\nProposed meaning is: \"N% of developers have the same or more points than me\".\n\nI think the second is more typical expectation of the statement \"I am in the Nth percentile of developers\".\n\n> `total_users-rank`\n\nSince we changed the rank to be 0-based, I think this is now more correct than it was, but I'm not positive.  Might want to devote a few brain cells to make sure the edge case of \"am I included in the percentile or not\" is covered by your math."
                },
                {
                    "file": "tof-voters/libvoters/subcmd/report.py",
                    "line": 53,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> > FWIW, my use of this ranking is only really applied for the top 20 or so people on the list, so they can say \"I'm the #8 contributor in the world to openbmc\" on their yearly review, and get credit for their hard work.\n> \n> Understand.  Rank give you that and I have no concern about that metric.\n> \n> > Maybe we \"weight\" the percentile based on point count?\n> \n> My opinion is that percentile should only \"among active developers\", which by our definition is anyone with 15pts or more, and this would align with our Highly Productive definition as well.\n\nACK.  Can make that change.\n\n> \n> Using your example sentence and using the current code, someone who just barely qualifies with exactly 15 points could say \"I'm in the top 25% of all openbmc developers\", which is arguably a true statement, but not particularly helpful.\n\nFair poitn.\n\n> \n> > `percent = int(...)`\n> \n> While I'm at it, is it better for this to be `percent = 100 - int(...)` also?\n> \n> Current code meaning is: \"N% of developers have the same or less points than me\"\n> Proposed meaning is: \"N% of developers have the same or more points than me\".\n> \n> I think the second is more typical expectation of the statement \"I am in the Nth percentile of developers\".\n\nAt first I wasn't on board, but in a little googling I'm realizing my brain thinks of it differently than most stats, so sure, easy to change.\n\n> \n> > `total_users-rank`\n> \n> Since we changed the rank to be 0-based, I think this is now more correct than it was, but I'm not positive.  Might want to devote a few brain cells to make sure the edge case of \"am I included in the percentile or not\" is covered by your math.\n\nYeah, I can do that.  FWIW, I'm under the assumption that a 1 count change in your position wouldn't amount to any meaningful change to the stat."
                },
                {
                    "file": "tof-voters/libvoters/subcmd/report.py",
                    "line": 54,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I don't know if you intended but this does 0-based ranking.  Should it be 1-based?"
                },
                {
                    "file": "tof-voters/libvoters/subcmd/report.py",
                    "line": 54,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "debatable what my intent was, but I agree, 1 based ranking is probably better."
                },
                {
                    "file": "tof-voters/libvoters/subcmd/report.py",
                    "line": 54,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 35,
                    "deletions": 0
                },
                {
                    "file": "tof-voters/libvoters/subcmd/report.py",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 46,
            "sizeDeletions": 4
        },
        {
            "number": 3,
            "revision": "a7cf1b1283084157dd38e09dc7cd73e7b2f711f5",
            "parents": [
                "385fd079135d3a7857150ebd759c99d59538b7d1"
            ],
            "ref": "refs/changes/39/51339/3",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1645892574,
            "author": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 35,
                    "deletions": 0
                },
                {
                    "file": "tof-voters/libvoters/entry_point.py",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                },
                {
                    "file": "tof-voters/libvoters/subcmd/dump-gerrit.py",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                },
                {
                    "file": "tof-voters/libvoters/subcmd/report.py",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -5
                }
            ],
            "sizeInsertions": 60,
            "sizeDeletions": 7
        },
        {
            "number": 4,
            "revision": "c78003ad52a10bb93e9812e54c51df1d6421f97f",
            "parents": [
                "385fd079135d3a7857150ebd759c99d59538b7d1"
            ],
            "ref": "refs/changes/39/51339/4",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1646172747,
            "author": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "ping.  I think this can merge?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "NVM, missed patricks comment."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 35,
                    "deletions": 0
                },
                {
                    "file": "tof-voters/libvoters/entry_point.py",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                },
                {
                    "file": "tof-voters/libvoters/subcmd/dump-gerrit.py",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                },
                {
                    "file": "tof-voters/libvoters/subcmd/report.py",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -5
                }
            ],
            "sizeInsertions": 60,
            "sizeDeletions": 7
        }
    ]
}