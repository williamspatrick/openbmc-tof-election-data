{
    "project": "openbmc/libbej",
    "branch": "main",
    "id": "Ice07527b23cd00c65cd11ed114ea4faefcc085fb",
    "number": 53702,
    "subject": "Add common data structures",
    "owner": {
        "name": "Kasun Athukorala",
        "email": "kasunath@google.com",
        "username": "kasunathg"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/libbej/+/53702",
    "commitMessage": "Add common data structures\n\nThis adds some common data structures and functions needed for RDE BEJ.\n\nThe decoder core is written in C so that we can use this with some other\nfuture platforms.\nclang-tidy is complaining about C style header. I tried adding a\n.clang-tidy-ignore file but it did not work. And since this is mainly a\nC library, I deleted the .clang-tidy.\n\nSigned-off-by: Kasun Athukorala <kasunath@google.com>\nChange-Id: Ice07527b23cd00c65cd11ed114ea4faefcc085fb\n",
    "createdOn": 1652380499,
    "lastUpdated": 1652397072,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1652380499,
            "reviewer": {
                "name": "Kasun Athukorala",
                "email": "kasunath@google.com",
                "username": "kasunathg"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1652380861,
            "reviewer": {
                "name": "Kasun Athukorala",
                "email": "kasunath@google.com",
                "username": "kasunathg"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1652381441,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 2:\n\n(7 comments)"
        },
        {
            "timestamp": 1652382533,
            "reviewer": {
                "name": "Kasun Athukorala",
                "email": "kasunath@google.com",
                "username": "kasunathg"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1652382574,
            "reviewer": {
                "name": "Kasun Athukorala",
                "email": "kasunath@google.com",
                "username": "kasunathg"
            },
            "message": "Patch Set 3:\n\n(7 comments)"
        },
        {
            "timestamp": 1652384296,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1652386446,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 3:\n\n(3 comments)"
        },
        {
            "timestamp": 1652386595,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1652388170,
            "reviewer": {
                "name": "Kasun Athukorala",
                "email": "kasunath@google.com",
                "username": "kasunathg"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1652388208,
            "reviewer": {
                "name": "Kasun Athukorala",
                "email": "kasunath@google.com",
                "username": "kasunathg"
            },
            "message": "Patch Set 4:\n\n(2 comments)"
        },
        {
            "timestamp": 1652390964,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 4:\n\n(4 comments)"
        },
        {
            "timestamp": 1652393178,
            "reviewer": {
                "name": "Kasun Athukorala",
                "email": "kasunath@google.com",
                "username": "kasunathg"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1652393209,
            "reviewer": {
                "name": "Kasun Athukorala",
                "email": "kasunath@google.com",
                "username": "kasunathg"
            },
            "message": "Patch Set 5:\n\n(4 comments)"
        },
        {
            "timestamp": 1652393407,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 5: Code-Review+2\n\n(1 comment)"
        },
        {
            "timestamp": 1652393411,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 5: Verified+1"
        },
        {
            "timestamp": 1652397072,
            "reviewer": {
                "name": "Kasun Athukorala",
                "email": "kasunath@google.com",
                "username": "kasunathg"
            },
            "message": "Change has been successfully merged"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "0a62762fd1f188639febd9861c6fc6a2cc1b2e8e",
            "parents": [
                "8bc8ba8e9903904d4261c52c9ee7bd1288910cb1"
            ],
            "ref": "refs/changes/02/53702/1",
            "uploader": {
                "name": "Kasun Athukorala",
                "email": "kasunath@google.com",
                "username": "kasunathg"
            },
            "createdOn": 1652380499,
            "author": {
                "name": "Kasun Athukorala",
                "email": "kasunath@google.com",
                "username": "kasunathg"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": ".clang-tidy",
                    "type": "DELETED",
                    "insertions": 0,
                    "deletions": -299
                },
                {
                    "file": "meson_options.txt",
                    "type": "ADDED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "src/rde_common.c",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "src/meson.build",
                    "type": "ADDED",
                    "insertions": 11,
                    "deletions": 0
                },
                {
                    "file": "test/rde_common_test.cpp",
                    "type": "ADDED",
                    "insertions": 39,
                    "deletions": 0
                },
                {
                    "file": "test/meson.build",
                    "type": "ADDED",
                    "insertions": 26,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "include/rde_common.h",
                    "type": "ADDED",
                    "insertions": 218,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 355,
            "sizeDeletions": 299
        },
        {
            "number": 2,
            "revision": "59703243884352b98a9a2ba7dfc3d60bceb8ac92",
            "parents": [
                "8bc8ba8e9903904d4261c52c9ee7bd1288910cb1"
            ],
            "ref": "refs/changes/02/53702/2",
            "uploader": {
                "name": "Kasun Athukorala",
                "email": "kasunath@google.com",
                "username": "kasunathg"
            },
            "createdOn": 1652380861,
            "author": {
                "name": "Kasun Athukorala",
                "email": "kasunath@google.com",
                "username": "kasunathg"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": ".clang-tidy",
                    "line": 2,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "revert."
                },
                {
                    "file": ".clang-tidy",
                    "line": 2,
                    "reviewer": {
                        "name": "Kasun Athukorala",
                        "email": "kasunath@google.com",
                        "username": "kasunathg"
                    },
                    "message": "I explained the reasoning for deleting this in the commit message."
                },
                {
                    "file": ".clang-tidy",
                    "line": 2,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "oops. I 100% didn't read it.\n\nyeah, I guess that's fine."
                },
                {
                    "file": "include/rde_common.h",
                    "line": 23,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "wouldn't this hit error with clang-tidy?\n\nNeed to use template function instead?"
                },
                {
                    "file": "include/rde_common.h",
                    "line": 23,
                    "reviewer": {
                        "name": "Kasun Athukorala",
                        "email": "kasunath@google.com",
                        "username": "kasunathg"
                    },
                    "message": "It does. This is for C code. So can't use template functions."
                },
                {
                    "file": "include/rde_common.h",
                    "line": 71,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "just need to define the first one. The others are implicit."
                },
                {
                    "file": "include/rde_common.h",
                    "line": 71,
                    "reviewer": {
                        "name": "Kasun Athukorala",
                        "email": "kasunath@google.com",
                        "username": "kasunathg"
                    },
                    "message": "True. I prefer to keep it this way so that it is easier to relate to the values in the BEJ standard."
                },
                {
                    "file": "include/rde_common.h",
                    "line": 71,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "you can change it back. but it should be consistent with the others."
                },
                {
                    "file": "include/rde_common.h",
                    "line": 71,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "."
                },
                {
                    "file": "include/rde_common.h",
                    "line": 71,
                    "reviewer": {
                        "name": "Kasun Athukorala",
                        "email": "kasunath@google.com",
                        "username": "kasunathg"
                    },
                    "message": "Sorry I missed this.. I feel like it depends on the context. Like, in BejError enum, we don't care about the numeric value except 0. But in BejPrincipalDataType we actually care about the numeric value. So depending on the context, I feel like we can explicitly mention the numeric value or not. In my opinion this increases the readability too. This way we know that BejReal has to be numeric value 9 etc. But we do not care whether BejErrorUnknown is numeric value 1 or 2 etc.\n\nBut if you disagree, I'll explicitly add numeric values to everything."
                },
                {
                    "file": "include/rde_common.h",
                    "line": 71,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "I just prefer consistency. I am fine with either way. I think for error it is fine since no actual value."
                },
                {
                    "file": "include/rde_common.h",
                    "line": 79,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "does `=` not work?"
                },
                {
                    "file": "include/rde_common.h",
                    "line": 79,
                    "reviewer": {
                        "name": "Kasun Athukorala",
                        "email": "kasunath@google.com",
                        "username": "kasunathg"
                    },
                    "message": "These are for C bit fields."
                },
                {
                    "file": "include/rde_common.h",
                    "line": 218,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "new line at eof"
                },
                {
                    "file": "include/rde_common.h",
                    "line": 218,
                    "reviewer": {
                        "name": "Kasun Athukorala",
                        "email": "kasunath@google.com",
                        "username": "kasunathg"
                    },
                    "message": "Done"
                },
                {
                    "file": "meson.build",
                    "line": 8,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "add c version?"
                },
                {
                    "file": "meson.build",
                    "line": 8,
                    "reviewer": {
                        "name": "Kasun Athukorala",
                        "email": "kasunath@google.com",
                        "username": "kasunathg"
                    },
                    "message": "Done"
                },
                {
                    "file": "src/rde_common.c",
                    "line": 8,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "static_cast. maybe not since this is C code."
                },
                {
                    "file": "src/rde_common.c",
                    "line": 8,
                    "reviewer": {
                        "name": "Kasun Athukorala",
                        "email": "kasunath@google.com",
                        "username": "kasunathg"
                    },
                    "message": "Yea, we can't use static_cast."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": ".clang-tidy",
                    "type": "DELETED",
                    "insertions": 0,
                    "deletions": -299
                },
                {
                    "file": "meson_options.txt",
                    "type": "ADDED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "src/rde_common.c",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "src/meson.build",
                    "type": "ADDED",
                    "insertions": 11,
                    "deletions": 0
                },
                {
                    "file": "test/rde_common_test.cpp",
                    "type": "ADDED",
                    "insertions": 39,
                    "deletions": 0
                },
                {
                    "file": "test/meson.build",
                    "type": "ADDED",
                    "insertions": 26,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "include/rde_common.h",
                    "type": "ADDED",
                    "insertions": 218,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 355,
            "sizeDeletions": 299
        },
        {
            "number": 3,
            "revision": "41d75f0d538aa7c3d1a3dc9e0222c7905e2721f0",
            "parents": [
                "8bc8ba8e9903904d4261c52c9ee7bd1288910cb1"
            ],
            "ref": "refs/changes/02/53702/3",
            "uploader": {
                "name": "Kasun Athukorala",
                "email": "kasunath@google.com",
                "username": "kasunathg"
            },
            "createdOn": 1652382533,
            "author": {
                "name": "Kasun Athukorala",
                "email": "kasunath@google.com",
                "username": "kasunathg"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "include/rde_common.h",
                    "line": 23,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "what happen if it is 0? it doesn't return anything then?"
                },
                {
                    "file": "include/rde_common.h",
                    "line": 23,
                    "reviewer": {
                        "name": "Kasun Athukorala",
                        "email": "kasunath@google.com",
                        "username": "kasunathg"
                    },
                    "message": "Yes. Only returns if there is an error (non-zero return code)."
                },
                {
                    "file": "meson.build",
                    "line": 8,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "c18 instead? I think that's the latest one"
                },
                {
                    "file": "meson.build",
                    "line": 8,
                    "reviewer": {
                        "name": "Kasun Athukorala",
                        "email": "kasunath@google.com",
                        "username": "kasunathg"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": ".clang-tidy",
                    "type": "DELETED",
                    "insertions": 0,
                    "deletions": -299
                },
                {
                    "file": "meson_options.txt",
                    "type": "ADDED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "src/rde_common.c",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "src/meson.build",
                    "type": "ADDED",
                    "insertions": 11,
                    "deletions": 0
                },
                {
                    "file": "test/rde_common_test.cpp",
                    "type": "ADDED",
                    "insertions": 39,
                    "deletions": 0
                },
                {
                    "file": "test/meson.build",
                    "type": "ADDED",
                    "insertions": 26,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "include/rde_common.h",
                    "type": "ADDED",
                    "insertions": 218,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 356,
            "sizeDeletions": 299
        },
        {
            "number": 4,
            "revision": "537d90ae4861d71454d431c6bd321c11ca51c89f",
            "parents": [
                "8bc8ba8e9903904d4261c52c9ee7bd1288910cb1"
            ],
            "ref": "refs/changes/02/53702/4",
            "uploader": {
                "name": "Kasun Athukorala",
                "email": "kasunath@google.com",
                "username": "kasunathg"
            },
            "createdOn": 1652388170,
            "author": {
                "name": "Kasun Athukorala",
                "email": "kasunath@google.com",
                "username": "kasunathg"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "include/rde_common.h",
                    "line": 105,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "for all of the member variables, do we need to initilize first. Probably safer that way."
                },
                {
                    "file": "include/rde_common.h",
                    "line": 105,
                    "reviewer": {
                        "name": "Kasun Athukorala",
                        "email": "kasunath@google.com",
                        "username": "kasunathg"
                    },
                    "message": "Unless we define a variable of this struct type, it will not have any storage allocated. So we can't initialize anything here."
                },
                {
                    "file": "meson.build",
                    "line": 18,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "new line here."
                },
                {
                    "file": "meson.build",
                    "line": 18,
                    "reviewer": {
                        "name": "Kasun Athukorala",
                        "email": "kasunath@google.com",
                        "username": "kasunathg"
                    },
                    "message": "Done"
                },
                {
                    "file": "src/rde_common.c",
                    "line": 17,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "do you need this? or can it just pass to rdeGetUnsignedInteger directly."
                },
                {
                    "file": "src/rde_common.c",
                    "line": 17,
                    "reviewer": {
                        "name": "Kasun Athukorala",
                        "email": "kasunath@google.com",
                        "username": "kasunathg"
                    },
                    "message": "We need this. We could do rdeGetUnsignedInteger(nnint + sizeof(uint8_t), *nnint) but I felt like doing const uint8_t size = *nnint might make things more clear."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": ".clang-tidy",
                    "type": "DELETED",
                    "insertions": 0,
                    "deletions": -299
                },
                {
                    "file": "meson_options.txt",
                    "type": "ADDED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "src/rde_common.c",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "src/meson.build",
                    "type": "ADDED",
                    "insertions": 11,
                    "deletions": 0
                },
                {
                    "file": "test/rde_common_test.cpp",
                    "type": "ADDED",
                    "insertions": 39,
                    "deletions": 0
                },
                {
                    "file": "test/meson.build",
                    "type": "ADDED",
                    "insertions": 26,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "include/rde_common.h",
                    "type": "ADDED",
                    "insertions": 218,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 356,
            "sizeDeletions": 299
        },
        {
            "number": 5,
            "revision": "7ffd30aaa5b4d87d631b91715c9af66f72462c3a",
            "parents": [
                "8bc8ba8e9903904d4261c52c9ee7bd1288910cb1"
            ],
            "ref": "refs/changes/02/53702/5",
            "uploader": {
                "name": "Kasun Athukorala",
                "email": "kasunath@google.com",
                "username": "kasunathg"
            },
            "createdOn": 1652393178,
            "author": {
                "name": "Kasun Athukorala",
                "email": "kasunath@google.com",
                "username": "kasunathg"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": ".clang-tidy",
                    "type": "DELETED",
                    "insertions": 0,
                    "deletions": -299
                },
                {
                    "file": "meson_options.txt",
                    "type": "ADDED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "src/rde_common.c",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "src/meson.build",
                    "type": "ADDED",
                    "insertions": 11,
                    "deletions": 0
                },
                {
                    "file": "test/rde_common_test.cpp",
                    "type": "ADDED",
                    "insertions": 39,
                    "deletions": 0
                },
                {
                    "file": "test/meson.build",
                    "type": "ADDED",
                    "insertions": 26,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "include/rde_common.h",
                    "type": "ADDED",
                    "insertions": 218,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 356,
            "sizeDeletions": 299
        }
    ]
}