{
    "project": "openbmc/openbmc",
    "branch": "master",
    "id": "I319e21c81b4da10dd08877c2f78cd4698fc94cd7",
    "number": 50655,
    "subject": "meta-phosphor: Add trace-enable service",
    "owner": {
        "name": "Edward A. James",
        "email": "eajames@us.ibm.com",
        "username": "eddiejames"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/openbmc/+/50655",
    "commitMessage": "meta-phosphor: Add trace-enable service\n\nThe trace-enable service turns on a set of Linux trace events based\non a configuration file. The recipe generates the configuration file\nfrom a variable that can be appended across layers.\n\nSigned-off-by: Eddie James <eajames@linux.ibm.com>\nChange-Id: I319e21c81b4da10dd08877c2f78cd4698fc94cd7\n",
    "createdOn": 1643127111,
    "lastUpdated": 1643407482,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1643127111,
            "reviewer": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1643127141,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1643127141,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1643127147,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1:\n\nBuild Started https://jenkins.openbmc.org/job/ci-openbmc/8831/"
        },
        {
            "timestamp": 1643127228,
            "reviewer": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1643128930,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\n(3 comments)"
        },
        {
            "timestamp": 1643129517,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-openbmc/8831/ : FAILURE"
        },
        {
            "timestamp": 1643129968,
            "reviewer": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "message": "Patch Set 1:\n\n(3 comments)"
        },
        {
            "timestamp": 1643229563,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\n(2 comments)"
        },
        {
            "timestamp": 1643381644,
            "reviewer": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1643381678,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1643381678,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1643381684,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2:\n\nBuild Started https://jenkins.openbmc.org/job/ci-openbmc/8944/"
        },
        {
            "timestamp": 1643381879,
            "reviewer": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1643381944,
            "reviewer": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1643381978,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1643381979,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1643381981,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-openbmc/8944/ : ABORTED"
        },
        {
            "timestamp": 1643381985,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3:\n\nBuild Started https://jenkins.openbmc.org/job/ci-openbmc/8946/"
        },
        {
            "timestamp": 1643383325,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-openbmc/8946/ : FAILURE"
        },
        {
            "timestamp": 1643384238,
            "reviewer": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1643384288,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1643384288,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1643384296,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4:\n\nBuild Started https://jenkins.openbmc.org/job/ci-openbmc/8949/"
        },
        {
            "timestamp": 1643384455,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 4: Code-Review+2"
        },
        {
            "timestamp": 1643386262,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-openbmc/8949/ : SUCCESS"
        },
        {
            "timestamp": 1643390850,
            "reviewer": {
                "name": "Jenkins OpenBMC IBM",
                "email": "geissonator+jenkinsibm@gmail.com",
                "username": "jenkins-openbmc-ibm"
            },
            "message": "Patch Set 4:\n\nBuild Successful \n\nIBM Hardware CI : witherspoon hardware tests passed"
        },
        {
            "timestamp": 1643407482,
            "reviewer": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "message": "Change has been successfully merged"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "073b69fc2df0b10abf7310cbe0f09ce224207a8d",
            "parents": [
                "33061da68a61d2808bc4323fa66d1bb2711d3e0d"
            ],
            "ref": "refs/changes/55/50655/1",
            "uploader": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "createdOn": 1643127111,
            "author": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Edward A. James",
                        "email": "eajames@us.ibm.com",
                        "username": "eddiejames"
                    },
                    "message": "The events in the configuration file are added here: https://patchwork.ozlabs.org/project/openbmc/patch/20220125161107.77962-1-eajames@linux.ibm.com/"
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/trace-enable/trace-enable/trace-enable.service",
                    "line": 7,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I prefer we don't name scripts with extensions."
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/trace-enable/trace-enable/trace-enable.service",
                    "line": 7,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Based on meta-layer guidelines / anti-patterns, the preference is for these to be in libexec likely."
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/trace-enable/trace-enable/trace-enable.service",
                    "line": 7,
                    "reviewer": {
                        "name": "Edward A. James",
                        "email": "eajames@us.ibm.com",
                        "username": "eddiejames"
                    },
                    "message": "Ack"
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/trace-enable/trace-enable/trace-enable.service",
                    "line": 7,
                    "reviewer": {
                        "name": "Edward A. James",
                        "email": "eajames@us.ibm.com",
                        "username": "eddiejames"
                    },
                    "message": "Hm, all the other scripts I see around OpenBMC have extensions? Seems helpful, because then I know it's a bash script, not a binary, when I see it listed somewhere."
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/trace-enable/trace-enable/trace-enable.service",
                    "line": 7,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "> Hm, all the other scripts I see around OpenBMC have extensions?\n\nSome other scripts do, yes.  I've been trying to remove them.\n\n> Seems helpful, because then I know it's a bash script, not a binary, when I see it listed somewhere.\n\nWhy is that interesting?  It makes for more effort if we decide to refactor.\n\n\nThis has been a problem for us in the openbmc-build-scripts repository especially.  Someone will hack something up in shell and name it 'foo.sh' and then it gets tentacles all over the codebase and then we later on try to rewrite it in python and it is a pain."
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/trace-enable/trace-enable/trace-enable.service",
                    "line": 7,
                    "reviewer": {
                        "name": "Edward A. James",
                        "email": "eajames@us.ibm.com",
                        "username": "eddiejames"
                    },
                    "message": "> Why is that interesting?  It makes for more effort if we decide to refactor.\n\nWell if I see .sh it means I can cat it. Not a big deal though, I'll change it."
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/trace-enable/trace-enable/trace-events.conf",
                    "line": 0,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "This seems to belong in meta-openpower based on the config.  Do we need to be able to do something to merge configs across meta-layers?"
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/trace-enable/trace-enable/trace-events.conf",
                    "line": 0,
                    "reviewer": {
                        "name": "Edward A. James",
                        "email": "eajames@us.ibm.com",
                        "username": "eddiejames"
                    },
                    "message": "Can bbappend it? I can leave it empty here and add it in meta-openpower."
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/trace-enable/trace-enable/trace-events.conf",
                    "line": 0,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "You can bbappend it, yes.  What I don't know is if you're later on going to have some config values that belong in this layer and other ones that belong in openpower.  That's why I mentioned merging all .conf files here.  (Supply the fsi.conf in openpower, but have this recipe merge any .conf file it finds.)"
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/trace-enable/trace-enable/trace-events.conf",
                    "line": 0,
                    "reviewer": {
                        "name": "Edward A. James",
                        "email": "eajames@us.ibm.com",
                        "username": "eddiejames"
                    },
                    "message": "Well I've used a variable and written that to the config file in the recipe install section. That should allow merging of configurations across layers for now."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/packagegroups/packagegroup-obmc-apps.bb",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/trace-enable/trace-enable/trace-events.conf",
                    "type": "ADDED",
                    "insertions": 5,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/trace-enable/trace-enable/trace-enable.service",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/trace-enable/trace-enable/trace-enable.sh",
                    "type": "ADDED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/trace-enable/trace-enable.bb",
                    "type": "ADDED",
                    "insertions": 30,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 82,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "6deb5df261de0fd73d7bdb7573365c4459db2b6b",
            "parents": [
                "1ebfa83c9f0581514a59a93ad556b942857d2290"
            ],
            "ref": "refs/changes/55/50655/2",
            "uploader": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "createdOn": 1643381644,
            "author": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/packagegroups/packagegroup-obmc-apps.bb",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/trace-enable/trace-enable/trace-enable.service",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/trace-enable/trace-enable/trace-enable.sh",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/trace-enable/trace-enable.bb",
                    "type": "ADDED",
                    "insertions": 34,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 84,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "fcbf829db71a65423dd86faf098a57431a85d847",
            "parents": [
                "1ebfa83c9f0581514a59a93ad556b942857d2290"
            ],
            "ref": "refs/changes/55/50655/3",
            "uploader": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "createdOn": 1643381944,
            "author": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/trace-enable/trace-enable/trace-enable",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/packagegroups/packagegroup-obmc-apps.bb",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/trace-enable/trace-enable/trace-enable.service",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/trace-enable/trace-enable.bb",
                    "type": "ADDED",
                    "insertions": 34,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 84,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "acd9d072498cf55b8d0f3830cda9c6ca5814b598",
            "parents": [
                "1ebfa83c9f0581514a59a93ad556b942857d2290"
            ],
            "ref": "refs/changes/55/50655/4",
            "uploader": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "createdOn": 1643384238,
            "author": {
                "name": "Edward A. James",
                "email": "eajames@us.ibm.com",
                "username": "eddiejames"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/trace-enable/trace-enable/trace-enable",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/packagegroups/packagegroup-obmc-apps.bb",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/trace-enable/trace-enable/trace-enable.service",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/trace-enable/trace-enable.bb",
                    "type": "ADDED",
                    "insertions": 35,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 85,
            "sizeDeletions": 0
        }
    ]
}