{
    "project": "openbmc/phosphor-bmc-code-mgmt",
    "branch": "master",
    "id": "I69cde49626c0a7f8cf8d0028b2c24d2c3ca4458e",
    "number": 50937,
    "subject": "obmc-flash-bmc: fix shellcheck warnings",
    "owner": {
        "name": "Isaac Kurth",
        "email": "isaac.kurth@ibm.com",
        "username": "IsaacPK"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-bmc-code-mgmt/+/50937",
    "commitMessage": "obmc-flash-bmc: fix shellcheck warnings\n\nTested: Built the ubi.mtd.tar file and loaded it onto a witherspoon\nmachine, verified ubi volumes were updated and mounted after reboot as\nexpected. Performed a code update on mmc system, verified it booted as\nexpected.\n\nSigned-off-by: Isaac Kurth <blisaac91@gmail.com>\nSigned-off-by: Adriana Kobylak <anoo@us.ibm.com>\nChange-Id: I69cde49626c0a7f8cf8d0028b2c24d2c3ca4458e\n",
    "createdOn": 1644005335,
    "lastUpdated": 1648844195,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1644005335,
            "reviewer": {
                "name": "Isaac Kurth",
                "email": "isaac.kurth@ibm.com",
                "username": "IsaacPK"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1644005351,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1644005352,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1644005431,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/36620/ : SUCCESS"
        },
        {
            "timestamp": 1647529651,
            "reviewer": {
                "name": "Isaac Kurth",
                "email": "isaac.kurth@ibm.com",
                "username": "IsaacPK"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1647529675,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1647529675,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1647529754,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/39164/ : SUCCESS"
        },
        {
            "timestamp": 1647545393,
            "reviewer": {
                "name": "Isaac Kurth",
                "email": "isaac.kurth@ibm.com",
                "username": "IsaacPK"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1647545406,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1647545406,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1647545486,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/39183/ : SUCCESS"
        },
        {
            "timestamp": 1648240388,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1648480111,
            "reviewer": {
                "name": "Isaac Kurth",
                "email": "isaac.kurth@ibm.com",
                "username": "IsaacPK"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1648480257,
            "reviewer": {
                "name": "Isaac Kurth",
                "email": "isaac.kurth@ibm.com",
                "username": "IsaacPK"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1648480281,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1648480282,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1648480364,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/39911/ : SUCCESS"
        },
        {
            "timestamp": 1648483734,
            "reviewer": {
                "name": "Isaac Kurth",
                "email": "isaac.kurth@ibm.com",
                "username": "IsaacPK"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1648483749,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1648483749,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1648483824,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/39919/ : SUCCESS"
        },
        {
            "timestamp": 1648484259,
            "reviewer": {
                "name": "Isaac Kurth",
                "email": "isaac.kurth@ibm.com",
                "username": "IsaacPK"
            },
            "message": "Uploaded patch set 6."
        },
        {
            "timestamp": 1648484272,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1648484272,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: -Ok-To-Test"
        },
        {
            "timestamp": 1648484355,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/39920/ : SUCCESS"
        },
        {
            "timestamp": 1648484810,
            "reviewer": {
                "name": "Isaac Kurth",
                "email": "isaac.kurth@ibm.com",
                "username": "IsaacPK"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1648674784,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1648675138,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Uploaded patch set 7."
        },
        {
            "timestamp": 1648675154,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1648675155,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: -Ok-To-Test"
        },
        {
            "timestamp": 1648675226,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/40186/ : SUCCESS"
        },
        {
            "timestamp": 1648675606,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 7: Code-Review+1\n\n(2 comments)"
        },
        {
            "timestamp": 1648675790,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1648675882,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1648844091,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 7: Code-Review+2"
        },
        {
            "timestamp": 1648844195,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Change has been successfully merged"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "a32d7559a714651caa16c5abd75d87953c2451f1",
            "parents": [
                "546c052db60b44141d6f6ed96bb5a7db5393843b"
            ],
            "ref": "refs/changes/37/50937/1",
            "uploader": {
                "name": "Isaac Kurth",
                "email": "isaac.kurth@ibm.com",
                "username": "IsaacPK"
            },
            "createdOn": 1644005335,
            "author": {
                "name": "Isaac Kurth",
                "email": "isaac.kurth@ibm.com",
                "username": "IsaacPK"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "obmc-flash-bmc",
                    "type": "MODIFIED",
                    "insertions": 46,
                    "deletions": -46
                }
            ],
            "sizeInsertions": 59,
            "sizeDeletions": 46
        },
        {
            "number": 2,
            "revision": "fdb8f40a925f7eb6b41745cf5963d8b25df4abeb",
            "parents": [
                "28dcdb152739dd8f83bb961c81d61cf3eb047246"
            ],
            "ref": "refs/changes/37/50937/2",
            "uploader": {
                "name": "Isaac Kurth",
                "email": "isaac.kurth@ibm.com",
                "username": "IsaacPK"
            },
            "createdOn": 1647529651,
            "author": {
                "name": "Isaac Kurth",
                "email": "isaac.kurth@ibm.com",
                "username": "IsaacPK"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "obmc-flash-bmc",
                    "type": "MODIFIED",
                    "insertions": 46,
                    "deletions": -45
                }
            ],
            "sizeInsertions": 59,
            "sizeDeletions": 45
        },
        {
            "number": 3,
            "revision": "c23dde1989e974210a3dd1b5c856af3598af7d86",
            "parents": [
                "28dcdb152739dd8f83bb961c81d61cf3eb047246"
            ],
            "ref": "refs/changes/37/50937/3",
            "uploader": {
                "name": "Isaac Kurth",
                "email": "isaac.kurth@ibm.com",
                "username": "IsaacPK"
            },
            "createdOn": 1647545393,
            "author": {
                "name": "Isaac Kurth",
                "email": "isaac.kurth@ibm.com",
                "username": "IsaacPK"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "obmc-flash-bmc",
                    "line": 238,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "typo"
                },
                {
                    "file": "obmc-flash-bmc",
                    "line": 238,
                    "reviewer": {
                        "name": "Isaac Kurth",
                        "email": "isaac.kurth@ibm.com",
                        "username": "IsaacPK"
                    },
                    "message": "The change from vols -> volus was intentional to avoid shellcheck complaint SC2178. In ln 240, the contents of volus is stored in vols. This way the for loop that uses vols doesn't have its functionality changed."
                },
                {
                    "file": "obmc-flash-bmc",
                    "line": 238,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "Done. Ah I see, seems we can simplify by having a single array variable instead of duplicating it, fixed."
                },
                {
                    "file": "obmc-flash-bmc",
                    "line": 296,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "shellcheck should be ok if quoting the whole string like \"/dev/ubi${mtd}_${element}\""
                },
                {
                    "file": "obmc-flash-bmc",
                    "line": 296,
                    "reviewer": {
                        "name": "Isaac Kurth",
                        "email": "isaac.kurth@ibm.com",
                        "username": "IsaacPK"
                    },
                    "message": "Addressed in patch set 5"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "obmc-flash-bmc",
                    "type": "MODIFIED",
                    "insertions": 48,
                    "deletions": -48
                }
            ],
            "sizeInsertions": 61,
            "sizeDeletions": 48
        },
        {
            "number": 4,
            "revision": "df68776aed0ed417c5046d5ecef1335712999fef",
            "parents": [
                "546c052db60b44141d6f6ed96bb5a7db5393843b"
            ],
            "ref": "refs/changes/37/50937/4",
            "uploader": {
                "name": "Isaac Kurth",
                "email": "isaac.kurth@ibm.com",
                "username": "IsaacPK"
            },
            "createdOn": 1648480257,
            "author": {
                "name": "Isaac Kurth",
                "email": "isaac.kurth@ibm.com",
                "username": "IsaacPK"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "obmc-flash-bmc",
                    "type": "MODIFIED",
                    "insertions": 46,
                    "deletions": -46
                }
            ],
            "sizeInsertions": 59,
            "sizeDeletions": 46
        },
        {
            "number": 5,
            "revision": "062d1ac565630d32fee2a4bd5542a43873438a0e",
            "parents": [
                "4d211befc161d5633194eed96673a25f0e762bb9"
            ],
            "ref": "refs/changes/37/50937/5",
            "uploader": {
                "name": "Isaac Kurth",
                "email": "isaac.kurth@ibm.com",
                "username": "IsaacPK"
            },
            "createdOn": 1648483734,
            "author": {
                "name": "Isaac Kurth",
                "email": "isaac.kurth@ibm.com",
                "username": "IsaacPK"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "obmc-flash-bmc",
                    "type": "MODIFIED",
                    "insertions": 45,
                    "deletions": -45
                }
            ],
            "sizeInsertions": 58,
            "sizeDeletions": 45
        },
        {
            "number": 6,
            "revision": "19a70e2d02a9b2621eb167b43475a127dd0be856",
            "parents": [
                "4d211befc161d5633194eed96673a25f0e762bb9"
            ],
            "ref": "refs/changes/37/50937/6",
            "uploader": {
                "name": "Isaac Kurth",
                "email": "isaac.kurth@ibm.com",
                "username": "IsaacPK"
            },
            "createdOn": 1648484259,
            "author": {
                "name": "Isaac Kurth",
                "email": "isaac.kurth@ibm.com",
                "username": "IsaacPK"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "Network issue? tiogapass failed with:\n\n20:59:02 ERROR: Error cloning remote repo 'gerrit'"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "Wrong commit, intended for the recipe autobump one."
                },
                {
                    "file": "obmc-flash-bmc",
                    "line": 271,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "This is causing a failure:\n\nMar 28 21:34:25 witherspoon systemd[1]: Starting Remount the ubi volume after a reboot...\nMar 28 21:34:29 witherspoon obmc-flash-bmc[329]: ubinfo: error!: strtoul: unable to parse the number '0 4 '\nMar 28 21:34:29 witherspoon obmc-flash-bmc[329]: ubinfo: error!: bad UBI device number: \"0 4 \"\n\nI'll push a fix shortly."
                },
                {
                    "file": "obmc-flash-bmc",
                    "line": 271,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "Done. The sorting was originally done because all ubi volumes were being read: https://gerrit.openbmc-project.xyz/c/openbmc/openbmc/+/5934\n\nThis was later changed to only contain the bmc and alt-bmc ubi volumes, so sorting is not needed anymore, it's a no-op that wasn't changing the array anyways: https://gerrit.openbmc-project.xyz/c/openbmc/openbmc/+/6515"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "obmc-flash-bmc",
                    "type": "MODIFIED",
                    "insertions": 50,
                    "deletions": -50
                }
            ],
            "sizeInsertions": 63,
            "sizeDeletions": 50
        },
        {
            "number": 7,
            "revision": "c53fccacea698ff021c43f5278fdcb8bb8b85d01",
            "parents": [
                "a1d2f86112bd6caceddfece80cb5ddf55ac86924"
            ],
            "ref": "refs/changes/37/50937/7",
            "uploader": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "createdOn": 1648675138,
            "author": {
                "name": "Isaac Kurth",
                "email": "isaac.kurth@ibm.com",
                "username": "IsaacPK"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "obmc-flash-bmc",
                    "type": "MODIFIED",
                    "insertions": 52,
                    "deletions": -54
                }
            ],
            "sizeInsertions": 68,
            "sizeDeletions": 54
        }
    ]
}