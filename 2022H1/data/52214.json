{
    "project": "openbmc/entity-manager",
    "branch": "master",
    "id": "I13f3bc48110b8ffdf1d3f135c57ae9f0736a8e53",
    "number": 52214,
    "subject": "fru-device: add offset variant of FRUReader abstraction",
    "owner": {
        "name": "Zev Weiss",
        "email": "zev@bewilderbeest.net",
        "username": "zevweiss"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/entity-manager/+/52214",
    "commitMessage": "fru-device: add offset variant of FRUReader abstraction\n\nThe caching FRUReader class is now joined by OffsetFRUReader, both of\nwhich now derive from a common BaseFRUReader class.  OffsetFRUReader is\nconstructed in terms of an existing BaseFRUReader (probably a FRUReader)\nand simply applies a fixed offset to all reads performed on it.\n\nTested: on an ASRock Rack romed8hm3, fru-device successfully recognizes\nand parses the baseboard FRU EEPROM as it did prior to this patch.\n\nSigned-off-by: Zev Weiss <zev@bewilderbeest.net>\nChange-Id: I13f3bc48110b8ffdf1d3f135c57ae9f0736a8e53\n",
    "createdOn": 1647916628,
    "lastUpdated": 1657321917,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1647916628,
            "reviewer": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1647916644,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1647916644,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1647916977,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/39390/ : SUCCESS"
        },
        {
            "timestamp": 1647991409,
            "reviewer": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1647991425,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1647991425,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1647991476,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/39458/ : FAILURE"
        },
        {
            "timestamp": 1647992180,
            "reviewer": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "message": "Uploaded patch set 3: Patch Set 2 was rebased."
        },
        {
            "timestamp": 1647992198,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1647992198,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1647992683,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/39463/ : SUCCESS"
        },
        {
            "timestamp": 1648615366,
            "reviewer": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1648615382,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1648615382,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1648615681,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/40082/ : SUCCESS"
        },
        {
            "timestamp": 1651112404,
            "reviewer": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "message": "Uploaded patch set 5: Patch Set 4 was rebased."
        },
        {
            "timestamp": 1651112418,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1651112419,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1651112697,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/42144/ : SUCCESS"
        },
        {
            "timestamp": 1654209402,
            "reviewer": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "message": "Uploaded patch set 6."
        },
        {
            "timestamp": 1654209439,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1654209439,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: -Ok-To-Test"
        },
        {
            "timestamp": 1654209724,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/44307/ : SUCCESS"
        },
        {
            "timestamp": 1654716995,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 6:\n\n(2 comments)"
        },
        {
            "timestamp": 1654718267,
            "reviewer": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "message": "Patch Set 6:\n\n(2 comments)"
        },
        {
            "timestamp": 1655318227,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1655324858,
            "reviewer": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1655661819,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1655758385,
            "reviewer": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1655823075,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1657153967,
            "reviewer": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1657225458,
            "reviewer": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "message": "Uploaded patch set 7."
        },
        {
            "timestamp": 1657225509,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1657225509,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: -Ok-To-Test"
        },
        {
            "timestamp": 1657225718,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/46611/ : SUCCESS"
        },
        {
            "timestamp": 1657237549,
            "reviewer": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1657321635,
            "reviewer": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "message": "Uploaded patch set 8."
        },
        {
            "timestamp": 1657321710,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1657321710,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: -Ok-To-Test"
        },
        {
            "timestamp": 1657321917,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/46715/ : SUCCESS"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "e89c9814677d5744555199cce75be3fa9e8289df",
            "parents": [
                "f299e9780843b53f0725737106b6514054739a0e"
            ],
            "ref": "refs/changes/14/52214/1",
            "uploader": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "createdOn": 1647916628,
            "author": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "include/FruUtils.hpp",
                    "type": "MODIFIED",
                    "insertions": 27,
                    "deletions": -11
                },
                {
                    "file": "src/FruUtils.cpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 56,
            "sizeDeletions": 12
        },
        {
            "number": 2,
            "revision": "93dd53db1355ea8115757b683fbd715ac7e5cd24",
            "parents": [
                "56d98d12d6cecf2669069884e8aeb124995bcc5b"
            ],
            "ref": "refs/changes/14/52214/2",
            "uploader": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "createdOn": 1647991409,
            "author": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "include/FruUtils.hpp",
                    "type": "MODIFIED",
                    "insertions": 27,
                    "deletions": -11
                },
                {
                    "file": "src/FruUtils.cpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 56,
            "sizeDeletions": 12
        },
        {
            "number": 3,
            "revision": "f8b7385badc40c1242314d84232a7172aa7e8439",
            "parents": [
                "bc8d73c88944d22352e1bb8a691d140faebd0eea"
            ],
            "ref": "refs/changes/14/52214/3",
            "uploader": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "createdOn": 1647992180,
            "author": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "include/FruUtils.hpp",
                    "type": "MODIFIED",
                    "insertions": 27,
                    "deletions": -11
                },
                {
                    "file": "src/FruUtils.cpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 56,
            "sizeDeletions": 12
        },
        {
            "number": 4,
            "revision": "e55906303e47ffba6a4fe919633efc6b0fb05d23",
            "parents": [
                "0821d4f1e00f0298c761b152f885c3fced6aee05"
            ],
            "ref": "refs/changes/14/52214/4",
            "uploader": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "createdOn": 1648615366,
            "author": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "include/FruUtils.hpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": -11
                },
                {
                    "file": "src/FruUtils.cpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 62,
            "sizeDeletions": 12
        },
        {
            "number": 5,
            "revision": "80a77c5dae3c94f32cb34301722f3f951eede02b",
            "parents": [
                "8a39592ed386184216d2d1d2d851682c189cb2fd"
            ],
            "ref": "refs/changes/14/52214/5",
            "uploader": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "createdOn": 1651112404,
            "author": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "include/FruUtils.hpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": -11
                },
                {
                    "file": "src/FruUtils.cpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 62,
            "sizeDeletions": 12
        },
        {
            "number": 6,
            "revision": "e3600e58539f2668c73f207c286c23c8a3534265",
            "parents": [
                "28f63d779dfab4f17756e3cccb24f940b7527f7b"
            ],
            "ref": "refs/changes/14/52214/6",
            "uploader": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "createdOn": 1654209402,
            "author": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "include/fru_utils.hpp",
                    "line": 138,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "can we just implement this as a simple switch?  std::visit seems like kind of overkill for this.  Also, what if we want to use offset reader AND Caching reader (which seems likely for something like tyan)  the global offset stuff probably deserves to be a primitive within FruReader, instead of a wrapper class?"
                },
                {
                    "file": "include/fru_utils.hpp",
                    "line": 138,
                    "reviewer": {
                        "name": "Zev Weiss",
                        "email": "zev@bewilderbeest.net",
                        "username": "zevweiss"
                    },
                    "message": "My aim was to have the parsing code be able to stack an offset reader on top of a caching reader so as to avoid double-caching or having to muck around with stateful modifications to an offset setting that'd then need to be un-done before returning  and moving on to another format parser that didn't want the offset applied (so that the application of the offset would just be scoped to the format parser that wanted it, without affecting anything else)."
                },
                {
                    "file": "src/fru_utils.cpp",
                    "line": 137,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "We'd normally use std::visit for this kind of thing, to avoid the case where someone adds a new variant type, but forgets to add a case statement here.  With that said, I'd really like to see offset reader not be variant based, and just use a switch statement.  There's only one function we're switching on here, maybe there's a good reason for the variant I'm not seeing?"
                },
                {
                    "file": "src/fru_utils.cpp",
                    "line": 137,
                    "reviewer": {
                        "name": "Zev Weiss",
                        "email": "zev@bewilderbeest.net",
                        "username": "zevweiss"
                    },
                    "message": "I had initially approached this via inheritance, with CachingReader and OffsetReader inheriting from a common base class, but after a comment of yours on a previous iteration discouraging the use of inheritance (https://gerrit.openbmc.org/c/openbmc/entity-manager/+/51548/13/include/FruUtils.hpp#100=) I rearranged it this way instead (though TBH it seems like it just ends up being kind of a manual reimplementation of something approximating inheritance anyway, I guess)."
                },
                {
                    "file": "src/fru_utils.cpp",
                    "line": 137,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Just reinventing inheritance with variant doesn't seem like it solves the problem of readability here.\n\nit'd be good to get other maintainers opinions here."
                },
                {
                    "file": "src/fru_utils.cpp",
                    "line": 137,
                    "reviewer": {
                        "name": "Zev Weiss",
                        "email": "zev@bewilderbeest.net",
                        "username": "zevweiss"
                    },
                    "message": "Agreed -- looking back at your other comment though (the one linked above), I guess I wasn't really clear on what you were suggesting regarding a composition-based approach as an alternative.  Could elaborate on that or provide a rough pseudocode sketch of what you meant?"
                },
                {
                    "file": "src/fru_utils.cpp",
                    "line": 137,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Something like\n\nswitch (type):\ncase (backend1):\n   readFromBackend1();\n   break;\ncase (backend2):\n    readFromBackend2();\n    break;\n    \nthat makes it a lot more clear what the options are for any given option, and things like the cache layer don't end up as a differen type."
                },
                {
                    "file": "src/fru_utils.cpp",
                    "line": 137,
                    "reviewer": {
                        "name": "Zev Weiss",
                        "email": "zev@bewilderbeest.net",
                        "username": "zevweiss"
                    },
                    "message": "Sorry, still not quite grasping the broader picture I'm afraid...would the different backends there be like caching vs. offset, or something else?  And would that just be switching based on some explicit type enum within the FRUReader::read() method?\n\nThe way I had it arranged with the inheritance approach the constructor signatures guaranteed that the only arrangements that could exist were a bare caching reader or one or more offset readers stacked on top of a caching reader, so while they were different (derived) types, they shared the same base type and there would always be exactly one caching layer."
                },
                {
                    "file": "src/fru_utils.cpp",
                    "line": 137,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I guess from my perspective \"Caching reader\" and \"offset reader\" are two completely different classes of reader, and are transforms that should be applied ahead of calling the backend, and both could be called with no branches in the offset case (just init offset to zero in most cases) and caching reader could just be aware of the backends and call them directly.\n\nStill would like other maintainers opinion on this here."
                },
                {
                    "file": "src/fru_utils.cpp",
                    "line": 137,
                    "reviewer": {
                        "name": "Zev Weiss",
                        "email": "zev@bewilderbeest.net",
                        "username": "zevweiss"
                    },
                    "message": "> I guess from my perspective \"Caching reader\" and \"offset reader\" are two completely different classes of reader,\n\nAs in, should be entirely distinct, incompatible types?  A major part of my aim here was that they would be compatible so that you could transparently pass an offset reader to the regular IPMI format parsing code in order to handle cases like the Tyan format and have that code accept either without having to care which it was.  (Hence initially taking the inheritance-based approach so that it could just accept the base class that both the caching and offset readers derive from.)\n\n> transforms that should be applied ahead of calling the backend\n\nStill a bit uncertain what exactly you're referring to as a \"backend\" here -- do you mean the underlying ReadBlockFunc I/O routine, i.e. `readFromEeprom()` or `readBlockData()`?  If so, I thought the existing implementations would satisfy that criterion (though in the offset case the immediate backend is in turn a caching reader).\n\n> and caching reader could just be aware of the backends and call them directly\n\nSo the caching reader would have to be aware of what type of eeprom it was reading from and explicitly call different functions depending on that?  I'm not sure I see the advantage over the ReadBlockFunc callback-based approach we've already got...\n\n> Still would like other maintainers opinion on this here.\n\nYeah...Jae, Vernon -- any thoughts?"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "src/fru_utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -1
                },
                {
                    "file": "include/fru_utils.hpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": -11
                }
            ],
            "sizeInsertions": 62,
            "sizeDeletions": 12
        },
        {
            "number": 7,
            "revision": "0d591a69857c252080232205e90d86bb4e559a4f",
            "parents": [
                "c492ab868fcc2f9b2ce9af45f2dc7b8e1210a618"
            ],
            "ref": "refs/changes/14/52214/7",
            "uploader": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "createdOn": 1657225458,
            "author": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Zev Weiss",
                        "email": "zev@bewilderbeest.net",
                        "username": "zevweiss"
                    },
                    "message": "Figured I might as well switch it back to the inheritance approach, since the other approach was basically just a clumsy approximation of that anyway..."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "include/fru_reader.hpp",
                    "type": "MODIFIED",
                    "insertions": 30,
                    "deletions": -7
                },
                {
                    "file": "src/fru_utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                },
                {
                    "file": "include/fru_utils.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -4
                },
                {
                    "file": "src/fru_reader.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 59,
            "sizeDeletions": 13
        },
        {
            "number": 8,
            "revision": "4490981ff22cf2f99da8921d0529cafb6760a302",
            "parents": [
                "c492ab868fcc2f9b2ce9af45f2dc7b8e1210a618"
            ],
            "ref": "refs/changes/14/52214/8",
            "uploader": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "createdOn": 1657321635,
            "author": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "include/fru_reader.hpp",
                    "type": "MODIFIED",
                    "insertions": 30,
                    "deletions": -6
                },
                {
                    "file": "src/fru_utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                },
                {
                    "file": "include/fru_utils.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -4
                },
                {
                    "file": "src/fru_reader.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 59,
            "sizeDeletions": 12
        }
    ]
}