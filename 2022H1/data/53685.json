{
    "project": "openbmc/entity-manager",
    "branch": "master",
    "id": "I95795188437ee5d9f7edc088ff92cc7fb116e6ec",
    "number": 53685,
    "subject": "Removing trailing spaces from fru property.",
    "owner": {
        "name": "krishna Raj",
        "email": "krishnar@ami.com",
        "username": "krishnar4"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/entity-manager/+/53685",
    "commitMessage": "Removing trailing spaces from fru property.\n\nThis fix will trim all the trailing white spaces from fru property,\nbefore updating fru property.so that fru property will not have any\ntrailing spaces.\n\nSigned-off-by: krishnar4 <krishnar@ami.com>\nChange-Id: I95795188437ee5d9f7edc088ff92cc7fb116e6ec\n",
    "createdOn": 1652354255,
    "lastUpdated": 1655392465,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1652354255,
            "reviewer": {
                "name": "krishna Raj",
                "email": "krishnar@ami.com",
                "username": "krishnar4"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1652354263,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1652354263,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1652354550,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/43127/ : SUCCESS"
        },
        {
            "timestamp": 1652370408,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 1:\n\n(2 comments)"
        },
        {
            "timestamp": 1655185811,
            "reviewer": {
                "name": "krishna Raj",
                "email": "krishnar@ami.com",
                "username": "krishnar4"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1655185836,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1655185836,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1655186045,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/44974/ : SUCCESS"
        },
        {
            "timestamp": 1655186307,
            "reviewer": {
                "name": "krishna Raj",
                "email": "krishnar@ami.com",
                "username": "krishnar4"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1655186361,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1655186362,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1655186570,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/44975/ : SUCCESS"
        },
        {
            "timestamp": 1655193748,
            "reviewer": {
                "name": "krishna Raj",
                "email": "krishnar@ami.com",
                "username": "krishnar4"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1655219769,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1655365299,
            "reviewer": {
                "name": "krishna Raj",
                "email": "krishnar@ami.com",
                "username": "krishnar4"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1655366081,
            "reviewer": {
                "name": "krishna Raj",
                "email": "krishnar@ami.com",
                "username": "krishnar4"
            },
            "message": "Uploaded patch set 4: Commit message was updated."
        },
        {
            "timestamp": 1655392465,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "d718cbb89b606679c302d101bb2b54b015facdbc",
            "parents": [
                "c7612cf7ba0fe6bfebe83894f97943414fe41dca"
            ],
            "ref": "refs/changes/85/53685/1",
            "uploader": {
                "name": "krishna Raj",
                "email": "krishnar@ami.com",
                "username": "krishnar4"
            },
            "createdOn": 1652354255,
            "author": {
                "name": "krishna Raj",
                "email": "krishnar@ami.com",
                "username": "krishnar4"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Should we really be covering up the error in that case?  A little more detail here on the tradeoffs of making this change would be good.  This means that if we write the same value to a field, the actual fru content of the field would change.  That might have user impacts, and given that the FRU spec has a size in it, FRU eeproms that have trailing spaces are arguably incorrect.\n\nIf we decide this is needed, are there any other characters that need trimmed?  null?  unprintable characters?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "krishna Raj",
                        "email": "krishnar@ami.com",
                        "username": "krishnar4"
                    },
                    "message": "It is already available ,they are replacing nonAsciiRegex(\"[^\\x01-\\x7f]\") value with \"_\" from property."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Please update the commit message with details of:\n\nWhere in the IPMI spec it says that we should trim characters.\nWhat characters are being trimmed in this patch.\nWhy this does (or doesn't) need to be configurable per platform.\n\n\nFWIW, from my perspective, this is the BMC trying to cover up incorrect length fields in the eeprom FRU, which we should discuss about the right way to handle."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "krishna Raj",
                        "email": "krishnar@ami.com",
                        "username": "krishnar4"
                    },
                    "message": "Where in the IPMI spec it says that we should trim characters.\n-> In IPMI Spec they didn't mention about trimming characters. \n\nWhat characters are being trimmed in this patch.\n->This patch will trim all the trailing white spaces from fru property.\n\n\nWhy this does (or doesn't) need to be configurable per platform.\n->This patch is independent of plateform .This patch will check\ntrailing spaces before updating fru property, So that fru property will not have any trailing spaces."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "please answer these in your commit message.  Please speak to what the ipmi spec says in terms of how length should work, and if we're going against the specification here, we should talk through why we're doing that.\n\n\n> Why this does (or doesn't) need to be configurable per platform.\n\nThis wasn't answered.  To ask it another way, does this have any impacts to users that have their lengths set appropriately in their IPMI fru?"
                },
                {
                    "file": "src/FruDevice.cpp",
                    "line": 745,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Please don't use regex for this.  While it's slightly more complex, it's easier code to reason about and unit test if we just do this using std::algorithms.  Something like\n\nstatic inline void rtrim(std::string &s) {\n    s.erase(std::find_if(s.rbegin(), s.rend(), [](unsigned char ch) {\n        return !std::isspace(ch);\n    }).base(), s.end());\n}\n\nSeems better to me."
                },
                {
                    "file": "src/FruDevice.cpp",
                    "line": 745,
                    "reviewer": {
                        "name": "krishna Raj",
                        "email": "krishnar@ami.com",
                        "username": "krishnar4"
                    },
                    "message": "updated code."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "src/FruDevice.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 18,
            "sizeDeletions": 2
        },
        {
            "number": 2,
            "revision": "1f255c3252c13f3833c027b9fe1de73e44a0c632",
            "parents": [
                "3f4527a9e36c85a9d5af66ae9d7af074b09558c5"
            ],
            "ref": "refs/changes/85/53685/2",
            "uploader": {
                "name": "krishna Raj",
                "email": "krishnar@ami.com",
                "username": "krishnar4"
            },
            "createdOn": 1655185811,
            "author": {
                "name": "krishna Raj",
                "email": "krishnar@ami.com",
                "username": "krishnar4"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "src/fru_device.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 18,
            "sizeDeletions": 2
        },
        {
            "number": 3,
            "revision": "7cdc43543aeb6b588c608201879d653c5c89c0e1",
            "parents": [
                "3f4527a9e36c85a9d5af66ae9d7af074b09558c5"
            ],
            "ref": "refs/changes/85/53685/3",
            "uploader": {
                "name": "krishna Raj",
                "email": "krishnar@ami.com",
                "username": "krishnar4"
            },
            "createdOn": 1655186307,
            "author": {
                "name": "krishna Raj",
                "email": "krishnar@ami.com",
                "username": "krishnar4"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "src/fru_utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "include/fru_utils.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": 0
                },
                {
                    "file": "src/fru_device.cpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 31,
            "sizeDeletions": 2
        },
        {
            "number": 4,
            "revision": "3dabaf6d3e72683af2f636b8a1e011c32592c9cd",
            "parents": [
                "3f4527a9e36c85a9d5af66ae9d7af074b09558c5"
            ],
            "ref": "refs/changes/85/53685/4",
            "uploader": {
                "name": "krishna Raj",
                "email": "krishnar@ami.com",
                "username": "krishnar4"
            },
            "createdOn": 1655366081,
            "author": {
                "name": "krishna Raj",
                "email": "krishnar@ami.com",
                "username": "krishnar4"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "src/fru_utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "include/fru_utils.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": 0
                },
                {
                    "file": "src/fru_device.cpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 32,
            "sizeDeletions": 2
        }
    ]
}