{
    "project": "openbmc/bmcweb",
    "branch": "master",
    "id": "I0dcd60d10d4357bd8700f0dbc1ef86d94bcc82bb",
    "number": 50638,
    "subject": "Fix Boost exceptions in GetDateTime series",
    "owner": {
        "name": "Nan Zhou",
        "email": "nanzhoumails@gmail.com",
        "username": "FighterNan"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/bmcweb/+/50638",
    "commitMessage": "Fix Boost exceptions in GetDateTime series\n\nIn cases when the input time is too large, we return the maximum\nsupported date in the ISO Extended format.\n\nTested: Unit tests pass\nSigned-off-by: Nan Zhou <nanzhoumails@gmail.com>\nChange-Id: I0dcd60d10d4357bd8700f0dbc1ef86d94bcc82bb\n",
    "createdOn": 1643071177,
    "lastUpdated": 1643222602,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1643071177,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1643071205,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1643071205,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1643071697,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/36006/ : SUCCESS"
        },
        {
            "timestamp": 1643077201,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 2: Patch Set 1 was rebased"
        },
        {
            "timestamp": 1643077216,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1643077216,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1643077399,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 3: Patch Set 2 was rebased"
        },
        {
            "timestamp": 1643077410,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1643077410,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1643077413,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/36013/ : ABORTED"
        },
        {
            "timestamp": 1643077591,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1643077604,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1643077604,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1643077608,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/36015/ : ABORTED"
        },
        {
            "timestamp": 1643077641,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/36016/ : FAILURE"
        },
        {
            "timestamp": 1643077743,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1643077755,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1643077755,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1643077882,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Uploaded patch set 6: Commit message was updated."
        },
        {
            "timestamp": 1643078240,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/36017/ : SUCCESS"
        },
        {
            "timestamp": 1643078653,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 6:\n\n(4 comments)"
        },
        {
            "timestamp": 1643080323,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Uploaded patch set 7."
        },
        {
            "timestamp": 1643080335,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1643080335,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: -Ok-To-Test"
        },
        {
            "timestamp": 1643080364,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Uploaded patch set 8."
        },
        {
            "timestamp": 1643080369,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 6:\n\n(4 comments)"
        },
        {
            "timestamp": 1643080380,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1643080380,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: -Ok-To-Test"
        },
        {
            "timestamp": 1643080384,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/36024/ : ABORTED"
        },
        {
            "timestamp": 1643080899,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/36025/ : SUCCESS"
        },
        {
            "timestamp": 1643131857,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 8:\n\n(2 comments)"
        },
        {
            "timestamp": 1643131937,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1643142260,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1643142479,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1643151144,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 8:\n\n(2 comments)"
        },
        {
            "timestamp": 1643154448,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1643161712,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1643162168,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 8:\n\n(2 comments)"
        },
        {
            "timestamp": 1643219652,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 8:\n\n(2 comments)"
        },
        {
            "timestamp": 1643219738,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 8: Code-Review+2"
        },
        {
            "timestamp": 1643219742,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Change has been successfully merged"
        },
        {
            "timestamp": 1643222602,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 8:\n\n(2 comments)"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "00652ea621f85586d955efabf05040501fd1adf3",
            "parents": [
                "35fb5311303730c90395d1a7fb34bc710dfa5421"
            ],
            "ref": "refs/changes/38/50638/1",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1643071177,
            "author": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "http/ut/utility_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 51,
                    "deletions": -19
                },
                {
                    "file": "http/utility.hpp",
                    "type": "MODIFIED",
                    "insertions": 17,
                    "deletions": -5
                }
            ],
            "sizeInsertions": 82,
            "sizeDeletions": 24
        },
        {
            "number": 2,
            "revision": "a8519fe69babdc45018a5386170732dd28a87f93",
            "parents": [
                "f3b65972ea514cf976c03d521785687a6334971b"
            ],
            "ref": "refs/changes/38/50638/2",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1643077201,
            "author": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 14,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "fa983a1514065b40efda23c26b8902096cb3cde3",
            "parents": [
                "8d4c4875dd530064319bbee9e2b7ad08fcde099a"
            ],
            "ref": "refs/changes/38/50638/3",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1643077399,
            "author": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 14,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "268f9a7fca36211032eb7b0e34d589e852a56f46",
            "parents": [
                "8d4c4875dd530064319bbee9e2b7ad08fcde099a"
            ],
            "ref": "refs/changes/38/50638/4",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1643077591,
            "author": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "http/ut/utility_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 28,
                    "deletions": -26
                },
                {
                    "file": "http/utility.hpp",
                    "type": "MODIFIED",
                    "insertions": 17,
                    "deletions": -5
                }
            ],
            "sizeInsertions": 59,
            "sizeDeletions": 31
        },
        {
            "number": 5,
            "revision": "e65170dc97adf4dd503cb332cd5fa325cf2d8ac4",
            "parents": [
                "8d4c4875dd530064319bbee9e2b7ad08fcde099a"
            ],
            "ref": "refs/changes/38/50638/5",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1643077743,
            "author": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "http/ut/utility_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 27,
                    "deletions": -26
                },
                {
                    "file": "http/utility.hpp",
                    "type": "MODIFIED",
                    "insertions": 17,
                    "deletions": -5
                }
            ],
            "sizeInsertions": 58,
            "sizeDeletions": 31
        },
        {
            "number": 6,
            "revision": "f3d91e4c3f9c69f2c4ab799d0610c8afc1c7f38c",
            "parents": [
                "8d4c4875dd530064319bbee9e2b7ad08fcde099a"
            ],
            "ref": "refs/changes/38/50638/6",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1643077882,
            "author": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "http/ut/utility_test.cpp",
                    "line": 94,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "We don't need a comment for \"no exception\".  This is the default."
                },
                {
                    "file": "http/ut/utility_test.cpp",
                    "line": 94,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Done"
                },
                {
                    "file": "http/utility.hpp",
                    "line": 590,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Is this exposed through boost somewhere that we can rely on it without a magic number?"
                },
                {
                    "file": "http/utility.hpp",
                    "line": 590,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "No. I didn't find it."
                },
                {
                    "file": "http/utility.hpp",
                    "line": 590,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Can we at least clean this up so it's a magic number that matches the max string?  I'm still not quite sure how we know this is correct.  How do we know it's not 253402300798?  That answer should be obvious from the code."
                },
                {
                    "file": "http/utility.hpp",
                    "line": 590,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "It's covered in the unit test.\n\n```\n    EXPECT_EQ(getDateTimeUintMs(std::numeric_limits<uint64_t>::max()),\n              \"9999-12-31T23:59:59.999000+00:00\");\n    EXPECT_EQ(getDateTimeUint(std::numeric_limits<uint64_t>::max()),\n              \"9999-12-31T23:59:59+00:00\");\n```"
                },
                {
                    "file": "http/utility.hpp",
                    "line": 590,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "> That answer should be obvious from the code.\n\nI don't understand this comment. Are you saying the magic number should be obvious so people now how it is calculated? I don't have an answer for it. It is not obvious to get the number from \"9999-12-31T23:59:59\" since it involves leap year seconds."
                },
                {
                    "file": "http/utility.hpp",
                    "line": 590,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> It's covered in the unit test.\n\n253402300798 isn't explicitly covered by a unit test.\n\n\n> It is not obvious to get the number from \"9999-12-31T23:59:59\" since it involves leap year seconds.\n\nRight, so how was that number determined, given how non trivial it is?  It looks like the explicit point is that we can't go beyond year 9999.  Is there a way we could code against that instead?  Maybe we'd be better off picking a date closer so that it's more obvious, like yeah 2200?"
                },
                {
                    "file": "http/utility.hpp",
                    "line": 590,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Yes, we shouldn't have magic numbers in the code, and needing it kind of implies that we're using the wrong api.  Did you get a chance to look and see if boost::chrono has a better solution for this?"
                },
                {
                    "file": "http/utility.hpp",
                    "line": 590,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "creates a miliseconds first and then duration_cast to seconds?\n\nI can try it."
                },
                {
                    "file": "http/utility.hpp",
                    "line": 590,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "I looked into boost::chrono, in my understanding, it's a new time system, no related to ptime.\n\nThe documentation is bad. I have to look at BOOST test to see how to use their codes.\n\n```\ninline std::string getDateTimeUint(uint64_t secondsSinceEpoch)\n{\n    boost::chrono::duration<boost::uint64_t> boostSeconds(secondsSinceEpoch);\n    std::ostringstream out;\n\n    boost::chrono::time_point<boost::chrono::system_clock> tp(boostSeconds);\n    out << boost::chrono::time_fmt(boost::chrono::timezone::utc, \"%Y-%m-%dT%H:%M:%S\") << tp;\n    return out.str() + \"+00:00\";\n}\n\nTEST(Utility, GetDateTimeUint)\n{\n    EXPECT_EQ(getDateTimeUint(uint64_t{1638312095}),\n              \"2021-11-30T22:41:35+00:00\");\n    // some time in the future, beyond 2038\n    EXPECT_EQ(getDateTimeUint(uint64_t{41638312095}),\n              \"3289-06-18T21:48:15+00:00\");\n    // the maximum time we support\n    EXPECT_EQ(getDateTimeUint(uint64_t{253402300799}),\n              \"9999-12-31T23:59:59+00:00\");\n\n    // returns the maximum Redfish date\n    EXPECT_EQ(getDateTimeUint(std::numeric_limits<uint64_t>::max()),\n              \"9999-12-31T23:59:59+00:00\");\n\n    EXPECT_EQ(getDateTimeUint(std::numeric_limits<uint64_t>::min()),\n              \"1970-01-01T00:00:00+00:00\");\n}\n```\n\nThe above test failed with \n\n```\n[ RUN      ] Utility.GetDateTimeUint\n../http/ut/utility_test.cpp:88: Failure\nExpected equality of these values:\n  getDateTimeUint(uint64_t{41638312095})\n    Which is: \"2120-05-10T22:39:07+00:00\"\n  \"3289-06-18T21:48:15+00:00\"\n../http/ut/utility_test.cpp:91: Failure\nExpected equality of these values:\n  getDateTimeUint(uint64_t{253402300799})\n    Which is: \"1816-03-30T05:56:08+00:00\"\n  \"9999-12-31T23:59:59+00:00\"\n../http/ut/utility_test.cpp:95: Failure\nExpected equality of these values:\n  getDateTimeUint(std::numeric_limits<uint64_t>::max())\n    Which is: \"1969-12-31T23:59:59+00:00\"\n  \"9999-12-31T23:59:59+00:00\"\n[  FAILED  ] Utility.GetDateTimeUint (0 ms)\n```\nNothing makes sense.\n\nHow does duration_cast help here?"
                },
                {
                    "file": "http/utility.hpp",
                    "line": 590,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "> Right, so how was that number determined, given how non trivial it is?  It looks like the explicit point is that we can't go beyond year 9999.  Is there a way we could code against that instead?  Maybe we'd be better off picking a date closer so that it's more obvious, like yeah 2200?\n\nWe need year 9999, since our certificates can have such date. \n\n> Is there a way we could code against that instead?\nI can just add a test case to ensure this number is correct by reference it directly. Otherwise, do you want to parse a time from the string \"9999-12-31T23:59:59+00:00\" and convert it into an integer?\n\nI don't think it worths it.\n\nThese numbers can be found in other places if we google it. Name a few,\n\nhttps://developers.google.com/protocol-buffers/docs/reference/java/com/google/protobuf/util/Timestamps.html#isValid-com.google.protobuf.Timestamp-\n\nhttps://docs.microsoft.com/en-us/dotnet/api/system.datetimeoffset.fromunixtimeseconds?view=net-6.0#exceptions"
                },
                {
                    "file": "http/utility.hpp",
                    "line": 590,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Ok, hardcoded number is a mediocre answer, but I guess works.  Thanks for looking."
                },
                {
                    "file": "http/utility.hpp",
                    "line": 590,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Ack. Thanks!"
                },
                {
                    "file": "http/utility.hpp",
                    "line": 596,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Is there a version of this constructor that doesn't throw?"
                },
                {
                    "file": "http/utility.hpp",
                    "line": 596,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Tried, didn't find one."
                },
                {
                    "file": "http/utility.hpp",
                    "line": 615,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This magic number is repeated 3 times in this patch.  Lets avoid that if we can, but at the very least, we should only declare it once."
                },
                {
                    "file": "http/utility.hpp",
                    "line": 615,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "maxMilliSeconds and maxSeconds are different though. Done, declared them in the internal scope."
                },
                {
                    "file": "http/utility.hpp",
                    "line": 615,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "They're the same plus a couple digits."
                },
                {
                    "file": "http/utility.hpp",
                    "line": 615,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "I can do \nconstexpr uint64_t maxSeconds = 253402300799;\nconstexpr uint64_t maxMilliSeconds = 253402300799 * 1000 + 999;\n\nif that helps a bit."
                },
                {
                    "file": "http/utility.hpp",
                    "line": 615,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "You mean?\n\nconstexpr uint64_t maxSeconds = 253402300799;\nconstexpr uint64_t maxMilliSeconds = maxSeconds * 1000 + 999;"
                },
                {
                    "file": "http/utility.hpp",
                    "line": 615,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "oh, yes. Typo, I meant maxSeconds * 1000 + 999"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "http/ut/utility_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 27,
                    "deletions": -26
                },
                {
                    "file": "http/utility.hpp",
                    "type": "MODIFIED",
                    "insertions": 17,
                    "deletions": -5
                }
            ],
            "sizeInsertions": 58,
            "sizeDeletions": 31
        },
        {
            "number": 7,
            "revision": "8a6f178ec7b06d233580343676537928b46aac1c",
            "parents": [
                "8d4c4875dd530064319bbee9e2b7ad08fcde099a"
            ],
            "ref": "refs/changes/38/50638/7",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1643080323,
            "author": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "http/ut/utility_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 27,
                    "deletions": -26
                },
                {
                    "file": "http/utility.hpp",
                    "type": "MODIFIED",
                    "insertions": 18,
                    "deletions": -6
                }
            ],
            "sizeInsertions": 59,
            "sizeDeletions": 32
        },
        {
            "number": 8,
            "revision": "22ce5458073055db03e4288187116486eaaa64dc",
            "parents": [
                "8d4c4875dd530064319bbee9e2b7ad08fcde099a"
            ],
            "ref": "refs/changes/38/50638/8",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1643080364,
            "author": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Did you look into whether boost::chrono duration_cast has a better solution to this?"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "http/ut/utility_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 27,
                    "deletions": -26
                },
                {
                    "file": "http/utility.hpp",
                    "type": "MODIFIED",
                    "insertions": 18,
                    "deletions": -6
                }
            ],
            "sizeInsertions": 59,
            "sizeDeletions": 32
        }
    ]
}