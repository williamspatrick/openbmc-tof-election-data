{
    "project": "openbmc/pldm",
    "branch": "master",
    "id": "I5f7a3948ea019b4dc983cf5e1926cfc128c02084",
    "number": 48340,
    "subject": "Change the send Buffer size dynamically",
    "owner": {
        "name": "ManojKiran Eda",
        "email": "manojkiran.eda@gmail.com",
        "username": "manojkiraneda"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/pldm/+/48340",
    "commitMessage": "Change the send Buffer size dynamically\n\nOn a Linux system the send buffer size has defaulted\nto around 90k, and when a pldm message is sent via\nthe pldm_send() that is bigger than 90k, we get an error\nENOBUFS (No buffer space avilable).\n\nThis commit would dynamically change the socket parameter\n(SO_SNDBUF) to set the new maximum socket send buffer size\nso that we can successfully send the message.\n\nTested By:\n\n1. hard coded the current buffer size value to 10 and forced\n   the buffer size to be increase for mutiple commands & was able\n   to power on the host with out any problems.\n\nSigned-off-by: Manojkiran Eda <manojkiran.eda@gmail.com>\nChange-Id: I5f7a3948ea019b4dc983cf5e1926cfc128c02084\n",
    "createdOn": 1635332849,
    "lastUpdated": 1641362141,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1635332849,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1635332864,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1635332931,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Patch Set 2: Commit message was updated."
        },
        {
            "timestamp": 1635333748,
            "reviewer": {
                "name": "Deepak Kodihalli",
                "email": "deepak.kodihalli.83@gmail.com",
                "username": "dkodihal"
            },
            "message": "Patch Set 2:\n\n(4 comments)"
        },
        {
            "timestamp": 1635333950,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 2:\n\n(5 comments)"
        },
        {
            "timestamp": 1635339852,
            "reviewer": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1635340185,
            "reviewer": {
                "name": "Deepak Kodihalli",
                "email": "deepak.kodihalli.83@gmail.com",
                "username": "dkodihal"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1635341891,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/3461/ (2/2)\n\nppc64le CI Build Started"
        },
        {
            "timestamp": 1635346531,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/29164/ : SUCCESS\n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/3461/ : ppc64le CI Build Successful"
        },
        {
            "timestamp": 1635347219,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1635347237,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1635347245,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/3462/ (2/2)\n\nppc64le CI Build Started"
        },
        {
            "timestamp": 1635347737,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Patch Set 3:\n\n(8 comments)"
        },
        {
            "timestamp": 1635348488,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/29187/ : SUCCESS\n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/3462/ : ppc64le CI Build Successful"
        },
        {
            "timestamp": 1635397097,
            "reviewer": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1635466108,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 3:\n\n(5 comments)"
        },
        {
            "timestamp": 1635485972,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1635485985,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1635486343,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Patch Set 4:\n\n(4 comments)"
        },
        {
            "timestamp": 1635489910,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/3474/ (2/2)\n\nppc64le CI Build Started"
        },
        {
            "timestamp": 1635495842,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/3474/ : ppc64le CI Build Failed\n\nhttps://jenkins.openbmc.org/job/ci-repository/29313/ : SUCCESS"
        },
        {
            "timestamp": 1635496049,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nppc builder seems to have some problems :\nPackage openbmc/gpioplus failed!\nTraceback (most recent call last):\n  File \"./scripts/build-unit-test-docker\", line 842, in <module>\n    Package.generate_all()\n  File \"./scripts/build-unit-test-docker\", line 400, in generate_all\n    raise t.exception\n  File \"./scripts/build-unit-test-docker\", line 369, in run\n    Docker.build(self.package, tag, dockerfile)\n  File \"./scripts/build-unit-test-docker\", line 634, in build\n    lambda line: print(\n  File \"/usr/lib/python3/dist-packages/sh.py\", line 1021, in __call__\n    return RunningCommand(cmd, call_args, stdin, stdout, stderr)\n  File \"/usr/lib/python3/dist-packages/sh.py\", line 486, in __init__\n    self.wait()\n  File \"/usr/lib/python3/dist-packages/sh.py\", line 500, in wait\n    self.handle_command_exit_code(exit_code)\n  File \"/usr/lib/python3/dist-packages/sh.py\", line 516, in handle_command_exit_code\n    raise exc(self.ran, self.process.stdout, self.process.stderr)\nsh.ErrorReturnCode_1: \n\n  RAN: '/usr/bin/docker build --network=host --force-rm --no-cache=false -t openbmc/ubuntu-unit-test-openbmc-gpioplus:2021-W43-6bc7b22263a44f66 -'\n\nRe-triggering the CI"
        },
        {
            "timestamp": 1635496056,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Verified\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/3475/ (2/2)\n\nppc64le CI Build Started"
        },
        {
            "timestamp": 1635497301,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/3475/ : ppc64le CI Build Failed\n\nhttps://jenkins.openbmc.org/job/ci-repository/29362/ : SUCCESS"
        },
        {
            "timestamp": 1635521089,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Verified\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/3481/ (2/2)\n\nppc64le CI Build Started"
        },
        {
            "timestamp": 1635521991,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/29362/ : SUCCESS\n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/3481/ : ppc64le CI Build Successful"
        },
        {
            "timestamp": 1635805762,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 4: Code-Review-1\n\n(3 comments)\n\nHi Manoj - I'd like to see some more work on the error messages, I think they're a bit terse to the point of lacking information right now."
        },
        {
            "timestamp": 1636618821,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1636618834,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1636618843,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/3606/ (2/2)\n\nppc64le CI Build Started"
        },
        {
            "timestamp": 1636619020,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Uploaded patch set 6."
        },
        {
            "timestamp": 1636619034,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1636619038,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/3606/ : ABORTED\n\nhttps://jenkins.openbmc.org/job/ci-repository/30132/ : FAILURE"
        },
        {
            "timestamp": 1636619043,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/3607/ (2/2)\n\nppc64le CI Build Started"
        },
        {
            "timestamp": 1636619382,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Patch Set 6:\n\n(3 comments)\n\n> Patch Set 4: Code-Review-1\n> \n> (3 comments)\n> \n> Hi Manoj - I'd like to see some more work on the error messages, I think they're a bit terse to the point of lacking information right now.\n\nAgree to all your comments - i hope i wrote better traces this time."
        },
        {
            "timestamp": 1636620357,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/30133/ : FAILURE\n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/3607/ : ppc64le CI Build Failed"
        },
        {
            "timestamp": 1636621984,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Uploaded patch set 7."
        },
        {
            "timestamp": 1636621999,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1636622009,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/3608/ (2/2)\n\nppc64le CI Build Started"
        },
        {
            "timestamp": 1636624099,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/30135/ : SUCCESS\n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/3608/ : ppc64le CI Build Successful"
        },
        {
            "timestamp": 1638939262,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 7:\n\n(2 comments)"
        },
        {
            "timestamp": 1638947593,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Uploaded patch set 8."
        },
        {
            "timestamp": 1638947608,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1638947617,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/3741/ (1/2)\n\nppc64le CI Build Started"
        },
        {
            "timestamp": 1638947669,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Patch Set 8:\n\n(2 comments)"
        },
        {
            "timestamp": 1638949539,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-repository-ppc64le/3741/ : ppc64le CI Build Successful\n\nhttps://jenkins.openbmc.org/job/ci-repository/31530/ : SUCCESS"
        },
        {
            "timestamp": 1639476687,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@aj.id.au",
                "username": "amboar"
            },
            "message": "Patch Set 8: Code-Review+1"
        },
        {
            "timestamp": 1639634389,
            "reviewer": {
                "name": "Sampa Misra",
                "email": "sampmisr@in.ibm.com",
                "username": "sampmisr"
            },
            "message": "Patch Set 8: Code-Review+1"
        },
        {
            "timestamp": 1639640713,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 8: Code-Review+1"
        },
        {
            "timestamp": 1641322445,
            "reviewer": {
                "name": "Deepak Kodihalli",
                "email": "deepak.kodihalli.83@gmail.com",
                "username": "dkodihal"
            },
            "message": "Patch Set 8: Code-Review+2"
        },
        {
            "timestamp": 1641354750,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Change has been successfully rebased and submitted as 9fffea2c331ff72e622c7ba9f0b86b369fbb3bf3"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "e71c2d84feb2e07589425dad62a02825329d3a1d",
            "parents": [
                "60e1fe91dee16e2f191576426dbac7bfb4b60807"
            ],
            "ref": "refs/changes/40/48340/1",
            "uploader": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "createdOn": 1635332849,
            "author": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "requester/handler.hpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -3
                },
                {
                    "file": "requester/test/handler_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -7
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "type": "MODIFIED",
                    "insertions": 39,
                    "deletions": -2
                },
                {
                    "file": "requester/test/request_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -4
                },
                {
                    "file": "requester/request.hpp",
                    "type": "MODIFIED",
                    "insertions": 18,
                    "deletions": -3
                },
                {
                    "file": "requester/test/mock_request.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 102,
            "sizeDeletions": 20
        },
        {
            "number": 2,
            "revision": "693fd2dbbf7bdab18ba4cf08450cf391985505fd",
            "parents": [
                "60e1fe91dee16e2f191576426dbac7bfb4b60807"
            ],
            "ref": "refs/changes/40/48340/2",
            "uploader": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "createdOn": 1635332931,
            "author": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 10,
                    "reviewer": {
                        "name": "Tom Joseph",
                        "email": "rushtotom@gmail.com",
                        "username": "tomjoseph83"
                    },
                    "message": "If this is an OEM command, do we need to have this check for the standard commands? Probably isolate this check for the special OEM commands."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 10,
                    "reviewer": {
                        "name": "Deepak Kodihalli",
                        "email": "deepak.kodihalli.83@gmail.com",
                        "username": "dkodihal"
                    },
                    "message": "Tom - this could easily be the case for PLDM for FW update, right? This is PLDM doing a send to MCTP. MCTP could still break the message up based on the MCTP MTU."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 10,
                    "reviewer": {
                        "name": "Tom Joseph",
                        "email": "rushtotom@gmail.com",
                        "username": "tomjoseph83"
                    },
                    "message": "Agree, the max size in RequestUpdate could cross the 90K system wide restriction."
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 172,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "The man-page suggests that most sockopts are `int` types. size_t is a type that can index all of addressable memory, and is often larger than int. It's also unsigned, but not that SO_SNDBUF should ever be negative. It might be easier just to use int here though, as it dodges all the reasoning."
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 172,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "Ack"
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 178,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "I'm surprised you're not using phosphor-logging. lg2 is particularly nice.\n\nRegardless, you want to include either errno or the output of strerror() here."
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 178,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "Ack"
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 372,
                    "reviewer": {
                        "name": "Deepak Kodihalli",
                        "email": "deepak.kodihalli.83@gmail.com",
                        "username": "dkodihal"
                    },
                    "message": "can this be passed to the lambda?"
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 372,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "Done"
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 375,
                    "reviewer": {
                        "name": "Deepak Kodihalli",
                        "email": "deepak.kodihalli.83@gmail.com",
                        "username": "dkodihal"
                    },
                    "message": "Are we ok to continue post this?"
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 375,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "As above. Let's try to help the poor person debugging this failure :)"
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 375,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "> Are we ok to continue to post this?\n> As above. Let's try to help the poor person debugging this failure :)\nthis getsockopt() call is removed using the parameter passed via lambda"
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 383,
                    "reviewer": {
                        "name": "Deepak Kodihalli",
                        "email": "deepak.kodihalli.83@gmail.com",
                        "username": "dkodihal"
                    },
                    "message": "Shouldn't you be handling errno here? What if this is too large for the socket buffer?"
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 383,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "Done"
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 387,
                    "reviewer": {
                        "name": "Deepak Kodihalli",
                        "email": "deepak.kodihalli.83@gmail.com",
                        "username": "dkodihal"
                    },
                    "message": "Handle error?"
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 387,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "If this fails you're going to fail to send the message. Did you test the case where you try to send e.g. a 100MB message?"
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 387,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "> If this fails you're going to fail to send the message. Did you test the case where you try to send e.g. a 100MB message?\n\nNo Andrew i have not tested with a big message ,i suppose we may not be use a value than the max allowed on a linux system - in which case we will get [ENOMEM](There was insufficient memory available for the operation to complete).\n\nAlthough i will try to see if i can do this test myself using some fileIO operations."
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 387,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "I am not sure how this can be handled, apart from logging the error no and proceeding to pldm_send and fail there ?"
                },
                {
                    "file": "requester/request.hpp",
                    "line": 186,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "You know pldm_send() will error before you try to send it if the setsockopt() fails."
                },
                {
                    "file": "requester/request.hpp",
                    "line": 186,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "i am not sure if we can handle this case, apart from logging an error and let pldm_send handle it ? or do you want me to return here and send a PLDM_ERROR without actually calling the pldm_send ?"
                },
                {
                    "file": "requester/request.hpp",
                    "line": 186,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Return without calling pldm_send(), as you know it's going to fail."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 24,
                    "deletions": 0
                },
                {
                    "file": "requester/handler.hpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -3
                },
                {
                    "file": "requester/test/handler_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -7
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "type": "MODIFIED",
                    "insertions": 39,
                    "deletions": -2
                },
                {
                    "file": "requester/test/request_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -4
                },
                {
                    "file": "requester/request.hpp",
                    "type": "MODIFIED",
                    "insertions": 18,
                    "deletions": -3
                },
                {
                    "file": "requester/test/mock_request.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 101,
            "sizeDeletions": 20
        },
        {
            "number": 3,
            "revision": "34a8f606ac9d77a955e3399e00822b1fa9c2a3d3",
            "parents": [
                "60e1fe91dee16e2f191576426dbac7bfb4b60807"
            ],
            "ref": "refs/changes/40/48340/3",
            "uploader": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "createdOn": 1635347219,
            "author": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 178,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "I don't think it's useful to report this, it's always going to be -1 on error. Reporting errno is what we want."
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 178,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "Done"
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 375,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "I don't think it's useful to report the value of rc, it's always going to be -1 on error. Reporting errno is what we want."
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 375,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "Done"
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 377,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Again, IMO we should just return an error here, as the sendmsg() call is guaranteed to fail, and we know this."
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 377,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "Added a plain return here skipping the sendmsg() call. do you think instead of return , exit(EXIT_FAILURE) would make more sense ?"
                },
                {
                    "file": "requester/request.hpp",
                    "line": 187,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Return here as discussed on PS2."
                },
                {
                    "file": "requester/request.hpp",
                    "line": 187,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "requester/handler.hpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -3
                },
                {
                    "file": "requester/test/handler_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -7
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "type": "MODIFIED",
                    "insertions": 29,
                    "deletions": -4
                },
                {
                    "file": "requester/test/request_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -4
                },
                {
                    "file": "requester/request.hpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": -3
                },
                {
                    "file": "requester/test/mock_request.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 93,
            "sizeDeletions": 22
        },
        {
            "number": 4,
            "revision": "11b844dd3a7449164837f849a9647e94e67ed8c2",
            "parents": [
                "d207b59478b734db5b25729bf93781efe61724c9"
            ],
            "ref": "refs/changes/40/48340/4",
            "uploader": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "createdOn": 1635485972,
            "author": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 178,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "I think these error messages still need work. What were you trying to do when you called getsockopt()?\n\nI'd feel mildly annoyed if I saw this in a log message as it gives me next to no information about what was going on, other than an error occurred and what the errno was."
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 178,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "Agree, done."
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 374,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "Again, why were you calling setsockopt()? What was the call trying to achieve when it failed? Try to put yourself in the position of reading the logs when this error occurred and think about what questions you might have when you see this log message."
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 374,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "Done"
                },
                {
                    "file": "requester/request.hpp",
                    "line": 187,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "See comments on [gs]etsockopt() in pldmd.cpp"
                },
                {
                    "file": "requester/request.hpp",
                    "line": 187,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "requester/handler.hpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -3
                },
                {
                    "file": "requester/test/handler_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -7
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "type": "MODIFIED",
                    "insertions": 30,
                    "deletions": -4
                },
                {
                    "file": "requester/test/request_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -4
                },
                {
                    "file": "requester/request.hpp",
                    "type": "MODIFIED",
                    "insertions": 22,
                    "deletions": -3
                },
                {
                    "file": "requester/test/mock_request.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 97,
            "sizeDeletions": 22
        },
        {
            "number": 5,
            "revision": "8c4e7f978009d2a8a55c8ccc4b6cd1642a872e2c",
            "parents": [
                "38b6e5fb49e5b82c5a4ef09072798bd3db05f455"
            ],
            "ref": "refs/changes/40/48340/5",
            "uploader": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "createdOn": 1636618821,
            "author": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "requester/handler.hpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -3
                },
                {
                    "file": "requester/test/handler_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -7
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": -4
                },
                {
                    "file": "requester/test/request_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -4
                },
                {
                    "file": "requester/request.hpp",
                    "type": "MODIFIED",
                    "insertions": 24,
                    "deletions": -3
                },
                {
                    "file": "requester/test/mock_request.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 102,
            "sizeDeletions": 23
        },
        {
            "number": 6,
            "revision": "a59f28f8db49e5159e456e9e0cd4c411d8cabe0b",
            "parents": [
                "38b6e5fb49e5b82c5a4ef09072798bd3db05f455"
            ],
            "ref": "refs/changes/40/48340/6",
            "uploader": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "createdOn": 1636619020,
            "author": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "requester/handler.hpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": -3
                },
                {
                    "file": "requester/test/handler_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -7
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": -4
                },
                {
                    "file": "requester/test/request_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -4
                },
                {
                    "file": "requester/request.hpp",
                    "type": "MODIFIED",
                    "insertions": 24,
                    "deletions": -3
                },
                {
                    "file": "requester/test/mock_request.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 103,
            "sizeDeletions": 23
        },
        {
            "number": 7,
            "revision": "905721ab3cd2d667f0f3d6d3890b828d10728a15",
            "parents": [
                "38b6e5fb49e5b82c5a4ef09072798bd3db05f455"
            ],
            "ref": "refs/changes/40/48340/7",
            "uploader": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "createdOn": 1636621984,
            "author": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 392,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "What were we trying to set the buffer size to when it failed? What's the current size?"
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 392,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "Done"
                },
                {
                    "file": "requester/request.hpp",
                    "line": 189,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@aj.id.au",
                        "username": "amboar"
                    },
                    "message": "What were we trying to set the buffer size to? What's the current size?"
                },
                {
                    "file": "requester/request.hpp",
                    "line": 189,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "fw-update/test/inventory_manager_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                },
                {
                    "file": "requester/handler.hpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": -3
                },
                {
                    "file": "requester/test/handler_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -7
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": -4
                },
                {
                    "file": "requester/test/request_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -4
                },
                {
                    "file": "requester/request.hpp",
                    "type": "MODIFIED",
                    "insertions": 24,
                    "deletions": -3
                },
                {
                    "file": "requester/test/mock_request.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 104,
            "sizeDeletions": 24
        },
        {
            "number": 8,
            "revision": "1d6e00b6cf42695970c1d0105840a7e2b98ed730",
            "parents": [
                "872f0f6938eddddf86ae35be944b1766e1a36228"
            ],
            "ref": "refs/changes/40/48340/8",
            "uploader": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "createdOn": 1638947593,
            "author": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "fw-update/test/inventory_manager_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                },
                {
                    "file": "requester/handler.hpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": -3
                },
                {
                    "file": "requester/test/handler_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -7
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "type": "MODIFIED",
                    "insertions": 37,
                    "deletions": -4
                },
                {
                    "file": "requester/test/request_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -4
                },
                {
                    "file": "requester/request.hpp",
                    "type": "MODIFIED",
                    "insertions": 27,
                    "deletions": -3
                },
                {
                    "file": "requester/test/mock_request.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 112,
            "sizeDeletions": 24
        },
        {
            "number": 9,
            "revision": "9fffea2c331ff72e622c7ba9f0b86b369fbb3bf3",
            "parents": [
                "8fadc9e03fdb57e5e724df25134a96b27666a52d"
            ],
            "ref": "refs/changes/40/48340/9",
            "uploader": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "createdOn": 1641354750,
            "author": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "fw-update/test/inventory_manager_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                },
                {
                    "file": "requester/handler.hpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": -3
                },
                {
                    "file": "requester/test/handler_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -7
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "type": "MODIFIED",
                    "insertions": 37,
                    "deletions": -4
                },
                {
                    "file": "requester/test/request_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -4
                },
                {
                    "file": "requester/request.hpp",
                    "type": "MODIFIED",
                    "insertions": 27,
                    "deletions": -3
                },
                {
                    "file": "requester/test/mock_request.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 112,
            "sizeDeletions": 24
        }
    ]
}