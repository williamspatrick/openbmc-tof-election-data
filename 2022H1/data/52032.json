{
    "project": "openbmc/openbmc-test-automation",
    "branch": "master",
    "id": "I2b41ab67128c62408eb0a51453535507ddc1870a",
    "number": 52032,
    "subject": "Fix for IPMI non-root user delete",
    "owner": {
        "name": "Ashwini Chandrappa",
        "email": "Ashwini.Chandrappa777@ibm.com",
        "username": "AshwiniC777"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/openbmc-test-automation/+/52032",
    "commitMessage": "Fix for IPMI non-root user delete\n\nChange-Id: I2b41ab67128c62408eb0a51453535507ddc1870a\nSigned-off-by: Ashwini Chandrappa <Ashwini.Chandrappa777@ibm.com>\n",
    "createdOn": 1647403512,
    "lastUpdated": 1651472873,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1647403512,
            "reviewer": {
                "name": "Ashwini Chandrappa",
                "email": "Ashwini.Chandrappa777@ibm.com",
                "username": "AshwiniC777"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1647403525,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1:\n\nUser not approved, see admin, no CI"
        },
        {
            "timestamp": 1647406811,
            "reviewer": {
                "name": "Rahul Maheshwari",
                "email": "rahulmaheshwari@in.ibm.com",
                "username": "rahulmah"
            },
            "message": "Patch Set 1: Code-Review-1\n\n(5 comments)"
        },
        {
            "timestamp": 1647600602,
            "reviewer": {
                "name": "Ashwini Chandrappa",
                "email": "Ashwini.Chandrappa777@ibm.com",
                "username": "AshwiniC777"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1647600616,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2:\n\nUser not approved, see admin, no CI"
        },
        {
            "timestamp": 1647600813,
            "reviewer": {
                "name": "Ashwini Chandrappa",
                "email": "Ashwini.Chandrappa777@ibm.com",
                "username": "AshwiniC777"
            },
            "message": "Patch Set 2:\n\n(5 comments)"
        },
        {
            "timestamp": 1647605380,
            "reviewer": {
                "name": "George Keishing",
                "email": "gkeishin@gmail.com",
                "username": "gkeishin"
            },
            "message": "Patch Set 2: Ok-To-Test+1"
        },
        {
            "timestamp": 1647605410,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/39217/ : SUCCESS"
        },
        {
            "timestamp": 1647605503,
            "reviewer": {
                "name": "George Keishing",
                "email": "gkeishin@gmail.com",
                "username": "gkeishin"
            },
            "message": "Patch Set 2: Code-Review-1\n\n(2 comments)"
        },
        {
            "timestamp": 1648129952,
            "reviewer": {
                "name": "Ashwini Chandrappa",
                "email": "Ashwini.Chandrappa777@ibm.com",
                "username": "AshwiniC777"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1648129973,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3:\n\nUser not approved, see admin, no CI"
        },
        {
            "timestamp": 1648130017,
            "reviewer": {
                "name": "Ashwini Chandrappa",
                "email": "Ashwini.Chandrappa777@ibm.com",
                "username": "AshwiniC777"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1648130845,
            "reviewer": {
                "name": "George Keishing",
                "email": "gkeishin@gmail.com",
                "username": "gkeishin"
            },
            "message": "Patch Set 3: Ok-To-Test+1"
        },
        {
            "timestamp": 1648130875,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/39645/ : SUCCESS"
        },
        {
            "timestamp": 1648130885,
            "reviewer": {
                "name": "George Keishing",
                "email": "gkeishin@gmail.com",
                "username": "gkeishin"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1648473024,
            "reviewer": {
                "name": "Rahul Maheshwari",
                "email": "rahulmaheshwari@in.ibm.com",
                "username": "rahulmah"
            },
            "message": "Patch Set 3: Code-Review-1\n\n(1 comment)"
        },
        {
            "timestamp": 1648648393,
            "reviewer": {
                "name": "Ashwini Chandrappa",
                "email": "Ashwini.Chandrappa777@ibm.com",
                "username": "AshwiniC777"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1648648407,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4:\n\nUser not approved, see admin, no CI"
        },
        {
            "timestamp": 1648648629,
            "reviewer": {
                "name": "Ashwini Chandrappa",
                "email": "Ashwini.Chandrappa777@ibm.com",
                "username": "AshwiniC777"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1651229503,
            "reviewer": {
                "name": "Ashwini Chandrappa",
                "email": "Ashwini.Chandrappa777@ibm.com",
                "username": "AshwiniC777"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1651229517,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5:\n\nUser not approved, see admin, no CI"
        },
        {
            "timestamp": 1651231350,
            "reviewer": {
                "name": "George Keishing",
                "email": "gkeishin@gmail.com",
                "username": "gkeishin"
            },
            "message": "Removed reviewer Sivas SRR."
        },
        {
            "timestamp": 1651232123,
            "reviewer": {
                "name": "Ashwini Chandrappa",
                "email": "Ashwini.Chandrappa777@ibm.com",
                "username": "AshwiniC777"
            },
            "message": "Uploaded patch set 6."
        },
        {
            "timestamp": 1651232138,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6:\n\nUser not approved, see admin, no CI"
        },
        {
            "timestamp": 1651232139,
            "reviewer": {
                "name": "Ashwini Chandrappa",
                "email": "Ashwini.Chandrappa777@ibm.com",
                "username": "AshwiniC777"
            },
            "message": "Removed reviewer Sivas SRR."
        },
        {
            "timestamp": 1651232142,
            "reviewer": {
                "name": "Ashwini Chandrappa",
                "email": "Ashwini.Chandrappa777@ibm.com",
                "username": "AshwiniC777"
            },
            "message": "Removed reviewer Michael Walsh."
        },
        {
            "timestamp": 1651471506,
            "reviewer": {
                "name": "Rahul Maheshwari",
                "email": "rahulmaheshwari@in.ibm.com",
                "username": "rahulmah"
            },
            "message": "Patch Set 6: Code-Review+1"
        },
        {
            "timestamp": 1651472583,
            "reviewer": {
                "name": "George Keishing",
                "email": "gkeishin@gmail.com",
                "username": "gkeishin"
            },
            "message": "Patch Set 6: Ok-To-Test+1"
        },
        {
            "timestamp": 1651472612,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/42384/ : SUCCESS"
        },
        {
            "timestamp": 1651472864,
            "reviewer": {
                "name": "George Keishing",
                "email": "gkeishin@gmail.com",
                "username": "gkeishin"
            },
            "message": "Patch Set 6: Code-Review+1"
        },
        {
            "timestamp": 1651472866,
            "reviewer": {
                "name": "George Keishing",
                "email": "gkeishin@gmail.com",
                "username": "gkeishin"
            },
            "message": "Patch Set 6: Code-Review+2"
        },
        {
            "timestamp": 1651472873,
            "reviewer": {
                "name": "George Keishing",
                "email": "gkeishin@gmail.com",
                "username": "gkeishin"
            },
            "message": "Change has been successfully rebased and submitted as 12be4b4169987a08170229badcdccade1d5db3a2"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "9c8e97b3884012cbf52ac49db6258444f4251dc6",
            "parents": [
                "6ec9d708267012a5117fefa071dac2c899fdcde2"
            ],
            "ref": "refs/changes/32/52032/1",
            "uploader": {
                "name": "Ashwini Chandrappa",
                "email": "Ashwini.Chandrappa777@ibm.com",
                "username": "AshwiniC777"
            },
            "createdOn": 1647403512,
            "author": {
                "name": "Ashwini Chandrappa",
                "email": "Ashwini.Chandrappa777@ibm.com",
                "username": "AshwiniC777"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "ipmi/test_ipmi_user.robot",
                    "line": 42,
                    "reviewer": {
                        "name": "Rahul Maheshwari",
                        "email": "rahulmaheshwari@in.ibm.com",
                        "username": "rahulmah"
                    },
                    "message": "# Delete all IPMI user except admin user"
                },
                {
                    "file": "ipmi/test_ipmi_user.robot",
                    "line": 42,
                    "reviewer": {
                        "name": "Ashwini Chandrappa",
                        "email": "Ashwini.Chandrappa777@ibm.com",
                        "username": "AshwiniC777"
                    },
                    "message": "Removed this.. and applied new logic"
                },
                {
                    "file": "lib/ipmi_client.robot",
                    "line": 431,
                    "reviewer": {
                        "name": "Rahul Maheshwari",
                        "email": "rahulmaheshwari@in.ibm.com",
                        "username": "rahulmah"
                    },
                    "message": "For up stream this fix should be is fine. For downstream command we should not try removing service user. George any thoughts?"
                },
                {
                    "file": "lib/ipmi_client.robot",
                    "line": 431,
                    "reviewer": {
                        "name": "Ashwini Chandrappa",
                        "email": "Ashwini.Chandrappa777@ibm.com",
                        "username": "AshwiniC777"
                    },
                    "message": "Removed this.. and applied new logic"
                },
                {
                    "file": "lib/resource.robot",
                    "line": 50,
                    "reviewer": {
                        "name": "Rahul Maheshwari",
                        "email": "rahulmaheshwari@in.ibm.com",
                        "username": "rahulmah"
                    },
                    "message": "For up steam build I believe root/0penBmc will remain as username and password. DO do not change this."
                },
                {
                    "file": "lib/resource.robot",
                    "line": 50,
                    "reviewer": {
                        "name": "Ashwini Chandrappa",
                        "email": "Ashwini.Chandrappa777@ibm.com",
                        "username": "AshwiniC777"
                    },
                    "message": "Done"
                },
                {
                    "file": "redfish/account_service/test_ipmi_redfish_user.robot",
                    "line": 20,
                    "reviewer": {
                        "name": "Rahul Maheshwari",
                        "email": "rahulmaheshwari@in.ibm.com",
                        "username": "rahulmah"
                    },
                    "message": "Push this as a separate fix."
                },
                {
                    "file": "redfish/account_service/test_ipmi_redfish_user.robot",
                    "line": 20,
                    "reviewer": {
                        "name": "Ashwini Chandrappa",
                        "email": "Ashwini.Chandrappa777@ibm.com",
                        "username": "AshwiniC777"
                    },
                    "message": "Done"
                },
                {
                    "file": "redfish/account_service/test_ipmi_redfish_user.robot",
                    "line": 220,
                    "reviewer": {
                        "name": "Rahul Maheshwari",
                        "email": "rahulmaheshwari@in.ibm.com",
                        "username": "rahulmah"
                    },
                    "message": "Push this as a separate fix."
                },
                {
                    "file": "redfish/account_service/test_ipmi_redfish_user.robot",
                    "line": 220,
                    "reviewer": {
                        "name": "Ashwini Chandrappa",
                        "email": "Ashwini.Chandrappa777@ibm.com",
                        "username": "AshwiniC777"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "lib/resource.robot",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                },
                {
                    "file": "ipmi/test_ipmi_user.robot",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -2
                },
                {
                    "file": "redfish/account_service/test_ipmi_redfish_user.robot",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -3
                },
                {
                    "file": "lib/ipmi_client.robot",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 22,
            "sizeDeletions": 10
        },
        {
            "number": 2,
            "revision": "20bef5b5d4a1057510ab9148e53f4277d9257034",
            "parents": [
                "6ec9d708267012a5117fefa071dac2c899fdcde2"
            ],
            "ref": "refs/changes/32/52032/2",
            "uploader": {
                "name": "Ashwini Chandrappa",
                "email": "Ashwini.Chandrappa777@ibm.com",
                "username": "AshwiniC777"
            },
            "createdOn": 1647600602,
            "author": {
                "name": "Ashwini Chandrappa",
                "email": "Ashwini.Chandrappa777@ibm.com",
                "username": "AshwiniC777"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "ipmi/test_ipmi_user.robot",
                    "line": 49,
                    "reviewer": {
                        "name": "George Keishing",
                        "email": "gkeishin@gmail.com",
                        "username": "gkeishin"
                    },
                    "message": "Very nice .. but can do this as part of the Suite setup so that user is aware it needs to clean up before testing."
                },
                {
                    "file": "ipmi/test_ipmi_user.robot",
                    "line": 49,
                    "reviewer": {
                        "name": "Ashwini Chandrappa",
                        "email": "Ashwini.Chandrappa777@ibm.com",
                        "username": "AshwiniC777"
                    },
                    "message": "Done"
                },
                {
                    "file": "lib/resource.robot",
                    "line": 150,
                    "reviewer": {
                        "name": "George Keishing",
                        "email": "gkeishin@gmail.com",
                        "username": "gkeishin"
                    },
                    "message": "Remove this.. since it is unrelated to this changes"
                },
                {
                    "file": "lib/resource.robot",
                    "line": 150,
                    "reviewer": {
                        "name": "Ashwini Chandrappa",
                        "email": "Ashwini.Chandrappa777@ibm.com",
                        "username": "AshwiniC777"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "lib/resource.robot",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                },
                {
                    "file": "ipmi/test_ipmi_user.robot",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -9
                }
            ],
            "sizeInsertions": 23,
            "sizeDeletions": 9
        },
        {
            "number": 3,
            "revision": "a414404c372bafb17e4d98dad3d2b8945c3bc3f7",
            "parents": [
                "6ec9d708267012a5117fefa071dac2c899fdcde2"
            ],
            "ref": "refs/changes/32/52032/3",
            "uploader": {
                "name": "Ashwini Chandrappa",
                "email": "Ashwini.Chandrappa777@ibm.com",
                "username": "AshwiniC777"
            },
            "createdOn": 1648129952,
            "author": {
                "name": "Ashwini Chandrappa",
                "email": "Ashwini.Chandrappa777@ibm.com",
                "username": "AshwiniC777"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "ipmi/test_ipmi_user.robot",
                    "line": 55,
                    "reviewer": {
                        "name": "Rahul Maheshwari",
                        "email": "rahulmaheshwari@in.ibm.com",
                        "username": "rahulmah"
                    },
                    "message": "enabled_user_count also we need to verify. You can have the code like below. \n\n    ${resp}=  Wait Until Keyword Succeeds  15 sec  5 sec  Run IPMI Standard Command\n    ...  user summary ${CHANNEL_NUMBER}\n    ${enabled_user_count_before}=\n    ...  Get Lines Containing String  ${resp}  Enabled User Count\n\n    # Create random user\n    ${random_userid}  ${random_username}=  Create Random IPMI User\n    Set Test Variable  ${random_userid}\n    Run IPMI Standard Command  user enable ${random_userid}\n\n    ${resp}=  Wait Until Keyword Succeeds  15 sec  5 sec  Run IPMI Standard Command\n    ...  user summary ${CHANNEL_NUMBER}\n    ${enabled_user_count_after}=\n    ...  Get Lines Containing String  ${resp}  Enabled User Count\n\n    Should Be Equal  ${enabled_user_count_before}+1  ${enabled_user_count_after}\n\n    ${output}=  Run IPMI Standard Command  user summary ${CHANNEL_NUMBER}\n    ${maximum_ids}=  Get Lines Containing String  ${output}  Maximum IDs\n    Should Contain  ${maximum_ids}  15"
                },
                {
                    "file": "ipmi/test_ipmi_user.robot",
                    "line": 55,
                    "reviewer": {
                        "name": "Ashwini Chandrappa",
                        "email": "Ashwini.Chandrappa777@ibm.com",
                        "username": "AshwiniC777"
                    },
                    "message": "modified to verify enabled user count with  redfish user count"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "ipmi/test_ipmi_user.robot",
                    "type": "MODIFIED",
                    "insertions": 17,
                    "deletions": -10
                }
            ],
            "sizeInsertions": 27,
            "sizeDeletions": 10
        },
        {
            "number": 4,
            "revision": "f4a371a6554eed2562184f4174ea1b8b32f2f249",
            "parents": [
                "6ec9d708267012a5117fefa071dac2c899fdcde2"
            ],
            "ref": "refs/changes/32/52032/4",
            "uploader": {
                "name": "Ashwini Chandrappa",
                "email": "Ashwini.Chandrappa777@ibm.com",
                "username": "AshwiniC777"
            },
            "createdOn": 1648648393,
            "author": {
                "name": "Ashwini Chandrappa",
                "email": "Ashwini.Chandrappa777@ibm.com",
                "username": "AshwiniC777"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "ipmi/test_ipmi_user.robot",
                    "type": "MODIFIED",
                    "insertions": 28,
                    "deletions": -11
                }
            ],
            "sizeInsertions": 38,
            "sizeDeletions": 11
        },
        {
            "number": 5,
            "revision": "561012898b3be30061ea227584e8a381f5288d7a",
            "parents": [
                "6ec9d708267012a5117fefa071dac2c899fdcde2"
            ],
            "ref": "refs/changes/32/52032/5",
            "uploader": {
                "name": "Ashwini Chandrappa",
                "email": "Ashwini.Chandrappa777@ibm.com",
                "username": "AshwiniC777"
            },
            "createdOn": 1651229503,
            "author": {
                "name": "Ashwini Chandrappa",
                "email": "Ashwini.Chandrappa777@ibm.com",
                "username": "AshwiniC777"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "ipmi/test_ipmi_user.robot",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -12
                }
            ],
            "sizeInsertions": 31,
            "sizeDeletions": 12
        },
        {
            "number": 6,
            "revision": "90912097ee62ebb7521e1c801c3131526d0b2643",
            "parents": [
                "3c230883c5463b6f4e16501a3414718a5fd5db38"
            ],
            "ref": "refs/changes/32/52032/6",
            "uploader": {
                "name": "Ashwini Chandrappa",
                "email": "Ashwini.Chandrappa777@ibm.com",
                "username": "AshwiniC777"
            },
            "createdOn": 1651232123,
            "author": {
                "name": "Ashwini Chandrappa",
                "email": "Ashwini.Chandrappa777@ibm.com",
                "username": "AshwiniC777"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "ipmi/test_ipmi_user.robot",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -12
                }
            ],
            "sizeInsertions": 31,
            "sizeDeletions": 12
        },
        {
            "number": 7,
            "revision": "12be4b4169987a08170229badcdccade1d5db3a2",
            "parents": [
                "97c44657c963742e9334402cc269b5e0954e733f"
            ],
            "ref": "refs/changes/32/52032/7",
            "uploader": {
                "name": "George Keishing",
                "email": "gkeishin@gmail.com",
                "username": "gkeishin"
            },
            "createdOn": 1651472873,
            "author": {
                "name": "Ashwini Chandrappa",
                "email": "Ashwini.Chandrappa777@ibm.com",
                "username": "AshwiniC777"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "ipmi/test_ipmi_user.robot",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -12
                }
            ],
            "sizeInsertions": 31,
            "sizeDeletions": 12
        }
    ]
}