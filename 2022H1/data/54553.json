{
    "project": "openbmc/phosphor-ipmi-blobs",
    "branch": "master",
    "id": "I66c506cab9c92a120e9fc75da4b6b74d5677120b",
    "number": 54553,
    "subject": "Add ipmi response buffer size check for all commands",
    "owner": {
        "name": "Willy Tu",
        "email": "wltu@google.com",
        "username": "wltu"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-ipmi-blobs/+/54553",
    "commitMessage": "Add ipmi response buffer size check for all commands\n\nAdd a response size check for all Blob command using the max transfer\nbuffer size for the default ipmi channel.\n\nThe max size is fetched at the beginning and assumed that it won't\nchange. This is done instead of fetching it for all request to limit the\namount of refactoring needed to make it work with existing codebase.\n\nChange-Id: I66c506cab9c92a120e9fc75da4b6b74d5677120b\nSigned-off-by: Willy Tu <wltu@google.com>\n",
    "createdOn": 1655198247,
    "lastUpdated": 1656389939,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1655198247,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1655198306,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1655198307,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1655198513,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/44983/ : SUCCESS"
        },
        {
            "timestamp": 1655220653,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1655220662,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1655220662,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1655220869,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/45001/ : SUCCESS"
        },
        {
            "timestamp": 1655223837,
            "reviewer": {
                "name": "Brandon Kim",
                "email": "brandonkim@google.com",
                "username": "brandonkimbk"
            },
            "message": "Patch Set 2: Code-Review+1\n\n(2 comments)"
        },
        {
            "timestamp": 1655223896,
            "reviewer": {
                "name": "Brandon Kim",
                "email": "brandonkim@google.com",
                "username": "brandonkimbk"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1655224530,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1655224535,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 2:\n\n(3 comments)"
        },
        {
            "timestamp": 1655224549,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1655224549,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1655224756,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/45006/ : SUCCESS"
        },
        {
            "timestamp": 1655224905,
            "reviewer": {
                "name": "Brandon Kim",
                "email": "brandonkim@google.com",
                "username": "brandonkimbk"
            },
            "message": "Patch Set 3: Code-Review+2\n\n(1 comment)"
        },
        {
            "timestamp": 1655226591,
            "reviewer": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "message": "Patch Set 3: Code-Review+2"
        },
        {
            "timestamp": 1655228274,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Change has been successfully merged"
        },
        {
            "timestamp": 1656389939,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Created a revert of this change as Ic080de6f51c05f86807b81dfd3dd38a87fc2dbf5"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "ce0e19dfc79c860b0b511d3c8c5c09b663cc4197",
            "parents": [
                "35b6c3e63527738a0ab052d4fe2c75c1141c2b18"
            ],
            "ref": "refs/changes/53/54553/1",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1655198247,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "main.cpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -2
                },
                {
                    "file": "process.cpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -3
                },
                {
                    "file": "test/process_unittest.cpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": -7
                },
                {
                    "file": "process.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -3
                },
                {
                    "file": "ipmi.cpp",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -5
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 78,
            "sizeDeletions": 21
        },
        {
            "number": 2,
            "revision": "2db85bc9fb514cdda6fa2257011c4aa5d21bc76f",
            "parents": [
                "35b6c3e63527738a0ab052d4fe2c75c1141c2b18"
            ],
            "ref": "refs/changes/53/54553/2",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1655220653,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "main.cpp",
                    "line": 51,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "very minor nit: would it make more sense to use bind_back instead and add the new param in the back to be in line with processBlobCommand"
                },
                {
                    "file": "main.cpp",
                    "line": 51,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "yeah, it would. However bind_back is not supported until C++23."
                },
                {
                    "file": "main.cpp",
                    "line": 51,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "Oops, review from the future"
                },
                {
                    "file": "test/process_unittest.cpp",
                    "line": 252,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "should this reference the payload length being too small instead?"
                },
                {
                    "file": "test/process_unittest.cpp",
                    "line": 252,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "Done"
                },
                {
                    "file": "test/process_unittest.cpp",
                    "line": 274,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "minor nit: I think it may make more sense to the reader if this goes after the \"valid\" test underneath it to prove that the lambda you created is supposed to pass, but then you are giving it 0 buffer length"
                },
                {
                    "file": "test/process_unittest.cpp",
                    "line": 274,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "main.cpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -2
                },
                {
                    "file": "process.cpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -3
                },
                {
                    "file": "test/process_unittest.cpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": -7
                },
                {
                    "file": "process.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -3
                },
                {
                    "file": "ipmi.cpp",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -5
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 78,
            "sizeDeletions": 21
        },
        {
            "number": 3,
            "revision": "88ca532a74375cc99bd979fbb037d07e5ee76cce",
            "parents": [
                "35b6c3e63527738a0ab052d4fe2c75c1141c2b18"
            ],
            "ref": "refs/changes/53/54553/3",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1655224530,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "main.cpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -2
                },
                {
                    "file": "process.cpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -3
                },
                {
                    "file": "test/process_unittest.cpp",
                    "type": "MODIFIED",
                    "insertions": 33,
                    "deletions": -7
                },
                {
                    "file": "process.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -3
                },
                {
                    "file": "ipmi.cpp",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -5
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 79,
            "sizeDeletions": 21
        }
    ]
}