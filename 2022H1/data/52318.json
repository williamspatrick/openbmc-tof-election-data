{
    "project": "openbmc/phosphor-logging",
    "branch": "master",
    "id": "I69773547c06f6361055c2f0decd07967d0012946",
    "number": 52318,
    "subject": "peltool: Add Notes from message registry file",
    "owner": {
        "name": "Harisuddin Mohamed Isa",
        "email": "harisuddin@gmail.com",
        "username": "harisuddin82"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-logging/+/52318",
    "commitMessage": "peltool: Add Notes from message registry file\n\nAdd the Notes section found in the message registry file to the json\noutput (if it's present and not empty).\n\nExample:\n\n\"Error Details\": {\n    \"Message\":  \"Unknown (Original event not in message registry)\",\n    \"Notes\": [\n                \"This is used when the actual error name isn't\",\n                \"found in the registry.\"\n    ]\n}\n\nSigned-off-by: Harisuddin Mohamed Isa <harisuddin@gmail.com>\nChange-Id: I69773547c06f6361055c2f0decd07967d0012946\n",
    "createdOn": 1648121467,
    "lastUpdated": 1649428790,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1648121467,
            "reviewer": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1648121485,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1648121485,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1648122267,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/39629/ : SUCCESS"
        },
        {
            "timestamp": 1648135128,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 1:\n\n(3 comments)"
        },
        {
            "timestamp": 1648173762,
            "reviewer": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1648202433,
            "reviewer": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1648202446,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1648202446,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1648202557,
            "reviewer": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1648202692,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/39726/ : FAILURE"
        },
        {
            "timestamp": 1648208423,
            "reviewer": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1648208435,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1648208435,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1648208683,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/39731/ : FAILURE"
        },
        {
            "timestamp": 1648211410,
            "reviewer": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1648211420,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1648211421,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1648212149,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/39733/ : SUCCESS"
        },
        {
            "timestamp": 1648212505,
            "reviewer": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1649168229,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 4: Code-Review+2\n\n(1 comment)"
        },
        {
            "timestamp": 1649428095,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Change has been successfully rebased and submitted as 5a3d8f4b8c87d7cbe3762d40a289ad07467b9316"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "bd4adaa1c3f3eff78c56e3744b996ebaf1fcf432",
            "parents": [
                "e52dd95d7da351802a2ee150ac827d6717613e5e"
            ],
            "ref": "refs/changes/18/52318/1",
            "uploader": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "createdOn": 1648121467,
            "author": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "extensions/openpower-pels/registry.cpp",
                    "line": 685,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "I think since there is no need for these when the registry is used to create a PEL, and because there can be a lot of large notes sections, it would be good to put #ifdef PELTOOL flags around the documentation section, assuming I'm not missing something.  That also means registry.cpp needs to be moved out of libpel in the meson.build and put in the separate sections so it will get the PELTOOL set when building peltool."
                },
                {
                    "file": "extensions/openpower-pels/registry.cpp",
                    "line": 685,
                    "reviewer": {
                        "name": "Harisuddin Mohamed Isa",
                        "email": "harisuddin@gmail.com",
                        "username": "harisuddin82"
                    },
                    "message": "Done."
                },
                {
                    "file": "extensions/openpower-pels/registry.cpp",
                    "line": 685,
                    "reviewer": {
                        "name": "Harisuddin Mohamed Isa",
                        "email": "harisuddin@gmail.com",
                        "username": "harisuddin82"
                    },
                    "message": "Add #ifdef PELTOOL flag breaks unit tests. Reverting for now."
                },
                {
                    "file": "extensions/openpower-pels/registry.cpp",
                    "line": 685,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "That's probably OK."
                },
                {
                    "file": "extensions/openpower-pels/registry.cpp",
                    "line": 687,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "I missed it up above, but nlohmann has documentation that says implicit conversion isn't a good idea, and to instead use get<>().\n\nThough I think get<vector<string>>() might not work, so you may need to loop on each entry and build a vector."
                },
                {
                    "file": "extensions/openpower-pels/registry.cpp",
                    "line": 687,
                    "reviewer": {
                        "name": "Harisuddin Mohamed Isa",
                        "email": "harisuddin@gmail.com",
                        "username": "harisuddin82"
                    },
                    "message": "get<std::vector<std::string>>() works fine."
                },
                {
                    "file": "extensions/openpower-pels/src.cpp",
                    "line": 506,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "i see a lot of cases in the registry where Notes is there but empty.  I think I'd prefer to not print an empty \"Notes\": [] in the output, so maybe check if the vector isn't empty first (assuming that could still happen after making the other changes)."
                },
                {
                    "file": "extensions/openpower-pels/src.cpp",
                    "line": 506,
                    "reviewer": {
                        "name": "Harisuddin Mohamed Isa",
                        "email": "harisuddin@gmail.com",
                        "username": "harisuddin82"
                    },
                    "message": "This is already done in registry.cpp above."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 30,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/registry.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/registry.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/src.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 43,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "fc9e5518680ff59fa3c0081f111559cfa5c11438",
            "parents": [
                "e52dd95d7da351802a2ee150ac827d6717613e5e"
            ],
            "ref": "refs/changes/18/52318/2",
            "uploader": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "createdOn": 1648202433,
            "author": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/registry.cpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": -3
                },
                {
                    "file": "extensions/openpower-pels/registry.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/meson.build",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                },
                {
                    "file": "extensions/openpower-pels/src.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 42,
            "sizeDeletions": 4
        },
        {
            "number": 3,
            "revision": "9d241e0905dda3c4c6ea51591b239a9a50f610e4",
            "parents": [
                "e52dd95d7da351802a2ee150ac827d6717613e5e"
            ],
            "ref": "refs/changes/18/52318/3",
            "uploader": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "createdOn": 1648208423,
            "author": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/registry.cpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": -3
                },
                {
                    "file": "extensions/openpower-pels/registry.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/meson.build",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/src.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 42,
            "sizeDeletions": 3
        },
        {
            "number": 4,
            "revision": "b1e0e08f6abc439d94d084ae539c5d22f234791f",
            "parents": [
                "e52dd95d7da351802a2ee150ac827d6717613e5e"
            ],
            "ref": "refs/changes/18/52318/4",
            "uploader": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "createdOn": 1648211410,
            "author": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/registry.cpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -1
                },
                {
                    "file": "extensions/openpower-pels/registry.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/src.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 38,
            "sizeDeletions": 1
        },
        {
            "number": 5,
            "revision": "5a3d8f4b8c87d7cbe3762d40a289ad07467b9316",
            "parents": [
                "21de9f077d31c247295e3eefae7591c31eae2140"
            ],
            "ref": "refs/changes/18/52318/5",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1649428095,
            "author": {
                "name": "Harisuddin Mohamed Isa",
                "email": "harisuddin@gmail.com",
                "username": "harisuddin82"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/registry.cpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -1
                },
                {
                    "file": "extensions/openpower-pels/registry.hpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": 0
                },
                {
                    "file": "extensions/openpower-pels/src.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 38,
            "sizeDeletions": 1
        }
    ]
}