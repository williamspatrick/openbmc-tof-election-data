{
    "project": "openbmc/bmcweb",
    "branch": "master",
    "id": "I066e0cec0ddf7569dd73b2601f838c697bac24da",
    "number": 48231,
    "subject": "update_service: fix fwUpdateErrorMatcher cannot working",
    "owner": {
        "name": "Brian Ma",
        "email": "chma0@nuvoton.com",
        "username": "minimada"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/bmcweb/+/48231",
    "commitMessage": "update_service: fix fwUpdateErrorMatcher cannot working\n\nBecause the phosphor logging commit ef952af2 stop emitting the\npropChanged signal before ifacesAdded signal raising, the\nfwUpdateErrorMatcher cannot get any software error after image update.\nUpdate fwUpdateErrorMatcher to get ifacesAdded dbus signal to handle\nsoftware error.\n\nTested:\n  Post bad manifest image and get \"Invalid manifest\" error response\n\nSigned-off-by: Brian Ma <chma0@nuvoton.com>\nChange-Id: I066e0cec0ddf7569dd73b2601f838c697bac24da\n",
    "createdOn": 1635216722,
    "lastUpdated": 1641487813,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1635216722,
            "reviewer": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1635216737,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1635217094,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/28981/ : FAILURE"
        },
        {
            "timestamp": 1635217590,
            "reviewer": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "message": "Uploaded patch set 2: New patch set was added with same tree, parent, and commit message as Patch Set 1."
        },
        {
            "timestamp": 1635217603,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1635217607,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1635218186,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2:\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/28989/ : FAILURE"
        },
        {
            "timestamp": 1635218444,
            "reviewer": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1635218459,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1635218909,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/28996/ : SUCCESS"
        },
        {
            "timestamp": 1635300707,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1635910794,
            "reviewer": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1638349796,
            "reviewer": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1638349811,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1638350272,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/30968/ : SUCCESS"
        },
        {
            "timestamp": 1638384968,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1638433170,
            "reviewer": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1638433184,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1638433639,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/31076/ : SUCCESS"
        },
        {
            "timestamp": 1638434051,
            "reviewer": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1638484405,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 5: Code-Review+1\n\nlooks good to me"
        },
        {
            "timestamp": 1639990227,
            "reviewer": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "message": "Patch Set 5:\n\nHi Gunnar,\nCan you help review this change?"
        },
        {
            "timestamp": 1641180812,
            "reviewer": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "message": "Uploaded patch set 6."
        },
        {
            "timestamp": 1641180833,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1641180833,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: -Ok-To-Test"
        },
        {
            "timestamp": 1641181277,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/34794/ : SUCCESS"
        },
        {
            "timestamp": 1641230900,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 6:\n\n(4 comments)"
        },
        {
            "timestamp": 1641354380,
            "reviewer": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "message": "Uploaded patch set 7."
        },
        {
            "timestamp": 1641354406,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1641354407,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: -Ok-To-Test"
        },
        {
            "timestamp": 1641354856,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/34890/ : SUCCESS"
        },
        {
            "timestamp": 1641359561,
            "reviewer": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "message": "Patch Set 7:\n\n(4 comments)"
        },
        {
            "timestamp": 1641487810,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 7: Code-Review+2"
        },
        {
            "timestamp": 1641487813,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Change has been successfully rebased and submitted as e1cc482880d7b47dcf19609cedba7df80368ae3c"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "a7ed4c813b380d18d18156e9242c7f72ecb31be4",
            "parents": [
                "287ece64bf9a8ee0c42f77cefce559054b488ae7"
            ],
            "ref": "refs/changes/31/48231/1",
            "uploader": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "createdOn": 1635216722,
            "author": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/update_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 82,
                    "deletions": -58
                }
            ],
            "sizeInsertions": 98,
            "sizeDeletions": 58
        },
        {
            "number": 2,
            "revision": "7c85383d5ccf25d0a78620e6c88082df2ec115c4",
            "parents": [
                "287ece64bf9a8ee0c42f77cefce559054b488ae7"
            ],
            "ref": "refs/changes/31/48231/2",
            "uploader": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "createdOn": 1635217590,
            "author": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "kind": "NO_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/update_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 82,
                    "deletions": -58
                }
            ],
            "sizeInsertions": 98,
            "sizeDeletions": 58
        },
        {
            "number": 3,
            "revision": "f0bc9fcc4c16cb270dab84857ccfe4005e566b8b",
            "parents": [
                "287ece64bf9a8ee0c42f77cefce559054b488ae7"
            ],
            "ref": "refs/changes/31/48231/3",
            "uploader": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "createdOn": 1635218444,
            "author": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Why aren't we reverting that commit first, then determining the \"right\" fix after master is unbroken?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Brian Ma",
                        "email": "chma0@nuvoton.com",
                        "username": "minimada"
                    },
                    "message": "I opened a mail thread:[phosphor-logging] About the \"Stop emitting Entry propChanged before ifacesAdded\" change reason.\nMaybe we can discus this problem in the mail thread."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/update_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 82,
                    "deletions": -58
                }
            ],
            "sizeInsertions": 98,
            "sizeDeletions": 58
        },
        {
            "number": 4,
            "revision": "164684ec23e74c893af10f35b9238ddf1b893147",
            "parents": [
                "4576ec184c8c90f14e853e7b62e25742ce292935"
            ],
            "ref": "refs/changes/31/48231/4",
            "uploader": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "createdOn": 1638349796,
            "author": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "redfish-core/lib/update_service.hpp",
                    "line": 335,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "this is doing a copy, so probably want 'const auto& values = ...'.  I'll defer to the maintainer on if auto is allowed here."
                },
                {
                    "file": "redfish-core/lib/update_service.hpp",
                    "line": 335,
                    "reviewer": {
                        "name": "Brian Ma",
                        "email": "chma0@nuvoton.com",
                        "username": "minimada"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/update_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 82,
                    "deletions": -59
                }
            ],
            "sizeInsertions": 98,
            "sizeDeletions": 59
        },
        {
            "number": 5,
            "revision": "90f2b4d44e9656e46fef02b12586199f7ff3c46f",
            "parents": [
                "60c922dfacd5d1aeec8789e03edc91b47f4a6661"
            ],
            "ref": "refs/changes/31/48231/5",
            "uploader": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "createdOn": 1638433170,
            "author": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/update_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 82,
                    "deletions": -59
                }
            ],
            "sizeInsertions": 98,
            "sizeDeletions": 59
        },
        {
            "number": 6,
            "revision": "e8eafeea15795c4b3624f52562e7aeb5a8c2db57",
            "parents": [
                "85ffe86a60f50ce9ad5728caf384a0dd0c8cc6a5"
            ],
            "ref": "refs/changes/31/48231/6",
            "uploader": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "createdOn": 1641180812,
            "author": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "redfish-core/lib/update_service.hpp",
                    "line": 330,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Please avoid auto in this context.  Also, this should be const."
                },
                {
                    "file": "redfish-core/lib/update_service.hpp",
                    "line": 330,
                    "reviewer": {
                        "name": "Brian Ma",
                        "email": "chma0@nuvoton.com",
                        "username": "minimada"
                    },
                    "message": "Done"
                },
                {
                    "file": "redfish-core/lib/update_service.hpp",
                    "line": 335,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Same here.  auto makes this code less readable."
                },
                {
                    "file": "redfish-core/lib/update_service.hpp",
                    "line": 335,
                    "reviewer": {
                        "name": "Brian Ma",
                        "email": "chma0@nuvoton.com",
                        "username": "minimada"
                    },
                    "message": "Done"
                },
                {
                    "file": "redfish-core/lib/update_service.hpp",
                    "line": 352,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "please read and understand common errors.  I realize this was here before, but it's incorrect, so lets clean it up while we're here.  This whole check can be deleted, given that we do exact matches on *type below."
                },
                {
                    "file": "redfish-core/lib/update_service.hpp",
                    "line": 352,
                    "reviewer": {
                        "name": "Brian Ma",
                        "email": "chma0@nuvoton.com",
                        "username": "minimada"
                    },
                    "message": "Done"
                },
                {
                    "file": "redfish-core/lib/update_service.hpp",
                    "line": 401,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "if we hit internal error on the line previous, we shouldn't be clearing the timer."
                },
                {
                    "file": "redfish-core/lib/update_service.hpp",
                    "line": 401,
                    "reviewer": {
                        "name": "Brian Ma",
                        "email": "chma0@nuvoton.com",
                        "username": "minimada"
                    },
                    "message": "move forward the timer cleaning after we get meaningful software error"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/update_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 81,
                    "deletions": -60
                }
            ],
            "sizeInsertions": 100,
            "sizeDeletions": 60
        },
        {
            "number": 7,
            "revision": "6ae30645531d9db8883cc1c0aaeaca65aec9e047",
            "parents": [
                "91359f9d36f16e5d887a40227d2b0af17da618e4"
            ],
            "ref": "refs/changes/31/48231/7",
            "uploader": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "createdOn": 1641354380,
            "author": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/update_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 73,
                    "deletions": -60
                }
            ],
            "sizeInsertions": 92,
            "sizeDeletions": 60
        },
        {
            "number": 8,
            "revision": "e1cc482880d7b47dcf19609cedba7df80368ae3c",
            "parents": [
                "248d02303212eb1b7b9a81757489a23af36546a8"
            ],
            "ref": "refs/changes/31/48231/8",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1641487813,
            "author": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/update_service.hpp",
                    "type": "MODIFIED",
                    "insertions": 73,
                    "deletions": -60
                }
            ],
            "sizeInsertions": 92,
            "sizeDeletions": 60
        }
    ]
}