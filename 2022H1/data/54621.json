{
    "project": "openbmc/bios-bmc-smm-error-logger",
    "branch": "main",
    "id": "I0f7c0e3c0195c82fe932b36babbce0ab8c8405ed",
    "number": 54621,
    "subject": "buffer: Implement \"wraparoundRead\"",
    "owner": {
        "name": "Brandon Kim",
        "email": "brandonkim@google.com",
        "username": "brandonkimbk"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/bios-bmc-smm-error-logger/+/54621",
    "commitMessage": "buffer: Implement \"wraparoundRead\"\n\nThis is a helper function for reading the circular buffer\n\nTested: Unit tested\n\nSigned-off-by: Brandon Kim <brandonkim@google.com>\nChange-Id: I0f7c0e3c0195c82fe932b36babbce0ab8c8405ed\n",
    "createdOn": 1655332032,
    "lastUpdated": 1655343567,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1655332032,
            "reviewer": {
                "name": "Brandon Kim",
                "email": "brandonkim@google.com",
                "username": "brandonkimbk"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1655332069,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1655332069,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1655332163,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/45117/ : SUCCESS"
        },
        {
            "timestamp": 1655332690,
            "reviewer": {
                "name": "Brandon Kim",
                "email": "brandonkim@google.com",
                "username": "brandonkimbk"
            },
            "message": "Patch Set 2: Patch Set 1 was rebased"
        },
        {
            "timestamp": 1655332721,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1655332721,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1655332815,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/45121/ : SUCCESS"
        },
        {
            "timestamp": 1655334350,
            "reviewer": {
                "name": "Brandon Kim",
                "email": "brandonkim@google.com",
                "username": "brandonkimbk"
            },
            "message": "Patch Set 3: Published edit on patch set 2."
        },
        {
            "timestamp": 1655334389,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1655334389,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1655334483,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/45127/ : SUCCESS"
        },
        {
            "timestamp": 1655337716,
            "reviewer": {
                "name": "Kasun Athukorala",
                "email": "kasunath@google.com",
                "username": "kasunathg"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1655338821,
            "reviewer": {
                "name": "Brandon Kim",
                "email": "brandonkim@google.com",
                "username": "brandonkimbk"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1655339070,
            "reviewer": {
                "name": "Brandon Kim",
                "email": "brandonkim@google.com",
                "username": "brandonkimbk"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1655340451,
            "reviewer": {
                "name": "Brandon Kim",
                "email": "brandonkim@google.com",
                "username": "brandonkimbk"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1655340499,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1655340499,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1655340599,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/45136/ : SUCCESS"
        },
        {
            "timestamp": 1655343313,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 4: Code-Review+2"
        },
        {
            "timestamp": 1655343567,
            "reviewer": {
                "name": "Brandon Kim",
                "email": "brandonkim@google.com",
                "username": "brandonkimbk"
            },
            "message": "Change has been successfully rebased and submitted as 9836cfa6aec1d40b3f5350377e31ed27c58e509d"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "3fb013568ed8dba2ffd2a5eaacf2771b4d301cda",
            "parents": [
                "4619afc362bbae62668181c02788f7c20cd905ec"
            ],
            "ref": "refs/changes/21/54621/1",
            "uploader": {
                "name": "Brandon Kim",
                "email": "brandonkim@google.com",
                "username": "brandonkimbk"
            },
            "createdOn": 1655332032,
            "author": {
                "name": "Brandon Kim",
                "email": "brandonkim@google.com",
                "username": "brandonkimbk"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "include/buffer.hpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "src/buffer.cpp",
                    "type": "MODIFIED",
                    "insertions": 46,
                    "deletions": 0
                },
                {
                    "file": "test/buffer_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 136,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 208,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "eb6b2dd4f507a023b35876b97772e54f3fbc7d3f",
            "parents": [
                "bd333946a6f45b6bae18df1f52cffb008fc6d0b0"
            ],
            "ref": "refs/changes/21/54621/2",
            "uploader": {
                "name": "Brandon Kim",
                "email": "brandonkim@google.com",
                "username": "brandonkimbk"
            },
            "createdOn": 1655332690,
            "author": {
                "name": "Brandon Kim",
                "email": "brandonkim@google.com",
                "username": "brandonkimbk"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "include/buffer.hpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "src/buffer.cpp",
                    "type": "MODIFIED",
                    "insertions": 46,
                    "deletions": 0
                },
                {
                    "file": "test/buffer_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 136,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 208,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "a59a8aa6f9cafc29861f789c99cd27a7142a6e7f",
            "parents": [
                "bd333946a6f45b6bae18df1f52cffb008fc6d0b0"
            ],
            "ref": "refs/changes/21/54621/3",
            "uploader": {
                "name": "Brandon Kim",
                "email": "brandonkim@google.com",
                "username": "brandonkimbk"
            },
            "createdOn": 1655334350,
            "author": {
                "name": "Brandon Kim",
                "email": "brandonkim@google.com",
                "username": "brandonkimbk"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "src/buffer.cpp",
                    "line": 119,
                    "reviewer": {
                        "name": "Kasun Athukorala",
                        "email": "kasunath@google.com",
                        "username": "kasunathg"
                    },
                    "message": "since this is in little endian format, we need to convert this to native right?"
                },
                {
                    "file": "src/buffer.cpp",
                    "line": 119,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "Good catch, this is used a few times so I'll make this a static helper function at the top of this file instead."
                },
                {
                    "file": "src/buffer.cpp",
                    "line": 121,
                    "reviewer": {
                        "name": "Kasun Athukorala",
                        "email": "kasunath@google.com",
                        "username": "kasunathg"
                    },
                    "message": "Does memoryRegionSize include headers as well? If so, I think we need to check\n\nlength > [space just for queue data]"
                },
                {
                    "file": "src/buffer.cpp",
                    "line": 121,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "This will actually be used for the queue header as well as just the queue - I think the best of both worlds is to have an optional param we can pass in for this check since you're correct, we should be discounting the header size if we're just reading the entry from the queue."
                },
                {
                    "file": "src/buffer.cpp",
                    "line": 121,
                    "reviewer": {
                        "name": "Brandon Kim",
                        "email": "brandonkim@google.com",
                        "username": "brandonkimbk"
                    },
                    "message": "Just to clarify a little further:\n\nThere's the buffer header at the beginning of the buffer, then for each entry, there's an entry header before the actual entry data"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "include/buffer.hpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "src/buffer.cpp",
                    "type": "MODIFIED",
                    "insertions": 46,
                    "deletions": 0
                },
                {
                    "file": "test/buffer_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 136,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 208,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "4b0c07f021ef791217f49c0f0ed7d27f537fbd9e",
            "parents": [
                "bd333946a6f45b6bae18df1f52cffb008fc6d0b0"
            ],
            "ref": "refs/changes/21/54621/4",
            "uploader": {
                "name": "Brandon Kim",
                "email": "brandonkim@google.com",
                "username": "brandonkimbk"
            },
            "createdOn": 1655340451,
            "author": {
                "name": "Brandon Kim",
                "email": "brandonkim@google.com",
                "username": "brandonkimbk"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "include/buffer.hpp",
                    "type": "MODIFIED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "src/buffer.cpp",
                    "type": "MODIFIED",
                    "insertions": 51,
                    "deletions": 0
                },
                {
                    "file": "test/buffer_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 159,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 246,
            "sizeDeletions": 0
        },
        {
            "number": 5,
            "revision": "9836cfa6aec1d40b3f5350377e31ed27c58e509d",
            "parents": [
                "cf0b9752a18926b08453d53b307ca04c243449d6"
            ],
            "ref": "refs/changes/21/54621/5",
            "uploader": {
                "name": "Brandon Kim",
                "email": "brandonkim@google.com",
                "username": "brandonkimbk"
            },
            "createdOn": 1655343567,
            "author": {
                "name": "Brandon Kim",
                "email": "brandonkim@google.com",
                "username": "brandonkimbk"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "include/buffer.hpp",
                    "type": "MODIFIED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "src/buffer.cpp",
                    "type": "MODIFIED",
                    "insertions": 51,
                    "deletions": 0
                },
                {
                    "file": "test/buffer_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 159,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 246,
            "sizeDeletions": 0
        }
    ]
}