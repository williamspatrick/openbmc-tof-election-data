{
    "project": "openbmc/phosphor-health-monitor",
    "branch": "master",
    "id": "I31f0cf4df0c913f10c47ecb9fa24b59b7b9de0e5",
    "number": 55236,
    "subject": "healthMonitor: call configured unit when threshold exceeded",
    "owner": {
        "name": "PL",
        "email": "potin.lai@quantatw.com",
        "username": "potinlai"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-health-monitor/+/55236",
    "commitMessage": "healthMonitor: call configured unit when threshold exceeded\n\nAdd threshold target implementation.\nCall the system target unit configured in config file when threshold\nvalue exceeded.\n\nSigned-off-by: Potin Lai <potin.lai@quantatw.com>\nChange-Id: I31f0cf4df0c913f10c47ecb9fa24b59b7b9de0e5\n",
    "createdOn": 1657532525,
    "lastUpdated": 1657714328,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1657532525,
            "reviewer": {
                "name": "PL",
                "email": "potin.lai@quantatw.com",
                "username": "potinlai"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1657532585,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1657532585,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1657532601,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/46777/ : FAILURE"
        },
        {
            "timestamp": 1657532754,
            "reviewer": {
                "name": "PL",
                "email": "potin.lai@quantatw.com",
                "username": "potinlai"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1657532795,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1657532795,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1657532845,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/46778/ : SUCCESS"
        },
        {
            "timestamp": 1657624505,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1657657041,
            "reviewer": {
                "name": "Sui Chen",
                "email": "suichen@google.com",
                "username": "quadpixels"
            },
            "message": "Patch Set 2: Code-Review+1\n\n(4 comments)"
        },
        {
            "timestamp": 1657673203,
            "reviewer": {
                "name": "PL",
                "email": "potin.lai@quantatw.com",
                "username": "potinlai"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1657673273,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1657673273,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1657673323,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/46885/ : SUCCESS"
        },
        {
            "timestamp": 1657673608,
            "reviewer": {
                "name": "PL",
                "email": "potin.lai@quantatw.com",
                "username": "potinlai"
            },
            "message": "Patch Set 3:\n\n(3 comments)"
        },
        {
            "timestamp": 1657714328,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 3: Code-Review+1\n\n(2 comments)"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "6f6997e0943da17ae200f5d3499da6a94699c8ad",
            "parents": [
                "7fc0aa1e3d932b2eca20eb8e5eade71267236d59"
            ],
            "ref": "refs/changes/36/55236/1",
            "uploader": {
                "name": "PL",
                "email": "potin.lai@quantatw.com",
                "username": "potinlai"
            },
            "createdOn": 1657532525,
            "author": {
                "name": "PL",
                "email": "potin.lai@quantatw.com",
                "username": "potinlai"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "healthMonitor.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                },
                {
                    "file": "healthMonitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 37,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "b782923c16bb63b1e105511055b6d4ed877d61d2",
            "parents": [
                "7fc0aa1e3d932b2eca20eb8e5eade71267236d59"
            ],
            "ref": "refs/changes/36/55236/2",
            "uploader": {
                "name": "PL",
                "email": "potin.lai@quantatw.com",
                "username": "potinlai"
            },
            "createdOn": 1657532754,
            "author": {
                "name": "PL",
                "email": "potin.lai@quantatw.com",
                "username": "potinlai"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "@Sui, can you take a look at this and give opinions?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Sui Chen",
                        "email": "suichen@google.com",
                        "username": "quadpixels"
                    },
                    "message": "I tested locally and the daemon can call the specified systemd unit as expected, so this works for me. (+1 because it works for me, leaving +2 to maintainers)"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Sui Chen",
                        "email": "suichen@google.com",
                        "username": "quadpixels"
                    },
                    "message": "Sure I'll test locally and also take a look."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Thanks.  I'm not necessarily expecting you to locally test every commit.  Ideally we have primary cases covered by CI, but I know this repo is somewhat lacking in that department.\n\nI was mostly looking for your review feedback as you've expressed an interest in becoming a maintainer."
                },
                {
                    "file": "healthMonitor.cpp",
                    "line": 420,
                    "reviewer": {
                        "name": "Sui Chen",
                        "email": "suichen@google.com",
                        "username": "quadpixels"
                    },
                    "message": "I can see this function is similar to https://github.com/openbmc/phosphor-state-manager/blob/master/chassis_state_manager.cpp#L471 so it should be good.\n\nNit: my preference is to use `sdbusplus::message::message msg` instead of `auto method`, because some style guides recommend using auto only \"if it makes the code clearer to readers who aren't familiar with the project, or if it makes the code safer\" (https://google.github.io/styleguide/cppguide.html#Type_deduction). In this case it may be easier to have an sdbusplus::message::message."
                },
                {
                    "file": "healthMonitor.cpp",
                    "line": 420,
                    "reviewer": {
                        "name": "PL",
                        "email": "potin.lai@quantatw.com",
                        "username": "potinlai"
                    },
                    "message": "done"
                },
                {
                    "file": "healthMonitor.cpp",
                    "line": 420,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I tend to prefer AAA, but I'm not going to throw a fit if code comes in that is more/less verbose either way."
                },
                {
                    "file": "healthMonitor.hpp",
                    "line": 129,
                    "reviewer": {
                        "name": "Sui Chen",
                        "email": "suichen@google.com",
                        "username": "quadpixels"
                    },
                    "message": "Maybe call this \"void startUnit(const std::string& sysdUnit);\" similarly to chassis_state_manager? This makes the code a bit more clear."
                },
                {
                    "file": "healthMonitor.hpp",
                    "line": 129,
                    "reviewer": {
                        "name": "PL",
                        "email": "potin.lai@quantatw.com",
                        "username": "potinlai"
                    },
                    "message": "done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "healthMonitor.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                },
                {
                    "file": "healthMonitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 20,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 36,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "156ecf31bb849a9f4733c1115d330cb911baabcd",
            "parents": [
                "7fc0aa1e3d932b2eca20eb8e5eade71267236d59"
            ],
            "ref": "refs/changes/36/55236/3",
            "uploader": {
                "name": "PL",
                "email": "potin.lai@quantatw.com",
                "username": "potinlai"
            },
            "createdOn": 1657673203,
            "author": {
                "name": "PL",
                "email": "potin.lai@quantatw.com",
                "username": "potinlai"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "PL",
                        "email": "potin.lai@quantatw.com",
                        "username": "potinlai"
                    },
                    "message": "@Sui, thanks for your suggestions."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "healthMonitor.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                },
                {
                    "file": "healthMonitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 20,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 36,
            "sizeDeletions": 0
        }
    ]
}