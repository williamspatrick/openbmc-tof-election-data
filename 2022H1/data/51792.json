{
    "project": "openbmc/openbmc",
    "branch": "master",
    "id": "I0023fffe4679f7088f7b102772eaf3247c97f7d3",
    "number": 51792,
    "subject": "phosphor-dbus-intefaces: Explicitly disable unused interfaces",
    "owner": {
        "name": "William A. Kennington III",
        "email": "wak@google.com",
        "username": "wak-google"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/openbmc/+/51792",
    "commitMessage": "phosphor-dbus-intefaces: Explicitly disable unused interfaces\n\nIt is helpful for CI and subproject workflows to have P-D-I enable\nall interfaces by default, but this is typically not what is desired\nin installed situations.  Explicitly disable all interfaces by default\nexcept those enabled by OBMC_ORG_YAML_SUBDIRS.\n\nChange-Id: I0023fffe4679f7088f7b102772eaf3247c97f7d3\nSigned-off-by: William A. Kennington III <wak@google.com>\n",
    "createdOn": 1646733925,
    "lastUpdated": 1646921892,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1646733925,
            "reviewer": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1646733968,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1646733968,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1646733974,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1:\n\nBuild Started https://jenkins.openbmc.org/job/ci-openbmc/9667/"
        },
        {
            "timestamp": 1646736355,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-openbmc/9667/ : SUCCESS"
        },
        {
            "timestamp": 1646738594,
            "reviewer": {
                "name": "Jenkins OpenBMC IBM",
                "email": "geissonator+jenkinsibm@gmail.com",
                "username": "jenkins-openbmc-ibm"
            },
            "message": "Patch Set 1:\n\nBuild Successful \n\nIBM Hardware CI : witherspoon hardware tests passed"
        },
        {
            "timestamp": 1646763089,
            "reviewer": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "message": "Patch Set 1:\n\n(3 comments)"
        },
        {
            "timestamp": 1646763610,
            "reviewer": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1646764177,
            "reviewer": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "message": "Patch Set 1: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1646777550,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1646851369,
            "reviewer": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1646853515,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1646854101,
            "reviewer": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1646854834,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1646917396,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2: Commit message was updated."
        },
        {
            "timestamp": 1646917403,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2: Code-Review+2"
        },
        {
            "timestamp": 1646917413,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Change has been successfully rebased and submitted as 9f8cb03519739f11669d26a8e62aa308a4794d38"
        },
        {
            "timestamp": 1646921892,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "08d1d59b95f2c58a19ef3be962dfd186f1e85144",
            "parents": [
                "6d8f6a30ac4ed23bf68e95de66a3a10306be1e1d"
            ],
            "ref": "refs/changes/92/51792/1",
            "uploader": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "createdOn": 1646733925,
            "author": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "John Broadbent",
                        "email": "jebr@google.com",
                        "username": "jebr224"
                    },
                    "message": "Thanks for putting this together. "
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/dbus/phosphor-dbus-interfaces_git.bb",
                    "line": 37,
                    "reviewer": {
                        "name": "John Broadbent",
                        "email": "jebr@google.com",
                        "username": "jebr224"
                    },
                    "message": "Don't we still want LTO to be true?"
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/dbus/phosphor-dbus-interfaces_git.bb",
                    "line": 37,
                    "reviewer": {
                        "name": "William A. Kennington III",
                        "email": "wak@google.com",
                        "username": "wak-google"
                    },
                    "message": "I could clean this up in a separate patch, but we don't need it anymore because all meson builds in meta-phosphor have LTO enabled."
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/dbus/phosphor-dbus-interfaces_git.bb",
                    "line": 37,
                    "reviewer": {
                        "name": "John Broadbent",
                        "email": "jebr@google.com",
                        "username": "jebr224"
                    },
                    "message": "sounds good"
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/dbus/phosphor-dbus-interfaces_git.bb",
                    "line": 33,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Can I get some more details on the utility of this?  I think we already have most interface sets disabled by default, so I'm not sure what we're achieving with this commit.  I don't see details in the commit message either to work it out on my own."
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/dbus/phosphor-dbus-interfaces_git.bb",
                    "line": 33,
                    "reviewer": {
                        "name": "John Broadbent",
                        "email": "jebr@google.com",
                        "username": "jebr224"
                    },
                    "message": "\"This makes me think we should just have all of the namespaces enabled by default for phosphor-dbus-interfaces so that subproject builds work correctly. Then in bitbake we should disable all of the unused ones.\" -William A. Kennington\n(when reviewing https://gerrit.openbmc-project.xyz/c/openbmc/openbmc-build-scripts/+/51739)\n\nAlso for context the change that enables by default https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-dbus-interfaces/+/51778\n\nLet us know what you think."
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/dbus/phosphor-dbus-interfaces_git.bb",
                    "line": 33,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Ah ok.  Some context in the commit messages would have been helpful.  I don't think I've see any of these other commits yet.  I guess I'm delinquent on the PDI one (by a day or so).\n\nWhere did you notice com.google being missing?  Since there is only the one interface there and I don't see any usage of it I'm surprised.\n\nhttps://gerrit.openbmc-project.xyz/q/Hoth+status:open"
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/dbus/phosphor-dbus-interfaces_git.bb",
                    "line": 33,
                    "reviewer": {
                        "name": "William A. Kennington III",
                        "email": "wak@google.com",
                        "username": "wak-google"
                    },
                    "message": "Yeah, I can add more context to the message.\n\nI don't think the reviews are out yet, but we want to be able to build the code locally. Having subprojects not work correctly makes this annoying. It's really easy to accidentally pass the wrong options to subprojects anyway with nested projects inheriting PDI. Having all of the schemas enabled by default barely adds any build steps for CI / local builds and ensures that the builds always work."
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/dbus/phosphor-dbus-interfaces_git.bb",
                    "line": 33,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I get it.  I think this is probably the least problematic way to go.\n\nThe converse is that we were having cases where people were throwing code using `com.ibm` into non-meson-selected code paths and causing breakage at a bitbake level, so forcing repos to be explicit in their dependencies (and mostly turning off everything except `xyz.openbmc_project` by default) forced people to put the right selects in place.\n\nI guess `data_com_ibm` has been enabled by default now for long enough and we haven't had rampant issues that maybe this is mostly sorted out now."
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/dbus/phosphor-dbus-interfaces_git.bb",
                    "line": 33,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Done"
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/dbus/phosphor-dbus-interfaces_git.bb",
                    "line": 35,
                    "reviewer": {
                        "name": "John Broadbent",
                        "email": "jebr@google.com",
                        "username": "jebr224"
                    },
                    "message": "nit:\nCould you use this regex in the sed, and not have the grep command."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/dbus/phosphor-dbus-interfaces_git.bb",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 21,
            "sizeDeletions": 4
        },
        {
            "number": 2,
            "revision": "7f6ee8c38d030b2d7b92cb93952f1251c64b15e1",
            "parents": [
                "6d8f6a30ac4ed23bf68e95de66a3a10306be1e1d"
            ],
            "ref": "refs/changes/92/51792/2",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1646917396,
            "author": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/dbus/phosphor-dbus-interfaces_git.bb",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 23,
            "sizeDeletions": 4
        },
        {
            "number": 3,
            "revision": "9f8cb03519739f11669d26a8e62aa308a4794d38",
            "parents": [
                "2f78daf6cbba48881bf7bbc2b0674ce444c93eb9"
            ],
            "ref": "refs/changes/92/51792/3",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1646917413,
            "author": {
                "name": "William A. Kennington III",
                "email": "wak@google.com",
                "username": "wak-google"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "meta-phosphor/recipes-phosphor/dbus/phosphor-dbus-interfaces_git.bb",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 23,
            "sizeDeletions": 4
        }
    ]
}