{
    "project": "openbmc/phosphor-logging",
    "branch": "master",
    "id": "Ic168870e68d74d990a2b04cf8b34a09f1eada046",
    "number": 45318,
    "subject": "log_manager: switch to lg2",
    "owner": {
        "name": "Patrick Williams",
        "email": "patrick@stwcx.xyz",
        "username": "williamspatrick"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-logging/+/45318",
    "commitMessage": "log_manager: switch to lg2\n\nSigned-off-by: Patrick Williams <patrick@stwcx.xyz>\nChange-Id: Ic168870e68d74d990a2b04cf8b34a09f1eada046\n",
    "createdOn": 1627439153,
    "lastUpdated": 1629983169,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1627439153,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1627439166,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1627439872,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/23030/ : SUCCESS"
        },
        {
            "timestamp": 1627572068,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1627576450,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1627949706,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1627949728,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1627949762,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1627950074,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/23606/ : FAILURE"
        },
        {
            "timestamp": 1627950366,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Uploaded patch set 3: Patch Set 2 was rebased."
        },
        {
            "timestamp": 1627950380,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1627951095,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/23611/ : SUCCESS"
        },
        {
            "timestamp": 1627958147,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Uploaded patch set 4: Patch Set 3 was rebased."
        },
        {
            "timestamp": 1627958177,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1627959031,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/23624/ : SUCCESS"
        },
        {
            "timestamp": 1628228489,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Uploaded patch set 5: Patch Set 4 was rebased."
        },
        {
            "timestamp": 1628228527,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1628229426,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/23951/ : SUCCESS"
        },
        {
            "timestamp": 1629741889,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 5: Code-Review+1"
        },
        {
            "timestamp": 1629752823,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Uploaded patch set 6: Patch Set 5 was rebased."
        },
        {
            "timestamp": 1629752858,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1629753872,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/24842/ : SUCCESS"
        },
        {
            "timestamp": 1629832344,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Uploaded patch set 7: Patch Set 6 was rebased."
        },
        {
            "timestamp": 1629832356,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1629833035,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/24936/ : SUCCESS"
        },
        {
            "timestamp": 1629836599,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Uploaded patch set 8: Patch Set 7 was rebased."
        },
        {
            "timestamp": 1629836611,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1629837291,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/24942/ : SUCCESS"
        },
        {
            "timestamp": 1629844112,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 8:\n\nThis should be good now.  I also tested out the RFC commit in phosphor-virtual-sensors and it all works as expected.\n\n```\n{\n  \"_HOSTNAME\": \"bletchley\",\n  \"_EXE\": \"/usr/bin/virtual-sensor\",\n  \"__REALTIME_TIMESTAMP\": \"253107265\",\n  \"_MACHINE_ID\": \"617d774ee46440afb634c055234a1549\",\n  \"_CMDLINE\": \"/usr/bin/virtual-sensor\",\n  \"_SYSTEMD_INVOCATION_ID\": \"ad8ca2b4464d4be6a29e678dd6dc3fd3\",\n  \"_SYSTEMD_UNIT\": \"phosphor-virtual-sensor.service\",\n  \"_BOOT_ID\": \"a687417005d84e30ac26fff8e2e1126e\",\n  \"CODE_FILE\": \"../git/virtualSensor.cpp\",\n  \"_PID\": \"475\",\n  \"FILENAME\": \"/usr/share/phosphor-virtual-sensor/virtual_sensor_config.json\",\n  \"SYSLOG_IDENTIFIER\": \"virtual-sensor\",\n  \"CODE_FUNC\": \"phosphor::virtualSensor::Json phosphor::virtualSensor::VirtualSensors::parseConfigFile(std::string)\",\n  \"__CURSOR\": \"s=f7deb80ab0184d9aa4d1b162a7a5af1d;i=2ba;b=a687417005d84e30ac26fff8e2e1126e;m=f161c53;t=f161c41;x=e82e0412129998a8\",\n  \"_SYSTEMD_CGROUP\": \"/system.slice/phosphor-virtual-sensor.service\",\n  \"_SOURCE_REALTIME_TIMESTAMP\": \"253107188\",\n  \"LOG2_FMTMSG\": \"config JSON file {FILENAME} not found\",\n  \"_COMM\": \"virtual-sensor\",\n  \"PRIORITY\": \"3\",\n  \"_GID\": \"0\",\n  \"CODE_LINE\": \"320\",\n  \"__MONOTONIC_TIMESTAMP\": \"253107283\",\n  \"_CAP_EFFECTIVE\": \"1ffffffffff\",\n  \"MESSAGE\": \"config JSON file /usr/share/phosphor-virtual-sensor/virtual_sensor_config.json not found\",\n  \"_TRANSPORT\": \"journal\",\n  \"_UID\": \"0\",\n  \"_SYSTEMD_SLICE\": \"system.slice\"\n}\n```"
        },
        {
            "timestamp": 1629983150,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 8: Code-Review+2"
        },
        {
            "timestamp": 1629983169,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Change has been successfully rebased and submitted as 5f285c539d7d967b342a8d87eb075a48f77d873c by Matt Spinler"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "22a818c989a3e632bfb064b524e0b065eb83a96a",
            "parents": [
                "3ca3282b55ec2b82118d8b40bab6ace2fcc56e8a"
            ],
            "ref": "refs/changes/18/45318/1",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1627439153,
            "author": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "log_manager.cpp",
                    "line": 33,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "this sure pulls a lot of common words into the global namespace, like 'error', so probably not a best practice to do globally."
                },
                {
                    "file": "log_manager.cpp",
                    "line": 33,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I agree in a header.  In a source file I think it can be up to the file owner to decide.\n\nAs you see here I just replaced the existing 'using namespace phosphor::logging' with the equivalent from lg2.  (lg2 is actually finer grained than phosphor::logging because it is explicit about what names are included.)  But, yes, 'error' is the main one that is potentially problematic.  When I was porting phosphor-virtual-sensors I had to change a few cases of 'error' being used as a variable name to avoid the ambiguity.\n\nIf you prefer these to all be 'lg2::error', 'lg2::info', etc. in this file I'll make it happen."
                },
                {
                    "file": "log_manager.cpp",
                    "line": 33,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "log_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 34,
                    "deletions": -47
                },
                {
                    "file": "log_manager_main.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 39,
            "sizeDeletions": 50
        },
        {
            "number": 2,
            "revision": "c50561137f5e94e57a1f707206acb0e92ea72cda",
            "parents": [
                "14f02fe8658fe60588f491d55962f3ee2ca1185f"
            ],
            "ref": "refs/changes/18/45318/2",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1627949728,
            "author": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "log_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 40,
                    "deletions": -46
                },
                {
                    "file": "log_manager_main.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 45,
            "sizeDeletions": 49
        },
        {
            "number": 3,
            "revision": "c252b483294b7a353d8b3ac9e5c5cab127039a9c",
            "parents": [
                "a932791a00722654f21c215bf6a71c38e7d6dfea"
            ],
            "ref": "refs/changes/18/45318/3",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1627950366,
            "author": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "log_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 40,
                    "deletions": -46
                },
                {
                    "file": "log_manager_main.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 45,
            "sizeDeletions": 49
        },
        {
            "number": 4,
            "revision": "9906cd2fb03fe3ecea6aa4d5e0429999543a9f81",
            "parents": [
                "38f683d0612c1c09ca339fddb4178e59f4ed0428"
            ],
            "ref": "refs/changes/18/45318/4",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1627958147,
            "author": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "log_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 40,
                    "deletions": -46
                },
                {
                    "file": "log_manager_main.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 45,
            "sizeDeletions": 49
        },
        {
            "number": 5,
            "revision": "a31c709b06af5308bdf8f3555f71e325b6ff57f6",
            "parents": [
                "1464abe046942f9246bbd1320b33b98cedbee8bf"
            ],
            "ref": "refs/changes/18/45318/5",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1628228489,
            "author": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "log_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 40,
                    "deletions": -46
                },
                {
                    "file": "log_manager_main.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 45,
            "sizeDeletions": 49
        },
        {
            "number": 6,
            "revision": "cb4569c88d604f653791d5acd698ad8bb83b3c98",
            "parents": [
                "e3331e175caf1f9c1d41d49e95d958ae7138a44c"
            ],
            "ref": "refs/changes/18/45318/6",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1629752823,
            "author": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "log_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 40,
                    "deletions": -46
                },
                {
                    "file": "log_manager_main.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 45,
            "sizeDeletions": 49
        },
        {
            "number": 7,
            "revision": "25f04c4ba73b3c7db3a6eb4e0f232fefc79f8818",
            "parents": [
                "e16ccb621c6b55cc5af71f43dbc1a354775925e8"
            ],
            "ref": "refs/changes/18/45318/7",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1629832344,
            "author": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "log_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 40,
                    "deletions": -46
                },
                {
                    "file": "log_manager_main.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 45,
            "sizeDeletions": 49
        },
        {
            "number": 8,
            "revision": "56af46820b85dbf515cc82a12f255a411e6afca2",
            "parents": [
                "9d5f187be21c80611c474a6c4c0548b3e745adb9"
            ],
            "ref": "refs/changes/18/45318/8",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1629836599,
            "author": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "log_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 40,
                    "deletions": -46
                },
                {
                    "file": "log_manager_main.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 45,
            "sizeDeletions": 49
        },
        {
            "number": 9,
            "revision": "5f285c539d7d967b342a8d87eb075a48f77d873c",
            "parents": [
                "465ab60c33eec13fd71967444fbd84d68f1c5530"
            ],
            "ref": "refs/changes/18/45318/9",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1629983169,
            "author": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "log_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 40,
                    "deletions": -46
                },
                {
                    "file": "log_manager_main.cpp",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 45,
            "sizeDeletions": 49
        }
    ]
}