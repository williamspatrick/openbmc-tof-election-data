{
    "project": "openbmc/sdbusplus",
    "branch": "master",
    "id": "I1e1a7922e64551510960ccaf02c58c9e7a2e4257",
    "number": 49874,
    "subject": "Simplified code examples",
    "owner": {
        "name": "Krzysztof Grobelny",
        "email": "krzysztof.grobelny@intel.com",
        "username": "krzysztof-i"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/sdbusplus/+/49874",
    "commitMessage": "Simplified code examples\n\n- renamed variables to be less confusing\n- removed wrapper for properties\n- added example usage of sdbusplus::unpackPropertiesNoThrow\n\nTested:\n- Console output from both examples is the same\n- Both examples still return error code 0 after Ctl+C\n\nSigned-off-by: Krzysztof Grobelny <krzysztof.grobelny@intel.com>\nChange-Id: I1e1a7922e64551510960ccaf02c58c9e7a2e4257\n",
    "createdOn": 1640091671,
    "lastUpdated": 1640694897,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1640091671,
            "reviewer": {
                "name": "Krzysztof Grobelny",
                "email": "krzysztof.grobelny@intel.com",
                "username": "krzysztof-i"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1640091686,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1640092369,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/32318/ : SUCCESS"
        },
        {
            "timestamp": 1640092452,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1640164347,
            "reviewer": {
                "name": "Krzysztof Grobelny",
                "email": "krzysztof.grobelny@intel.com",
                "username": "krzysztof-i"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1640165064,
            "reviewer": {
                "name": "Krzysztof Grobelny",
                "email": "krzysztof.grobelny@intel.com",
                "username": "krzysztof-i"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1640165077,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1640165266,
            "reviewer": {
                "name": "Krzysztof Grobelny",
                "email": "krzysztof.grobelny@intel.com",
                "username": "krzysztof-i"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1640165741,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/32373/ : SUCCESS"
        },
        {
            "timestamp": 1640179347,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1640184238,
            "reviewer": {
                "name": "Krzysztof Grobelny",
                "email": "krzysztof.grobelny@intel.com",
                "username": "krzysztof-i"
            },
            "message": "Patch Set 3: Published edit on patch set 2."
        },
        {
            "timestamp": 1640184251,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1640184346,
            "reviewer": {
                "name": "Krzysztof Grobelny",
                "email": "krzysztof.grobelny@intel.com",
                "username": "krzysztof-i"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1640184550,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/32382/ : FAILURE"
        },
        {
            "timestamp": 1640184993,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 3:\n\n(1 comment)\n\nGo ahead and restore the PS2 and I'll merge it."
        },
        {
            "timestamp": 1640185821,
            "reviewer": {
                "name": "Krzysztof Grobelny",
                "email": "krzysztof.grobelny@intel.com",
                "username": "krzysztof-i"
            },
            "message": "Patch Set 4: Published edit on patch set 3."
        },
        {
            "timestamp": 1640185836,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1640186397,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 4: Code-Review+2"
        },
        {
            "timestamp": 1640186487,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/32383/ : SUCCESS"
        },
        {
            "timestamp": 1640186580,
            "reviewer": {
                "name": "Krzysztof Grobelny",
                "email": "krzysztof.grobelny@intel.com",
                "username": "krzysztof-i"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1640694897,
            "reviewer": {
                "name": "Krzysztof Grobelny",
                "email": "krzysztof.grobelny@intel.com",
                "username": "krzysztof-i"
            },
            "message": "Change has been successfully rebased and submitted as 6adfe948ee55ffde8457047042d0d55aa3d8b4a7 by Krzysztof Grobelny"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "9fcae57456d5ea3601cad17027aee27402de6ee9",
            "parents": [
                "55949c29adbf88b05acc62ef972de7b5c6a21a4a"
            ],
            "ref": "refs/changes/74/49874/1",
            "uploader": {
                "name": "Krzysztof Grobelny",
                "email": "krzysztof.grobelny@intel.com",
                "username": "krzysztof-i"
            },
            "createdOn": 1640091671,
            "author": {
                "name": "Krzysztof Grobelny",
                "email": "krzysztof.grobelny@intel.com",
                "username": "krzysztof-i"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Why?  I don\u2019t see how repeating the raw string all over is \u201cbetter\u201d. \n\nMaybe a change to a constexpr string or string_view now that we are using C++20?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Krzysztof Grobelny",
                        "email": "krzysztof.grobelny@intel.com",
                        "username": "krzysztof-i"
                    },
                    "message": "Okay, I will bring back variables.\n\nAs far as I understand std::string can be used in constexpr function but we cannot create constexpr std::string.\n\nstring_view has no default conversion to std::string, sdbusplus forces us to use std::string, to avoid copy it might be more efficient to create std::string constant"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Krzysztof Grobelny",
                        "email": "krzysztof.grobelny@intel.com",
                        "username": "krzysztof-i"
                    },
                    "message": "Done. After taking a look at it after some time I was confused by variable names, I agree it would be better to simply rename then instead of removing."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "example/get-all-properties.cpp",
                    "type": "MODIFIED",
                    "insertions": 33,
                    "deletions": -44
                },
                {
                    "file": "example/register-property.cpp",
                    "type": "MODIFIED",
                    "insertions": 24,
                    "deletions": -87
                }
            ],
            "sizeInsertions": 57,
            "sizeDeletions": 131
        },
        {
            "number": 2,
            "revision": "226e3c258616121a5ea6a7f3ae7f37558e406f8d",
            "parents": [
                "55949c29adbf88b05acc62ef972de7b5c6a21a4a"
            ],
            "ref": "refs/changes/74/49874/2",
            "uploader": {
                "name": "Krzysztof Grobelny",
                "email": "krzysztof.grobelny@intel.com",
                "username": "krzysztof-i"
            },
            "createdOn": 1640165064,
            "author": {
                "name": "Krzysztof Grobelny",
                "email": "krzysztof.grobelny@intel.com",
                "username": "krzysztof-i"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "example/get-all-properties.cpp",
                    "line": 10,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "std::strings can certainly be constexpr constructed since C++20."
                },
                {
                    "file": "example/get-all-properties.cpp",
                    "line": 10,
                    "reviewer": {
                        "name": "Krzysztof Grobelny",
                        "email": "krzysztof.grobelny@intel.com",
                        "username": "krzysztof-i"
                    },
                    "message": "Maybe I am doing something wrong:\nhttps://godbolt.org/z/5x8TdMs8r"
                },
                {
                    "file": "example/get-all-properties.cpp",
                    "line": 10,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Hmm.  You are right.  GCC doesn't support \"constexpr std::string\" until GCC 12 according to https://en.cppreference.com/w/cpp/compiler_support.\n\nIt is annoying how much stuff was added to C++20 but not available in compilers yet..."
                },
                {
                    "file": "example/get-all-properties.cpp",
                    "line": 10,
                    "reviewer": {
                        "name": "Krzysztof Grobelny",
                        "email": "krzysztof.grobelny@intel.com",
                        "username": "krzysztof-i"
                    },
                    "message": "With latest gcc it is possible to do something like this:\nhttps://godbolt.org/z/jGPjGzc8v\n\nbut constexpr std::string still doesn't work"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "example/get-all-properties.cpp",
                    "type": "MODIFIED",
                    "insertions": 43,
                    "deletions": -44
                },
                {
                    "file": "example/register-property.cpp",
                    "type": "MODIFIED",
                    "insertions": 34,
                    "deletions": -86
                }
            ],
            "sizeInsertions": 77,
            "sizeDeletions": 130
        },
        {
            "number": 3,
            "revision": "9ba2ab707f58e972080b597be9e797f5c84d71f1",
            "parents": [
                "55949c29adbf88b05acc62ef972de7b5c6a21a4a"
            ],
            "ref": "refs/changes/74/49874/3",
            "uploader": {
                "name": "Krzysztof Grobelny",
                "email": "krzysztof.grobelny@intel.com",
                "username": "krzysztof-i"
            },
            "createdOn": 1640184238,
            "author": {
                "name": "Krzysztof Grobelny",
                "email": "krzysztof.grobelny@intel.com",
                "username": "krzysztof-i"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "example/get-all-properties.cpp",
                    "type": "MODIFIED",
                    "insertions": 43,
                    "deletions": -44
                },
                {
                    "file": "example/register-property.cpp",
                    "type": "MODIFIED",
                    "insertions": 34,
                    "deletions": -86
                }
            ],
            "sizeInsertions": 77,
            "sizeDeletions": 130
        },
        {
            "number": 4,
            "revision": "199b46504c67994110f73634190b6e5f5a97da6b",
            "parents": [
                "55949c29adbf88b05acc62ef972de7b5c6a21a4a"
            ],
            "ref": "refs/changes/74/49874/4",
            "uploader": {
                "name": "Krzysztof Grobelny",
                "email": "krzysztof.grobelny@intel.com",
                "username": "krzysztof-i"
            },
            "createdOn": 1640185821,
            "author": {
                "name": "Krzysztof Grobelny",
                "email": "krzysztof.grobelny@intel.com",
                "username": "krzysztof-i"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "example/get-all-properties.cpp",
                    "type": "MODIFIED",
                    "insertions": 43,
                    "deletions": -44
                },
                {
                    "file": "example/register-property.cpp",
                    "type": "MODIFIED",
                    "insertions": 34,
                    "deletions": -86
                }
            ],
            "sizeInsertions": 77,
            "sizeDeletions": 130
        },
        {
            "number": 5,
            "revision": "6adfe948ee55ffde8457047042d0d55aa3d8b4a7",
            "parents": [
                "e1353143b6d8e5cdc7c9dcdc8c5a90000502dea2"
            ],
            "ref": "refs/changes/74/49874/5",
            "uploader": {
                "name": "Krzysztof Grobelny",
                "email": "krzysztof.grobelny@intel.com",
                "username": "krzysztof-i"
            },
            "createdOn": 1640694897,
            "author": {
                "name": "Krzysztof Grobelny",
                "email": "krzysztof.grobelny@intel.com",
                "username": "krzysztof-i"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "example/get-all-properties.cpp",
                    "type": "MODIFIED",
                    "insertions": 43,
                    "deletions": -44
                },
                {
                    "file": "example/register-property.cpp",
                    "type": "MODIFIED",
                    "insertions": 34,
                    "deletions": -86
                }
            ],
            "sizeInsertions": 77,
            "sizeDeletions": 130
        }
    ]
}