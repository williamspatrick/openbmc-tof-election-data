{
    "project": "openbmc/phosphor-fan-presence",
    "branch": "master",
    "id": "I474916773476a6232d479119acb4ac2989909cb3",
    "number": 48757,
    "subject": "control: PCIe floors action",
    "owner": {
        "name": "Matt Spinler",
        "email": "spinler@us.ibm.com",
        "username": "spinler"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-fan-presence/+/48757",
    "commitMessage": "control: PCIe floors action\n\nThis action sets the PCIe floor index by looking up the highest floor\nindex of all the powered on PCIe cards that are recognized in the PCIe\ncard JSON files.  If a PCIe card has its own temperature sensor then it\ndoesn't provide a floor index.  If a card isn't recognized, then the\ndefault floor index provided in the PCIe card JSON file is used.\n\nThe class documentation contains additional details on how the action\nbehaves.  It's JSON name is 'pcie_card_floors'.\n\nSigned-off-by: Matt Spinler <spinler@us.ibm.com>\nChange-Id: I474916773476a6232d479119acb4ac2989909cb3\n",
    "createdOn": 1636564448,
    "lastUpdated": 1641518931,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1636564448,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1636564460,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1636564481,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 2: Commit message was updated."
        },
        {
            "timestamp": 1636564562,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/30060/ : SUCCESS"
        },
        {
            "timestamp": 1636570010,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 2:\n\nI think I will rename this class"
        },
        {
            "timestamp": 1636584071,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1636584097,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1636584201,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/30105/ : SUCCESS"
        },
        {
            "timestamp": 1638220007,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 4: Patch Set 3 was rebased."
        },
        {
            "timestamp": 1638220023,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1638220058,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/30865/ : FAILURE"
        },
        {
            "timestamp": 1638220170,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 5: Patch Set 4 was rebased."
        },
        {
            "timestamp": 1638220198,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1638220931,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/30880/ : SUCCESS"
        },
        {
            "timestamp": 1638375660,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 6."
        },
        {
            "timestamp": 1638375687,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1638375796,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/30991/ : SUCCESS"
        },
        {
            "timestamp": 1638568764,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Patch Set 6:\n\n(9 comments)"
        },
        {
            "timestamp": 1638993814,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 7."
        },
        {
            "timestamp": 1638993814,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 7:\n\n(6 comments)"
        },
        {
            "timestamp": 1638993838,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1638994018,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/31585/ : SUCCESS"
        },
        {
            "timestamp": 1639003564,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1639086210,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1641321273,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Patch Set 7:\n\n(7 comments)"
        },
        {
            "timestamp": 1641325652,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 8."
        },
        {
            "timestamp": 1641325652,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 8:\n\n(5 comments)"
        },
        {
            "timestamp": 1641325692,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1641325692,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: -Ok-To-Test"
        },
        {
            "timestamp": 1641326099,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/34875/ : SUCCESS"
        },
        {
            "timestamp": 1641418601,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Uploaded patch set 9: Patch Set 8 was rebased."
        },
        {
            "timestamp": 1641418627,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1641418627,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: -Ok-To-Test"
        },
        {
            "timestamp": 1641418703,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/34954/ : SUCCESS"
        },
        {
            "timestamp": 1641518931,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Patch Set 9: Code-Review+1\n\n(1 comment)"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "460d60bdf4505a5c249776a706119713b94ec889",
            "parents": [
                "98dfc4f58d5d3bdd198bc033c3813a25996f438e"
            ],
            "ref": "refs/changes/57/48757/1",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1636564448,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "control/Makefile.am",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "control/json/actions/pcie_card_cooling.cpp",
                    "type": "ADDED",
                    "insertions": 277,
                    "deletions": 0
                },
                {
                    "file": "control/json/actions/pcie_card_cooling.hpp",
                    "type": "ADDED",
                    "insertions": 168,
                    "deletions": 0
                },
                {
                    "file": "json_config.hpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 456,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "b76c4be99143bf4c5c7922b7a1fdea3a9a098c0a",
            "parents": [
                "98dfc4f58d5d3bdd198bc033c3813a25996f438e"
            ],
            "ref": "refs/changes/57/48757/2",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1636564481,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "control/Makefile.am",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "control/json/actions/pcie_card_cooling.cpp",
                    "type": "ADDED",
                    "insertions": 277,
                    "deletions": 0
                },
                {
                    "file": "control/json/actions/pcie_card_cooling.hpp",
                    "type": "ADDED",
                    "insertions": 168,
                    "deletions": 0
                },
                {
                    "file": "json_config.hpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 456,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "b51208cd12fbf5ec9e8da740f5eef07548f993e6",
            "parents": [
                "1cee0ae3ebf29787dbc7e4a5f8e8460df2d1fba3"
            ],
            "ref": "refs/changes/57/48757/3",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1636584071,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "control/Makefile.am",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "type": "ADDED",
                    "insertions": 277,
                    "deletions": 0
                },
                {
                    "file": "control/json/actions/pcie_card_floors.hpp",
                    "type": "ADDED",
                    "insertions": 166,
                    "deletions": 0
                },
                {
                    "file": "json_config.hpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 454,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "531cf7074c88da09076216000fac9b50c6a2068a",
            "parents": [
                "8dbac9cb00dec858eb6001a840b28e64d1c136b2"
            ],
            "ref": "refs/changes/57/48757/4",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1638220007,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "control/Makefile.am",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "type": "ADDED",
                    "insertions": 277,
                    "deletions": 0
                },
                {
                    "file": "control/json/actions/pcie_card_floors.hpp",
                    "type": "ADDED",
                    "insertions": 166,
                    "deletions": 0
                },
                {
                    "file": "json_config.hpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 454,
            "sizeDeletions": 0
        },
        {
            "number": 5,
            "revision": "b70bbdcc8cf4d1d04f191370d3f4f20d8e5ee4e4",
            "parents": [
                "89bf1e78d902755341585d3e963fc58e76553982"
            ],
            "ref": "refs/changes/57/48757/5",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1638220170,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "control/Makefile.am",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "type": "ADDED",
                    "insertions": 277,
                    "deletions": 0
                },
                {
                    "file": "control/json/actions/pcie_card_floors.hpp",
                    "type": "ADDED",
                    "insertions": 166,
                    "deletions": 0
                },
                {
                    "file": "json_config.hpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 454,
            "sizeDeletions": 0
        },
        {
            "number": 6,
            "revision": "b9c143031e9a171f87e6b0579eca18359bbb2b19",
            "parents": [
                "b6036b4394dfb27c4e214ad7b99c0f2fab407e8e"
            ],
            "ref": "refs/changes/57/48757/6",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1638375660,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 36,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "Should we make this part of this action's JSON config in case it needs to be changed? or maybe make it optional where it defaults to 1sec when not given? i.e. \"slotPowerDelay\" or similar"
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 36,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "I believe this has been resolved in ps7"
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 57,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "Is this valid for all types of event triggers that could trigger this action? I think having the `settleTime` configurable in the JSON would help where maybe the event trigger doesnt want a delay and a settleTime = 0 would disable the timer from being used.\n\nProbably should default to 0  when not given in the JSON config, since not all configs may need this settleTimer and its specific to the system on how it powers the slots."
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 57,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "I will do that, though not sure I see a use for it."
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 57,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "I believe this has been resolved in ps7"
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 71,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "Add a debug log here since this action is really dependent on groups having the power state interface and if they dont, that could be a misconfiguration."
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 71,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Done"
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 94,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "It's expected that they'd be powered on at this point after the settleTimer expires, right? Should something be logged here if they're not to indicate a longer settleTimer is needed or there's a problem?\n\nOf course, when I say something should be logged here, maybe instead of to the journal something could get added to the flight recorder for this action?"
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 94,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "The slot could be empty, in which case it would never turn on.  Also, PHYP powers off cards that aren't assigned to a partition."
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 94,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "Ack"
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 98,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "Also commented in the pcie meta data class, this if/else wouldnt be needed if the default_floor_index was returned as the floor index in the getFloorIndexFromSlot() call."
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 98,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "i originally did it that way, but I wanted to be able to throw the config into the flight recorder on line 121 so we can see it all in one place."
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 98,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "Looks like adding the config results in the flight recorder is missing on line 121?"
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 98,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "it was line 121 in patch set 6, now it's 125."
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 160,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "Instead of having this, could just enforce a default location to check for a base config file."
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 160,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Done"
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 179,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "Ah, I see how you're using this now."
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 203,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "To eliminate this try/catch, the Manager::getProperty() method could be used, which returns std::optional<PropertyVariantType> and this method could be something like:\n```\nauto variantValue = Manager::getProperty(objectPath, pcieDeviceIface, propertyName);\nif (variantValue)\n{\n    try\n    {\n        return std::stoul(std::get<std::string>(variantValue), nullptr, 0);\n    }\n    catch (const std::invalid_argument& e)\n    {\n        throw std::runtime_error(\n            fmt::format(\"{}: {} has invalid PCIeDevice property {} value: {}\",\n                        ActionBase::getName(), objectPath, propertyName,\n                        std::get<std::string>(variantValue))\n                .c_str());\n    }\n}\nelse\n{\n    throw std::runtime_error(\n        fmt::format(\n            \"{}: Could not get PCIeDevice property {} {} from cache \",\n            ActionBase::getName(), objectPath, propertyName)\n            .c_str());\n}\n```"
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 203,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "That one isn't static, so would have to start storing the Manager ptr/ref."
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 203,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "Ack\n\nYou can get a pointer to the manager from the zone"
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 203,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "True.  The downsides are I'd have to add a new member to the class that wouldn't  be valid until run() is called so I can get a Zone.  Let me know if you'd still like me to change it."
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 203,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "I dont quite follow that since a reference to the zone is given to `execute()` and could be passed down to here, but this is fine and will look into enhancements as improvements are made to the Manager."
                },
                {
                    "file": "control/json/actions/pcie_card_floors.hpp",
                    "line": 81,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "?"
                },
                {
                    "file": "control/json/actions/pcie_card_floors.hpp",
                    "line": 81,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "Setting what members? group members?"
                },
                {
                    "file": "control/json/actions/pcie_card_floors.hpp",
                    "line": 81,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "control/Makefile.am",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "type": "ADDED",
                    "insertions": 277,
                    "deletions": 0
                },
                {
                    "file": "control/json/actions/pcie_card_floors.hpp",
                    "type": "ADDED",
                    "insertions": 166,
                    "deletions": 0
                },
                {
                    "file": "json_config.hpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 454,
            "sizeDeletions": 0
        },
        {
            "number": 7,
            "revision": "0847675305f4bdecf0e4aca323c00ec28eab2018",
            "parents": [
                "e81bf2f4385caef2a302f1ae1618ef6c69db1485"
            ],
            "ref": "refs/changes/57/48757/7",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1638993814,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 36,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "This can be removed now with the JSON setting `_settleTime`, right?"
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 36,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Done"
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 152,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "need to change to:\n Manager::setParameter(floorIndexParam, std::nullopt);\n\nafter https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-fan-presence/+/49139 merges"
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 152,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "This dependency has been merged now."
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "line": 152,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "control/Makefile.am",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "type": "ADDED",
                    "insertions": 275,
                    "deletions": 0
                },
                {
                    "file": "control/json/actions/pcie_card_floors.hpp",
                    "type": "ADDED",
                    "insertions": 168,
                    "deletions": 0
                },
                {
                    "file": "json_config.hpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 454,
            "sizeDeletions": 0
        },
        {
            "number": 8,
            "revision": "2e76ea5c64fd0ff806b922b182f27d52fc28af64",
            "parents": [
                "7d9dcbfe69c949b6c74e61dee7c5527762d48b61"
            ],
            "ref": "refs/changes/57/48757/8",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1641325652,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "control/Makefile.am",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "type": "ADDED",
                    "insertions": 273,
                    "deletions": 0
                },
                {
                    "file": "control/json/actions/pcie_card_floors.hpp",
                    "type": "ADDED",
                    "insertions": 168,
                    "deletions": 0
                },
                {
                    "file": "json_config.hpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 452,
            "sizeDeletions": 0
        },
        {
            "number": 9,
            "revision": "fca07fcde46f6ad157350099448932c4da79af4a",
            "parents": [
                "731f837d7b04164e57f482196eecfcca35857e28"
            ],
            "ref": "refs/changes/57/48757/9",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1641418601,
            "author": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "control/Makefile.am",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "control/json/actions/pcie_card_floors.cpp",
                    "type": "ADDED",
                    "insertions": 273,
                    "deletions": 0
                },
                {
                    "file": "control/json/actions/pcie_card_floors.hpp",
                    "type": "ADDED",
                    "insertions": 168,
                    "deletions": 0
                },
                {
                    "file": "json_config.hpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 452,
            "sizeDeletions": 0
        }
    ]
}