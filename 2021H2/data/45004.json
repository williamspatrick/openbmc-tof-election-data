{
    "project": "openbmc/x86-power-control",
    "branch": "master",
    "id": "I51ba1362664dd5582b156a84d31b2403d10411b1",
    "number": 45004,
    "subject": "DBUS service name numbering for single and multi hosts",
    "owner": {
        "name": "Naveen Moses ",
        "email": "naveen.mosess@hcl.com",
        "username": "naveenmosess"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/x86-power-control/+/45004",
    "commitMessage": "DBUS service name numbering for single and multi hosts\n\nFor single host based systems additional busname is added\nwith \"0\" at the end of the name. Dbus service name of single hosts is\ncreated  with and without numbering.\nin case of multiple hosts dbus service name will be postfixed with\nrespective host number.\n\nex :\n    single host : xyz.openbmc_project.State.Host and\n    xyz.openbmc_project.State.Host0\n\n    multi host  : xyz.openbmc_project.State.Host1, xxx.State.Host2 ... etc\n\nTESTED: Tested and verified in Tiogapass and YosemteV2.\nverified using  power control busctl commands.\n\nSigned-off-by: Naveen Moses <naveen.mosess@hcl.com>\nChange-Id: I51ba1362664dd5582b156a84d31b2403d10411b1\n",
    "createdOn": 1626453837,
    "lastUpdated": 1628543714,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1626453837,
            "reviewer": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1626453849,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1626453918,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/22174/ : FAILURE"
        },
        {
            "timestamp": 1626454562,
            "reviewer": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1626454575,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1626454640,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/22176/ : SUCCESS"
        },
        {
            "timestamp": 1626472140,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 2: Code-Review-1\n\n(1 comment)"
        },
        {
            "timestamp": 1626488101,
            "reviewer": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1626488116,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1626488159,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/22185/ : FAILURE"
        },
        {
            "timestamp": 1626489214,
            "reviewer": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1626489226,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1626489287,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/22186/ : SUCCESS"
        },
        {
            "timestamp": 1626489617,
            "reviewer": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "message": "Patch Set 4:\n\n(1 comment)\n\nGood catch. It was unintentional. I have updated the patch set. Thanks Jason."
        },
        {
            "timestamp": 1626661114,
            "reviewer": {
                "name": "Kuiying Wang",
                "email": "wangkuiying.wky@alibaba-inc.com",
                "username": "kuiyingw"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1626819597,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 4:\n\nI have pulled in the three newest changes and the recipe update.  Everything builds fine and I can power on and off, but my 'ipmitool power status' command doesn't work anymore.  I'll continue debugging that."
        },
        {
            "timestamp": 1626901184,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 4: Code-Review-1\n\nI have confirmed that this change introduces two issues on my system:\n1. 'ipmitool power status' returns an Unspecified Error\n2. The power-control application restarts about every 90 seconds\n\nDo you see these issues on your end?"
        },
        {
            "timestamp": 1626990079,
            "reviewer": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1626990093,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1626990156,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/22627/ : SUCCESS"
        },
        {
            "timestamp": 1626990529,
            "reviewer": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "message": "Patch Set 5:\n\n(1 comment)\n\n> Patch Set 4: Code-Review-1\n> \n> I have confirmed that this change introduces two issues on my system:\n> 1. 'ipmitool power status' returns an Unspecified Error\n> 2. The power-control application restarts about every 90 seconds\n> \n> Do you see these issues on your end?\n\nThis issue is getting observed in single host hardware also.\nThe reason is with the dbus systemd service dependency.\ndbus name provided in the service file and dbus service name created in the power \ncontrol is different which caused systemd service start timeout. \nFix : to use separate systemd service files for singlehost and multihost.\nThis fix have been tested in singlehost and multihost hardware.\nNote:Additional systemd service config has to be added in\n meta-phosphor/recipes-x86/chassis/x86-power-control_git.bb which i will raise as a separate review."
        },
        {
            "timestamp": 1627081270,
            "reviewer": {
                "name": "Jonathan Doman",
                "email": "jonathan.doman@intel.com",
                "username": "jonathan-doman"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1627413977,
            "reviewer": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "message": "Uploaded patch set 6."
        },
        {
            "timestamp": 1627413989,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1627414069,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/23005/ : SUCCESS"
        },
        {
            "timestamp": 1627414083,
            "reviewer": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "message": "Patch Set 6:\n\n(1 comment)\n\nI have corrected the line and pushed new patch.Thanks Jonathan"
        },
        {
            "timestamp": 1627435265,
            "reviewer": {
                "name": "Jonathan Doman",
                "email": "jonathan.doman@intel.com",
                "username": "jonathan-doman"
            },
            "message": "Patch Set 6: Code-Review+1\n\n(1 comment)\n\nTested it out on the Intel platform and power control seems to work ok."
        },
        {
            "timestamp": 1627485142,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1627489506,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1627489986,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1627490436,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1627490887,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1627492501,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1627493912,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1627498108,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1627504288,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1627513378,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1627528194,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1627579775,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1627587981,
            "reviewer": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "message": "Patch Set 6:\n\nwe can start a mail thread with explaining the changes needed.\n\nI expect the following two changes for all repos excluding phosphor state manager:\n\nreplace the service file name used directly or as dependency\nfrom \nxyz.openbmc_project.Chassis.Control.Power.service\nto\nxyz.openbmc_project.Chassis.Control.Power@0.service\n\n\nReplace the processes using the power control service names as below:\nxyz.openbmc_project.State.Host to xyz.openbmc_project.State.Host0\nxyz.openbmc_project.State.Chassis to xyz.openbmc_project.State.Chassis0 \nxyz.openbmc_project.State.OperatingSystem to xyz.openbmc_project.State.OperatingSystem0\nxyz.openbmc_project.Chassis.Buttons to xyz.openbmc_project.Chassis.Buttons0\nxyz.openbmc_project.Control.Host.NMI to xyz.openbmc_project.Control.Host.NMI0\nxyz.openbmc_project.Control.Host.RestartCause to xyz.openbmc_project.Control.Host.RestartCause0\n \n\nregarding the phosphor state manager, is there any instances where phosphor state manager and x86 power control can spawn at same time?\nI have noticed even without the current multihost implementation we will have conflict if both \nphosphor state manager and x86 power control starts concurrently as they try to create the same dbus service names  \n\"xyz.openbmc_project.State.Host\",xyz.openbmc_project.State.Chassis.\n\nIn our single host systems we have not faced this conflict as the phosphor state manager is not spawned."
        },
        {
            "timestamp": 1627912588,
            "reviewer": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "message": "Uploaded patch set 7."
        },
        {
            "timestamp": 1627912601,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1627912659,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/23536/ : FAILURE"
        },
        {
            "timestamp": 1627935061,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 7: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1627979241,
            "reviewer": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "message": "Uploaded patch set 8."
        },
        {
            "timestamp": 1627979256,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1627979334,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/23646/ : SUCCESS"
        },
        {
            "timestamp": 1627979374,
            "reviewer": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1627991258,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 8: Code-Review+1"
        },
        {
            "timestamp": 1628104528,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 8: Code-Review+1\n\n(1 comment)\n\nLooks good and tested successfully on my system.  I'd like to fix the typo, but otherwise this is ready for +2.  Thanks!"
        },
        {
            "timestamp": 1628263164,
            "reviewer": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "message": "Uploaded patch set 9."
        },
        {
            "timestamp": 1628263177,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1628263216,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/23977/ : SUCCESS"
        },
        {
            "timestamp": 1628263293,
            "reviewer": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "message": "Patch Set 9:\n\n(1 comment)"
        },
        {
            "timestamp": 1628267051,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 9: Code-Review+2"
        },
        {
            "timestamp": 1628543714,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Change has been successfully merged by Jason Bills"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "2d267b67a0badd0e1b5940ed143de09b9fa4ad25",
            "parents": [
                "117c34e73f80727eeb6c3cd24210644f327b664a"
            ],
            "ref": "refs/changes/04/45004/1",
            "uploader": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "createdOn": 1626453837,
            "author": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "power-control-x86/src/power_control.cpp",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": -11
                }
            ],
            "sizeInsertions": 12,
            "sizeDeletions": 11
        },
        {
            "number": 2,
            "revision": "8e5d9dda9a39bdd02692d736cb007f8eca542117",
            "parents": [
                "117c34e73f80727eeb6c3cd24210644f327b664a"
            ],
            "ref": "refs/changes/04/45004/2",
            "uploader": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "createdOn": 1626454562,
            "author": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "power-control-x86/src/power_control.cpp",
                    "line": 3481,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "Looks like you may need to rebase so you don't unintentionally remove this previous change."
                },
                {
                    "file": "power-control-x86/src/power_control.cpp",
                    "line": 3481,
                    "reviewer": {
                        "name": "Naveen Moses ",
                        "email": "naveen.mosess@hcl.com",
                        "username": "naveenmosess"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "power-control-x86/src/power_control.cpp",
                    "type": "MODIFIED",
                    "insertions": 24,
                    "deletions": -77
                }
            ],
            "sizeInsertions": 24,
            "sizeDeletions": 77
        },
        {
            "number": 3,
            "revision": "4408c140c6f509e4cdeb6ed7b57936f16098fb81",
            "parents": [
                "117c34e73f80727eeb6c3cd24210644f327b664a"
            ],
            "ref": "refs/changes/04/45004/3",
            "uploader": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "createdOn": 1626488101,
            "author": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "power-control-x86/src/power_control.cpp",
                    "type": "MODIFIED",
                    "insertions": 15,
                    "deletions": -12
                }
            ],
            "sizeInsertions": 15,
            "sizeDeletions": 12
        },
        {
            "number": 4,
            "revision": "2f1862a8f6e8c3e436000985c93e1436c28c8c02",
            "parents": [
                "117c34e73f80727eeb6c3cd24210644f327b664a"
            ],
            "ref": "refs/changes/04/45004/4",
            "uploader": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "createdOn": 1626489214,
            "author": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 16,
                    "reviewer": {
                        "name": "Kuiying Wang",
                        "email": "wangkuiying.wky@alibaba-inc.com",
                        "username": "kuiyingw"
                    },
                    "message": "Test it on both single and multi host\nAnd attach the Tested field with test result."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 16,
                    "reviewer": {
                        "name": "Naveen Moses ",
                        "email": "naveen.mosess@hcl.com",
                        "username": "naveenmosess"
                    },
                    "message": "Ack"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "power-control-x86/src/power_control.cpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": -12
                }
            ],
            "sizeInsertions": 14,
            "sizeDeletions": 12
        },
        {
            "number": 5,
            "revision": "b2c5ffe3103d5749cf5225f798b4585a3fa6b1dc",
            "parents": [
                "117c34e73f80727eeb6c3cd24210644f327b664a"
            ],
            "ref": "refs/changes/04/45004/5",
            "uploader": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "createdOn": 1626990079,
            "author": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "power-control-x86/src/power_control.cpp",
                    "line": 3870,
                    "reviewer": {
                        "name": "Jonathan Doman",
                        "email": "jonathan.doman@intel.com",
                        "username": "jonathan-doman"
                    },
                    "message": "This breaks IPMI Get System Restart Cause command, leading to the \"ipmitool power status\" failure Jason reported.\nI think it should be\n\n    \"/xyz/openbmc_project/control/host\" + node + \"/restart_cause\""
                },
                {
                    "file": "power-control-x86/src/power_control.cpp",
                    "line": 3870,
                    "reviewer": {
                        "name": "Naveen Moses ",
                        "email": "naveen.mosess@hcl.com",
                        "username": "naveenmosess"
                    },
                    "message": "Ack"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "power-control-x86/CMakeLists.txt",
                    "type": "MODIFIED",
                    "insertions": 16,
                    "deletions": -1
                },
                {
                    "file": "power-control-x86/service_files/xyz.openbmc_project.Chassis.Control.Power.service",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "power-control-x86/src/power_control.cpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": -12
                }
            ],
            "sizeInsertions": 43,
            "sizeDeletions": 13
        },
        {
            "number": 6,
            "revision": "40fd21090de38e0b95b3a3bc0b2d185d46afca32",
            "parents": [
                "2a26943210a7b26525638bb9dacfd2868c7cdad7"
            ],
            "ref": "refs/changes/04/45004/6",
            "uploader": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "createdOn": 1627413977,
            "author": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Why is this a good thing to do?  I'm seeing commits in other meta-layers (ex. meta-quanta) where they're already adapting to the fact that the dbus names are numbered (with zero).  I think we need to make sure we stop the churn here.  Is there any reason to not simply continue using 0 for single-host?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "It was to maintain backward-compatibility with the existing serivce name, so all the applications that use the CurrentHostState property continue working.\n\nIs it expected for the service name to be appended with a number when multiple instances are started?  If this is normal and expected, then we can absorb the cost and find and update all usages.\n\nIf that is the case, is there a better way to handle service names when there can be multiple instances like this?  It doesn't make much sense to me to just update everything looking for \"xyz.openbmc_project.State.Host\" to \"xyz.openbmc_project.State.Host0\".  Shouldn't it also support Host1, etc.?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "> ...then we can absorb the cost and find and update all usages.\n\nMy main immediate concern is that others are already starting to try to compensate for what was changed recently.\n\n> Is it expected for the service name to be appended with a number when multiple instances are started?  If this is normal and expected, then we can absorb the cost and find and update all usages.\n\nYes, this is the expected design.  It is documented in a few places where the multi-host design was described.  I know it has been in state manager for years.\n\n> If that is the case, is there a better way to handle service names when there can be multiple instances like this?  It doesn't make much sense to me to just update everything looking for \"xyz.openbmc_project.State.Host\" to \"xyz.openbmc_project.State.Host0\".  Shouldn't it also support Host1, etc.?\n\nIn general, they shouldn't...  Unless a service is Foo<N> looking for Bar<N>, there really shouldn't be direct service<->service dependencies like this.  It is almost always going to be wrong for multi-host systems.  Look-ups is what mapper is for.\n\nIf you have specific examples we can talk about them in more detail about how to resolve the issues.\n\n---\n\nI would suggest we just eat the cost now and fix them all.  Otherwise I think we're constantly going to be fighting between single-host and multi-host implementations and trying to identify breakages."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "snip ...\n> > If that is the case, is there a better way to handle service names when there can be multiple instances like this?  It doesn't make much sense to me to just update everything looking for \"xyz.openbmc_project.State.Host\" to \"xyz.openbmc_project.State.Host0\".  Shouldn't it also support Host1, etc.?\n> \n> In general, they shouldn't...  Unless a service is Foo<N> looking for Bar<N>, there really shouldn't be direct service<->service dependencies like this.  It is almost always going to be wrong for multi-host systems.  Look-ups is what mapper is for.\n> \n> If you have specific examples we can talk about them in more detail about how to resolve the issues.\n\nNo specific examples.  One service that I know is impacted, is dbus-sensors.  So, in that case, we are safe to update to Host0 and the sensor scanning will always start/stop based on the state of Host0 even in multi-host systems?\n\n> \n> ---\n> \n> I would suggest we just eat the cost now and fix them all.  Otherwise I think we're constantly going to be fighting between single-host and multi-host implementations and trying to identify breakages.\n\nSounds good.  Do we need a mailing list announcement of this change and impact?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "> One service that I know is impacted, is dbus-sensors.  So, in that case, we are safe to update to Host0 and the sensor scanning will always start/stop based on the state of Host0 even in multi-host systems?\n\nThat sounds wrong on the surface?  Multi-host systems purposefully start counting at 1 so that we easily identify these kinds of wrong-depend-on-0.  Do we need a target or a mapper-wait instead?\n\n> Do we need a mailing list announcement of this change and impact?\n\nYeah, we probably should now that we recognize it wasn't as easy as expected from the previous code changes...  Do you or Naveen want to take ownership of that?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "> > One service that I know is impacted, is dbus-sensors.  So, in that case, we are safe to update to Host0 and the sensor scanning will always start/stop based on the state of Host0 even in multi-host systems?\n> \n> That sounds wrong on the surface?  Multi-host systems purposefully start counting at 1 so that we easily identify these kinds of wrong-depend-on-0.  Do we need a target or a mapper-wait instead?\n\nI don't know.  We currently only have single-host systems, so haven't needed to investigate the right approach for these.  This is where I was thinking backwards-compatibility may be nice while we work out the right way to update all of the dependent applications.\n\nIs there any way to have this be backward and forward compatible so existing applications that use Host will still work, while newly updated applications can use Host0, Host1, etc. as needed?\n\n> \n> > Do we need a mailing list announcement of this change and impact?\n> \n> Yeah, we probably should now that we recognize it wasn't as easy as expected from the previous code changes...  Do you or Naveen want to take ownership of that?\n\nNaveen, would you be willing to start that thread?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "> Is there any way to have this be backward and forward compatible so existing applications that use Host will still work, while newly updated applications can use Host0, Host1, etc. as needed?\n\nYou could potentially claim both service names (ex. Host and Host0), but that doesn't really fix the multi-host systems.  Anytime we have someone depending directly on a \"Host\" service name and not \"Host<N>\" it's probably doing the wrong thing on multi-host.  I'm not sure which of the Host<N>'s you'd want to have claim the non-numbered entity... maybe none and just use that to find the bugs?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "Since the single-host is in use and multi-host is new, it seems better to keep the single-hosts working with either Host or Host0. \n Then multi-host can break on neither of those existing, and we can work through each application to fix it for multi-host.\n\nWill that let us take the time needed to properly work through multi-host issues without impacting the single-host systems?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I think you're suggesting going with the \"claim both names\" approach on single host?  I'm fine with whichever approach you want to go down, but I think we need to start ripping off the bandaid.  I don't think it is good to go backwards to \"Host\"-only on any systems."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "I was thinking in that direction only because it sounded like we weren't sure that broadly changing all \"Host\" accesses to \"Host0\" is the right thing to do.\n\nBasically, all single-host x86 systems are now broken, so I'm looking for the best quick fix.  If we are safe to fix single-host systems by broadly updating all \"Host\" to \"Host0\", then I'm okay to rip off the bandaid with that for single-host, and move forward from there for multi-host as needed."
                },
                {
                    "file": "power-control-x86/service_files/xyz.openbmc_project.Chassis.Control.Power.service",
                    "line": 13,
                    "reviewer": {
                        "name": "Jonathan Doman",
                        "email": "jonathan.doman@intel.com",
                        "username": "jonathan-doman"
                    },
                    "message": "No newline at end of revision file."
                },
                {
                    "file": "power-control-x86/src/power_control.cpp",
                    "line": 3117,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "@Jason,\n\nI looked for all of these strings in the code base and I'm seeing fairly minimal impact of keeping the node appended on here.  I assume we can ignore anything in phosphor-state-manager.\n\n```\n./phosphor-buttons/service_files/phosphor-button-handler.service:Wants=xyz.openbmc_project.Chassis.Buttons.service\n./phosphor-buttons/service_files/phosphor-button-handler.service:After=xyz.openbmc_project.Chassis.Buttons.service\n./phosphor-buttons/service_files/xyz.openbmc_project.Chassis.Buttons.service:BusName=xyz.openbmc_project.Chassis.Buttons\n```\n\nThere are a bunch of examples in the openbmc/openbmc repository though of services and scripts that poke at these services.  Should we just send out the email and let people fix their systems?"
                },
                {
                    "file": "power-control-x86/src/power_control.cpp",
                    "line": 3117,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "I hadn't even thought about this impacting service files \ud83d\ude1e.  I don't think I personally use phosphor-buttons, so that may impact phosphor-state-manager.  That brings up a question of if this will make the services provided by x86-power-control diverge from those provided by phosphor-state-manager as that could impact common code.\n\nI'm okay telling everyone to fix their systems, but do we know what the right fix is, yet?\n\n1. All calls to any of these services need to be updated with node 0 as a starting point?\n2. All services that depend on these services need to be updated with the new service name?\n\nIs there more?\n\n@Naveen, can we start the email thread on this to discuss the changes and impact with the community?\n\nShould we consider reverting all these changes until we can get a better idea of the overall architecture and changes needed across all applications?"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "power-control-x86/CMakeLists.txt",
                    "type": "MODIFIED",
                    "insertions": 16,
                    "deletions": -1
                },
                {
                    "file": "power-control-x86/service_files/xyz.openbmc_project.Chassis.Control.Power.service",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "power-control-x86/src/power_control.cpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": -12
                }
            ],
            "sizeInsertions": 43,
            "sizeDeletions": 13
        },
        {
            "number": 7,
            "revision": "6f7fc295c3228d3e1ec0694087c5c22a7cde60b6",
            "parents": [
                "2a26943210a7b26525638bb9dacfd2868c7cdad7"
            ],
            "ref": "refs/changes/04/45004/7",
            "uploader": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "createdOn": 1627912588,
            "author": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "power-control-x86/CMakeLists.txt",
                    "line": 57,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Seems like you could revert this change. \ud83d\ude09"
                },
                {
                    "file": "power-control-x86/CMakeLists.txt",
                    "line": 57,
                    "reviewer": {
                        "name": "Naveen Moses ",
                        "email": "naveen.mosess@hcl.com",
                        "username": "naveenmosess"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "power-control-x86/CMakeLists.txt",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "power-control-x86/src/power_control.cpp",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": -6
                }
            ],
            "sizeInsertions": 24,
            "sizeDeletions": 6
        },
        {
            "number": 8,
            "revision": "c22ddc0da18f4168149573d6c3c1f2db79a822b9",
            "parents": [
                "2a26943210a7b26525638bb9dacfd2868c7cdad7"
            ],
            "ref": "refs/changes/04/45004/8",
            "uploader": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "createdOn": 1627979241,
            "author": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "power-control-x86/src/power_control.cpp",
                    "line": 3111,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "typo: without"
                },
                {
                    "file": "power-control-x86/src/power_control.cpp",
                    "line": 3111,
                    "reviewer": {
                        "name": "Naveen Moses ",
                        "email": "naveen.mosess@hcl.com",
                        "username": "naveenmosess"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "power-control-x86/src/power_control.cpp",
                    "type": "MODIFIED",
                    "insertions": 20,
                    "deletions": -5
                }
            ],
            "sizeInsertions": 20,
            "sizeDeletions": 5
        },
        {
            "number": 9,
            "revision": "ec972d8b56fe84f8aa6d18f63e64e3fb0e7a9eaf",
            "parents": [
                "2a26943210a7b26525638bb9dacfd2868c7cdad7"
            ],
            "ref": "refs/changes/04/45004/9",
            "uploader": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "createdOn": 1628263164,
            "author": {
                "name": "Naveen Moses ",
                "email": "naveen.mosess@hcl.com",
                "username": "naveenmosess"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "power-control-x86/src/power_control.cpp",
                    "type": "MODIFIED",
                    "insertions": 20,
                    "deletions": -5
                }
            ],
            "sizeInsertions": 20,
            "sizeDeletions": 5
        }
    ]
}