{
    "project": "openbmc/phosphor-led-manager",
    "branch": "master",
    "id": "Id2b5234009e62e6c003f24a25c726317646b582b",
    "number": 46118,
    "subject": "Handle D-Bus exceptions",
    "owner": {
        "name": "George Liu",
        "email": "liuxiwei@inspur.com",
        "username": "lxwinspur"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-led-manager/+/46118",
    "commitMessage": "Handle D-Bus exceptions\n\nRemove the usage of is_method_error()[1].\n\nAlso, add try-catch to handle D-Bus exceptions around mapper call.\n\n[1]https://github.com/openbmc/sdbusplus/blob/master/include/sdbusplus/bus.hpp#L282-L286\n\nSigned-off-by: George Liu <liuxiwei@inspur.com>\nChange-Id: Id2b5234009e62e6c003f24a25c726317646b582b\n",
    "createdOn": 1629706741,
    "lastUpdated": 1631713295,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1629706741,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1629706752,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1629706834,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/24794/ : SUCCESS"
        },
        {
            "timestamp": 1629711021,
            "reviewer": {
                "name": "Lakshminarayana R Kammath",
                "email": "lkammath@in.ibm.com",
                "username": "lkammath"
            },
            "message": "Patch Set 1:\n\n(4 comments)"
        },
        {
            "timestamp": 1629711026,
            "reviewer": {
                "name": "Lakshminarayana R Kammath",
                "email": "lkammath@in.ibm.com",
                "username": "lkammath"
            },
            "message": "Patch Set 1: Code-Review-1"
        },
        {
            "timestamp": 1629711112,
            "reviewer": {
                "name": "Lakshminarayana R Kammath",
                "email": "lkammath@in.ibm.com",
                "username": "lkammath"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1629713738,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1629713748,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 1:\n\n(5 comments)"
        },
        {
            "timestamp": 1629713753,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1629713840,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/24798/ : SUCCESS"
        },
        {
            "timestamp": 1629717870,
            "reviewer": {
                "name": "Vishwanatha Subbanna",
                "email": "vishwa@linux.vnet.ibm.com",
                "username": "vishwabmc"
            },
            "message": "Patch Set 2:\n\n(3 comments)"
        },
        {
            "timestamp": 1629733235,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2:\n\n(1 comment)\n\nI don't have an opinion on this commit."
        },
        {
            "timestamp": 1629771756,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 3: Commit message was updated."
        },
        {
            "timestamp": 1629772129,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 3:\n\n(3 comments)"
        },
        {
            "timestamp": 1629782211,
            "reviewer": {
                "name": "Lakshminarayana R Kammath",
                "email": "lkammath@in.ibm.com",
                "username": "lkammath"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1631190995,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1631191016,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1631191042,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/26001/ : FAILURE"
        },
        {
            "timestamp": 1631191821,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1631191834,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1631191913,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/26005/ : SUCCESS"
        },
        {
            "timestamp": 1631535462,
            "reviewer": {
                "name": "Lakshminarayana R Kammath",
                "email": "lkammath@in.ibm.com",
                "username": "lkammath"
            },
            "message": "Patch Set 5: Code-Review+1"
        },
        {
            "timestamp": 1631684313,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 6: Patch Set 5 was rebased."
        },
        {
            "timestamp": 1631684326,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1631684553,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/26323/ : SUCCESS"
        },
        {
            "timestamp": 1631713264,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 6: Code-Review+2"
        },
        {
            "timestamp": 1631713295,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Change has been successfully rebased and submitted as d78de14df5a9ee6babb7f4ef75a1c4b58bf6376c by Patrick Williams"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "87c7923f583b0eaa7b8e583bc63a2bd82a7f2867",
            "parents": [
                "ad73885b724ea826ffc60c23bdbaaab91ee3cb1c"
            ],
            "ref": "refs/changes/18/46118/1",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1629706741,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Lakshminarayana R Kammath",
                        "email": "lkammath@in.ibm.com",
                        "username": "lkammath"
                    },
                    "message": "This commit handles two changes\n\n1) Remove the deprecated is_method_error() method \nRefer:https://github.com/openbmc/sdbusplus/blob/master/include/sdbusplus/bus.hpp#L282-L286\n2) Add try-catch to handle D-Bus exceptions around mapper call"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Ack"
                },
                {
                    "file": "fault-monitor/fru-fault-monitor.cpp",
                    "line": 66,
                    "reviewer": {
                        "name": "Lakshminarayana R Kammath",
                        "email": "lkammath@in.ibm.com",
                        "username": "lkammath"
                    },
                    "message": "Not just response, even mapper call can also fail. So, may be generalise this"
                },
                {
                    "file": "fault-monitor/fru-fault-monitor.cpp",
                    "line": 66,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Ack"
                },
                {
                    "file": "fault-monitor/fru-fault-monitor.cpp",
                    "line": 213,
                    "reviewer": {
                        "name": "Lakshminarayana R Kammath",
                        "email": "lkammath@in.ibm.com",
                        "username": "lkammath"
                    },
                    "message": "same comment as above. Why are we going against earlier approach?"
                },
                {
                    "file": "fault-monitor/fru-fault-monitor.cpp",
                    "line": 213,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "> same comment as above\n\nAck.\n\n> Why are we going against earlier approach?\n\n1. The is_method_error method was deprecated\n2. `call` and `read` can be integrated into a try to make the code concise and clear"
                },
                {
                    "file": "fault-monitor/fru-fault-monitor.cpp",
                    "line": 246,
                    "reviewer": {
                        "name": "Lakshminarayana R Kammath",
                        "email": "lkammath@in.ibm.com",
                        "username": "lkammath"
                    },
                    "message": "same comment as above"
                },
                {
                    "file": "fault-monitor/fru-fault-monitor.cpp",
                    "line": 246,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Ack"
                },
                {
                    "file": "utils.cpp",
                    "line": 29,
                    "reviewer": {
                        "name": "Lakshminarayana R Kammath",
                        "email": "lkammath@in.ibm.com",
                        "username": "lkammath"
                    },
                    "message": "Why no exception handled around this?"
                },
                {
                    "file": "utils.cpp",
                    "line": 29,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Because this is common/utils, it will handled by the caller"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "fault-monitor/fru-fault-monitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": -42
                },
                {
                    "file": "utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -8
                }
            ],
            "sizeInsertions": 8,
            "sizeDeletions": 50
        },
        {
            "number": 2,
            "revision": "7a37291b1239a6a4d3d5812c9455927963148d56",
            "parents": [
                "ad73885b724ea826ffc60c23bdbaaab91ee3cb1c"
            ],
            "ref": "refs/changes/18/46118/2",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1629713738,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Vishwanatha Subbanna",
                        "email": "vishwa@linux.vnet.ibm.com",
                        "username": "vishwabmc"
                    },
                    "message": "Remove the usage of deprecated is_method_error."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I wouldn't even use the word deprecated here, but whatever."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "Ack"
                },
                {
                    "file": "fault-monitor/fru-fault-monitor.cpp",
                    "line": 68,
                    "reviewer": {
                        "name": "Vishwanatha Subbanna",
                        "email": "vishwa@linux.vnet.ibm.com",
                        "username": "vishwabmc"
                    },
                    "message": "what was contained in the REPLY_SIG ?. Is there any equivalent to be logged here ?.."
                },
                {
                    "file": "fault-monitor/fru-fault-monitor.cpp",
                    "line": 68,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "I do not think we need to get the signature of a message. \nIf the call method fails, an exception will be thrown directly, and a valid message will not be obtained."
                },
                {
                    "file": "utils.cpp",
                    "line": 28,
                    "reviewer": {
                        "name": "Vishwanatha Subbanna",
                        "email": "vishwa@linux.vnet.ibm.com",
                        "username": "vishwabmc"
                    },
                    "message": "This is not handling the exceptions ?"
                },
                {
                    "file": "utils.cpp",
                    "line": 28,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@inspur.com",
                        "username": "lxwinspur"
                    },
                    "message": "No.\nRegarding the exceptions thrown by the `call` and `read` methods, the caller needs to catch them.\nanyway, this is the exception of calling the getservice method."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "fault-monitor/fru-fault-monitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -43
                },
                {
                    "file": "utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -8
                }
            ],
            "sizeInsertions": 11,
            "sizeDeletions": 51
        },
        {
            "number": 3,
            "revision": "cdcccefb1ac62f3fe81738e5e82788536d19204c",
            "parents": [
                "ad73885b724ea826ffc60c23bdbaaab91ee3cb1c"
            ],
            "ref": "refs/changes/18/46118/3",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1629771756,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "fault-monitor/fru-fault-monitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -43
                },
                {
                    "file": "utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -8
                }
            ],
            "sizeInsertions": 11,
            "sizeDeletions": 51
        },
        {
            "number": 4,
            "revision": "14513b93b9b0545975f03405b92cb963674a6171",
            "parents": [
                "7152edcff6b44cd3b32ced057c1fd2e6ac6402e9"
            ],
            "ref": "refs/changes/18/46118/4",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1631190995,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "fault-monitor/fru-fault-monitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": -35
                },
                {
                    "file": "utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -8
                }
            ],
            "sizeInsertions": 14,
            "sizeDeletions": 43
        },
        {
            "number": 5,
            "revision": "36a4979001b474b43b1cdd27827b14bc1537650c",
            "parents": [
                "7152edcff6b44cd3b32ced057c1fd2e6ac6402e9"
            ],
            "ref": "refs/changes/18/46118/5",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1631191821,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "fault-monitor/fru-fault-monitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -36
                },
                {
                    "file": "utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -8
                }
            ],
            "sizeInsertions": 9,
            "sizeDeletions": 44
        },
        {
            "number": 6,
            "revision": "26e3035308e0f1e4232ee67b967e03a988b9e538",
            "parents": [
                "d870d68a21066c747b9d574507a9e5109bd35502"
            ],
            "ref": "refs/changes/18/46118/6",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "createdOn": 1631684313,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "fault-monitor/fru-fault-monitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -36
                },
                {
                    "file": "utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -8
                }
            ],
            "sizeInsertions": 9,
            "sizeDeletions": 44
        },
        {
            "number": 7,
            "revision": "d78de14df5a9ee6babb7f4ef75a1c4b58bf6376c",
            "parents": [
                "ec07b9f82bdcbec5e78602f0eb4ab13da26c4b48"
            ],
            "ref": "refs/changes/18/46118/7",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1631713295,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@inspur.com",
                "username": "lxwinspur"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "fault-monitor/fru-fault-monitor.cpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -36
                },
                {
                    "file": "utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -8
                }
            ],
            "sizeInsertions": 9,
            "sizeDeletions": 44
        }
    ]
}