{
    "project": "openbmc/docs",
    "branch": "master",
    "id": "I9ce674d7637d573ef1169740a3971acea6413e12",
    "number": 47662,
    "subject": "device-tree-gpio-naming: Add host ready pins",
    "owner": {
        "email": "thuutran@amperecomputing.com",
        "username": "thangtran-ampere"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/docs/+/47662",
    "commitMessage": "device-tree-gpio-naming: Add host ready pins\n\nAdd pins to detect the status of HOSTs is ready or not.\nCurrent OpenBmc support to detect Host ready via IPMI and PLDM.\nHowever, not all of platforms support IPMI and PLDM. Some\nplatforms, like Ampere Mt.Jade checks input GPIO to detect host\nfirmware boot status.\nThe name of HOST ready pin has to include the index of host and\nthe polarity (Active high or low).\n\nSigned-off-by: Thang Tran <thuutran@amperecomputing.com>\nChange-Id: I9ce674d7637d573ef1169740a3971acea6413e12\n",
    "createdOn": 1633657435,
    "lastUpdated": 1639149462,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1633657435,
            "reviewer": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1633657694,
            "reviewer": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Patch Set 1:\n\nHi all,\n\nI added definition for Host status pins to support checking Host status via GPIO pins.\nPlease help me review this patch.\n\nThank,\nThang Tran"
        },
        {
            "timestamp": 1633957373,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Patch Set 1:\n\n(3 comments)"
        },
        {
            "timestamp": 1633961107,
            "reviewer": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Uploaded patch set 2: Commit message was updated."
        },
        {
            "timestamp": 1633961715,
            "reviewer": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Patch Set 2:\n\n(3 comments)"
        },
        {
            "timestamp": 1633964086,
            "reviewer": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1634054390,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1634566024,
            "reviewer": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1634571453,
            "reviewer": {
                "name": "Milton D. Miller II",
                "email": "miltonm@us.ibm.com",
                "username": "mdmillerii"
            },
            "message": "Patch Set 3:\n\n(4 comments)"
        },
        {
            "timestamp": 1634610513,
            "reviewer": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Patch Set 3:\n\n(3 comments)"
        },
        {
            "timestamp": 1634661036,
            "reviewer": {
                "name": "Milton D. Miller II",
                "email": "miltonm@us.ibm.com",
                "username": "mdmillerii"
            },
            "message": "Patch Set 3:\n\n(1 comment)\n\nCan you point out the thread for upstream discussion as requested (added to patch series 1)?"
        },
        {
            "timestamp": 1634695855,
            "reviewer": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Patch Set 3:\n\n(1 comment)\n\n> Patch Set 3:\n> \n> (1 comment)\n> \n> Can you point out the thread for upstream discussion as requested (added to patch series 1)?"
        },
        {
            "timestamp": 1634710620,
            "reviewer": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1634781801,
            "reviewer": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1634786769,
            "reviewer": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1634788225,
            "reviewer": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1636814091,
            "reviewer": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Patch Set 4:\n\nHi all, Do you have any comments for this commit?"
        },
        {
            "timestamp": 1637188349,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Patch Set 4: Code-Review+1\n\nI think commit needs a rebase. There were some changes to put things in alphabetical order. Otherwise, I don't have any better ideas."
        },
        {
            "timestamp": 1637312123,
            "reviewer": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Uploaded patch set 5: Patch Set 4 was rebased."
        },
        {
            "timestamp": 1638799424,
            "reviewer": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Patch Set 5:\n\nHi all. Can you help me to approve this request?"
        },
        {
            "timestamp": 1638806257,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 5:\n\n(1 comment)\n\nAdding Andrew Jeffery and Joel since they've asked to be on review of each gpio naming change.\n\n> Patch Set 5:\n> \n> Hi all. Can you help me to approve this request?\n\nThang, I believe Andrew G asked you to rebase and put this into alphabetical order per the changes other have been making.  This means your new \"Host...\" section should be just before \"LED...\"."
        },
        {
            "timestamp": 1638844430,
            "reviewer": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Uploaded patch set 6."
        },
        {
            "timestamp": 1638844578,
            "reviewer": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Patch Set 6:\n\n> Patch Set 5:\n> \n> (1 comment)\n> \n> Adding Andrew Jeffery and Joel since they've asked to be on review of each gpio naming change.\n> \n> > Patch Set 5:\n> > \n> > Hi all. Can you help me to approve this request?\n> \n> Thang, I believe Andrew G asked you to rebase and put this into alphabetical order per the changes other have been making.  This means your new \"Host...\" section should be just before \"LED...\".\n\nThank you for your comments, I re-ordered the \"Host ...\" to before \"LED ...\""
        },
        {
            "timestamp": 1638844827,
            "reviewer": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1638902729,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 6: Code-Review+1"
        },
        {
            "timestamp": 1638909291,
            "reviewer": {
                "name": "Milton D. Miller II",
                "email": "miltonm@us.ibm.com",
                "username": "mdmillerii"
            },
            "message": "Patch Set 6: Code-Review+1\n\nI'll take the suggested -n suffix."
        },
        {
            "timestamp": 1638909888,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Patch Set 6: Code-Review+1"
        },
        {
            "timestamp": 1639136235,
            "reviewer": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "message": "Patch Set 6:\n\nHi Patrick, Can you approve this commit? It seems that no more comments."
        },
        {
            "timestamp": 1639149459,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 6: Verified+1 Code-Review+2"
        },
        {
            "timestamp": 1639149462,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Change has been successfully rebased and submitted as b2ac767d8383b857779c483619f7ab258cf54c01 by Patrick Williams"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "916b5daba688cc9b6ab7606d7bc0a037282bec50",
            "parents": [
                "7e1776ee0fa3db5bcffcd3fb68c7b546f5d2beec"
            ],
            "ref": "refs/changes/62/47662/1",
            "uploader": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "createdOn": 1633657435,
            "author": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "geissonator@yahoo.com",
                        "username": "geissonator"
                    },
                    "message": "typo"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "email": "thuutran@amperecomputing.com",
                        "username": "thangtran-ampere"
                    },
                    "message": "I updated it to PLDM"
                },
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "line": 141,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "geissonator@yahoo.com",
                        "username": "geissonator"
                    },
                    "message": "Lets move these up above line 118 and keep the \"Special\" stuff at the bottom of the list."
                },
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "line": 141,
                    "reviewer": {
                        "email": "thuutran@amperecomputing.com",
                        "username": "thangtran-ampere"
                    },
                    "message": "Moved 'Host Status' to line 118"
                },
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "line": 145,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "geissonator@yahoo.com",
                        "username": "geissonator"
                    },
                    "message": "I thought we could use the device tree to abstract this? i.e. set them as active high or low in the device tree and then userspace just reads if they are \"active\"?"
                },
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "line": 145,
                    "reviewer": {
                        "email": "thuutran@amperecomputing.com",
                        "username": "thangtran-ampere"
                    },
                    "message": "I tried to configure the active state of GPIO pin in .dts file. In this case, when I check by gpioinfo then the status of this GPIO pin is [used]. Therefore application can not read the status of GPIO pin. It seems that the kernel did not release this GPIO pin."
                },
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "line": 145,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "geissonator@yahoo.com",
                        "username": "geissonator"
                    },
                    "message": "That's unfortunate. Lets see if someone else with more DTS experience has any thoughts. Otherwise it seems we'll have to encode the active state in the name as you have here."
                },
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "line": 145,
                    "reviewer": {
                        "email": "thuutran@amperecomputing.com",
                        "username": "thangtran-ampere"
                    },
                    "message": "I tried to ask community, but it seems that we can not configure the polarity in the device tree. I think we have to detect the polarity of gpio pins based on their name."
                },
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "line": 145,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "Can you point to the discussion thread?  It seems to be a major omission (but upstream views user space usage as not recommmended)."
                },
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "line": 145,
                    "reviewer": {
                        "email": "thuutran@amperecomputing.com",
                        "username": "thangtran-ampere"
                    },
                    "message": "Sorry, I miss this comment. You can find out my question at Discord https://discord.com/channels/775381525260664832/775381525260664836/898385900587859998"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 13,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "dead876dfb5e74882087344082d254f0e6dd3d60",
            "parents": [
                "7e1776ee0fa3db5bcffcd3fb68c7b546f5d2beec"
            ],
            "ref": "refs/changes/62/47662/2",
            "uploader": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "createdOn": 1633961107,
            "author": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 13,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "3792b4bff463538b9ecbcda65afca72e2ff4de9d",
            "parents": [
                "7e1776ee0fa3db5bcffcd3fb68c7b546f5d2beec"
            ],
            "ref": "refs/changes/62/47662/3",
            "uploader": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "createdOn": 1633964086,
            "author": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "line": 123,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "What does status mean?  I thought at first this was going to be an enum and multiple bits (eg firmware, running, quiesced).  Can we call it host running?  host booted?  host started?"
                },
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "line": 123,
                    "reviewer": {
                        "email": "thuutran@amperecomputing.com",
                        "username": "thangtran-ampere"
                    },
                    "message": "I agree with you that the 'status' is not clear meaning. Those pins are used to indicate the Hosts are ready or not. Therefore, what do you think about host*-ready?"
                },
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "line": 124,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "Can we use -b for bar (the over-rule bar on data sheets) for active low?  \nThe lowercase l can be confused with the digit 1\n and different fonts l 1"
                },
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "line": 124,
                    "reviewer": {
                        "email": "thuutran@amperecomputing.com",
                        "username": "thangtran-ampere"
                    },
                    "message": "If we use '-l', it is easy to think about \"active low\". But for '-b', I think it does not relate to \"active low\" state."
                },
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "line": 124,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "then lets use a few more characters and spell out low.   The gpio uapi (user to kernel interface) supports 32 characters for the label (probably including a trailing NUL).  This is only about half of that."
                },
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "line": 124,
                    "reviewer": {
                        "email": "thuutran@amperecomputing.com",
                        "username": "thangtran-ampere"
                    },
                    "message": "I will replace '-l' with '-low'. What do you think about that?"
                },
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "line": 124,
                    "reviewer": {
                        "name": "Zev Weiss",
                        "email": "zev@bewilderbeest.net",
                        "username": "zevweiss"
                    },
                    "message": "For what my two cents are worth, I often see `_N` (perhaps `-n` for this case) used to indicate active-low signals in contexts where the overline bar isn't an option; IMO it's reasonable mix of being fairly intuitive (n for \"negated\" or the like) and concise while also unlikely to be visually confused with another character."
                },
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "line": 124,
                    "reviewer": {
                        "email": "thuutran@amperecomputing.com",
                        "username": "thangtran-ampere"
                    },
                    "message": "Thank you for your suggestion Zev. I shall update the name of GPIO pins to host*-ready-n in case this pin actives in Low state."
                },
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "line": 126,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "miltonm@us.ibm.com",
                        "username": "mdmillerii"
                    },
                    "message": "These seems to be concrete examples vs specific uses? Do you have a system with these?"
                },
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "line": 126,
                    "reviewer": {
                        "email": "thuutran@amperecomputing.com",
                        "username": "thangtran-ampere"
                    },
                    "message": "Currently, we do not have any examples for this one. I am developing a new module to support this feature based on the Ampere Mt.Jade platform."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 13,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "309c21874e2d9f6f19816c0019afebf042821bb3",
            "parents": [
                "7e1776ee0fa3db5bcffcd3fb68c7b546f5d2beec"
            ],
            "ref": "refs/changes/62/47662/4",
            "uploader": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "createdOn": 1634788225,
            "author": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 13,
            "sizeDeletions": 0
        },
        {
            "number": 5,
            "revision": "2cf2cc9c507ff620ca773656e4377c961036f0ee",
            "parents": [
                "c85e4df93dc0f93d41882fd75441263ccdda19ac"
            ],
            "ref": "refs/changes/62/47662/5",
            "uploader": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "createdOn": 1637312123,
            "author": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "line": 131,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Can't active high vs active low be encoded in the device tree itself?"
                },
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "line": 131,
                    "reviewer": {
                        "email": "thuutran@amperecomputing.com",
                        "username": "thangtran-ampere"
                    },
                    "message": "Yes, it can't. I tried to set the active state in the device tree, but it is fail (the kernel will take the control of this GPIO pin, application in the user space can not access). I asked the community about this problem, you can see in this one https://discord.com/channels/775381525260664832/775381525260664836/898385900587859998"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 13,
            "sizeDeletions": 0
        },
        {
            "number": 6,
            "revision": "ea4a09b90816749ca94f9b58e66dc9ceae43421c",
            "parents": [
                "c85e4df93dc0f93d41882fd75441263ccdda19ac"
            ],
            "ref": "refs/changes/62/47662/6",
            "uploader": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "createdOn": 1638844430,
            "author": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 13,
            "sizeDeletions": 0
        },
        {
            "number": 7,
            "revision": "b2ac767d8383b857779c483619f7ab258cf54c01",
            "parents": [
                "8e677cf7e82bc9a50df13992cf5ba730bfaf3a67"
            ],
            "ref": "refs/changes/62/47662/7",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1639149462,
            "author": {
                "email": "thuutran@amperecomputing.com",
                "username": "thangtran-ampere"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "designs/device-tree-gpio-naming.md",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 13,
            "sizeDeletions": 0
        }
    ]
}