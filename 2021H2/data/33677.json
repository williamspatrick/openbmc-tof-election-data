{
    "project": "openbmc/phosphor-certificate-manager",
    "branch": "master",
    "id": "I4d53ce69ca194e0eef94d4caf5d22063d689ffd8",
    "number": 33677,
    "subject": "Enable meson for certificate manager",
    "owner": {
        "name": "Ratan Gupta",
        "email": "ratankgupta31@gmail.com",
        "username": "ratagupt"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-certificate-manager/+/33677",
    "commitMessage": "Enable meson for certificate manager\n\nFew observations:\n\nautotools\n========\ntime sh -c './bootstrap.sh;./configure ${CONFIGURE_FLAGS} --prefix=/usr --enable-oe-sdk;make;make check'\nreal\t1m17.561s\n\nMeson\n=====\ntime sh -c 'mkdir build ; meson build -Doe-sdk=enabled -Dtests=enabled ; ninja -C build test'\nreal\t0m10.622s\n\nTested By:\n- Code compiles both in arm & x86 sdks without errors or warnings.\n\nSigned-off-by: Ratan Gupta <ratagupt@linux.vnet.ibm.com>\nChange-Id: I4d53ce69ca194e0eef94d4caf5d22063d689ffd8\n",
    "createdOn": 1592297475,
    "lastUpdated": 1639387132,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1592297475,
            "reviewer": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1592297551,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1592299766,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Patch Set 1:\n\n(11 comments)"
        },
        {
            "timestamp": 1592312125,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 1:\n\nBuild Started https://openpower.xyz/job/openbmc-repository-ci/51940/"
        },
        {
            "timestamp": 1592312161,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://openpower.xyz/job/openbmc-repository-ci/51940/ : FAILURE"
        },
        {
            "timestamp": 1592317376,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\n(3 comments)"
        },
        {
            "timestamp": 1592369622,
            "reviewer": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "message": "Patch Set 1:\n\n(5 comments)"
        },
        {
            "timestamp": 1592369995,
            "reviewer": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "message": "Patch Set 1:\n\n(5 comments)"
        },
        {
            "timestamp": 1592371393,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1592371603,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1592376280,
            "reviewer": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "message": "Patch Set 1:\n\n(5 comments)"
        },
        {
            "timestamp": 1592379698,
            "reviewer": {
                "name": "MARRI DEVENDER RAO",
                "email": "devenrao@in.ibm.com",
                "username": "devenrao"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1592429544,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1592454083,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 1:\n\n(2 comments)\n\nRatan,\nThanks for initiating this migration.\n\nLooks like minor changes required in recipe side to enable meson build."
        },
        {
            "timestamp": 1592503936,
            "reviewer": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1597991457,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 1:\n\nRatan,\nAre you planing to push new patchset ?"
        },
        {
            "timestamp": 1604978458,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 1: Ok-To-Test+1"
        },
        {
            "timestamp": 1604978477,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/7562/ : FAILURE"
        },
        {
            "timestamp": 1607006533,
            "reviewer": {
                "name": "MARRI DEVENDER RAO",
                "email": "devenrao@in.ibm.com",
                "username": "devenrao"
            },
            "message": "Patch Set 1:\n\nstill working on it @ratan"
        },
        {
            "timestamp": 1613439972,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Removed reviewer ManojKiran Eda."
        },
        {
            "timestamp": 1625582144,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 1:\n\nRatan , Are you still looking on this?"
        },
        {
            "timestamp": 1637677289,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 1:\n\nRatan,\nAre you planing to work on this , if not please let us know."
        },
        {
            "timestamp": 1637832689,
            "reviewer": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "message": "Patch Set 1:\n\nJayanth, You can take over this commit, I am busy in other work and can not prioritize this one"
        },
        {
            "timestamp": 1638569426,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\nI forgot this was a WIP and have done the work here:\n\nhttps://gerrit.openbmc-project.xyz/c/openbmc/phosphor-certificate-manager/+/49329"
        },
        {
            "timestamp": 1639377504,
            "reviewer": {
                "name": "MARRI DEVENDER RAO",
                "email": "devenrao@in.ibm.com",
                "username": "devenrao"
            },
            "message": "Patch Set 1:\n\nyou can abandon this as patrick has already done it."
        },
        {
            "timestamp": 1639377509,
            "reviewer": {
                "name": "MARRI DEVENDER RAO",
                "email": "devenrao@in.ibm.com",
                "username": "devenrao"
            },
            "message": "Removed reviewer MARRI DEVENDER RAO."
        },
        {
            "timestamp": 1639387117,
            "reviewer": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "message": "Abandoned\n\nThis is being implemented with this commit"
        },
        {
            "timestamp": 1639387132,
            "reviewer": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "message": "Patch Set 1:\n\nhttps://gerrit.openbmc-project.xyz/c/openbmc/phosphor-certificate-manager/+/49329"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "35e8bd7747d5dd8d3c8ac892da9cb544f884c2a0",
            "parents": [
                "700efe9f624849016d7bed5cdb79aa8f85393829"
            ],
            "ref": "refs/changes/77/33677/1",
            "uploader": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "createdOn": 1592297475,
            "author": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "meson.build",
                    "line": 1,
                    "reviewer": {
                        "name": "MARRI DEVENDER RAO",
                        "email": "devenrao@in.ibm.com",
                        "username": "devenrao"
                    },
                    "message": "we need to add code coverage too as lakshmi has added suppor for auto-tools"
                },
                {
                    "file": "meson.build",
                    "line": 1,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Code coverage is built into meson.  Nothing special needed."
                },
                {
                    "file": "meson.build",
                    "line": 1,
                    "reviewer": {
                        "name": "Jayanth Othayoth",
                        "email": "ojayanth@gmail.com",
                        "username": "ojayanth"
                    },
                    "message": "lcov configuration file  (lcovrc) is also not required?"
                },
                {
                    "file": "meson.build",
                    "line": 1,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "No Jaynath,"
                },
                {
                    "file": "meson.build",
                    "line": 7,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "Can we enforce the below ones as well ?\n1. buildtype -  debugoptimized\n2. enabled the link time optimization (b_lto=true)"
                },
                {
                    "file": "meson.build",
                    "line": 7,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "Done"
                },
                {
                    "file": "meson.build",
                    "line": 37,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "can be removed ?"
                },
                {
                    "file": "meson.build",
                    "line": 37,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "need to make the changes in the code to shift from the experimental to the builtin filesystem library."
                },
                {
                    "file": "meson.build",
                    "line": 62,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "are these not already covered in werror=true ? suggest to verify once and make sure we don't add flags more than once."
                },
                {
                    "file": "meson.build",
                    "line": 62,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "In the documentation it is not mentioned that werror= true covers this? Can you get me the one?\nhttps://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html"
                },
                {
                    "file": "meson.build",
                    "line": 62,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "ratan,sorry..i think i should have written it properly..\n\nwhat i meant was , when werror=true was set as default project option, all the warnings(including pendantic & missing-field-intializers) will be treated as errors.\n\nSo, by adding -Wno-pedantic, and -Wno-missing-field-initializers, we are in-fact neutralizing those errors to be again treated as harmless warnings.\n\nI don't see those warnings being suppressed in autotools either, my only suggestion was that, those are pretty decent warnings ,and we should be fixing them in the code rather than suppressing them.\n\nThis is purely my understanding, please correct me if i am wrong."
                },
                {
                    "file": "meson.build",
                    "line": 62,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "Yes that makes sense manoj, we shouldn't suppress this"
                },
                {
                    "file": "meson.build",
                    "line": 63,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "You certainly shouldn't be adding flags like this on your own.  Meson has it handled."
                },
                {
                    "file": "meson.build",
                    "line": 69,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "This is not required any more with c++17, unless we are using experimental::filesystem ? can we check and remove ?"
                },
                {
                    "file": "meson.build",
                    "line": 69,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "Not with this commit, we can have other commit for the one."
                },
                {
                    "file": "meson.build",
                    "line": 77,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "redundant ?\ncan it be :\n> conf_data.set_quoted('BUSNAME',get_option('BUSNAME'))\n\nand the ones below ?"
                },
                {
                    "file": "meson.build",
                    "line": 77,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "Done"
                },
                {
                    "file": "meson_options.txt",
                    "line": 5,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "default value should be enabled right ?"
                },
                {
                    "file": "meson_options.txt",
                    "line": 5,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "Done"
                },
                {
                    "file": "meson_options.txt",
                    "line": 37,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "typo ?"
                },
                {
                    "file": "meson_options.txt",
                    "line": 37,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "https://github.com/openbmc/phosphor-certificate-manager/blob/master/configure.ac#L160.It is same as configure.ac"
                },
                {
                    "file": "meson_options.txt",
                    "line": 41,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "better to mention the min, and max value here ?"
                },
                {
                    "file": "meson_options.txt",
                    "line": 41,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "Let the maintainer takes a decision on this, currently it is as like as autotools."
                },
                {
                    "file": "meson_options.txt",
                    "line": 41,
                    "reviewer": {
                        "name": "Jayanth Othayoth",
                        "email": "ojayanth@gmail.com",
                        "username": "ojayanth"
                    },
                    "message": "Current implementation requires only max value."
                },
                {
                    "file": "test/meson.build",
                    "line": 4,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "I dont see any header files in the test folder , do we need this ?"
                },
                {
                    "file": "test/meson.build",
                    "line": 4,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "Done"
                },
                {
                    "file": "test/meson.build",
                    "line": 27,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "probably a better name for test() , as well as the executable ?"
                },
                {
                    "file": "test/meson.build",
                    "line": 27,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I would suggest a for loop here to create multiple tests rather than one big test.  I know right now you only have a single C++ part, so you're going to end up with a single test anyhow.\n\nSee sdbusplus's meson.build for an example if you need."
                },
                {
                    "file": "test/meson.build",
                    "line": 27,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "I thought for the same, but as you explained that there is only one single test file, hence didn't do, later on when we have the multiple test files we can have for loop."
                },
                {
                    "file": "test/meson.build",
                    "line": 27,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "Done"
                },
                {
                    "file": "test/meson.build",
                    "line": 29,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I saw you created a static-library that you link into both the test cases and the executable.  This pattern isn't strictly required with meson.  You can instead include the original \"list-of-sources\" variable into the sources list here and meson will do the right thing.  There isn't necessarily any build improvement to making a static-library first."
                },
                {
                    "file": "test/meson.build",
                    "line": 29,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "Done"
                },
                {
                    "file": "test/meson.build",
                    "line": 38,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "is the timeout required to be 40seconds here ? we can use the default value right ?\nand why is is_parallel :false ?"
                },
                {
                    "file": "test/meson.build",
                    "line": 38,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "> is_parallel :false\nAs there is only single file which results to single binary, hence no parallel test.\n\n> is the timeout required to be 40seconds here ? we can use the default value right ?\nwill try it"
                },
                {
                    "file": "test/meson.build",
                    "line": 38,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "i would suggest not giving is_parallel even when it is a single binary , and let meson use its default value."
                },
                {
                    "file": "test/meson.build",
                    "line": 38,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "I am not sure what is the default value, it is not documented, so explicitly making it false.\nhttps://mesonbuild.com/Reference-manual.html#functions"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "ADDED",
                    "insertions": 125,
                    "deletions": 0
                },
                {
                    "file": "meson_options.txt",
                    "type": "ADDED",
                    "insertions": 42,
                    "deletions": 0
                },
                {
                    "file": "test/meson.build",
                    "type": "ADDED",
                    "insertions": 38,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 205,
            "sizeDeletions": 0
        }
    ]
}