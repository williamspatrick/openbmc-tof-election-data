{
    "project": "openbmc/phosphor-host-ipmid",
    "branch": "master",
    "topic": "ipmi-sensor-cache",
    "id": "Icc33185b93cf21462584b3817b7c522e24b70baf",
    "number": 47939,
    "subject": "sensor-cache: Read sensor data when there is no cache",
    "owner": {
        "name": "Lei YU",
        "email": "yulei.sh@bytedance.com",
        "username": "mine260309"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-host-ipmid/+/47939",
    "commitMessage": "sensor-cache: Read sensor data when there is no cache\n\nWhen IPMI starts and the sensor has no match callback, the sensor cache\nis empty. Read the sensor data in such case and cache it.\n\nTested: Verify the sensor list works as expected, the first sensor\n        list takes longer time, and the following sensor list takes less\n        time because of the cache.\n\nSigned-off-by: Lei YU <yulei.sh@bytedance.com>\nChange-Id: Icc33185b93cf21462584b3817b7c522e24b70baf\n",
    "createdOn": 1634609799,
    "lastUpdated": 1641368706,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1634609799,
            "reviewer": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1634609834,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1634609997,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/28494/ : SUCCESS"
        },
        {
            "timestamp": 1635832583,
            "reviewer": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "message": "Uploaded patch set 2: Patch Set 1 was rebased."
        },
        {
            "timestamp": 1635832618,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1635832802,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/29485/ : SUCCESS"
        },
        {
            "timestamp": 1635896854,
            "reviewer": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1635908588,
            "reviewer": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "message": "Uploaded patch set 3: Patch Set 2 was rebased."
        },
        {
            "timestamp": 1635908624,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1635908897,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/29601/ : SUCCESS"
        },
        {
            "timestamp": 1636450825,
            "reviewer": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1636507321,
            "reviewer": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1638867511,
            "reviewer": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "message": "Uploaded patch set 4: Patch Set 3 was rebased."
        },
        {
            "timestamp": 1638867545,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1638867620,
            "reviewer": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "message": "Patch Set 4:\n\n(2 comments)"
        },
        {
            "timestamp": 1638867699,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/31392/ : SUCCESS"
        },
        {
            "timestamp": 1639178589,
            "reviewer": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1641344290,
            "reviewer": {
                "name": "Tom Joseph",
                "email": "rushtotom@gmail.com",
                "username": "tomjoseph83"
            },
            "message": "Patch Set 4: Code-Review+2"
        },
        {
            "timestamp": 1641368519,
            "reviewer": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "message": "Uploaded patch set 5: Patch Set 4 was rebased."
        },
        {
            "timestamp": 1641368554,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1641368554,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1641368706,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/34911/ : SUCCESS"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "198a2467de013f108acbc08e6a7bf396980588ec",
            "parents": [
                "c2909fbad01aa9545f045703c17bb3ac4416b5e8"
            ],
            "ref": "refs/changes/39/47939/1",
            "uploader": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "createdOn": 1634609799,
            "author": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "sensordatahandler.hpp",
                    "type": "MODIFIED",
                    "insertions": 41,
                    "deletions": -29
                },
                {
                    "file": "sensorhandler.cpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": -11
                }
            ],
            "sizeInsertions": 73,
            "sizeDeletions": 40
        },
        {
            "number": 2,
            "revision": "9b9a21deea3b08c80ebdad2b26611c898dc966c3",
            "parents": [
                "23d2eca97cb059066310763fe064d86d7df841fe"
            ],
            "ref": "refs/changes/39/47939/2",
            "uploader": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "createdOn": 1635832583,
            "author": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "sensorhandler.cpp",
                    "line": 502,
                    "reviewer": {
                        "name": "Vernon Mauery",
                        "email": "vernon.mauery@linux.intel.com",
                        "username": "vmauery"
                    },
                    "message": "use the yielding variant of this function"
                },
                {
                    "file": "sensorhandler.cpp",
                    "line": 502,
                    "reviewer": {
                        "name": "Lei YU",
                        "email": "yulei.sh@bytedance.com",
                        "username": "mine260309"
                    },
                    "message": "This needs to changes the prototype of the function to use the \"context\", and it will impact the existing code.\nSo for now I prefer to keep it as-is, and we could improve the code to use yielding variants in future commits.\n\nWhat do you think?"
                },
                {
                    "file": "sensorhandler.cpp",
                    "line": 502,
                    "reviewer": {
                        "name": "Vernon Mauery",
                        "email": "vernon.mauery@linux.intel.com",
                        "username": "vmauery"
                    },
                    "message": "Simply adding the context to the function signature will not change this function enough that it would affect the existing code (unless that code was changed to use it.) And in the spirit of trying to keep the code commit limited in scope, I am fine with not changing the existing code to use ctx at this time.\n\nI only object to doing the work later because it just adds to the already large pile of technical debt."
                },
                {
                    "file": "sensorhandler.cpp",
                    "line": 502,
                    "reviewer": {
                        "name": "Lei YU",
                        "email": "yulei.sh@bytedance.com",
                        "username": "mine260309"
                    },
                    "message": "This is done by https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-host-ipmid/+/49410\nLet's do it in a separate commit."
                },
                {
                    "file": "sensorhandler.cpp",
                    "line": 508,
                    "reviewer": {
                        "name": "Vernon Mauery",
                        "email": "vernon.mauery@linux.intel.com",
                        "username": "vmauery"
                    },
                    "message": "I see that the yielding getAllDbusProperties would not work here, but please copy its methodology to use a yielding dbus call."
                },
                {
                    "file": "sensorhandler.cpp",
                    "line": 508,
                    "reviewer": {
                        "name": "Lei YU",
                        "email": "yulei.sh@bytedance.com",
                        "username": "mine260309"
                    },
                    "message": "The same as above."
                },
                {
                    "file": "sensorhandler.cpp",
                    "line": 508,
                    "reviewer": {
                        "name": "Lei YU",
                        "email": "yulei.sh@bytedance.com",
                        "username": "mine260309"
                    },
                    "message": "Ack"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "sensordatahandler.hpp",
                    "type": "MODIFIED",
                    "insertions": 41,
                    "deletions": -29
                },
                {
                    "file": "sensorhandler.cpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": -11
                }
            ],
            "sizeInsertions": 73,
            "sizeDeletions": 40
        },
        {
            "number": 3,
            "revision": "8d7b2d8e54f02cbca2642c773470dcf4e61cee6b",
            "parents": [
                "d99d9a7a930d640e9bdbbd3762c853b51f403104"
            ],
            "ref": "refs/changes/39/47939/3",
            "uploader": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "createdOn": 1635908588,
            "author": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "sensordatahandler.hpp",
                    "type": "MODIFIED",
                    "insertions": 41,
                    "deletions": -29
                },
                {
                    "file": "sensorhandler.cpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": -11
                }
            ],
            "sizeInsertions": 73,
            "sizeDeletions": 40
        },
        {
            "number": 4,
            "revision": "2627e82dfe40846b2f9318a421359daf1cd12237",
            "parents": [
                "bb26493a1f02818c6d0989cb3918d6e7d22401ac"
            ],
            "ref": "refs/changes/39/47939/4",
            "uploader": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "createdOn": 1638867511,
            "author": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "sensordatahandler.hpp",
                    "type": "MODIFIED",
                    "insertions": 41,
                    "deletions": -29
                },
                {
                    "file": "sensorhandler.cpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": -11
                }
            ],
            "sizeInsertions": 73,
            "sizeDeletions": 40
        },
        {
            "number": 5,
            "revision": "17b2dca6c502b7644a93ea012084f299eff2bb10",
            "parents": [
                "7415b55bb1597f3343cd5f8677e6a8dd3fdadbcf"
            ],
            "ref": "refs/changes/39/47939/5",
            "uploader": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "createdOn": 1641368519,
            "author": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "sensordatahandler.hpp",
                    "type": "MODIFIED",
                    "insertions": 41,
                    "deletions": -29
                },
                {
                    "file": "sensorhandler.cpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": -11
                }
            ],
            "sizeInsertions": 73,
            "sizeDeletions": 40
        }
    ]
}