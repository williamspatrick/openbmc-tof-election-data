{
    "project": "openbmc/phosphor-fan-presence",
    "branch": "master",
    "id": "Ibc2dbe6de271391af9ba089a955e3aca3c101e95",
    "number": 49066,
    "subject": "control:p10bmc: Add processor `core temps` groups",
    "owner": {
        "name": "Matthew Barth",
        "email": "msbarth@linux.ibm.com",
        "username": "msbarth"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-fan-presence/+/49066",
    "commitMessage": "control:p10bmc: Add processor `core temps` groups\n\nChange-Id: Ibc2dbe6de271391af9ba089a955e3aca3c101e95\nSigned-off-by: Matthew Barth <msbarth@us.ibm.com>\n",
    "createdOn": 1637700706,
    "lastUpdated": 1638313581,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1637700706,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1637700719,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1637700822,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/30741/ : SUCCESS"
        },
        {
            "timestamp": 1637770876,
            "reviewer": {
                "name": "Derek Howard",
                "email": "derekh@us.ibm.com",
                "username": "derekhoward55"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1637772428,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1637772440,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1637772443,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1637772547,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/30769/ : SUCCESS"
        },
        {
            "timestamp": 1637787426,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1638148288,
            "reviewer": {
                "name": "Derek Howard",
                "email": "derekh@us.ibm.com",
                "username": "derekhoward55"
            },
            "message": "Patch Set 2: Code-Review+1"
        },
        {
            "timestamp": 1638227865,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 2:\n\n(1 comment)\n\nIf these groups are going to be used for Tcontrol stuff, will you need to break them up to be per chip, because of the dvfs_temps that are different per chip?"
        },
        {
            "timestamp": 1638233946,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Patch Set 2:\n\n(1 comment)\n\n> Patch Set 2:\n> \n> (1 comment)\n> \n> If these groups are going to be used for Tcontrol stuff, will you need to break them up to be per chip, because of the dvfs_temps that are different per chip?\n\nCorrect, they will need to be split up and aligned with their associated dvfs value. I didnt distinguish that yet for this commit as I'm primarily looking for confirmation on number of cores and big vs small core naming (which you've mentioned in the review here)."
        },
        {
            "timestamp": 1638288143,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1638288163,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1638288265,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/30909/ : SUCCESS"
        },
        {
            "timestamp": 1638288293,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Patch Set 3:\n\n(1 comment)\n\n> Patch Set 2:\n> \n> (1 comment)\n> \n> > Patch Set 2:\n> > \n> > (1 comment)\n> > \n> > If these groups are going to be used for Tcontrol stuff, will you need to break them up to be per chip, because of the dvfs_temps that are different per chip?\n> \n> Correct, they will need to be split up and aligned with their associated dvfs value. I didnt distinguish that yet for this commit as I'm primarily looking for confirmation on number of cores and big vs small core naming (which you've mentioned in the review here).\n\nBroke up the small cores to be per proc and added the dvfs temps per proc now as well."
        },
        {
            "timestamp": 1638289883,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1638289898,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1638289997,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/30910/ : SUCCESS"
        },
        {
            "timestamp": 1638290043,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 4:\n\nI also put up the core and IO ring DVFS temp groups and the events to set the dvfs params a few weeks ago with https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-fan-presence/+/48798"
        },
        {
            "timestamp": 1638290168,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Patch Set 4:\n\n> Patch Set 4:\n> \n> I also put up the core and IO ring DVFS temp groups and the events to set the dvfs params a few weeks ago with https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-fan-presence/+/48798\n\nAh, ok...shows how far behind I am on reviews. I'll remove them from this commit"
        },
        {
            "timestamp": 1638291961,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1638291973,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1638291977,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Patch Set 5:\n\n> Patch Set 4:\n> \n> > Patch Set 4:\n> > \n> > I also put up the core and IO ring DVFS temp groups and the events to set the dvfs params a few weeks ago with https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-fan-presence/+/48798\n> \n> Ah, ok...shows how far behind I am on reviews. I'll remove them from this commit\n\nDone"
        },
        {
            "timestamp": 1638292188,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 5: Code-Review+1"
        },
        {
            "timestamp": 1638292234,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/30912/ : SUCCESS"
        },
        {
            "timestamp": 1638309811,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Uploaded patch set 6: Patch Set 5 was rebased."
        },
        {
            "timestamp": 1638309825,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1638309921,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/30924/ : SUCCESS"
        },
        {
            "timestamp": 1638313577,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Patch Set 6: Code-Review+2"
        },
        {
            "timestamp": 1638313581,
            "reviewer": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "message": "Change has been successfully merged by Matthew Barth"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "4e50d6854df871c392cc7e7558246c9e3b8d8125",
            "parents": [
                "8469d8cf2e73642d329a45abc56dc98a30d45320"
            ],
            "ref": "refs/changes/66/49066/1",
            "uploader": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "createdOn": 1637700706,
            "author": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "control/config_files/p10bmc/ibm,everest/groups.json",
                    "line": 87,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "33 cores per proc?"
                },
                {
                    "file": "control/config_files/p10bmc/ibm,everest/groups.json",
                    "line": 87,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,everest/groups.json",
                    "type": "MODIFIED",
                    "insertions": 269,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-1s4u/groups.json",
                    "type": "MODIFIED",
                    "insertions": 71,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-2u/groups.json",
                    "type": "MODIFIED",
                    "insertions": 137,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/groups.json",
                    "type": "MODIFIED",
                    "insertions": 137,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 614,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "013746b832b00b396119c91de06ba9f841a80894",
            "parents": [
                "8469d8cf2e73642d329a45abc56dc98a30d45320"
            ],
            "ref": "refs/changes/66/49066/2",
            "uploader": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "createdOn": 1637772428,
            "author": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-2u/groups.json",
                    "line": 67,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "Saw these paths in simulation from the OCC service\n\n`/xyz/openbmc_project/sensors/temperature/proc0_core0_0_temp`\n\n@cjcain, I believe that's going to be changed to what I have here in the config, correct?"
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-2u/groups.json",
                    "line": 67,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "The proc0_core0_0_temp is what shows up after I changed the names to be the small core names, since that is all the OCC knows about.\n\n\nIt would be pretty easy to make a new sensor for the max value of all the cores on a chip if that would be useful, though we'd have to discuss what to do if it's possible the OCC could fail to get a specific core temp."
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-2u/groups.json",
                    "line": 67,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "Ah, ok.. I was thinking it was in the works to be named like I have here. At this point, I guess I should just update these to be the small core names and we can discuss what changes it would take to switch to a max value of all cores. \n\nHaving a single max temp from all the cores would certainly cut down on the number of sensors needing to be read. Would definitely need to see how the OCC handles failing to get a specific core temp...but, from a fan control perspective, I'm now aware of having to look at the core functional states and have fans react to that currently."
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-2u/groups.json",
                    "line": 67,
                    "reviewer": {
                        "name": "Matthew Barth",
                        "email": "msbarth@linux.ibm.com",
                        "username": "msbarth"
                    },
                    "message": "Done\n\nSwitched to small core names and since I was in here, broke up the cores to be per proc and added the dvfs temps per proc as well."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,everest/groups.json",
                    "type": "MODIFIED",
                    "insertions": 261,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-1s4u/groups.json",
                    "type": "MODIFIED",
                    "insertions": 69,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-2u/groups.json",
                    "type": "MODIFIED",
                    "insertions": 133,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/groups.json",
                    "type": "MODIFIED",
                    "insertions": 133,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 596,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "71f2e9d0b59db3eff7e75e4e2656cc2a9f22819d",
            "parents": [
                "f3a6d45c89afbbfaee80a1b10cfafe19b160cccb"
            ],
            "ref": "refs/changes/66/49066/3",
            "uploader": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "createdOn": 1638288143,
            "author": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,everest/groups.json",
                    "type": "MODIFIED",
                    "insertions": 344,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-1s4u/groups.json",
                    "type": "MODIFIED",
                    "insertions": 86,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-2u/groups.json",
                    "type": "MODIFIED",
                    "insertions": 172,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/groups.json",
                    "type": "MODIFIED",
                    "insertions": 172,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 774,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "abdf2c57ff1e7072ce20641862ff41d584c00359",
            "parents": [
                "f3a6d45c89afbbfaee80a1b10cfafe19b160cccb"
            ],
            "ref": "refs/changes/66/49066/4",
            "uploader": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "createdOn": 1638289883,
            "author": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,everest/groups.json",
                    "type": "MODIFIED",
                    "insertions": 344,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-1s4u/groups.json",
                    "type": "MODIFIED",
                    "insertions": 86,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-2u/groups.json",
                    "type": "MODIFIED",
                    "insertions": 172,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/groups.json",
                    "type": "MODIFIED",
                    "insertions": 172,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 774,
            "sizeDeletions": 0
        },
        {
            "number": 5,
            "revision": "65eb838acc3ede01f6002dcb22631b7a0506bccf",
            "parents": [
                "f3a6d45c89afbbfaee80a1b10cfafe19b160cccb"
            ],
            "ref": "refs/changes/66/49066/5",
            "uploader": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "createdOn": 1638291961,
            "author": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,everest/groups.json",
                    "type": "MODIFIED",
                    "insertions": 296,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-1s4u/groups.json",
                    "type": "MODIFIED",
                    "insertions": 74,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-2u/groups.json",
                    "type": "MODIFIED",
                    "insertions": 148,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/groups.json",
                    "type": "MODIFIED",
                    "insertions": 148,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 666,
            "sizeDeletions": 0
        },
        {
            "number": 6,
            "revision": "31ba23c1911e3e594c1ca14d36cba7d12c6eca1c",
            "parents": [
                "8a8aa442e51e2116ba27e71636bb9a3183502b10"
            ],
            "ref": "refs/changes/66/49066/6",
            "uploader": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "createdOn": 1638309811,
            "author": {
                "name": "Matthew Barth",
                "email": "msbarth@linux.ibm.com",
                "username": "msbarth"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,everest/groups.json",
                    "type": "MODIFIED",
                    "insertions": 296,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-1s4u/groups.json",
                    "type": "MODIFIED",
                    "insertions": 74,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-2u/groups.json",
                    "type": "MODIFIED",
                    "insertions": 148,
                    "deletions": 0
                },
                {
                    "file": "control/config_files/p10bmc/ibm,rainier-4u/groups.json",
                    "type": "MODIFIED",
                    "insertions": 148,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 666,
            "sizeDeletions": 0
        }
    ]
}