{
    "project": "openbmc/openbmc-test-automation",
    "branch": "master",
    "id": "I5fb5aad8de6259feaace05a2ab7f9e2173ea0343",
    "number": 49280,
    "subject": "Fix using SSH command while SSH protocol is disabled",
    "owner": {
        "name": "Brian Ma",
        "email": "chma0@nuvoton.com",
        "username": "minimada"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/openbmc-test-automation/+/49280",
    "commitMessage": "Fix using SSH command while SSH protocol is disabled\n\nReboot command OBMC Reboot (off) run /sbin/reboot via SSH protocol,\nuse rest API to trigger BMC reboot instead while run SSH disabled test.\n\nSigned-off-by: Brian Ma <chma0@nuvoton.com>\nChange-Id: I5fb5aad8de6259feaace05a2ab7f9e2173ea0343\n",
    "createdOn": 1638495517,
    "lastUpdated": 1638949934,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1638495517,
            "reviewer": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1638495538,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1638495576,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/31129/ : SUCCESS"
        },
        {
            "timestamp": 1638856601,
            "reviewer": {
                "name": "Prashanth Katti",
                "email": "prkatti1@in.ibm.com",
                "username": "prkatti1"
            },
            "message": "Patch Set 1: Code-Review-1\n\n(1 comment)"
        },
        {
            "timestamp": 1638857417,
            "reviewer": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1638861631,
            "reviewer": {
                "name": "George Keishing",
                "email": "gkeishin@gmail.com",
                "username": "gkeishin"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1638879804,
            "reviewer": {
                "name": "Prashanth Katti",
                "email": "prkatti1@in.ibm.com",
                "username": "prkatti1"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1638934130,
            "reviewer": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1638934145,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1638934171,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/31506/ : SUCCESS"
        },
        {
            "timestamp": 1638934749,
            "reviewer": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1638937621,
            "reviewer": {
                "name": "George Keishing",
                "email": "gkeishin@gmail.com",
                "username": "gkeishin"
            },
            "message": "Patch Set 2: Code-Review+1"
        },
        {
            "timestamp": 1638939210,
            "reviewer": {
                "name": "Prashanth Katti",
                "email": "prkatti1@in.ibm.com",
                "username": "prkatti1"
            },
            "message": "Patch Set 2: Code-Review-1\n\n(1 comment)"
        },
        {
            "timestamp": 1638940916,
            "reviewer": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1638940935,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1638940974,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/31517/ : SUCCESS"
        },
        {
            "timestamp": 1638941046,
            "reviewer": {
                "name": "Prashanth Katti",
                "email": "prkatti1@in.ibm.com",
                "username": "prkatti1"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1638949904,
            "reviewer": {
                "email": "Megha.GN@ibm.com",
                "username": "meghagn12345"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1638949931,
            "reviewer": {
                "name": "George Keishing",
                "email": "gkeishin@gmail.com",
                "username": "gkeishin"
            },
            "message": "Patch Set 3: Code-Review+2"
        },
        {
            "timestamp": 1638949934,
            "reviewer": {
                "name": "George Keishing",
                "email": "gkeishin@gmail.com",
                "username": "gkeishin"
            },
            "message": "Change has been successfully rebased and submitted as 4ddcb4d4c6f9027c0285bcc5a173dda6d1370060 by George Keishing"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "78563ffe60cba04f6ef94f09b76560d7e58c8dc5",
            "parents": [
                "ea8a53101807250acca2725903f5af85b3ed730d"
            ],
            "ref": "refs/changes/80/49280/1",
            "uploader": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "createdOn": 1638495517,
            "author": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "redfish/managers/test_bmc_protocol_settings.robot",
                    "line": 83,
                    "reviewer": {
                        "name": "Prashanth Katti",
                        "email": "prkatti1@in.ibm.com",
                        "username": "prkatti1"
                    },
                    "message": "Why waiting for 60 seconds here?"
                },
                {
                    "file": "redfish/managers/test_bmc_protocol_settings.robot",
                    "line": 83,
                    "reviewer": {
                        "name": "Brian Ma",
                        "email": "chma0@nuvoton.com",
                        "username": "minimada"
                    },
                    "message": "We need sometime to wait for BMC reboot, then redfish.Get will try to connect BMC and get ssh protocol state"
                },
                {
                    "file": "redfish/managers/test_bmc_protocol_settings.robot",
                    "line": 83,
                    "reviewer": {
                        "name": "George Keishing",
                        "email": "gkeishin@gmail.com",
                        "username": "gkeishin"
                    },
                    "message": "https://github.com/openbmc/openbmc-test-automation/blob/f5fec0d29370f8905aeccfee128c76abeef94231/lib/utils.robot#L925\n\nmaybe something like this ?. just a thought \n\n\nWait Until Keyword Succeeds  1 min  10 sec  Is BMC Standby"
                },
                {
                    "file": "redfish/managers/test_bmc_protocol_settings.robot",
                    "line": 83,
                    "reviewer": {
                        "name": "Prashanth Katti",
                        "email": "prkatti1@in.ibm.com",
                        "username": "prkatti1"
                    },
                    "message": "OK.\nThat should be done as part of `Redfish BMC Reset Operation`, not in the test case.\n`Wait Until Keyword Succeeds  1 min  10 sec  Is BMC Standby` should go into the keyword."
                },
                {
                    "file": "redfish/managers/test_bmc_protocol_settings.robot",
                    "line": 83,
                    "reviewer": {
                        "name": "Brian Ma",
                        "email": "chma0@nuvoton.com",
                        "username": "minimada"
                    },
                    "message": "Due to possible following issues, I choose create new keyword instead of use \"Is BMC Standby\"\n1. Is BMC Standby Match State with host state as off, but we may not sure currently host state.\n2. Reboot BMC need some time, we may get the BMC state before BMC real reboot.\n\nSo I use the BMC last reset time to check BMC is rebooted."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "redfish/managers/test_bmc_protocol_settings.robot",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 2,
            "sizeDeletions": 1
        },
        {
            "number": 2,
            "revision": "214c21a19a3701d1f4ed7b26f4ddb0cfd4d93b78",
            "parents": [
                "8b38c1a239e711418c433a7ac7a39ced98d2fe82"
            ],
            "ref": "refs/changes/80/49280/2",
            "uploader": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "createdOn": 1638934130,
            "author": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "redfish/managers/test_bmc_protocol_settings.robot",
                    "line": 183,
                    "reviewer": {
                        "name": "Prashanth Katti",
                        "email": "prkatti1@in.ibm.com",
                        "username": "prkatti1"
                    },
                    "message": "`Is BMC LastResetTime Changed` this makes keyword name meaningful here"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "redfish/managers/test_bmc_protocol_settings.robot",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 21,
            "sizeDeletions": 1
        },
        {
            "number": 3,
            "revision": "70fe925eabc29d6e70f4e7a4eef2e84feabb1191",
            "parents": [
                "8b38c1a239e711418c433a7ac7a39ced98d2fe82"
            ],
            "ref": "refs/changes/80/49280/3",
            "uploader": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "createdOn": 1638940916,
            "author": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "redfish/managers/test_bmc_protocol_settings.robot",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 21,
            "sizeDeletions": 1
        },
        {
            "number": 4,
            "revision": "4ddcb4d4c6f9027c0285bcc5a173dda6d1370060",
            "parents": [
                "6875a4a2609bc438718d61cd6fc00c22aca347cb"
            ],
            "ref": "refs/changes/80/49280/4",
            "uploader": {
                "name": "George Keishing",
                "email": "gkeishin@gmail.com",
                "username": "gkeishin"
            },
            "createdOn": 1638949934,
            "author": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "redfish/managers/test_bmc_protocol_settings.robot",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 21,
            "sizeDeletions": 1
        }
    ]
}