{
    "project": "openbmc/phosphor-power",
    "branch": "master",
    "id": "Ie9a512b2e10a9a63a2007b0559a1b7368828e351",
    "number": 44440,
    "subject": "psu-ng: Do not log error for expected missing PSUs",
    "owner": {
        "name": "Adriana Kobylak",
        "email": "anoo@linux.ibm.com",
        "username": "anoo1"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-power/+/44440",
    "commitMessage": "psu-ng: Do not log error for expected missing PSUs\n\nSome systems like Rainier 2U support less PSUs than the number of PSU\nslots. Therefore, check the expected number of PSUs in the supported\nconfiguration and log an error for missing PSUs if the total number does\nnot match. Continue to set the Fault for the PSU that's not present to\nmark it as already checked, to avoid creating multiple errors.\n\nTested: Verified on Rainier 2U that no error log was created for missing\n        PSU.\n\nChange-Id: Ie9a512b2e10a9a63a2007b0559a1b7368828e351\nSigned-off-by: Adriana Kobylak <anoo@us.ibm.com>\n",
    "createdOn": 1624550576,
    "lastUpdated": 1627074535,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1624550576,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1624550589,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1624551007,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/20622/ : SUCCESS"
        },
        {
            "timestamp": 1624560150,
            "reviewer": {
                "name": "B. J. Wyman",
                "email": "bjwyman@gmail.com",
                "username": "bjwyman"
            },
            "message": "Patch Set 1: Code-Review+1"
        },
        {
            "timestamp": 1624912571,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 1:\n\n(2 comments)"
        },
        {
            "timestamp": 1624973877,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1625081304,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1625081324,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1625081752,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/21168/ : SUCCESS"
        },
        {
            "timestamp": 1625081785,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 2:\n\n(3 comments)"
        },
        {
            "timestamp": 1625175797,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 2: Code-Review+1"
        },
        {
            "timestamp": 1625704643,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 2: Code-Review+1\n\nLooks good to me."
        },
        {
            "timestamp": 1625863145,
            "reviewer": {
                "name": "B. J. Wyman",
                "email": "bjwyman@gmail.com",
                "username": "bjwyman"
            },
            "message": "Patch Set 2: Code-Review+1"
        },
        {
            "timestamp": 1626717879,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "message": "Uploaded patch set 3: Patch Set 2 was rebased."
        },
        {
            "timestamp": 1626717893,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1626718355,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/22296/ : SUCCESS"
        },
        {
            "timestamp": 1626728238,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 3: Code-Review+2"
        },
        {
            "timestamp": 1627074535,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Change has been successfully merged by Shawn McCarney"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "e2a05c0dd1456358c8d782c2eb82ae904a234bc3",
            "parents": [
                "d3a70d987614bb29ff326d911e41b4eb505a40df"
            ],
            "ref": "refs/changes/40/44440/1",
            "uploader": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "createdOn": 1624550576,
            "author": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 330,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "This method is already pretty long.  It might be helpful to put this new code in a separate method (e.g. hasRequiredNumberOfPSUs() or isRequiredPSUMissing())"
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 330,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "Done. Agree, added new \"hasRequiredPSUs()\" method."
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 332,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "std::count_if seems appropriate here"
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 332,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "Done. Indeed, added it to the new \"hasRequiredPSUs()\" method."
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 340,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "If I understand the supportedConfigs code/data structure, there is a model mapped to a PSU count and voltage.  Do we need to check the model or voltage here to decide if this supportedConfig is a match?"
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 340,
                    "reviewer": {
                        "name": "Adriana Kobylak",
                        "email": "anoo@linux.ibm.com",
                        "username": "anoo1"
                    },
                    "message": "Done. Yeah, that'd make sense, otherwise we're just checking for a number but can be for a different model than the one in the system. Now with the new \"hasRequiredPSUs()\" method, it does the full validation (model, count) against the supported configuration."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 29,
                    "deletions": -7
                }
            ],
            "sizeInsertions": 29,
            "sizeDeletions": 7
        },
        {
            "number": 2,
            "revision": "a29c9944a9fdc43fda70607e1bc5297398ca4730",
            "parents": [
                "7eb02f5223886e05a89327b792ac3ba1d7bbea2e"
            ],
            "ref": "refs/changes/40/44440/2",
            "uploader": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "createdOn": 1625081304,
            "author": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -8
                }
            ],
            "sizeInsertions": 13,
            "sizeDeletions": 8
        },
        {
            "number": 3,
            "revision": "f2ba146bb2a8155429a4543e83451ca306dd036d",
            "parents": [
                "4d9aaf9133899a4576ce90f704a5b5f0a20d2113"
            ],
            "ref": "refs/changes/40/44440/3",
            "uploader": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "createdOn": 1626717879,
            "author": {
                "name": "Adriana Kobylak",
                "email": "anoo@linux.ibm.com",
                "username": "anoo1"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -8
                }
            ],
            "sizeInsertions": 13,
            "sizeDeletions": 8
        }
    ]
}