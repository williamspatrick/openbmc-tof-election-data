{
    "project": "openbmc/phosphor-power",
    "branch": "master",
    "id": "If981de19cbc771ac8da17a2dfe0df50e40a1a190",
    "number": 48405,
    "subject": "psu-ng: Refactor EXPECT calls for PMBus STATUS_*",
    "owner": {
        "name": "B. J. Wyman",
        "email": "bjwyman@gmail.com",
        "username": "bjwyman"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-power/+/48405",
    "commitMessage": "psu-ng: Refactor EXPECT calls for PMBus STATUS_*\n\nContinuing to copy and paste and update all these EXPECT_CALL() lines\nfor the various STATUS_* commands seems a bit tedious. Refactor that\ncode to pull it out into a helper function.\n\nChange-Id: If981de19cbc771ac8da17a2dfe0df50e40a1a190\nSigned-off-by: Brandon Wyman <bjwyman@gmail.com>\n",
    "createdOn": 1635462289,
    "lastUpdated": 1635781485,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1635462289,
            "reviewer": {
                "name": "B. J. Wyman",
                "email": "bjwyman@gmail.com",
                "username": "bjwyman"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1635462311,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1635462455,
            "reviewer": {
                "name": "B. J. Wyman",
                "email": "bjwyman@gmail.com",
                "username": "bjwyman"
            },
            "message": "Patch Set 1:\n\nThis change is ready for review."
        },
        {
            "timestamp": 1635463013,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/29285/ : SUCCESS"
        },
        {
            "timestamp": 1635523099,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 1:\n\n(3 comments)\n\nNice enhancement Brandon.  Some small comments below."
        },
        {
            "timestamp": 1635537329,
            "reviewer": {
                "name": "B. J. Wyman",
                "email": "bjwyman@gmail.com",
                "username": "bjwyman"
            },
            "message": "Patch Set 1:\n\n(3 comments)"
        },
        {
            "timestamp": 1635541924,
            "reviewer": {
                "name": "B. J. Wyman",
                "email": "bjwyman@gmail.com",
                "username": "bjwyman"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1635541939,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1635542151,
            "reviewer": {
                "name": "B. J. Wyman",
                "email": "bjwyman@gmail.com",
                "username": "bjwyman"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1635542174,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1635542182,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/29397/ : ABORTED"
        },
        {
            "timestamp": 1635542990,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/29399/ : SUCCESS"
        },
        {
            "timestamp": 1635546656,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1635777781,
            "reviewer": {
                "name": "Derek Howard",
                "email": "derekh@us.ibm.com",
                "username": "derekhoward55"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1635781094,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1635781470,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 3: Code-Review+2"
        },
        {
            "timestamp": 1635781485,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Change has been successfully merged by Shawn McCarney"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "ef7a2b69ddb2360a3d6d02308d9e36d1f3f8fb8f",
            "parents": [
                "85c7bf41fe4f1aed2667e434e3b1db2d6b80f6ab"
            ],
            "ref": "refs/changes/05/48405/1",
            "uploader": {
                "name": "B. J. Wyman",
                "email": "bjwyman@gmail.com",
                "username": "bjwyman"
            },
            "createdOn": 1635462289,
            "author": {
                "name": "B. J. Wyman",
                "email": "bjwyman@gmail.com",
                "username": "bjwyman"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "Nit: Continuing?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "B. J. Wyman",
                        "email": "bjwyman@gmail.com",
                        "username": "bjwyman"
                    },
                    "message": "Ack"
                },
                {
                    "file": "phosphor-power-supply/test/power_supply_tests.cpp",
                    "line": 28,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "You could give all these default values of 0x00.\n\nThen when you call this function in the case where statusWordValue == 0, you don't have to define and pass a bunch of other variables that won't be used.\n\ne.g.\n  uint16_t statusWordValue{0x0000};\n  setPMBusExpectations(mockPMBus, statusWordValue);"
                },
                {
                    "file": "phosphor-power-supply/test/power_supply_tests.cpp",
                    "line": 28,
                    "reviewer": {
                        "name": "B. J. Wyman",
                        "email": "bjwyman@gmail.com",
                        "username": "bjwyman"
                    },
                    "message": "Oh! Why did I not consider that!?"
                },
                {
                    "file": "phosphor-power-supply/test/power_supply_tests.cpp",
                    "line": 30,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "I don't understand what this comment is referring to.  Did you intend to leave it in the code?"
                },
                {
                    "file": "phosphor-power-supply/test/power_supply_tests.cpp",
                    "line": 30,
                    "reviewer": {
                        "name": "B. J. Wyman",
                        "email": "bjwyman@gmail.com",
                        "username": "bjwyman"
                    },
                    "message": "Oops! Before I filled this in, I just put the function name with parms... ended up with {}, which made my vim fancy commands not work so well."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/test/power_supply_tests.cpp",
                    "type": "MODIFIED",
                    "insertions": 170,
                    "deletions": -145
                }
            ],
            "sizeInsertions": 170,
            "sizeDeletions": 145
        },
        {
            "number": 2,
            "revision": "1d9e5a20b3b9cbb7b49d0a482328781a70e086b8",
            "parents": [
                "85c7bf41fe4f1aed2667e434e3b1db2d6b80f6ab"
            ],
            "ref": "refs/changes/05/48405/2",
            "uploader": {
                "name": "B. J. Wyman",
                "email": "bjwyman@gmail.com",
                "username": "bjwyman"
            },
            "createdOn": 1635541924,
            "author": {
                "name": "B. J. Wyman",
                "email": "bjwyman@gmail.com",
                "username": "bjwyman"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/test/power_supply_tests.cpp",
                    "type": "MODIFIED",
                    "insertions": 127,
                    "deletions": -152
                }
            ],
            "sizeInsertions": 127,
            "sizeDeletions": 152
        },
        {
            "number": 3,
            "revision": "8da35c5199b0e1f0c555ec58e9355ed71f444c49",
            "parents": [
                "85c7bf41fe4f1aed2667e434e3b1db2d6b80f6ab"
            ],
            "ref": "refs/changes/05/48405/3",
            "uploader": {
                "name": "B. J. Wyman",
                "email": "bjwyman@gmail.com",
                "username": "bjwyman"
            },
            "createdOn": 1635542151,
            "author": {
                "name": "B. J. Wyman",
                "email": "bjwyman@gmail.com",
                "username": "bjwyman"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/test/power_supply_tests.cpp",
                    "type": "MODIFIED",
                    "insertions": 127,
                    "deletions": -152
                }
            ],
            "sizeInsertions": 127,
            "sizeDeletions": 152
        }
    ]
}