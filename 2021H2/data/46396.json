{
    "project": "openbmc/smbios-mdr",
    "branch": "master",
    "id": "I21b80f34bfe76a2a2b6d78ee7aace54ded6abec4",
    "number": 46396,
    "subject": "cpu: Add support for ARM family",
    "owner": {
        "name": "Charles Boyer",
        "email": "Charles.Boyer@fii-usa.com",
        "username": "boyercee"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/smbios-mdr/+/46396",
    "commitMessage": "cpu: Add support for ARM family\n\nIn order to detect the ARM family, the Processor Family (Offset 06h)\nmust contain the value of 0xFE. Then the family is located in\nProcessor Family 2 (Offset 28h) according to SMBIOS Spec. 3.0.0\nand later.\n\nThe following ARM families have been added to the family list to\nfollow SMBIOS Spec. 3.1.1 and later.\n - ARMv7\n - ARMv8\n - ARM\n - StrongARM\n\nTested:\n - With ARM CPUs, both dbus and Redfish presented the processor's\n   family from SMBIOS.\n\nSigned-off-by: Charles Boyer <Charles.Boyer@fii-usa.com>\nChange-Id: I21b80f34bfe76a2a2b6d78ee7aace54ded6abec4\n",
    "createdOn": 1630447909,
    "lastUpdated": 1635370043,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1630447909,
            "reviewer": {
                "name": "Charles Boyer",
                "email": "Charles.Boyer@fii-usa.com",
                "username": "boyercee"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1630447927,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1630447951,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/25396/ : FAILURE"
        },
        {
            "timestamp": 1630448154,
            "reviewer": {
                "name": "Charles Boyer",
                "email": "Charles.Boyer@fii-usa.com",
                "username": "boyercee"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1630448172,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1630448519,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/25397/ : SUCCESS"
        },
        {
            "timestamp": 1630888618,
            "reviewer": {
                "name": "Chen, Yugang",
                "email": "yugang.chen@linux.intel.com",
                "username": "ygangch"
            },
            "message": "Patch Set 2: Code-Review-1\n\n(2 comments)"
        },
        {
            "timestamp": 1631200540,
            "reviewer": {
                "name": "Charles Boyer",
                "email": "Charles.Boyer@fii-usa.com",
                "username": "boyercee"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1631200556,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1631200908,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/26027/ : SUCCESS"
        },
        {
            "timestamp": 1631202333,
            "reviewer": {
                "name": "Charles Boyer",
                "email": "Charles.Boyer@fii-usa.com",
                "username": "boyercee"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1631496289,
            "reviewer": {
                "name": "Chen, Yugang",
                "email": "yugang.chen@linux.intel.com",
                "username": "ygangch"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1631650162,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 3: Code-Review-1\n\n(4 comments)"
        },
        {
            "timestamp": 1631722722,
            "reviewer": {
                "name": "Charles Boyer",
                "email": "Charles.Boyer@fii-usa.com",
                "username": "boyercee"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1631724643,
            "reviewer": {
                "name": "Charles Boyer",
                "email": "Charles.Boyer@fii-usa.com",
                "username": "boyercee"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1631724670,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1631724672,
            "reviewer": {
                "name": "Charles Boyer",
                "email": "Charles.Boyer@fii-usa.com",
                "username": "boyercee"
            },
            "message": "Patch Set 4:\n\n(2 comments)"
        },
        {
            "timestamp": 1631725141,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/26399/ : SUCCESS"
        },
        {
            "timestamp": 1633314262,
            "reviewer": {
                "name": "Thang Q. Nguyen",
                "email": "thang@os.amperecomputing.com",
                "username": "thangqn-ampere"
            },
            "message": "Patch Set 4: Code-Review+1\n\nVerified on Ampere Mt.Jade platform.\n\n{\n  \"@odata.id\": \"/redfish/v1/Systems/system/Processors/cpu0\",\n  \"@odata.type\": \"#Processor.v1_11_0.Processor\",\n  \"Id\": \"cpu0\",\n  \"Manufacturer\": \"Ampere(R)\",\n  \"MaxSpeedMHz\": 2800,\n  \"Name\": \"Processor\",\n  \"PartNumber\": \"Q00-00\",\n  \"ProcessorId\": {\n    \"EffectiveFamily\": \"ARMv8\",\n    \"IdentificationRegisters\": \"1094701249\"\n  },\n  \"ProcessorType\": \"CPU\",\n  \"SerialNumber\": \"00000000000000007203050503322D08\",\n  \"Socket\": \"CPU 1\",\n  \"SparePartNumber\": \"\",\n  \"Status\": {\n    \"Health\": \"OK\",\n    \"State\": \"Enabled\"\n  },\n  \"TotalCores\": 80,\n  \"TotalThreads\": 80,\n  \"Version\": \"Ampere(R) Altra(R) Processor\"\n}"
        },
        {
            "timestamp": 1633727753,
            "reviewer": {
                "name": "Charles Boyer",
                "email": "Charles.Boyer@fii-usa.com",
                "username": "boyercee"
            },
            "message": "Patch Set 4:\n\nPing"
        },
        {
            "timestamp": 1633782624,
            "reviewer": {
                "name": "Hieu Huynh",
                "email": "hieuh@os.amperecomputing.com",
                "username": "hieuhuynh-ampere"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1634691254,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1635289584,
            "reviewer": {
                "name": "Chen, Yugang",
                "email": "yugang.chen@linux.intel.com",
                "username": "ygangch"
            },
            "message": "Patch Set 4: Code-Review+2"
        },
        {
            "timestamp": 1635370043,
            "reviewer": {
                "name": "Charles Boyer",
                "email": "Charles.Boyer@fii-usa.com",
                "username": "boyercee"
            },
            "message": "Change has been successfully rebased and submitted as 800bb70054daacd910f1e5cc5d27ff3338d9161f by Charles Boyer"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "ea638434efe6d9ca954a2eb8d5717877ca6e93bd",
            "parents": [
                "7ece93a842619e15976be776d70105f7e6edca35"
            ],
            "ref": "refs/changes/96/46396/1",
            "uploader": {
                "name": "Charles Boyer",
                "email": "Charles.Boyer@fii-usa.com",
                "username": "boyercee"
            },
            "createdOn": 1630447909,
            "author": {
                "name": "Charles Boyer",
                "email": "Charles.Boyer@fii-usa.com",
                "username": "boyercee"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 24,
                    "deletions": 0
                },
                {
                    "file": "include/cpu.hpp",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -2
                },
                {
                    "file": "src/cpu.cpp",
                    "type": "MODIFIED",
                    "insertions": 22,
                    "deletions": -6
                }
            ],
            "sizeInsertions": 33,
            "sizeDeletions": 8
        },
        {
            "number": 2,
            "revision": "3ecb4d9dc9f62e0123f6dad4556c5a15cb413def",
            "parents": [
                "7ece93a842619e15976be776d70105f7e6edca35"
            ],
            "ref": "refs/changes/96/46396/2",
            "uploader": {
                "name": "Charles Boyer",
                "email": "Charles.Boyer@fii-usa.com",
                "username": "boyercee"
            },
            "createdOn": 1630448154,
            "author": {
                "name": "Charles Boyer",
                "email": "Charles.Boyer@fii-usa.com",
                "username": "boyercee"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "include/cpu.hpp",
                    "line": 160,
                    "reviewer": {
                        "name": "Chen, Yugang",
                        "email": "yugang.chen@linux.intel.com",
                        "username": "ygangch"
                    },
                    "message": "how to keep the input parameters consistent with before if there is no familay2 for some CPUs?"
                },
                {
                    "file": "include/cpu.hpp",
                    "line": 160,
                    "reviewer": {
                        "name": "Charles Boyer",
                        "email": "Charles.Boyer@fii-usa.com",
                        "username": "boyercee"
                    },
                    "message": "The implementation should be compatible with CPUs that do not store its family in Processor Family 2 field of SMBIOS. From my understanding, the SMBIOS table will still have the Processor Family 2 field, even if it is not used. The implementation will only check Processor Family 2 if Processor Family indicates the information resides in Processor Family 2. Then if there is an error in the values of the SMBIOS table, smbios-mdr will continue to function and just report \"Unknown Processor Family\"."
                },
                {
                    "file": "include/cpu.hpp",
                    "line": 160,
                    "reviewer": {
                        "name": "Chen, Yugang",
                        "email": "yugang.chen@linux.intel.com",
                        "username": "ygangch"
                    },
                    "message": "is it std::optional or must for all kinds of CPU?"
                },
                {
                    "file": "include/cpu.hpp",
                    "line": 160,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "family2 is defined in the above structure line152. So as long as it is used when family indicate family2 should be used, I think we are ok."
                },
                {
                    "file": "include/cpu.hpp",
                    "line": 160,
                    "reviewer": {
                        "name": "Charles Boyer",
                        "email": "Charles.Boyer@fii-usa.com",
                        "username": "boyercee"
                    },
                    "message": "I follow the naming from ProcessorInfo structure, and family2 is only used when family indicates to use it."
                },
                {
                    "file": "src/cpu.cpp",
                    "line": 58,
                    "reviewer": {
                        "name": "Chen, Yugang",
                        "email": "yugang.chen@linux.intel.com",
                        "username": "ygangch"
                    },
                    "message": "this code should be kept as before since it's exception for all,  regarding \"if (it->first == processorFamily2Indicator)\", it's one of normal case."
                },
                {
                    "file": "src/cpu.cpp",
                    "line": 58,
                    "reviewer": {
                        "name": "Charles Boyer",
                        "email": "Charles.Boyer@fii-usa.com",
                        "username": "boyercee"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 24,
                    "deletions": 0
                },
                {
                    "file": "include/cpu.hpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": -2
                },
                {
                    "file": "src/cpu.cpp",
                    "type": "MODIFIED",
                    "insertions": 24,
                    "deletions": -6
                }
            ],
            "sizeInsertions": 32,
            "sizeDeletions": 8
        },
        {
            "number": 3,
            "revision": "9d03607849d38de1a12096f8741e3c66de8ff2ca",
            "parents": [
                "7ece93a842619e15976be776d70105f7e6edca35"
            ],
            "ref": "refs/changes/96/46396/3",
            "uploader": {
                "name": "Charles Boyer",
                "email": "Charles.Boyer@fii-usa.com",
                "username": "boyercee"
            },
            "createdOn": 1631200540,
            "author": {
                "name": "Charles Boyer",
                "email": "Charles.Boyer@fii-usa.com",
                "username": "boyercee"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 17,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "Please add source of this information, i.e. smbios spec 3.4.0"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 17,
                    "reviewer": {
                        "name": "Charles Boyer",
                        "email": "Charles.Boyer@fii-usa.com",
                        "username": "boyercee"
                    },
                    "message": "Done"
                },
                {
                    "file": "include/cpu.hpp",
                    "line": 161,
                    "reviewer": {
                        "name": "Chen, Yugang",
                        "email": "yugang.chen@linux.intel.com",
                        "username": "ygangch"
                    },
                    "message": "it looks '2' in family2 is not meaningful enough, is it possible to change it?"
                },
                {
                    "file": "include/cpu.hpp",
                    "line": 161,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "SMBIOS spec uses family2 and it is also in the struct above line 153. \nFrom that perspective, use family2 here is ok"
                },
                {
                    "file": "include/cpu.hpp",
                    "line": 161,
                    "reviewer": {
                        "name": "Charles Boyer",
                        "email": "Charles.Boyer@fii-usa.com",
                        "username": "boyercee"
                    },
                    "message": "Done"
                },
                {
                    "file": "src/cpu.cpp",
                    "line": 61,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "This should be in the else clause above"
                },
                {
                    "file": "src/cpu.cpp",
                    "line": 61,
                    "reviewer": {
                        "name": "Charles Boyer",
                        "email": "Charles.Boyer@fii-usa.com",
                        "username": "boyercee"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 24,
                    "deletions": 0
                },
                {
                    "file": "include/cpu.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -2
                },
                {
                    "file": "src/cpu.cpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 28,
            "sizeDeletions": 5
        },
        {
            "number": 4,
            "revision": "85a0f61e58c870f0a3c5ef51f43fe14ed7638e27",
            "parents": [
                "7ece93a842619e15976be776d70105f7e6edca35"
            ],
            "ref": "refs/changes/96/46396/4",
            "uploader": {
                "name": "Charles Boyer",
                "email": "Charles.Boyer@fii-usa.com",
                "username": "boyercee"
            },
            "createdOn": 1631724643,
            "author": {
                "name": "Charles Boyer",
                "email": "Charles.Boyer@fii-usa.com",
                "username": "boyercee"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 26,
                    "deletions": 0
                },
                {
                    "file": "include/cpu.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -2
                },
                {
                    "file": "src/cpu.cpp",
                    "type": "MODIFIED",
                    "insertions": 18,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 27,
            "sizeDeletions": 5
        },
        {
            "number": 5,
            "revision": "800bb70054daacd910f1e5cc5d27ff3338d9161f",
            "parents": [
                "44533c83fe67952b8afe3c53db17fec39cf3b458"
            ],
            "ref": "refs/changes/96/46396/5",
            "uploader": {
                "name": "Charles Boyer",
                "email": "Charles.Boyer@fii-usa.com",
                "username": "boyercee"
            },
            "createdOn": 1635370043,
            "author": {
                "name": "Charles Boyer",
                "email": "Charles.Boyer@fii-usa.com",
                "username": "boyercee"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 26,
                    "deletions": 0
                },
                {
                    "file": "include/cpu.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -2
                },
                {
                    "file": "src/cpu.cpp",
                    "type": "MODIFIED",
                    "insertions": 18,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 27,
            "sizeDeletions": 5
        }
    ]
}