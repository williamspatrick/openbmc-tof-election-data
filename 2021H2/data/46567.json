{
    "project": "openbmc/docs",
    "branch": "master",
    "id": "I17a15436e316e0d38ef1fad470972d256c03a7b3",
    "number": 46567,
    "subject": "designs: Add Hardware Fault Monitor design doc",
    "owner": {
        "name": "Claire Weinan",
        "email": "cweinan@google.com",
        "username": "daylight22"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/docs/+/46567",
    "commitMessage": "designs: Add Hardware Fault Monitor design doc\n\nSigned-off-by: Claire Weinan <cweinan@google.com>\nChange-Id: I17a15436e316e0d38ef1fad470972d256c03a7b3\n",
    "createdOn": 1630688197,
    "lastUpdated": 1638966973,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1630688197,
            "reviewer": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1630688517,
            "reviewer": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1630705995,
            "reviewer": {
                "name": "Josh Lehan",
                "email": "krellan@google.com",
                "username": "Krellan"
            },
            "message": "Patch Set 2:\n\n(3 comments)"
        },
        {
            "timestamp": 1631019745,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1632965806,
            "reviewer": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "message": "Patch Set 2:\n\n(6 comments)\n\nLooks like a good start. \nIt would be great to see a solid comparison between using modifying phosphor-debug-collector, and creating your own hw-fault-monitor."
        },
        {
            "timestamp": 1633042814,
            "reviewer": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "message": "Patch Set 2:\n\nThanks all for the comments so far. I will review them and get back to you with updates."
        },
        {
            "timestamp": 1633990968,
            "reviewer": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "message": "Patch Set 2:\n\n(9 comments)"
        },
        {
            "timestamp": 1633991391,
            "reviewer": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1633991554,
            "reviewer": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1634168350,
            "reviewer": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "message": "Patch Set 4:\n\n(6 comments)\n\nThanks for answering some question. There are still somethings I would like to iron out.\n\nCan you look into how well your uses cases align with phosphor-debug-collector, and what types of changes would have to be made to phosphor-debug-collector for your uses cases to be covered. That is more important then other other comments because it will affect all the other points.   \n\nThanks again, let us know what you find"
        },
        {
            "timestamp": 1634584900,
            "reviewer": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "message": "Patch Set 4:\n\n(6 comments)"
        },
        {
            "timestamp": 1634697360,
            "reviewer": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1634697421,
            "reviewer": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "message": "Patch Set 5:\n\n(7 comments)"
        },
        {
            "timestamp": 1635183308,
            "reviewer": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "message": "Uploaded patch set 6."
        },
        {
            "timestamp": 1635183450,
            "reviewer": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1635882488,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 6: Code-Review+1\n\n(1 comment)\n\nLooks good to me."
        },
        {
            "timestamp": 1635885413,
            "reviewer": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "message": "Patch Set 6: Code-Review+1\n\nCC me on your changes (especially to bmcweb, and phosphor-debug-collector)\nLooks good to me."
        },
        {
            "timestamp": 1635904638,
            "reviewer": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "message": "Uploaded patch set 7."
        },
        {
            "timestamp": 1635904754,
            "reviewer": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1635904757,
            "reviewer": {
                "name": "John Broadbent",
                "email": "jebr@google.com",
                "username": "jebr224"
            },
            "message": "Patch Set 7: Code-Review+1"
        },
        {
            "timestamp": 1636488862,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 7: Code-Review+1\n\n(1 comment)\n\nSeems fine overall to me.  Would be nice if we can get some additional feedback from some of these component owners.  Especially phosphor-debug-collector..."
        },
        {
            "timestamp": 1637722077,
            "reviewer": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1638881792,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 7:\n\nHigh level Design looks good to me. One of the point need clarification regarding host data collection related. POWER processor based systems , Host specific memory/registers collection use custom steps , not same same intel family processors. Are we going to add oem specific implmention here?"
        },
        {
            "timestamp": 1638902597,
            "reviewer": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "message": "Patch Set 7:\n\n> Patch Set 7:\n> \n> High level Design looks good to me. One of the point need clarification regarding host data collection related. POWER processor based systems , Host specific memory/registers collection use custom steps , not same same intel family processors. Are we going to add oem specific implmention here?\n\nWhile our initial implementation will target Intel processors, in the future each processor family may have a separate OpenBMC module created for it that contains the custom steps needed to read host specific memory/registers, similar to host-error-monitor which is geared toward Intel."
        },
        {
            "timestamp": 1638963670,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 7: Code-Review+1"
        },
        {
            "timestamp": 1638966971,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 7: Verified+1 Code-Review+2"
        },
        {
            "timestamp": 1638966973,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Change has been successfully rebased and submitted as b5cddbb2c96cca6ae055575fa6580f06b9a1a844 by Patrick Williams"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "9eed6d9b01b17aa9992557de8292679a5bb0302b",
            "parents": [
                "39df638688aebf09820d869b57d1b74a3f615353"
            ],
            "ref": "refs/changes/67/46567/1",
            "uploader": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "createdOn": 1630688197,
            "author": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "type": "ADDED",
                    "insertions": 174,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 174,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "73634a00c258f34b075bf8703eee495533d5a973",
            "parents": [
                "39df638688aebf09820d869b57d1b74a3f615353"
            ],
            "ref": "refs/changes/67/46567/2",
            "uploader": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "createdOn": 1630688517,
            "author": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 30,
                    "reviewer": {
                        "name": "John Broadbent",
                        "email": "jebr@google.com",
                        "username": "jebr224"
                    },
                    "message": "NIT: have you thought about the which schema's you would use to receive repair actions. \nIt is not critical for this doc, I am just curious."
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 30,
                    "reviewer": {
                        "name": "Claire Weinan",
                        "email": "cweinan@google.com",
                        "username": "daylight22"
                    },
                    "message": "Good question; here are some of the schemas that I think we could potentially use:\n- Use JobService/Job schema for general repair tasks\n- Use TaskService/Task schema for long-running repair tasks\n- Or maybe for a simpler approach (but not within bmcweb OEM policy at https://github.com/openbmc/bmcweb/blob/master/OEM_SCHEMAS.md ?), add an OemAction in the schema for the specific component we want to repair. For example, add an OemAction in the Memory schema for initiating DIMM repairs."
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 30,
                    "reviewer": {
                        "name": "John Broadbent",
                        "email": "jebr@google.com",
                        "username": "jebr224"
                    },
                    "message": "- JobService is defined in the redfish schema, but not implemented in bmcweb (the current implementation of redfish for openbmc)\n\n- TaskService sounds reasonable, can you check with Ed (edtanous) to make sure that bmcweb is onboard.\n\n- If the answer is a non standard google OemAction. It might be a mistake for openbmc to host this repo."
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 30,
                    "reviewer": {
                        "name": "Claire Weinan",
                        "email": "cweinan@google.com",
                        "username": "daylight22"
                    },
                    "message": "Thanks. I will mark this comment as resolved as it's not critical for the current version of this doc, but will follow up on this topic."
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 30,
                    "reviewer": {
                        "name": "Claire Weinan",
                        "email": "cweinan@google.com",
                        "username": "daylight22"
                    },
                    "message": "Also another idea is for the client to POST (create) to a Redfish LogEntryCollection for a LogService. We would be giving extra meaning to POST (create) -- not just creating a log entry but actually triggering an action based on what we receive in that new entry. But maybe it's simpler than creating a job, etc. Also I looked into Tasks more and it seems like the client can't directly POST (create) to a TaskCollection to request a Task, but rather the client makes a request to another service which then can create a Task if the request is for a long-running operation."
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 34,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Has there been any look into phosphor-debug-collector?  Most of what is necessary for crashdump is conceptually very similar to what IBM does in something they call a \"system dump\".  It seems to me like adding support for crashdump to phosphor-debug-collector would be relatively straight-forward and then the rest of the infrastructure would be done for you."
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 34,
                    "reviewer": {
                        "name": "John Broadbent",
                        "email": "jebr@google.com",
                        "username": "jebr224"
                    },
                    "message": "I don't know much about phosphor-debug-collector, but it is a reasonable question."
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 34,
                    "reviewer": {
                        "name": "Claire Weinan",
                        "email": "cweinan@google.com",
                        "username": "daylight22"
                    },
                    "message": "Sounds good, the back-end implementation of the fault log could live in the phosphor-debug-collector module."
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 34,
                    "reviewer": {
                        "name": "John Broadbent",
                        "email": "jebr@google.com",
                        "username": "jebr224"
                    },
                    "message": "The way I understand it, Patrick is advocating for you to not make a daemon/module, but rather add the needed functionality to an existing daemon. Which is a very reasonable thing to do.\n\nIf you want to change phosphor-debug-collector, you need to update the doc (and not write a new daemon/module) you need to update this doc to reflect this design decision.\n\nI suspect you need to do more research on phosphor-debug-collector to know if that is a viable option or not."
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 34,
                    "reviewer": {
                        "name": "Claire Weinan",
                        "email": "cweinan@google.com",
                        "username": "daylight22"
                    },
                    "message": "Yes I'm thinking we can add a new dump type (fault log) into an existing phosphor-debug-collector daemon (specifically the one with main() function in dump_manager_main.cpp). The new fault log would contain dump files that are collected in a variety of ways in a variety of formats. So we would create a new fault log dump entry class (deriving from the \"Entry\" class in dump_entry.hpp) that adds a \"dump type\" member variable to identify the type of data that an entry's corresponding dump file contains.\n\nI am open to feedback on whether this sounds reasonable."
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 34,
                    "reviewer": {
                        "name": "Claire Weinan",
                        "email": "cweinan@google.com",
                        "username": "daylight22"
                    },
                    "message": "Updated the design doc with details from this comment thread."
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 56,
                    "reviewer": {
                        "name": "John Broadbent",
                        "email": "jebr@google.com",
                        "username": "jebr224"
                    },
                    "message": "Are there any updates to the proposal since 2021-01-14. \n\nThe link take me to a two page document that has a list of 9 high level requirements, and a block diagram. Is there anything more descriptive."
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 56,
                    "reviewer": {
                        "name": "Claire Weinan",
                        "email": "cweinan@google.com",
                        "username": "daylight22"
                    },
                    "message": "While the doc is still quite short, there have been some additions; I will post the link when it becomes available."
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 56,
                    "reviewer": {
                        "name": "Claire Weinan",
                        "email": "cweinan@google.com",
                        "username": "daylight22"
                    },
                    "message": "It seems to be taking some time to get the link to the new doc version publicly available. I will resolve this comment for now, but I will add the new link when I receive it."
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 56,
                    "reviewer": {
                        "name": "Claire Weinan",
                        "email": "cweinan@google.com",
                        "username": "daylight22"
                    },
                    "message": "Updated the OopenCompute proposal doc link in Patchset 6"
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 58,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "This URL can be trimmed, to remove the \"view?usp=sharing\" suffix, and it will still work correctly in Google Drive."
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 58,
                    "reviewer": {
                        "name": "Claire Weinan",
                        "email": "cweinan@google.com",
                        "username": "daylight22"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 62,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "Redfish should always be capitalized, I think."
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 62,
                    "reviewer": {
                        "name": "Claire Weinan",
                        "email": "cweinan@google.com",
                        "username": "daylight22"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 108,
                    "reviewer": {
                        "name": "John Broadbent",
                        "email": "jebr@google.com",
                        "username": "jebr224"
                    },
                    "message": "NIT: that term does not have the same context to openbmc"
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 108,
                    "reviewer": {
                        "name": "Claire Weinan",
                        "email": "cweinan@google.com",
                        "username": "daylight22"
                    },
                    "message": "Do you have a suggestion on a better term to use?"
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 108,
                    "reviewer": {
                        "name": "John Broadbent",
                        "email": "jebr@google.com",
                        "username": "jebr224"
                    },
                    "message": "\"In order to monitor memory out of band, a system...\" \nsome openbmc folk are oems, and they are selling machines with openbmc's on them."
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 108,
                    "reviewer": {
                        "name": "Claire Weinan",
                        "email": "cweinan@google.com",
                        "username": "daylight22"
                    },
                    "message": "Thanks, will fix."
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 108,
                    "reviewer": {
                        "name": "Claire Weinan",
                        "email": "cweinan@google.com",
                        "username": "daylight22"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 121,
                    "reviewer": {
                        "name": "John Broadbent",
                        "email": "jebr@google.com",
                        "username": "jebr224"
                    },
                    "message": "How would the host kernel write information to the bmc, for the hw-fault-monitor to read?"
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 121,
                    "reviewer": {
                        "name": "Claire Weinan",
                        "email": "cweinan@google.com",
                        "username": "daylight22"
                    },
                    "message": "Added clarification."
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 121,
                    "reviewer": {
                        "name": "John Broadbent",
                        "email": "jebr@google.com",
                        "username": "jebr224"
                    },
                    "message": "Maybe I need more context. \n\nIf there is an fault on the host the host can save that fault information to the bmc. \nWhy would we want that? the host can either save it's own fault log, or send the fault to a service?"
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 121,
                    "reviewer": {
                        "name": "Claire Weinan",
                        "email": "cweinan@google.com",
                        "username": "daylight22"
                    },
                    "message": "Our goal is to build a BMC-centric logging system, so that data center monitoring tools can get various fault logs from a single interface (bmcweb Redfish logs). Also, we'd like to have the fault info in BMC so that in the future the hardware fault monitor can use it to activate preventive actions on platforms without interrupting the OS, such as soft post-package repair or adaptive double-device data correction."
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 121,
                    "reviewer": {
                        "name": "Claire Weinan",
                        "email": "cweinan@google.com",
                        "username": "daylight22"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 132,
                    "reviewer": {
                        "name": "Josh Lehan",
                        "email": "krellan@google.com",
                        "username": "Krellan"
                    },
                    "message": "It looks like \"OverwritePolicy=unknown\" is a snippet of text that would appear in a configuration file. If so, surround it with `backticks` like this, so that it will properly display as file/command/example text, not ordinary prose text."
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 132,
                    "reviewer": {
                        "name": "Claire Weinan",
                        "email": "cweinan@google.com",
                        "username": "daylight22"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 155,
                    "reviewer": {
                        "name": "John Broadbent",
                        "email": "jebr@google.com",
                        "username": "jebr224"
                    },
                    "message": "For my understanding, How will hw-fault-monitor's overwrite policy differ most from bmcwebs?"
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 155,
                    "reviewer": {
                        "name": "Claire Weinan",
                        "email": "cweinan@google.com",
                        "username": "daylight22"
                    },
                    "message": "It looks like existing bmcweb LogServices are using `WrapsWhenFull` as their overwrite policy. (The possible values defined for LogService.v1_2_0 in are `NeverOverWrites`, `Unknown`, and `WrapsWhenFull`). We would like to use a custom policy to save fault info for first errors and most severe errors (as mentioned briefly in the Requirements section)."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "type": "ADDED",
                    "insertions": 174,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 174,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "5fc326b825600ef3cd060fcc693377138422a083",
            "parents": [
                "39df638688aebf09820d869b57d1b74a3f615353"
            ],
            "ref": "refs/changes/67/46567/3",
            "uploader": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "createdOn": 1633991391,
            "author": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "type": "ADDED",
                    "insertions": 182,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 182,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "7647f81bbff9b42d78f3aaf251929bc1aed2e829",
            "parents": [
                "39df638688aebf09820d869b57d1b74a3f615353"
            ],
            "ref": "refs/changes/67/46567/4",
            "uploader": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "createdOn": 1633991554,
            "author": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 22,
                    "reviewer": {
                        "name": "John Broadbent",
                        "email": "jebr@google.com",
                        "username": "jebr224"
                    },
                    "message": "NIT: after your response to Patrick, I am left wondering if module = daemon/service, or module means something else."
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 22,
                    "reviewer": {
                        "name": "Claire Weinan",
                        "email": "cweinan@google.com",
                        "username": "daylight22"
                    },
                    "message": "You're right that the term \"module\" is confusing here; I change it to just say \"hardware fault monitor\" since the hardware fault monitor won't have its own new module (OpenBMC repo) but will have its various components implemented in existing modules."
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 22,
                    "reviewer": {
                        "name": "Claire Weinan",
                        "email": "cweinan@google.com",
                        "username": "daylight22"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 129,
                    "reviewer": {
                        "name": "John Broadbent",
                        "email": "jebr@google.com",
                        "username": "jebr224"
                    },
                    "message": "NIT: not kernel. replace with \"system\", or \"fault management tools\" or omit entirely."
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 129,
                    "reviewer": {
                        "name": "Claire Weinan",
                        "email": "cweinan@google.com",
                        "username": "daylight22"
                    },
                    "message": "Will fix."
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 129,
                    "reviewer": {
                        "name": "Claire Weinan",
                        "email": "cweinan@google.com",
                        "username": "daylight22"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "type": "ADDED",
                    "insertions": 186,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 186,
            "sizeDeletions": 0
        },
        {
            "number": 5,
            "revision": "1aba28a7985d2620962d294af9bdc8e2c6b060d8",
            "parents": [
                "39df638688aebf09820d869b57d1b74a3f615353"
            ],
            "ref": "refs/changes/67/46567/5",
            "uploader": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "createdOn": 1634697360,
            "author": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "type": "ADDED",
                    "insertions": 199,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 199,
            "sizeDeletions": 0
        },
        {
            "number": 6,
            "revision": "e98c7b56253859b32052f3e93ae8a42945356097",
            "parents": [
                "39df638688aebf09820d869b57d1b74a3f615353"
            ],
            "ref": "refs/changes/67/46567/6",
            "uploader": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "createdOn": 1635183308,
            "author": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 132,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "Have you considered rather than a single new monitor to monitor everything, adding new types of base monitors (such as D-Bus or register/PECI) then adding individual monitors for specific signals?  Not sure which way is better..."
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 132,
                    "reviewer": {
                        "name": "Claire Weinan",
                        "email": "cweinan@google.com",
                        "username": "daylight22"
                    },
                    "message": "Good point; it'll probably make sense for us to add separate monitors organized by type of signals monitored."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "type": "ADDED",
                    "insertions": 199,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 199,
            "sizeDeletions": 0
        },
        {
            "number": 7,
            "revision": "1494ded5b135bf9ec9fc5f829590dcdcef048890",
            "parents": [
                "39df638688aebf09820d869b57d1b74a3f615353"
            ],
            "ref": "refs/changes/67/46567/7",
            "uploader": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "createdOn": 1635904638,
            "author": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 182,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Don't phosphor-debug-collector logs currently go into LgoServices/Dump  (I'm not positive but I would have assumed so)?  Is there any way for us to consolidate this aspect?  I don't fully understand from reading this what a \"separate custom overwrite policy\" is and why that can't be included in (or enhanced with) what phosphor-debug-collector already does.  \n\nCan you elaborate on this?"
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "line": 182,
                    "reviewer": {
                        "name": "Claire Weinan",
                        "email": "cweinan@google.com",
                        "username": "daylight22"
                    },
                    "message": "In log_services.hpp in the bmcweb repo I see requestRoutesBMCDumpService() corresponding to /redfish/v1/Managers/bmc/LogServices/Dump has \"asyncResp->res.jsonValue[\"OverWritePolicy\"] = \"WrapsWhenFull\";\". From what I can tell in phosphor-debug-collector this log is implemented in dump_manager_bmc.cpp which invokes the dreport script to collect various debug info and save it into a file as a dump entry, but when the log is full getAllowedSize() will report a QuotaExceeded error and the dump won't be collected (i.e. the log doesn't actually wrap when full). For fault log we're thinking of logging a few different types of entries (e.g. some entries contain polled register values, some contain sensor values associated with a crashdump, some contain machine check error data, etc.), and in case we run out of space keep the oldest N number of certain types of entries (don't save newer entries beyond that) and for other types of entries delete the oldest entries to make space for new entries."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "type": "ADDED",
                    "insertions": 200,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 200,
            "sizeDeletions": 0
        },
        {
            "number": 8,
            "revision": "b5cddbb2c96cca6ae055575fa6580f06b9a1a844",
            "parents": [
                "a53780e9d76c25847c502d188f9af4d29b0bc28f"
            ],
            "ref": "refs/changes/67/46567/8",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1638966973,
            "author": {
                "name": "Claire Weinan",
                "email": "cweinan@google.com",
                "username": "daylight22"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "designs/hw-fault-monitor.md",
                    "type": "ADDED",
                    "insertions": 200,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 200,
            "sizeDeletions": 0
        }
    ]
}