{
    "project": "openbmc/phosphor-certificate-manager",
    "branch": "master",
    "id": "Ibd8bd8735238d6ec101a2428241bb1727e3ac9a9",
    "number": 50011,
    "subject": "iwyu",
    "owner": {
        "name": "Nan Zhou",
        "email": "nanzhoumails@gmail.com",
        "username": "FighterNan"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-certificate-manager/+/50011",
    "commitMessage": "iwyu\n\nThis changes uses its best effort to clean up headers according to iwyu.\n\nReference:\nhttps://include-what-you-use.org/\n\nSigned-off-by: Nan Zhou <nanzhoumails@gmail.com>\nChange-Id: Ibd8bd8735238d6ec101a2428241bb1727e3ac9a9\n",
    "createdOn": 1640743337,
    "lastUpdated": 1641470021,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1640743337,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1640743345,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1640743757,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/32533/ : SUCCESS"
        },
        {
            "timestamp": 1641215901,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1641320201,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1641372221,
            "reviewer": {
                "name": "MARRI DEVENDER RAO",
                "email": "devenrao@in.ibm.com",
                "username": "devenrao"
            },
            "message": "Patch Set 1:\n\n(3 comments)"
        },
        {
            "timestamp": 1641372227,
            "reviewer": {
                "name": "MARRI DEVENDER RAO",
                "email": "devenrao@in.ibm.com",
                "username": "devenrao"
            },
            "message": "Patch Set 1: Code-Review+1"
        },
        {
            "timestamp": 1641412500,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Removed reviewer Ed Tanous."
        },
        {
            "timestamp": 1641418131,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1641418152,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1641418152,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1641418180,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/34948/ : FAILURE"
        },
        {
            "timestamp": 1641418518,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 1:\n\n(2 comments)"
        },
        {
            "timestamp": 1641418723,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1641421336,
            "reviewer": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "message": "Uploaded patch set 3: Patch Set 2 was rebased."
        },
        {
            "timestamp": 1641421382,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1641421382,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1641422072,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/34960/ : SUCCESS"
        },
        {
            "timestamp": 1641470021,
            "reviewer": {
                "name": "MARRI DEVENDER RAO",
                "email": "devenrao@in.ibm.com",
                "username": "devenrao"
            },
            "message": "Patch Set 3: Code-Review+1"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "8c49b89dd7d77207e5b49f0dc01dc06ce3e17a0c",
            "parents": [
                "5eb721e0971d65305f4fb5f06ff40c5c5abdc503"
            ],
            "ref": "refs/changes/11/50011/1",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1640743337,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I don't have much in the way of opinions on this.  Seems like a straight-forward change to the includes.\n\nIf this is a valuable tool to run it would be nice if we could get it in openbmc-build-scripts so it is used everywhere in CI."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Thanks for your comment Patrick. \n\nAs said in the IWYU homepage, it was originally developed specifically for the Google source tree. According to my experience, it was not so reliable that we can automatically accept all its suggestions, especially in the OpenBMC environment. It's good to run before sending a PR though."
                },
                {
                    "file": "argument.cpp",
                    "line": 20,
                    "reviewer": {
                        "name": "MARRI DEVENDER RAO",
                        "email": "devenrao@in.ibm.com",
                        "username": "devenrao"
                    },
                    "message": "as getopt.h is included in argument.hpp these header files are not required, compiles even if I remove them.\nstarted testing as the commit message says best iwyu works on best effort."
                },
                {
                    "file": "argument.cpp",
                    "line": 20,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "cstdlib is for exit.\n\nYeah, unistd is not needed to the best of my knowlege. Fixed. Might be a false positive in IWYU. Thanks!\n\nAnd yeah, removing any of the headers we added in this change won't cause any compilation issue, since they are all added by other headers implicitly. IWYU recommends no relying on it but add all headers explicitly."
                },
                {
                    "file": "argument.cpp",
                    "line": 22,
                    "reviewer": {
                        "name": "MARRI DEVENDER RAO",
                        "email": "devenrao@in.ibm.com",
                        "username": "devenrao"
                    },
                    "message": "same as above"
                },
                {
                    "file": "argument.cpp",
                    "line": 22,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "pair is for pair. I believe this is needed. We used std::map here."
                },
                {
                    "file": "certificate.hpp",
                    "line": 13,
                    "reviewer": {
                        "name": "MARRI DEVENDER RAO",
                        "email": "devenrao@in.ibm.com",
                        "username": "devenrao"
                    },
                    "message": "code compiles without these too but I guess they are getting the includes from some other header file. I can see that functional and string headers are coming from watch.hpp.\n\nI guess it is good to include these headers here or else when we remove watch.hpp include in this header file due to some reason, we will be forced to bring back these.\n\nlooks like we need to take what ever is given by iwwyu as it includes files logically."
                },
                {
                    "file": "certificate.hpp",
                    "line": 13,
                    "reviewer": {
                        "name": "Nan Zhou",
                        "email": "nanzhoumails@gmail.com",
                        "username": "FighterNan"
                    },
                    "message": "Right,\n\n<xyz/openbmc_project/Object.hpp> is for sdbusplus::server::object::object\n\nstring & string_view & unordered_map are for std::string, std::string_view, and std::unordered_map.\n\n\nAll are referenced directly in this header. They are added by other headers implicitly so without them we still compile."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "argument.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -2
                },
                {
                    "file": "certificate.cpp",
                    "type": "MODIFIED",
                    "insertions": 18,
                    "deletions": -2
                },
                {
                    "file": "certificate.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -2
                },
                {
                    "file": "certs_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "certs_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -1
                },
                {
                    "file": "csr.cpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": 0
                },
                {
                    "file": "csr.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "mainapp.cpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -1
                },
                {
                    "file": "test/certs_manager_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": -5
                },
                {
                    "file": "watch.cpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 100,
            "sizeDeletions": 14
        },
        {
            "number": 2,
            "revision": "a48da16b9cd496ab553a372e90bd879a976f9ff1",
            "parents": [
                "a1af5502bfb1169ea748f8ba1d8d2a11f58e3e06"
            ],
            "ref": "refs/changes/11/50011/2",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1641418131,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "argument.cpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                },
                {
                    "file": "certificate.cpp",
                    "type": "MODIFIED",
                    "insertions": 18,
                    "deletions": -2
                },
                {
                    "file": "certificate.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -2
                },
                {
                    "file": "certs_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "certs_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -1
                },
                {
                    "file": "csr.cpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": 0
                },
                {
                    "file": "csr.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "mainapp.cpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -1
                },
                {
                    "file": "test/certs_manager_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": -5
                },
                {
                    "file": "watch.cpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 98,
            "sizeDeletions": 14
        },
        {
            "number": 3,
            "revision": "8a4356cc9107ffb20751f0dea90958c1cb5f6a17",
            "parents": [
                "2f5533ec5aef4faa0ee14b1ed873a52a990ebeb6"
            ],
            "ref": "refs/changes/11/50011/3",
            "uploader": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "createdOn": 1641421336,
            "author": {
                "name": "Nan Zhou",
                "email": "nanzhoumails@gmail.com",
                "username": "FighterNan"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "argument.cpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                },
                {
                    "file": "certificate.cpp",
                    "type": "MODIFIED",
                    "insertions": 18,
                    "deletions": -2
                },
                {
                    "file": "certificate.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -2
                },
                {
                    "file": "certs_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "certs_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -1
                },
                {
                    "file": "csr.cpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": 0
                },
                {
                    "file": "csr.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "mainapp.cpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -1
                },
                {
                    "file": "test/certs_manager_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": -5
                },
                {
                    "file": "watch.cpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 98,
            "sizeDeletions": 14
        }
    ]
}