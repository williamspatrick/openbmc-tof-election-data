{
    "project": "openbmc/phosphor-logging",
    "branch": "master",
    "id": "If37857cc3748df1ea6f767ce535b02c63cde8370",
    "number": 45311,
    "subject": "lg2: initial implementation of C++20 structured logging",
    "owner": {
        "name": "Patrick Williams",
        "email": "patrick@stwcx.xyz",
        "username": "williamspatrick"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-logging/+/45311",
    "commitMessage": "lg2: initial implementation of C++20 structured logging\n\nSigned-off-by: Patrick Williams <patrick@stwcx.xyz>\nChange-Id: If37857cc3748df1ea6f767ce535b02c63cde8370\n",
    "createdOn": 1627416924,
    "lastUpdated": 1629983169,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1627416924,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1627416949,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1627417848,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/23017/ : SUCCESS"
        },
        {
            "timestamp": 1627439312,
            "reviewer": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1627440194,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1627458770,
            "reviewer": {
                "name": "Artem Senichev",
                "email": "artemsen@gmail.com",
                "username": "artemsen"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1627485550,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1627527168,
            "reviewer": {
                "name": "Lei YU",
                "email": "yulei.sh@bytedance.com",
                "username": "mine260309"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1627949728,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1627949754,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1627950594,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/23605/ : SUCCESS"
        },
        {
            "timestamp": 1627958147,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Uploaded patch set 3: Patch Set 2 was rebased."
        },
        {
            "timestamp": 1627958160,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1627959008,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/23619/ : SUCCESS"
        },
        {
            "timestamp": 1628228489,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Uploaded patch set 4: Patch Set 3 was rebased."
        },
        {
            "timestamp": 1628228506,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1628229403,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/23946/ : SUCCESS"
        },
        {
            "timestamp": 1629741506,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1629752823,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Uploaded patch set 5: Patch Set 4 was rebased."
        },
        {
            "timestamp": 1629752839,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1629753889,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/24838/ : SUCCESS"
        },
        {
            "timestamp": 1629983132,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 5: Code-Review+2"
        },
        {
            "timestamp": 1629983169,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Change has been successfully rebased and submitted as b2a3aa2fc800d340d4d3792eac8fa373010897e5 by Matt Spinler"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "aec304fb7b6b8cce458f81b51d69252f59fcc3e5",
            "parents": [
                "ae9ebb704971d0cec541d5a0df28f724480e93a9"
            ],
            "ref": "refs/changes/11/45311/1",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1627416924,
            "author": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "lib/include/phosphor-logging/lg2.hpp",
                    "line": 5,
                    "reviewer": {
                        "name": "Lei YU",
                        "email": "yulei.sh@bytedance.com",
                        "username": "mine260309"
                    },
                    "message": "Could use #endif here.\nIf the compiler does not support C++20, it will assert anyway."
                },
                {
                    "file": "lib/include/phosphor-logging/lg2.hpp",
                    "line": 5,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Yes, both cause the static_assert but GCC throws a mountain of errors if I change the #else to an #endif.  It is almost 120 lines of errors to sift through to find this static_assert."
                },
                {
                    "file": "lib/include/phosphor-logging/lg2.hpp",
                    "line": 5,
                    "reviewer": {
                        "name": "Artem Senichev",
                        "email": "artemsen@gmail.com",
                        "username": "artemsen"
                    },
                    "message": "We could use `#error phosphor-logging ...' instead of `static_assert()`."
                },
                {
                    "file": "lib/include/phosphor-logging/lg2.hpp",
                    "line": 5,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Sure, I can switch to #error.  It seems roughly equivalent.\n\nThere is no change in the number of errors displayed between:\n\n   #if ...\n   #error ...\n   #endif\n\nOr:\n  \n   #if ...\n   static_assert(...)\n   #endif\n\nBoth cases the parser continues interpreting past the #error/static_assert and throws lots of needless errors about not understanding 'concept' and many other C++20-only syntax errors.  From a usability perspective I think it is much better to keep the #endif at the bottom of the file."
                },
                {
                    "file": "lib/include/phosphor-logging/lg2.hpp",
                    "line": 5,
                    "reviewer": {
                        "name": "Lei YU",
                        "email": "yulei.sh@bytedance.com",
                        "username": "mine260309"
                    },
                    "message": "Ack\n\nThen it is really better to use `#else` here."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2.hpp",
                    "type": "ADDED",
                    "insertions": 108,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/concepts.hpp",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/conversion.hpp",
                    "type": "ADDED",
                    "insertions": 302,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/flags.hpp",
                    "type": "ADDED",
                    "insertions": 107,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/level.hpp",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/logger.hpp",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/meson.build",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "lib/lg2_logger.cpp",
                    "type": "ADDED",
                    "insertions": 232,
                    "deletions": 0
                },
                {
                    "file": "lib/meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 817,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "83ee3c5703f98f484b5ce849d4d920855d5ade32",
            "parents": [
                "af12d09a485c9a82aee10580e7fb3c8aa20312d5"
            ],
            "ref": "refs/changes/11/45311/2",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1627949728,
            "author": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2.hpp",
                    "type": "ADDED",
                    "insertions": 110,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/concepts.hpp",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/conversion.hpp",
                    "type": "ADDED",
                    "insertions": 302,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/flags.hpp",
                    "type": "ADDED",
                    "insertions": 105,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/level.hpp",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/logger.hpp",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/meson.build",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "lib/lg2_logger.cpp",
                    "type": "ADDED",
                    "insertions": 232,
                    "deletions": 0
                },
                {
                    "file": "lib/meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 817,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "0024e7fb426e167a22919c772e0e0d058056b7ce",
            "parents": [
                "48f5e8353256e4f14b2c284028226b471ea3df82"
            ],
            "ref": "refs/changes/11/45311/3",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1627958147,
            "author": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2.hpp",
                    "type": "ADDED",
                    "insertions": 110,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/concepts.hpp",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/conversion.hpp",
                    "type": "ADDED",
                    "insertions": 302,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/flags.hpp",
                    "type": "ADDED",
                    "insertions": 105,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/level.hpp",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/logger.hpp",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/meson.build",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "lib/lg2_logger.cpp",
                    "type": "ADDED",
                    "insertions": 232,
                    "deletions": 0
                },
                {
                    "file": "lib/meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 817,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "a3a540e721b81034dc046aaefcfa0b5664b1cd6c",
            "parents": [
                "6d822098fc61dec175915e6f72ca605035c999a5"
            ],
            "ref": "refs/changes/11/45311/4",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1628228489,
            "author": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2.hpp",
                    "type": "ADDED",
                    "insertions": 110,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/concepts.hpp",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/conversion.hpp",
                    "type": "ADDED",
                    "insertions": 302,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/flags.hpp",
                    "type": "ADDED",
                    "insertions": 105,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/level.hpp",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/logger.hpp",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/meson.build",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "lib/lg2_logger.cpp",
                    "type": "ADDED",
                    "insertions": 232,
                    "deletions": 0
                },
                {
                    "file": "lib/meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 817,
            "sizeDeletions": 0
        },
        {
            "number": 5,
            "revision": "e8d63e8492444c0c2c1e3e05198df9a69e9891e5",
            "parents": [
                "05830826ca45f034164ee9f2eca11c273ffca53e"
            ],
            "ref": "refs/changes/11/45311/5",
            "uploader": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "createdOn": 1629752823,
            "author": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2.hpp",
                    "type": "ADDED",
                    "insertions": 110,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/concepts.hpp",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/conversion.hpp",
                    "type": "ADDED",
                    "insertions": 302,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/flags.hpp",
                    "type": "ADDED",
                    "insertions": 105,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/level.hpp",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/logger.hpp",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/meson.build",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "lib/lg2_logger.cpp",
                    "type": "ADDED",
                    "insertions": 232,
                    "deletions": 0
                },
                {
                    "file": "lib/meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 817,
            "sizeDeletions": 0
        },
        {
            "number": 6,
            "revision": "b2a3aa2fc800d340d4d3792eac8fa373010897e5",
            "parents": [
                "87896d58b10c53f754850421560604b9dfdc45ba"
            ],
            "ref": "refs/changes/11/45311/6",
            "uploader": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "createdOn": 1629983169,
            "author": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2.hpp",
                    "type": "ADDED",
                    "insertions": 110,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/concepts.hpp",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/conversion.hpp",
                    "type": "ADDED",
                    "insertions": 302,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/flags.hpp",
                    "type": "ADDED",
                    "insertions": 105,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/level.hpp",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/lg2/logger.hpp",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "lib/include/phosphor-logging/meson.build",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "lib/lg2_logger.cpp",
                    "type": "ADDED",
                    "insertions": 232,
                    "deletions": 0
                },
                {
                    "file": "lib/meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 817,
            "sizeDeletions": 0
        }
    ]
}