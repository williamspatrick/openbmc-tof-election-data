{
    "project": "openbmc/phosphor-dbus-interfaces",
    "branch": "master",
    "id": "I454bfe9f871909adf0d8fdc2a1af599ac4976858",
    "number": 43831,
    "subject": "logging: entry: add entry type property and OemRecordFormat",
    "owner": {
        "name": "Willy Tu",
        "email": "wltu@google.com",
        "username": "wltu"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-dbus-interfaces/+/43831",
    "commitMessage": "logging: entry: add entry type property and OemRecordFormat\n\nAdd property for EntryType and OemRecordFormat to have better coverage\nof different entry types in Redfish.\n\nEntryType allow us to support OEM logging services that provide more\nflexibility in exporting logs.\n\nThis change is to support the OEM LogEntry in redfish. It requires\nOemRecordFormat for OEM type entries to differentiate the OEM logs.\n\nChange-Id: I454bfe9f871909adf0d8fdc2a1af599ac4976858\nSigned-off-by: Willy Tu <wltu@google.com>\n",
    "hashtags": [
        "dbus-api-drive-wltu"
    ],
    "createdOn": 1623048264,
    "lastUpdated": 1639113754,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1623048264,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1623048287,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1623048670,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/18843/ : SUCCESS"
        },
        {
            "timestamp": 1623274526,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Hashtag added: dbus-api-drive-wltu"
        },
        {
            "timestamp": 1623274568,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1623274582,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1623274950,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/19196/ : SUCCESS"
        },
        {
            "timestamp": 1623340935,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 2:\n\nping"
        },
        {
            "timestamp": 1623361461,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2:\n\nI think one thing that would help a lot here is to get an understanding of what you're wanting to accomplish with this change.  From there, we can work back to what the interface looks like.  As written, it looks a little disingenuous to the openbmc architecture, because in general log entries can be turned into either SEL logs, or Redfish logs, depending on which daemon is reading them."
        },
        {
            "timestamp": 1623687862,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 3: Commit message was updated."
        },
        {
            "timestamp": 1623688219,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 3:\n\n> Patch Set 2:\n> \n> I think one thing that would help a lot here is to get an understanding of what you're wanting to accomplish with this change.  From there, we can work back to what the interface looks like.  As written, it looks a little disingenuous to the openbmc architecture, because in general log entries can be turned into either SEL logs, or Redfish logs, depending on which daemon is reading them.\n\nThis change is to support the OEM LogEntry in redfish. It requires OemRecordFormat for OEM type entries to differentiate the OEM logs. I am using it to support https://gerrit.openbmc-project.xyz/c/openbmc/entity-manager/+/44028 for chassis/device logs. It just gives the options to the daemons to export all different logs that they want."
        },
        {
            "timestamp": 1623793290,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 3:\n\n(3 comments)"
        },
        {
            "timestamp": 1623914102,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1625073837,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 4: Patch Set 3 was rebased"
        },
        {
            "timestamp": 1625073863,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1625074251,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/21147/ : SUCCESS"
        },
        {
            "timestamp": 1625598128,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 4:\n\nI think this commit needs some more design / consensus behind it."
        },
        {
            "timestamp": 1626373523,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 4:\n\n> Patch Set 4:\n> \n> I think this commit needs some more design / consensus behind it.\n\nYeah, this is too specific for Redfish and I am not sure how useful it will be in general"
        },
        {
            "timestamp": 1639113754,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Removed reviewer Ed Tanous."
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "e203d1959ba9102ce4996fb20be2e48f64f2b96c",
            "parents": [
                "28dcc9a3bd3cf2e0f99f8d225dfd47b85815720e"
            ],
            "ref": "refs/changes/31/43831/1",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1623048264,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "xyz/openbmc_project/Logging/Entry.interface.yaml",
                    "type": "MODIFIED",
                    "insertions": 26,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 26,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "b511ea7052d66be2ccc507f0dbe82d50d70b5269",
            "parents": [
                "08baf48ad5f15774d393fbbf4e9479a0ef3e82d0"
            ],
            "ref": "refs/changes/31/43831/2",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1623274568,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Logging/Entry.interface.yaml",
                    "type": "MODIFIED",
                    "insertions": 26,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 26,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "521cc9790b3fe0b402eaf8fb3f5fdeedd3446b69",
            "parents": [
                "08baf48ad5f15774d393fbbf4e9479a0ef3e82d0"
            ],
            "ref": "refs/changes/31/43831/3",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1623687862,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 8,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I don't really understand what this commit is proposing.  Log entries aren't \"Redfish\" or \"SEL\" as it is.  They can be transposed into Redfish events or SELs, but they are *not* those things and never were intended to be those things.  Likely they contain a superset of information that those external interfaces might want.\n\nI don't think we should expect a logging entry to say \"I want to be surfaced out this particular external interface\".\n\nWhat would we do for existing logging entries?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 8,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "yeah, this is to support the Redfish property of the same name. It help differentiate how the log is processed. But as you were saying... sounds like we don't want that restriction at all.\n\n----\n\nThere shouldn't be any changes to existing logging entries. If it does, I don't think we should add this change then."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "How?  What does an \"OEM Record\" look like?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "OEM Record is just a free string that the end client can use to determine which way to process the log.... but it might be too open to be part of the Dbus API."
                },
                {
                    "file": "yaml/xyz/openbmc_project/Logging/Entry.interface.yaml",
                    "line": 64,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "What does a proper value of this property look like?  I can't even make a judgement on this property because there isn't any information."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Logging/Entry.interface.yaml",
                    "type": "MODIFIED",
                    "insertions": 26,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 26,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "be656ba574bd16b22022f8816616103e4e88b679",
            "parents": [
                "1f971f2d647b6d301208c4e39b3bbfb94eb1d029"
            ],
            "ref": "refs/changes/31/43831/4",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1625073837,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "yaml/xyz/openbmc_project/Logging/Entry.interface.yaml",
                    "type": "MODIFIED",
                    "insertions": 26,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 26,
            "sizeDeletions": 0
        }
    ]
}