{
    "project": "openbmc/phosphor-post-code-manager",
    "branch": "master",
    "id": "I1d35777e47d507c2bba5b6b6afa72ca70cb23155",
    "number": 49951,
    "subject": "Fix 'usTimeOffset' was not declared error",
    "owner": {
        "name": "Alan Kuo",
        "email": "Alan_Kuo@quantatw.com",
        "username": "Alan-Kuo-TW"
    },
    "url": "https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-post-code-manager/+/49951",
    "commitMessage": "Fix 'usTimeOffset' was not declared error\n\nWhen enable 'bios-post-code-log' feature will cause 'usTimeOffset'\nwas not declared error, therefore changing the scope of 'usTimeOffset'\nvariable.\n\nTested:\n    - Tested build OK.\n    - Check /var/log/redfish OK.\n      1970-01-01T00:02:38.626333+00:00 OpenBMC.0.1.BIOSPOSTCode,2,0.0000,0x01\n      1970-01-01T00:02:38.656143+00:00 OpenBMC.0.1.BIOSPOSTCode,2,0.0183,0x02\n      1970-01-01T00:02:38.664210+00:00 OpenBMC.0.1.BIOSPOSTCode,2,0.0420,0x02\n\nSigned-off-by: Alan Kuo <Alan_Kuo@quantatw.com>\nChange-Id: I1d35777e47d507c2bba5b6b6afa72ca70cb23155\n",
    "createdOn": 1640228929,
    "lastUpdated": 1640674104,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1640228929,
            "reviewer": {
                "name": "Alan Kuo",
                "email": "Alan_Kuo@quantatw.com",
                "username": "Alan-Kuo-TW"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1640228946,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1640228970,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/32397/ : FAILURE"
        },
        {
            "timestamp": 1640229263,
            "reviewer": {
                "name": "Alan Kuo",
                "email": "Alan_Kuo@quantatw.com",
                "username": "Alan-Kuo-TW"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1640229277,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1640229332,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/32398/ : SUCCESS"
        },
        {
            "timestamp": 1640229355,
            "reviewer": {
                "name": "Kuiying Wang",
                "email": "wangkuiying.wky@alibaba-inc.com",
                "username": "kuiyingw"
            },
            "message": "Patch Set 2: Code-Review+1"
        },
        {
            "timestamp": 1640234211,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1640243512,
            "reviewer": {
                "name": "Alan Kuo",
                "email": "Alan_Kuo@quantatw.com",
                "username": "Alan-Kuo-TW"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1640243527,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1640243582,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/32405/ : SUCCESS"
        },
        {
            "timestamp": 1640243820,
            "reviewer": {
                "name": "Alan Kuo",
                "email": "Alan_Kuo@quantatw.com",
                "username": "Alan-Kuo-TW"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1640670502,
            "reviewer": {
                "name": "Alan Kuo",
                "email": "Alan_Kuo@quantatw.com",
                "username": "Alan-Kuo-TW"
            },
            "message": "Patch Set 3:\n\nHi Kuiying and ManojKiran,\nCould you kindly help me to take a look at this commit? Thanks in advance."
        },
        {
            "timestamp": 1640671584,
            "reviewer": {
                "name": "Kuiying Wang",
                "email": "wangkuiying.wky@alibaba-inc.com",
                "username": "kuiyingw"
            },
            "message": "Patch Set 3: Code-Review+2"
        },
        {
            "timestamp": 1640673105,
            "reviewer": {
                "name": "Alan Kuo",
                "email": "Alan_Kuo@quantatw.com",
                "username": "Alan-Kuo-TW"
            },
            "message": "Change has been successfully merged by Alan Kuo"
        },
        {
            "timestamp": 1640674104,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Patch Set 3: Code-Review+1\n\nThanks Alan, this looks much better."
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "6c32c8579e292e6b44fc138034445d6ccebd75a1",
            "parents": [
                "de8d3a537fec2e0b36791cc53aeb963fc746d1da"
            ],
            "ref": "refs/changes/51/49951/1",
            "uploader": {
                "name": "Alan Kuo",
                "email": "Alan_Kuo@quantatw.com",
                "username": "Alan-Kuo-TW"
            },
            "createdOn": 1640228929,
            "author": {
                "name": "Alan Kuo",
                "email": "Alan_Kuo@quantatw.com",
                "username": "Alan-Kuo-TW"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "src/post_code.cpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 2,
            "sizeDeletions": 1
        },
        {
            "number": 2,
            "revision": "1109b77bffeb38cc2dde9b06b89398f3bfb8ecf0",
            "parents": [
                "de8d3a537fec2e0b36791cc53aeb963fc746d1da"
            ],
            "ref": "refs/changes/51/49951/2",
            "uploader": {
                "name": "Alan Kuo",
                "email": "Alan_Kuo@quantatw.com",
                "username": "Alan-Kuo-TW"
            },
            "createdOn": 1640229263,
            "author": {
                "name": "Alan Kuo",
                "email": "Alan_Kuo@quantatw.com",
                "username": "Alan-Kuo-TW"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "src/post_code.cpp",
                    "line": 76,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "rather than increasing the scope, which will cause a cpp check warning when not using the bios-post-code-log flag \n\nsrc/post_code.cpp:76:27: style: Variable 'usTimeOffset' is assigned a value that is never used. [unreadVariable]\n    uint64_t usTimeOffset = 0;\n\n\ncan we move the #ifdef logic into the else block at line number 95 ?\n\nwould that work ?"
                },
                {
                    "file": "src/post_code.cpp",
                    "line": 76,
                    "reviewer": {
                        "name": "Alan Kuo",
                        "email": "Alan_Kuo@quantatw.com",
                        "username": "Alan-Kuo-TW"
                    },
                    "message": "I move the declaration of the 'usTimeOffset' to #ifdef scope, it should fix this issue."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "src/post_code.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 4,
            "sizeDeletions": 4
        },
        {
            "number": 3,
            "revision": "f5e52db77cb580b2a6e9b95d06e26bfd185627d9",
            "parents": [
                "de8d3a537fec2e0b36791cc53aeb963fc746d1da"
            ],
            "ref": "refs/changes/51/49951/3",
            "uploader": {
                "name": "Alan Kuo",
                "email": "Alan_Kuo@quantatw.com",
                "username": "Alan-Kuo-TW"
            },
            "createdOn": 1640243512,
            "author": {
                "name": "Alan Kuo",
                "email": "Alan_Kuo@quantatw.com",
                "username": "Alan-Kuo-TW"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "src/post_code.cpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -6
                }
            ],
            "sizeInsertions": 6,
            "sizeDeletions": 6
        }
    ]
}