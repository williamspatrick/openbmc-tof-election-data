{
    "project": "openbmc/phosphor-power",
    "branch": "master",
    "id": "I5fef87043adb5d677723eb8a20b0aedc4574b7fd",
    "number": 64795,
    "subject": "psu-ng: Add ACBEL PSU pmbus supported commands.",
    "owner": {
        "name": "Faisal Awada",
        "email": "faisal@us.ibm.com",
        "username": "faisal-awada"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-power/+/64795",
    "hashtags": [],
    "createdOn": 1689104901,
    "lastUpdated": 1689717284,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1689104901,
            "reviewer": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1689104917,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1689104918,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1689104994,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/70645/ : FAILURE"
        },
        {
            "timestamp": 1689280848,
            "reviewer": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "message": "Uploaded patch set 2.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1689280861,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1689280861,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1689281314,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/70923/ : SUCCESS"
        },
        {
            "timestamp": 1689347187,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 2: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1689603442,
            "reviewer": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "message": "Uploaded patch set 3: Commit message was updated.\n\nCopied Votes:\n* Code-Review+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE OR changekind:TRIVIAL_REBASE OR is:MIN\")\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1689603480,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1689603480,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1689603927,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3:\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/71161/ : SUCCESS"
        },
        {
            "timestamp": 1689605058,
            "reviewer": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1689605817,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 3: Code-Review+1\n\n(2 comments)"
        },
        {
            "timestamp": 1689620123,
            "reviewer": {
                "name": "Derek Howard",
                "email": "derekh@us.ibm.com",
                "username": "derekhoward55"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1689709718,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 3:\n\n(7 comments)"
        },
        {
            "timestamp": 1689715365,
            "reviewer": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "message": "Uploaded patch set 4.\n\nOutdated Votes:\n* Code-Review+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE OR changekind:TRIVIAL_REBASE OR is:MIN\")\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1689715393,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1689715394,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1689715397,
            "reviewer": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "message": "Patch Set 4:\n\n(7 comments)"
        },
        {
            "timestamp": 1689715416,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/71331/ : FAILURE"
        },
        {
            "timestamp": 1689716242,
            "reviewer": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "message": "Uploaded patch set 5.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1689716279,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1689716279,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1689716728,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/71334/ : SUCCESS"
        },
        {
            "timestamp": 1689717122,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 5: Code-Review+1"
        },
        {
            "timestamp": 1689717221,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 5: Code-Review+1"
        },
        {
            "timestamp": 1689717280,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 5: Code-Review+2"
        },
        {
            "timestamp": 1689717284,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Change has been successfully merged"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "048c4d869847fb022df29da72a2c9291c0914f76",
            "parents": [
                "eae2d6143da1ad85342a09d2614029edcfdf4829"
            ],
            "ref": "refs/changes/95/64795/1",
            "uploader": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "createdOn": 1689104901,
            "author": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 30,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -7
                }
            ],
            "sizeInsertions": 43,
            "sizeDeletions": 7
        },
        {
            "number": 2,
            "revision": "fcab541dbcae23a58059a5dbdabc2ae8e0aba20c",
            "parents": [
                "5d79d36af44c96d40f52643a28f40210b88754ca"
            ],
            "ref": "refs/changes/95/64795/2",
            "uploader": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "createdOn": 1689280848,
            "author": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 17,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "this is a property of the PS and not the system I think?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 17,
                    "reviewer": {
                        "name": "Faisal Awada",
                        "email": "faisal@us.ibm.com",
                        "username": "faisal-awada"
                    },
                    "message": "Done"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 17,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "I guess what I meant is to refer to the ACBEL PSU here and not a system it plugs into. (doesn't matter much since just a commit msg)"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 30,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": -8
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 45,
            "sizeDeletions": 8
        },
        {
            "number": 3,
            "revision": "5c36ddf3ed30c6a762b258373410a1a952ce1c20",
            "parents": [
                "5d79d36af44c96d40f52643a28f40210b88754ca"
            ],
            "ref": "refs/changes/95/64795/3",
            "uploader": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "createdOn": 1689603442,
            "author": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "Nit: Several lines in this commit message are too long and wrap strangely in Gerrit.\n\nThe convention is that the first line (summary) is no longer than 50 characters, and the rest of the lines are limited to 72.\n\nvim will help with formatting.  I have the following line in my ~/.vimrc\n\n```\n  autocmd Filetype gitcommit  setlocal textwidth=72 tabstop=2 shiftwidth=2 expandtab spell\n```\n\nAlso, I would recommend against mentioning specific system types like Bonnell and Rainier unless necessary.  I think these changes are specific to the ACBEL PSU type rather than the system type right?  So you could mention ACBEL PSU enhancements and regression testing on other PSU types like IBMCFFPS."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Faisal Awada",
                        "email": "faisal@us.ibm.com",
                        "username": "faisal-awada"
                    },
                    "message": "Done"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 12,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "Nit: Was this part of the previous sentence?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 12,
                    "reviewer": {
                        "name": "Faisal Awada",
                        "email": "faisal@us.ibm.com",
                        "username": "faisal-awada"
                    },
                    "message": "Done"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 17,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "ACBEL?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 17,
                    "reviewer": {
                        "name": "Faisal Awada",
                        "email": "faisal@us.ibm.com",
                        "username": "faisal-awada"
                    },
                    "message": "Done"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 20,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "PELs are an error log extension that is only used on OpenPower systems.  So it might be better to mention that an error log was reported."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 20,
                    "reviewer": {
                        "name": "Faisal Awada",
                        "email": "faisal@us.ibm.com",
                        "username": "faisal-awada"
                    },
                    "message": "Done"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 726,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "One OpenBMC coding convention is to put braces around all if/else blocks, even if they are only one line.  Otherwise it is easy for someone to later add a line that is a bug.\n\ne.g.\n\n```\n  if ...\n    foo();\n  else\n    bar();\n    baz();    // BUG: Not part of else\n```"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 726,
                    "reviewer": {
                        "name": "Faisal Awada",
                        "email": "faisal@us.ibm.com",
                        "username": "faisal-awada"
                    },
                    "message": "Done"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 890,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "since this is only used for the acbel, maybe better to name it like ACBEL_FSG032_FW_VERSION_SIZE?\n\nAlternatively, you could declare it down in the scope its used and then could leave off the PSU type."
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 890,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "I agree this is confusing.  The other one should probably be called IBMCFFPS_FW_VERSION_SIZE since it sounds specific to that PSU type too right?"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 890,
                    "reviewer": {
                        "name": "Faisal Awada",
                        "email": "faisal@us.ibm.com",
                        "username": "faisal-awada"
                    },
                    "message": "Done"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 914,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "This is a behavior change.  Previously if the driver was not IBMCFFPS, then it obtained 4 VPD properties.  Now it only does that if it is the ACBEL PSU.\n\nDo we know if there is a 3rd PSU type that was getting the 4 VPD properties before?  Maybe not since this is in a '#if IBM_VPD' block.  Just asking."
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 914,
                    "reviewer": {
                        "name": "Faisal Awada",
                        "email": "faisal@us.ibm.com",
                        "username": "faisal-awada"
                    },
                    "message": "The if condition did not exist prior to ACBEL series of commits."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 30,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 14,
                    "deletions": -8
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 45,
            "sizeDeletions": 8
        },
        {
            "number": 4,
            "revision": "599820ca521b340e80a5101d4520d9ee3a782ccd",
            "parents": [
                "328ca312575791387150959e696254445f80c6b7"
            ],
            "ref": "refs/changes/95/64795/4",
            "uploader": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "createdOn": 1689715365,
            "author": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 31,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": -9
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 9
        },
        {
            "number": 5,
            "revision": "9582d9ccc66839bee3e26581bbf22a2c098200b9",
            "parents": [
                "328ca312575791387150959e696254445f80c6b7"
            ],
            "ref": "refs/changes/95/64795/5",
            "uploader": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "createdOn": 1689716242,
            "author": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 31,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 20,
                    "deletions": -9
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 52,
            "sizeDeletions": 9
        }
    ]
}