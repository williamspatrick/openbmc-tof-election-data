{
    "project": "openbmc/libmctp",
    "branch": "master",
    "id": "I885ce82d68345bdcf06f99005c40ea2f7bdcbd4b",
    "number": 30557,
    "subject": "Binding for PCIe transport, starting point",
    "owner": {
        "name": "Przemyslaw Czarnowski",
        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
        "username": "phawryle"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/libmctp/+/30557",
    "hashtags": [],
    "createdOn": 1584742943,
    "lastUpdated": 1698623233,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1584742943,
            "reviewer": {
                "name": "Przemyslaw Czarnowski",
                "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                "username": "phawryle"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1584742972,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1584742983,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 1:\n\nBuild Started https://openpower.xyz/job/openbmc-repository-ci/46130/"
        },
        {
            "timestamp": 1584743029,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://openpower.xyz/job/openbmc-repository-ci/46130/ : SUCCESS"
        },
        {
            "timestamp": 1585029804,
            "reviewer": {
                "name": "Sumanth Bhat",
                "email": "sumanth.bhat@linux.intel.com",
                "username": "sumbhat90"
            },
            "message": "Patch Set 1: Code-Review+1"
        },
        {
            "timestamp": 1585038382,
            "reviewer": {
                "name": "Iwona Winiarska",
                "email": "iwona.winiarska@intel.com",
                "username": "iklm"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1585038943,
            "reviewer": {
                "name": "Przemyslaw Czarnowski",
                "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                "username": "phawryle"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1585116380,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@codeconstruct.com.au",
                "username": "amboar"
            },
            "message": "Patch Set 1: Code-Review-1\n\n(5 comments)\n\nGenerally I prefer that we don't do \"stub\" commits. If you're trying to reduce the size of the patch, try to break the functionality into multiple patches that are self-contained implementations of functionality. Sometimes that's not possible, if that's the case then it should just be a large commit. I'll make my way through it but it may take longer than usual :)"
        },
        {
            "timestamp": 1585116718,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@codeconstruct.com.au",
                "username": "amboar"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1585127945,
            "reviewer": {
                "name": "Iwona Winiarska",
                "email": "iwona.winiarska@intel.com",
                "username": "iklm"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1585146541,
            "reviewer": {
                "name": "Przemyslaw Czarnowski",
                "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                "username": "phawryle"
            },
            "message": "Patch Set 1:\n\n(5 comments)\n\n> Patch Set 1: Code-Review-1\n> \n> (5 comments)\n> \n> Generally I prefer that we don't do \"stub\" commits. If you're trying to reduce the size of the patch, try to break the functionality into multiple patches that are self-contained implementations of functionality. Sometimes that's not possible, if that's the case then it should just be a large commit. I'll make my way through it but it may take longer than usual :)\n\nHi,\n\nAs I have already made this request, I just added [wip] prefix to commit to indicate start of bigger thing. If you prefer to not integrate this, just check if my changes does everything you mean."
        },
        {
            "timestamp": 1585146598,
            "reviewer": {
                "name": "Przemyslaw Czarnowski",
                "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                "username": "phawryle"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1585146625,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1585146637,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 2:\n\nBuild Started https://openpower.xyz/job/openbmc-repository-ci/46314/"
        },
        {
            "timestamp": 1585146769,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://openpower.xyz/job/openbmc-repository-ci/46314/ : FAILURE"
        },
        {
            "timestamp": 1585165820,
            "reviewer": {
                "name": "Przemyslaw Czarnowski",
                "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                "username": "phawryle"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1585165846,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1585165861,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 3:\n\nBuild Started https://openpower.xyz/job/openbmc-repository-ci/46326/"
        },
        {
            "timestamp": 1585165901,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://openpower.xyz/job/openbmc-repository-ci/46326/ : FAILURE"
        },
        {
            "timestamp": 1585166471,
            "reviewer": {
                "name": "Przemyslaw Czarnowski",
                "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                "username": "phawryle"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1585166495,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1585166507,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 4:\n\nBuild Started https://openpower.xyz/job/openbmc-repository-ci/46327/"
        },
        {
            "timestamp": 1585166547,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://openpower.xyz/job/openbmc-repository-ci/46327/ : SUCCESS"
        },
        {
            "timestamp": 1585182866,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@codeconstruct.com.au",
                "username": "amboar"
            },
            "message": "Patch Set 4: Code-Review-1\n\n(11 comments)"
        },
        {
            "timestamp": 1585221709,
            "reviewer": {
                "name": "Przemyslaw Czarnowski",
                "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                "username": "phawryle"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1585221731,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1585221747,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 5:\n\nBuild Started https://openpower.xyz/job/openbmc-repository-ci/46373/"
        },
        {
            "timestamp": 1585221774,
            "reviewer": {
                "name": "Przemyslaw Czarnowski",
                "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                "username": "phawryle"
            },
            "message": "Patch Set 4:\n\n(10 comments)\n\nCode updated, and split into separate commits."
        },
        {
            "timestamp": 1585221794,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://openpower.xyz/job/openbmc-repository-ci/46373/ : SUCCESS"
        },
        {
            "timestamp": 1585224293,
            "reviewer": {
                "name": "Iwona Winiarska",
                "email": "iwona.winiarska@intel.com",
                "username": "iklm"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1585267297,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@codeconstruct.com.au",
                "username": "amboar"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1585268711,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@codeconstruct.com.au",
                "username": "amboar"
            },
            "message": "Patch Set 5:\n\n(6 comments)\n\nThanks Przemyslaw, it's shaping up. I'd like to see the implementation fleshed out to include the interactions with the driver.\n\nI'll be sending the astlpc kernel driver to the OpenBMC list soon, can you please do the same for the PCIe driver? That way people at least have the opportunity to use the interfaces."
        },
        {
            "timestamp": 1585606246,
            "reviewer": {
                "name": "Przemyslaw Czarnowski",
                "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                "username": "phawryle"
            },
            "message": "Uploaded patch set 6."
        },
        {
            "timestamp": 1585606271,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1585606296,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 6:\n\nBuild Started https://openpower.xyz/job/openbmc-repository-ci/46574/"
        },
        {
            "timestamp": 1585607032,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://openpower.xyz/job/openbmc-repository-ci/46574/ : SUCCESS"
        },
        {
            "timestamp": 1585607046,
            "reviewer": {
                "name": "Przemyslaw Czarnowski",
                "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                "username": "phawryle"
            },
            "message": "Patch Set 6:\n\n(13 comments)\n\nMarked resolved all but one comment. \nLast one still looks hanging, but describes just general design issue."
        },
        {
            "timestamp": 1585875428,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@codeconstruct.com.au",
                "username": "amboar"
            },
            "message": "Patch Set 6:\n\nPrzemyslaw: When do you expect we'll see the binding implementation fleshed out?"
        },
        {
            "timestamp": 1585898201,
            "reviewer": {
                "name": "Przemyslaw Czarnowski",
                "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                "username": "phawryle"
            },
            "message": "Patch Set 6:\n\n> Patch Set 6:\n> \n> Przemyslaw: When do you expect we'll see the binding implementation fleshed out?\n\nAll generic code is ready, userspace/kernel interface is on hold due to problems with aspeed hw. I will keep you informed as soon as there's something to publish."
        },
        {
            "timestamp": 1586496089,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@codeconstruct.com.au",
                "username": "amboar"
            },
            "message": "Patch Set 6:\n\n> Patch Set 6:\n> \n> > Patch Set 6:\n> > \n> > Przemyslaw: When do you expect we'll see the binding implementation fleshed out?\n> \n> All generic code is ready, userspace/kernel interface is on hold due to problems with aspeed hw. I will keep you informed as soon as there's something to publish.\n\nCan you push an update to the patch with the implementation for the proposed kernel interface?\n\nI think we can work to review that before the issues with the hardware are ironed out."
        },
        {
            "timestamp": 1698623233,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@codeconstruct.com.au",
                "username": "amboar"
            },
            "message": "Abandoned\n\nThe PCIe transport should be implemented in the kernel."
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "588ec97fb6c105a7a4c0fedd83623a02d74fda66",
            "parents": [
                "06b2cd861679055059eb0ce594a5348ef8927fa9"
            ],
            "ref": "refs/changes/57/30557/1",
            "uploader": {
                "name": "Przemyslaw Czarnowski",
                "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                "username": "phawryle"
            },
            "createdOn": 1584742943,
            "author": {
                "name": "Przemyslaw Czarnowski",
                "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                "username": "phawryle"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Iwona Winiarska",
                        "email": "iwona.winiarska@intel.com",
                        "username": "iklm"
                    },
                    "message": "Shouldn't it be hardware dependent? I believe this implementation will dependent on HW interface of MCTP Controller on PCIe. If that's the case you should rename files, structures and mention that in the commit message. Please, see astlpc for reference."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "ast2600pcie for example? Quite long IMO. It there a plan to support various ast HW versions? Leaving astpcie will suggest so."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "It's not clear to me yet where the boundaries for this implementation lie. I assume there's going to be an associated kernel driver that exposes an interface that the binding implementation backs onto. This is how the astlpc binding works for the most part (though it has the ability to be used in standalone environments also). What we need is for that kernel interface to have well-defined semantics that are portable across hardware implementations. As such the implementation here should just concern itself with the PCIe VDM binding semantics and not the nuances of the hardware and as a consequence I don't think the bare 'pcie' name is a bad start.\n\nHowever, I need more details on how this is actually going to work in practice. I'd hate to see it using `/dev/mem` or the like to gain access to the PCIe MCTP device on the ASPEED SoCs."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Iwona Winiarska",
                        "email": "iwona.winiarska@intel.com",
                        "username": "iklm"
                    },
                    "message": "We are working on MCTP driver for AST2600 with simple interface (think read / write, single client, raw data). Not quite as bad as /dev/mem, but not ideal either ;)\nWe didn't plan to be portable across different HW on the kernel side - moving that to libmctp side for now (different bindings for different HW - trying to be mostly compatible, but no promises), mainly because of the future socket based approach, which would do just that (unified interface for userspace for anything MCTP). We would then just modify the driver to fit into that interface."
                },
                {
                    "file": "pcie.c",
                    "line": 10,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "Please include config.h before any other headers"
                },
                {
                    "file": "pcie.c",
                    "line": 10,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Ok"
                },
                {
                    "file": "pcie.c",
                    "line": 10,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Done"
                },
                {
                    "file": "pcie.c",
                    "line": 29,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "We have this definition in serial.c and astlpc.c as well, can you please create a container_of.h and consolidate all the implementations there as a cleanup commit before this one?"
                },
                {
                    "file": "pcie.c",
                    "line": 29,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Ok"
                },
                {
                    "file": "pcie.c",
                    "line": 29,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Done"
                },
                {
                    "file": "pcie.c",
                    "line": 34,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "Please adhere to the kernel coding style. I'll push a patch shortly adding a clang-format configuration to enforce this."
                },
                {
                    "file": "pcie.c",
                    "line": 34,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Done"
                },
                {
                    "file": "pcie.c",
                    "line": 34,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Done"
                },
                {
                    "file": "tests/test_pcie.c",
                    "line": 16,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "You must enclose complex macro expressions in parentheses"
                },
                {
                    "file": "tests/test_pcie.c",
                    "line": 16,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Actually I do not need this anymore."
                },
                {
                    "file": "tests/test_pcie.c",
                    "line": 16,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Done"
                },
                {
                    "file": "tests/test_pcie.c",
                    "line": 35,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "I forgot that I did this in test_astlpc.c. We should probably come up with a better solution. `#include \"pcie.c\"` isn't the worst idea."
                },
                {
                    "file": "tests/test_pcie.c",
                    "line": 35,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "I've been thinking about it and came up with an idea of private include file containing private data structures like bindings."
                },
                {
                    "file": "tests/test_pcie.c",
                    "line": 35,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "tests/test_pcie.c",
                    "type": "ADDED",
                    "insertions": 68,
                    "deletions": 0
                },
                {
                    "file": "configure.ac",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "Makefile.am",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -1
                },
                {
                    "file": "libmctp-pcie.h",
                    "type": "ADDED",
                    "insertions": 36,
                    "deletions": 0
                },
                {
                    "file": "pcie.c",
                    "type": "ADDED",
                    "insertions": 66,
                    "deletions": 0
                },
                {
                    "file": "CMakeLists.txt",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 198,
            "sizeDeletions": 2
        },
        {
            "number": 2,
            "revision": "18a85f8773d5002a3459082937e00e5242678b44",
            "parents": [
                "06b2cd861679055059eb0ce594a5348ef8927fa9"
            ],
            "ref": "refs/changes/57/30557/2",
            "uploader": {
                "name": "Przemyslaw Czarnowski",
                "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                "username": "phawryle"
            },
            "createdOn": 1585146598,
            "author": {
                "name": "Przemyslaw Czarnowski",
                "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                "username": "phawryle"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "configure.ac",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "libmctp-astpcie.h",
                    "type": "ADDED",
                    "insertions": 36,
                    "deletions": 0
                },
                {
                    "file": "astlpc.c",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -5
                },
                {
                    "file": "Makefile.am",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -1
                },
                {
                    "file": "tests/test-utils.h",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -5
                },
                {
                    "file": "CMakeLists.txt",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -1
                },
                {
                    "file": "astpcie.c",
                    "type": "ADDED",
                    "insertions": 54,
                    "deletions": 0
                },
                {
                    "file": "tests/test_astpcie.c",
                    "type": "ADDED",
                    "insertions": 57,
                    "deletions": 0
                },
                {
                    "file": "serial.c",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -5
                },
                {
                    "file": "libmctp-astpcie-bind.h",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "tests/test_astlpc.c",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -5
                }
            ],
            "sizeInsertions": 200,
            "sizeDeletions": 22
        },
        {
            "number": 3,
            "revision": "1fca4ba1166480ad856035b438c5c2696e2c6d94",
            "parents": [
                "06b2cd861679055059eb0ce594a5348ef8927fa9"
            ],
            "ref": "refs/changes/57/30557/3",
            "uploader": {
                "name": "Przemyslaw Czarnowski",
                "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                "username": "phawryle"
            },
            "createdOn": 1585165820,
            "author": {
                "name": "Przemyslaw Czarnowski",
                "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                "username": "phawryle"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "configure.ac",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "libmctp-astpcie.h",
                    "type": "ADDED",
                    "insertions": 36,
                    "deletions": 0
                },
                {
                    "file": "astlpc.c",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -5
                },
                {
                    "file": "Makefile.am",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -1
                },
                {
                    "file": "tests/test-utils.h",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -5
                },
                {
                    "file": "CMakeLists.txt",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -1
                },
                {
                    "file": "astpcie.c",
                    "type": "ADDED",
                    "insertions": 54,
                    "deletions": 0
                },
                {
                    "file": "tests/test_astpcie.c",
                    "type": "ADDED",
                    "insertions": 57,
                    "deletions": 0
                },
                {
                    "file": "container_of.h",
                    "type": "ADDED",
                    "insertions": 9,
                    "deletions": 0
                },
                {
                    "file": "serial.c",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -5
                },
                {
                    "file": "libmctp-astpcie-bind.h",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "tests/test_astlpc.c",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -5
                }
            ],
            "sizeInsertions": 209,
            "sizeDeletions": 22
        },
        {
            "number": 4,
            "revision": "d8176d0a19ea77b67eddebff3061e466ceadda05",
            "parents": [
                "06b2cd861679055059eb0ce594a5348ef8927fa9"
            ],
            "ref": "refs/changes/57/30557/4",
            "uploader": {
                "name": "Przemyslaw Czarnowski",
                "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                "username": "phawryle"
            },
            "createdOn": 1585166471,
            "author": {
                "name": "Przemyslaw Czarnowski",
                "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                "username": "phawryle"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "Can you please use Gerrit's \"Work In Progress\" state instead? You can switch to it using the triple-dot menu in the top right of the patch screen of the new Gerrit interface."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Done"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "As I understand it your kernel driver is just going to allow userspace to e.g. mmap() the MMIO space of the MCTP device on the AST BMCs. So really what we have in userspace are two things:\n\n1. A driver for the MCTP device\n2. An implementation of the MCTP PCIe VDM bindings\n\nIt might be useful to consider separating the two, though I'm not sure how just yet. I know we started it with the astlpc binding implementation, but I'd like to avoid a grave-yard of \"bindings\" that are really also drivers and can't be ported between hardware implementations."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Driver will have specific API to access mctp hw, but device itself enforces formation of VDM message externally, so such separation is imposed by mctp hw design. I have asked Iwona to clarify details of ast mctp hw and driver design with you to make us fully understand each other."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "Iwona Winiarska",
                        "email": "iwona.winiarska@intel.com",
                        "username": "iklm"
                    },
                    "message": "We are not mapping MMIO registers. The kernel driver takes care of handling the HW and exposes an interface allowing you to receive and transmit MCTP frames. We just don't want to make promises that the interface will be stable for various types of HW today.\nSo 1) is in kernel, and 2) is in userspace (which means that this is already separated I guess...)."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "Ah, I see. I guess I tried to infer too much from my understanding of your previous comments.\n\nIf the framing is taken care of by the hardware then we're not implementing a binding as much as an adapter for the kernel interface. I guess we stick with astpcie for the moment then and think about how best to organise it all as we accrue implementations."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 13,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Done"
                },
                {
                    "file": "astlpc.c",
                    "line": 24,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "Please separate out the extraction of container_of() into a separate commit"
                },
                {
                    "file": "astlpc.c",
                    "line": 24,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Done"
                },
                {
                    "file": "astpcie.c",
                    "line": 10,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "Please address my previous comment about including config.h before anything else."
                },
                {
                    "file": "astpcie.c",
                    "line": 10,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Sorry about that, done"
                },
                {
                    "file": "astpcie.c",
                    "line": 17,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "If this is the private header then I think we're better off calling it 'astpcie.h' and making sure it's not installed by the build system"
                },
                {
                    "file": "astpcie.c",
                    "line": 17,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Done"
                },
                {
                    "file": "astpcie.c",
                    "line": 19,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "Drop this onto a separate line to avoid exceeding 80 chars"
                },
                {
                    "file": "astpcie.c",
                    "line": 19,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Done"
                },
                {
                    "file": "container_of.h",
                    "line": 9,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "Please drop this one. The file is short enough that it's unnecessary.\n\nPlease also note the request to extract this change out into its own commit"
                },
                {
                    "file": "container_of.h",
                    "line": 9,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Done"
                },
                {
                    "file": "libmctp-astpcie-bind.h",
                    "line": 13,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "just a thought, it might be better to make this the last member of the struct. That way overflows avoid overwriting the rx_pkt pointer and if necessary we could make the buffer variable in size."
                },
                {
                    "file": "libmctp-astpcie-bind.h",
                    "line": 13,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Good catch. Done"
                },
                {
                    "file": "serial.c",
                    "line": 41,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "Separate this out into the commit dedicated to refactoring container_of()"
                },
                {
                    "file": "serial.c",
                    "line": 41,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Done"
                },
                {
                    "file": "tests/test-utils.h",
                    "line": 7,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "Separate this out into the commit refactoring container_of()"
                },
                {
                    "file": "tests/test-utils.h",
                    "line": 7,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Done"
                },
                {
                    "file": "tests/test_astlpc.c",
                    "line": 9,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "Separate this out into the commit refactoring container_of()"
                },
                {
                    "file": "tests/test_astlpc.c",
                    "line": 9,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "configure.ac",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "libmctp-astpcie.h",
                    "type": "ADDED",
                    "insertions": 36,
                    "deletions": 0
                },
                {
                    "file": "astlpc.c",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -5
                },
                {
                    "file": "Makefile.am",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -1
                },
                {
                    "file": "tests/test-utils.h",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -5
                },
                {
                    "file": "CMakeLists.txt",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -1
                },
                {
                    "file": "astpcie.c",
                    "type": "ADDED",
                    "insertions": 54,
                    "deletions": 0
                },
                {
                    "file": "tests/test_astpcie.c",
                    "type": "ADDED",
                    "insertions": 57,
                    "deletions": 0
                },
                {
                    "file": "container_of.h",
                    "type": "ADDED",
                    "insertions": 9,
                    "deletions": 0
                },
                {
                    "file": "serial.c",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -5
                },
                {
                    "file": "libmctp-astpcie-bind.h",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "tests/test_astlpc.c",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -5
                }
            ],
            "sizeInsertions": 209,
            "sizeDeletions": 22
        },
        {
            "number": 5,
            "revision": "ca45e782c82a32830f1d7c737ab2ea76f6e2450b",
            "parents": [
                "ff25d7eb59be4b77771e97e53ddf1db9837949cd"
            ],
            "ref": "refs/changes/57/30557/5",
            "uploader": {
                "name": "Przemyslaw Czarnowski",
                "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                "username": "phawryle"
            },
            "createdOn": 1585221709,
            "author": {
                "name": "Przemyslaw Czarnowski",
                "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                "username": "phawryle"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "astpcie.c",
                    "line": 17,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "See comment on the file"
                },
                {
                    "file": "astpcie.c",
                    "line": 17,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Done"
                },
                {
                    "file": "prv-astpcie.h",
                    "line": 0,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "Can we just call it 'astpcie.h' to align with astpcie.c? 'prv' seems like an awkward contraction, and we can just a) document that the convention for naming public api headers is to prefix them with 'libmctp-' and b) document private headers with a comment inside the file."
                },
                {
                    "file": "prv-astpcie.h",
                    "line": 0,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Done"
                },
                {
                    "file": "prv-astpcie.h",
                    "line": 3,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "Rename this to whatever we rename the file to"
                },
                {
                    "file": "prv-astpcie.h",
                    "line": 3,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Done"
                },
                {
                    "file": "prv-astpcie.h",
                    "line": 15,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "MCTP_ASTPCIE_BINDING_DEFAULT_BUF should be defined in this header no? I'd very much like to avoid an ordering dependency between the C file including this header and the structures defined in it."
                },
                {
                    "file": "prv-astpcie.h",
                    "line": 15,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Done"
                },
                {
                    "file": "prv-astpcie.h",
                    "line": 18,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "Can drop this too given the length of the file"
                },
                {
                    "file": "prv-astpcie.h",
                    "line": 18,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Done"
                },
                {
                    "file": "tests/test_astpcie.c",
                    "line": 22,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "See comment on file"
                },
                {
                    "file": "tests/test_astpcie.c",
                    "line": 22,
                    "reviewer": {
                        "name": "Przemyslaw Czarnowski",
                        "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                        "username": "phawryle"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "configure.ac",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "libmctp-astpcie.h",
                    "type": "ADDED",
                    "insertions": 36,
                    "deletions": 0
                },
                {
                    "file": "Makefile.am",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -1
                },
                {
                    "file": "CMakeLists.txt",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -1
                },
                {
                    "file": "astpcie.c",
                    "type": "ADDED",
                    "insertions": 55,
                    "deletions": 0
                },
                {
                    "file": "tests/test_astpcie.c",
                    "type": "ADDED",
                    "insertions": 57,
                    "deletions": 0
                },
                {
                    "file": "prv-astpcie.h",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 197,
            "sizeDeletions": 2
        },
        {
            "number": 6,
            "revision": "391795d02e32adf2282d3e2f6c3a5d75a9224808",
            "parents": [
                "ff25d7eb59be4b77771e97e53ddf1db9837949cd"
            ],
            "ref": "refs/changes/57/30557/6",
            "uploader": {
                "name": "Przemyslaw Czarnowski",
                "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                "username": "phawryle"
            },
            "createdOn": 1585606246,
            "author": {
                "name": "Przemyslaw Czarnowski",
                "email": "przemyslaw.hawrylewicz.czarnowski@intel.com",
                "username": "phawryle"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "astpcie.h",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "configure.ac",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "libmctp-astpcie.h",
                    "type": "ADDED",
                    "insertions": 34,
                    "deletions": 0
                },
                {
                    "file": "Makefile.am",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -1
                },
                {
                    "file": "CMakeLists.txt",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": -1
                },
                {
                    "file": "astpcie.c",
                    "type": "ADDED",
                    "insertions": 55,
                    "deletions": 0
                },
                {
                    "file": "tests/test_astpcie.c",
                    "type": "ADDED",
                    "insertions": 57,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 199,
            "sizeDeletions": 2
        }
    ]
}