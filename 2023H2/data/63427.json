{
    "project": "openbmc/entity-manager",
    "branch": "master",
    "id": "I425aca1de5c671c38b65fd16efc1932e0fa51f28",
    "number": 63427,
    "subject": "entity-manager: Avoid direct substitution",
    "owner": {
        "name": "Vlad Sytchenko",
        "email": "vsytch@google.com",
        "username": "vsytch"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/entity-manager/+/63427",
    "hashtags": [],
    "createdOn": 1683839662,
    "lastUpdated": 1689629747,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1683839662,
            "reviewer": {
                "name": "Vlad Sytchenko",
                "email": "vsytch@google.com",
                "username": "vsytch"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1683839692,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1683839692,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1683839715,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/66274/ : FAILURE"
        },
        {
            "timestamp": 1683839949,
            "reviewer": {
                "name": "Vlad Sytchenko",
                "email": "vsytch@google.com",
                "username": "vsytch"
            },
            "message": "Uploaded patch set 2.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1683839972,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1683839972,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1683840238,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/66277/ : SUCCESS"
        },
        {
            "timestamp": 1684506948,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 2: Code-Review+1"
        },
        {
            "timestamp": 1686249161,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1687548389,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1687561875,
            "reviewer": {
                "name": "Vlad Sytchenko",
                "email": "vsytch@google.com",
                "username": "vsytch"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1689629747,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "dde269fb779fc288de8fa16d6f511df55e8ceb7c",
            "parents": [
                "33210b2f9b02f3436aacd1a51589d40f07cc50be"
            ],
            "ref": "refs/changes/27/63427/1",
            "uploader": {
                "name": "Vlad Sytchenko",
                "email": "vsytch@google.com",
                "username": "vsytch"
            },
            "createdOn": 1683839662,
            "author": {
                "name": "Vlad Sytchenko",
                "email": "vsytch@google.com",
                "username": "vsytch"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "src/utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": -30
                }
            ],
            "sizeInsertions": 44,
            "sizeDeletions": 30
        },
        {
            "number": 2,
            "revision": "6e5addfc4cc562a12bb70461da266599ee35275a",
            "parents": [
                "aca73883ca6bcee3dde8cbc8cf7d4e51f2959b73"
            ],
            "ref": "refs/changes/27/63427/2",
            "uploader": {
                "name": "Vlad Sytchenko",
                "email": "vsytch@google.com",
                "username": "vsytch"
            },
            "createdOn": 1683839949,
            "author": {
                "name": "Vlad Sytchenko",
                "email": "vsytch@google.com",
                "username": "vsytch"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "When this gets another +1 I can +2 it."
                },
                {
                    "file": "src/utils.cpp",
                    "line": 290,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "This changes the flow. Is the change for a bug fix, or equivalent to old code. Any test done?"
                },
                {
                    "file": "src/utils.cpp",
                    "line": 290,
                    "reviewer": {
                        "name": "Vlad Sytchenko",
                        "email": "vsytch@google.com",
                        "username": "vsytch"
                    },
                    "message": "Yes, I see your concern. Currently the substitution logic would replace all occurences of `propName` with `propValue` and then try to perform math. If the math syntax was incorrect, then we'd abort and move onto the the next `propName`.\n\nWith my patch, since the substitution happens at the end, we won't partially substitute the string, nor try to substitute the rest of the interfaces. I'll add test cases for such strings."
                },
                {
                    "file": "src/utils.cpp",
                    "line": 290,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "Waiting for the new test to approve"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "src/utils.cpp",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -30
                }
            ],
            "sizeInsertions": 42,
            "sizeDeletions": 30
        }
    ]
}