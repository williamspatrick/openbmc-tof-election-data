{
    "project": "openbmc/webui-vue",
    "branch": "master",
    "id": "Ie79738c927499e31e792171ae662bbb3ca81d3c4",
    "number": 54116,
    "subject": "Fix vulnerabilities",
    "owner": {
        "name": "Damian Celico",
        "email": "damianx.celico@intel.com",
        "username": "damianxc"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/webui-vue/+/54116",
    "hashtags": [],
    "createdOn": 1653989322,
    "lastUpdated": 1695838653,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1653989322,
            "reviewer": {
                "name": "Damian Celico",
                "email": "damianx.celico@intel.com",
                "username": "damianxc"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1653989338,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1653989338,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1653989447,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/44062/ : SUCCESS"
        },
        {
            "timestamp": 1653990947,
            "reviewer": {
                "name": "Damian Celico",
                "email": "damianx.celico@intel.com",
                "username": "damianxc"
            },
            "message": "Patch Set 2: Commit message was updated."
        },
        {
            "timestamp": 1654044702,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1654685711,
            "reviewer": {
                "name": "Damian Celico",
                "email": "damianx.celico@intel.com",
                "username": "damianxc"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1654803552,
            "reviewer": {
                "name": "Dixsie Wolmers",
                "email": "dixsiew@gmail.com",
                "username": "dixsie"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1655312097,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1655820754,
            "reviewer": {
                "name": "Damian Celico",
                "email": "damianx.celico@intel.com",
                "username": "damianxc"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1655826419,
            "reviewer": {
                "name": "Dixsie Wolmers",
                "email": "dixsiew@gmail.com",
                "username": "dixsie"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1656977661,
            "reviewer": {
                "name": "Damian Celico",
                "email": "damianx.celico@intel.com",
                "username": "damianxc"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1657221351,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 2: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1657814478,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1657882693,
            "reviewer": {
                "name": "Damian Celico",
                "email": "damianx.celico@intel.com",
                "username": "damianxc"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1658169894,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1695838653,
            "reviewer": {
                "name": "Dixsie Wolmers",
                "email": "dixsiew@gmail.com",
                "username": "dixsie"
            },
            "message": "Removed reviewer Dixsie Wolmers <dixsiew@gmail.com>."
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "a0342d5a3a22c2d1567df0069412c6034ac4ede5",
            "parents": [
                "fedc7344df80d87050966a4903f7aff32fddd259"
            ],
            "ref": "refs/changes/16/54116/1",
            "uploader": {
                "name": "Damian Celico",
                "email": "damianx.celico@intel.com",
                "username": "damianxc"
            },
            "createdOn": 1653989322,
            "author": {
                "name": "Damian Celico",
                "email": "damianx.celico@intel.com",
                "username": "damianxc"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "package-lock.json",
                    "type": "MODIFIED",
                    "insertions": 33,
                    "deletions": -9
                }
            ],
            "sizeInsertions": 45,
            "sizeDeletions": 9
        },
        {
            "number": 2,
            "revision": "d4937676a86a767b81b557d8c6b27fff014d6898",
            "parents": [
                "fedc7344df80d87050966a4903f7aff32fddd259"
            ],
            "ref": "refs/changes/16/54116/2",
            "uploader": {
                "name": "Damian Celico",
                "email": "damianx.celico@intel.com",
                "username": "damianxc"
            },
            "createdOn": 1653990947,
            "author": {
                "name": "Damian Celico",
                "email": "damianx.celico@intel.com",
                "username": "damianxc"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 10,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "Did you manually edit this or use some tool? \nNo package.json changes?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 10,
                    "reviewer": {
                        "name": "Damian Celico",
                        "email": "damianx.celico@intel.com",
                        "username": "damianxc"
                    },
                    "message": "Hi, I did edit this manually. When I was trying to use tools, I only had errors and crashing. There is no package.json changes, because the vulnerable libraries are not directly on the list of package.json dependencies"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 10,
                    "reviewer": {
                        "name": "Dixsie Wolmers",
                        "email": "dixsiew@gmail.com",
                        "username": "dixsie"
                    },
                    "message": "We had lots of errors when we tried to update as well after npm install"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 10,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "I don't think you should be manually editing the package-lock.json\nI would expect changes to the package.json file as well.\nCould you run something like npm audit fix ?\nAnd test thoroughly to verify nothing has broken ?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 10,
                    "reviewer": {
                        "name": "Damian Celico",
                        "email": "damianx.celico@intel.com",
                        "username": "damianxc"
                    },
                    "message": "When I was trying npm audit fix, it resulted with errors. But now I tried with npm i --legacy-peer-deps, and it seems to work, and fix some vulnerabilities. Although this command is changing almost entire package-lock file (even lockfileVersion), without touching package.json. I have required npm and node versions. Should I commit again changed package-lock.json?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 10,
                    "reviewer": {
                        "name": "Dixsie Wolmers",
                        "email": "dixsiew@gmail.com",
                        "username": "dixsie"
                    },
                    "message": "https://github.com/openbmc/webui-vue/issues/93\n\nHere is the process we used but we ran into errors"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 10,
                    "reviewer": {
                        "name": "Damian Celico",
                        "email": "damianx.celico@intel.com",
                        "username": "damianxc"
                    },
                    "message": "I know I should not modify only package-lock.json file, but I think currently this is the only way. I was asked if this solution could be merged temporarily, so the app could get through Snyk security assessment. I know these changes would disappear whenever someone modify the package.json, but I was informed this will not happen soon. To fix it permanently, we need to have done some big updates to vue/cli dependency, and it is a breaking change. I tested this and it doesn't break anything."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Dixsie Wolmers",
                        "email": "dixsiew@gmail.com",
                        "username": "dixsie"
                    },
                    "message": "I forgot to send this comment, it was left in draft 6/15"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "Does this make anything worse?  Is there any harm merging this for now while we work on getting the npm tools to work?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "Bump.  Is there any reason that we can't merge this and fix the npm tools separately?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Damian Celico",
                        "email": "damianx.celico@intel.com",
                        "username": "damianxc"
                    },
                    "message": "This change does not brake anything and tests are passing"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "It breaks our ability to npm update I think?\n\nhttps://gerrit.openbmc.org/c/openbmc/webui-vue/+/55438\n\nI worked on this for an hour or so.  The above is the progress I made moving to vue 3.  Hopefully it's pretty close."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "package-lock.json",
                    "type": "MODIFIED",
                    "insertions": 33,
                    "deletions": -9
                }
            ],
            "sizeInsertions": 45,
            "sizeDeletions": 9
        }
    ]
}