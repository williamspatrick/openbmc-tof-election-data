{
    "project": "openbmc/smbios-mdr",
    "branch": "master",
    "id": "Iac34a996d6b19b94c3ddbb09ce8f5a081da9f48b",
    "number": 67776,
    "subject": "smbios-mdr: set google mapping for PCIeSlots",
    "owner": {
        "name": "Tom Tung",
        "email": "shes050117@gmail.com",
        "username": "chihweitung"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/smbios-mdr/+/67776",
    "hashtags": [],
    "createdOn": 1700463912,
    "lastUpdated": 1702367484,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1700463912,
            "reviewer": {
                "name": "Tom Tung",
                "email": "shes050117@gmail.com",
                "username": "chihweitung"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1700463943,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1700463943,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1700464219,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/76338/ : SUCCESS"
        },
        {
            "timestamp": 1700464710,
            "reviewer": {
                "name": "Brandon Kim",
                "email": "brandonkim@google.com",
                "username": "brandonkimbk"
            },
            "message": "Patch Set 1: Code-Review+1"
        },
        {
            "timestamp": 1700471733,
            "reviewer": {
                "name": "Tom Tung",
                "email": "shes050117@gmail.com",
                "username": "chihweitung"
            },
            "message": "Patch Set 2: Commit message was updated.\n\nCopied Votes:\n* Code-Review+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE OR changekind:TRIVIAL_REBASE OR is:MIN\")\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1700471759,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1700471759,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1700471926,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2:\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/76339/ : SUCCESS"
        },
        {
            "timestamp": 1700491647,
            "reviewer": {
                "name": "Anthony",
                "email": "anthonyhkf@google.com",
                "username": "anthony-huang"
            },
            "message": "Patch Set 2: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1700567562,
            "reviewer": {
                "name": "Tom Tung",
                "email": "shes050117@gmail.com",
                "username": "chihweitung"
            },
            "message": "Patch Set 3: Commit message was updated.\n\nCopied Votes:\n* Code-Review+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE OR changekind:TRIVIAL_REBASE OR is:MIN\")\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1700567579,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1700567580,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1700567598,
            "reviewer": {
                "name": "Tom Tung",
                "email": "shes050117@gmail.com",
                "username": "chihweitung"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1700567708,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3:\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/76348/ : SUCCESS"
        },
        {
            "timestamp": 1700701998,
            "reviewer": {
                "name": "Kuiying Wang",
                "email": "wangkuiying.wky@alibaba-inc.com",
                "username": "kuiyingw"
            },
            "message": "Patch Set 3: Code-Review+1"
        },
        {
            "timestamp": 1701904817,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1701908192,
            "reviewer": {
                "name": "Tom Tung",
                "email": "shes050117@gmail.com",
                "username": "chihweitung"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1702330545,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1702364418,
            "reviewer": {
                "name": "Tom Tung",
                "email": "shes050117@gmail.com",
                "username": "chihweitung"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1702367327,
            "reviewer": {
                "name": "Tom Tung",
                "email": "shes050117@gmail.com",
                "username": "chihweitung"
            },
            "message": "Uploaded patch set 4.\n\nOutdated Votes:\n* Code-Review+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE OR changekind:TRIVIAL_REBASE OR is:MIN\")\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1702367360,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1702367360,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1702367390,
            "reviewer": {
                "name": "Tom Tung",
                "email": "shes050117@gmail.com",
                "username": "chihweitung"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1702367484,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/77035/ : SUCCESS"
        },
        {
            "timestamp": 1703021584,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 4:\n\n(3 comments)"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "6fe4283f38b619ee70136dff9d544e05c7310fd2",
            "parents": [
                "badedf10910f5ea0a5563e461b47acf7cc45603d"
            ],
            "ref": "refs/changes/76/67776/1",
            "uploader": {
                "name": "Tom Tung",
                "email": "shes050117@gmail.com",
                "username": "chihweitung"
            },
            "createdOn": 1700463912,
            "author": {
                "name": "Tom Tung",
                "email": "shes050117@gmail.com",
                "username": "chihweitung"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 43,
                    "deletions": 0
                },
                {
                    "file": "include/pcieslot.hpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -13
                }
            ],
            "sizeInsertions": 56,
            "sizeDeletions": 13
        },
        {
            "number": 2,
            "revision": "9a95030509bded3d0f3e466d1a6d4115009ae5ca",
            "parents": [
                "badedf10910f5ea0a5563e461b47acf7cc45603d"
            ],
            "ref": "refs/changes/76/67776/2",
            "uploader": {
                "name": "Tom Tung",
                "email": "shes050117@gmail.com",
                "username": "chihweitung"
            },
            "createdOn": 1700471733,
            "author": {
                "name": "Tom Tung",
                "email": "shes050117@gmail.com",
                "username": "chihweitung"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Anthony",
                        "email": "anthonyhkf@google.com",
                        "username": "anthony-huang"
                    },
                    "message": "Nit: Adjust paragraphs to fit in 72 chars."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Tom Tung",
                        "email": "shes050117@gmail.com",
                        "username": "chihweitung"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 43,
                    "deletions": 0
                },
                {
                    "file": "include/pcieslot.hpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -13
                }
            ],
            "sizeInsertions": 56,
            "sizeDeletions": 13
        },
        {
            "number": 3,
            "revision": "1f2b83e840697ae800b740db402476fb8ed42db8",
            "parents": [
                "badedf10910f5ea0a5563e461b47acf7cc45603d"
            ],
            "ref": "refs/changes/76/67776/3",
            "uploader": {
                "name": "Tom Tung",
                "email": "shes050117@gmail.com",
                "username": "chihweitung"
            },
            "createdOn": 1700567562,
            "author": {
                "name": "Tom Tung",
                "email": "shes050117@gmail.com",
                "username": "chihweitung"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "include/pcieslot.hpp",
                    "line": 155,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "Why these values changed to OEM. Is there a spec/standard that defines these values as OEM?"
                },
                {
                    "file": "include/pcieslot.hpp",
                    "line": 155,
                    "reviewer": {
                        "name": "Tom Tung",
                        "email": "shes050117@gmail.com",
                        "username": "chihweitung"
                    },
                    "message": "There is no direct mapping for PCIeType [1] in dbus and the type in SMBIOS [2]. It can be either FullLength, HalfLength, LowProfile, or OEM from my understanding. Based on current supported SMBIOS version, I am not sure if there is a way to figure out which type is in smbios-mdr.\n\nThe main reason for changing to OEM is that Unknown will just make it be dropped in bmcweb [3].\n\n[1] https://github.com/openbmc/phosphor-dbus-interfaces/blob/master/yaml/xyz/openbmc_project/Inventory/Item/PCIeSlot.interface.yaml#L57-L99\n[2] System Slots \u2014 Slot Type (page 75) in https://www.dmtf.org/sites/default/files/standards/documents/DSP0134_3.4.0.pdf\n[3] https://github1s.com/openbmc/bmcweb/blob/HEAD/redfish-core/lib/pcie_slots.hpp#L92-L101"
                },
                {
                    "file": "include/pcieslot.hpp",
                    "line": 155,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "I guess my question is why only some of the values are changed to OEM while others are left as Unknown. For example why 0xaa is left as Unknown and 0xab is changed to OEM."
                },
                {
                    "file": "include/pcieslot.hpp",
                    "line": 155,
                    "reviewer": {
                        "name": "Tom Tung",
                        "email": "shes050117@gmail.com",
                        "username": "chihweitung"
                    },
                    "message": "Oh, I was only trying to ensure PCIE types after `PCI Express Gen 2` but I think it makes sneses to update all `PCI Express` types to OEM.\n\nI will update all types between A5h ~ C4h to OEM."
                },
                {
                    "file": "include/pcieslot.hpp",
                    "line": 155,
                    "reviewer": {
                        "name": "Tom Tung",
                        "email": "shes050117@gmail.com",
                        "username": "chihweitung"
                    },
                    "message": "Hi Zhikui,\n\nI updated the CL. Please check and let me know if you have any other question. Thanks!"
                },
                {
                    "file": "include/pcieslot.hpp",
                    "line": 155,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "But I am wondering whether the right fix should be using the correct data in smbios to map the slot type. For example 7.10.4 System Slot - Slot length  can be used to map full or half length"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 43,
                    "deletions": 0
                },
                {
                    "file": "include/pcieslot.hpp",
                    "type": "MODIFIED",
                    "insertions": 13,
                    "deletions": -13
                }
            ],
            "sizeInsertions": 56,
            "sizeDeletions": 13
        },
        {
            "number": 4,
            "revision": "fdc7efb5b8f0997b4844460cd3ca9128af59fc3e",
            "parents": [
                "badedf10910f5ea0a5563e461b47acf7cc45603d"
            ],
            "ref": "refs/changes/76/67776/4",
            "uploader": {
                "name": "Tom Tung",
                "email": "shes050117@gmail.com",
                "username": "chihweitung"
            },
            "createdOn": 1702367327,
            "author": {
                "name": "Tom Tung",
                "email": "shes050117@gmail.com",
                "username": "chihweitung"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "What is google mapping?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 15,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "Please format it according to https://github.com/openbmc/docs/blob/master/CONTRIBUTING.md#formatting-commit-messages"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 43,
                    "deletions": 0
                },
                {
                    "file": "include/pcieslot.hpp",
                    "type": "MODIFIED",
                    "insertions": 16,
                    "deletions": -16
                }
            ],
            "sizeInsertions": 59,
            "sizeDeletions": 16
        }
    ]
}