{
    "project": "openbmc/phosphor-power",
    "branch": "master",
    "id": "I325fc0dbb16f9c3b582b739e8440a74e34aae753",
    "number": 66845,
    "subject": "psu-ng: Fixed PSU monitor app to bind/unbind device driver appropriately.",
    "owner": {
        "name": "Faisal Awada",
        "email": "faisal@us.ibm.com",
        "username": "faisal-awada"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-power/+/66845",
    "hashtags": [],
    "createdOn": 1696022061,
    "lastUpdated": 1700494544,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1696022061,
            "reviewer": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1696022080,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1696022080,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1696022145,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/74617/ : SUCCESS"
        },
        {
            "timestamp": 1697050046,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1697050380,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1697055247,
            "reviewer": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1697057807,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1698434815,
            "reviewer": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "message": "Uploaded patch set 2.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1698434857,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1698434857,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1698434942,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/75552/ : SUCCESS"
        },
        {
            "timestamp": 1698435080,
            "reviewer": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "message": "Set Work In Progress"
        },
        {
            "timestamp": 1698768029,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 2:\n\n(11 comments)"
        },
        {
            "timestamp": 1698863601,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 2:\n\n(3 comments)"
        },
        {
            "timestamp": 1698876634,
            "reviewer": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1698876647,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1698876647,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1698876734,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/75703/ : SUCCESS"
        },
        {
            "timestamp": 1698876901,
            "reviewer": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "message": "Patch Set 3:\n\n(13 comments)\n\nThis change is ready for review."
        },
        {
            "timestamp": 1698876916,
            "reviewer": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "message": "Set Work In Progress"
        },
        {
            "timestamp": 1698934905,
            "reviewer": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "message": "Patch Set 3:\n\n(1 comment)\n\nThis change is ready for review."
        },
        {
            "timestamp": 1698934915,
            "reviewer": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "message": "Set Work In Progress"
        },
        {
            "timestamp": 1698951694,
            "reviewer": {
                "name": "Derek Howard",
                "email": "derekh@us.ibm.com",
                "username": "derekhoward55"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1698961050,
            "reviewer": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "message": "Patch Set 3:\n\n(1 comment)\n\nThis change is ready for review."
        },
        {
            "timestamp": 1698961056,
            "reviewer": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "message": "Set Work In Progress"
        },
        {
            "timestamp": 1699018347,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1699018561,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1699018760,
            "reviewer": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "message": "Patch Set 3:\n\n(1 comment)\n\nThis change is ready for review."
        },
        {
            "timestamp": 1699018768,
            "reviewer": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "message": "Set Work In Progress"
        },
        {
            "timestamp": 1699019024,
            "reviewer": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "message": "Uploaded patch set 4.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1699019072,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1699019072,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1699019287,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/75780/ : SUCCESS"
        },
        {
            "timestamp": 1699453581,
            "reviewer": {
                "name": "Derek Howard",
                "email": "derekh@us.ibm.com",
                "username": "derekhoward55"
            },
            "message": "Patch Set 4: Code-Review+1"
        },
        {
            "timestamp": 1699473872,
            "reviewer": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "message": "Set Ready For Review"
        },
        {
            "timestamp": 1699484242,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1699553467,
            "reviewer": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1699653880,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1699993851,
            "reviewer": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "message": "Uploaded patch set 5.\n\nOutdated Votes:\n* Code-Review+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE OR changekind:TRIVIAL_REBASE OR is:MIN\")\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1699993898,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1699993898,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1699993984,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/76232/ : SUCCESS"
        },
        {
            "timestamp": 1699994060,
            "reviewer": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "message": "Uploaded patch set 6.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1699994092,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1699994093,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: -Ok-To-Test"
        },
        {
            "timestamp": 1699994180,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/76233/ : SUCCESS"
        },
        {
            "timestamp": 1700085167,
            "reviewer": {
                "name": "Derek Howard",
                "email": "derekh@us.ibm.com",
                "username": "derekhoward55"
            },
            "message": "Patch Set 6: Code-Review+1"
        },
        {
            "timestamp": 1700236040,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 6: Code-Review+1"
        },
        {
            "timestamp": 1700236342,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 6: Code-Review+2"
        },
        {
            "timestamp": 1700494544,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Change has been successfully merged"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "560d825d145829fe1c0e9fa3cbfed18a2661f51f",
            "parents": [
                "67f71b9e166dbc6f728b0df29687ccc76867978d"
            ],
            "ref": "refs/changes/45/66845/1",
            "uploader": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "createdOn": 1696022061,
            "author": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 104,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "Shouldn't the second line of this if statement be something like:\n```\n  (!std::filesystem::exists(devicePath) && !present)\n```  \n\nIf I am understanding this code correctly, we need to bind the driver in the case where devicePath doesn't exist and present is true.  With the code above, doesn't it just return immediately in that case?"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 104,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "In your commit message you mention checking if the driver exists.  But I don't think that is what you are checking, right?  You are checking if the binding exists for a specific PSU?\n\nHere is what the directory looks like on a sample system:\n```\n# ls /sys/bus/i2c/drivers/ibm-cffps\n3-0068  3-0069  bind    uevent  unbind\n```\n\nI believe the bind and unbind 'files' are what is used to bind and unbind the driver.  The 3-006* entries are symbolic links; I'm guessing they represent the PSUs that have been bound to the driver?"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 104,
                    "reviewer": {
                        "name": "Faisal Awada",
                        "email": "faisal@us.ibm.com",
                        "username": "faisal-awada"
                    },
                    "message": "No, I'm checking for /sys/bus/i2c/drivers/ibm-cffps/3-006x if exists and the PSU is not present then we need to bind. so \n(std::filesystem::exists(devicePath) && present) if the device path sys/bus/i2c/drivers/ibm-cffps/3-006x exist and the device present don't do anything.\n\nOR \n!std::filesystem::exists(devicePath) If the device driver does not exist don't do anything as you can't bind for something does not exist."
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 104,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "Sorry, I am maybe not explaining my thought well.  Here is a command line example.\n\nInitially there are two PSUs bound to the driver on my example system.  They are at address 0x68 and 0x69 on bus 3.\n\nI write 3-0068 to the unbind file to unbind the PSU at address 0x68.  Then I write the same thing to the bind file to re-bind the driver to that PSU.\n\n```\n# cd /sys/bus/i2c/drivers/ibm-cffps\n# ls\n3-0068  3-0069  bind    uevent  unbind\n# echo 3-0068 > unbind\n# ls\n3-0069  bind    uevent  unbind\n# echo 3-0068 > bind\n# ls\n3-0068  3-0069  bind    uevent  unbind\n```\n\nSo the 3-006x symbolic links are the binding for the individual PSU.  It doesn't have anything to do with the driver existing.  If the driver didn't exist then the ibm-cffps directory would not exist."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 25,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 31,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "961480e98a6696eb53ad4c1592437ab45bfe6d27",
            "parents": [
                "319b0dddfa34c46e487923788c5dddf9f691860d"
            ],
            "ref": "refs/changes/45/66845/2",
            "uploader": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "createdOn": 1698434815,
            "author": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "nit: instead of stating the problem, usually commit messages state the solution (i.e. what the change is)"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Faisal Awada",
                        "email": "faisal@us.ibm.com",
                        "username": "faisal-awada"
                    },
                    "message": "Ack"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 29,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "Did you test the unbind case too?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 29,
                    "reviewer": {
                        "name": "Faisal Awada",
                        "email": "faisal@us.ibm.com",
                        "username": "faisal-awada"
                    },
                    "message": "Yes, I will add comment verifying unbind"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "Looks like a good solution in general.  Some smaller things to clean up."
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 100,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "Is there a reason you didn't want this to be a std::filesystem::path like bindPath?\n\nIt works as a string, you just have to do more work.\n\ne.g.\n\npath = bindPath / action\n\nvs.\n\npath = bindPath.string() + \"/\" + action"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 100,
                    "reviewer": {
                        "name": "Faisal Awada",
                        "email": "faisal@us.ibm.com",
                        "username": "faisal-awada"
                    },
                    "message": "Ack"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 102,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "Normally we don't call one-line get methods like getDriverName() within the class itself.  You can just access the data member directly.\n\nThose get methods are usually called when the code inside is complex or when they are called from code *outside* of the class that doesn't (and shouldn't) have access to the data member."
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 102,
                    "reviewer": {
                        "name": "Faisal Awada",
                        "email": "faisal@us.ibm.com",
                        "username": "faisal-awada"
                    },
                    "message": "will change"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 103,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Maybe put a trace here so if it does happen you'll know?"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 103,
                    "reviewer": {
                        "name": "Faisal Awada",
                        "email": "faisal@us.ibm.com",
                        "username": "faisal-awada"
                    },
                    "message": "Ack"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 108,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "Nit: has"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 108,
                    "reviewer": {
                        "name": "Faisal Awada",
                        "email": "faisal@us.ibm.com",
                        "username": "faisal-awada"
                    },
                    "message": "Ack"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 109,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "This line is the same in both if branches right?  So the if could just modify bindPath if it has no driver.  Then this line could come after the if.  Not a bug just an observation."
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 109,
                    "reviewer": {
                        "name": "Faisal Awada",
                        "email": "faisal@us.ibm.com",
                        "username": "faisal-awada"
                    },
                    "message": "These line should be different, I must not have committed the change."
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 121,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "This should be 'Device' instead of 'Driver' here and on line 123 right?  The driver directory (like '/sys/bus/i2c/drivers/ibm-cffps') exists in all cases.  The 3-0068 symbolic link within the driver directory is associated with a specific PSU device."
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 121,
                    "reviewer": {
                        "name": "Faisal Awada",
                        "email": "faisal@us.ibm.com",
                        "username": "faisal-awada"
                    },
                    "message": "Ack"
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "line": 556,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "Nit: Missing a blank line between methods.  Also, the doxygen comment should have an @return line for the return value."
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "line": 556,
                    "reviewer": {
                        "name": "Faisal Awada",
                        "email": "faisal@us.ibm.com",
                        "username": "faisal-awada"
                    },
                    "message": "Ack"
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "line": 561,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "This should be a `const std::string&` to avoid an unnecessary string copy."
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "line": 561,
                    "reviewer": {
                        "name": "Faisal Awada",
                        "email": "faisal@us.ibm.com",
                        "username": "faisal-awada"
                    },
                    "message": "Ack"
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 256,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "think this still needs to be passed in?"
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 256,
                    "reviewer": {
                        "name": "Faisal Awada",
                        "email": "faisal@us.ibm.com",
                        "username": "faisal-awada"
                    },
                    "message": "Not sure need to investigate"
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 256,
                    "reviewer": {
                        "name": "Faisal Awada",
                        "email": "faisal@us.ibm.com",
                        "username": "faisal-awada"
                    },
                    "message": "Yes, it's needed as populateDriverName search each object to find a driver name."
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 1319,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "Nit: Missing blank line between methods."
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 1319,
                    "reviewer": {
                        "name": "Faisal Awada",
                        "email": "faisal@us.ibm.com",
                        "username": "faisal-awada"
                    },
                    "message": "Ack"
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 1322,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "Please don't use tmp for a variable name.  Maybe 'driverName'?"
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "line": 1322,
                    "reviewer": {
                        "name": "Faisal Awada",
                        "email": "faisal@us.ibm.com",
                        "username": "faisal-awada"
                    },
                    "message": "Ack"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 32,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 32,
                    "deletions": -5
                },
                {
                    "file": "phosphor-power-supply/psu_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 109,
            "sizeDeletions": 6
        },
        {
            "number": 3,
            "revision": "d93ce719f285ed61e92ae02e740b64b4bc2272af",
            "parents": [
                "319b0dddfa34c46e487923788c5dddf9f691860d"
            ],
            "ref": "refs/changes/45/66845/3",
            "uploader": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "createdOn": 1698876634,
            "author": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Derek Howard",
                        "email": "derekh@us.ibm.com",
                        "username": "derekhoward55"
                    },
                    "message": "looks good, do the extraneous \n\"Failed binding or unbinding device. errno=16\"\nfor each psu after each bmc reset still show up?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Faisal Awada",
                        "email": "faisal@us.ibm.com",
                        "username": "faisal-awada"
                    },
                    "message": "No more errors when bind device and the device is bound or when unbind and there is no device to unbind."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "may as well take this out of a WIP as people are actively reviewing it"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 100,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "maybe typo here?"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 100,
                    "reviewer": {
                        "name": "Faisal Awada",
                        "email": "faisal@us.ibm.com",
                        "username": "faisal-awada"
                    },
                    "message": "Yes, it should be \"exit\""
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 34,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 29,
                    "deletions": -1
                },
                {
                    "file": "phosphor-power-supply/psu_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "type": "MODIFIED",
                    "insertions": 22,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 110,
            "sizeDeletions": 2
        },
        {
            "number": 4,
            "revision": "5e25b638f24a89568121deda393450508ce1e33f",
            "parents": [
                "319b0dddfa34c46e487923788c5dddf9f691860d"
            ],
            "ref": "refs/changes/45/66845/4",
            "uploader": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "createdOn": 1699019024,
            "author": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 123,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "In the previous commit, on line 114, you added the driverName to bindPath.  So bindPath was updated in the scenario that the driver name was initially \"\" but was later set via setDriverName().\n\nIn this new commit bindPath is not updated.  So if the driver name has changed, bindPath is not 'fixed'.  That means that the value of devicePath won't be correct right?\n\nI would recommend setting bindPath data member in the setDriverName() method.  That is when the driver name is changing, and the bindPath data member is dependent on the driver name.  This would also handle a bug on line 112.  If setDriverName() was called multiple times, it would keep adding more directories to bindPath instead of replacing the old driver name.  So I would recommend setting bindPath to \"/sys/bus/i2c/drivers/\" + driverName in setDriverName().  This handles both the case where driverName was previously empty and the case where it was previously non-empty."
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 123,
                    "reviewer": {
                        "name": "Faisal Awada",
                        "email": "faisal@us.ibm.com",
                        "username": "faisal-awada"
                    },
                    "message": "In the previous commit I forgot to commit the latest change as I mentioned earlier. All PSUs must have same device driver name, so we find device driver name will use that name as long as phorphor-psu-monitor is running.\n\nI have added to my local code some debug, to show bind/unbind get called several times and the code works as expected.  \n\n'''\n 112     if (bindPath.string().find(driverName) != std::string::npos)\n 113     {\n 114         // bindPath has driver name\n 115         path = bindPath / action;\n 116         log<level::INFO>(\n 117             fmt::format(\n 118                 \"PowerSupply::bindOrUnbindDriver bindPath: {}, path: {}\",\n 119                 bindPath.string(), path.string())\n 120                 .c_str());\n 121     }\n 122     else\n 123     {\n 124         // Add driver name to bindPath\n 125         path = bindPath / driverName / action;\n 126         log<level::INFO>(\n 127             fmt::format(\n 128                 \"PowerSupply::bindOrUnbindDriver bindPath: {}, driverName: {}, path: {}\",\n 129                 bindPath.string(), driverName, path.string())\n 130                 .c_str());\n 131     }\n 132 \n \n--------------- Debug output ----------\n\n  1 Nov 09 16:57:33 xxx systemd[1]: Started Phosphor Power Supply Monitor.\n  2 Nov 09 16:57:33 xxx phosphor-psu-monitor[2802]: Failed to find device driver /sys/bus/i2c/devices/3-0068/driver, error filesystem error: read_symlink: No such file or directory [/sys/bus/i2c/devices/3-0068/driver]\n  3 Nov 09 16:57:33 xxx phosphor-psu-monitor[2802]: Unable to find hwmon directory in device base path DEVICE_PATH=/sys/bus/i2c/devices/3-0068\n  4 Nov 09 16:57:33 xxx phosphor-psu-monitor[2802]: PowerSupply::bindOrUnbindDriver bindPath: /sys/bus/i2c/drivers/ibm-cffps, path: /sys/bus/i2c/drivers/ibm-cffps/bind\n  5 Nov 09 16:57:33 xxx phosphor-psu-monitor[2802]: Updating inventory present property. present:true invpath:/system/chassis/motherboard/powersupply1 name:powersupply1\n  6 Nov 09 16:57:33 xxx phosphor-psu-monitor[2802]: powersupply1 MFR_POUT_MAX read 30725\n  7 Nov 09 16:57:33 xxx phosphor-psu-monitor[2802]: powersupply1 fw_version resize needed. size: 8\n  8 Nov 09 16:57:33 xxx phosphor-psu-monitor[2802]: ON_OFF_CONFIG write\n  9 Nov 09 16:57:33 xxx phosphor-psu-monitor[2802]: PowerSupply::bindOrUnbindDriver bindPath: /sys/bus/i2c/drivers/ibm-cffps, path: /sys/bus/i2c/drivers/ibm-cffps/bind\n 10 Nov 09 16:57:33 xxx phosphor-psu-monitor[2802]: Updating inventory present property. present:true invpath:/system/chassis/motherboard/powersupply2 name:powersupply2\n 11 Nov 09 16:57:33 xxx phosphor-psu-monitor[2802]: powersupply2 MFR_POUT_MAX read 30725\n 12 Nov 09 16:57:33 xxx phosphor-psu-monitor[2802]: powersupply2 fw_version resize needed. size: 8\n 13 Nov 09 16:57:33 xxx phosphor-psu-monitor[2802]: ON_OFF_CONFIG write\n 14 Nov 09 16:57:33 xxx phosphor-psu-monitor[2802]: PowerSupply::bindOrUnbindDriver bindPath: /sys/bus/i2c/drivers/ibm-cffps, path: /sys/bus/i2c/drivers/ibm-cffps/bind\n 15 Nov 09 16:57:33 xxx phosphor-psu-monitor[2802]: Updating inventory present property. present:true invpath:/system/chassis/motherboard/powersupply3 name:powersupply3\n.......\n \n 29 Nov 09 16:57:34 xxx phosphor-psu-monitor[2802]: powersupply3 PGOOD fault: STATUS_WORD = 0x0840, STATUS_MFR_SPECIFIC = 0x00\n 30 Nov 09 16:57:34 xxx phosphor-psu-monitor[2802]: powersupply3 READ_VIN back in range: actualInputVoltageOld = 0 actualInputVoltage = 208\n 31 Nov 09 17:05:01 xxx phosphor-psu-monitor[2802]: PowerSupply::bindOrUnbindDriver bindPath: /sys/bus/i2c/drivers/, driverName: ibm-cffps, path: /sys/bus/i2c/drivers/ibm-cffps/bind\n 32 Nov 09 17:05:02 xxx phosphor-psu-monitor[2802]: Binding device driver. path: /sys/bus/i2c/drivers/ibm-cffps/bind device: 3-0068\n 33 Nov 09 17:05:02 xxx phosphor-psu-monitor[2802]: Updating inventory present property. present:true invpath:/system/chassis/motherboard/powersupply0 name:powersupply0\n 34 Nov 09 17:05:02 xxx phosphor-psu-monitor[2802]: powersupply0 fw_version resize needed. size: 8\n 35 Nov 09 17:05:02 xxx phosphor-psu-monitor[2802]: ON_OFF_CONFIG write\n........\n\n 50 Nov 09 17:05:52 xxx phosphor-psu-monitor[2802]: powersupply0 VIN_UV fault: STATUS_WORD = 0x2848, STATUS_MFR_SPECIFIC = 0x00, STATUS_INPUT = 0x08\n 51 Nov 09 17:05:52 xxx phosphor-psu-monitor[2802]: powersupply0 actualInputVoltageOld = 208 actualInputVoltage = 5\n 52 Nov 09 17:05:53 xxx phosphor-psu-monitor[2802]: PowerSupply::bindOrUnbindDriver bindPath: /sys/bus/i2c/drivers/, driverName: ibm-cffps, path: /sys/bus/i2c/drivers/ibm-cffps/unbind\n 53 Nov 09 17:05:53 xxx phosphor-psu-monitor[2802]: Updating inventory present property. present:false invpath:/system/chassis/motherboard/powersupply0 name:powersupply0\n 54 Nov 09 17:07:00 xxx phosphor-psu-monitor[2802]: PowerSupply::bindOrUnbindDriver bindPath: /sys/bus/i2c/drivers/, driverName: ibm-cffps, path: /sys/bus/i2c/drivers/ibm-cffps/bind\n 55 Nov 09 17:07:01 xxx phosphor-psu-monitor[2802]: Binding device driver. path: /sys/bus/i2c/drivers/ibm-cffps/bind device: 3-0068\n 56 Nov 09 17:07:01 xxx phosphor-psu-monitor[2802]: Failed binding or unbinding device. errno=16\n 57 Nov 09 17:07:01 xxx phosphor-psu-monitor[2802]: Updating inventory present property. present:true invpath:/system/chassis/motherboard/powersupply0 name:powersupply0\n......\n 76 Nov 09 17:09:18 xxx phosphor-psu-monitor[2802]: powersupply0 actualInputVoltageOld = 208 actualInputVoltage = 9\n 77 Nov 09 17:09:20 xxx phosphor-psu-monitor[2802]: PowerSupply::bindOrUnbindDriver bindPath: /sys/bus/i2c/drivers/, driverName: ibm-cffps, path: /sys/bus/i2c/drivers/ibm-cffps/unbind\n 78 Nov 09 17:09:20 xxx phosphor-psu-monitor[2802]: Updating inventory present property. present:false invpath:/system/chassis/motherboard/powersupply0 name:powersupply0\n 79 Nov 09 17:09:23 xxx phosphor-psu-monitor[2802]: powersupply1 INPUT fault: STATUS_WORD = 0x2848, STATUS_MFR_SPECIFIC = 0x00, STATUS_INPUT = 0x08\n 80 Nov 09 17:09:23 xxx phosphor-psu-monitor[2802]: powersupply1 VIN_UV fault: STATUS_WORD = 0x2848, STATUS_MFR_SPECIFIC = 0x00, STATUS_INPUT = 0x08\n 81 Nov 09 17:09:23 xxx phosphor-psu-monitor[2802]: powersupply1 actualInputVoltageOld = 208 actualInputVoltage = 5\n 82 Nov 09 17:09:31 xxx phosphor-psu-monitor[2802]: PowerSupply::bindOrUnbindDriver bindPath: /sys/bus/i2c/drivers/ibm-cffps, path: /sys/bus/i2c/drivers/ibm-cffps/unbind\n 83 Nov 09 17:09:31 xxx phosphor-psu-monitor[2802]: Unbinding device driver. path: /sys/bus/i2c/drivers/ibm-cffps/unbind device: 3-0069\n 84 Nov 09 17:09:31 xxx phosphor-psu-monitor[2802]: Updating inventory present property. present:false invpath:/system/chassis/motherboard/powersupply1 name:powersupply1\n 85 Nov 09 17:09:46 xxx phosphor-psu-monitor[2802]: PowerSupply::bindOrUnbindDriver bindPath: /sys/bus/i2c/drivers/, driverName: ibm-cffps, path: /sys/bus/i2c/drivers/ibm-cffps/bind\n 86 Nov 09 17:09:47 xxx phosphor-psu-monitor[2802]: Binding device driver. path: /sys/bus/i2c/drivers/ibm-cffps/bind device: 3-0068\n 87 Nov 09 17:09:47 xxx phosphor-psu-monitor[2802]: Failed binding or unbinding device. errno=16\n 88 Nov 09 17:09:47 xxx phosphor-psu-monitor[2802]: Updating inventory present property. present:true invpath:/system/chassis/motherboard/powersupply0 name:powersupply0\n 89 Nov 09 17:09:47 xxx phosphor-psu-monitor[2802]: powersupply0 fw_version resize needed. size: 8\n 90 Nov 09 17:09:47 xxx phosphor-psu-monitor[2802]: ON_OFF_CONFIG write\n 91 Nov 09 17:09:47 xxx phosphor-psu-monitor[2802]: powersupply0 CML fault: STATUS_WORD = 0x284a, STATUS_CML = 0x80\n 92 Nov 09 17:09:47 xxx phosphor-psu-monitor[2802]: powersupply0 INPUT fault: STATUS_WORD = 0x284a, STATUS_MFR_SPECIFIC = 0x00, STATUS_INPUT = 0x08\n 93 Nov 09 17:09:47 xxx phosphor-psu-monitor[2802]: powersupply0 PGOOD fault: STATUS_WORD = 0x284a, STATUS_MFR_SPECIFIC = 0x00\n 94 Nov 09 17:09:47 xxx phosphor-psu-monitor[2802]: powersupply0 VIN_UV fault: STATUS_WORD = 0x284a, STATUS_MFR_SPECIFIC = 0x00, STATUS_INPUT = 0x08\n 95 Nov 09 17:09:47 xxx phosphor-psu-monitor[2802]: Synchronize INPUT_HISTORY\n 96 Nov 09 17:09:47 xxx phosphor-psu-monitor[2802]: Synchronize INPUT_HISTORY completed\n 97 Nov 09 17:09:47 xxx phosphor-psu-monitor[2802]: powersupply0 INPUT fault: STATUS_WORD = 0x2848, STATUS_MFR_SPECIFIC = 0x00, STATUS_INPUT = 0x08\n 98 Nov 09 17:09:47 xxx phosphor-psu-monitor[2802]: powersupply0 PGOOD fault: STATUS_WORD = 0x2848, STATUS_MFR_SPECIFIC = 0x00\n 99 Nov 09 17:09:47 xxx phosphor-psu-monitor[2802]: powersupply0 VIN_UV fault: STATUS_WORD = 0x2848, STATUS_MFR_SPECIFIC = 0x00, STATUS_INPUT = 0x08\n100 Nov 09 17:09:50 xxx phosphor-psu-monitor[2802]: PowerSupply::bindOrUnbindDriver bindPath: /sys/bus/i2c/drivers/ibm-cffps, path: /sys/bus/i2c/drivers/ibm-cffps/bind\n101 Nov 09 17:09:51 xxx phosphor-psu-monitor[2802]: Binding device driver. path: /sys/bus/i2c/drivers/ibm-cffps/bind device: 3-0069\n102 Nov 09 17:09:51 xxx phosphor-psu-monitor[2802]: Updating inventory present property. present:true invpath:/system/chassis/motherboard/powersupply1 name:powersupply1\n103 Nov 09 17:09:51 xxx phosphor-psu-monitor[2802]: powersupply1 MFR_POUT_MAX read 30725\n104 Nov 09 17:09:51 xxx phosphor-psu-monitor[2802]: powersupply1 fw_version resize needed. size: 8\n105 Nov 09 17:09:51 xxx phosphor-psu-monitor[2802]: ON_OFF_CONFIG write\n106 Nov 09 17:09:51 xxx phosphor-psu-monitor[2802]: powersupply1 CML fault: STATUS_WORD = 0x284a, STATUS_CML = 0x80\n107 Nov 09 17:09:51 xxx phosphor-psu-monitor[2802]: powersupply1 INPUT fault: STATUS_WORD = 0x284a, STATUS_MFR_SPECIFIC = 0x00, STATUS_INPUT = 0x08\n108 Nov 09 17:09:51 xxx phosphor-psu-monitor[2802]: powersupply1 PGOOD fault: STATUS_WORD = 0x284a, STATUS_MFR_SPECIFIC = 0x00\n109 Nov 09 17:09:51 xxx phosphor-psu-monitor[2802]: powersupply1 VIN_UV fault: STATUS_WORD = 0x284a, STATUS_MFR_SPECIFIC = 0x00, STATUS_INPUT = 0x08\n110 Nov 09 17:09:51 xxx phosphor-psu-monitor[2802]: Synchronize INPUT_HISTORY\n111 Nov 09 17:09:51 xxx phosphor-psu-monitor[2802]: Synchronize INPUT_HISTORY completed\n112 Nov 09 17:09:51 xxx phosphor-psu-monitor[2802]: powersupply1 INPUT fault: STATUS_WORD = 0x2848, STATUS_MFR_SPECIFIC = 0x00, STATUS_INPUT = 0x08\n113 Nov 09 17:09:51 xxx phosphor-psu-monitor[2802]: powersupply1 PGOOD fault: STATUS_WORD = 0x2848, STATUS_MFR_SPECIFIC = 0x00\n114 Nov 09 17:09:51 xxx phosphor-psu-monitor[2802]: powersupply1 VIN_UV fault: STATUS_WORD = 0x2848, STATUS_MFR_SPECIFIC = 0x00, STATUS_INPUT = 0x08\n115 Nov 09 17:09:52 xxx phosphor-psu-monitor[2802]: powersupply0 READ_VIN back in range: actualInputVoltageOld = 0 actualInputVoltage = 200\n116 Nov 09 17:09:53 xxx phosphor-psu-monitor[2802]: powersupply0 CML fault: STATUS_WORD = 0x0842, STATUS_CML = 0x80\n117 Nov 09 17:09:53 xxx phosphor-psu-monitor[2802]: powersupply0 INPUT fault cleared: STATUS_WORD = 0x0842, STATUS_MFR_SPECIFIC = 0x00, STATUS_INPUT = 0x00\n118 Nov 09 17:09:56 xxx phosphor-psu-monitor[2802]: powersupply1 READ_VIN back in range: actualInputVoltageOld = 0 actualInputVoltage = 189\n119 Nov 09 17:09:57 xxx phosphor-psu-monitor[2802]: powersupply1 CML fault: STATUS_WORD = 0x0842, STATUS_CML = 0x80\n120 Nov 09 17:09:57 xxx phosphor-psu-monitor[2802]: powersupply1 INPUT fault cleared: STATUS_WORD = 0x0842, STATUS_MFR_SPECIFIC = 0x00, STATUS_INPUT = 0x00\n121 Nov 09 17:09:57 xxx phosphor-psu-monitor[2802]: powersupply1 actualInputVoltageOld = 189 actualInputVoltage = 208\n122 Nov 09 17:11:13 xxx phosphor-psu-monitor[2802]: powersupply3 INPUT fault: STATUS_WORD = 0x2848, STATUS_MFR_SPECIFIC = 0x00, STATUS_INPUT = 0x08\n123 Nov 09 17:11:13 xxx phosphor-psu-monitor[2802]: powersupply3 VIN_UV fault: STATUS_WORD = 0x2848, STATUS_MFR_SPECIFIC = 0x00, STATUS_INPUT = 0x08\n124 Nov 09 17:11:13 xxx phosphor-psu-monitor[2802]: powersupply3 CLEAR_FAULTS: vinUVFault 1 actualInputVoltage 208\n125 Nov 09 17:11:14 xxx phosphor-psu-monitor[2802]: powersupply3 CML fault: STATUS_WORD = 0x284a, STATUS_CML = 0x80\n126 Nov 09 17:11:14 xxx phosphor-psu-monitor[2802]: powersupply3 INPUT fault: STATUS_WORD = 0x284a, STATUS_MFR_SPECIFIC = 0x00, STATUS_INPUT = 0x08\n127 Nov 09 17:11:14 xxx phosphor-psu-monitor[2802]: powersupply3 VIN_UV fault: STATUS_WORD = 0x284a, STATUS_MFR_SPECIFIC = 0x00, STATUS_INPUT = 0x08\n128 Nov 09 17:11:14 xxx phosphor-psu-monitor[2802]: powersupply3 actualInputVoltageOld = 208 actualInputVoltage = 7\n129 Nov 09 17:11:15 xxx phosphor-psu-monitor[2802]: powersupply3 INPUT fault: STATUS_WORD = 0x2848, STATUS_MFR_SPECIFIC = 0x00, STATUS_INPUT = 0x08\n130 Nov 09 17:11:15 xxx phosphor-psu-monitor[2802]: powersupply3 VIN_UV fault: STATUS_WORD = 0x2848, STATUS_MFR_SPECIFIC = 0x00, STATUS_INPUT = 0x08\n131 Nov 09 17:11:16 xxx phosphor-psu-monitor[2802]: PowerSupply::bindOrUnbindDriver bindPath: /sys/bus/i2c/drivers/ibm-cffps, path: /sys/bus/i2c/drivers/ibm-cffps/unbind\n132 Nov 09 17:11:16 xxx phosphor-psu-monitor[2802]: Unbinding device driver. path: /sys/bus/i2c/drivers/ibm-cffps/unbind device: 3-006b\n133 Nov 09 17:11:16 xxx phosphor-psu-monitor[2802]: Updating inventory present property. present:false invpath:/system/chassis/motherboard/powersupply3 name:powersupply3\n134 Nov 09 17:11:50 xxx phosphor-psu-monitor[2802]: PowerSupply::bindOrUnbindDriver bindPath: /sys/bus/i2c/drivers/ibm-cffps, path: /sys/bus/i2c/drivers/ibm-cffps/bind\n135 Nov 09 17:11:51 xxx phosphor-psu-monitor[2802]: Binding device driver. path: /sys/bus/i2c/drivers/ibm-cffps/bind device: 3-006b\n136 Nov 09 17:11:51 xxx phosphor-psu-monitor[2802]: Updating inventory present property. present:true invpath:/system/chassis/motherboard/powersupply3 name:powersupply3\n137 Nov 09 17:11:51 xxx phosphor-psu-monitor[2802]: powersupply3 MFR_POUT_MAX read 30725\n138 Nov 09 17:11:51 xxx phosphor-psu-monitor[2802]: powersupply3 fw_version resize needed. size: 8\n139 Nov 09 17:11:51 xxx phosphor-psu-monitor[2802]: ON_OFF_CONFIG write\n140 Nov 09 17:11:52 xxx phosphor-psu-monitor[2802]: powersupply3 CML fault: STATUS_WORD = 0x284a, STATUS_CML = 0x80\n141 Nov 09 17:11:52 xxx phosphor-psu-monitor[2802]: powersupply3 INPUT fault: STATUS_WORD = 0x284a, STATUS_MFR_SPECIFIC = 0x00, STATUS_INPUT = 0x08\n142 Nov 09 17:11:52 xxx phosphor-psu-monitor[2802]: powersupply3 PGOOD fault: STATUS_WORD = 0x284a, STATUS_MFR_SPECIFIC = 0x00\n143 Nov 09 17:11:52 xxx phosphor-psu-monitor[2802]: powersupply3 VIN_UV fault: STATUS_WORD = 0x284a, STATUS_MFR_SPECIFIC = 0x00, STATUS_INPUT = 0x08\n144 Nov 09 17:11:52 xxx phosphor-psu-monitor[2802]: Synchronize INPUT_HISTORY\n145 Nov 09 17:11:52 xxx phosphor-psu-monitor[2802]: Synchronize INPUT_HISTORY completed\n146 Nov 09 17:11:52 xxx phosphor-psu-monitor[2802]: powersupply3 INPUT fault: STATUS_WORD = 0x2848, STATUS_MFR_SPECIFIC = 0x00, STATUS_INPUT = 0x08\n147 Nov 09 17:11:52 xxx phosphor-psu-monitor[2802]: powersupply3 PGOOD fault: STATUS_WORD = 0x2848, STATUS_MFR_SPECIFIC = 0x00\n148 Nov 09 17:11:52 xxx phosphor-psu-monitor[2802]: powersupply3 VIN_UV fault: STATUS_WORD = 0x2848, STATUS_MFR_SPECIFIC = 0x00, STATUS_INPUT = 0x08\n149 Nov 09 17:11:58 xxx phosphor-psu-monitor[2802]: powersupply3 READ_VIN back in range: actualInputVoltageOld = 0 actualInputVoltage = 86\n150 Nov 09 17:11:59 xxx phosphor-psu-monitor[2802]: powersupply3 CML fault: STATUS_WORD = 0x0842, STATUS_CML = 0x80\n151 Nov 09 17:11:59 xxx phosphor-psu-monitor[2802]: powersupply3 INPUT fault cleared: STATUS_WORD = 0x0842, STATUS_MFR_SPECIFIC = 0x00, STATUS_INPUT = 0x00\n152 Nov 09 17:11:59 xxx phosphor-psu-monitor[2802]: powersupply3 actualInputVoltageOld = 86 actualInputVoltage = 205"
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "line": 123,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "I think this trace shows the problem I was trying to describe:\n\n```\n31 Nov 09 17:05:01 xxx phosphor-psu-monitor[2802]: PowerSupply::bindOrUnbindDriver bindPath: /sys/bus/i2c/drivers/, driverName: ibm-cffps, path: /sys/bus/i2c/drivers/ibm-cffps/bind\n```\n\nbindPath has not been updated with the driverName.  So the following code is not going to work properly right?\n\n```\n    auto devicePath = bindPath / bindDevice;\n    if ((std::filesystem::exists(devicePath) && present) ||\n        (!std::filesystem::exists(devicePath) && !present))\n```"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 34,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 29,
                    "deletions": -1
                },
                {
                    "file": "phosphor-power-supply/psu_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "type": "MODIFIED",
                    "insertions": 22,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 110,
            "sizeDeletions": 2
        },
        {
            "number": 5,
            "revision": "5cb06e8153bfb4532ad3ada153e67bea1d8ed6a6",
            "parents": [
                "319b0dddfa34c46e487923788c5dddf9f691860d"
            ],
            "ref": "refs/changes/45/66845/5",
            "uploader": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "createdOn": 1699993851,
            "author": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 34,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 28,
                    "deletions": -1
                },
                {
                    "file": "phosphor-power-supply/psu_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "type": "MODIFIED",
                    "insertions": 22,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 109,
            "sizeDeletions": 2
        },
        {
            "number": 6,
            "revision": "b7131a12ee603264a90b55dd7afde929434424e9",
            "parents": [
                "319b0dddfa34c46e487923788c5dddf9f691860d"
            ],
            "ref": "refs/changes/45/66845/6",
            "uploader": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "createdOn": 1699994060,
            "author": {
                "name": "Faisal Awada",
                "email": "faisal@us.ibm.com",
                "username": "faisal-awada"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 34,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/psu_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 19,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/power_supply.cpp",
                    "type": "MODIFIED",
                    "insertions": 28,
                    "deletions": -1
                },
                {
                    "file": "phosphor-power-supply/psu_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": 0
                },
                {
                    "file": "phosphor-power-supply/power_supply.hpp",
                    "type": "MODIFIED",
                    "insertions": 22,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 109,
            "sizeDeletions": 2
        }
    ]
}