{
    "project": "openbmc/entity-manager",
    "branch": "master",
    "topic": "meta-hpe: upstream update",
    "id": "Ia545e435f231e33e72a580a58a6fee1a70721226",
    "number": 65942,
    "subject": "add entity manager config for hpe's dl385 g11",
    "owner": {
        "name": "Grant OConnor",
        "email": "grant.oconnor@hpe.com",
        "username": "KeepSummerSaf3"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/entity-manager/+/65942",
    "hashtags": [],
    "createdOn": 1692125292,
    "lastUpdated": 1701795457,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1692125292,
            "reviewer": {
                "name": "Grant OConnor",
                "email": "grant.oconnor@hpe.com",
                "username": "KeepSummerSaf3"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1692125345,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1692125345,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1692125362,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/72894/ : FAILURE"
        },
        {
            "timestamp": 1692197331,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 1:\n\n(8 comments)"
        },
        {
            "timestamp": 1692227026,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1695330094,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Uploaded patch set 2.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1695330119,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1695330120,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1695330142,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/74334/ : FAILURE"
        },
        {
            "timestamp": 1695330503,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1695330524,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1695330524,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1695330564,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/74335/ : FAILURE"
        },
        {
            "timestamp": 1695330703,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Patch Set 4: Patch Set 3 was rebased\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1695330734,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1695330734,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1695330770,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/74336/ : FAILURE"
        },
        {
            "timestamp": 1695332288,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1695332707,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1695408815,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Uploaded patch set 5.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1695408863,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1695408863,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1695409267,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/74425/ : SUCCESS"
        },
        {
            "timestamp": 1695409337,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Patch Set 5:\n\n(2 comments)"
        },
        {
            "timestamp": 1698162804,
            "reviewer": {
                "name": "Grant OConnor",
                "email": "grant.oconnor@hpe.com",
                "username": "KeepSummerSaf3"
            },
            "message": "Topic set to meta-hpe: upstream update"
        },
        {
            "timestamp": 1701795457,
            "reviewer": {
                "name": "Grant OConnor",
                "email": "grant.oconnor@hpe.com",
                "username": "KeepSummerSaf3"
            },
            "message": "Set Work In Progress"
        }
    ],
    "wip": true,
    "patchSets": [
        {
            "number": 1,
            "revision": "bd371ed5787b29e4d92b56166eea23397eb85e75",
            "parents": [
                "6fa508cbdf90fdd612daa05039836486ef6e6bb1"
            ],
            "ref": "refs/changes/42/65942/1",
            "uploader": {
                "name": "Grant OConnor",
                "email": "grant.oconnor@hpe.com",
                "username": "KeepSummerSaf3"
            },
            "createdOn": 1692125292,
            "author": {
                "name": "Grant OConnor",
                "email": "grant.oconnor@hpe.com",
                "username": "KeepSummerSaf3"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 7,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "Add some specific info in the title would be helpful,\nfor example: add HPE DL385 and power supply"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "These need to be added to the meson.build."
                },
                {
                    "file": "configurations/dl385-g11.json",
                    "line": 0,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "nit: other files use underscores in the name"
                },
                {
                    "file": "configurations/dl385-g11.json",
                    "line": 255,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "What reads this? I don't see it in dbus-sensors?"
                },
                {
                    "file": "configurations/dl385-g11.json",
                    "line": 293,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "I don't see Fail or Inst in any of the schema files, or anyone else using it."
                },
                {
                    "file": "configurations/dl385-g11.json",
                    "line": 364,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "This interface is supposed to be created automatically here but there is a bug so it isn't: https://github.com/openbmc/entity-manager/blob/master/src/entity_manager.cpp#L604\n\nI have it on my todo list to fix but just haven't gotten to it yet."
                },
                {
                    "file": "configurations/dl385-g11.json",
                    "line": 367,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "this interface doesn't have a ProductId property: https://github.com/openbmc/phosphor-dbus-interfaces/blob/master/yaml/xyz/openbmc_project/Inventory/Item/Board/Motherboard.interface.yaml"
                },
                {
                    "file": "configurations/dl385-g11.json",
                    "line": 370,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "this interface also doesn't have any properties on it: https://github.com/openbmc/phosphor-dbus-interfaces/blob/master/yaml/xyz/openbmc_project/Inventory/Item/System.interface.yaml"
                },
                {
                    "file": "configurations/hpe_psu.json",
                    "line": 5,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "tabs..."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "configurations/dl385-g11.json",
                    "type": "ADDED",
                    "insertions": 374,
                    "deletions": 0
                },
                {
                    "file": "configurations/hpe_psu.json",
                    "type": "ADDED",
                    "insertions": 154,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 540,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "35e51f344ee804564bb7e3f71263894021c1d2ac",
            "parents": [
                "6fa508cbdf90fdd612daa05039836486ef6e6bb1"
            ],
            "ref": "refs/changes/42/65942/2",
            "uploader": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "createdOn": 1695330094,
            "author": {
                "name": "Grant OConnor",
                "email": "grant.oconnor@hpe.com",
                "username": "KeepSummerSaf3"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "configurations/hpe_dl385g11_baseboard.json",
                    "type": "ADDED",
                    "insertions": 161,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 175,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "5a328cc276d5fb24d254ab2c10885c7abfd578f6",
            "parents": [
                "6fa508cbdf90fdd612daa05039836486ef6e6bb1"
            ],
            "ref": "refs/changes/42/65942/3",
            "uploader": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "createdOn": 1695330503,
            "author": {
                "name": "Grant OConnor",
                "email": "grant.oconnor@hpe.com",
                "username": "KeepSummerSaf3"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "configurations/hpe_dl385g11_baseboard.json",
                    "type": "ADDED",
                    "insertions": 161,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 175,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "b9533da363abd6b75f4a5cffeb8b7ea56c5dbd09",
            "parents": [
                "0422a24bb6033605ce75479f675fedc76abb1167"
            ],
            "ref": "refs/changes/42/65942/4",
            "uploader": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "createdOn": 1695330703,
            "author": {
                "name": "Grant OConnor",
                "email": "grant.oconnor@hpe.com",
                "username": "KeepSummerSaf3"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Christopher Sides",
                        "email": "christopher.sides@hpe.com",
                        "username": "csides-hpe"
                    },
                    "message": "Removed a number of things that aren't implemented in mainstream BMC code yet based on suggestions here (and personal experience with hpe dl360 g11 EM config). \n\nCurrently working out why this config still fails CI testing with a \"FAILED: validate_configs.log\" error, but I wanted to go ahead and upload the updates anyways.\n\nI suspect we probably need to remove another stanza or two, and should have a new version uploaded sooner than later with more changes."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "I think you can just run scripts/validate_configs.py yourself to see what it doesn't like."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Christopher Sides",
                        "email": "christopher.sides@hpe.com",
                        "username": "csides-hpe"
                    },
                    "message": "Thanks for the tip- I hadn't thought to check there yet"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "configurations/hpe_dl385g11_baseboard.json",
                    "type": "ADDED",
                    "insertions": 161,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 175,
            "sizeDeletions": 0
        },
        {
            "number": 5,
            "revision": "f0651a5a2e03a71c6a75ff804c06a37e98f03304",
            "parents": [
                "0422a24bb6033605ce75479f675fedc76abb1167"
            ],
            "ref": "refs/changes/42/65942/5",
            "uploader": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "createdOn": 1695408815,
            "author": {
                "name": "Grant OConnor",
                "email": "grant.oconnor@hpe.com",
                "username": "KeepSummerSaf3"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "configurations/hpe_dl385g11_baseboard.json",
                    "line": 149,
                    "reviewer": {
                        "name": "Christopher Sides",
                        "email": "christopher.sides@hpe.com",
                        "username": "csides-hpe"
                    },
                    "message": "The 'uBootHWid' interface name used here is still up for debate @ https://gerrit.openbmc.org/c/openbmc/docs/+/65678\n\nthe namespace and interface name may change in the future depending on how the discussion there goes, but this name is being used in internal test code.\n\nIf we want to hold off on releasing a ,JSON config that relies on an interface that isn't defined yet, we can just +1 this review if it looks good to everyone, then return to it once the HW detection interface stuff is settled out."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "configurations/hpe_dl385g11_baseboard.json",
                    "type": "ADDED",
                    "insertions": 160,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 174,
            "sizeDeletions": 0
        }
    ]
}