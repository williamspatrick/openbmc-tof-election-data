{
    "project": "openbmc/bmcweb",
    "branch": "master",
    "id": "Iec786e376cea8fd2aa516b5b2a3da4286e59627a",
    "number": 64640,
    "subject": "Add MaxLanes and MaxPCIeType properties to the PCIeInterface",
    "owner": {
        "name": "Konstantin Aladyshev",
        "email": "aladyshev22@gmail.com",
        "username": "Kostr"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/bmcweb/+/64640",
    "hashtags": [],
    "createdOn": 1688477960,
    "lastUpdated": 1689089519,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1688477960,
            "reviewer": {
                "name": "Konstantin Aladyshev",
                "email": "aladyshev22@gmail.com",
                "username": "Kostr"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1688478013,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1688478013,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1688479225,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/70115/ : SUCCESS"
        },
        {
            "timestamp": 1688564607,
            "reviewer": {
                "name": "Lakshmi Yadlapati",
                "email": "lakshmiy@us.ibm.com",
                "username": "Lakshmi-y"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1688567823,
            "reviewer": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1688580559,
            "reviewer": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "message": "Patch Set 1:\n\n(2 comments)"
        },
        {
            "timestamp": 1688598266,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1688662586,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 1: Code-Review+1\n\n(2 comments)"
        },
        {
            "timestamp": 1689087830,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2: Patch Set 1 was rebased\n\nCopied Votes:\n* Code-Review+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE OR changekind:TRIVIAL_REBASE OR is:MIN\")\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1689087867,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1689087867,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1689087891,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2: Code-Review+2\n\n(3 comments)"
        },
        {
            "timestamp": 1689089257,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/70588/ : SUCCESS"
        },
        {
            "timestamp": 1689089519,
            "reviewer": {
                "name": "Konstantin Aladyshev",
                "email": "aladyshev22@gmail.com",
                "username": "Kostr"
            },
            "message": "Change has been successfully rebased and submitted as 814bf20a383c891931b9f68b2d49c6b52318603d"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "e6b854d4f9f4e88539ac2a80165ce16141ef837c",
            "parents": [
                "fc394f67d68890b6a76f9e7af680bd64fcc81aa1"
            ],
            "ref": "refs/changes/40/64640/1",
            "uploader": {
                "name": "Konstantin Aladyshev",
                "email": "aladyshev22@gmail.com",
                "username": "Kostr"
            },
            "createdOn": 1688477960,
            "author": {
                "name": "Konstantin Aladyshev",
                "email": "aladyshev22@gmail.com",
                "username": "Kostr"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "LGTM.  Waiting on the remaining discussions to conclude."
                },
                {
                    "file": "redfish-core/lib/pcie.hpp",
                    "line": 420,
                    "reviewer": {
                        "name": "Myung Bae",
                        "email": "myungbae@us.ibm.com",
                        "username": "baemyung"
                    },
                    "message": "Similar to https://gerrit.openbmc.org/c/openbmc/bmcweb/+/64638, I think the correct type is int64 as specified in https://redfish.dmtf.org/schemas/v1/PCIeDevice_v1.xml"
                },
                {
                    "file": "redfish-core/lib/pcie.hpp",
                    "line": 420,
                    "reviewer": {
                        "name": "Myung Bae",
                        "email": "myungbae@us.ibm.com",
                        "username": "baemyung"
                    },
                    "message": "As commented in https://gerrit.openbmc.org/c/openbmc/bmcweb/+/64638/comment/7bcb0cf4_26ab9d55/, it seems that `size_t` seems preferred for the countable entities."
                },
                {
                    "file": "redfish-core/lib/pcie.hpp",
                    "line": 420,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Why?  There's no requirement that Redfish and Dbus match types.  You need to be quoting phosphor-dbus-interfaces, not redfish.  Unless we go over int32_t_max, then size-t, int64_t, and int32_t produce the same result."
                },
                {
                    "file": "redfish-core/lib/pcie.hpp",
                    "line": 421,
                    "reviewer": {
                        "name": "Lakshmi Yadlapati",
                        "email": "lakshmiy@us.ibm.com",
                        "username": "Lakshmi-y"
                    },
                    "message": "Can we change this to be similar to what we did with the properties in PCIeSlot?\nhttps://github.com/openbmc/bmcweb/blob/master/redfish-core/lib/pcie.hpp#L162C1-L162C1\n   \n   std::string generationSupported;\n   size_t maxLanes = 0;"
                },
                {
                    "file": "redfish-core/lib/pcie.hpp",
                    "line": 421,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Because these properties were added later, I don't think we can do that here."
                },
                {
                    "file": "redfish-core/lib/pcie.hpp",
                    "line": 494,
                    "reviewer": {
                        "name": "Myung Bae",
                        "email": "myungbae@us.ibm.com",
                        "username": "baemyung"
                    },
                    "message": "Since the output will be omitted in case MaxLanes is not set or set to default (0), \nAs @Lakshmi-y commented, it may be better to be done like\n\n```\n  size_t lanesInUse = 0;   \n  size_t maxLanes = 0;\n  const bool success = sdbusplus::unpackPropertiesNoThrow(...);\n  if(maxLanes != 0)\n  {\n       ...\n   }\n```"
                },
                {
                    "file": "redfish-core/lib/pcie.hpp",
                    "line": 494,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "What is in this patch already is fine.  MaxLanes was added last year:\n\nhttps://github.com/openbmc/phosphor-dbus-interfaces/commit/2c9a434998bb9e40e1e0a1e9c500884f11a8c8ab\n\nSo there likely exists implementations of this schema that don't have a MaxLanes property in them.  What is written here appears correct to that end."
                },
                {
                    "file": "redfish-core/lib/pcie.hpp",
                    "line": 494,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 58,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/pcie.hpp",
                    "type": "MODIFIED",
                    "insertions": 34,
                    "deletions": -2
                },
                {
                    "file": "Redfish.md",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 94,
            "sizeDeletions": 2
        },
        {
            "number": 2,
            "revision": "78e1bcca8a86c018e2c9d92e0bbe9e121c579ea1",
            "parents": [
                "9bb0a7fe3c5dd3c3c9056dec7a37896af347912b"
            ],
            "ref": "refs/changes/40/64640/2",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1689087830,
            "author": {
                "name": "Konstantin Aladyshev",
                "email": "aladyshev22@gmail.com",
                "username": "Kostr"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "No more discussion in the last week.  Merging."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 58,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/pcie.hpp",
                    "type": "MODIFIED",
                    "insertions": 34,
                    "deletions": -2
                },
                {
                    "file": "Redfish.md",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 94,
            "sizeDeletions": 2
        },
        {
            "number": 3,
            "revision": "814bf20a383c891931b9f68b2d49c6b52318603d",
            "parents": [
                "82f80326afb1e1cfd6b682d4fa2f75319c83004f"
            ],
            "ref": "refs/changes/40/64640/3",
            "uploader": {
                "name": "Konstantin Aladyshev",
                "email": "aladyshev22@gmail.com",
                "username": "Kostr"
            },
            "createdOn": 1689089519,
            "author": {
                "name": "Konstantin Aladyshev",
                "email": "aladyshev22@gmail.com",
                "username": "Kostr"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 58,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/pcie.hpp",
                    "type": "MODIFIED",
                    "insertions": 34,
                    "deletions": -2
                },
                {
                    "file": "Redfish.md",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 94,
            "sizeDeletions": 2
        }
    ]
}