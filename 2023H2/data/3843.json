{
    "project": "openbmc/phosphor-bmc-code-mgmt",
    "branch": "master",
    "id": "I90aeda32421caf16e6919cffb71dd0450e4cf868",
    "number": 3843,
    "subject": "Sanitize FileName string",
    "owner": {
        "name": "Gunnar Mills",
        "email": "gmills@us.ibm.com",
        "username": "gtmills"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-bmc-code-mgmt/+/3843",
    "hashtags": [],
    "createdOn": 1492790759,
    "lastUpdated": 1693335582,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1492790759,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1492790773,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1492792613,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 1:\n\nBuild Started https://openpower.xyz/job/openbmc-repository-ci/2515/"
        },
        {
            "timestamp": 1492792715,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://openpower.xyz/job/openbmc-repository-ci/2515/ : FAILURE"
        },
        {
            "timestamp": 1493001842,
            "reviewer": {
                "name": "Deepak Kodihalli",
                "email": "deepak.kodihalli.83@gmail.com",
                "username": "dkodihal"
            },
            "message": "Patch Set 1: Code-Review+1"
        },
        {
            "timestamp": 1493038396,
            "reviewer": {
                "name": "Saqib Khan",
                "email": "khansa@us.ibm.com",
                "username": "saqibkh"
            },
            "message": "Patch Set 1: Code-Review+1"
        },
        {
            "timestamp": 1493044703,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Uploaded patch set 2: Patch Set 1 was rebased."
        },
        {
            "timestamp": 1493044719,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 2:\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1493044736,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 2: -Verified\n\nBuild Started https://openpower.xyz/job/openbmc-repository-ci/2580/"
        },
        {
            "timestamp": 1493044852,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://openpower.xyz/job/openbmc-repository-ci/2580/ : SUCCESS"
        },
        {
            "timestamp": 1493141303,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@us.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 2: Code-Review+1"
        },
        {
            "timestamp": 1493148686,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2: Code-Review-1\n\n(2 comments)"
        },
        {
            "timestamp": 1493156509,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1493156525,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1493156622,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1493156873,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1493156890,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1493156941,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1493157911,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 4:\n\nBuild Started https://openpower.xyz/job/openbmc-repository-ci/2783/"
        },
        {
            "timestamp": 1493158031,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 4: Verified-1\n\nBuild Failed \n\nhttps://openpower.xyz/job/openbmc-repository-ci/2783/ : FAILURE"
        },
        {
            "timestamp": 1493169213,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Uploaded patch set 5: Patch Set 4 was rebased."
        },
        {
            "timestamp": 1493169231,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1493169244,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 5:\n\nBuild Started https://openpower.xyz/job/openbmc-repository-ci/2795/"
        },
        {
            "timestamp": 1493169360,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://openpower.xyz/job/openbmc-repository-ci/2795/ : SUCCESS"
        },
        {
            "timestamp": 1493173702,
            "reviewer": {
                "name": "Saqib Khan",
                "email": "khansa@us.ibm.com",
                "username": "saqibkh"
            },
            "message": "Patch Set 5: Code-Review+1"
        },
        {
            "timestamp": 1493237551,
            "reviewer": {
                "name": "Adriana Kobylak",
                "email": "anoo@us.ibm.com",
                "username": "anoo1"
            },
            "message": "Patch Set 5: Code-Review+1"
        },
        {
            "timestamp": 1493240824,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 5: Code-Review-1"
        },
        {
            "timestamp": 1493243011,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Uploaded patch set 6."
        },
        {
            "timestamp": 1493243029,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1493243041,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 6:\n\nBuild Started https://openpower.xyz/job/openbmc-repository-ci/2957/"
        },
        {
            "timestamp": 1493243156,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://openpower.xyz/job/openbmc-repository-ci/2957/ : SUCCESS"
        },
        {
            "timestamp": 1493259480,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 6: Code-Review-1\n\n(1 comment)"
        },
        {
            "timestamp": 1493261023,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 7: Patch Set 6 was rebased"
        },
        {
            "timestamp": 1493261039,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1493261052,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 7:\n\nBuild Started https://openpower.xyz/job/openbmc-repository-ci/2965/"
        },
        {
            "timestamp": 1493261270,
            "reviewer": {
                "name": "Jenkins",
                "email": "openbmc-ci-admin@ozlabs.org",
                "username": "jenkins-openbmc"
            },
            "message": "Patch Set 7: Verified+1\n\nBuild Successful \n\nhttps://openpower.xyz/job/openbmc-repository-ci/2965/ : SUCCESS"
        },
        {
            "timestamp": 1493261406,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1493261748,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 7: Code-Review+2"
        },
        {
            "timestamp": 1493261752,
            "reviewer": {
                "name": "Gerrit Code Review",
                "email": "gerrit@e35effc28ac5"
            },
            "message": "Change has been successfully merged by Patrick Williams"
        },
        {
            "timestamp": 1692063536,
            "reviewer": {
                "name": "zhanghaicheng",
                "email": "zhanghch05@ieisystem.com",
                "username": "zhanghch05"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1692065162,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1692065904,
            "reviewer": {
                "name": "zhanghaicheng",
                "email": "zhanghch05@ieisystem.com",
                "username": "zhanghch05"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1693335582,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "311af6b149942a1943a940ea460870b11886e1ec",
            "parents": [
                "10b7bb64a02dc2e12749b03b805affb8243edb6d"
            ],
            "ref": "refs/changes/43/3843/1",
            "uploader": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "createdOn": 1492790759,
            "author": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "download_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                },
                {
                    "file": "download_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 19,
            "sizeDeletions": 2
        },
        {
            "number": 2,
            "revision": "e91a716da3725960c10e419f617b9aebff8e61fe",
            "parents": [
                "c95c8f8e088ced0d28d02f862337edf5be0c62c7"
            ],
            "ref": "refs/changes/43/3843/2",
            "uploader": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "createdOn": 1493044703,
            "author": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "kind": "NO_CHANGE",
            "comments": [
                {
                    "file": "download_manager.cpp",
                    "line": 30,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "This is still insufficient...\n\nhttp://en.cppreference.com/w/cpp/experimental/fs/path/filename\n\nNotice what happens with \"/\" and \"..\" and etc."
                },
                {
                    "file": "download_manager.cpp",
                    "line": 30,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "I remove any \".\""
                },
                {
                    "file": "download_manager.cpp",
                    "line": 30,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "and any \"/\" characters."
                },
                {
                    "file": "download_manager.hpp",
                    "line": 40,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I should have caught this earlier but none of these should be 'const'.  You should not put const on a pass-by-value parameter to any function."
                },
                {
                    "file": "download_manager.hpp",
                    "line": 40,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "Since this is already merged code, I removed here."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "download_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                },
                {
                    "file": "download_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 19,
            "sizeDeletions": 2
        },
        {
            "number": 3,
            "revision": "d918235c3fc00f4fa98dd3258a9ce2c388d2ada2",
            "parents": [
                "8863dc47dff84392be98ea60656c439c5939d14d"
            ],
            "ref": "refs/changes/43/3843/3",
            "uploader": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "createdOn": 1493156509,
            "author": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "download_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                },
                {
                    "file": "download_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 25,
            "sizeDeletions": 4
        },
        {
            "number": 4,
            "revision": "c1cd96415e1f0e522affd31bf13006239bdc5eea",
            "parents": [
                "8863dc47dff84392be98ea60656c439c5939d14d"
            ],
            "ref": "refs/changes/43/3843/4",
            "uploader": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "createdOn": 1493156873,
            "author": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "download_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                },
                {
                    "file": "download_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 25,
            "sizeDeletions": 4
        },
        {
            "number": 5,
            "revision": "2c271909c3fbcee6a7eae1803f8ff0e254ac9ef3",
            "parents": [
                "9227e8dabe4d04570667c5bdf2cfae02f3495c78"
            ],
            "ref": "refs/changes/43/3843/5",
            "uploader": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "createdOn": 1493169213,
            "author": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "download_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                },
                {
                    "file": "download_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 10,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 25,
            "sizeDeletions": 4
        },
        {
            "number": 6,
            "revision": "7a0244871f36137c73b49a194f55e4a99cbd86d7",
            "parents": [
                "9227e8dabe4d04570667c5bdf2cfae02f3495c78"
            ],
            "ref": "refs/changes/43/3843/6",
            "uploader": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "createdOn": 1493243011,
            "author": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "download_manager.cpp",
                    "line": 32,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "But now I can't download foo.tar. :(\n\nFiles are hard.  Dealing with users is hard."
                },
                {
                    "file": "download_manager.cpp",
                    "line": 32,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gmills@us.ibm.com",
                        "username": "gtmills"
                    },
                    "message": "You can download foo.tar You just can't download ../../foo.tar or .foo.tar\n\nThis is me downloading pnor.squashfs.tar\nroot@w33:/tmp# ls -l images\nls: images: No such file or directory\n\nroot@w33:/tmp# \n\nroot@w33:/tmp# busctl call  xyz.openbmc_project.Software.Download  /xyz/openbmc_project/software  xyz.openbmc_project.Common.TFTP DownloadViaTFTP ss pnor.squashfs.tar  9.3.164.219\n\nroot@w33:/tmp# ls -l images\ntotal 5008\n-rw-r--r--    1 root     root       5125632 Mar 31 09:44 pnor.squashfs.tar"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "download_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                },
                {
                    "file": "download_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 24,
            "sizeDeletions": 4
        },
        {
            "number": 7,
            "revision": "4973943157c2c1258e522ed183044dbc9e623863",
            "parents": [
                "3a482f67eb50cc9bd779dc8f3412e793b9b3cae9"
            ],
            "ref": "refs/changes/43/3843/7",
            "uploader": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "createdOn": 1493261023,
            "author": {
                "name": "Gunnar Mills",
                "email": "gmills@us.ibm.com",
                "username": "gtmills"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "download_manager.cpp",
                    "line": 31,
                    "reviewer": {
                        "name": "zhanghaicheng",
                        "email": "zhanghch05@ieisystem.com",
                        "username": "zhanghch05"
                    },
                    "message": "I don't understand why all the '/' are removed here.\nIn this case, we can only put the files in the root directory of the tftp server. If we put it in a folder, we will not be able to get it."
                },
                {
                    "file": "download_manager.cpp",
                    "line": 31,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "This commit is from 2017. I don\u2019t think it is useful to start a discussion on it."
                },
                {
                    "file": "download_manager.cpp",
                    "line": 31,
                    "reviewer": {
                        "name": "zhanghaicheng",
                        "email": "zhanghch05@ieisystem.com",
                        "username": "zhanghch05"
                    },
                    "message": "Although it's been six years, no one has modified it, and no one seems to use it, because I tested it with problems."
                },
                {
                    "file": "download_manager.cpp",
                    "line": 31,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Feel free to upload suggested fixes here to Gerrit."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "download_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -2
                },
                {
                    "file": "download_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": -2
                }
            ],
            "sizeInsertions": 24,
            "sizeDeletions": 4
        }
    ]
}