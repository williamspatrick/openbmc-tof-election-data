{
    "project": "openbmc/openbmc",
    "branch": "master",
    "id": "I7ffc707e0a0fcee6d8aca74e19091215ce71a01b",
    "number": 66486,
    "subject": "meta-evb: evb-npcm845: ipmi: enable end0/end1 as RMCP+ interface",
    "owner": {
        "name": "Tim Lee",
        "email": "chli30@nuvoton.com",
        "username": "timlee66"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/openbmc/+/66486",
    "hashtags": [],
    "createdOn": 1694057900,
    "lastUpdated": 1698794798,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1694057900,
            "reviewer": {
                "name": "Tim Lee",
                "email": "chli30@nuvoton.com",
                "username": "timlee66"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1694058012,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1694058012,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1694058021,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1:\n\nBuild Started https://jenkins.openbmc.org/job/ci-openbmc/19513/"
        },
        {
            "timestamp": 1694058644,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-openbmc/19513/ : SUCCESS"
        },
        {
            "timestamp": 1694058653,
            "reviewer": {
                "name": "Jenkins OpenBMC Google",
                "email": "haojenkinsg00gle@gmail.com",
                "username": "jenkins-openbmc-g00gle"
            },
            "message": "Patch Set 1:\n\nBuild Successful \n\nGoogle Internal CI : Google internal tests successfully started"
        },
        {
            "timestamp": 1694059951,
            "reviewer": {
                "name": "Jenkins OpenBMC IBM",
                "email": "geissonator+jenkinsibm@gmail.com",
                "username": "jenkins-openbmc-ibm"
            },
            "message": "Patch Set 1:\n\nBuild Successful \n\nIBM Hardware CI : witherspoon hardware tests passed"
        },
        {
            "timestamp": 1694075096,
            "reviewer": {
                "name": "Brian Ma",
                "email": "chma0@nuvoton.com",
                "username": "minimada"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1694395317,
            "reviewer": {
                "name": "Tim Lee",
                "email": "chli30@nuvoton.com",
                "username": "timlee66"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1694438369,
            "reviewer": {
                "name": "Milton D. Miller II",
                "email": "mdmii@outlook.com",
                "username": "mdmillerii"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1694488243,
            "reviewer": {
                "name": "Tim Lee",
                "email": "chli30@nuvoton.com",
                "username": "timlee66"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1695000218,
            "reviewer": {
                "name": "Tim Lee",
                "email": "chli30@nuvoton.com",
                "username": "timlee66"
            },
            "message": "Uploaded patch set 2.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1695000306,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1695000307,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1695000315,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2:\n\nBuild Started https://jenkins.openbmc.org/job/ci-openbmc/19650/"
        },
        {
            "timestamp": 1695000347,
            "reviewer": {
                "name": "Tim Lee",
                "email": "chli30@nuvoton.com",
                "username": "timlee66"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1695000970,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-openbmc/19650/ : SUCCESS"
        },
        {
            "timestamp": 1695000978,
            "reviewer": {
                "name": "Jenkins OpenBMC Google",
                "email": "haojenkinsg00gle@gmail.com",
                "username": "jenkins-openbmc-g00gle"
            },
            "message": "Patch Set 2:\n\nBuild Successful \n\nGoogle Internal CI : Google internal tests successfully started"
        },
        {
            "timestamp": 1695002288,
            "reviewer": {
                "name": "Jenkins OpenBMC IBM",
                "email": "geissonator+jenkinsibm@gmail.com",
                "username": "jenkins-openbmc-ibm"
            },
            "message": "Patch Set 2:\n\nBuild Successful \n\nIBM Hardware CI : witherspoon hardware tests passed"
        },
        {
            "timestamp": 1695145779,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1695181730,
            "reviewer": {
                "name": "Tim Lee",
                "email": "chli30@nuvoton.com",
                "username": "timlee66"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1695181766,
            "reviewer": {
                "name": "Tim Lee",
                "email": "chli30@nuvoton.com",
                "username": "timlee66"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1695181841,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1695181841,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1695181847,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3:\n\nBuild Started https://jenkins.openbmc.org/job/ci-openbmc/19697/"
        },
        {
            "timestamp": 1695182502,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-openbmc/19697/ : SUCCESS"
        },
        {
            "timestamp": 1695182512,
            "reviewer": {
                "name": "Jenkins OpenBMC Google",
                "email": "haojenkinsg00gle@gmail.com",
                "username": "jenkins-openbmc-g00gle"
            },
            "message": "Patch Set 3:\n\nBuild Successful \n\nGoogle Internal CI : Google internal tests successfully started"
        },
        {
            "timestamp": 1695183825,
            "reviewer": {
                "name": "Jenkins OpenBMC IBM",
                "email": "geissonator+jenkinsibm@gmail.com",
                "username": "jenkins-openbmc-ibm"
            },
            "message": "Patch Set 3:\n\nBuild Successful \n\nIBM Hardware CI : witherspoon hardware tests passed"
        },
        {
            "timestamp": 1696300242,
            "reviewer": {
                "name": "Tim Lee",
                "email": "chli30@nuvoton.com",
                "username": "timlee66"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1697729674,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1697778151,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@codeconstruct.com.au",
                "username": "amboar"
            },
            "message": "Patch Set 3:\n\n(2 comments)"
        },
        {
            "timestamp": 1698130378,
            "reviewer": {
                "name": "Tim Lee",
                "email": "chli30@nuvoton.com",
                "username": "timlee66"
            },
            "message": "Patch Set 3:\n\n(3 comments)"
        },
        {
            "timestamp": 1698388581,
            "reviewer": {
                "name": "Andrew Jeffery",
                "email": "andrew@codeconstruct.com.au",
                "username": "amboar"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1698631736,
            "reviewer": {
                "name": "Tim Lee",
                "email": "chli30@nuvoton.com",
                "username": "timlee66"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "eed3e2e0429e3c2e97cf673aa2b9dc27cb9512e2",
            "parents": [
                "9dd16c03491021701325948c820891f8341c778d"
            ],
            "ref": "refs/changes/86/66486/1",
            "uploader": {
                "name": "Tim Lee",
                "email": "chli30@nuvoton.com",
                "username": "timlee66"
            },
            "createdOn": 1694057900,
            "author": {
                "name": "Tim Lee",
                "email": "chli30@nuvoton.com",
                "username": "timlee66"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 17,
                    "reviewer": {
                        "name": "Milton D. Miller II",
                        "email": "mdmii@outlook.com",
                        "username": "mdmillerii"
                    },
                    "message": "what happens if you suppress systemd network names for theses interfaces?\n\nwe are using eth names for aspeed.   The device tree alias system reserves the device numbers to match the alias so the name is stable."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 17,
                    "reviewer": {
                        "name": "Tim Lee",
                        "email": "chli30@nuvoton.com",
                        "username": "timlee66"
                    },
                    "message": "According systemd/src/udev/udev-builtin-net_id.c that support to use devicetree aliases when available. In function builtin_net_id()\n\nswitch (info.iftype) {\ncase ARPHRD_ETHER:\n        prefix = \"en\";\n        break;\n}\n\n/* get devicetree aliases; only ethernet supported for now  */\nif (streq(prefix, \"en\") && dev_devicetree_onboard(dev, &names) >= 0 &&\n    names.type == NET_DEVICETREE) {\n    char str[ALTIFNAMSIZ];\n    if (snprintf_ok(str, sizeof str, \"%s%s\", prefix, names.devicetree_onboard))\n         udev_builtin_add_property(dev, test, \"ID_NET_NAME_ONBOARD\", str);\n}\n\nAnd our DTS have aliases for ethernet as below.\naliases {\n\tethernet0 = &gmac0;\n\tethernet1 = &gmac1;\n\tethernet2 = &gmac2;\n\tethernet3 = &gmac3;\n}\n\nWe found that our IPMI OOB command cannot work normally. From the log and ifconfig result, we found that name of network be changed with prefix \"end\", not \"eth\". But, our channel_config.json still using \"eth\" naming. Thus, netipmid -c eth0 and eth1 these services both got failed then cause Error: Unable to establish IPMI v2 / RMCP+ session. Thanks for your review.\n\nroot@evb-npcm845:~# ps | grep ipmi\n  436 root     17816 S    /usr/bin/netipmid -c eth0\n  437 root     17812 S    /usr/bin/netipmid -c eth1"
                },
                {
                    "file": "meta-nuvoton/recipes-phosphor/ipmi/phosphor-ipmi-config.bbappend",
                    "line": 5,
                    "reviewer": {
                        "name": "Brian Ma",
                        "email": "chma0@nuvoton.com",
                        "username": "minimada"
                    },
                    "message": "Should we put evb relaitve code in meta-nuvoton?"
                },
                {
                    "file": "meta-nuvoton/recipes-phosphor/ipmi/phosphor-ipmi-config.bbappend",
                    "line": 5,
                    "reviewer": {
                        "name": "Tim Lee",
                        "email": "chli30@nuvoton.com",
                        "username": "timlee66"
                    },
                    "message": "Thanks your review. Might be we need to create another meta-evb-npcm845 layer in meta-nuvoton to make more clear view for customer."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 34,
                    "deletions": 0
                },
                {
                    "file": "meta-nuvoton/recipes-phosphor/ipmi/phosphor-ipmi-net_%.bbappend",
                    "type": "ADDED",
                    "insertions": 7,
                    "deletions": 0
                },
                {
                    "file": "meta-nuvoton/recipes-phosphor/ipmi/phosphor-ipmi-config.bbappend",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "meta-nuvoton/recipes-phosphor/ipmi/phosphor-ipmi-config/channel_config.json",
                    "type": "ADDED",
                    "insertions": 178,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 229,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "c68318e387bdc31236da7d36fa9cb585e1322615",
            "parents": [
                "9dd16c03491021701325948c820891f8341c778d"
            ],
            "ref": "refs/changes/86/66486/2",
            "uploader": {
                "name": "Tim Lee",
                "email": "chli30@nuvoton.com",
                "username": "timlee66"
            },
            "createdOn": 1695000218,
            "author": {
                "name": "Tim Lee",
                "email": "chli30@nuvoton.com",
                "username": "timlee66"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Tim Lee",
                        "email": "chli30@nuvoton.com",
                        "username": "timlee66"
                    },
                    "message": "Change to meta-evb layer for this commit due to this is relate to DTS aliases for EVB. Please help us to review it. Thank you."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "@Joel - Do you know if there is anything we can do to get consistency on the device names?"
                },
                {
                    "file": "meta-evb/meta-evb-nuvoton/meta-evb-npcm845/recipes-phosphor/ipmi/phosphor-ipmi-config/channel_config.json",
                    "line": 3,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "should this be either 'ipmb' or 'IPMB'?  Or is 'Ipmb' some special string in the code?"
                },
                {
                    "file": "meta-evb/meta-evb-nuvoton/meta-evb-npcm845/recipes-phosphor/ipmi/phosphor-ipmi-config/channel_config.json",
                    "line": 3,
                    "reviewer": {
                        "name": "Tim Lee",
                        "email": "chli30@nuvoton.com",
                        "username": "timlee66"
                    },
                    "message": "Thanks for your review. You're right, should be use 'IPMB' string. Done."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 41,
                    "deletions": 0
                },
                {
                    "file": "meta-evb/meta-evb-nuvoton/meta-evb-npcm845/recipes-phosphor/ipmi/phosphor-ipmi-config.bbappend",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "meta-evb/meta-evb-nuvoton/meta-evb-npcm845/recipes-phosphor/ipmi/phosphor-ipmi-config/channel_config.json",
                    "type": "ADDED",
                    "insertions": 178,
                    "deletions": 0
                },
                {
                    "file": "meta-evb/meta-evb-nuvoton/meta-evb-npcm845/recipes-phosphor/ipmi/phosphor-ipmi-net_%.bbappend",
                    "type": "ADDED",
                    "insertions": 7,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 236,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "d3e294d64087c167ab0c3064559ad6d41ba2297b",
            "parents": [
                "9dd16c03491021701325948c820891f8341c778d"
            ],
            "ref": "refs/changes/86/66486/3",
            "uploader": {
                "name": "Tim Lee",
                "email": "chli30@nuvoton.com",
                "username": "timlee66"
            },
            "createdOn": 1695181730,
            "author": {
                "name": "Tim Lee",
                "email": "chli30@nuvoton.com",
                "username": "timlee66"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 16,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "Can you provide a link to the relevant systemd documentation so I can understand this?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 16,
                    "reviewer": {
                        "name": "Tim Lee",
                        "email": "chli30@nuvoton.com",
                        "username": "timlee66"
                    },
                    "message": "Here is the link for you refer it. Thanks.\nhttps://github.com/systemd/systemd/commit/65c2ad985a8debdf6d7d11fee5b466f280260f4b"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 24,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "Can you provide a link to the dts file in question?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 24,
                    "reviewer": {
                        "name": "Tim Lee",
                        "email": "chli30@nuvoton.com",
                        "username": "timlee66"
                    },
                    "message": "Here is the link for the dts.\nhttps://github.com/Nuvoton-Israel/linux/blob/NPCM-6.1-OpenBMC/arch/arm64/boot/dts/nuvoton/nuvoton-npcm845-evb.dts"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Tim Lee",
                        "email": "chli30@nuvoton.com",
                        "username": "timlee66"
                    },
                    "message": "Hi All,\nCould we have chance for merging this commit for our EVB? Thanks for your help.\n\nSincerely,\nTim"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "@arj - Could you weigh in on this in Joel's absence?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Tim Lee",
                        "email": "chli30@nuvoton.com",
                        "username": "timlee66"
                    },
                    "message": "Hi All,\nSorry for response lately. Please help us to review it again. Thanks.\n\nSincerely,\nTim"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Andrew Jeffery",
                        "email": "andrew@codeconstruct.com.au",
                        "username": "amboar"
                    },
                    "message": "With the link to the systemd patch I can see how they arrived at this change. I guess some input from Vernon and Tom wouldn't hurt."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Tim Lee",
                        "email": "chli30@nuvoton.com",
                        "username": "timlee66"
                    },
                    "message": "Thanks for adding more reviewers to check this commit. Please let me know if there is any concern for merging it. Thanks."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 41,
                    "deletions": 0
                },
                {
                    "file": "meta-evb/meta-evb-nuvoton/meta-evb-npcm845/recipes-phosphor/ipmi/phosphor-ipmi-config.bbappend",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "meta-evb/meta-evb-nuvoton/meta-evb-npcm845/recipes-phosphor/ipmi/phosphor-ipmi-config/channel_config.json",
                    "type": "ADDED",
                    "insertions": 178,
                    "deletions": 0
                },
                {
                    "file": "meta-evb/meta-evb-nuvoton/meta-evb-npcm845/recipes-phosphor/ipmi/phosphor-ipmi-net_%.bbappend",
                    "type": "ADDED",
                    "insertions": 7,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 236,
            "sizeDeletions": 0
        }
    ]
}