{
    "project": "openbmc/webui-vue",
    "branch": "master",
    "id": "I67f99dc61049df66136eea88267123a2593b6df1",
    "number": 71225,
    "subject": "Add kvm connection retries",
    "owner": {
        "name": "Konstantin Maskov",
        "email": "sulwirld@gmail.com",
        "username": "BlueSnake00"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/webui-vue/+/71225",
    "hashtags": [],
    "createdOn": 1714641871,
    "lastUpdated": 1715627488,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1714641871,
            "reviewer": {
                "name": "Konstantin Maskov",
                "email": "sulwirld@gmail.com",
                "username": "BlueSnake00"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1714641917,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1714641917,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1714641997,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/83728/ : SUCCESS"
        },
        {
            "timestamp": 1714681979,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1714682050,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1714682311,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1714721705,
            "reviewer": {
                "name": "Nikhil Ashoka",
                "email": "a.nikhil@ibm.com",
                "username": "Nikhil-Ashoka"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1714736444,
            "reviewer": {
                "name": "Kiran Kumar Ballapalli",
                "email": "kirankumarb@ami.com",
                "username": "kirankumarb07"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1714984332,
            "reviewer": {
                "name": "Konstantin Maskov",
                "email": "sulwirld@gmail.com",
                "username": "BlueSnake00"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1714984592,
            "reviewer": {
                "name": "Konstantin Maskov",
                "email": "sulwirld@gmail.com",
                "username": "BlueSnake00"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1714985006,
            "reviewer": {
                "name": "Konstantin Maskov",
                "email": "sulwirld@gmail.com",
                "username": "BlueSnake00"
            },
            "message": "Uploaded patch set 2.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1714985042,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1714985043,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1714985124,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/83832/ : SUCCESS"
        },
        {
            "timestamp": 1714985140,
            "reviewer": {
                "name": "Konstantin Maskov",
                "email": "sulwirld@gmail.com",
                "username": "BlueSnake00"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1715196265,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1715627341,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1715627488,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2:\n\n(3 comments)"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "ad7d7d787b7f1d747a55dc0646403725ac3153fe",
            "parents": [
                "01492c3dcbdba6b463ecef63f4c769520432d829"
            ],
            "ref": "refs/changes/25/71225/1",
            "uploader": {
                "name": "Konstantin Maskov",
                "email": "sulwirld@gmail.com",
                "username": "BlueSnake00"
            },
            "createdOn": 1714641871,
            "author": {
                "name": "Konstantin Maskov",
                "email": "sulwirld@gmail.com",
                "username": "BlueSnake00"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 11,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gunnar@gmills.xyz",
                        "username": "gtmills"
                    },
                    "message": "Can you answer the questions from the first review \n\nHow was 5 chosen? How was the 2 second retry chosen?\nWhy isn't KVM always successful?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gunnar@gmills.xyz",
                        "username": "gtmills"
                    },
                    "message": "Why a new one and not just reopen https://gerrit.openbmc.org/c/openbmc/webui-vue/+/69137?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Nikhil Ashoka",
                        "email": "a.nikhil@ibm.com",
                        "username": "Nikhil-Ashoka"
                    },
                    "message": "I see that here, trying to Connect when the status is disconnect, But also, maxRetries is 5, Is there a specific reason for 5?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Kiran Kumar Ballapalli",
                        "email": "kirankumarb@ami.com",
                        "username": "kirankumarb07"
                    },
                    "message": "Can you share the error if KVM not working at first time if any? Agree on Reviewers valid questions. We should have detailed information about why its failing in first try? why max tries needed ? on what basis retry  count  value need to be decided."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Konstantin Maskov",
                        "email": "sulwirld@gmail.com",
                        "username": "BlueSnake00"
                    },
                    "message": "You can see connection errors in your browser:\n\nWebSocket connection to 'wss://localhost:3445/kvm/0' failed: \nWebSocket on-error event"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gunnar@gmills.xyz",
                        "username": "gtmills"
                    },
                    "message": "Can you add this to the commit msg? \nCan you explain more on what exactly failed? Is there a problem in the backend we should fix?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Can you add the disconnect reason (available in the browser logs) as well?  Realistically, we should not be seeing this in the webui, and if bmcweb is dropping connections for no reason, that's a bug in bmcweb or deeper that we shouldn't cover up with the webui."
                },
                {
                    "file": "src/views/Operations/Kvm/KvmConsole.vue",
                    "line": 111,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gunnar@gmills.xyz",
                        "username": "gtmills"
                    },
                    "message": "So this will try 6 times? Seems like a lot.\n2-3 retries. 3-4 attempts seems more reasonable to me."
                },
                {
                    "file": "src/views/Operations/Kvm/KvmConsole.vue",
                    "line": 111,
                    "reviewer": {
                        "name": "Konstantin Maskov",
                        "email": "sulwirld@gmail.com",
                        "username": "BlueSnake00"
                    },
                    "message": "Okay, I'll change to 3 attempts."
                },
                {
                    "file": "src/views/Operations/Kvm/KvmConsole.vue",
                    "line": 111,
                    "reviewer": {
                        "name": "Konstantin Maskov",
                        "email": "sulwirld@gmail.com",
                        "username": "BlueSnake00"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "src/views/Operations/Kvm/KvmConsole.vue",
                    "type": "MODIFIED",
                    "insertions": 33,
                    "deletions": -22
                }
            ],
            "sizeInsertions": 46,
            "sizeDeletions": 22
        },
        {
            "number": 2,
            "revision": "a6327483e889db5c258de526c6b66b24ec90d494",
            "parents": [
                "01492c3dcbdba6b463ecef63f4c769520432d829"
            ],
            "ref": "refs/changes/25/71225/2",
            "uploader": {
                "name": "Konstantin Maskov",
                "email": "sulwirld@gmail.com",
                "username": "BlueSnake00"
            },
            "createdOn": 1714985006,
            "author": {
                "name": "Konstantin Maskov",
                "email": "sulwirld@gmail.com",
                "username": "BlueSnake00"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "src/views/Operations/Kvm/KvmConsole.vue",
                    "line": 111,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Why limit this at all?"
                },
                {
                    "file": "src/views/Operations/Kvm/KvmConsole.vue",
                    "line": 120,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "It seems like this is the only thing we should be trying in the retry loop.  we shouldn't be retrying anything before or after this block."
                },
                {
                    "file": "src/views/Operations/Kvm/KvmConsole.vue",
                    "line": 124,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "?"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "src/views/Operations/Kvm/KvmConsole.vue",
                    "type": "MODIFIED",
                    "insertions": 33,
                    "deletions": -22
                }
            ],
            "sizeInsertions": 46,
            "sizeDeletions": 22
        }
    ]
}