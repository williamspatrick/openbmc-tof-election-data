{
    "project": "openbmc/bmcweb",
    "branch": "master",
    "id": "Icf25840b6496bde834a3c1ab123da8a9153b8d8a",
    "number": 68442,
    "subject": "PowerSubsystem: Add Allocation properties",
    "owner": {
        "name": "George Liu",
        "email": "liuxiwei@ieisystem.com",
        "username": "lxwinspur"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/bmcweb/+/68442",
    "hashtags": [],
    "createdOn": 1703150287,
    "lastUpdated": 1712015734,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1703150287,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@ieisystem.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1703150363,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1703150363,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1703150503,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/77269/ : FAILURE"
        },
        {
            "timestamp": 1703151381,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@ieisystem.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 2.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1703151443,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1703151443,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1703152079,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/77270/ : SUCCESS"
        },
        {
            "timestamp": 1704474236,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 2: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1704474869,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2: Code-Review-1\n\n(5 comments)"
        },
        {
            "timestamp": 1705991601,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@ieisystem.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1706019306,
            "reviewer": {
                "name": "Shawn McCarney",
                "email": "shawnmm@us.ibm.com",
                "username": "smccarney"
            },
            "message": "Patch Set 2: -Code-Review\n\n(1 comment)"
        },
        {
            "timestamp": 1706173323,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@ieisystem.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Code-Review-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE OR changekind:TRIVIAL_REBASE OR is:MIN\")\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1706173438,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1706173438,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1706173506,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/78379/ : FAILURE"
        },
        {
            "timestamp": 1706173736,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@ieisystem.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 4: Commit message was updated.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1706173819,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1706173819,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1706173948,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@ieisystem.com",
                "username": "lxwinspur"
            },
            "message": "Patch Set 4:\n\n(5 comments)"
        },
        {
            "timestamp": 1706174503,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/78380/ : SUCCESS"
        },
        {
            "timestamp": 1706593116,
            "reviewer": {
                "name": "George Liu",
                "email": "liuxiwei@ieisystem.com",
                "username": "lxwinspur"
            },
            "message": "Uploaded patch set 5.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1706593219,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1706593219,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1706593908,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/78522/ : SUCCESS"
        },
        {
            "timestamp": 1706624794,
            "reviewer": {
                "name": "Myung Bae",
                "email": "myungbae@us.ibm.com",
                "username": "baemyung"
            },
            "message": "Patch Set 5: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1712015734,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Abandoned\n\nNo response from submitter.  Code doesn't meet coding standard."
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "4058d27db8cf10ed09c2121a7c7d5155f2a87984",
            "parents": [
                "70c4d545817d83819f7f0cd571e0160bacb51d11"
            ],
            "ref": "refs/changes/42/68442/1",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@ieisystem.com",
                "username": "lxwinspur"
            },
            "createdOn": 1703150287,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@ieisystem.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 45,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/power_subsystem.hpp",
                    "type": "MODIFIED",
                    "insertions": 102,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 147,
            "sizeDeletions": 1
        },
        {
            "number": 2,
            "revision": "9ae36439808d783fd5e18c2311cb6db1a3111720",
            "parents": [
                "70c4d545817d83819f7f0cd571e0160bacb51d11"
            ],
            "ref": "refs/changes/42/68442/2",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@ieisystem.com",
                "username": "lxwinspur"
            },
            "createdOn": 1703151381,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@ieisystem.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "Thanks George!"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@ieisystem.com",
                        "username": "lxwinspur"
                    },
                    "message": "@Shawn\nCould you take a look at Ed's comments?\nBecause I made a complete copy of these codes, I don\u2019t know what the background is."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Shawn McCarney",
                        "email": "shawnmm@us.ibm.com",
                        "username": "smccarney"
                    },
                    "message": "Hi.  I was assigned the work item to implement these Redfish properties very late in a release cycle.  As a result I needed to do a downstream implementation that was not general purpose.\n\nI appreciate your efforts in upstreaming this.  I agree with Ed that this code needs to be more general and handle chassis-specific properties to be acceptable upstream.\n\nI don't have time to work on that right now.  If you have time that would be great.  Otherwise I will re-visit this when I am freed up."
                },
                {
                    "file": "redfish-core/lib/power_subsystem.hpp",
                    "line": 68,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Is < 0 declared as an invalid power cap value?  Why are we checking both < 0 and == UINT32_MAX.\n\n\nnit, please use std::numeric_limits<uint32_t>::max() just for consistency with other range checks."
                },
                {
                    "file": "redfish-core/lib/power_subsystem.hpp",
                    "line": 68,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@ieisystem.com",
                        "username": "lxwinspur"
                    },
                    "message": "> Is < 0 declared as an invalid power cap value?  \n\nmaxPowerCapValue is declared as uint32_t, so there will be no situation <0\n\n> Why are we checking both < 0 and == UINT32_MAX.\n\nBecause maxPowerCapValue is declared as uint32_t, I do not think we need to check both < 0 and == UINT32_MAX\n\n> \n> \n> nit, please use std::numeric_limits<uint32_t>::max() just for consistency with other range checks."
                },
                {
                    "file": "redfish-core/lib/power_subsystem.hpp",
                    "line": 84,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Please rework.  There are lots of apparent readability issues with this code block."
                },
                {
                    "file": "redfish-core/lib/power_subsystem.hpp",
                    "line": 84,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@ieisystem.com",
                        "username": "lxwinspur"
                    },
                    "message": "Acknowledged"
                },
                {
                    "file": "redfish-core/lib/power_subsystem.hpp",
                    "line": 92,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Is there a namespace that power capping is supposed to exist in?"
                },
                {
                    "file": "redfish-core/lib/power_subsystem.hpp",
                    "line": 92,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@ieisystem.com",
                        "username": "lxwinspur"
                    },
                    "message": "Use getAssociatedSubTree instead"
                },
                {
                    "file": "redfish-core/lib/power_subsystem.hpp",
                    "line": 114,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Same here."
                },
                {
                    "file": "redfish-core/lib/power_subsystem.hpp",
                    "line": 114,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@ieisystem.com",
                        "username": "lxwinspur"
                    },
                    "message": "Use getAssociatedSubTree instead"
                },
                {
                    "file": "redfish-core/lib/power_subsystem.hpp",
                    "line": 149,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Why doesn't this call accept chassisId?  As written, this looks like it dumps ALL power caps for ALL chassis, and doesn't try to look up whether the power cap is for THIS chassis."
                },
                {
                    "file": "redfish-core/lib/power_subsystem.hpp",
                    "line": 149,
                    "reviewer": {
                        "name": "George Liu",
                        "email": "liuxiwei@ieisystem.com",
                        "username": "lxwinspur"
                    },
                    "message": "correct.\nadd capping association.\nrefer: https://gerrit.openbmc.org/c/openbmc/phosphor-dbus-interfaces/+/69008"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 45,
                    "deletions": 0
                },
                {
                    "file": "test/redfish-core/lib/power_subsystem_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -4
                },
                {
                    "file": "Redfish.md",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/power_subsystem.hpp",
                    "type": "MODIFIED",
                    "insertions": 116,
                    "deletions": -9
                }
            ],
            "sizeInsertions": 174,
            "sizeDeletions": 13
        },
        {
            "number": 3,
            "revision": "8fffa502cbbc6dd74753fd32dbfc9f86dac9fe82",
            "parents": [
                "5ae1f7f3e0c78f84d153f7ef24ee22bb1c73eaa0"
            ],
            "ref": "refs/changes/42/68442/3",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@ieisystem.com",
                "username": "lxwinspur"
            },
            "createdOn": 1706173323,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@ieisystem.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 45,
                    "deletions": 0
                },
                {
                    "file": "test/redfish-core/lib/power_subsystem_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -4
                },
                {
                    "file": "Redfish.md",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/power_subsystem.hpp",
                    "type": "MODIFIED",
                    "insertions": 107,
                    "deletions": -9
                }
            ],
            "sizeInsertions": 165,
            "sizeDeletions": 13
        },
        {
            "number": 4,
            "revision": "9caaa7b83e0637d1a3504151f343c6d172c1328c",
            "parents": [
                "5ae1f7f3e0c78f84d153f7ef24ee22bb1c73eaa0"
            ],
            "ref": "refs/changes/42/68442/4",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@ieisystem.com",
                "username": "lxwinspur"
            },
            "createdOn": 1706173736,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@ieisystem.com",
                "username": "lxwinspur"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 47,
                    "deletions": 0
                },
                {
                    "file": "test/redfish-core/lib/power_subsystem_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -4
                },
                {
                    "file": "Redfish.md",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/power_subsystem.hpp",
                    "type": "MODIFIED",
                    "insertions": 107,
                    "deletions": -9
                }
            ],
            "sizeInsertions": 167,
            "sizeDeletions": 13
        },
        {
            "number": 5,
            "revision": "2de40c41da388076f7ed474684a557a0193df414",
            "parents": [
                "4c8c12d2a699641ec24a2605583686a03a8484cb"
            ],
            "ref": "refs/changes/42/68442/5",
            "uploader": {
                "name": "George Liu",
                "email": "liuxiwei@ieisystem.com",
                "username": "lxwinspur"
            },
            "createdOn": 1706593116,
            "author": {
                "name": "George Liu",
                "email": "liuxiwei@ieisystem.com",
                "username": "lxwinspur"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Myung Bae",
                        "email": "myungbae@us.ibm.com",
                        "username": "baemyung"
                    },
                    "message": "It looks good to me"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 47,
                    "deletions": 0
                },
                {
                    "file": "test/redfish-core/lib/power_subsystem_test.cpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -4
                },
                {
                    "file": "Redfish.md",
                    "type": "MODIFIED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/power_subsystem.hpp",
                    "type": "MODIFIED",
                    "insertions": 107,
                    "deletions": -9
                }
            ],
            "sizeInsertions": 167,
            "sizeDeletions": 13
        }
    ]
}