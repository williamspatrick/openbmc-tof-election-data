{
    "project": "openbmc/x86-power-control",
    "branch": "master",
    "topic": "amd-sp5",
    "id": "I4cb9966e259499401887e8d0306b2ae8ce9bd7f1",
    "number": 69296,
    "subject": "gpio config: Added optional Initialize key",
    "owner": {
        "name": "Jayanth Othayoth",
        "email": "ojayanth@gmail.com",
        "username": "ojayanth"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/x86-power-control/+/69296",
    "hashtags": [],
    "createdOn": 1707401758,
    "lastUpdated": 1707562219,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1707401758,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1707401888,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Topic set to amd-sp5"
        },
        {
            "timestamp": 1707438703,
            "reviewer": {
                "name": "Supreeth Venkatesh",
                "email": "supreeth.venkatesh@amd.com",
                "username": "supven01"
            },
            "message": "Patch Set 1:\n\n(2 comments)"
        },
        {
            "timestamp": 1707453160,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1707453195,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Uploaded patch set 2: Patch Set 1 was rebased."
        },
        {
            "timestamp": 1707453228,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1707453228,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1707453246,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/79039/ : FAILURE"
        },
        {
            "timestamp": 1707453530,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Uploaded patch set 3: New patch set was added with same tree, parent tree, and commit message as Patch Set 2.\n\nCopied Votes:\n* Verified-1 (copy condition: \"**changekind:NO_CHANGE**\")\n"
        },
        {
            "timestamp": 1707453558,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1707453558,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1707453577,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3:\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/79041/ : FAILURE"
        },
        {
            "timestamp": 1707473436,
            "reviewer": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "message": "Patch Set 3: Code-Review-1\n\n(1 comment)"
        },
        {
            "timestamp": 1707491113,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1707494563,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1707562210,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1707562219,
            "reviewer": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "message": "Abandoned"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "0b1671879a639d58ffd3b6cd7d5222cf1f2a0cab",
            "parents": [
                "bbf90f3249044dc1cd3959e998fed5e8c3032f66"
            ],
            "ref": "refs/changes/96/69296/1",
            "uploader": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "createdOn": 1707401758,
            "author": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Supreeth Venkatesh",
                        "email": "supreeth.venkatesh@amd.com",
                        "username": "supven01"
                    },
                    "message": "initialization misspelled in the commit message."
                },
                {
                    "file": "src/power_control.cpp",
                    "line": 74,
                    "reviewer": {
                        "name": "Supreeth Venkatesh",
                        "email": "supreeth.venkatesh@amd.com",
                        "username": "supven01"
                    },
                    "message": "Will initialize work on GPIOs which are inputs to BMC? If FPGA/CPLD drives these GPIOs, it won't work. is there a way to initialize only for \"out\" direction GPIOs?"
                },
                {
                    "file": "src/power_control.cpp",
                    "line": 74,
                    "reviewer": {
                        "name": "Jayanth Othayoth",
                        "email": "ojayanth@gmail.com",
                        "username": "ojayanth"
                    },
                    "message": "Good point , \nis this  \"initialize\" name really make sense here ? looking at your https://gerrit.openbmc.org/c/openbmc/openbmc/+/68546/2/meta-amd/meta-common/recipes-x86/chassis/x86-power-control/power-config-host0.json\ncomments , \"set High once the BMC is ready to manage the Host\" ,\nNeed inputs from Maintainers , like using \"Configure\" key instead \"Initialize here ? and using custom values we need to set based on Json configure. Also it is users responsibility use this new key only for required ones, and in the code we should just error out incase fail to set the required value?"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 33,
                    "deletions": 0
                },
                {
                    "file": "src/power_control.cpp",
                    "type": "MODIFIED",
                    "insertions": 58,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 91,
            "sizeDeletions": 1
        },
        {
            "number": 2,
            "revision": "016f2cfc5c1d65ae6d459d7833bba2af0ab53958",
            "parents": [
                "1e899bfb050be82778ed5423c73e5332dd052106"
            ],
            "ref": "refs/changes/96/69296/2",
            "uploader": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "createdOn": 1707453195,
            "author": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 33,
                    "deletions": 0
                },
                {
                    "file": "src/power_control.cpp",
                    "type": "MODIFIED",
                    "insertions": 58,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 91,
            "sizeDeletions": 1
        },
        {
            "number": 3,
            "revision": "e2784f780c79909fa77cf7a7a0df47d9cbe1de97",
            "parents": [
                "91563e734419d6ae040c3c38039456349770c4f0"
            ],
            "ref": "refs/changes/96/69296/3",
            "uploader": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "createdOn": 1707453530,
            "author": {
                "name": "Jayanth Othayoth",
                "email": "ojayanth@gmail.com",
                "username": "ojayanth"
            },
            "kind": "NO_CHANGE",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 14,
                    "reviewer": {
                        "name": "Zev Weiss",
                        "email": "zev@bewilderbeest.net",
                        "username": "zevweiss"
                    },
                    "message": "The necessity of this isn't clear to me -- this daemon generally \"knows\" the purpose and semantics of the various GPIOs it controls, and thus has their default output state basically hard-coded into it and applies that during its initialization phase.\n\nCan you provide a concrete example of a scenario in which this is needed?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 14,
                    "reviewer": {
                        "name": "Jayanth Othayoth",
                        "email": "ojayanth@gmail.com",
                        "username": "ojayanth"
                    },
                    "message": "Already discussion is in progress  related same topic , in your previous patchset review comments."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "I agree with the other feedback so far.  This seems like it may be too broad.  The GPIO initialization that we have is for x86-power-control to properly configure the GPIOs that it controls.  To me, that means the output GPIOs which lines up with the GPIOs that currently get initialized: nmiOut, powerOut, and resetOut.\n\nIf you are adding one or two new output GPIOs that need to be initialized, they could just be added in the same way as these three.\n\nOr if you'd like to make it generic, we already have the polarity in the config file.  So, could we just add direction then initialize each output GPIO to de-asserted polarity?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Jayanth Othayoth",
                        "email": "ojayanth@gmail.com",
                        "username": "ojayanth"
                    },
                    "message": "Based on the discussion , in the previous patch sets, we can manage gpio init by existing approch. Abandoning this patch now"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 33,
                    "deletions": 0
                },
                {
                    "file": "src/power_control.cpp",
                    "type": "MODIFIED",
                    "insertions": 58,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 91,
            "sizeDeletions": 1
        }
    ]
}