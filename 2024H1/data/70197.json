{
    "project": "openbmc/bmcweb",
    "branch": "master",
    "id": "Ibe126c57539a20b3c5dc89c8321873f0f3c42bc1",
    "number": 70197,
    "subject": "Cable: Get Decorator.Asset properties",
    "owner": {
        "name": "Gunnar Mills",
        "email": "gunnar@gmills.xyz",
        "username": "gtmills"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/bmcweb/+/70197",
    "hashtags": [],
    "createdOn": 1711110626,
    "lastUpdated": 1711695923,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1711110626,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1711110688,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "message": "Set Work In Progress"
        },
        {
            "timestamp": 1711110694,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1711110694,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1711111659,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/81141/ : SUCCESS"
        },
        {
            "timestamp": 1711680493,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "message": "Uploaded patch set 2: Commit message was updated.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1711680565,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "message": "Uploaded patch set 3: Commit message was updated."
        },
        {
            "timestamp": 1711680578,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "message": "Patch Set 3:\n\nThis change is ready for review."
        },
        {
            "timestamp": 1711680637,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1711680637,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1711681215,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1711681422,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1711681788,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/81485/ : SUCCESS"
        },
        {
            "timestamp": 1711684560,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1711695923,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "e4a284a9a46941719c2773fdc036ea75bdb87332",
            "parents": [
                "8983cf565b1695040938a30adcfb4f32f7972ae0"
            ],
            "ref": "refs/changes/97/70197/1",
            "uploader": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "createdOn": 1711110626,
            "author": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 24,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/cable.hpp",
                    "type": "MODIFIED",
                    "insertions": 61,
                    "deletions": 0
                },
                {
                    "file": "Redfish.md",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 90,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "95f884e66b0a5fbd8ee8aad33fd59ecfe214bcf0",
            "parents": [
                "8983cf565b1695040938a30adcfb4f32f7972ae0"
            ],
            "ref": "refs/changes/97/70197/2",
            "uploader": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "createdOn": 1711680493,
            "author": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 34,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/cable.hpp",
                    "type": "MODIFIED",
                    "insertions": 61,
                    "deletions": 0
                },
                {
                    "file": "Redfish.md",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 100,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "964b912872ef417e2a3504a307f88d567f511cc4",
            "parents": [
                "8983cf565b1695040938a30adcfb4f32f7972ae0"
            ],
            "ref": "refs/changes/97/70197/3",
            "uploader": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "createdOn": 1711680565,
            "author": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "redfish-core/lib/cable.hpp",
                    "line": 116,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Should we do this with all of them?  It seems likely that a cable might now have all of these properties (serial number for example seems iffy on most cables)."
                },
                {
                    "file": "redfish-core/lib/cable.hpp",
                    "line": 116,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "\"might not\"*"
                },
                {
                    "file": "redfish-core/lib/cable.hpp",
                    "line": 116,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gunnar@gmills.xyz",
                        "username": "gtmills"
                    },
                    "message": "So, we don't do an empty check (default) in other resources. https://gerrit.openbmc.org/c/openbmc/bmcweb/+/38044 was some previous discussion (NOTE: just because we decided this direction 3.5 years ago, doesn't mean we can't make a different decision today) \n\nThe validator did not have a warning about these being empty (I saw that in the past - 38044). Technically, I don't think there is anything wrong with 1 or a few being filled out and the rest empty. \n\nI agree that a cable is more likely not to have all of these fields.\n\nFan, PowerSupply, BMC, memory, and pcie device, could also not have all of these fields though.. And it feels odd that we would not be consistent. \n\n3 choices I can think of:\n1) Do nothing. If you have a cable PartNumber, but nothing else.. Manufacturer/Model/SerialNumber are empty. Annoying but not wrong.  \n2) Add empty checks here, but here in cables only, just like we do for SparePartNumber. I am okay with this but with as many resources that have Manufacturer, Model, etc., this will come up again. \n3) Add empty checks here and in all places we use this asset interface (Fan, PowerSupply, BMC, memory, and PCIe device)."
                },
                {
                    "file": "redfish-core/lib/cable.hpp",
                    "line": 116,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> So, we don't do an empty check (default) in other resources. https://gerrit.openbmc.org/c/openbmc/bmcweb/+/38044 was some previous discussion (NOTE: just because we decided this direction 3.5 years ago, doesn't mean we can't make a different decision today) \n\nYep, I was about to say exactly the same.  4 years ago was a different time, and while I still think keeping the optional interfaces separate is easier to parse, and less subjective about what a field means, I'm not prepared to argue with everyone else about it.  So long as it's documented that \"empty string means it doesn't exist\", I'm not prepared to fight the difference between empty string and not supported.  It's not important enough, as it basically only involves manufacturing scenarios.\n\n> \n> The validator did not have a warning about these being empty (I saw that in the past - 38044). Technically, I don't think there is anything wrong with 1 or a few being filled out and the rest empty. \n\nWeird.... I wonder if DMTF pulled back on that.\n\n> \n> I agree that a cable is more likely not to have all of these fields.\n> \n> Fan, PowerSupply, BMC, memory, and pcie device, could also not have all of these fields though.. And it feels odd that we would not be consistent.\n\n> \n> 3 choices I can think of:\n> 1) Do nothing. If you have a cable PartNumber, but nothing else.. Manufacturer/Model/SerialNumber are empty. Annoying but not wrong.  \n\n....  Arguably wrong in Redfish if the device doesn't support those things, but sure.\n> 2) Add empty checks here, but here in cables only, just like we do for SparePartNumber. I am okay with this but with as many resources that have Manufacturer, Model, etc., this will come up again. \n> 3) Add empty checks here and in all places we use this asset interface (Fan, PowerSupply, BMC, memory, and PCIe device).\n\n\nIf we're making the argument that we should be consistent, we should be reusing code, like here:\nhttps://github.com/openbmc/bmcweb/blob/1847f2a0c517df6a7439b9bd491afbf6b2302a92/redfish-core/lib/fan.hpp#L306\n\nThat's almost line for line identical to what's being put here.  If we refactored and reused, I'd be happy with the consistency argument (and it would be easy to change in the future), and reuse for other types.\n\nSo I'm going to go with #4, reuse the code we have, and whether or not it handles empty strings we can figure out in the future, but at least when we figure it out, we'll have one place we need to change instead of N."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 34,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/cable.hpp",
                    "type": "MODIFIED",
                    "insertions": 61,
                    "deletions": 0
                },
                {
                    "file": "Redfish.md",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 100,
            "sizeDeletions": 0
        }
    ]
}