{
    "project": "openbmc/phosphor-host-ipmid",
    "branch": "master",
    "topic": "sel-delete",
    "id": "I60395fb0d20bf75189274436d442aa3f0c332c13",
    "number": 70073,
    "subject": "dbus-sdr: Use sel files to find next Record ID",
    "owner": {
        "name": "Jonico Eustaquio",
        "email": "jonico.eustaquio@fii-na.com",
        "username": "JGEustaquio"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-host-ipmid/+/70073",
    "hashtags": [],
    "createdOn": 1710521246,
    "lastUpdated": 1719930217,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1710521246,
            "reviewer": {
                "name": "Jonico Eustaquio",
                "email": "jonico.eustaquio@fii-na.com",
                "username": "JGEustaquio"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1710521261,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1710521262,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1710521282,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/80763/ : FAILURE"
        },
        {
            "timestamp": 1710521300,
            "reviewer": {
                "name": "Jonico Eustaquio",
                "email": "jonico.eustaquio@fii-na.com",
                "username": "JGEustaquio"
            },
            "message": "Patch Set 2: Patch Set 1 was rebased\n\nCopied Votes:\n* Verified-1 (copy condition: \"**changekind:NO_CHANGE**\")\n"
        },
        {
            "timestamp": 1710521364,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1710521364,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1710521385,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2:\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/80764/ : FAILURE"
        },
        {
            "timestamp": 1710521522,
            "reviewer": {
                "name": "Jonico Eustaquio",
                "email": "jonico.eustaquio@fii-na.com",
                "username": "JGEustaquio"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1710521565,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1710521565,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1710521822,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/80765/ : SUCCESS"
        },
        {
            "timestamp": 1710525958,
            "reviewer": {
                "name": "Jonico Eustaquio",
                "email": "jonico.eustaquio@fii-na.com",
                "username": "JGEustaquio"
            },
            "message": "Patch Set 4: Patch Set 3 was rebased\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1710526001,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1710526001,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1710526357,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/80766/ : SUCCESS"
        },
        {
            "timestamp": 1711650164,
            "reviewer": {
                "name": "John Wedig",
                "email": "johnwedig@google.com",
                "username": "johnwedig"
            },
            "message": "Patch Set 4:\n\n(2 comments)"
        },
        {
            "timestamp": 1712774205,
            "reviewer": {
                "name": "Jonico Eustaquio",
                "email": "jonico.eustaquio@fii-na.com",
                "username": "JGEustaquio"
            },
            "message": "Uploaded patch set 5.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1712774268,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1712774268,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1712774284,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/82387/ : FAILURE"
        },
        {
            "timestamp": 1712774421,
            "reviewer": {
                "name": "Jonico Eustaquio",
                "email": "jonico.eustaquio@fii-na.com",
                "username": "JGEustaquio"
            },
            "message": "Uploaded patch set 6.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1712774472,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1712774472,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: -Ok-To-Test"
        },
        {
            "timestamp": 1712774681,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/82390/ : SUCCESS"
        },
        {
            "timestamp": 1712774728,
            "reviewer": {
                "name": "Jonico Eustaquio",
                "email": "jonico.eustaquio@fii-na.com",
                "username": "JGEustaquio"
            },
            "message": "Patch Set 6:\n\n(2 comments)"
        },
        {
            "timestamp": 1712782037,
            "reviewer": {
                "name": "John Wedig",
                "email": "johnwedig@google.com",
                "username": "johnwedig"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1712782274,
            "reviewer": {
                "name": "Jonico Eustaquio",
                "email": "jonico.eustaquio@fii-na.com",
                "username": "JGEustaquio"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1712782837,
            "reviewer": {
                "name": "John Wedig",
                "email": "johnwedig@google.com",
                "username": "johnwedig"
            },
            "message": "Patch Set 6: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1719930217,
            "reviewer": {
                "name": "Jonico Eustaquio",
                "email": "jonico.eustaquio@fii-na.com",
                "username": "JGEustaquio"
            },
            "message": "Topic set to sel-delete"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "73fb7f984868c82927e5a1d32127df674b2fbb89",
            "parents": [
                "48f07bd1fee04e00f041577c2e0907f5427bf330"
            ],
            "ref": "refs/changes/73/70073/1",
            "uploader": {
                "name": "Jonico Eustaquio",
                "email": "jonico.eustaquio@fii-na.com",
                "username": "JGEustaquio"
            },
            "createdOn": 1710521246,
            "author": {
                "name": "Jonico Eustaquio",
                "email": "jonico.eustaquio@fii-na.com",
                "username": "JGEustaquio"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "dbus-sdr/storagecommands.cpp",
                    "type": "MODIFIED",
                    "insertions": 86,
                    "deletions": -7
                }
            ],
            "sizeInsertions": 107,
            "sizeDeletions": 7
        },
        {
            "number": 2,
            "revision": "c62a40c235aa21d18a864d3db125b908cb495590",
            "parents": [
                "64405ada46d1edd5629f9f20282c6130e65c4b43"
            ],
            "ref": "refs/changes/73/70073/2",
            "uploader": {
                "name": "Jonico Eustaquio",
                "email": "jonico.eustaquio@fii-na.com",
                "username": "JGEustaquio"
            },
            "createdOn": 1710521300,
            "author": {
                "name": "Jonico Eustaquio",
                "email": "jonico.eustaquio@fii-na.com",
                "username": "JGEustaquio"
            },
            "kind": "NO_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "dbus-sdr/storagecommands.cpp",
                    "type": "MODIFIED",
                    "insertions": 86,
                    "deletions": -7
                }
            ],
            "sizeInsertions": 107,
            "sizeDeletions": 7
        },
        {
            "number": 3,
            "revision": "f6c240e7aa6389b41c590e2b268258a0a5f9f76a",
            "parents": [
                "64405ada46d1edd5629f9f20282c6130e65c4b43"
            ],
            "ref": "refs/changes/73/70073/3",
            "uploader": {
                "name": "Jonico Eustaquio",
                "email": "jonico.eustaquio@fii-na.com",
                "username": "JGEustaquio"
            },
            "createdOn": 1710521522,
            "author": {
                "name": "Jonico Eustaquio",
                "email": "jonico.eustaquio@fii-na.com",
                "username": "JGEustaquio"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "dbus-sdr/storagecommands.cpp",
                    "type": "MODIFIED",
                    "insertions": 86,
                    "deletions": -7
                }
            ],
            "sizeInsertions": 107,
            "sizeDeletions": 7
        },
        {
            "number": 4,
            "revision": "3017d42cdc27f06f008b6ce1881f7bbfd3fffb7a",
            "parents": [
                "50f186c104bd7ac7293e737833b4443137ad2761"
            ],
            "ref": "refs/changes/73/70073/4",
            "uploader": {
                "name": "Jonico Eustaquio",
                "email": "jonico.eustaquio@fii-na.com",
                "username": "JGEustaquio"
            },
            "createdOn": 1710525958,
            "author": {
                "name": "Jonico Eustaquio",
                "email": "jonico.eustaquio@fii-na.com",
                "username": "JGEustaquio"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "dbus-sdr/storagecommands.cpp",
                    "line": 867,
                    "reviewer": {
                        "name": "John Wedig",
                        "email": "johnwedig@google.com",
                        "username": "johnwedig"
                    },
                    "message": "I think it would help readability to try and reduce the amount of nesting in this function. For example, you can negate this if statement:\n\n```\nif (entry.find(search) == std::string::npos)\n{\n    continue;\n}\n\n// Rest of the while loop below is less indented\n```"
                },
                {
                    "file": "dbus-sdr/storagecommands.cpp",
                    "line": 867,
                    "reviewer": {
                        "name": "Jonico Eustaquio",
                        "email": "jonico.eustaquio@fii-na.com",
                        "username": "JGEustaquio"
                    },
                    "message": "Done"
                },
                {
                    "file": "dbus-sdr/storagecommands.cpp",
                    "line": 900,
                    "reviewer": {
                        "name": "John Wedig",
                        "email": "johnwedig@google.com",
                        "username": "johnwedig"
                    },
                    "message": "It might be slightly more readable to negate this if statement and not use an \"else\" clause:\n\n```\nif (prevPath.empty())\n{\n    return ipmi::sel::lastEntry;\n}\n\n// Rest of the code here (less indented)\n```"
                },
                {
                    "file": "dbus-sdr/storagecommands.cpp",
                    "line": 900,
                    "reviewer": {
                        "name": "Jonico Eustaquio",
                        "email": "jonico.eustaquio@fii-na.com",
                        "username": "JGEustaquio"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "dbus-sdr/storagecommands.cpp",
                    "type": "MODIFIED",
                    "insertions": 86,
                    "deletions": -7
                }
            ],
            "sizeInsertions": 107,
            "sizeDeletions": 7
        },
        {
            "number": 5,
            "revision": "6c4a49fe7178c3395089f9624c072ec1ac1a3b6f",
            "parents": [
                "50f186c104bd7ac7293e737833b4443137ad2761"
            ],
            "ref": "refs/changes/73/70073/5",
            "uploader": {
                "name": "Jonico Eustaquio",
                "email": "jonico.eustaquio@fii-na.com",
                "username": "JGEustaquio"
            },
            "createdOn": 1712774205,
            "author": {
                "name": "Jonico Eustaquio",
                "email": "jonico.eustaquio@fii-na.com",
                "username": "JGEustaquio"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "dbus-sdr/storagecommands.cpp",
                    "type": "MODIFIED",
                    "insertions": 49,
                    "deletions": -7
                }
            ],
            "sizeInsertions": 70,
            "sizeDeletions": 7
        },
        {
            "number": 6,
            "revision": "10202d61df07909df7abdd22345aea5a8acc7cf7",
            "parents": [
                "50f186c104bd7ac7293e737833b4443137ad2761"
            ],
            "ref": "refs/changes/73/70073/6",
            "uploader": {
                "name": "Jonico Eustaquio",
                "email": "jonico.eustaquio@fii-na.com",
                "username": "JGEustaquio"
            },
            "createdOn": 1712774421,
            "author": {
                "name": "Jonico Eustaquio",
                "email": "jonico.eustaquio@fii-na.com",
                "username": "JGEustaquio"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "dbus-sdr/storagecommands.cpp",
                    "line": 829,
                    "reviewer": {
                        "name": "John Wedig",
                        "email": "johnwedig@google.com",
                        "username": "johnwedig"
                    },
                    "message": "Does the search logic break if you don't include the space and the comma in this string?"
                },
                {
                    "file": "dbus-sdr/storagecommands.cpp",
                    "line": 829,
                    "reviewer": {
                        "name": "Jonico Eustaquio",
                        "email": "jonico.eustaquio@fii-na.com",
                        "username": "JGEustaquio"
                    },
                    "message": "Yes, since it is possible that the record ID number may appear in other sections of a SEL entry such as the timestamp. The space and comma in the string guarantees it has found the record ID of the SEL entry."
                },
                {
                    "file": "dbus-sdr/storagecommands.cpp",
                    "line": 829,
                    "reviewer": {
                        "name": "John Wedig",
                        "email": "johnwedig@google.com",
                        "username": "johnwedig"
                    },
                    "message": "Acknowledged"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "dbus-sdr/storagecommands.cpp",
                    "type": "MODIFIED",
                    "insertions": 50,
                    "deletions": -7
                }
            ],
            "sizeInsertions": 71,
            "sizeDeletions": 7
        }
    ]
}