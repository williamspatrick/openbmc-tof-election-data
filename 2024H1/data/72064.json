{
    "project": "openbmc/openbmc-build-scripts",
    "branch": "master",
    "id": "I2897ab159e0a6c14480e1ee2593761ab550a19e9",
    "number": 72064,
    "subject": "spellcheck: Update openbmc-spelling dictionary",
    "owner": {
        "name": "ManojKiran Eda",
        "email": "manojkiran.eda@gmail.com",
        "username": "manojkiraneda"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/openbmc-build-scripts/+/72064",
    "hashtags": [],
    "createdOn": 1718594442,
    "lastUpdated": 1718734035,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1718594442,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1718594451,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1718594451,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1718594457,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-openbmc-build-scripts/1017/ (2/2)"
        },
        {
            "timestamp": 1718594471,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/86142/ : FAILURE\n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-openbmc-build-scripts/1017/ : FAILURE"
        },
        {
            "timestamp": 1718594535,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Uploaded patch set 2: Commit message was updated.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1718594566,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1718594567,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1718594572,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-openbmc-build-scripts/1018/ (2/2)"
        },
        {
            "timestamp": 1718595032,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/86143/ : SUCCESS\n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-openbmc-build-scripts/1018/ : SUCCESS"
        },
        {
            "timestamp": 1718649258,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1718649521,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2: Code-Review-1\n\n(1 comment)"
        },
        {
            "timestamp": 1718694157,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1718734035,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "f24af943b891e8291ad77d376e344362ad3fbb2b",
            "parents": [
                "f3d27e64b2e0728a2d73a1926b5371356c166d5f"
            ],
            "ref": "refs/changes/64/72064/1",
            "uploader": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "createdOn": 1718594442,
            "author": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "config/openbmc-spelling.txt",
                    "type": "MODIFIED",
                    "insertions": 60119,
                    "deletions": -285
                }
            ],
            "sizeInsertions": 60134,
            "sizeDeletions": 285
        },
        {
            "number": 2,
            "revision": "901f85dc972dbc4af11b009d51726efbcaa89198",
            "parents": [
                "f3d27e64b2e0728a2d73a1926b5371356c166d5f"
            ],
            "ref": "refs/changes/64/72064/2",
            "uploader": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "createdOn": 1718594535,
            "author": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "config/openbmc-spelling.txt",
                    "line": 0,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I'm surprised we named this file \"openbmc-spelling\" if it came from somewhere else.  Should be reusing something from the codespell package directly instead of adding this to our repo?"
                },
                {
                    "file": "config/openbmc-spelling.txt",
                    "line": 0,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "On my system it looks like this is installed here:\n\n$ more /usr/lib/python3.11/site-packages/codespell_lib/data/dictionary.txt\n\nIf so, we should just use the bundled one, right?\n\nThe comments in format-code.sh say \"Run the codespell with _openbmc specific_ spellings...\" ( emphasis mine )  This implies to me that this file was intended to cover things we noticed that weren't in upstream codespell like...\n\ndubs -> dbus\n\nMy expectation was that this was covering the \"general\" codespell:\n\n168:    codespell --builtin clear,rare,en-GB_to_en-US -d --count \"$commit_filename\""
                },
                {
                    "file": "config/openbmc-spelling.txt",
                    "line": 0,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "Hi Patrick, long back when we initially added the [support for spellcheck on commit messages](https://lore.kernel.org/openbmc/6EE109AE-3FB9-4E5F-A6E3-88528EABFA56@getmailspring.com/), we agreed that a generic dictionary might not be good enough for openbmc & also we need an openbmc specific dictionary so that we can add some openbmc specific spellings whenever we can without waiting for things to be merged upstream.\n\nAnd to start with, we copied the existing codespell dictionary used by the Linux kernel community & marked it as openbmc-spelling.txt\n\n> On my system it looks like this is installed here:\n> $ more /usr/lib/python3.11/site-packages/codespell_lib/data/dictionary.txt\n> If so, we should just use the bundled one, right?\n\nYes, we could use the one that is already shipped with the codespell package, but we will not have the leverage to add words as and when possible without waiting for things to be upstreamed.\n\nThe approach we took was, that we periodically pull the dictionary from upstream and use that to check in CI, this will also provide us the flexibility to add openbmc-specific words to it. This commit basically pulled things from the upstream codespell repository."
                },
                {
                    "file": "config/openbmc-spelling.txt",
                    "line": 0,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "> The approach we took was, that we periodically pull the dictionary from upstream and use that to check in CI, this will also provide us the flexibility to add openbmc-specific words to it. This commit basically pulled things from the upstream codespell repository.\n\nI am fine with that when it is a few Kb.  I don't want to hold MBs worth of a dictionary, which is already supplied with the tool itself.\n\n> Yes, we could use the one that is already shipped with the codespell package, but we will not have the leverage to add words as and when possible without waiting for things to be upstreamed.\n\nWe can totally add critical non-upstreamed words to an \"openbmc_spelling.txt\".  I have no problem with that.  I just don't want to duplicate data held elsewhere.  As I pointed out, the script is already trying to use the standardized dictionaries; if we need to add an additional standardized one, that's fine.  The openbmc_spelling should, to me, only contain words that wouldn't make sense elsewhere.  The `dubs -> dbus` is an example because an upstream dictionary isn't likely to hold \"dbus\" and \"dubs\" is a legitimate word in English, but it is a high-probability spelling mistake in our codebase."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "config/openbmc-spelling.txt",
                    "type": "MODIFIED",
                    "insertions": 60119,
                    "deletions": -285
                }
            ],
            "sizeInsertions": 60134,
            "sizeDeletions": 285
        }
    ]
}