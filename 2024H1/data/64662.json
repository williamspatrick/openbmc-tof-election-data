{
    "project": "openbmc/bmcweb",
    "branch": "master",
    "id": "I81ba730a15db4d599fb8ee5644390aa2cc5b8542",
    "number": 64662,
    "subject": "WIP: Add telemetry triggers to the message registry",
    "owner": {
        "name": "jnowackx",
        "email": "jakubx.nowacki@intel.com",
        "username": "jnowackx"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/bmcweb/+/64662",
    "hashtags": [],
    "createdOn": 1688650516,
    "lastUpdated": 1718976377,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1688650516,
            "reviewer": {
                "name": "jnowackx",
                "email": "jakubx.nowacki@intel.com",
                "username": "jnowackx"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1688650606,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1688650606,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1688651724,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/70279/ : SUCCESS"
        },
        {
            "timestamp": 1688662358,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 1:\n\n(3 comments)"
        },
        {
            "timestamp": 1688666319,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1688666478,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1689807729,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2: Patch Set 1 was rebased\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1689807771,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1689807771,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1689807909,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3: Patch Set 2 was rebased"
        },
        {
            "timestamp": 1689807965,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1689807965,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1689807966,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/71504/ : ABORTED"
        },
        {
            "timestamp": 1689808052,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/71506/ : FAILURE"
        },
        {
            "timestamp": 1690805309,
            "reviewer": {
                "name": "jnowackx",
                "email": "jakubx.nowacki@intel.com",
                "username": "jnowackx"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1708032367,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1717668302,
            "reviewer": {
                "name": "Michal Orzel",
                "email": "michalx.orzel@intel.com",
                "username": "morzelx"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1717702753,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1717745119,
            "reviewer": {
                "name": "Michal Orzel",
                "email": "michalx.orzel@intel.com",
                "username": "morzelx"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1717772865,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1718010229,
            "reviewer": {
                "name": "Michal Orzel",
                "email": "michalx.orzel@intel.com",
                "username": "morzelx"
            },
            "message": "Uploaded patch set 4: Patch Set 3 was rebased.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1718010275,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1718010276,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1718010506,
            "reviewer": {
                "name": "Michal Orzel",
                "email": "michalx.orzel@intel.com",
                "username": "morzelx"
            },
            "message": "Uploaded patch set 5: Commit message was updated."
        },
        {
            "timestamp": 1718010545,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1718010545,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1718010547,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/85745/ : ABORTED"
        },
        {
            "timestamp": 1718011712,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/85746/ : FAILURE"
        },
        {
            "timestamp": 1718030772,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Set Work In Progress"
        },
        {
            "timestamp": 1718973823,
            "reviewer": {
                "name": "Michal Orzel",
                "email": "michalx.orzel@intel.com",
                "username": "morzelx"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1718976377,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Abandoned"
        }
    ],
    "wip": true,
    "patchSets": [
        {
            "number": 1,
            "revision": "1b9806c77e7f2a0e7e8b89dbadc5fad380716667",
            "parents": [
                "a2de6035d6ee93d1f684c9bc3cf95abc5df2feff"
            ],
            "ref": "refs/changes/62/64662/1",
            "uploader": {
                "name": "jnowackx",
                "email": "jakubx.nowacki@intel.com",
                "username": "jnowackx"
            },
            "createdOn": 1688650516,
            "author": {
                "name": "jnowackx",
                "email": "jakubx.nowacki@intel.com",
                "username": "jnowackx"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 16,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Please answer WHY in your commit message.  I can see these 5 messages implemented, what I don't understand is why they're necessary, and why a user would use the OpenBMC LogEntry rather than the generic Redfish MetricReport itself to see these events."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 16,
                    "reviewer": {
                        "name": "jnowackx",
                        "email": "jakubx.nowacki@intel.com",
                        "username": "jnowackx"
                    },
                    "message": "Ed, sorry for late reply - we had to discuss this on our side. To wrap up:\nTriggers schema defines RedfishEvent as TriggerActions [1], and that mechanism is already implemented [2]. What's surprising that there's no standard definition of such events in [3]. This patchset presents our proposition of such events (initially made in [4]) and we are going to raise this subject on DMTF forum to make them official.\n\n[1] https://www.dmtf.org/sites/default/files/standards/documents/DSP2046_2022.3.html#triggers-120\n[2] https://github.com/openbmc/telemetry/blob/3995a361af50f6708090bf853494cf1659864cd4/src/trigger_actions.cpp#L243\n[3] https://www.dmtf.org/sites/default/files/standards/documents/DSP2065_2022.3.html\n[4] https://gerrit.openbmc.org/c/openbmc/bmcweb/+/44935"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 16,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This was 6 months ago.  Any progress?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 16,
                    "reviewer": {
                        "name": "Michal Orzel",
                        "email": "michalx.orzel@intel.com",
                        "username": "morzelx"
                    },
                    "message": "Sorry for late response, Jakub is no longer working in the project and this patch has gone off my radar somehow. Those messages have been added to standard in version 2023.3 [1]. I see though that the messages differ a bit from what he have now implemented, so we'll need to readjust this patch and the telemetry service code so that it meets the standard.\n\n[1] https://www.dmtf.org/sites/default/files/standards/documents/DSP8011_2023.3.zip"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 16,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Sounds good.  If you don't plan on continuing this patch itself, let me know and I can abandon it, and when you're ready, feel free to push a new review with the updated registries."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 16,
                    "reviewer": {
                        "name": "Michal Orzel",
                        "email": "michalx.orzel@intel.com",
                        "username": "morzelx"
                    },
                    "message": "If keeping this patch open is an inconvenience then You can abandon it. We're having the exact copy of this change in our internal repos, so we're not losing any work here."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 16,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "It's really what you'd rather do.  If you'd rather continue to push your new changes to this review, feel free, but please mark it WIP so that it falls off the in-review list."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 19,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This needs more details.  Surely they don't don't just show up on boot up?  Any special config needed?  Any standard tests that we can run here?"
                },
                {
                    "file": "redfish-core/include/registries/openbmc_message_registry.hpp",
                    "line": 68,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Shouldn't the subminor version number be incremented due to the added messages?"
                },
                {
                    "file": "redfish-core/include/registries/openbmc_message_registry.hpp",
                    "line": 68,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "+1"
                },
                {
                    "file": "redfish-core/include/registries/openbmc_message_registry.hpp",
                    "line": 2304,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Why"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/registries/openbmc_message_registry.hpp",
                    "type": "MODIFIED",
                    "insertions": 59,
                    "deletions": -1
                },
                {
                    "file": "redfish-core/include/registries.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 82,
            "sizeDeletions": 2
        },
        {
            "number": 2,
            "revision": "4ffcdc8e148b17115c9d7b82961c3dec074783d5",
            "parents": [
                "ddf0c598b52bd95731e48853e481e56263c363e7"
            ],
            "ref": "refs/changes/62/64662/2",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1689807729,
            "author": {
                "name": "jnowackx",
                "email": "jakubx.nowacki@intel.com",
                "username": "jnowackx"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/registries/openbmc_message_registry.hpp",
                    "type": "MODIFIED",
                    "insertions": 59,
                    "deletions": -1
                },
                {
                    "file": "redfish-core/include/registries.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 82,
            "sizeDeletions": 2
        },
        {
            "number": 3,
            "revision": "31c1f69e0a019af99e2a0c374e86a3bb01a52df8",
            "parents": [
                "4b81b3fe0dc02a19693582957bd41ec91eba0f90"
            ],
            "ref": "refs/changes/62/64662/3",
            "uploader": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "createdOn": 1689807909,
            "author": {
                "name": "jnowackx",
                "email": "jakubx.nowacki@intel.com",
                "username": "jnowackx"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/registries/openbmc_message_registry.hpp",
                    "type": "MODIFIED",
                    "insertions": 59,
                    "deletions": -1
                },
                {
                    "file": "redfish-core/include/registries.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 82,
            "sizeDeletions": 2
        },
        {
            "number": 4,
            "revision": "49939429b1e2376c9f3dce9ba9efd1515bad154b",
            "parents": [
                "2ecde74fa187366dc4ed628e61a88015cdbeb769"
            ],
            "ref": "refs/changes/62/64662/4",
            "uploader": {
                "name": "Michal Orzel",
                "email": "michalx.orzel@intel.com",
                "username": "morzelx"
            },
            "createdOn": 1718010229,
            "author": {
                "name": "jnowackx",
                "email": "jakubx.nowacki@intel.com",
                "username": "jnowackx"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/registries/openbmc_message_registry.hpp",
                    "type": "MODIFIED",
                    "insertions": 59,
                    "deletions": -1
                },
                {
                    "file": "redfish-core/include/registries.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 82,
            "sizeDeletions": 2
        },
        {
            "number": 5,
            "revision": "62e9a1620dc92aa7a1302105ed8864ca4d62ae41",
            "parents": [
                "2ecde74fa187366dc4ed628e61a88015cdbeb769"
            ],
            "ref": "refs/changes/62/64662/5",
            "uploader": {
                "name": "Michal Orzel",
                "email": "michalx.orzel@intel.com",
                "username": "morzelx"
            },
            "createdOn": 1718010506,
            "author": {
                "name": "jnowackx",
                "email": "jakubx.nowacki@intel.com",
                "username": "jnowackx"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Michal Orzel",
                        "email": "michalx.orzel@intel.com",
                        "username": "morzelx"
                    },
                    "message": "I've noticed that new definitions are already present on master: https://github.com/openbmc/bmcweb/blob/master/redfish-core/include/registries/telemetry_message_registry.hpp (thanks to automated generation). That makes this patch redundant, so You can safely close this one."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/include/registries/openbmc_message_registry.hpp",
                    "type": "MODIFIED",
                    "insertions": 59,
                    "deletions": -1
                },
                {
                    "file": "redfish-core/include/registries.hpp",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 82,
            "sizeDeletions": 2
        }
    ]
}