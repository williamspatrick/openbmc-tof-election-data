{
    "project": "openbmc/bmcweb",
    "branch": "master",
    "topic": "redfish-EnvironmentMetrics",
    "id": "Icd39fd70d4a24aafab0d9b66fa09c000b97b3199",
    "number": 73700,
    "subject": "Sensors: Add SpeedRPM property",
    "owner": {
        "name": "Janet Adkins",
        "email": "janeta@us.ibm.com",
        "username": "jeaaustx"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/bmcweb/+/73700",
    "hashtags": [],
    "createdOn": 1723650838,
    "lastUpdated": 1724079160,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1723650838,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1723650887,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1723650887,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1723652195,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/89703/ : SUCCESS"
        },
        {
            "timestamp": 1723657639,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1723657696,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1723664598,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1723666980,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1723667122,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1723667709,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1723667838,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1723674604,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1723674610,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1723750826,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1723754242,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Topic set to redfish-EnvironmentMetrics"
        },
        {
            "timestamp": 1723755553,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "message": "Patch Set 1: Code-Review+1\n\n(2 comments)"
        },
        {
            "timestamp": 1723756115,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1723756127,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Uploaded patch set 2: Commit message was updated.\n\nCopied Votes:\n* Code-Review+1 (copy condition: \"changekind:NO_CHANGE OR **changekind:NO_CODE_CHANGE** OR changekind:TRIVIAL_REBASE OR is:MIN\")\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1723756185,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1723756185,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1723756304,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1723757530,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/89765/ : SUCCESS"
        },
        {
            "timestamp": 1723820880,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1723829056,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1723835940,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1724070116,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Uploaded patch set 3: Commit message was updated.\n\nCopied Votes:\n* Code-Review+1 (copy condition: \"changekind:NO_CHANGE OR **changekind:NO_CODE_CHANGE** OR changekind:TRIVIAL_REBASE OR is:MIN\")\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1724070147,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1724070923,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1724070923,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1724071359,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/90027/ : FAILURE"
        },
        {
            "timestamp": 1724077613,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Uploaded patch set 4: Patch Set 3 was rebased.\n\nCopied Votes:\n* Code-Review+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE OR **changekind:TRIVIAL_REBASE** OR is:MIN\")\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1724077656,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1724077657,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1724079160,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/90032/ : SUCCESS"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "21d345ef1c89feb4750f86d147b8c33df539e990",
            "parents": [
                "587090cd3869ed7f419dfbf9ac3e046366a91024"
            ],
            "ref": "refs/changes/00/73700/1",
            "uploader": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "createdOn": 1723650838,
            "author": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 40,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Are there any published mockups that show this? Anything in DMTF documentation? The excerpt behavior is new to me and I think this is the first one we're adding."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 40,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gunnar@gmills.xyz",
                        "username": "gtmills"
                    },
                    "message": "They appear to have \"SpeedRPM\" for Fans in all their mockups that have the new PowerSubsystem/ThermalSubsystem. E.g. https://redfish.dmtf.org/redfish/mockups/v1/1448 and https://redfish.dmtf.org/redfish/mockups/v1/1467\n\nNote: At least 3 of their mockups still have the old Power/Thermal \nhttps://redfish.dmtf.org/redfish/v1"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 40,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "But I don't see SpeedRPM in redfish \u00bb v1 \u00bb Chassis \u00bb 1U \u00bb Sensors \u00bb CPUFan1\n\nOr in thermal subsystem\n\n\nPS, if we point to https://github.com/DMTF/Redfish-Publications/tree/main/mockups, it might be a little easier to point to specific parts of the tree.  With that said, I don't see complex server mockup.... so <shrug>"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 40,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "I also have not found it in any mockups under Sensors.\n\nI found it under ThermalSubsystem: https://redfish.dmtf.org/redfish/mockups/v1/1448#Chassis--1U--ThermalSubsystem--Fans--Bay1\n\n(Although this is for a \"Percent\" ReadingType not a \"Rotational\".\nhttps://redfish.dmtf.org/redfish/mockups/v1/1448#Chassis--1U--Sensors--FanBay1)"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 40,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "(And that mockup's EnvironmentMetrics: https://redfish.dmtf.org/redfish/mockups/v1/1448#Chassis--1U--EnvironmentMetrics)"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 40,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Just so you know, when you link the mockup server on dmtf.org, your links don't go to the full page.  They always go to service root.\n\nIn theory https://github.com/DMTF/Redfish-Publications/tree/main is the code version of those mockups.\n\ni'm only seeing a few mockups implement THermalSubsystem."
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 40,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "https://github.com/search?q=repo%3ADMTF%2FRedfish-Publications+ThermalSubsystem+path%3A%2F%5Emockups%5C%2F%2F&type=code"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 40,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gunnar@gmills.xyz",
                        "username": "gtmills"
                    },
                    "message": "So I think this commit came out of https://gerrit.openbmc.org/c/openbmc/bmcweb/+/57715. \nOn 57715, Ed suggested all properties in the Excerpt be in the data source uri. \nI think this is reasonable, an excerpt is a snippet or subset. \nAlthough Redfish themselves don't do this :( as pointed out above. \nSee EnvironmentMetrics on https://redfish.dmtf.org/redfish/mockups/v1/1448 \n\nI find implementing this property reasonable. \nIt is a standard Redfish property that maps to our D-Bus property. This commit stands on its own, implementing the Excerpt is a separate commit and not required"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 40,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gunnar@gmills.xyz",
                        "username": "gtmills"
                    },
                    "message": "I opened an issue with Redfish here issues/6194 to update the mockups"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "One thing I'd like to understand here is what we're referencing when we're adding this stuff.  If it's a mockup, please document it in the commit message.  If it's schema, please link dmtf-publications.  Doing that saves me tons of time having to chase down schema and examples in the DMTF repos, which allows me to respond faster to your code reviews."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gunnar@gmills.xyz",
                        "username": "gtmills"
                    },
                    "message": "Sure, this is reasonable. I think adding what this property, what it does / any mockups would help. I don't always see this for new Redfish properties, but can't hurt and not a bad policy to have this for new properties / schemas"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "I've updated the commit message to point to the schema and to reference the reason this property is being added."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "For most property additions, it's obvious, and I can go entirely off schema.  Given this is our first interface that's implementing an \"Excerpt\" property, we need to make sure we understand the rules that those follow.  I'm not convinced I fully understand what's going on in the schema."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Things I see in the spec:\n\n```\n3.2.5 excerpt\nsubset of data that is copied from one resource and presented in another resource\n```\n\n```\nReturns a subset of the resource's properties that match the defined Excerpt schema annotation.\nIf no Excerpt schema annotation is defined for the resource, the entire resource is returned.\n```\n\nI don't see any reference to ExcerptCopy in either the spec or XML."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "I've reworded the commit message to reference the more exact SensorFanArrayExcerpt.\n\nThis commit itself is not an excerpt property. SpeedRPM is a direct property of Sensor.\n\nIs there something else I am misunderstanding here?"
                },
                {
                    "file": "redfish-core/lib/sensors.hpp",
                    "line": 981,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Need this for SpeedRPM as well?"
                },
                {
                    "file": "redfish-core/lib/sensors.hpp",
                    "line": 981,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "For SpeedRPM the valueName is also \"Value\", so it will do the same check here.\n\nI could add another special-case to just leave the SpeedRPM property off in this case, but that seems less clear to get a Warning instead of a null value. Agree?"
                },
                {
                    "file": "redfish-core/lib/sensors.hpp",
                    "line": 981,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "ACK, you're right, this should work as written."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 45,
                    "deletions": 0
                },
                {
                    "file": "Redfish.md",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/sensors.hpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 54,
            "sizeDeletions": 1
        },
        {
            "number": 2,
            "revision": "e91890730090d47270574731927b8975ef96a371",
            "parents": [
                "587090cd3869ed7f419dfbf9ac3e046366a91024"
            ],
            "ref": "refs/changes/00/73700/2",
            "uploader": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "createdOn": 1723756127,
            "author": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 55,
                    "deletions": 0
                },
                {
                    "file": "Redfish.md",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/sensors.hpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 64,
            "sizeDeletions": 1
        },
        {
            "number": 3,
            "revision": "960bd463b4b08f5458b1a4e4eb8525f0854d0673",
            "parents": [
                "587090cd3869ed7f419dfbf9ac3e046366a91024"
            ],
            "ref": "refs/changes/00/73700/3",
            "uploader": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "createdOn": 1724070116,
            "author": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 57,
                    "deletions": 0
                },
                {
                    "file": "Redfish.md",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/sensors.hpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 66,
            "sizeDeletions": 1
        },
        {
            "number": 4,
            "revision": "6406a988312a491e91e80afad2f5ca8afcb9c80c",
            "parents": [
                "bd79bce8c3f1deb1fb2773868b9ece25233cf27b"
            ],
            "ref": "refs/changes/00/73700/4",
            "uploader": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "createdOn": 1724077613,
            "author": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 57,
                    "deletions": 0
                },
                {
                    "file": "Redfish.md",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "redfish-core/lib/sensors.hpp",
                    "type": "MODIFIED",
                    "insertions": 8,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 66,
            "sizeDeletions": 1
        }
    ]
}