{
    "project": "openbmc/docs",
    "branch": "master",
    "id": "Ic61b544360db330c93b0a75a5456a053d310b3e8",
    "number": 63915,
    "subject": "design: Add using auditd for back-end service for audit logging",
    "owner": {
        "name": "Janet Adkins",
        "email": "janeta@us.ibm.com",
        "username": "jeaaustx"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/docs/+/63915",
    "hashtags": [],
    "createdOn": 1685659324,
    "lastUpdated": 1719521816,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1685659324,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1685659347,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1685659347,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1685659403,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/67878/ : SUCCESS"
        },
        {
            "timestamp": 1685661365,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 1:\n\n(18 comments)"
        },
        {
            "timestamp": 1685687463,
            "reviewer": {
                "name": "Ivan Mikhaylov",
                "email": "fr0st61te@gmail.com",
                "username": "fr0st61te"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1685730954,
            "reviewer": {
                "name": "Dhananjay Phadke",
                "email": "dphadke@linux.microsoft.com",
                "username": "dphadke-msft"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1686954314,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Patch Set 1:\n\n(16 comments)"
        },
        {
            "timestamp": 1686954410,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Uploaded patch set 2.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1686954465,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1686954465,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1686954489,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/69108/ : SUCCESS"
        },
        {
            "timestamp": 1686992026,
            "reviewer": {
                "name": "Ivan Mikhaylov",
                "email": "fr0st61te@gmail.com",
                "username": "fr0st61te"
            },
            "message": "Patch Set 2:\n\n(6 comments)"
        },
        {
            "timestamp": 1687820003,
            "reviewer": {
                "name": "Nikhil Jain C S",
                "email": "nikhil.jain.c.s@intel.com",
                "username": "njaincs"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1689888201,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Patch Set 2:\n\n(10 comments)"
        },
        {
            "timestamp": 1689888217,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1689888243,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1689888243,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1689888268,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/71619/ : SUCCESS"
        },
        {
            "timestamp": 1689965879,
            "reviewer": {
                "name": "Joseph Reynolds",
                "email": "joseph.reynolds1@ibm.com",
                "username": "joseph-reynolds"
            },
            "message": "Patch Set 3:\n\n(4 comments)"
        },
        {
            "timestamp": 1689977359,
            "reviewer": {
                "name": "Ivan Mikhaylov",
                "email": "fr0st61te@gmail.com",
                "username": "fr0st61te"
            },
            "message": "Patch Set 3:\n\n(3 comments)"
        },
        {
            "timestamp": 1690213479,
            "reviewer": {
                "name": "Joseph Reynolds",
                "email": "joseph.reynolds1@ibm.com",
                "username": "joseph-reynolds"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1690228270,
            "reviewer": {
                "name": "Ivan Mikhaylov",
                "email": "fr0st61te@gmail.com",
                "username": "fr0st61te"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1690233918,
            "reviewer": {
                "name": "Joseph Reynolds",
                "email": "joseph.reynolds1@ibm.com",
                "username": "joseph-reynolds"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1690267189,
            "reviewer": {
                "name": "Ivan Mikhaylov",
                "email": "fr0st61te@gmail.com",
                "username": "fr0st61te"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1691619914,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Patch Set 3:\n\n(3 comments)"
        },
        {
            "timestamp": 1691619943,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Uploaded patch set 4.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1691619967,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1691619967,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1691619988,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/72690/ : SUCCESS"
        },
        {
            "timestamp": 1691683929,
            "reviewer": {
                "name": "Joseph Reynolds",
                "email": "joseph.reynolds1@ibm.com",
                "username": "joseph-reynolds"
            },
            "message": "Patch Set 4:\n\n(2 comments)"
        },
        {
            "timestamp": 1692908373,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Patch Set 4:\n\n(2 comments)"
        },
        {
            "timestamp": 1692908385,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Uploaded patch set 5.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1692908396,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1692908396,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1692908420,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/73497/ : SUCCESS"
        },
        {
            "timestamp": 1693523609,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 5:\n\n(36 comments)"
        },
        {
            "timestamp": 1693567247,
            "reviewer": {
                "name": "Ivan Mikhaylov",
                "email": "fr0st61te@gmail.com",
                "username": "fr0st61te"
            },
            "message": "Patch Set 5:\n\n(2 comments)"
        },
        {
            "timestamp": 1694121020,
            "reviewer": {
                "name": "Joseph Reynolds",
                "email": "joseph.reynolds1@ibm.com",
                "username": "joseph-reynolds"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1694197255,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "message": "Patch Set 5:\n\n(3 comments)"
        },
        {
            "timestamp": 1694199070,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1694205298,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1694727130,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Patch Set 5:\n\n(35 comments)"
        },
        {
            "timestamp": 1694727141,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Uploaded patch set 6.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1694727163,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1694727163,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: -Ok-To-Test"
        },
        {
            "timestamp": 1694727189,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/74149/ : SUCCESS"
        },
        {
            "timestamp": 1694730670,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1695823009,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Patch Set 6:\n\n(38 comments)"
        },
        {
            "timestamp": 1696919058,
            "reviewer": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "message": "Patch Set 6:\n\n(3 comments)"
        },
        {
            "timestamp": 1696919917,
            "reviewer": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1697003629,
            "reviewer": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "message": "Patch Set 6:\n\n(3 comments)"
        },
        {
            "timestamp": 1697424780,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "message": "Patch Set 6:\n\n(2 comments)"
        },
        {
            "timestamp": 1697470677,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Uploaded patch set 7.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1697470722,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1697470722,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: -Ok-To-Test"
        },
        {
            "timestamp": 1697470747,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/75003/ : SUCCESS"
        },
        {
            "timestamp": 1697470790,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Patch Set 6:\n\n(6 comments)"
        },
        {
            "timestamp": 1697798752,
            "reviewer": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "message": "Patch Set 7:\n\n(5 comments)"
        },
        {
            "timestamp": 1697798881,
            "reviewer": {
                "name": "Ratan Gupta",
                "email": "ratankgupta31@gmail.com",
                "username": "ratagupt"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1698088077,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 7:\n\n(5 comments)"
        },
        {
            "timestamp": 1698267446,
            "reviewer": {
                "name": "Gunnar Mills",
                "email": "gunnar@gmills.xyz",
                "username": "gtmills"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1698353861,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Uploaded patch set 8.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1698353886,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1698353886,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: -Ok-To-Test"
        },
        {
            "timestamp": 1698353907,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/75535/ : FAILURE"
        },
        {
            "timestamp": 1698354186,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Uploaded patch set 9.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE\")\n"
        },
        {
            "timestamp": 1698354206,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1698354206,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: -Ok-To-Test"
        },
        {
            "timestamp": 1698354226,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/75536/ : SUCCESS"
        },
        {
            "timestamp": 1698354589,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Patch Set 9:\n\n(6 comments)"
        },
        {
            "timestamp": 1698416069,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 9: Code-Review+1\n\n(2 comments)"
        },
        {
            "timestamp": 1699308470,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Patch Set 9:\n\n(1 comment)"
        },
        {
            "timestamp": 1719521816,
            "reviewer": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "message": "Set Work In Progress"
        }
    ],
    "wip": true,
    "patchSets": [
        {
            "number": 1,
            "revision": "3f258b8d5fa4f9b20c1f929bb6c9d87ea207537c",
            "parents": [
                "d62d386d16b80442274cc997e8e51224af2425e1"
            ],
            "ref": "refs/changes/15/63915/1",
            "uploader": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "createdOn": 1685659324,
            "author": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Overall, this feels like someone was given the direction \"find a way to use auditd on openbmc\".\n\nI would like to see this document amended with a large section about what auditd gets us here that ISN'T present in the existing logging daemons, or could be easily retrofitted into the existing logging daemons.  Is auditd usefule because it's owned by the kernel?  Is it that it's running as root?  It's non blocking?  It obeys some specification we're trying to meet?  That's not clear from the document.\n\nI would also ask that the folks review and update the LAST design doc that was published on this, rather than just writing a new one proposing a similar thing (or at the very least answer my comments on the last doc).  Publishing a new one just causes us to rehash the same conversations without context.\n\nOverall, there's probably a path to get this overall auditing feature on master, but my worries are:\n1. Duplication of logging code.\n2. Putting more dependencies directly in bmcweb, instead of rolling them out to another daemon.  Does the auditd logging calls provide non-blocking asio hooks, or are we putting blocking calls into bmcweb again (which has caused issues in the past)?  \n3. What does the Redfish implementation of this look like?  What's proposed below doesn't match up with the standard, and could use a good runthrough by someone with a good understanding of the spec.\n4. The requirements aren't written as requirements.\n5. How does this design apply to more than just redfish/bmcweb in the future?  Even if that's not an immediate requirement, it needs to be part of the design."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ivan Mikhaylov",
                        "email": "fr0st61te@gmail.com",
                        "username": "fr0st61te"
                    },
                    "message": "Main idea of phosphor-audit to make a C++ wrapper for backend calls like from auditd, to add more flexibility in possible usages with different approaches. In your case you're adding auditd inside bmcweb but all other parts(ipmi,pldm,pam & etc) needs to be updated too to stick with this way. I don't think that is possible to make it just for bmcweb, in bmc a lot of places where you have to put those audit hooks. And if auditd changed to something else what it will be, another rework of bmcweb?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Dhananjay Phadke",
                        "email": "dphadke@linux.microsoft.com",
                        "username": "dphadke-msft"
                    },
                    "message": "> Is auditd usefule because it's owned by the kernel? Is it that it's running as root? It's non blocking?\n\nAt least should mention that kernel audit can log syscalls by processes, which only kernel is privileged to do and not any other processes running as euid 0 (aka root)."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Thank you for the careful review. I've restructured the document to address the individual comments as well as this overall comment. Additionally I've moved the actual logging of the events into a D-Bus service to address the blocking calls within bmcweb concern.\n\nI expect there will be additional comments, but I hope these changes are a move closer to finding community consensus."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 24,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This seems like a critical problem, and would prevent approval of the aformentioned specification?  Can you list WHY these aren't included?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 24,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 44,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Does this design account for the issues raised in that document?  How does this design differ?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 44,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "I mischaracterized the Independent Backend Logger design. A version was approved, then an updated version of the design was abandoned. It has not been implemented yet.\n\nMany of the unresolved issues from the abandoned update of that design centered around the configuration and inner workings of the backend logger itself.\n\nSince this design differs by using the well established Linux auditd subsystem many of the unresolved comments are not directly related.\n\nSince this design would supersede the referenced design, I will add removal of that design as part of this commit. I will also correct the wording here to indicate the true history on that design.\n\n(I've also moved these descriptions to the Alternatives section per later comment.)"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 44,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 52,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Why?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 52,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "I've moved this into the Proposed Design section and added more details from the referenced proof of concept on what the auditd subsystem provides."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 52,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 58,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Can you provide examples and pointers the code for a rest server using auditd for the same purpose?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 58,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "OpenSwitch uses a REST API and uses auditd for logging from the references I was able to find:\n\nhttps://github.com/gitname/ops-docs/blob/master/AuditLogHowToGuide.md#python-code-example-for-restd\n\nhttps://archive.fosdem.org/2016/schedule/event/openswitch/"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 58,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "openswitch appears to use auditd, which is a linux daemon:\nhttps://linux.die.net/man/8/auditd\n\nWhy the difference here in this design?\n\nI don't see them putting audit calls directly in their webserver.  Can you point me to the code where they do that?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 58,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "I have not found the code using the calls I only found this documentation page. I have removed the reference."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 58,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 74,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "ANy performance requirements?  Does this need to be selectable at build-time?  Does this need to implement the Redfish audit logging correctly?  Do users need to be able to access the logs produced?  Does it need to comply to any standards?  Does it need to roll over?  Handle eventing?\n\nPlease give this requirements section another shot."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 74,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Yes I see what you mean, I definitely missed the mark on this section of the document. I've tried again and called out the requirements in this section."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 74,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 76,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "\"auditd\" is not a requirement.  It would go in your proposed design."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 76,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 78,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Please also enumerate the API in the middle.  how is the GUI to access these events?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 78,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "I moved this down by the LogServices Schema information since that is what the GUI would be using and added the Action URI."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 78,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 87,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Complete request is:\n1. Directly in the hot path of the connection.\n2. Called multiple times per request.\n\n\nI don't think it's viable to have these events pushed in that method."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 87,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "In the prototype I am not seeing duplicate audit log calls for a single event, so I don't seem to be getting multiple calls to that method. The callout was added here: https://github.com/openbmc/bmcweb/blob/2b45fb3b8bd8684886a6ba3249183be0f541d592/http/http_connection.hpp#L317\n\nWhat scenario results in multiple calls to that method per request? (I would like to try to recreate the scenario.)\n\nWhere do you think a better place for the callout would be?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 87,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> In the prototype I am not seeing duplicate audit log calls for a single event, so I don't seem to be getting multiple calls to that method. The callout was added here: https://github.com/openbmc/bmcweb/blob/2b45fb3b8bd8684886a6ba3249183be0f541d592/http/http_connection.hpp#L317\n> \n> What scenario results in multiple calls to that method per request? (I would like to try to recreate the scenario.)\n\nEtags, redfihs query params, redfish aggregation, to name a few.\n\n> \n> Where do you think a better place for the callout would be?\n\ncomplete_request_fields.hpp"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 87,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Do you mean complete_response_fields.hpp? I don't see a complete_request_fields.hpp in the repo."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 92,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "There are designs in discussion about moving the pam call out of bmcweb.  Please find those discussions and weigh in on them."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 92,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Ack"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 94,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "What does this mean?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 94,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Added link to README for dreport as well as openbmc repo it is part of."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 94,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 97,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Please add to your requirements."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 97,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "I added there as a generic requirement. I kept it here as well to be more specific on the option itself."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 108,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This is the wrong URI.  You've attached the log to computersystem.  Is should go under manager."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 108,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 134,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Putting this in the bmcweb process itself is a hard no from me.  Please put these kinds of things into another application.  bmcweb is not for business logic.  It is an entrypoint to other dbus daemons, and the more things we put into it, the more likely it is that it induces critical failures.\n\nThis is also going to be important when this feature extends beyond redfish."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 134,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "I've talked to Gunnar about this and am still working on addressing this comment. I'm working through the details of moving this piece out of bmcweb. I will update the design again with more details once I've worked through them with Gunnar."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 134,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "I've added additional details on this service."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 134,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 137,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Please put the alternatives in the alternatives section, and enumerate:\n\n1. Using one of the three existing logging mechanisms to handle this.\n2. Using another daemon to handle this.\n3. Using a simple ring buffer instead of auditd.\n4. Monitoring for DBus events rather than redfish events."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 137,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 140,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "The auditd subsystem provides Redfish endpoints?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 140,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 160,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This wasn't in your requirements.  If this is true, it basically invalidates this test."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 160,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "The purpose of these runs was to demonstrate that with the logging enabled there is not any undue overhead associated with it.\n\nI've tried to clarify that in the document."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 160,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 217,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I suspect you will need a new repository for the new application going in."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 217,
                    "reviewer": {
                        "name": "Ivan Mikhaylov",
                        "email": "fr0st61te@gmail.com",
                        "username": "fr0st61te"
                    },
                    "message": "In the past, it could be a part of phosphor-logging."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 217,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Thank you for the phosphor-logging suggestion. I've talked to Matt Spinler and he agrees that is a good home for the new service. I've updated the design to include this service."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 217,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 13,
                    "deletions": 0
                },
                {
                    "file": "designs/auditLog.md",
                    "type": "ADDED",
                    "insertions": 239,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 252,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "123767bee7143187373b4c8622992052d5020a33",
            "parents": [
                "d62d386d16b80442274cc997e8e51224af2425e1"
            ],
            "ref": "refs/changes/15/63915/2",
            "uploader": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "createdOn": 1686954410,
            "author": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ivan Mikhaylov",
                        "email": "fr0st61te@gmail.com",
                        "username": "fr0st61te"
                    },
                    "message": "Is it possible to add visual schema of possible flow in pseudographic?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Sure, I've added a diagram showing the flow across subsystems for recording of the audit events."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 61,
                    "reviewer": {
                        "name": "Nikhil Jain C S",
                        "email": "nikhil.jain.c.s@intel.com",
                        "username": "njaincs"
                    },
                    "message": "typo - success ?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 61,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 72,
                    "reviewer": {
                        "name": "Ivan Mikhaylov",
                        "email": "fr0st61te@gmail.com",
                        "username": "fr0st61te"
                    },
                    "message": "why no run-time option?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 72,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Similar to other logging within bmcweb (https://github.com/openbmc/bmcweb/blob/master/DEVELOPING.md#logging-levels) only a compile-time option is used."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 72,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph.reynolds1@ibm.com",
                        "username": "joseph-reynolds"
                    },
                    "message": "My thoughts on a runtime option to disable audit logging.\n- What does it mean to have a run-time option to disable audit logging?  Because you've already compiled in the audit support: You've already got a slightly larger image size, slightly large memory footprint, and run slightly slower.\n- The only other resources you could avoid using (when audit support is disabled at runtime) are: passing around audit data, and persisting audit data.\n- Could a BMC admin get the same effect as \"disabling audit support at runtime\" if you configure the audit controls to collect no data and retain no data?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 72,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I think the key here is that having a run-time disablement option is itself a security risk.  If a user can simply disable logging, do their nefarious thing, then turn logging back on, it doesn't really help.\n\nI'm sure that's called out in one of the prior specs somewhere, lets just quote it."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 72,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "The specs specify that only authorized users can disable auditing if allowed; and if auditing is disabled then that itself is logged. So a runtime option is not prevented due to the Protection Profiles.\n\nThe Linux audit subsystem does the logging of its configuration changes and protects who is allowed to do them; so it satisfies the Protection Profiles in that respect. It can also be configured to prevent auditing from being disabled without a reboot which would also satisfy the Protection Profiles.\n\nAdding a runtime control to the OpenBMC audit service would add complexity without clear benefit. Hence a runtime option is not included in the requirements."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 72,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 79,
                    "reviewer": {
                        "name": "Ivan Mikhaylov",
                        "email": "fr0st61te@gmail.com",
                        "username": "fr0st61te"
                    },
                    "message": "only one backend will be supported? If end-user client wants via SMTP as example?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 79,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "The Linux auditd subsystem provides a mechanism for capturing audit events via audispd (https://linux.die.net/man/8/audispd). So other services could be written to handle the events.\n\nE.g. I found this example code for using sendmail with the audit events: http://security-plus-data-science.blogspot.com/2017/04/sending-email-when-audisp-program-sees.html\n\nI've added a paragraph to note this capability."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 79,
                    "reviewer": {
                        "name": "Ivan Mikhaylov",
                        "email": "fr0st61te@gmail.com",
                        "username": "fr0st61te"
                    },
                    "message": "Ack"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 162,
                    "reviewer": {
                        "name": "Nikhil Jain C S",
                        "email": "nikhil.jain.c.s@intel.com",
                        "username": "njaincs"
                    },
                    "message": "typo - Additionally ?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 162,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 215,
                    "reviewer": {
                        "name": "Ivan Mikhaylov",
                        "email": "fr0st61te@gmail.com",
                        "username": "fr0st61te"
                    },
                    "message": "Any logging entries will be created? Any D-BUS communication between apps?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 215,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "I am not clear on your question here. Are you asking for more details on the exact Redfish events I used for the PATCH, etc. prototype performance testing?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 286,
                    "reviewer": {
                        "name": "Ivan Mikhaylov",
                        "email": "fr0st61te@gmail.com",
                        "username": "fr0st61te"
                    },
                    "message": "IPMI, PLDM, MCTP events? Any other possible events?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 286,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "None are planned as the proposed design is not adding audit logging entry points to any of those other events."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 286,
                    "reviewer": {
                        "name": "Ivan Mikhaylov",
                        "email": "fr0st61te@gmail.com",
                        "username": "fr0st61te"
                    },
                    "message": "But those interfaces may control your host. If you do not audit those events, who will?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 286,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph.reynolds1@ibm.com",
                        "username": "joseph-reynolds"
                    },
                    "message": "This design is attached to the BMCWeb interface.  As you note, the coverage of auditable BMC events is incomplete unless we also add similar auditing for the IPMI, PLDM/MCTP, SSH, etc. interfaces.  The owners of those interfaces are free to use the same underlying audit capability as described here.  However, this design only addresses BMCWeb.  Ithink that is okay, and a good start for the BMC's initial audit capability."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 286,
                    "reviewer": {
                        "name": "Ivan Mikhaylov",
                        "email": "fr0st61te@gmail.com",
                        "username": "fr0st61te"
                    },
                    "message": "From that logic, audit design for IPMI, PLDM/MCTP, SSH or something similar will be scattered through docs? Do you think that's ok? I do not disagree with that starter point about \"bmcweb\" but I'd disagree with concrete topic around \"bmcweb\" cause it's not related JUST to \"bmcweb\"."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 286,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph.reynolds1@ibm.com",
                        "username": "joseph-reynolds"
                    },
                    "message": "I think I see your point.  I think this design should be reviewed for its applicability for use by the other interfaces.  For example, if uses of network IPMI (such as via ipmitool) started writing audit records: these records should be added via the same auditd interface and be readable via the Redfish interfaces per this design.\n\nWhen those interfaces want to start writing audit records, I imagine they would update this design to reflect, for example, each of these could extend this design:\n- Write audit records for each use of ipmitool.\n- Write audit records when attempting to create SSH sessions.\n- Etc.\n\nAll of these new audit record types would go to the same place (auditd) regardless of which interface wrote them.\n\nWith that said, I think this design is perfectly suited to be extended for use by other BMC external interfaces."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 286,
                    "reviewer": {
                        "name": "Ivan Mikhaylov",
                        "email": "fr0st61te@gmail.com",
                        "username": "fr0st61te"
                    },
                    "message": "Yes, correct, when any person may look through the docs and find out how it will be applicable on interface X."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 286,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Good point. I've altered the Problem Description section to clarify that this design is a start at getting auditing in OpenBMC with first use by bmcweb."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 286,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "designs/auditLog.md",
                    "type": "ADDED",
                    "insertions": 303,
                    "deletions": 0
                },
                {
                    "file": "designs/phosphor-audit.md",
                    "type": "DELETED",
                    "insertions": 0,
                    "deletions": -368
                }
            ],
            "sizeInsertions": 320,
            "sizeDeletions": 368
        },
        {
            "number": 3,
            "revision": "65cf8ec42b5499a04c77abf3face23d5c1cf77bd",
            "parents": [
                "d62d386d16b80442274cc997e8e51224af2425e1"
            ],
            "ref": "refs/changes/15/63915/3",
            "uploader": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "createdOn": 1689888217,
            "author": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph.reynolds1@ibm.com",
                        "username": "joseph-reynolds"
                    },
                    "message": "This design is looking good to me a way to satisfy various audit requirements such as those given by the NIAP Virtualization Protection Profile mentioned in this design."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ivan Mikhaylov",
                        "email": "fr0st61te@gmail.com",
                        "username": "fr0st61te"
                    },
                    "message": "I'm still thinking that audit event log function should be wrapped inside phosphor-logging mechanism which provides more clean way of work, in this particular way you can use whatever you want inside this wrapper - auditd, journald, rsyslog or whatever you want, and you use whenever you want, not just redfish/bmcweb."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 75,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph.reynolds1@ibm.com",
                        "username": "joseph-reynolds"
                    },
                    "message": "Proposed new requirements:\n- All auditable events recorded.  The implementation shall not drop events it is configured to audit, even if the system is busy, unless the audit buffer is full and set to not wrap.\n\n- Offload protocol does not skip events.  For the use case of an external audit server whose purpose is to offload audit events from the BMC, the implementation shall support a protocol that guarantees no audit events are skipped as the external server downloads and deletes audit events.  (For example, we don't want the external server to get confused and delete an audit record before it downloads it.)  The proposed design should suggest such a protocol."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 75,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "The Linux audit subsystem provides configuration control that specifies how to handle errors when trying to write audit events. I've added a line to the requirements to include this as the action desired can be distro dependant.\n\nThis design does not include the ability to push audit events to a remote server. However the Linux audit subsystem does provide the ability to create such a service using audisp. This design could be altered in the future to add details of such a service. I've clarified this below where audisp is referenced."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 75,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph.reynolds1@ibm.com",
                        "username": "joseph-reynolds"
                    },
                    "message": "Thanks [numbered points correspond to the bullets above].\n1. To ensure: all auditable events are recorded: I hope this design can incorporate some audit standards from NIAP's VPP requirements\nVPP version is 1.1, dated 2021-06-14: https://www.niap-ccevs.org/MMO/PP/PP_VIRTUALIZATION_BASE_V1.1.pdf\nspecifically requirement from the VPP's FAU_STG_EXT.1 (quote):\n\n - Failure of audit data capture due to lack of disk space or pre-defined limit.\n - On failure of logging function, capture record of failure and record upon restart of logging function.\n \n---end of quote---\n\nTo handle this requirement, it may be sufficient to configure the audit service to write a log entry, for example, when (all of):\n- The audit service starts.\n- The audit service has wrapped, meaning some older entries are lost. \n- The audit service stops logging because it is out of space and is set to not wrap. \n- The audit service resumes logging (for whatever reason). \n- If the audit service restarts because systemd noticed it had stopped due to an unexpected error, perhaps the restart mechanism could write an audit entry which gives details about this failure.\n\nShould any part of this be added to the design requirement?  I would like to see this mentioned, for example, as requirement to audit the audit function itself.\n\n2. To ensure: Offload protocol does not skip events: I think it is fair to say this design does not handle audit offload streaming.  So I retract my proposed requirement for this point."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 75,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Regarding bullet 1:\n\nThe Linux auditd daemon does write audit records when it starts and stops running. Additionally, it logs failures to write audit records, or log rotation to the system log. Configuration values can enable sending email or ignoring these errors.\n\nTo try to capture this requirement I've added a bullet to the requirements on logging of the audit service itself. (Prior patch already added bullet on handling of logging failure.) I've also added some details of the Linux auditd handling in this area to the \"Audit Backend Service\" section."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 75,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 446,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph.reynolds1@ibm.com",
                        "username": "joseph-reynolds"
                    },
                    "message": "Proposed test idea: Audit records persist across BMC restart.\nTest steps: Reboot the BMC while creating audit records.  After the BMC regains its function, ensure audit records which were created just before the reboot are present.  In particular, ensure that no auditable no events - which happened while the BMC was rebooting - are lost.\nNote: For network-facing audit events, this test is intended only to cover the time before the BMC stops listening to its network ports (failed to connect - connection refused).  Note that, in general, auditable events may happen even when the BMC is not connected to the network.\n\nI think the requirement to \"not lose events\" implicitly covers this.\nPractically to implement this, it may be sufficient to stop the BMC's network services before stopping its audit service, and stop the audit collection service as late as possible (presuming audit events are persisted to the BMC's flash storage)."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 446,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Good point, I've added this additional case."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 446,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 458,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph.reynolds1@ibm.com",
                        "username": "joseph-reynolds"
                    },
                    "message": "Proposed unit test: Audit collection stress test.\nOn a heavily loaded BMC, continuously perform various events which should produce audit records, and validate all events are audited.  Stress can be from various BMC operations such a firmware upload (without rebooting the BMC!), or reading logs, or a program running which chews up spare CPU cycles, etc.  Maybe the testcase can run for an hour or so.\n\nProposed unit test: Dynamic offload of audit records.\nOperate your BMC to continuously write audit events, and have an external audit server continuously download and delete those audit records from the BMC.  Be careful follow the protocol (to be determined) to delete only those records it just downloaded.  The external audit server can be mocked-up: it must interact with the BMC but can just print out the records it downloads.  Validate the records obtained by the the audit server are as expected, with no missing (omitted) records.  Maybe the testcase can run for an hour or so."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 458,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Thank you for these suggestions, good idea to stress this service.\n\nI've added stress test for logging of the events per your suggestion.\nFor the entry retrieval I've added a test to include the continuation retrieval using the available Redfish parameters."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 458,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "designs/auditLog.md",
                    "type": "ADDED",
                    "insertions": 457,
                    "deletions": 0
                },
                {
                    "file": "designs/phosphor-audit.md",
                    "type": "DELETED",
                    "insertions": 0,
                    "deletions": -368
                }
            ],
            "sizeInsertions": 474,
            "sizeDeletions": 368
        },
        {
            "number": 4,
            "revision": "fab900ce6adc127d462081c599352b2756607ae3",
            "parents": [
                "d62d386d16b80442274cc997e8e51224af2425e1"
            ],
            "ref": "refs/changes/15/63915/4",
            "uploader": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "createdOn": 1691619943,
            "author": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "designs/auditLog.md",
                    "type": "ADDED",
                    "insertions": 477,
                    "deletions": 0
                },
                {
                    "file": "designs/phosphor-audit.md",
                    "type": "DELETED",
                    "insertions": 0,
                    "deletions": -368
                }
            ],
            "sizeInsertions": 495,
            "sizeDeletions": 368
        },
        {
            "number": 5,
            "revision": "6b79b02161796bdcf37d560ba84030953f52545e",
            "parents": [
                "d62d386d16b80442274cc997e8e51224af2425e1"
            ],
            "ref": "refs/changes/15/63915/5",
            "uploader": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "createdOn": 1692908385,
            "author": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Getting there."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 17,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Huh?  The bmc is not a virtualization environment.  Does this spec apply to firmware?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 17,
                    "reviewer": {
                        "name": "Joseph Reynolds",
                        "email": "joseph.reynolds1@ibm.com",
                        "username": "joseph-reynolds"
                    },
                    "message": "It's complex: the Virtualization Protection Profile (VPP) spec (section \"TOE Boundary\") describes the \"management subsystem\" which includes any BMC functions which manage the host's virtualization subsystem.\n\nI've found another spec that is more directly applicable: \"Baseboard Management Controller Protection Profile with Firmware update Module\", Version 1.0, Date 2022-09-28 ~ https://commoncriteriaportal.org/files/ppfiles/anssi-profil-pp-2022_01en.pdf\nThis is specifically for BMCs and it requires an audit function.\nPerhaps we could reference this in addition to the VPP?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 17,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gunnar@gmills.xyz",
                        "username": "gtmills"
                    },
                    "message": "Or reference instead of this Protection Profile for Virtualization Version? Or at least explain how this Protection Profile for Virtualization Version ties in?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 17,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "I've added the BMC Protection Profile document link to the design. I've also added some words to clarify why the VPP spec is also relevant."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 17,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 25,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This is part of the design section.  You're specifying an implementation."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 25,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gunnar@gmills.xyz",
                        "username": "gtmills"
                    },
                    "message": "+1"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 25,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "This paragraph and the following paragraph are here to answer the NON-goals part of the template description for this section: \"What are the goals and NON-goals?\""
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 25,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 29,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "huh?  Why does the IPMI spec being stagnant matter for this?  We're logging changes, shouldn't we log changes made through any interface, to match the intent of the spec?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 29,
                    "reviewer": {
                        "name": "Ivan Mikhaylov",
                        "email": "fr0st61te@gmail.com",
                        "username": "fr0st61te"
                    },
                    "message": "I made same statement about interfaces in comments above."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 29,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "I added this to document why IPMI entry points are not being prioritized by this design. I added it here to satisfy the \"NON-goals\" part of the template description of this section."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 29,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 32,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Isn't that another interface that's important, or does the spec say somewhere that you only have to log redfish, and don't need to log anything else?\n\nThat's fine if you're trying to make incremental progress to start with Redfish, but then you need to take out the spec that likely says that all external interfaces need to be logged."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 32,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gunnar@gmills.xyz",
                        "username": "gtmills"
                    },
                    "message": "I think you are trying to start with Redfish, but couldn't this auditd be used by other interfaces too? (e.g. IPMI)"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 32,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Yes this is what I was trying to communicate here. The goal of this design is to prioritize adding auditing support of Redfish events but leave the door open for future expansion to include other interfaces.\n\nI've reworded to clarify this."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 32,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 63,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "You haven't even defined what a log entry is yet.  Lets reword this to be:\n\n\"When a user makes a permanent change through an external API, the following will be logged:\n   timestamp\n   username,\n   network address of request,\n\"\n\n\"Action performed\" needs defined.  and \"success or failure\" isn't very descritive.  Are we logging the return code?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 63,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Good point. For the result just logging a true/false to indicate success or failure of the action. I've reworded as suggested with a slight change to account for initial design not attempting to audit all interfaces."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 63,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 65,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "What does this mean?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 65,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "It was specifying that the logged data for login events and modifying events were stored together. But really there isn't a good case for that as a requirement. I've removed the line."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 65,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 66,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Lets specifically call out what protected information we're going to omit.  If it's JUST passwords, there's no reason to create a new term \"protected information\". if that term is coming from a spec somewhere, lets quote it."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 66,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Passwords are the only protected information I know about. I've reworded."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 66,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 76,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "configured..... how?  Runtime, compile time?  Log entry count, bytes?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 76,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 78,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "huh?  If the log failed, how do we \"record\" anything?  The logging failed."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 78,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "The Linux audit subsystem can be configured to use the system journal to record that events were dropped. (See auditctl -f option)\n\nI've referenced this capability in the \"Audit Backend Service\" section."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 78,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 80,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Why and how?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 80,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "This is included as one of the requirements of the BMC Protection Profile. The requirement doesn't specify how the logging is done just that it is done. This can also be satisfied by not allowing auditing to be turned off which is the easiest solution. I have reworded this requirement to allow that flexibility. (Linux audit can be configured to not allow auditing to be turned off.)"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 80,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 83,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "using words like \"minimal\" and \"small\" don't inspire confidence in these requirements.  Please put numbers to these, either in percentages or bytes."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 83,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 89,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "nit, capitalize \"The\" and remove \"and\" this is now a list, no need to have and in between."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 89,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 90,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I see no requirements about extraction.  Maybe you should add some?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 90,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "The fourth bullet under the \"data logged\" part of the requirements is the related requirement."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 90,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 97,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "???  How are we \"wrapping\" the service?  Why can't we use the service as is."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 97,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "The service will be calling the Linux audit library functions to implement the audit support. I've reworded to clarify."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 97,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 101,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "It would be helpful is someone could respond to comments on that.  There are comments that haven't been replied to for over a year."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 101,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Ack"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 106,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Background needed here.  Where is it \"proven\".  This should arguably go into your background section."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 106,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "I've reworded this section and added some details to defend the \"proven\" aspect of Linux audit as a technology to use for auditing.\n\nI've included this information in this section as this answers the \"Which technologies will you use?\" part of the \"Proposed Design\" section of the design template."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 106,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 107,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "remove.  A yocto recipe is trivial, and is unimportant to this design.  Also, considering your proposal will require yet another recipe for your new service, this line I suspect can be removed."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 107,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 109,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "These are just words, but don't really say much.  What does \"flexibility\" and \"many options\" actually mean in terms of behavior for openbmc?  especially considering that the plan involves redfish, this doesn't seem very helpful to the design as written."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 109,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "I've moved the details of the configuration of Linux audit that satisfies the security related requirements here to clarify."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 109,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 127,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I'm confused;  Is this something we need for a BMC?  At this point I don't even think we have an email subsystem anywhere, so does anyone actually have this requirement, or is it hypothetical."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 127,
                    "reviewer": {
                        "name": "Ivan Mikhaylov",
                        "email": "fr0st61te@gmail.com",
                        "username": "fr0st61te"
                    },
                    "message": "Some of the vendors have needs about notifying about security breach via some external interface, like SMTP/SNMP(which exists at phosphor-snmp and can be used for this purpose)/\"any suitable\"."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 127,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Ack"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 153,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "These methods exist on dbus?  The existing patches link libauditd directly in bmcweb.  Can you please make sure you're consistent;  it's not clear what the design actually is."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 153,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "The original plan was to link libaudit directly into bmcweb and call the audit library function calls directly there.\n\nMy interpretation of one of your original design review comments was that was not acceptable due to the calls to the service being synchronous. (Ref. bullet #2: https://gerrit.openbmc.org/c/openbmc/docs/+/63915/comments/6ca916f6_26d08218)\n\nTo address that comment I moved the logging of the events into a D-Bus service that will call the audit library. This will allow bmcweb to not depend on the audit library directly.\n\nSo bmcweb would be making async calls to the D-Bus. (See picture in Bmcweb Event Capture section.)\n\nThe gerrit code is still a prototype as the D-Bus interfaces don't exist yet.  My thinking is the auditEvent() function will still exist but will be doing the D-Bus async call instead of the direct audit calls. The places calling auditEvent() will likely stay similar to what is in the prototype now. (After addressing the review comments of course.) (On the last patchset of the prototype I added a paragraph to the commit statement to try to clarify this.)\n\nDid I misunderstand the original design review comment?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 161,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Redfish should not exist on dbus, which has to support many transports, including Redfish.  Please use the existing dbus logging APIs for this."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 161,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 170,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Nope, it will parse them into dbus entries, which bmcweb can parse into json, or cbor, or whatever format the user requests."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 170,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "The D-Bus interface is writing the parsed audit entries to a file due to the number of entries that may be present. \n\nBmcweb will read that file and parse them into the Redfish format.\n\nI've added some headers and moved things around to try to clarify this distinction and the reason for the return of the file descriptor from the D-Bus service. I've included links to existing code that does similar things as well."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 170,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 185,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "this looks incorrect \"Manager\" is the name of a resource, not a diagnostic log type."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 185,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gunnar@gmills.xyz",
                        "username": "gtmills"
                    },
                    "message": "It looks like this is a parameter of CollectDiagnosticData, not an actual property of the LogService?  https://redfish.dmtf.org/schemas/v1/LogService.v1_4_0.json\n\n        \"CollectDiagnosticData\": {\n            \"additionalProperties\": false,\n            \"description\": \"The action to collect the diagnostic data for the given type.  When the diagnostic data is collected, a new log entry will be created and the additional data referenced by the new log entry will contain the diagnostic data.\",\n            \"longDescription\": \"This action shall collect the diagnostic data for the given type.  The `Location` header in the response shall contain a URI to a resource of type LogEntry that contains the diagnostic data.  The AdditionalDataURI property in the referenced LogEntry resource shall contain the URI to download the diagnostic data.\",\n            \"parameters\": {\n                \"DiagnosticDataType\": {\n                    \"$ref\": \"#/definitions/LogDiagnosticDataTypes\",\n                    \"description\": \"The type of diagnostic data to collect.\",\n                    \"longDescription\": \"This parameter shall contain the type of diagnostic data to collect.\",\n                    \"requiredParameter\": true\n                },\n                \"OEMDiagnosticDataType\": {\n                    \"description\": \"The OEM-defined type of diagnostic data to collect.\",\n                    \"longDescription\": \"This parameter shall contain the OEM-defined type of diagnostic data to collect.  This parameter shall be required if DiagnosticDataType is `OEM`.\",\n                    \"type\": \"string\"\n                }\n            },\n            \"patternProperties\": {\n                \"^([a-zA-Z_][a-zA-Z0-9_]*)?@(odata|Redfish|Message)\\\\.[a-zA-Z_][a-zA-Z0-9_]*$\": {\n                    \"description\": \"This property shall specify a valid odata or Redfish property.\",\n                    \"type\": [\n                        \"array\",\n                        \"boolean\",\n                        \"integer\",\n                        \"number\",\n                        \"null\",\n                        \"object\",\n                        \"string\"\n                    ]\n                }\n            },\n            \"properties\": {\n                \"target\": {\n                    \"description\": \"Link to invoke action\",\n                    \"format\": \"uri-reference\",\n                    \"type\": \"string\"\n                },\n                \"title\": {\n                    \"description\": \"Friendly action name\",\n                    \"type\": \"string\"\n                }\n            },\n            \"type\": \"object\",\n            \"versionAdded\": \"v1_2_0\"\n        },\n        \"LogDiagnosticDataTypes\": {\n            \"enum\": [\n                \"Manager\",\n                \"PreOS\",\n                \"OS\",\n                \"OEM\""
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 185,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Yes I was confused by the overall LogService schema definition and the actual LogService definition. Gunnar helped me better understand how to read the Redfish schema documentation. I've updated to correct this section."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 185,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 193,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Remove.  This is already implemented in bmcweb, and this design doesn't intend on making any changes here."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 193,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 197,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This is an action, which I don't think you intended.  LogEntryCollection returns individual logs when requested, no need for an action."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 197,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gunnar@gmills.xyz",
                        "username": "gtmills"
                    },
                    "message": "CollectDiagnosticData is used to create like a dump.. I am also surprised to see it here"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 197,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Yes I was confused. I talked to Gunnar and I think I understand this better now. I've updated to correct."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 197,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 209,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Please just return dbus types.  There's no need to return a file here, bmcweb would have to parse it anyway."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 209,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "This file is to prevent such a large number of entries being sent over the D-Bus which I expect would cause performance and scalability problems. I've moved things around and added some more details to try to clarify why and how this file would be used."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 209,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 216,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "I see no requirements around how many entries this needs to support, please add them."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 216,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "The last bullet of the \"data logged\" set of requirements specifies the logged data spans on the order of 6 months of events. I've added an estimate at the scale of the number of entries this might be."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 216,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 225,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "What about things that neither succeeded nor failed, like 304 not modified, or returning an async task?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 225,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Good point. The Linux audit subsystem has a boolean for the operation result. So results will have to be mapped to that. 304 should map to success. For async task the start of the task would log success, then the task completion would log result of the task itself. Updated design."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 225,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 227,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This is one thing I'd like to understand.  Does auditd have a pam module?  The point of using pam was so that we could plug in things like https://linux.die.net/man/8/pam_tty_audit\n\nAny reason that wasn't considered."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 227,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Yes Linux audit subsystem can be configured to log PAM events. I found this tutorial: https://www.tutorialspoint.com/how-to-configure-pam-to-audit-logging-shell-user-activity and this example: https://documentation.suse.com/sles/12-SP5/html/SLES-all/cha-audit-comp.html#ex-audit-aureport-sshd\n\nThe goal of this design is to start the audit log support within OpenBMC. It does not intend to add details of every interface that could be logged using this method. The goal is to get the underlying solution implemented and used with bmcweb. Then over time it can be expanded to include other interfaces as appropriate. (I expect the individual distribution configurations will be different focusing on the additional audit rules to audit important in each environment.)\n\nThe Problem Description section has been updated to indicate this intention."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 227,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 243,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "To be clear, this socket will be added to the asio reactor?  Will it send in a separate thread, or from the main thread?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 243,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "The audit_open() creates the NETLINK_AUDIT socket and then the audit_log_user_message() is passed the fd to the socket.\n\nThis level of detail for the D-Bus service is still under consideration. Per the design template guidelines I don't think this level of detail should be added to the design document.\n\nHowever, I'm thinking the main thread will use an async call. If in implementation there are performance problems then separate threads may be used."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 243,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 316,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "?  So make them more efficient?  Nothing about the API precludes the inefficiencies listed, only the implementation?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 316,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "I also believe the security requirements for an audit log are overly cumbersome for the other types of logs. I've clarified elsewhere the amount of data that is estimated to be preserved by the audit log.\n\nI don't feel using one of the other logs would properly address all of the requirements even with an implementation change."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 316,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 336,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This goes into the background section."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 336,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "I originally had these in the Background section. I moved them into the Alternative Section per this comment on the first patchset review: https://gerrit.openbmc.org/c/openbmc/docs/+/63915/comment/5d825c6f_e1eb62a2/\n\nDid I misunderstand that comment?"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "designs/auditLog.md",
                    "type": "ADDED",
                    "insertions": 490,
                    "deletions": 0
                },
                {
                    "file": "designs/phosphor-audit.md",
                    "type": "DELETED",
                    "insertions": 0,
                    "deletions": -368
                }
            ],
            "sizeInsertions": 508,
            "sizeDeletions": 368
        },
        {
            "number": 6,
            "revision": "3d320be94010d668e5f19b526f025bcd644b19cf",
            "parents": [
                "d62d386d16b80442274cc997e8e51224af2425e1"
            ],
            "ref": "refs/changes/15/63915/6",
            "uploader": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "createdOn": 1694727141,
            "author": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "I've pushed the Yaml file defining the D-Bus service proposed by this design to gerrit: https://gerrit.openbmc.org/c/openbmc/phosphor-dbus-interfaces/+/66616"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Thank you for the review. I've responded to the latest comments and pushed a slight update to the design."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 63,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "Can administrator delete a particular event? if yes then how it being catered through this design?\nor \nUser can delete the whole trail but he can not modify/delete any specific log."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 63,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Deleting of the log files or individual entries is not supported through this interface.\n\nThis choice is in alignment with the BMC Protection Profile (https://commoncriteriaportal.org/files/ppfiles/anssi-profil-pp-2022_01en.pdf). Section 4.4, T.Unauthorised table entry specifies even an administrator cannot delete the audit log file."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 63,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "Can not access this pdf but why we can not delete the whole audit trail?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 67,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "Do we have any requirements to send the audit log as part of RF event?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 67,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gunnar@gmills.xyz",
                        "username": "gtmills"
                    },
                    "message": "Since this is an Redfish LogEntry would function in terms of Redfish event like any other LogEntry"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 67,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "Can you please help me in identifying that how we are sendig the event for Journal log service?\nhttps://github.com/openbmc/bmcweb/blob/master/redfish-core/lib/log_services.hpp#L2369"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 67,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "@janet Adkins: How you are planning to send the Redfish event for these logentries?\nInotify for the audit log file?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 67,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Janet you wouldn't actually need to implement events if you don't need the functionality, but it would be good to state how it could be done."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 67,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gunnar@gmills.xyz",
                        "username": "gtmills"
                    },
                    "message": "> Can you please help me in identifying that how we are sendig the event for Journal log service?\nhttps://github.com/openbmc/bmcweb/blob/master/redfish-core/lib/log_services.hpp#L2369\n\nSeems outside this design. https://github.com/openbmc/bmcweb/blob/db7b3876bc537dc927f162952e060d91ed1e3f7b/redfish-core/lib/event_service.hpp#L171 is the event implementation \n\nI thought we were supporting more types of events but looks like maybe only tasks https://github.com/openbmc/bmcweb/blob/8d1b46d7f8d39db2ba048f9e9007106ca3a28c9b/redfish-core/lib/event_service.hpp#L34 \n\nI do feel this is outside of this design. The Redfish events here would work like other LogEntries e.g. https://github.com/openbmc/bmcweb/blob/8d1b46d7f8d39db2ba048f9e9007106ca3a28c9b/redfish-core/lib/log_services.hpp#L1531"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 67,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "The Redfish EventService support is outside the scope of this design. However I can forsee a future extension which would add this support. It would use the Linux audisp mechanism to watch for new audit events and parse them into a file to be read by bmcweb. Then using the Redfish EventService design mechanism using inotify to watch that file for updates it could push/SSE updates to any subscribers.\n\nI've added a line to this design to indicate the potential future extension of this design."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 99,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "Why do we need this new service? only for the below functions\n- Log Event \n- Getting the logs.\n\nI would say why don't we use the libaudit opensource library by any interface(bmcweb, ipmi) etc.\n\nManoj have already pushed the poc for the same."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 99,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Yes this design was started based on Manoj's POC work. The goal is to update that commit to reflect this design on community acceptance.\n\nThere were review comments from the bmcweb maintainer with concern about calling libaudit directly from bmcweb due to performance: https://gerrit.openbmc.org/c/openbmc/bmcweb/+/55532/comments/fdb4ec6e_2fe4d271\n\nand, review comment on earlier iteration of this design from the bmcweb maintainer with concern about putting libaudit dependencies directly into bmcweb: https://gerrit.openbmc.org/c/openbmc/docs/+/63915/comments/6ca916f6_26d08218\n\nSo I updated the design to add the D-Bus services to address those comments."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 99,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "Having the D-bus transaction for each operation(POST/PATCH/DELETE) increases the D-bus traffic.\nIf we have non blocking socket which is writing the audit log and doesn't block the bmcweb,Should not be a issue."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 139,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "Does it create the D-bus object for each log?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 139,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "No. The expectation is that the amount of data preserved by an audit log is quite large due to preserving 3-6 months of auditable actions."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 139,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "How you are going to support fetch the individual log entry?\n\nseems you mentioned somewhere each audit log entry has a unique audit event id. This can be used here.\n\nFollowing audit logs captured from the Manoj Commit. where is the audit ID in this?\nIf it is auid=4294967295 then it is same for all the audit logs given in the commit.\nhttps://gerrit.openbmc.org/c/openbmc/bmcweb/+/55532\n\n1. Authentication successful - below is the event generated in\n /var/log/audit/audit.log file\ntype=USYS_CONFIG msg=audit(1691436001.865:9): pid=255 uid=0 auid=4294967295 ses=4294967295 msg='op=POST:/login acct=\"root\" exe=\"/usr/bin/bmcweb\" hostname=p10bmc addr=::ffff:10.0.2.1 terminal=? res=success'UID=\"root\" AUID=\"unset\"\n\n2. Authentication failed\n\ntype=USYS_CONFIG msg=audit(1691436064.995:10): pid=255 uid=0 auid=4294967295 ses=4294967295 msg='op=POST:/login acct=\"janet\" exe=\"/usr/bin/bmcweb\" hostname=p10bmc addr=::ffff:10.0.2.1 terminal=? res=failed'UID=\"root\" AUID=\"unset\""
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 165,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "Do we want to provide the delete audit log method too?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 165,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "This is to delete the whole audit log trail."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 165,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "I have not included this method in the design to reflect the BMC Protection Profile guidance. See my response to other review comment for more details. (https://gerrit.openbmc.org/c/openbmc/docs/+/63915/comment/d1b2ba5c_5cb67469/)"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 238,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "Can we define the new message ID in this design here?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 238,
                    "reviewer": {
                        "name": "Gunnar Mills",
                        "email": "gunnar@gmills.xyz",
                        "username": "gtmills"
                    },
                    "message": "I guess but really getting down in the implementation details when doing that.  I would be fine with this as is. \nShould we have multiple messages?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 238,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "I was purposefully not defining the MessageId here to conform to the design-template.md guidance: \"intended to be extensive documentation for a new feature\".\n\nAs I have continued with prototyping I do believe there will be multiple messages added to the registry. I'll update to indicate plural here for clarity."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 442,
                    "reviewer": {
                        "name": "Ratan Gupta",
                        "email": "ratankgupta31@gmail.com",
                        "username": "ratagupt"
                    },
                    "message": "which tool you used to get these numbers?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 442,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "I used 'time' on an Ubuntu server performing the curl commands. I then gathered the output into an Excel spreadsheet to compute the statistics using its builtin function. (E.g. Mean -> =AVERAGE(); Median -> =MEDIAN(), etc.)"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "designs/auditLog.md",
                    "type": "ADDED",
                    "insertions": 530,
                    "deletions": 0
                },
                {
                    "file": "designs/phosphor-audit.md",
                    "type": "DELETED",
                    "insertions": 0,
                    "deletions": -368
                }
            ],
            "sizeInsertions": 548,
            "sizeDeletions": 368
        },
        {
            "number": 7,
            "revision": "ca2ed1321a883a84e5df76aa1e70b976d681f3e3",
            "parents": [
                "d62d386d16b80442274cc997e8e51224af2425e1"
            ],
            "ref": "refs/changes/15/63915/7",
            "uploader": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "createdOn": 1697470677,
            "author": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "designs/auditLog.md",
                    "line": 94,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "In my head when I read callout I think specifically 'something in an error log that specifies hardware that needs to be replaced'.  \n\nhow about instead maybe:  The API calls required to capture the ...  or something like that"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 94,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 156,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Can this just be looked up on the backend as the hostname the dbus server code is running on?  or is there some special case here?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 156,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Good point! Yes, this can just be looked up. I've removed this parameter. I'll update the phosphor-dbus-interface Yaml file as well."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 244,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "maybe just 'call'"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 244,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 255,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "call"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 255,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "designs/auditLog.md",
                    "type": "ADDED",
                    "insertions": 530,
                    "deletions": 0
                },
                {
                    "file": "designs/phosphor-audit.md",
                    "type": "DELETED",
                    "insertions": 0,
                    "deletions": -368
                }
            ],
            "sizeInsertions": 548,
            "sizeDeletions": 368
        },
        {
            "number": 8,
            "revision": "bd3790dc609d925b012c86af15db15655fb391b2",
            "parents": [
                "d62d386d16b80442274cc997e8e51224af2425e1"
            ],
            "ref": "refs/changes/15/63915/8",
            "uploader": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "createdOn": 1698353861,
            "author": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "designs/auditLog.md",
                    "type": "ADDED",
                    "insertions": 527,
                    "deletions": 0
                },
                {
                    "file": "designs/phosphor-audit.md",
                    "type": "DELETED",
                    "insertions": 0,
                    "deletions": -368
                }
            ],
            "sizeInsertions": 545,
            "sizeDeletions": 368
        },
        {
            "number": 9,
            "revision": "e7bf639c1e4615d7fbc06a44220e41250c4f38c7",
            "parents": [
                "d62d386d16b80442274cc997e8e51224af2425e1"
            ],
            "ref": "refs/changes/15/63915/9",
            "uploader": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "createdOn": 1698354186,
            "author": {
                "name": "Janet Adkins",
                "email": "janeta@us.ibm.com",
                "username": "jeaaustx"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "I'm not that well versed on the best places to put the hooks into bmcweb and such, but in general the phosphor-logging part of the design looks fine to me."
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 68,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "Just curious, with this many entries, how big would you guess the resulting JSON temp file would be?"
                },
                {
                    "file": "designs/auditLog.md",
                    "line": 68,
                    "reviewer": {
                        "name": "Janet Adkins",
                        "email": "janeta@us.ibm.com",
                        "username": "jeaaustx"
                    },
                    "message": "I have a prototype which uses the message registry and parses into a JSON temp file. For the prototype the JSON temp file is actually slightly smaller than the raw audit log file. This is due to not including some of the data that the audit log service records (e.g. pid of auditd).\n\nRaw audit.log file: 1572kB\nJSON temp file: 1497kB"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 18,
                    "deletions": 0
                },
                {
                    "file": "designs/auditLog.md",
                    "type": "ADDED",
                    "insertions": 531,
                    "deletions": 0
                },
                {
                    "file": "designs/phosphor-audit.md",
                    "type": "DELETED",
                    "insertions": 0,
                    "deletions": -368
                }
            ],
            "sizeInsertions": 549,
            "sizeDeletions": 368
        }
    ]
}