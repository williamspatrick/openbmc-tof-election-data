{
    "project": "openbmc/openbmc-build-scripts",
    "branch": "master",
    "id": "I0504a81470ea0d3bc23cd5e5b58a093aa7a09344",
    "number": 71635,
    "subject": "unit-test.py: Fix missing subproject",
    "owner": {
        "name": "Ewelina Walkusz",
        "email": "ewelinax.walkusz@intel.com",
        "username": "ewalkusx"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/openbmc-build-scripts/+/71635",
    "hashtags": [],
    "createdOn": 1716796615,
    "lastUpdated": 1717745046,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1716796615,
            "reviewer": {
                "name": "Ewelina Walkusz",
                "email": "ewelinax.walkusz@intel.com",
                "username": "ewalkusx"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1716796672,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1716796672,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1716796678,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-openbmc-build-scripts/999/ (2/2)"
        },
        {
            "timestamp": 1716796688,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/84906/ : FAILURE\n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-openbmc-build-scripts/999/ : FAILURE"
        },
        {
            "timestamp": 1716817379,
            "reviewer": {
                "name": "Ewelina Walkusz",
                "email": "ewelinax.walkusz@intel.com",
                "username": "ewalkusx"
            },
            "message": "Patch Set 2: Patch Set 1 was rebased\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1716817388,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1716817388,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1716817394,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-openbmc-build-scripts/1002/ (1/2)"
        },
        {
            "timestamp": 1716817405,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/84951/ : FAILURE\n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-openbmc-build-scripts/1002/ : FAILURE"
        },
        {
            "timestamp": 1716818370,
            "reviewer": {
                "name": "Ewelina Walkusz",
                "email": "ewelinax.walkusz@intel.com",
                "username": "ewalkusx"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1716818409,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1716818409,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1716818415,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-openbmc-build-scripts/1003/ (1/2)"
        },
        {
            "timestamp": 1716818488,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/84953/ : FAILURE\n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-openbmc-build-scripts/1003/ : FAILURE"
        },
        {
            "timestamp": 1716824193,
            "reviewer": {
                "name": "Ewelina Walkusz",
                "email": "ewelinax.walkusz@intel.com",
                "username": "ewalkusx"
            },
            "message": "Patch Set 4: Patch Set 3 was rebased\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1716824234,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1716824234,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1716824240,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-openbmc-build-scripts/1006/ (2/2)"
        },
        {
            "timestamp": 1716824251,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/84958/ : FAILURE\n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-openbmc-build-scripts/1006/ : FAILURE"
        },
        {
            "timestamp": 1716877984,
            "reviewer": {
                "name": "Ewelina Walkusz",
                "email": "ewelinax.walkusz@intel.com",
                "username": "ewalkusx"
            },
            "message": "Uploaded patch set 5.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1716878038,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1716878038,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1716878044,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-openbmc-build-scripts/1007/ (2/2)"
        },
        {
            "timestamp": 1716878587,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/84991/ : SUCCESS\n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-openbmc-build-scripts/1007/ : SUCCESS"
        },
        {
            "timestamp": 1716885394,
            "reviewer": {
                "name": "Ewelina Walkusz",
                "email": "ewelinax.walkusz@intel.com",
                "username": "ewalkusx"
            },
            "message": "Uploaded patch set 6: Commit message was updated.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1716885404,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1716885404,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: -Ok-To-Test"
        },
        {
            "timestamp": 1716885410,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6:\n\nBuild Started https://jenkins.openbmc.org/job/CI-MISC/job/ci-openbmc-build-scripts/1008/ (2/2)"
        },
        {
            "timestamp": 1716885692,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/85014/ : SUCCESS\n\nhttps://jenkins.openbmc.org/job/CI-MISC/job/ci-openbmc-build-scripts/1008/ : SUCCESS"
        },
        {
            "timestamp": 1716887093,
            "reviewer": {
                "name": "Michal Orzel",
                "email": "michalx.orzel@intel.com",
                "username": "morzelx"
            },
            "message": "Patch Set 6: Code-Review+1"
        },
        {
            "timestamp": 1716903594,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 6: Code-Review-1\n\n(2 comments)"
        },
        {
            "timestamp": 1716971349,
            "reviewer": {
                "name": "Ewelina Walkusz",
                "email": "ewelinax.walkusz@intel.com",
                "username": "ewalkusx"
            },
            "message": "Patch Set 6:\n\n(2 comments)"
        },
        {
            "timestamp": 1717018803,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1717745028,
            "reviewer": {
                "name": "Ewelina Walkusz",
                "email": "ewelinax.walkusz@intel.com",
                "username": "ewalkusx"
            },
            "message": "Patch Set 6:\n\n(1 comment)"
        },
        {
            "timestamp": 1717745046,
            "reviewer": {
                "name": "Ewelina Walkusz",
                "email": "ewelinax.walkusz@intel.com",
                "username": "ewalkusx"
            },
            "message": "Abandoned"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "370b9ee481e41fa3437f8ad7bd8a1dd83b167416",
            "parents": [
                "3adf1a3b224c28f59403e55aba3d886f4cccca53"
            ],
            "ref": "refs/changes/35/71635/1",
            "uploader": {
                "name": "Ewelina Walkusz",
                "email": "ewelinax.walkusz@intel.com",
                "username": "ewalkusx"
            },
            "createdOn": 1716796615,
            "author": {
                "name": "Ewelina Walkusz",
                "email": "ewelinax.walkusz@intel.com",
                "username": "ewalkusx"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "scripts/unit-test.py",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 24,
            "sizeDeletions": 1
        },
        {
            "number": 2,
            "revision": "170e84b1af2357a370036fe3a6d7d5bb952d324a",
            "parents": [
                "d0757dea42670e517edf056c5b12655ef34db2e7"
            ],
            "ref": "refs/changes/35/71635/2",
            "uploader": {
                "name": "Ewelina Walkusz",
                "email": "ewelinax.walkusz@intel.com",
                "username": "ewalkusx"
            },
            "createdOn": 1716817379,
            "author": {
                "name": "Ewelina Walkusz",
                "email": "ewelinax.walkusz@intel.com",
                "username": "ewalkusx"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "scripts/unit-test.py",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 24,
            "sizeDeletions": 1
        },
        {
            "number": 3,
            "revision": "afc61159b3f0e4aadd78039519277874f03184c4",
            "parents": [
                "3adf1a3b224c28f59403e55aba3d886f4cccca53"
            ],
            "ref": "refs/changes/35/71635/3",
            "uploader": {
                "name": "Ewelina Walkusz",
                "email": "ewelinax.walkusz@intel.com",
                "username": "ewalkusx"
            },
            "createdOn": 1716818370,
            "author": {
                "name": "Ewelina Walkusz",
                "email": "ewelinax.walkusz@intel.com",
                "username": "ewalkusx"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "scripts/unit-test.py",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 34,
            "sizeDeletions": 1
        },
        {
            "number": 4,
            "revision": "f56c367baeefd399862e6ac69c013829b9c31f10",
            "parents": [
                "d0757dea42670e517edf056c5b12655ef34db2e7"
            ],
            "ref": "refs/changes/35/71635/4",
            "uploader": {
                "name": "Ewelina Walkusz",
                "email": "ewelinax.walkusz@intel.com",
                "username": "ewalkusx"
            },
            "createdOn": 1716824193,
            "author": {
                "name": "Ewelina Walkusz",
                "email": "ewelinax.walkusz@intel.com",
                "username": "ewalkusx"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "scripts/unit-test.py",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 34,
            "sizeDeletions": 1
        },
        {
            "number": 5,
            "revision": "b19301eaccfe4fef1bc6f1db71f70659aed19765",
            "parents": [
                "d0757dea42670e517edf056c5b12655ef34db2e7"
            ],
            "ref": "refs/changes/35/71635/5",
            "uploader": {
                "name": "Ewelina Walkusz",
                "email": "ewelinax.walkusz@intel.com",
                "username": "ewalkusx"
            },
            "createdOn": 1716877984,
            "author": {
                "name": "Ewelina Walkusz",
                "email": "ewelinax.walkusz@intel.com",
                "username": "ewalkusx"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "scripts/unit-test.py",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 34,
            "sizeDeletions": 1
        },
        {
            "number": 6,
            "revision": "e0bd4924f57536d34f33ab66db6bf63c33b03cf6",
            "parents": [
                "d0757dea42670e517edf056c5b12655ef34db2e7"
            ],
            "ref": "refs/changes/35/71635/6",
            "uploader": {
                "name": "Ewelina Walkusz",
                "email": "ewelinax.walkusz@intel.com",
                "username": "ewalkusx"
            },
            "createdOn": 1716885394,
            "author": {
                "name": "Ewelina Walkusz",
                "email": "ewelinax.walkusz@intel.com",
                "username": "ewalkusx"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "scripts/unit-test.py",
                    "line": 964,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Why do we need to call meson here but we do `ninja` ok on line 957?"
                },
                {
                    "file": "scripts/unit-test.py",
                    "line": 964,
                    "reviewer": {
                        "name": "Ewelina Walkusz",
                        "email": "ewelinax.walkusz@intel.com",
                        "username": "ewalkusx"
                    },
                    "message": "I replied here: https://gerrit.openbmc.org/c/openbmc/openbmc-build-scripts/+/71635/comment/17b20a89_a87105cb/"
                },
                {
                    "file": "scripts/unit-test.py",
                    "line": 969,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I'm failing to understand the connection between changing this and the commit message."
                },
                {
                    "file": "scripts/unit-test.py",
                    "line": 969,
                    "reviewer": {
                        "name": "Ewelina Walkusz",
                        "email": "ewelinax.walkusz@intel.com",
                        "username": "ewalkusx"
                    },
                    "message": "When subproject is installed with main project (first build), in the second build it is not listed to build again and during the main project compilation the are missing headers from subroject.\n\nI had to find a way to exclude subprojects from installing. I choose here meson bacause meson has command-line command: `--skip-subproject`  (and install() is the method of the class Meson). However, there is still ninja in the backend.\nBetter solution is to skip dev files only (\\*.a and \\*.h). To achieve this I use `--tags runtime` instead."
                },
                {
                    "file": "scripts/unit-test.py",
                    "line": 969,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "What is \"the second build\"?\n\nAfter reading the manual (https://mesonbuild.com/Installing.html#installation-tags), I'm not convinced `--tags runtime` is appropriate.  First, that means we're not testing the install in the same way that we'll eventually be installing for bitbake.  Second, we miss out on non-executable artifacts like files that get installed into `datadir`.  These are required for some subprojects to be useful by other repositories (such as phosphor-dbus-interfaces installing to `datadir` and consumed by phosphor-logging)."
                },
                {
                    "file": "scripts/unit-test.py",
                    "line": 969,
                    "reviewer": {
                        "name": "Ewelina Walkusz",
                        "email": "ewelinax.walkusz@intel.com",
                        "username": "ewalkusx"
                    },
                    "message": "I found another solution to my problem, so I'm closing this pull request."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 23,
                    "deletions": 0
                },
                {
                    "file": "scripts/unit-test.py",
                    "type": "MODIFIED",
                    "insertions": 11,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 34,
            "sizeDeletions": 1
        }
    ]
}