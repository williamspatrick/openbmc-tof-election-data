{
    "project": "openbmc/docs",
    "branch": "master",
    "id": "I9e50f5006fa3003db05b385db541566c4b73ed3c",
    "number": 73678,
    "subject": "design: BMC reboot cause event log",
    "owner": {
        "name": "Patrick NC Lin",
        "email": "patrick.nc.lin.wiwynn@gmail.com",
        "username": "PatrickLinww"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/docs/+/73678",
    "hashtags": [],
    "createdOn": 1724120280,
    "lastUpdated": 1724154068,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1724120280,
            "reviewer": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1724120306,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1724120306,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1724120330,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/90078/ : FAILURE"
        },
        {
            "timestamp": 1724120842,
            "reviewer": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "message": "Patch Set 2: Published edit on patch set 1.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1724120866,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1724120866,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1724120890,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/90079/ : FAILURE"
        },
        {
            "timestamp": 1724123407,
            "reviewer": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1724123430,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1724123430,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1724123455,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/90082/ : FAILURE"
        },
        {
            "timestamp": 1724123742,
            "reviewer": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "message": "Patch Set 4: Published edit on patch set 3.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1724123791,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1724123791,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1724123815,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/90083/ : SUCCESS"
        },
        {
            "timestamp": 1724154068,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 4:\n\n(4 comments)"
        }
    ],
    "wip": true,
    "patchSets": [
        {
            "number": 1,
            "revision": "7ebc154d95a812abc841ec86fd853098edabd924",
            "parents": [
                "a69289a9206654a80344c4d5cedfa337c88f622a"
            ],
            "ref": "refs/changes/78/73678/1",
            "uploader": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "createdOn": 1724120280,
            "author": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "bmc-reboot-cause-update.md",
                    "type": "ADDED",
                    "insertions": 108,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 120,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "0e31416419a48ea79d640ec278826797597a7187",
            "parents": [
                "a69289a9206654a80344c4d5cedfa337c88f622a"
            ],
            "ref": "refs/changes/78/73678/2",
            "uploader": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "createdOn": 1724120842,
            "author": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "bmc-reboot-cause-update.md",
                    "type": "ADDED",
                    "insertions": 105,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 117,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "f2af2d38f2cdd10da953abbe36c76ec851ecdd01",
            "parents": [
                "a69289a9206654a80344c4d5cedfa337c88f622a"
            ],
            "ref": "refs/changes/78/73678/3",
            "uploader": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "createdOn": 1724123407,
            "author": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "type": "ADDED",
                    "insertions": 108,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 120,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "8d8738f76a3cca16fce8ea520f1ea6988c6d821d",
            "parents": [
                "a69289a9206654a80344c4d5cedfa337c88f622a"
            ],
            "ref": "refs/changes/78/73678/4",
            "uploader": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "createdOn": 1724123742,
            "author": {
                "name": "Patrick NC Lin",
                "email": "patrick.nc.lin.wiwynn@gmail.com",
                "username": "PatrickLinww"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 71,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I suspect this is going to be an issue for some existing hardware designs.  CARDRESET was \"power on reset\" because, that's what a CARDRESET is suppose to show, right?  Why are we using that for a watchdog now an using EXTERN2 as something other than the watchdog?"
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 82,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "What is a \"System Event Log\"?  This is an IPMI term.  I assume you're going to be making a new record per https://github.com/openbmc/docs/blob/master/designs/event-logging.md ?"
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 89,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "This is the opposite of intuitive to me..."
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "line": 90,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "I've looked at the kernel documentation and maybe CARDRESET _is_ suppose to be used for the watchdog reset:\n\n```\n\t===============\t\t=============================\n\tWDIOF_CARDRESET\t\tCard previously reset the CPU\n\t===============\t\t=============================\n\nThe last reboot was caused by the watchdog card\n```\n\nSee https://github.com/openbmc/linux/blob/6e4436539ae182dc86d57d13849862bcafaa4709/Documentation/watchdog/watchdog-api.rst#environmental-monitoring\n\nWe will need to get alignment from existing upstream users as to why EXTERN1 was previously used for this.  It looks like the code in phosphor-state-manager was added by Tim Lee from Nuvoton."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 12,
                    "deletions": 0
                },
                {
                    "file": "designs/bmc-reboot-cause-update.md",
                    "type": "ADDED",
                    "insertions": 107,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 119,
            "sizeDeletions": 0
        }
    ]
}