{
    "project": "openbmc/entity-manager",
    "branch": "master",
    "id": "I0c06b747671d6b59d0942c327e4782c556390282",
    "number": 72946,
    "subject": "configurations: yosemite4: Remove duplicate Fan Board configs",
    "owner": {
        "name": "Ian Chien",
        "email": "ianchien.wiwynn@gmail.com",
        "username": "Ian-I-Chien"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/entity-manager/+/72946",
    "hashtags": [],
    "createdOn": 1721379287,
    "lastUpdated": 1722355893,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1721379287,
            "reviewer": {
                "name": "Ian Chien",
                "email": "ianchien.wiwynn@gmail.com",
                "username": "Ian-I-Chien"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1721379316,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1721379321,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1721379378,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/88339/ : FAILURE"
        },
        {
            "timestamp": 1721381283,
            "reviewer": {
                "name": "Ian Chien",
                "email": "ianchien.wiwynn@gmail.com",
                "username": "Ian-I-Chien"
            },
            "message": "Uploaded patch set 2.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1721381330,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1721381331,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1721381405,
            "reviewer": {
                "name": "Ian Chien",
                "email": "ianchien.wiwynn@gmail.com",
                "username": "Ian-I-Chien"
            },
            "message": "Uploaded patch set 3."
        },
        {
            "timestamp": 1721381425,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1721381425,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1721381427,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/88340/ : ABORTED"
        },
        {
            "timestamp": 1721381512,
            "reviewer": {
                "name": "Ian Chien",
                "email": "ianchien.wiwynn@gmail.com",
                "username": "Ian-I-Chien"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1721381550,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1721381550,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1721381552,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/88341/ : ABORTED"
        },
        {
            "timestamp": 1721381816,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/88342/ : SUCCESS"
        },
        {
            "timestamp": 1721381973,
            "reviewer": {
                "name": "Ian Chien",
                "email": "ianchien.wiwynn@gmail.com",
                "username": "Ian-I-Chien"
            },
            "message": "Patch Set 4:\n\nThis change is ready for review."
        },
        {
            "timestamp": 1721392123,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 4: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1721404626,
            "reviewer": {
                "name": "Ian Chien",
                "email": "ianchien.wiwynn@gmail.com",
                "username": "Ian-I-Chien"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1721412658,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 4: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1721413932,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1721414771,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1721841853,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1721881992,
            "reviewer": {
                "name": "Ian Chien",
                "email": "ianchien.wiwynn@gmail.com",
                "username": "Ian-I-Chien"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1722002463,
            "reviewer": {
                "name": "Ian Chien",
                "email": "ianchien.wiwynn@gmail.com",
                "username": "Ian-I-Chien"
            },
            "message": "Uploaded patch set 5.\n\nOutdated Votes:\n* Code-Review+1 (copy condition: \"changekind:NO_CHANGE OR changekind:NO_CODE_CHANGE OR changekind:TRIVIAL_REBASE OR is:MIN\")\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1722002519,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1722002519,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: -Ok-To-Test"
        },
        {
            "timestamp": 1722002550,
            "reviewer": {
                "name": "Ian Chien",
                "email": "ianchien.wiwynn@gmail.com",
                "username": "Ian-I-Chien"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1722002788,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/88699/ : SUCCESS"
        },
        {
            "timestamp": 1722013493,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 5: Code-Review+1"
        },
        {
            "timestamp": 1722355744,
            "reviewer": {
                "name": "Matt Spinler",
                "email": "spinler@us.ibm.com",
                "username": "spinler"
            },
            "message": "Patch Set 5: Code-Review+2"
        },
        {
            "timestamp": 1722355893,
            "reviewer": {
                "name": "Ian Chien",
                "email": "ianchien.wiwynn@gmail.com",
                "username": "Ian-I-Chien"
            },
            "message": "Change has been successfully merged"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "36836bcb7da20f6268aacd80abab2851119e8154",
            "parents": [
                "0f11a64a327d376960824b67bcf009ae718f62aa"
            ],
            "ref": "refs/changes/46/72946/1",
            "uploader": {
                "name": "Ian Chien",
                "email": "ianchien.wiwynn@gmail.com",
                "username": "Ian-I-Chien"
            },
            "createdOn": 1721379287,
            "author": {
                "name": "Ian Chien",
                "email": "ianchien.wiwynn@gmail.com",
                "username": "Ian-I-Chien"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -3
                },
                {
                    "file": "configurations/yosemite4_fanboard_fsc_max_adc_ti.json",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 16,
            "sizeDeletions": 4
        },
        {
            "number": 2,
            "revision": "a82d71b71382af82f9f3889c7690e66a66135672",
            "parents": [
                "0f11a64a327d376960824b67bcf009ae718f62aa"
            ],
            "ref": "refs/changes/46/72946/2",
            "uploader": {
                "name": "Ian Chien",
                "email": "ianchien.wiwynn@gmail.com",
                "username": "Ian-I-Chien"
            },
            "createdOn": 1721381283,
            "author": {
                "name": "Ian Chien",
                "email": "ianchien.wiwynn@gmail.com",
                "username": "Ian-I-Chien"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 15,
            "sizeDeletions": 3
        },
        {
            "number": 3,
            "revision": "7d441f03b190c9976f3b2a3e746022c05b9f70fa",
            "parents": [
                "0f11a64a327d376960824b67bcf009ae718f62aa"
            ],
            "ref": "refs/changes/46/72946/3",
            "uploader": {
                "name": "Ian Chien",
                "email": "ianchien.wiwynn@gmail.com",
                "username": "Ian-I-Chien"
            },
            "createdOn": 1721381405,
            "author": {
                "name": "Ian Chien",
                "email": "ianchien.wiwynn@gmail.com",
                "username": "Ian-I-Chien"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "configurations/yosemite4_fanboard_fsc_max.json",
                    "type": "DELETED",
                    "insertions": 0,
                    "deletions": -891
                },
                {
                    "file": "configurations/yosemite4_fanboard_adc_ti.json",
                    "type": "DELETED",
                    "insertions": 0,
                    "deletions": -509
                },
                {
                    "file": "configurations/yosemite4_fanboard_fsc_nct.json",
                    "type": "DELETED",
                    "insertions": 0,
                    "deletions": -891
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -3
                }
            ],
            "sizeInsertions": 15,
            "sizeDeletions": 2294
        },
        {
            "number": 4,
            "revision": "311f1f24c4eb749ed79b224279343786020f2ffb",
            "parents": [
                "0f11a64a327d376960824b67bcf009ae718f62aa"
            ],
            "ref": "refs/changes/46/72946/4",
            "uploader": {
                "name": "Ian Chien",
                "email": "ianchien.wiwynn@gmail.com",
                "username": "Ian-I-Chien"
            },
            "createdOn": 1721381512,
            "author": {
                "name": "Ian Chien",
                "email": "ianchien.wiwynn@gmail.com",
                "username": "Ian-I-Chien"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Does this still support all the fan board variants?  It looks like we removed 3 of them."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ian Chien",
                        "email": "ianchien.wiwynn@gmail.com",
                        "username": "Ian-I-Chien"
                    },
                    "message": "Hi Patrick,\n\nThere is a fan board config that we are going to support these days which will be named \"yosemite4_fanboard_fsc_nct_adc_max.json\"\nThis config supports 2nd source fan board with NCT and MAX drivers.\n\n\nThe configs that I removed only load specific drivers.\nfsc_max.json only loads the MAX driver\nfsc_nct.json only loads the NCT driver\nfsc_adc_ti.json only loads the TI driver\n\n\nI also found out there is an issue in this fan board config.\nThis fanboard config hard code setting FanBoard0 and FanBoard1, it's supposed to put only one FanBoard and the entity manager will number the FanBoard automatically.\n\nCurrently, this fan board config will load FANBOARD0 and FANBOARD1's drivers twice since there are two fan boards on Yv4. It is leading to duplicate inventory items. I am now fixing it.\n\nLog:\n```\nroot@bmc:~# busctl tree xyz.openbmc_project.EntityManager | grep FAN\n          \u251c\u2500 /xyz/openbmc_project/inventory/system/board/Yosemite_4_FAN_Board_0\n          \u2502 \u251c\u2500 /xyz/openbmc_project/inventory/system/board/Yosemite_4_FAN_Board_0/FANBOARD0_ADC\n          \u2502 \u251c\u2500 /xyz/openbmc_project/inventory/system/board/Yosemite_4_FAN_Board_0/FANBOARD0_FAN0_TACH_IL\n          \u2502 \u251c\u2500 /xyz/openbmc_project/inventory/system/board/Yosemite_4_FAN_Board_0/FANBOARD0_FAN0_TACH_OL\n...     \u2502 \u251c\u2500 /xyz/openbmc_project/inventory/system/board/Yosemite_4_FAN_Board_0/FANBOARD1_ADC\n          \u2502 \u251c\u2500 /xyz/openbmc_project/inventory/system/board/Yosemite_4_FAN_Board_0/FANBOARD1_FAN10_TACH_IL\n          \u2502 \u251c\u2500 /xyz/openbmc_project/inventory/system/board/Yosemite_4_FAN_Board_0/FANBOARD1_FAN10_TACH_OL\n          \u2502 \u251c\u2500 /xyz/openbmc_project/inventory/system/board/Yosemite_4_FAN_Board_0/FANBOARD1_FAN11_TACH_IL\n          \n      \u251c\u2500 /xyz/openbmc_project/inventory/system/board/Yosemite_4_FAN_Board_1\n          \u2502 \u251c\u2500 /xyz/openbmc_project/inventory/system/board/Yosemite_4_FAN_Board_1/FANBOARD0_ADC\n          \u2502 \u251c\u2500 /xyz/openbmc_project/inventory/system/board/Yosemite_4_FAN_Board_1/FANBOARD0_FAN0_TACH_IL\n          \u2502 \u251c\u2500 /xyz/openbmc_project/inventory/system/board/Yosemite_4_FAN_Board_1/FANBOARD0_FAN0_TACH_OL\n       \u2502 \u251c\u2500 /xyz/openbmc_project/inventory/system/board/Yosemite_4_FAN_Board_1/FANBOARD1_ADC\n          \u2502 \u251c\u2500 /xyz/openbmc_project/inventory/system/board/Yosemite_4_FAN_Board_1/FANBOARD1_FAN10_TACH_IL\n          \u2502 \u251c\u2500 /xyz/openbmc_project/inventory/system/board/Yosemite_4_FAN_Board_1/FANBOARD1_FAN10_TACH_OL\n\n```"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "I don't necessarily follow the issue the the code looks ok."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "We were ending up with multiple entity-manager objects for the same FRU."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Matt Spinler",
                        "email": "spinler@us.ibm.com",
                        "username": "spinler"
                    },
                    "message": "I see the yosemite4_fanboard_fsc_max_adc_ti.json used to have a generic probe statement, until it was fixed in this commit, which probably caused that."
                },
                {
                    "file": "configurations/yosemite4_fanboard_fsc_max_adc_ti.json",
                    "line": 1363,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "This string does not cover all BOARD_PRODUCT_NAME string used in the deleted json files probe statement. Please confirm this is the only BOARD_PRODUCT_NAME need supported"
                },
                {
                    "file": "configurations/yosemite4_fanboard_fsc_max_adc_ti.json",
                    "line": 1363,
                    "reviewer": {
                        "name": "Ian Chien",
                        "email": "ianchien.wiwynn@gmail.com",
                        "username": "Ian-I-Chien"
                    },
                    "message": "I have pushed a commit:\nhttps://gerrit.openbmc.org/c/openbmc/entity-manager/+/72951\n\nsupports second sources fan board FRU: FAN Board FSC-NCT ADC-MAX.\nTwo commits cover all deleted json files probe statement."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "configurations/yosemite4_fanboard_fsc_max.json",
                    "type": "DELETED",
                    "insertions": 0,
                    "deletions": -891
                },
                {
                    "file": "configurations/yosemite4_fanboard_adc_ti.json",
                    "type": "DELETED",
                    "insertions": 0,
                    "deletions": -509
                },
                {
                    "file": "configurations/yosemite4_fanboard_fsc_nct.json",
                    "type": "DELETED",
                    "insertions": 0,
                    "deletions": -891
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -3
                },
                {
                    "file": "configurations/yosemite4_fanboard_fsc_max_adc_ti.json",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 16,
            "sizeDeletions": 2295
        },
        {
            "number": 5,
            "revision": "243e6cf092c5519cf091923d700c97a6a3f33459",
            "parents": [
                "2c188082686337336dd73bcc5ffd52fe5392d190"
            ],
            "ref": "refs/changes/46/72946/5",
            "uploader": {
                "name": "Ian Chien",
                "email": "ianchien.wiwynn@gmail.com",
                "username": "Ian-I-Chien"
            },
            "createdOn": 1722002463,
            "author": {
                "name": "Ian Chien",
                "email": "ianchien.wiwynn@gmail.com",
                "username": "Ian-I-Chien"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ian Chien",
                        "email": "ianchien.wiwynn@gmail.com",
                        "username": "Ian-I-Chien"
                    },
                    "message": "Fixed the merge conflict and updated. Thanks!"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 15,
                    "deletions": 0
                },
                {
                    "file": "configurations/yosemite4_fanboard_fsc_max.json",
                    "type": "DELETED",
                    "insertions": 0,
                    "deletions": -891
                },
                {
                    "file": "configurations/yosemite4_fanboard_adc_ti.json",
                    "type": "DELETED",
                    "insertions": 0,
                    "deletions": -509
                },
                {
                    "file": "configurations/yosemite4_fanboard_fsc_nct.json",
                    "type": "DELETED",
                    "insertions": 0,
                    "deletions": -891
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 0,
                    "deletions": -3
                },
                {
                    "file": "configurations/yosemite4_fanboard_fsc_max_adc_ti.json",
                    "type": "MODIFIED",
                    "insertions": 1,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 16,
            "sizeDeletions": 2295
        }
    ]
}