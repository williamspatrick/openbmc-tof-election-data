{
    "project": "openbmc/x86-power-control",
    "branch": "master",
    "id": "I50df3e604401b4afd43fa89a0709466bbf01638b",
    "number": 72578,
    "subject": "x86-power-control: add passthrough option",
    "owner": {
        "name": "Renze Nicolai",
        "email": "info@renzenicolai.nl",
        "username": "renzenicolai"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/x86-power-control/+/72578",
    "hashtags": [],
    "createdOn": 1720047105,
    "lastUpdated": 1724103929,
    "open": true,
    "status": "NEW",
    "comments": [
        {
            "timestamp": 1720047105,
            "reviewer": {
                "name": "Renze Nicolai",
                "email": "info@renzenicolai.nl",
                "username": "renzenicolai"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1720047127,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1720047127,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1720047489,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/87267/ : FAILURE"
        },
        {
            "timestamp": 1720047573,
            "reviewer": {
                "name": "Renze Nicolai",
                "email": "info@renzenicolai.nl",
                "username": "renzenicolai"
            },
            "message": "Patch Set 1:\n\n(1 comment)"
        },
        {
            "timestamp": 1720048045,
            "reviewer": {
                "name": "Renze Nicolai",
                "email": "info@renzenicolai.nl",
                "username": "renzenicolai"
            },
            "message": "Uploaded patch set 2: Commit message was updated.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1720048057,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1720048057,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1720048436,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/87270/ : FAILURE"
        },
        {
            "timestamp": 1720048508,
            "reviewer": {
                "name": "Renze Nicolai",
                "email": "info@renzenicolai.nl",
                "username": "renzenicolai"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1720048542,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1720048542,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1720048759,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/87271/ : SUCCESS"
        },
        {
            "timestamp": 1720818005,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 3:\n\n(5 comments)"
        },
        {
            "timestamp": 1724066613,
            "reviewer": {
                "name": "Renze Nicolai",
                "email": "info@renzenicolai.nl",
                "username": "renzenicolai"
            },
            "message": "Uploaded patch set 4.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1724068387,
            "reviewer": {
                "name": "Renze Nicolai",
                "email": "info@renzenicolai.nl",
                "username": "renzenicolai"
            },
            "message": "Uploaded patch set 5: New patch set was added with same tree, parent tree, and commit message as Patch Set 4."
        },
        {
            "timestamp": 1724068527,
            "reviewer": {
                "name": "Renze Nicolai",
                "email": "info@renzenicolai.nl",
                "username": "renzenicolai"
            },
            "message": "Uploaded patch set 6."
        },
        {
            "timestamp": 1724068795,
            "reviewer": {
                "name": "Renze Nicolai",
                "email": "info@renzenicolai.nl",
                "username": "renzenicolai"
            },
            "message": "Patch Set 6:\n\n(6 comments)"
        },
        {
            "timestamp": 1724070915,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1724070915,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: -Ok-To-Test"
        },
        {
            "timestamp": 1724071350,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/90026/ : FAILURE"
        },
        {
            "timestamp": 1724102671,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 6:\n\n(2 comments)"
        },
        {
            "timestamp": 1724103178,
            "reviewer": {
                "name": "Renze Nicolai",
                "email": "info@renzenicolai.nl",
                "username": "renzenicolai"
            },
            "message": "Uploaded patch set 7.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1724103214,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1724103214,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: -Ok-To-Test"
        },
        {
            "timestamp": 1724103229,
            "reviewer": {
                "name": "Renze Nicolai",
                "email": "info@renzenicolai.nl",
                "username": "renzenicolai"
            },
            "message": "Patch Set 6:\n\n(2 comments)"
        },
        {
            "timestamp": 1724103233,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/90066/ : FAILURE"
        },
        {
            "timestamp": 1724103925,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1724103929,
            "reviewer": {
                "name": "Jason Bills",
                "email": "jason.m.bills@linux.intel.com",
                "username": "jmbills"
            },
            "message": "Patch Set 7: Code-Review+1"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "2ab283adcc565516f06f8ba1fbc9e172e16f876f",
            "parents": [
                "1cc7921fb3229ee61c3162c2b6cbc8db1231cb34"
            ],
            "ref": "refs/changes/78/72578/1",
            "uploader": {
                "name": "Renze Nicolai",
                "email": "info@renzenicolai.nl",
                "username": "renzenicolai"
            },
            "createdOn": 1720047105,
            "author": {
                "name": "Renze Nicolai",
                "email": "info@renzenicolai.nl",
                "username": "renzenicolai"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Renze Nicolai",
                        "email": "info@renzenicolai.nl",
                        "username": "renzenicolai"
                    },
                    "message": "Hello Zev,\n\nThe Asrock-Rack X570D4U connects it's power and reset buttons to GPIOs of the AST2500 and emulates button presses to the host via control output GPIOs.\n\nWithout this change power and reset button events only register an expected change but the events themselves are not acted upon.\n\nThis merge request adds two methods for acting on button presses.\n\nThe first method is an indirect method where pressing the power and reset buttons results in events being generated. This allows for control over the power state via the buttons. But a slight delay is noticeable especially for the long-press force power-off action where after holding the button for 5 seconds the BMC emulates a long press via the control output, resulting in a noticable delay.\n\nThe second method is a direct method where changes to the state of the power and reset buttons are directly passed through onto the control outputs. This results in the behavior people expect the physical power and reset buttons to have.\n\nI'd love to hear your opinion on this change and the methods used.\n\nBest regards,\nRenze Nicolai"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "meson.options",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "src/power_control.cpp",
                    "type": "MODIFIED",
                    "insertions": 112,
                    "deletions": -10
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 139,
            "sizeDeletions": 10
        },
        {
            "number": 2,
            "revision": "742ebc85b171206e88c90353166cf9753a8e6aae",
            "parents": [
                "1cc7921fb3229ee61c3162c2b6cbc8db1231cb34"
            ],
            "ref": "refs/changes/78/72578/2",
            "uploader": {
                "name": "Renze Nicolai",
                "email": "info@renzenicolai.nl",
                "username": "renzenicolai"
            },
            "createdOn": 1720048045,
            "author": {
                "name": "Renze Nicolai",
                "email": "info@renzenicolai.nl",
                "username": "renzenicolai"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "meson.options",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "src/power_control.cpp",
                    "type": "MODIFIED",
                    "insertions": 112,
                    "deletions": -10
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 139,
            "sizeDeletions": 10
        },
        {
            "number": 3,
            "revision": "5f0b93c63e5a8000a2c5ed3c89b506bb9b6d9433",
            "parents": [
                "1cc7921fb3229ee61c3162c2b6cbc8db1231cb34"
            ],
            "ref": "refs/changes/78/72578/3",
            "uploader": {
                "name": "Renze Nicolai",
                "email": "info@renzenicolai.nl",
                "username": "renzenicolai"
            },
            "createdOn": 1720048508,
            "author": {
                "name": "Renze Nicolai",
                "email": "info@renzenicolai.nl",
                "username": "renzenicolai"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "src/power_control.cpp",
                    "line": 2066,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "It looks okay, but it may be nice if the configuration options left this behavior unchanged by default."
                },
                {
                    "file": "src/power_control.cpp",
                    "line": 2066,
                    "reviewer": {
                        "name": "Renze Nicolai",
                        "email": "info@renzenicolai.nl",
                        "username": "renzenicolai"
                    },
                    "message": "Done"
                },
                {
                    "file": "src/power_control.cpp",
                    "line": 793,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "It might be useful to log the duration here that is used to determine it was a long press."
                },
                {
                    "file": "src/power_control.cpp",
                    "line": 793,
                    "reviewer": {
                        "name": "Renze Nicolai",
                        "email": "info@renzenicolai.nl",
                        "username": "renzenicolai"
                    },
                    "message": "Done"
                },
                {
                    "file": "src/power_control.cpp",
                    "line": 2099,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "This would be good to add to the timing parameters in the config file."
                },
                {
                    "file": "src/power_control.cpp",
                    "line": 2099,
                    "reviewer": {
                        "name": "Renze Nicolai",
                        "email": "info@renzenicolai.nl",
                        "username": "renzenicolai"
                    },
                    "message": "Done"
                },
                {
                    "file": "src/power_control.cpp",
                    "line": 2111,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "This needs to be lowerCamelCase."
                },
                {
                    "file": "src/power_control.cpp",
                    "line": 2111,
                    "reviewer": {
                        "name": "Renze Nicolai",
                        "email": "info@renzenicolai.nl",
                        "username": "renzenicolai"
                    },
                    "message": "Done"
                },
                {
                    "file": "src/power_control.cpp",
                    "line": 2134,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "You can `return;` here and remove the `else`"
                },
                {
                    "file": "src/power_control.cpp",
                    "line": 2134,
                    "reviewer": {
                        "name": "Renze Nicolai",
                        "email": "info@renzenicolai.nl",
                        "username": "renzenicolai"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 17,
                    "deletions": 0
                },
                {
                    "file": "meson.options",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": 0
                },
                {
                    "file": "src/power_control.cpp",
                    "type": "MODIFIED",
                    "insertions": 131,
                    "deletions": -11
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 158,
            "sizeDeletions": 11
        },
        {
            "number": 4,
            "revision": "568392ab3d3423b7110f2fbe981a6f195c9f277a",
            "parents": [
                "1cc7921fb3229ee61c3162c2b6cbc8db1231cb34"
            ],
            "ref": "refs/changes/78/72578/4",
            "uploader": {
                "name": "Renze Nicolai",
                "email": "info@renzenicolai.nl",
                "username": "renzenicolai"
            },
            "createdOn": 1724066613,
            "author": {
                "name": "Renze Nicolai",
                "email": "info@renzenicolai.nl",
                "username": "renzenicolai"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "meson.options",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                },
                {
                    "file": "src/power_control.cpp",
                    "type": "MODIFIED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 41,
            "sizeDeletions": 0
        },
        {
            "number": 5,
            "revision": "b80249c9aaca14baebc9b394b98e53bbc1f72ba4",
            "parents": [
                "1cc7921fb3229ee61c3162c2b6cbc8db1231cb34"
            ],
            "ref": "refs/changes/78/72578/5",
            "uploader": {
                "name": "Renze Nicolai",
                "email": "info@renzenicolai.nl",
                "username": "renzenicolai"
            },
            "createdOn": 1724068387,
            "author": {
                "name": "Renze Nicolai",
                "email": "info@renzenicolai.nl",
                "username": "renzenicolai"
            },
            "kind": "NO_CHANGE",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Renze Nicolai",
                        "email": "info@renzenicolai.nl",
                        "username": "renzenicolai"
                    },
                    "message": "I've removed the indirect mode as I only need the direct mode for the X570D4U and this minimizes the changes required."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "meson.options",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                },
                {
                    "file": "src/power_control.cpp",
                    "type": "MODIFIED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 41,
            "sizeDeletions": 0
        },
        {
            "number": 6,
            "revision": "db00f7cd3bf7307e6601a33871441d1048f118c0",
            "parents": [
                "1cc7921fb3229ee61c3162c2b6cbc8db1231cb34"
            ],
            "ref": "refs/changes/78/72578/6",
            "uploader": {
                "name": "Renze Nicolai",
                "email": "info@renzenicolai.nl",
                "username": "renzenicolai"
            },
            "createdOn": 1724068527,
            "author": {
                "name": "Renze Nicolai",
                "email": "info@renzenicolai.nl",
                "username": "renzenicolai"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "Looks great.  One minor nitpick, and it's good for me."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Renze Nicolai",
                        "email": "info@renzenicolai.nl",
                        "username": "renzenicolai"
                    },
                    "message": "Awesome, thank you."
                },
                {
                    "file": "src/power_control.cpp",
                    "line": 2069,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "This needs to be lowerCamelCase"
                },
                {
                    "file": "src/power_control.cpp",
                    "line": 2069,
                    "reviewer": {
                        "name": "Renze Nicolai",
                        "email": "info@renzenicolai.nl",
                        "username": "renzenicolai"
                    },
                    "message": "Changed!"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "meson.options",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                },
                {
                    "file": "src/power_control.cpp",
                    "type": "MODIFIED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 39,
            "sizeDeletions": 0
        },
        {
            "number": 7,
            "revision": "af42959a32dc9c0628b120ca606cc8858bdc2c30",
            "parents": [
                "1cc7921fb3229ee61c3162c2b6cbc8db1231cb34"
            ],
            "ref": "refs/changes/78/72578/7",
            "uploader": {
                "name": "Renze Nicolai",
                "email": "info@renzenicolai.nl",
                "username": "renzenicolai"
            },
            "createdOn": 1724103178,
            "author": {
                "name": "Renze Nicolai",
                "email": "info@renzenicolai.nl",
                "username": "renzenicolai"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Jason Bills",
                        "email": "jason.m.bills@linux.intel.com",
                        "username": "jmbills"
                    },
                    "message": "Looks good to me.  I'll leave it for a day or so in case others have feedback."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "meson.options",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": 0
                },
                {
                    "file": "src/power_control.cpp",
                    "type": "MODIFIED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 39,
            "sizeDeletions": 0
        }
    ]
}