{
    "project": "openbmc/dbus-sensors",
    "branch": "master",
    "id": "Ic8a2cf6e261da27d83782211bec2664805bece89",
    "number": 69292,
    "subject": "Fix for PSU sensor readings",
    "owner": {
        "name": "Jayaprakash Mutyala",
        "email": "mutyalax.jayaprakash@intel.com",
        "username": "jayaprakashmutyala"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/69292",
    "hashtags": [],
    "createdOn": 1707401077,
    "lastUpdated": 1707500208,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1707401077,
            "reviewer": {
                "name": "Jayaprakash Mutyala",
                "email": "mutyalax.jayaprakash@intel.com",
                "username": "jayaprakashmutyala"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1707401120,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1707401120,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1707401208,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/78994/ : FAILURE"
        },
        {
            "timestamp": 1707401406,
            "reviewer": {
                "name": "Jayaprakash Mutyala",
                "email": "mutyalax.jayaprakash@intel.com",
                "username": "jayaprakashmutyala"
            },
            "message": "Uploaded patch set 2.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1707401424,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1707401424,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1707401532,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/78995/ : FAILURE"
        },
        {
            "timestamp": 1707403804,
            "reviewer": {
                "name": "Meghan Saitwal",
                "email": "meghan.saitwal@intel.com",
                "username": "msaitwal"
            },
            "message": "Patch Set 2:\n\n(4 comments)"
        },
        {
            "timestamp": 1707404912,
            "reviewer": {
                "name": "Meghan Saitwal",
                "email": "meghan.saitwal@intel.com",
                "username": "msaitwal"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1707405132,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1707406361,
            "reviewer": {
                "name": "Meghan Saitwal",
                "email": "meghan.saitwal@intel.com",
                "username": "msaitwal"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1707418730,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 2: Code-Review-1"
        },
        {
            "timestamp": 1707442363,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1707472527,
            "reviewer": {
                "name": "Jayaprakash Mutyala",
                "email": "mutyalax.jayaprakash@intel.com",
                "username": "jayaprakashmutyala"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1707500208,
            "reviewer": {
                "name": "Zhikui Ren",
                "email": "zhikui.ren@intel.com",
                "username": "ZhikuiRen"
            },
            "message": "Abandoned\n\nAbandon base on last comment in review"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "b90d751fc5d4e0f5177b27d66363ce5ef7a6b4c7",
            "parents": [
                "16d6f17bec38b6c095dfb6bed224f17d941fb9b3"
            ],
            "ref": "refs/changes/92/69292/1",
            "uploader": {
                "name": "Jayaprakash Mutyala",
                "email": "mutyalax.jayaprakash@intel.com",
                "username": "jayaprakashmutyala"
            },
            "createdOn": 1707401077,
            "author": {
                "name": "Jayaprakash Mutyala",
                "email": "mutyalax.jayaprakash@intel.com",
                "username": "jayaprakashmutyala"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "src/PSUSensor.cpp",
                    "type": "MODIFIED",
                    "insertions": 7,
                    "deletions": -5
                },
                {
                    "file": "src/PSUSensor.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 32,
            "sizeDeletions": 9
        },
        {
            "number": 2,
            "revision": "dfa03746698822bf541d4374465508195c20221e",
            "parents": [
                "16d6f17bec38b6c095dfb6bed224f17d941fb9b3"
            ],
            "ref": "refs/changes/92/69292/2",
            "uploader": {
                "name": "Jayaprakash Mutyala",
                "email": "mutyalax.jayaprakash@intel.com",
                "username": "jayaprakashmutyala"
            },
            "createdOn": 1707401406,
            "author": {
                "name": "Jayaprakash Mutyala",
                "email": "mutyalax.jayaprakash@intel.com",
                "username": "jayaprakashmutyala"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Meghan Saitwal",
                        "email": "meghan.saitwal@intel.com",
                        "username": "msaitwal"
                    },
                    "message": "Could you explain why?"
                },
                {
                    "file": "/COMMIT_MSG",
                    "line": 9,
                    "reviewer": {
                        "name": "Meghan Saitwal",
                        "email": "meghan.saitwal@intel.com",
                        "username": "msaitwal"
                    },
                    "message": "How longer you mean? day or weeks?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "let\u2019s get more details on what this patch thinks it\u2019s fixing.  it\u2019s possible changing these to volatile changes some optimizations enough that it LOOKS like it fixed a bug, but really it just moved the bug somewhere else.\n\nwe\u2019re not accessing memory attached hardware here, so there\u2019s no reason we should be using volatile.  for multi threading we should be using std::atomic, but this application isn\u2019t multi threaded, so I\u2019m not really sure where to go from here without more details."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Meghan Saitwal",
                        "email": "meghan.saitwal@intel.com",
                        "username": "msaitwal"
                    },
                    "message": "+1"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Zhikui Ren",
                        "email": "zhikui.ren@intel.com",
                        "username": "ZhikuiRen"
                    },
                    "message": "Agreed. There was an issue with the old async read call get stuck. But that issue was addressed by using io_uring. How do you know that sensor value is not getting updated and what do you think the reason is?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Jayaprakash Mutyala",
                        "email": "mutyalax.jayaprakash@intel.com",
                        "username": "jayaprakashmutyala"
                    },
                    "message": "Acknowledged"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Jayaprakash Mutyala",
                        "email": "mutyalax.jayaprakash@intel.com",
                        "username": "jayaprakashmutyala"
                    },
                    "message": "Thanks for the review comments. Working other way to fix this issue."
                },
                {
                    "file": "src/PSUSensor.cpp",
                    "line": 46,
                    "reviewer": {
                        "name": "Meghan Saitwal",
                        "email": "meghan.saitwal@intel.com",
                        "username": "msaitwal"
                    },
                    "message": "sensor factor also varies over time?"
                },
                {
                    "file": "src/PSUSensor.cpp",
                    "line": 223,
                    "reviewer": {
                        "name": "Meghan Saitwal",
                        "email": "meghan.saitwal@intel.com",
                        "username": "msaitwal"
                    },
                    "message": "Is it necessary to have intermediate variable? can't we have rawValue as volatile?"
                },
                {
                    "file": "src/PSUSensor.hpp",
                    "line": 26,
                    "reviewer": {
                        "name": "Meghan Saitwal",
                        "email": "meghan.saitwal@intel.com",
                        "username": "msaitwal"
                    },
                    "message": "Use of volatile function parameters is deprecated from C++20."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 21,
                    "deletions": 0
                },
                {
                    "file": "src/PSUSensor.cpp",
                    "type": "MODIFIED",
                    "insertions": 6,
                    "deletions": -4
                },
                {
                    "file": "src/PSUSensor.hpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -4
                }
            ],
            "sizeInsertions": 31,
            "sizeDeletions": 8
        }
    ]
}