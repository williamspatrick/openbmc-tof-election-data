{
    "project": "openbmc/phosphor-state-manager",
    "branch": "master",
    "id": "I90a22f1e93293300265e8df46c7b1006d3a61fb8",
    "number": 70104,
    "subject": "state_manager: add command event log",
    "owner": {
        "name": "PeterYinGit",
        "email": "peter.yin@quantatw.com",
        "username": "PeterYinGit"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-state-manager/+/70104",
    "hashtags": [],
    "createdOn": 1710837981,
    "lastUpdated": 1713338617,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1710837981,
            "reviewer": {
                "name": "PeterYinGit",
                "email": "peter.yin@quantatw.com",
                "username": "PeterYinGit"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1710838010,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1710838010,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1710838026,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/80855/ : FAILURE"
        },
        {
            "timestamp": 1710839135,
            "reviewer": {
                "name": "PeterYinGit",
                "email": "peter.yin@quantatw.com",
                "username": "PeterYinGit"
            },
            "message": "Patch Set 2: Commit message was updated.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1710839166,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1710839166,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1710839248,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/80856/ : FAILURE"
        },
        {
            "timestamp": 1710854854,
            "reviewer": {
                "name": "PeterYinGit",
                "email": "peter.yin@quantatw.com",
                "username": "PeterYinGit"
            },
            "message": "Uploaded patch set 3.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1710854891,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1710854891,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1710854907,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/80864/ : FAILURE"
        },
        {
            "timestamp": 1710855011,
            "reviewer": {
                "name": "PeterYinGit",
                "email": "peter.yin@quantatw.com",
                "username": "PeterYinGit"
            },
            "message": "Uploaded patch set 4.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1710855021,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1710855021,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: -Ok-To-Test"
        },
        {
            "timestamp": 1710855173,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/80865/ : SUCCESS"
        },
        {
            "timestamp": 1710855325,
            "reviewer": {
                "name": "PeterYinGit",
                "email": "peter.yin@quantatw.com",
                "username": "PeterYinGit"
            },
            "message": "Patch Set 4:\n\nThis change is ready for review."
        },
        {
            "timestamp": 1710972598,
            "reviewer": {
                "name": "Andrew Geissler",
                "email": "geissonator@yahoo.com",
                "username": "geissonator"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1710984719,
            "reviewer": {
                "name": "PeterYinGit",
                "email": "peter.yin@quantatw.com",
                "username": "PeterYinGit"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1710987591,
            "reviewer": {
                "name": "PeterYinGit",
                "email": "peter.yin@quantatw.com",
                "username": "PeterYinGit"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1710987890,
            "reviewer": {
                "name": "PeterYinGit",
                "email": "peter.yin@quantatw.com",
                "username": "PeterYinGit"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1710988129,
            "reviewer": {
                "name": "PeterYinGit",
                "email": "peter.yin@quantatw.com",
                "username": "PeterYinGit"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1710988932,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 4: Code-Review-1\n\n(1 comment)"
        },
        {
            "timestamp": 1711445981,
            "reviewer": {
                "name": "PeterYinGit",
                "email": "peter.yin@quantatw.com",
                "username": "PeterYinGit"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1711485475,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1712078145,
            "reviewer": {
                "name": "PeterYinGit",
                "email": "peter.yin@quantatw.com",
                "username": "PeterYinGit"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1712078899,
            "reviewer": {
                "name": "Patrick Williams",
                "email": "patrick@stwcx.xyz",
                "username": "williamspatrick"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1712496671,
            "reviewer": {
                "name": "PeterYinGit",
                "email": "peter.yin@quantatw.com",
                "username": "PeterYinGit"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1712497357,
            "reviewer": {
                "name": "PeterYinGit",
                "email": "peter.yin@quantatw.com",
                "username": "PeterYinGit"
            },
            "message": "Patch Set 4:\n\n(1 comment)"
        },
        {
            "timestamp": 1713338617,
            "reviewer": {
                "name": "PeterYinGit",
                "email": "peter.yin@quantatw.com",
                "username": "PeterYinGit"
            },
            "message": "Abandoned"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "027f39ceb30cfd722b9477c18c1e1b2af98fd72a",
            "parents": [
                "06356e48e5316bf484819e83a7b2c21326053b5f"
            ],
            "ref": "refs/changes/04/70104/1",
            "uploader": {
                "name": "PeterYinGit",
                "email": "peter.yin@quantatw.com",
                "username": "PeterYinGit"
            },
            "createdOn": 1710837981,
            "author": {
                "name": "PeterYinGit",
                "email": "peter.yin@quantatw.com",
                "username": "PeterYinGit"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "host_state_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 47,
                    "deletions": 0
                },
                {
                    "file": "chassis_state_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 38,
                    "deletions": 0
                },
                {
                    "file": "host_state_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": 0
                },
                {
                    "file": "chassis_state_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 111,
            "sizeDeletions": 0
        },
        {
            "number": 2,
            "revision": "7516601e222a7b98d6c9cf55be2552bde46f2445",
            "parents": [
                "06356e48e5316bf484819e83a7b2c21326053b5f"
            ],
            "ref": "refs/changes/04/70104/2",
            "uploader": {
                "name": "PeterYinGit",
                "email": "peter.yin@quantatw.com",
                "username": "PeterYinGit"
            },
            "createdOn": 1710839135,
            "author": {
                "name": "PeterYinGit",
                "email": "peter.yin@quantatw.com",
                "username": "PeterYinGit"
            },
            "kind": "NO_CODE_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "host_state_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 47,
                    "deletions": 0
                },
                {
                    "file": "chassis_state_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 38,
                    "deletions": 0
                },
                {
                    "file": "host_state_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": 0
                },
                {
                    "file": "chassis_state_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 111,
            "sizeDeletions": 0
        },
        {
            "number": 3,
            "revision": "f4e3455bbf12cd2c0ff5ef64ab2520109c46a2e5",
            "parents": [
                "06356e48e5316bf484819e83a7b2c21326053b5f"
            ],
            "ref": "refs/changes/04/70104/3",
            "uploader": {
                "name": "PeterYinGit",
                "email": "peter.yin@quantatw.com",
                "username": "PeterYinGit"
            },
            "createdOn": 1710854854,
            "author": {
                "name": "PeterYinGit",
                "email": "peter.yin@quantatw.com",
                "username": "PeterYinGit"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "host_state_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 44,
                    "deletions": 0
                },
                {
                    "file": "chassis_state_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 37,
                    "deletions": 0
                },
                {
                    "file": "host_state_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": 0
                },
                {
                    "file": "chassis_state_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 107,
            "sizeDeletions": 0
        },
        {
            "number": 4,
            "revision": "ae2eb680a0bd8ad02984d2ceb82d634d1f28a091",
            "parents": [
                "06356e48e5316bf484819e83a7b2c21326053b5f"
            ],
            "ref": "refs/changes/04/70104/4",
            "uploader": {
                "name": "PeterYinGit",
                "email": "peter.yin@quantatw.com",
                "username": "PeterYinGit"
            },
            "createdOn": 1710855011,
            "author": {
                "name": "PeterYinGit",
                "email": "peter.yin@quantatw.com",
                "username": "PeterYinGit"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Andrew Geissler",
                        "email": "geissonator@yahoo.com",
                        "username": "geissonator"
                    },
                    "message": "I'm not sure I'm really sold on this one. We did add https://github.com/openbmc/phosphor-state-manager/blob/master/service_files/phosphor-create-chassis-poweron-log%40.service at one point to log the chassis power on since that seemed to be a common use case but I'm not all that interested in my system logging all of these logs (I just look at the journal). Is the journal not good enough?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "PeterYinGit",
                        "email": "peter.yin@quantatw.com",
                        "username": "PeterYinGit"
                    },
                    "message": "Hi Andrew,\nThe journal is good, but it can't be remain after BMC reboot or power cycle, Can we add it in meson options?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "PeterYinGit",
                        "email": "peter.yin@quantatw.com",
                        "username": "PeterYinGit"
                    },
                    "message": "Hi Patrick,\n  Do you have any concern if we only"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "PeterYinGit",
                        "email": "peter.yin@quantatw.com",
                        "username": "PeterYinGit"
                    },
                    "message": "Hi Patrick,\n   Do you have any concerns about it if we don't have command event logs?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "PeterYinGit",
                        "email": "peter.yin@quantatw.com",
                        "username": "PeterYinGit"
                    },
                    "message": "> Hi Patrick,\n>    Do you have any concerns about it if we don't have command event logs?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "@Peter, please don't add dbus calls for phosphor-logging directly in code.  If there is an event you'd like to see, let's discuss it and then get it added to phosphor-dbus-interfaces first (and get buy in from the maintainers)."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "PeterYinGit",
                        "email": "peter.yin@quantatw.com",
                        "username": "PeterYinGit"
                    },
                    "message": "Hi Patrick,\n   Can you provide me with a sample for an existing D-Bus interface?"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "The phosphor-logging `report` APIs are used for posting an event to the log.  See https://github.com/openbmc/phosphor-state-manager/blob/73d7ad0016be0881fc377098fb21b0a33626d041/chassis_state_manager.cpp#L160 as an example."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "PeterYinGit",
                        "email": "peter.yin@quantatw.com",
                        "username": "PeterYinGit"
                    },
                    "message": "Hi Patrick,\n  I added PowerCycleLog to \"yaml/xyz/openbmc_project/State/Chassis.errors.yaml,\" and the log displays as xyz.openbmc_project.State.Chassis.Error.PowerCycleLog. Is there a method to remove the \"Error\" string, as it is a command log and not an error log?\n  \n  \n\"Severity\" : {\n    \"type\" : \"s\",\n    \"data\" : \"xyz.openbmc_project.Logging.Entry.Level.Informational\"\n    },\n\"Message\" : {\n    \"type\" : \"s\",\n    \"data\" : \"xyz.openbmc_project.State.Chassis.Error.PowerCycleLog\"\n   }\n\t\t\t},"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Patrick Williams",
                        "email": "patrick@stwcx.xyz",
                        "username": "williamspatrick"
                    },
                    "message": "Not currently.  There should be in the near future.  Keep this as something we need to fix in the future."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "PeterYinGit",
                        "email": "peter.yin@quantatw.com",
                        "username": "PeterYinGit"
                    },
                    "message": "Hi Patrick/Andrew,\nI want to add debus interface in Chassis.errors.yaml\nxyz.openbmc_project.State.Chassis.Error.PowerOff\nxyz.openbmc_project.State.Chassis.Error.PowerCycleLog\n\nand Host.error.yaml\nxyz.openbmc_project.State.Host.Error.PowerOn\nxyz.openbmc_project.State.Host.Error.PowerOff"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "PeterYinGit",
                        "email": "peter.yin@quantatw.com",
                        "username": "PeterYinGit"
                    },
                    "message": "Hi Patrick/Andrew,\n\nI want to add dbus in Chassis.errors.yaml\nxyz.openbmc_project.State.Chassis.Error.PowerOff\nxyz.openbmc_project.State.Chassis.Error.PowerCycleLog\n \nand Host.error.yaml\nxyz.openbmc_project.State.Host.Error.PowerOn\nxyz.openbmc_project.State.Host.Error.PowerOff\nxyz.openbmc_project.State.Host.Error.PowerCycle\nxyz.openbmc_project.State.Host.Error.ForceRestart\nxyz.openbmc_project.State.Host.Error.GracefulRestart\n\nDo you have any concerns about the format or any other suggestions?"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 14,
                    "deletions": 0
                },
                {
                    "file": "host_state_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 44,
                    "deletions": 0
                },
                {
                    "file": "chassis_state_manager.cpp",
                    "type": "MODIFIED",
                    "insertions": 37,
                    "deletions": 0
                },
                {
                    "file": "host_state_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 9,
                    "deletions": 0
                },
                {
                    "file": "chassis_state_manager.hpp",
                    "type": "MODIFIED",
                    "insertions": 3,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 107,
            "sizeDeletions": 0
        }
    ]
}