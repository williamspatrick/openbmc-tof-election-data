{
    "project": "openbmc/intel-ipmi-oem",
    "branch": "master",
    "id": "If6e6b2b46dcf7a1b425babef3e889fb7b6e29947",
    "number": 41458,
    "subject": "storagecommands: use object path as device name",
    "owner": {
        "name": "Willy Tu",
        "email": "wltu@google.com",
        "username": "wltu"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/intel-ipmi-oem/+/41458",
    "hashtags": [],
    "createdOn": 1616315379,
    "lastUpdated": 1718880371,
    "open": false,
    "status": "ABANDONED",
    "comments": [
        {
            "timestamp": 1616315379,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1616315391,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1616315531,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Uploaded patch set 2."
        },
        {
            "timestamp": 1616315546,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1616315550,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/14086/ : ABORTED"
        },
        {
            "timestamp": 1616315752,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Uploaded patch set 3: Commit message was updated."
        },
        {
            "timestamp": 1616316047,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/14087/ : SUCCESS"
        },
        {
            "timestamp": 1616435707,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(5 comments)"
        },
        {
            "timestamp": 1616435883,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 3:\n\n(1 comment)\n\nOverall, is this something that should get stacked on top of your ipmi-dynamic patch?"
        },
        {
            "timestamp": 1616477980,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Uploaded patch set 4."
        },
        {
            "timestamp": 1616477991,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1616478000,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 3:\n\n(5 comments)\n\n> Patch Set 3:\n> \n> (1 comment)\n> \n> Overall, is this something that should get stacked on top of your ipmi-dynamic patch?\n\nYeah, I think we should also have this as part of or on top of https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-host-ipmid/+/40201. Do we want to add new changes as part of that change? or separately to help keep track of the change.\n\nAlso, I just thought that we should also have this change in intel-ipmi-oem?"
        },
        {
            "timestamp": 1616478448,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 4: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/14211/ : SUCCESS"
        },
        {
            "timestamp": 1616519944,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Uploaded patch set 5."
        },
        {
            "timestamp": 1616519970,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1616520439,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 5: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/14248/ : SUCCESS"
        },
        {
            "timestamp": 1616520603,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 5:\n\n(1 comment)"
        },
        {
            "timestamp": 1616526524,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 5:\n\n(2 comments)"
        },
        {
            "timestamp": 1616540899,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Uploaded patch set 6."
        },
        {
            "timestamp": 1616540913,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1616540933,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 6:\n\n(2 comments)"
        },
        {
            "timestamp": 1616541167,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 6: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/14256/ : SUCCESS"
        },
        {
            "timestamp": 1617835129,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 7: Patch Set 6 was rebased"
        },
        {
            "timestamp": 1617835149,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1617836128,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 7: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/15001/ : SUCCESS"
        },
        {
            "timestamp": 1617839429,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 7:\n\n(1 comment)"
        },
        {
            "timestamp": 1617868290,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Uploaded patch set 8."
        },
        {
            "timestamp": 1617868305,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1617868370,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 8:\n\n(1 comment)"
        },
        {
            "timestamp": 1617868491,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 8: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/15047/ : FAILURE"
        },
        {
            "timestamp": 1617898655,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Uploaded patch set 9."
        },
        {
            "timestamp": 1617898667,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1617899229,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 9:\n\n(1 comment)"
        },
        {
            "timestamp": 1617899239,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 9: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/15131/ : SUCCESS"
        },
        {
            "timestamp": 1618189440,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Uploaded patch set 10."
        },
        {
            "timestamp": 1618189458,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 10: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1618189547,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 10:\n\n(1 comment)"
        },
        {
            "timestamp": 1618190074,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 10: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/15225/ : SUCCESS"
        },
        {
            "timestamp": 1618200378,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 10: Code-Review+1\n\n(1 comment)"
        },
        {
            "timestamp": 1619463579,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 10:\n\n(1 comment)"
        },
        {
            "timestamp": 1619463883,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Patch Set 10:\n\n(1 comment)"
        },
        {
            "timestamp": 1622012322,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 11: Patch Set 10 was rebased"
        },
        {
            "timestamp": 1622012356,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 11: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1622012394,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 11:\n\nDo we still want this change here?\n\nOr just have it phosphor-ipmi-hostd (dbus-sdr)."
        },
        {
            "timestamp": 1622012404,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 11: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/18121/ : FAILURE"
        },
        {
            "timestamp": 1622045086,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Uploaded patch set 12: New patch set was added with same tree, parent, and commit message as Patch Set 11."
        },
        {
            "timestamp": 1622045094,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 12: -Ok-To-Test"
        },
        {
            "timestamp": 1622045097,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 12: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1622045131,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 12:\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/18160/ : FAILURE"
        },
        {
            "timestamp": 1622045958,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 12:\n\nIs there an issue with the presubmit build?\n\nhttps://jenkins.openbmc.org/job/ci-repository/18160/console\n\nI was able to build it locally and I only rebased it with no changes."
        },
        {
            "timestamp": 1623018145,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Uploaded patch set 13: New patch set was added with same tree, parent, and commit message as Patch Set 12."
        },
        {
            "timestamp": 1623018155,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 13: -Ok-To-Test"
        },
        {
            "timestamp": 1623018159,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 13: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1623018194,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 13:\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/18828/ : FAILURE"
        },
        {
            "timestamp": 1623986272,
            "reviewer": {
                "name": "AppaRao Puli",
                "email": "apparao.puli@linux.intel.com",
                "username": "apuli1"
            },
            "message": "Patch Set 14: Patch Set 13 was rebased"
        },
        {
            "timestamp": 1623986283,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 14: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1623986555,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 14: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/20077/ : SUCCESS"
        },
        {
            "timestamp": 1625808967,
            "reviewer": {
                "name": "AppaRao Puli",
                "email": "apparao.puli@linux.intel.com",
                "username": "apuli1"
            },
            "message": "Patch Set 14: Code-Review+2"
        },
        {
            "timestamp": 1627671063,
            "reviewer": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "message": "Patch Set 14:\n\n(1 comment)"
        },
        {
            "timestamp": 1639113405,
            "reviewer": {
                "name": "Ed Tanous",
                "email": "ed@tanous.net",
                "username": "edtanous"
            },
            "message": "Removed reviewer Ed Tanous."
        },
        {
            "timestamp": 1718880371,
            "reviewer": {
                "name": "AppaRao Puli",
                "email": "apparao.puli@linux.intel.com",
                "username": "apuli1"
            },
            "message": "Abandoned"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "455d709609f4ac3935dcbff8d63fa44206cc96a3",
            "parents": [
                "06aa21ab75cecce354b2a17e05d053c6f61d6a29"
            ],
            "ref": "refs/changes/58/41458/1",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1616315379,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 40,
                    "deletions": 0
                },
                {
                    "file": "CMakeLists.txt",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": 0
                },
                {
                    "file": "src/storagecommands.cpp",
                    "type": "MODIFIED",
                    "insertions": 53,
                    "deletions": -14
                }
            ],
            "sizeInsertions": 98,
            "sizeDeletions": 14
        },
        {
            "number": 2,
            "revision": "f90142fd65670809d05f972fe49049ec36e03677",
            "parents": [
                "06aa21ab75cecce354b2a17e05d053c6f61d6a29"
            ],
            "ref": "refs/changes/58/41458/2",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1616315531,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 41,
                    "deletions": 0
                },
                {
                    "file": "CMakeLists.txt",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": 0
                },
                {
                    "file": "src/storagecommands.cpp",
                    "type": "MODIFIED",
                    "insertions": 53,
                    "deletions": -14
                }
            ],
            "sizeInsertions": 99,
            "sizeDeletions": 14
        },
        {
            "number": 3,
            "revision": "889012cac13526f381ff4a365e39d37e688ef9ff",
            "parents": [
                "06aa21ab75cecce354b2a17e05d053c6f61d6a29"
            ],
            "ref": "refs/changes/58/41458/3",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1616315752,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "CMakeLists.txt",
                    "line": 15,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Does this need to be configurable?  The only thing we're really changing is making escaped values work properly, right?"
                },
                {
                    "file": "CMakeLists.txt",
                    "line": 15,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "right. Is it expected that the name always be the escaped values? If so, we can also remove the other options?\n\nI was just thinking that maybe some people are dependent on the current setup.\n\nWe can also force them to switch to using the object path."
                },
                {
                    "file": "src/storagecommands.cpp",
                    "line": 665,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "nit: declare your variables where they're used."
                },
                {
                    "file": "src/storagecommands.cpp",
                    "line": 665,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "Done"
                },
                {
                    "file": "src/storagecommands.cpp",
                    "line": 667,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "If this is empty shouldn't this function return false?"
                },
                {
                    "file": "src/storagecommands.cpp",
                    "line": 667,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "Done.\n\nI am not even sure if it is possible to have an empty object path. Maybe we can force the entity manager to have that with this."
                },
                {
                    "file": "src/storagecommands.cpp",
                    "line": 671,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "use objectPath.filename() here to get the file, and objectPath.parentPath() to get the prefix.\n\nPart of me actually wonders if we could put the sd_bus_path_decode logic into the filename() method itself.  That seems much simpler.  It would mean filename would now give properly unescaped paths instead of escaped ones, but that seems unlikely to break anything, and better."
                },
                {
                    "file": "src/storagecommands.cpp",
                    "line": 671,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "Oh yeah, that would make more sense and covers other cases other than this repo.\n\nThe only issue I have is that it may have delays in getting the filename(). This will force all object path to have to go through the decode process every time it is create... It looks like each object path is created and not linked, so they will be forced to decode for every path even if some are the same. Is there a way to cache them like what we have here, but on a larger scale?\n\nJust for my reference: https://github.com/openbmc/sdbusplus/blob/4b646236df12b52205d2098ef985280190b358a7/include/sdbusplus/message/native_types.hpp#L144"
                },
                {
                    "file": "src/storagecommands.cpp",
                    "line": 671,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> Oh yeah, that would make more sense and covers other cases other than this repo.\n> \n> The only issue I have is that it may have delays in getting the filename(). This will force all object path to have to go through the decode process every time it is create... It looks like each object path is created and not linked, so they will be forced to decode for every path even if some are the same. Is there a way to cache them like what we have here, but on a larger scale?\n\nI would expect the decoding process to be pretty trivial cpu-wise.  I'm really not a fan of the caching behavior.  If we cache anything, we should be caching the full SDR, not just the decoded strings.  Considering the decode is significantly less CPU intensive than some of the string copies this file already does, I wouldn't expect any new performance issues here.\n\n> \n> Just for my reference: https://github.com/openbmc/sdbusplus/blob/4b646236df12b52205d2098ef985280190b358a7/include/sdbusplus/message/native_types.hpp#L144"
                },
                {
                    "file": "src/storagecommands.cpp",
                    "line": 671,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "Ack.\n\nI have removed the cache for the decode strings."
                },
                {
                    "file": "src/storagecommands.cpp",
                    "line": 682,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Is this variable needed?  Can we just use name here, and populate it through?  They look equivalent."
                },
                {
                    "file": "src/storagecommands.cpp",
                    "line": 682,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "Done.\n\nyeah, don't need it anymore. I think I wanted to do some check on the output first before setting it to name... but looks like no extra is needed."
                },
                {
                    "file": "src/storagecommands.cpp",
                    "line": 683,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "This method should return, right?\n\nPresumably if sd_bus_path_decode fails we shouldn't be freeing the string."
                },
                {
                    "file": "src/storagecommands.cpp",
                    "line": 683,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "Do we want to return false on failure or just not set the `name`?\n\nIf it fail, we can just use `BOARD_PRODUCT_NAME` or `PRODUCT_PRODUCT_NAME` as the name.?"
                },
                {
                    "file": "src/storagecommands.cpp",
                    "line": 683,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> Do we want to return false on failure or just not set the `name`?\n> \n\nI think so.\n\n> If it fail, we can just use `BOARD_PRODUCT_NAME` or `PRODUCT_PRODUCT_NAME` as the name.?\n\nConsidering that we don't expect this to fail, ever, considering we got the string from dbus that seems like it would be confusing behavior."
                },
                {
                    "file": "src/storagecommands.cpp",
                    "line": 683,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "Done"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 45,
                    "deletions": 0
                },
                {
                    "file": "CMakeLists.txt",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": 0
                },
                {
                    "file": "src/storagecommands.cpp",
                    "type": "MODIFIED",
                    "insertions": 53,
                    "deletions": -14
                }
            ],
            "sizeInsertions": 103,
            "sizeDeletions": 14
        },
        {
            "number": 4,
            "revision": "44c11cec971d80da9c87bffc6304d3f6882d2c36",
            "parents": [
                "06aa21ab75cecce354b2a17e05d053c6f61d6a29"
            ],
            "ref": "refs/changes/58/41458/4",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1616477980,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 45,
                    "deletions": 0
                },
                {
                    "file": "CMakeLists.txt",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": 0
                },
                {
                    "file": "src/storagecommands.cpp",
                    "type": "MODIFIED",
                    "insertions": 54,
                    "deletions": -14
                }
            ],
            "sizeInsertions": 104,
            "sizeDeletions": 14
        },
        {
            "number": 5,
            "revision": "2ec58fe1a81011cd6fe9332beec548f515a3b8c2",
            "parents": [
                "06aa21ab75cecce354b2a17e05d053c6f61d6a29"
            ],
            "ref": "refs/changes/58/41458/5",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1616519944,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 45,
                    "deletions": 0
                },
                {
                    "file": "CMakeLists.txt",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": 0
                },
                {
                    "file": "src/storagecommands.cpp",
                    "type": "MODIFIED",
                    "insertions": 52,
                    "deletions": -14
                }
            ],
            "sizeInsertions": 102,
            "sizeDeletions": 14
        },
        {
            "number": 6,
            "revision": "cfd468ba33d8467dc4ac417bad2367529c208cec",
            "parents": [
                "06aa21ab75cecce354b2a17e05d053c6f61d6a29"
            ],
            "ref": "refs/changes/58/41458/6",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1616540899,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 45,
                    "deletions": 0
                },
                {
                    "file": "CMakeLists.txt",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": 0
                },
                {
                    "file": "src/storagecommands.cpp",
                    "type": "MODIFIED",
                    "insertions": 40,
                    "deletions": -14
                }
            ],
            "sizeInsertions": 90,
            "sizeDeletions": 14
        },
        {
            "number": 7,
            "revision": "2eb6066bbee3c171019112fb15d3430ece09ddf2",
            "parents": [
                "9420416abe06d943301ab304044ed8001d49e315"
            ],
            "ref": "refs/changes/58/41458/7",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1617835129,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "src/storagecommands.cpp",
                    "line": 664,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "FYI, filename() will now give you the decoded version of the string automatically.  Sorry, I probably should've told you I was doing this, but it seemed like a better solution to stick it in sdbusplus, and I needed it in other places as well.\n\nI suspect this makes this patchset a lot smaller.\n\nhttps://github.com/openbmc/sdbusplus/commit/fa0fa3b0fa5a9d59c37b6edbc53cc21b7c2a16b0"
                },
                {
                    "file": "src/storagecommands.cpp",
                    "line": 664,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "no worries.\n\nI have cleaned up the code to just use filename() and just use the objectPath by default unless it is empty."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 45,
                    "deletions": 0
                },
                {
                    "file": "CMakeLists.txt",
                    "type": "MODIFIED",
                    "insertions": 5,
                    "deletions": 0
                },
                {
                    "file": "src/storagecommands.cpp",
                    "type": "MODIFIED",
                    "insertions": 40,
                    "deletions": -14
                }
            ],
            "sizeInsertions": 90,
            "sizeDeletions": 14
        },
        {
            "number": 8,
            "revision": "61201e27c58bc826d777a0462b9ce90ef0231c0e",
            "parents": [
                "9420416abe06d943301ab304044ed8001d49e315"
            ],
            "ref": "refs/changes/58/41458/8",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1617868290,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 42,
                    "deletions": 0
                },
                {
                    "file": "src/storagecommands.cpp",
                    "type": "MODIFIED",
                    "insertions": 21,
                    "deletions": -14
                }
            ],
            "sizeInsertions": 63,
            "sizeDeletions": 14
        },
        {
            "number": 9,
            "revision": "c5eb6642ae8d07f5544d421d62c3209e4cfba83e",
            "parents": [
                "9420416abe06d943301ab304044ed8001d49e315"
            ],
            "ref": "refs/changes/58/41458/9",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1617898655,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "src/storagecommands.cpp",
                    "line": 668,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Nit, this block should probably go on line 680, and reference entity->first.filename().  Technically std::find_if doesn't have any implied ordering, even though it might be linear today.  that would also allow you to:\n\n1. Not capture the name parameter by reference\n2. Declare the name param where you use it, which helps in readability."
                },
                {
                    "file": "src/storagecommands.cpp",
                    "line": 668,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "Done.\n\nI have cleaned up the code even more now. Although I still have to declare the name param before \n\n```\n#ifdef USING_ENTITY_MANAGER_DECORATORS\n```\n\nIt is kind of messing things up... kind of want to just remove it if we want to force everyone to use entity manager decorators.\n\n\n----\n\nBut I have simply set the name to \n```\nname = entity->first.filename();\n```\n\nand if it is empty, then the previous logic takes place."
                },
                {
                    "file": "src/storagecommands.cpp",
                    "line": 668,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "> Done.\n> \n> I have cleaned up the code even more now. Although I still have to declare the name param before \n> \n> ```\n> #ifdef USING_ENTITY_MANAGER_DECORATORS\n> ```\n> \n> It is kind of messing things up... kind of want to just remove it if we want to force everyone to use entity manager decorators.\n\nI'm not even sure why you would compile it out.  Vernon, do you remember any context here?\n\n> \n> \n> ----\n> \n> But I have simply set the name to \n> ```\n> name = entity->first.filename();\n> ```\n> \n> and if it is empty, then the previous logic takes place."
                },
                {
                    "file": "src/storagecommands.cpp",
                    "line": 668,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "I guess it's fine to leave it for now and clean it up with another patch if it is an issue?"
                },
                {
                    "file": "src/storagecommands.cpp",
                    "line": 668,
                    "reviewer": {
                        "name": "Ed Tanous",
                        "email": "ed@tanous.net",
                        "username": "edtanous"
                    },
                    "message": "Yep.  I'm fine with it."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 42,
                    "deletions": 0
                },
                {
                    "file": "src/storagecommands.cpp",
                    "type": "MODIFIED",
                    "insertions": 27,
                    "deletions": -14
                }
            ],
            "sizeInsertions": 69,
            "sizeDeletions": 14
        },
        {
            "number": 10,
            "revision": "ccdf63753a2f206410b52fba7fc57a2e3d65272e",
            "parents": [
                "9420416abe06d943301ab304044ed8001d49e315"
            ],
            "ref": "refs/changes/58/41458/10",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1618189440,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 42,
                    "deletions": 0
                },
                {
                    "file": "src/storagecommands.cpp",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": -15
                }
            ],
            "sizeInsertions": 65,
            "sizeDeletions": 15
        },
        {
            "number": 11,
            "revision": "0a46b06baf2314a57f1a9211f01bf96c95612da3",
            "parents": [
                "5235ae9ab3014bd9161a4ef1e1ce1a75567ffdbe"
            ],
            "ref": "refs/changes/58/41458/11",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1622012322,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "TRIVIAL_REBASE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 42,
                    "deletions": 0
                },
                {
                    "file": "src/storagecommands.cpp",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": -15
                }
            ],
            "sizeInsertions": 65,
            "sizeDeletions": 15
        },
        {
            "number": 12,
            "revision": "d7c55ec78b6f381cd86fc7fc4e1825713fb531de",
            "parents": [
                "5235ae9ab3014bd9161a4ef1e1ce1a75567ffdbe"
            ],
            "ref": "refs/changes/58/41458/12",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1622045086,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "NO_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 42,
                    "deletions": 0
                },
                {
                    "file": "src/storagecommands.cpp",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": -15
                }
            ],
            "sizeInsertions": 65,
            "sizeDeletions": 15
        },
        {
            "number": 13,
            "revision": "023660759207fc67a901abeddf171ef62cc72706",
            "parents": [
                "5235ae9ab3014bd9161a4ef1e1ce1a75567ffdbe"
            ],
            "ref": "refs/changes/58/41458/13",
            "uploader": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "createdOn": 1623018145,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "NO_CHANGE",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 42,
                    "deletions": 0
                },
                {
                    "file": "src/storagecommands.cpp",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": -15
                }
            ],
            "sizeInsertions": 65,
            "sizeDeletions": 15
        },
        {
            "number": 14,
            "revision": "7b5b907bc696572cba043c49b94e3f044db8c1a9",
            "parents": [
                "24df90f705920e1a745d5a2270dccf90be90d954"
            ],
            "ref": "refs/changes/58/41458/14",
            "uploader": {
                "name": "AppaRao Puli",
                "email": "apparao.puli@linux.intel.com",
                "username": "apuli1"
            },
            "createdOn": 1623986272,
            "author": {
                "name": "Willy Tu",
                "email": "wltu@google.com",
                "username": "wltu"
            },
            "kind": "TRIVIAL_REBASE",
            "comments": [
                {
                    "file": "src/storagecommands.cpp",
                    "line": 694,
                    "reviewer": {
                        "name": "Willy Tu",
                        "email": "wltu@google.com",
                        "username": "wltu"
                    },
                    "message": "Do we want to submit this now?\n\nI don't think the dbus-sensors or entity side are supporting the encoding/decodding that this used yet."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 42,
                    "deletions": 0
                },
                {
                    "file": "src/storagecommands.cpp",
                    "type": "MODIFIED",
                    "insertions": 23,
                    "deletions": -15
                }
            ],
            "sizeInsertions": 65,
            "sizeDeletions": 15
        }
    ]
}