{
    "project": "openbmc/pldm",
    "branch": "master",
    "id": "I2ac70b686d1468b9c7484d5bf2543db2b4f33ded",
    "number": 72818,
    "subject": "pldmd: fix crash when re-request D-Bus name",
    "owner": {
        "name": "Thu Nguyen",
        "email": "thu@os.amperecomputing.com",
        "username": "ThuBaNguyen"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/pldm/+/72818",
    "hashtags": [],
    "createdOn": 1721138570,
    "lastUpdated": 1721200146,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1721138570,
            "reviewer": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1721138601,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1721138602,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1721139059,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/88081/ : SUCCESS"
        },
        {
            "timestamp": 1721139999,
            "reviewer": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "message": "Uploaded patch set 2: Commit message was updated.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1721140037,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1721140037,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1721140453,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/88082/ : SUCCESS"
        },
        {
            "timestamp": 1721199582,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1721200008,
            "reviewer": {
                "name": "Pavithra Barithaya",
                "email": "pavithrabarithaya07@gmail.com",
                "username": "Pavithrab7"
            },
            "message": "Patch Set 2: Code-Review+1"
        },
        {
            "timestamp": 1721200141,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Patch Set 2: Code-Review+2\n\n(1 comment)"
        },
        {
            "timestamp": 1721200146,
            "reviewer": {
                "name": "ManojKiran Eda",
                "email": "manojkiran.eda@gmail.com",
                "username": "manojkiraneda"
            },
            "message": "Change has been successfully merged"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "bd4e408e13c48606d38c6d89b582423ae6cbfdc7",
            "parents": [
                "de2a132aee45d077e83f59ede182a6fb73613aeb"
            ],
            "ref": "refs/changes/18/72818/1",
            "uploader": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "createdOn": 1721138570,
            "author": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "type": "MODIFIED",
                    "insertions": 20,
                    "deletions": -3
                },
                {
                    "file": "libpldmresponder/bios_config.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 44,
            "sizeDeletions": 4
        },
        {
            "number": 2,
            "revision": "3f5a969cee42ab9bfdf79707bfe3ad8b6782ec7b",
            "parents": [
                "de2a132aee45d077e83f59ede182a6fb73613aeb"
            ],
            "ref": "refs/changes/18/72818/2",
            "uploader": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "createdOn": 1721139999,
            "author": {
                "name": "Thu Nguyen",
                "email": "thu@os.amperecomputing.com",
                "username": "ThuBaNguyen"
            },
            "kind": "NO_CODE_CHANGE",
            "comments": [
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 98,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "can we use list_names_acquired() https://github.com/openbmc/sdbusplus/blob/03b2c26c8d0b97e943a0418378abbe4828184423/include/sdbusplus/bus.hpp#L493 , and if it returns `null` then we could call request_name ?\n\n\nmay be something like:\n\n```\nauto& bus = pldm::utils::DBusHandler::getBus();\nif(!bus.list_names_acquired())\n{\n  bus.request_name();\n  \n}\n\n```"
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "line": 98,
                    "reviewer": {
                        "name": "ManojKiran Eda",
                        "email": "manojkiran.eda@gmail.com",
                        "username": "manojkiraneda"
                    },
                    "message": "I stand corrected, this might still need a try - catch since request_name can always generate an exception , so catching the expect will cover all the error cases."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 22,
                    "deletions": 0
                },
                {
                    "file": "pldmd/pldmd.cpp",
                    "type": "MODIFIED",
                    "insertions": 20,
                    "deletions": -3
                },
                {
                    "file": "libpldmresponder/bios_config.cpp",
                    "type": "MODIFIED",
                    "insertions": 4,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 46,
            "sizeDeletions": 4
        }
    ]
}