{
    "project": "openbmc/obmc-ikvm",
    "branch": "master",
    "id": "I27a495811e9aa71db5292952ed5bc44a691ec1d6",
    "number": 71011,
    "subject": "meson: Support local build",
    "owner": {
        "name": "Konstantin Aladyshev",
        "email": "aladyshev22@gmail.com",
        "username": "Kostr"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/obmc-ikvm/+/71011",
    "hashtags": [],
    "createdOn": 1713864247,
    "lastUpdated": 1714497781,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1713864247,
            "reviewer": {
                "name": "Konstantin Aladyshev",
                "email": "aladyshev22@gmail.com",
                "username": "Kostr"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1713864287,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1713864287,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1713864323,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/83243/ : SUCCESS"
        },
        {
            "timestamp": 1713865798,
            "reviewer": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "message": "Patch Set 1:\n\n(2 comments)"
        },
        {
            "timestamp": 1713869390,
            "reviewer": {
                "name": "Konstantin Aladyshev",
                "email": "aladyshev22@gmail.com",
                "username": "Kostr"
            },
            "message": "Uploaded patch set 2.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1713869412,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1713869412,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1713869448,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/83245/ : SUCCESS"
        },
        {
            "timestamp": 1713869659,
            "reviewer": {
                "name": "Konstantin Aladyshev",
                "email": "aladyshev22@gmail.com",
                "username": "Kostr"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1714445233,
            "reviewer": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1714469150,
            "reviewer": {
                "name": "Konstantin Aladyshev",
                "email": "aladyshev22@gmail.com",
                "username": "Kostr"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1714469436,
            "reviewer": {
                "name": "Konstantin Aladyshev",
                "email": "aladyshev22@gmail.com",
                "username": "Kostr"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1714492227,
            "reviewer": {
                "name": "Zev Weiss",
                "email": "zev@bewilderbeest.net",
                "username": "zevweiss"
            },
            "message": "Patch Set 2: Code-Review+2\n\n(1 comment)"
        },
        {
            "timestamp": 1714497781,
            "reviewer": {
                "name": "Konstantin Aladyshev",
                "email": "aladyshev22@gmail.com",
                "username": "Kostr"
            },
            "message": "Change has been successfully merged"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "16b5e3880d5f051e815e353c9595c5988ec7228c",
            "parents": [
                "63cef2a26af47b077abc7ccc0abf662ca52fe924"
            ],
            "ref": "refs/changes/11/71011/1",
            "uploader": {
                "name": "Konstantin Aladyshev",
                "email": "aladyshev22@gmail.com",
                "username": "Kostr"
            },
            "createdOn": 1713864247,
            "author": {
                "name": "Konstantin Aladyshev",
                "email": "aladyshev22@gmail.com",
                "username": "Kostr"
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "subprojects/boost.wrap",
                    "line": 4,
                    "reviewer": {
                        "name": "Zev Weiss",
                        "email": "zev@bewilderbeest.net",
                        "username": "zevweiss"
                    },
                    "message": "How'd we end up with this particular URL?  Other repos (E-M and dbus-sensors at least) appear to be using yoctoproject.org, which is a lot more familiar-looking, whereas I have no idea what jfrog.io is."
                },
                {
                    "file": "subprojects/boost.wrap",
                    "line": 4,
                    "reviewer": {
                        "name": "Konstantin Aladyshev",
                        "email": "aladyshev22@gmail.com",
                        "username": "Kostr"
                    },
                    "message": "I have asked this question at the beginning of my refactoring process.\n\nPlease check out answer here https://discord.com/channels/775381525260664832/855566794994221117/1223402897224634379\n\n```\nedtanous \u2014 30.03.2024 1:56\n\nhttps://github.com/boostorg/boost/releases/download/ - cmake enabled boost\nhttps://boostorg.jfrog.io/artifactory/main/release/ - non-cmake boost \"classic\" package (with b2)\nhttps://downloads.yoctoproject.org/mirror/sources/ - Yocto mirror of non-cmake boost (probably created back when boost was running out of bandwidth).\n\nIf the project uses any components that require a library (boost::url, boost::coroutine) use the cmake enabled one.\nIf the project doesn't use library components, you can use either cmake or non.  We could arguably standardize on the cmake version, but it's so new, and had to be included hastily and without warning, so we haven't really propagated it everywhere yet.\nyocto mirror could probably be removed for now.  We can add it back if boost runs out of bandwidth again, although if we're pulling from github, I seriously doubt Microsoft will run out of bandwidth.\n```"
                },
                {
                    "file": "subprojects/boost.wrap",
                    "line": 4,
                    "reviewer": {
                        "name": "Zev Weiss",
                        "email": "zev@bewilderbeest.net",
                        "username": "zevweiss"
                    },
                    "message": "Okay, thanks -- though from Ed's comment there it sounds like github might be a (slightly) preferable choice?  (One less repo to update if we do try to standardize on the cmake version, anyway.)  Any reason we shouldn't go ahead and use that from that start?"
                },
                {
                    "file": "subprojects/boost.wrap",
                    "line": 4,
                    "reviewer": {
                        "name": "Konstantin Aladyshev",
                        "email": "aladyshev22@gmail.com",
                        "username": "Kostr"
                    },
                    "message": "The boilerplate code for the cmake variant can be quite big (example https://gerrit.openbmc.org/c/openbmc/phosphor-host-ipmid/+/70593/2/meson.build) and probably needs some manual handling for every project, that is why I've decided to use \"classic\" boost package for the cases where it is enough.\n\nWith that approach I've already fixed most of the OpenBMC projects (https://github.com/openbmc/openbmc/issues/3993) so I don't think it would be reasonable to change the approach now."
                },
                {
                    "file": "subprojects/boost.wrap",
                    "line": 4,
                    "reviewer": {
                        "name": "Konstantin Aladyshev",
                        "email": "aladyshev22@gmail.com",
                        "username": "Kostr"
                    },
                    "message": "Also since there is no formal agreement between the preferred URL, I didn't make any patches to replace `https://downloads.yoctoproject.org/mirror/sources` for example.\n\nMy goal right now is to simply make every project build locally."
                },
                {
                    "file": "subprojects/boost.wrap",
                    "line": 4,
                    "reviewer": {
                        "name": "Zev Weiss",
                        "email": "zev@bewilderbeest.net",
                        "username": "zevweiss"
                    },
                    "message": "Alright, that's fair enough I suppose..."
                },
                {
                    "file": "subprojects/packagefiles/boost/meson.build",
                    "line": 9,
                    "reviewer": {
                        "name": "Zev Weiss",
                        "email": "zev@bewilderbeest.net",
                        "username": "zevweiss"
                    },
                    "message": "Indentation looks kind of all over the place here -- I'm not sure offhand what the general formatting/style expectations for meson are, but let's at least make it vaguely consistent..."
                },
                {
                    "file": "subprojects/packagefiles/boost/meson.build",
                    "line": 9,
                    "reviewer": {
                        "name": "Konstantin Aladyshev",
                        "email": "aladyshev22@gmail.com",
                        "username": "Kostr"
                    },
                    "message": "Ooops, sorry, missed this one.\n\nFixed"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": ".gitignore",
                    "type": "ADDED",
                    "insertions": 5,
                    "deletions": 0
                },
                {
                    "file": "subprojects/packagefiles/boost/meson.build",
                    "type": "ADDED",
                    "insertions": 11,
                    "deletions": 0
                },
                {
                    "file": "subprojects/boost.wrap",
                    "type": "ADDED",
                    "insertions": 11,
                    "deletions": 0
                },
                {
                    "file": "subprojects/phosphor-logging.wrap",
                    "type": "ADDED",
                    "insertions": 6,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 1
        },
        {
            "number": 2,
            "revision": "033b18e03fec76a026df1b71fbc2e00f2ee6fece",
            "parents": [
                "63cef2a26af47b077abc7ccc0abf662ca52fe924"
            ],
            "ref": "refs/changes/11/71011/2",
            "uploader": {
                "name": "Konstantin Aladyshev",
                "email": "aladyshev22@gmail.com",
                "username": "Kostr"
            },
            "createdOn": 1713869390,
            "author": {
                "name": "Konstantin Aladyshev",
                "email": "aladyshev22@gmail.com",
                "username": "Kostr"
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 16,
                    "deletions": 0
                },
                {
                    "file": ".gitignore",
                    "type": "ADDED",
                    "insertions": 5,
                    "deletions": 0
                },
                {
                    "file": "subprojects/packagefiles/boost/meson.build",
                    "type": "ADDED",
                    "insertions": 11,
                    "deletions": 0
                },
                {
                    "file": "subprojects/boost.wrap",
                    "type": "ADDED",
                    "insertions": 11,
                    "deletions": 0
                },
                {
                    "file": "subprojects/phosphor-logging.wrap",
                    "type": "ADDED",
                    "insertions": 6,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "MODIFIED",
                    "insertions": 2,
                    "deletions": -1
                }
            ],
            "sizeInsertions": 51,
            "sizeDeletions": 1
        }
    ]
}