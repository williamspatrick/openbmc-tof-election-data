{
    "project": "openbmc/phosphor-u-boot-env-mgr",
    "branch": "master",
    "id": "Id10d49aea4d488e81f459221bfa5755e29d60608",
    "number": 71510,
    "subject": "switching from cmakeLists to meson build scripts",
    "owner": {
        "name": "Christopher Sides",
        "email": "christopher.sides@hpe.com",
        "username": "csides-hpe"
    },
    "url": "https://gerrit.openbmc.org/c/openbmc/phosphor-u-boot-env-mgr/+/71510",
    "hashtags": [],
    "createdOn": 1715976999,
    "lastUpdated": 1723741014,
    "open": false,
    "status": "MERGED",
    "comments": [
        {
            "timestamp": 1715976999,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Uploaded patch set 1."
        },
        {
            "timestamp": 1715977023,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1715977023,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: -Ok-To-Test"
        },
        {
            "timestamp": 1715977039,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 1: Verified-1\n\nBuild Failed \n\nhttps://jenkins.openbmc.org/job/ci-repository/84563/ : FAILURE"
        },
        {
            "timestamp": 1715977280,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Uploaded patch set 2.\n\nOutdated Votes:\n* Verified-1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1715977319,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1715977319,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: -Ok-To-Test"
        },
        {
            "timestamp": 1715977369,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 2: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/84564/ : SUCCESS"
        },
        {
            "timestamp": 1715977580,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Patch Set 2:\n\n(1 comment)"
        },
        {
            "timestamp": 1715979422,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Patch Set 2:\n\n(2 comments)"
        },
        {
            "timestamp": 1715979469,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Patch Set 3: Published edit on patch set 2.\n\nOutdated Votes:\n* Verified+1 (copy condition: \"changekind:NO_CHANGE\")\n"
        },
        {
            "timestamp": 1715979518,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Ok-To-Test+1\n\nUser approved, CI ok to start"
        },
        {
            "timestamp": 1715979518,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: -Ok-To-Test"
        },
        {
            "timestamp": 1715979569,
            "reviewer": {
                "name": "OpenBMC CI",
                "email": "openbmcbump-ci@yahoo.com",
                "username": "jenkins-openbmc-ci"
            },
            "message": "Patch Set 3: Verified+1\n\nBuild Successful \n\nhttps://jenkins.openbmc.org/job/ci-repository/84576/ : SUCCESS"
        },
        {
            "timestamp": 1716214893,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1723586668,
            "reviewer": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1723588426,
            "reviewer": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "message": "Patch Set 3:\n\n(1 comment)"
        },
        {
            "timestamp": 1723740904,
            "reviewer": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "message": "Patch Set 3: Code-Review+2\n\n(1 comment)"
        },
        {
            "timestamp": 1723741014,
            "reviewer": {
                "name": "Vernon Mauery",
                "email": "vernon.mauery@linux.intel.com",
                "username": "vmauery"
            },
            "message": "Change has been successfully merged"
        }
    ],
    "patchSets": [
        {
            "number": 1,
            "revision": "39fdcfbcaf665e1360f254c54eafd84f1e50027f",
            "parents": [
                "fb72909d4fed4e1ffddb5826a437196304618da3"
            ],
            "ref": "refs/changes/10/71510/1",
            "uploader": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "createdOn": 1715976999,
            "author": {
                "name": "Chris Sides",
                "email": "Christopher.Sides@hpe.com",
                "username": ""
            },
            "kind": "REWORK",
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "service_files/xyz.openbmc_project.U_Boot.Environment.Manager.service",
                    "fileOld": "xyz.openbmc_project.U_Boot.Environment.Manager.service",
                    "type": "RENAMED",
                    "insertions": 0,
                    "deletions": 0
                },
                {
                    "file": "CMakeLists.txt",
                    "type": "DELETED",
                    "insertions": 0,
                    "deletions": -53
                },
                {
                    "file": "src/meson.build",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "include/meson.build",
                    "type": "ADDED",
                    "insertions": 3,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "ADDED",
                    "insertions": 38,
                    "deletions": 0
                },
                {
                    "file": "service_files/meson.build",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 91,
            "sizeDeletions": 53
        },
        {
            "number": 2,
            "revision": "bf28570705eb6eb2a80be8bd1f5bbff63f2588d3",
            "parents": [
                "fb72909d4fed4e1ffddb5826a437196304618da3"
            ],
            "ref": "refs/changes/10/71510/2",
            "uploader": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "createdOn": 1715977280,
            "author": {
                "name": "Chris Sides",
                "email": "Christopher.Sides@hpe.com",
                "username": ""
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Christopher Sides",
                        "email": "christopher.sides@hpe.com",
                        "username": "csides-hpe"
                    },
                    "message": "The new meson build scripts work when combined with a recipe, but just before uploading to gerrit, I discovered the local CI tool throws out errors along the lines of:\n\n/usr/local/include/boost/asio/io_context.hpp:19:0: information: Include file: <cstddef> not found. Please note: Cppcheck does not need standard library headers to get proper results. [missingIncludeSystem]\n#include <cstddef>\n^\n/usr/local/include/boost/asio/io_context.hpp:20:0: information: Include file: <stdexcept> not found. Please note: Cppcheck does not need standard library headers to get proper results. [missingIncludeSystem]\n#include <stdexcept>\n^\n\nwhen pointed at the repo. The 'errors' are all about unmodified code that's already in the repo. I plan to revsit these errors later, but didn't want them to stop me from putting the code up for review and discussion."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Christopher Sides",
                        "email": "christopher.sides@hpe.com",
                        "username": "csides-hpe"
                    },
                    "message": "Huh. Judging by the +1 for 'Verified', it looks like my local CI tools are throwing out errors the gerrit-based ones aren't. I'll have to investigate that on my end, looks like..."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Christopher Sides",
                        "email": "christopher.sides@hpe.com",
                        "username": "csides-hpe"
                    },
                    "message": "A bit of additional justification for a 'cmake -> meson' switch in the form of a TOF proposal (still open, but seemingly mostly in agreement re: general direction)\n\nhttps://github.com/openbmc/technical-oversight-forum/issues/4\n\nAmong the most recent comments in the thread:\n\"I would happy approve a \"Meson patches should be preferred to cmake and autotools\" vote,\""
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Christopher Sides",
                        "email": "christopher.sides@hpe.com",
                        "username": "csides-hpe"
                    },
                    "message": "Re-marking this thread as 'unresolved' just in case there's debate to be had here."
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "meson_options.txt",
                    "type": "ADDED",
                    "insertions": 2,
                    "deletions": 0
                },
                {
                    "file": "service_files/xyz.openbmc_project.U_Boot.Environment.Manager.service",
                    "fileOld": "xyz.openbmc_project.U_Boot.Environment.Manager.service",
                    "type": "RENAMED",
                    "insertions": 0,
                    "deletions": 0
                },
                {
                    "file": "CMakeLists.txt",
                    "type": "DELETED",
                    "insertions": 0,
                    "deletions": -53
                },
                {
                    "file": "src/meson.build",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "include/meson.build",
                    "type": "ADDED",
                    "insertions": 3,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "ADDED",
                    "insertions": 38,
                    "deletions": 0
                },
                {
                    "file": "service_files/meson.build",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 93,
            "sizeDeletions": 53
        },
        {
            "number": 3,
            "revision": "516faacd7f8d224f15cc041cc486290b43cf4911",
            "parents": [
                "fb72909d4fed4e1ffddb5826a437196304618da3"
            ],
            "ref": "refs/changes/10/71510/3",
            "uploader": {
                "name": "Christopher Sides",
                "email": "christopher.sides@hpe.com",
                "username": "csides-hpe"
            },
            "createdOn": 1715979469,
            "author": {
                "name": "Chris Sides",
                "email": "Christopher.Sides@hpe.com",
                "username": ""
            },
            "kind": "REWORK",
            "comments": [
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Vernon Mauery",
                        "email": "vernon.mauery@linux.intel.com",
                        "username": "vmauery"
                    },
                    "message": "This probably needs to be a three-step process:\n1) add meson build support\n2) change the bitbake recipe to use meson\n3) remove cmake support"
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Christopher Sides",
                        "email": "christopher.sides@hpe.com",
                        "username": "csides-hpe"
                    },
                    "message": "Are there any existing recipes for this repo that need updating? I had the impression there was not when I searched @ github.com/openbmc/openbmc for references to it.\n\nIf I'm remembering right, I ended up creating a recipe from scratch on my machine so I could 'devtool modify' and build the repo with CMakeLists -- then changed it to use meson and confirmed it worked before pushing this commit to Gerrit.\n\nI figured the meson recipe I put together would be the last thing pushed (once the meson changes to this repo are accepted), since a recipe for this repo doesn't exist yet and isn't referenced by any existing platforms in openbmc/openbmc as far as I know."
                },
                {
                    "file": "/PATCHSET_LEVEL",
                    "line": 0,
                    "reviewer": {
                        "name": "Vernon Mauery",
                        "email": "vernon.mauery@linux.intel.com",
                        "username": "vmauery"
                    },
                    "message": "Well, in that case, maybe it's not a problem. Also, I will push a recipe to meta-phosphor. \ud83d\ude0a"
                }
            ],
            "files": [
                {
                    "file": "/COMMIT_MSG",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                },
                {
                    "file": "meson_options.txt",
                    "type": "ADDED",
                    "insertions": 1,
                    "deletions": 0
                },
                {
                    "file": "service_files/xyz.openbmc_project.U_Boot.Environment.Manager.service",
                    "fileOld": "xyz.openbmc_project.U_Boot.Environment.Manager.service",
                    "type": "RENAMED",
                    "insertions": 0,
                    "deletions": 0
                },
                {
                    "file": "CMakeLists.txt",
                    "type": "DELETED",
                    "insertions": 0,
                    "deletions": -53
                },
                {
                    "file": "src/meson.build",
                    "type": "ADDED",
                    "insertions": 10,
                    "deletions": 0
                },
                {
                    "file": "include/meson.build",
                    "type": "ADDED",
                    "insertions": 3,
                    "deletions": 0
                },
                {
                    "file": "meson.build",
                    "type": "ADDED",
                    "insertions": 38,
                    "deletions": 0
                },
                {
                    "file": "service_files/meson.build",
                    "type": "ADDED",
                    "insertions": 20,
                    "deletions": 0
                }
            ],
            "sizeInsertions": 92,
            "sizeDeletions": 53
        }
    ]
}